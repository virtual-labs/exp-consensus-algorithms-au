/*! For license information please see main.c9947a9c.js.LICENSE.txt */
!function () { var e = { 3361: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return re } }); var i = function () { function e(e) { var t = this; this._insertTag = function (e) { var n; n = 0 === t.tags.length ? t.insertionPoint ? t.insertionPoint.nextSibling : t.prepend ? t.container.firstChild : t.before : t.tags[t.tags.length - 1].nextSibling, t.container.insertBefore(e, n), t.tags.push(e) }, this.isSpeedy = void 0 === e.speedy || e.speedy, this.tags = [], this.ctr = 0, this.nonce = e.nonce, this.key = e.key, this.container = e.container, this.prepend = e.prepend, this.insertionPoint = e.insertionPoint, this.before = null } var t = e.prototype; return t.hydrate = function (e) { e.forEach(this._insertTag) }, t.insert = function (e) { this.ctr % (this.isSpeedy ? 65e3 : 1) === 0 && this._insertTag(function (e) { var t = document.createElement("style"); return t.setAttribute("data-emotion", e.key), void 0 !== e.nonce && t.setAttribute("nonce", e.nonce), t.appendChild(document.createTextNode("")), t.setAttribute("data-s", ""), t }(this)); var t = this.tags[this.tags.length - 1]; if (this.isSpeedy) { var n = function (e) { if (e.sheet) return e.sheet; for (var t = 0; t < document.styleSheets.length; t++)if (document.styleSheets[t].ownerNode === e) return document.styleSheets[t] }(t); try { n.insertRule(e, n.cssRules.length) } catch (i) { 0 } } else t.appendChild(document.createTextNode(e)); this.ctr++ }, t.flush = function () { this.tags.forEach((function (e) { return e.parentNode && e.parentNode.removeChild(e) })), this.tags = [], this.ctr = 0 }, e }(), r = Math.abs, a = String.fromCharCode, o = Object.assign; function s(e) { return e.trim() } function l(e, t, n) { return e.replace(t, n) } function g(e, t) { return e.indexOf(t) } function c(e, t) { return 0 | e.charCodeAt(t) } function u(e, t, n) { return e.slice(t, n) } function C(e) { return e.length } function d(e) { return e.length } function I(e, t) { return t.push(e), e } var h = 1, A = 1, p = 0, f = 0, m = 0, v = ""; function b(e, t, n, i, r, a, o) { return { value: e, root: t, parent: n, type: i, props: r, children: a, line: h, column: A, length: o, return: "" } } function y(e, t) { return o(b("", null, null, "", null, null, 0), e, { length: -e.length }, t) } function G() { return m = f > 0 ? c(v, --f) : 0, A--, 10 === m && (A = 1, h--), m } function B() { return m = f < p ? c(v, f++) : 0, A++, 10 === m && (A = 1, h++), m } function Z() { return c(v, f) } function w() { return f } function S(e, t) { return u(v, e, t) } function R(e) { switch (e) { case 0: case 9: case 10: case 13: case 32: return 5; case 33: case 43: case 44: case 47: case 62: case 64: case 126: case 59: case 123: case 125: return 4; case 58: return 3; case 34: case 39: case 40: case 91: return 2; case 41: case 93: return 1 }return 0 } function x(e) { return h = A = 1, p = C(v = e), f = 0, [] } function W(e) { return v = "", e } function V(e) { return s(S(f - 1, M(91 === e ? e + 2 : 40 === e ? e + 1 : e))) } function k(e) { for (; (m = Z()) && m < 33;)B(); return R(e) > 2 || R(m) > 3 ? "" : " " } function H(e, t) { for (; --t && B() && !(m < 48 || m > 102 || m > 57 && m < 65 || m > 70 && m < 97);); return S(e, w() + (t < 6 && 32 == Z() && 32 == B())) } function M(e) { for (; B();)switch (m) { case e: return f; case 34: case 39: 34 !== e && 39 !== e && M(m); break; case 40: 41 === e && M(e); break; case 92: B() }return f } function F(e, t) { for (; B() && e + m !== 57 && (e + m !== 84 || 47 !== Z());); return "/*" + S(t, f - 1) + "*" + a(47 === e ? e : B()) } function N(e) { for (; !R(Z());)B(); return S(e, f) } var X = "-ms-", Y = "-moz-", K = "-webkit-", L = "comm", z = "rule", E = "decl", T = "@keyframes"; function _(e, t) { for (var n = "", i = d(e), r = 0; r < i; r++)n += t(e[r], r, e, t) || ""; return n } function U(e, t, n, i) { switch (e.type) { case "@layer": if (e.children.length) break; case "@import": case E: return e.return = e.return || e.value; case L: return ""; case T: return e.return = e.value + "{" + _(e.children, i) + "}"; case z: e.value = e.props.join(",") }return C(n = _(e.children, i)) ? e.return = e.value + "{" + n + "}" : "" } function D(e) { return W(P("", null, null, null, [""], e = x(e), 0, [0], e)) } function P(e, t, n, i, r, o, s, u, d) { for (var h = 0, A = 0, p = s, f = 0, m = 0, v = 0, b = 1, y = 1, S = 1, R = 0, x = "", W = r, M = o, X = i, Y = x; y;)switch (v = R, R = B()) { case 40: if (108 != v && 58 == c(Y, p - 1)) { -1 != g(Y += l(V(R), "&", "&\f"), "&\f") && (S = -1); break } case 34: case 39: case 91: Y += V(R); break; case 9: case 10: case 13: case 32: Y += k(v); break; case 92: Y += H(w() - 1, 7); continue; case 47: switch (Z()) { case 42: case 47: I(O(F(B(), w()), t, n), d); break; default: Y += "/" }break; case 123 * b: u[h++] = C(Y) * S; case 125 * b: case 59: case 0: switch (R) { case 0: case 125: y = 0; case 59 + A: -1 == S && (Y = l(Y, /\f/g, "")), m > 0 && C(Y) - p && I(m > 32 ? j(Y + ";", i, n, p - 1) : j(l(Y, " ", "") + ";", i, n, p - 2), d); break; case 59: Y += ";"; default: if (I(X = J(Y, t, n, h, A, r, u, x, W = [], M = [], p), o), 123 === R) if (0 === A) P(Y, t, X, X, W, o, p, u, M); else switch (99 === f && 110 === c(Y, 3) ? 100 : f) { case 100: case 108: case 109: case 115: P(e, X, X, i && I(J(e, X, X, 0, 0, r, u, x, r, W = [], p), M), r, M, p, u, i ? W : M); break; default: P(Y, X, X, X, [""], M, 0, u, M) } }h = A = m = 0, b = S = 1, x = Y = "", p = s; break; case 58: p = 1 + C(Y), m = v; default: if (b < 1) if (123 == R) --b; else if (125 == R && 0 == b++ && 125 == G()) continue; switch (Y += a(R), R * b) { case 38: S = A > 0 ? 1 : (Y += "\f", -1); break; case 44: u[h++] = (C(Y) - 1) * S, S = 1; break; case 64: 45 === Z() && (Y += V(B())), f = Z(), A = p = C(x = Y += N(w())), R++; break; case 45: 45 === v && 2 == C(Y) && (b = 0) } }return o } function J(e, t, n, i, a, o, g, c, C, I, h) { for (var A = a - 1, p = 0 === a ? o : [""], f = d(p), m = 0, v = 0, y = 0; m < i; ++m)for (var G = 0, B = u(e, A + 1, A = r(v = g[m])), Z = e; G < f; ++G)(Z = s(v > 0 ? p[G] + " " + B : l(B, /&\f/g, p[G]))) && (C[y++] = Z); return b(e, t, n, 0 === a ? z : c, C, I, h) } function O(e, t, n) { return b(e, t, n, L, a(m), u(e, 2, -2), 0) } function j(e, t, n, i) { return b(e, t, n, E, u(e, 0, i), u(e, i + 1, -1), i) } var Q = function (e, t, n) { for (var i = 0, r = 0; i = r, r = Z(), 38 === i && 12 === r && (t[n] = 1), !R(r);)B(); return S(e, f) }, q = function (e, t) { return W(function (e, t) { var n = -1, i = 44; do { switch (R(i)) { case 0: 38 === i && 12 === Z() && (t[n] = 1), e[n] += Q(f - 1, t, n); break; case 2: e[n] += V(i); break; case 4: if (44 === i) { e[++n] = 58 === Z() ? "&\f" : "", t[n] = e[n].length; break } default: e[n] += a(i) } } while (i = B()); return e }(x(e), t)) }, $ = new WeakMap, ee = function (e) { if ("rule" === e.type && e.parent && !(e.length < 1)) { for (var t = e.value, n = e.parent, i = e.column === n.column && e.line === n.line; "rule" !== n.type;)if (!(n = n.parent)) return; if ((1 !== e.props.length || 58 === t.charCodeAt(0) || $.get(n)) && !i) { $.set(e, !0); for (var r = [], a = q(t, r), o = n.props, s = 0, l = 0; s < a.length; s++)for (var g = 0; g < o.length; g++, l++)e.props[l] = r[s] ? a[s].replace(/&\f/g, o[g]) : o[g] + " " + a[s] } } }, te = function (e) { if ("decl" === e.type) { var t = e.value; 108 === t.charCodeAt(0) && 98 === t.charCodeAt(2) && (e.return = "", e.value = "") } }; function ne(e, t) { switch (function (e, t) { return 45 ^ c(e, 0) ? (((t << 2 ^ c(e, 0)) << 2 ^ c(e, 1)) << 2 ^ c(e, 2)) << 2 ^ c(e, 3) : 0 }(e, t)) { case 5103: return K + "print-" + e + e; case 5737: case 4201: case 3177: case 3433: case 1641: case 4457: case 2921: case 5572: case 6356: case 5844: case 3191: case 6645: case 3005: case 6391: case 5879: case 5623: case 6135: case 4599: case 4855: case 4215: case 6389: case 5109: case 5365: case 5621: case 3829: return K + e + e; case 5349: case 4246: case 4810: case 6968: case 2756: return K + e + Y + e + X + e + e; case 6828: case 4268: return K + e + X + e + e; case 6165: return K + e + X + "flex-" + e + e; case 5187: return K + e + l(e, /(\w+).+(:[^]+)/, K + "box-$1$2" + X + "flex-$1$2") + e; case 5443: return K + e + X + "flex-item-" + l(e, /flex-|-self/, "") + e; case 4675: return K + e + X + "flex-line-pack" + l(e, /align-content|flex-|-self/, "") + e; case 5548: return K + e + X + l(e, "shrink", "negative") + e; case 5292: return K + e + X + l(e, "basis", "preferred-size") + e; case 6060: return K + "box-" + l(e, "-grow", "") + K + e + X + l(e, "grow", "positive") + e; case 4554: return K + l(e, /([^-])(transform)/g, "$1" + K + "$2") + e; case 6187: return l(l(l(e, /(zoom-|grab)/, K + "$1"), /(image-set)/, K + "$1"), e, "") + e; case 5495: case 3959: return l(e, /(image-set\([^]*)/, K + "$1$`$1"); case 4968: return l(l(e, /(.+:)(flex-)?(.*)/, K + "box-pack:$3" + X + "flex-pack:$3"), /s.+-b[^;]+/, "justify") + K + e + e; case 4095: case 3583: case 4068: case 2532: return l(e, /(.+)-inline(.+)/, K + "$1$2") + e; case 8116: case 7059: case 5753: case 5535: case 5445: case 5701: case 4933: case 4677: case 5533: case 5789: case 5021: case 4765: if (C(e) - 1 - t > 6) switch (c(e, t + 1)) { case 109: if (45 !== c(e, t + 4)) break; case 102: return l(e, /(.+:)(.+)-([^]+)/, "$1" + K + "$2-$3$1" + Y + (108 == c(e, t + 3) ? "$3" : "$2-$3")) + e; case 115: return ~g(e, "stretch") ? ne(l(e, "stretch", "fill-available"), t) + e : e }break; case 4949: if (115 !== c(e, t + 1)) break; case 6444: switch (c(e, C(e) - 3 - (~g(e, "!important") && 10))) { case 107: return l(e, ":", ":" + K) + e; case 101: return l(e, /(.+:)([^;!]+)(;|!.+)?/, "$1" + K + (45 === c(e, 14) ? "inline-" : "") + "box$3$1" + K + "$2$3$1" + X + "$2box$3") + e }break; case 5936: switch (c(e, t + 11)) { case 114: return K + e + X + l(e, /[svh]\w+-[tblr]{2}/, "tb") + e; case 108: return K + e + X + l(e, /[svh]\w+-[tblr]{2}/, "tb-rl") + e; case 45: return K + e + X + l(e, /[svh]\w+-[tblr]{2}/, "lr") + e }return K + e + X + e + e }return e } var ie = [function (e, t, n, i) { if (e.length > -1 && !e.return) switch (e.type) { case E: e.return = ne(e.value, e.length); break; case T: return _([y(e, { value: l(e.value, "@", "@" + K) })], i); case z: if (e.length) return function (e, t) { return e.map(t).join("") }(e.props, (function (t) { switch (function (e, t) { return (e = t.exec(e)) ? e[0] : e }(t, /(::plac\w+|:read-\w+)/)) { case ":read-only": case ":read-write": return _([y(e, { props: [l(t, /:(read-\w+)/, ":-moz-$1")] })], i); case "::placeholder": return _([y(e, { props: [l(t, /:(plac\w+)/, ":" + K + "input-$1")] }), y(e, { props: [l(t, /:(plac\w+)/, ":-moz-$1")] }), y(e, { props: [l(t, /:(plac\w+)/, X + "input-$1")] })], i) }return "" })) } }], re = function (e) { var t = e.key; if ("css" === t) { var n = document.querySelectorAll("style[data-emotion]:not([data-s])"); Array.prototype.forEach.call(n, (function (e) { -1 !== e.getAttribute("data-emotion").indexOf(" ") && (document.head.appendChild(e), e.setAttribute("data-s", "")) })) } var r = e.stylisPlugins || ie; var a, o, s = {}, l = []; a = e.container || document.head, Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="' + t + ' "]'), (function (e) { for (var t = e.getAttribute("data-emotion").split(" "), n = 1; n < t.length; n++)s[t[n]] = !0; l.push(e) })); var g, c, u = [U, (c = function (e) { g.insert(e) }, function (e) { e.root || (e = e.return) && c(e) })], C = function (e) { var t = d(e); return function (n, i, r, a) { for (var o = "", s = 0; s < t; s++)o += e[s](n, i, r, a) || ""; return o } }([ee, te].concat(r, u)); o = function (e, t, n, i) { g = n, _(D(e ? e + "{" + t.styles + "}" : t.styles), C), i && (I.inserted[t.name] = !0) }; var I = { key: t, sheet: new i({ key: t, container: a, nonce: e.nonce, speedy: e.speedy, prepend: e.prepend, insertionPoint: e.insertionPoint }), nonce: e.nonce, inserted: s, registered: {}, insert: o }; return I.sheet.hydrate(l), I } }, 9791: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return a } }); var i = n(9797), r = /^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/, a = (0, i.Z)((function (e) { return r.test(e) || 111 === e.charCodeAt(0) && 110 === e.charCodeAt(1) && e.charCodeAt(2) < 91 })) }, 9797: function (e, t, n) { "use strict"; function i(e) { var t = Object.create(null); return function (n) { return void 0 === t[n] && (t[n] = e(n)), t[n] } } n.d(t, { Z: function () { return i } }) }, 2564: function (e, t, n) { "use strict"; n.d(t, { E: function () { return h }, T: function () { return u }, c: function () { return d }, h: function () { return l }, w: function () { return c } }); var i = n(2791), r = n(3361), a = n(5438), o = n(9140), s = n(2561), l = {}.hasOwnProperty, g = i.createContext("undefined" !== typeof HTMLElement ? (0, r.Z)({ key: "css" }) : null); g.Provider; var c = function (e) { return (0, i.forwardRef)((function (t, n) { var r = (0, i.useContext)(g); return e(t, r, n) })) }; var u = i.createContext({}); var C = "__EMOTION_TYPE_PLEASE_DO_NOT_USE__", d = function (e, t) { var n = {}; for (var i in t) l.call(t, i) && (n[i] = t[i]); return n[C] = e, n }, I = function (e) { var t = e.cache, n = e.serialized, i = e.isStringTag; return (0, a.hC)(t, n, i), (0, s.L)((function () { return (0, a.My)(t, n, i) })), null }; var h = c((function (e, t, n) { var r = e.css; "string" === typeof r && void 0 !== t.registered[r] && (r = t.registered[r]); var s = e[C], g = [r], c = ""; "string" === typeof e.className ? c = (0, a.fp)(t.registered, g, e.className) : null != e.className && (c = e.className + " "); var d = (0, o.O)(g, void 0, i.useContext(u)); c += t.key + "-" + d.name; var h = {}; for (var A in e) l.call(e, A) && "css" !== A && A !== C && (h[A] = e[A]); return h.ref = n, h.className = c, i.createElement(i.Fragment, null, i.createElement(I, { cache: t, serialized: d, isStringTag: "string" === typeof s }), i.createElement(s, h)) })) }, 9140: function (e, t, n) { "use strict"; n.d(t, { O: function () { return I } }); var i = { animationIterationCount: 1, aspectRatio: 1, borderImageOutset: 1, borderImageSlice: 1, borderImageWidth: 1, boxFlex: 1, boxFlexGroup: 1, boxOrdinalGroup: 1, columnCount: 1, columns: 1, flex: 1, flexGrow: 1, flexPositive: 1, flexShrink: 1, flexNegative: 1, flexOrder: 1, gridRow: 1, gridRowEnd: 1, gridRowSpan: 1, gridRowStart: 1, gridColumn: 1, gridColumnEnd: 1, gridColumnSpan: 1, gridColumnStart: 1, msGridRow: 1, msGridRowSpan: 1, msGridColumn: 1, msGridColumnSpan: 1, fontWeight: 1, lineHeight: 1, opacity: 1, order: 1, orphans: 1, tabSize: 1, widows: 1, zIndex: 1, zoom: 1, WebkitLineClamp: 1, fillOpacity: 1, floodOpacity: 1, stopOpacity: 1, strokeDasharray: 1, strokeDashoffset: 1, strokeMiterlimit: 1, strokeOpacity: 1, strokeWidth: 1 }, r = n(9797), a = /[A-Z]|^ms/g, o = /_EMO_([^_]+?)_([^]*?)_EMO_/g, s = function (e) { return 45 === e.charCodeAt(1) }, l = function (e) { return null != e && "boolean" !== typeof e }, g = (0, r.Z)((function (e) { return s(e) ? e : e.replace(a, "-$&").toLowerCase() })), c = function (e, t) { switch (e) { case "animation": case "animationName": if ("string" === typeof t) return t.replace(o, (function (e, t, n) { return C = { name: t, styles: n, next: C }, t })) }return 1 === i[e] || s(e) || "number" !== typeof t || 0 === t ? t : t + "px" }; function u(e, t, n) { if (null == n) return ""; if (void 0 !== n.__emotion_styles) return n; switch (typeof n) { case "boolean": return ""; case "object": if (1 === n.anim) return C = { name: n.name, styles: n.styles, next: C }, n.name; if (void 0 !== n.styles) { var i = n.next; if (void 0 !== i) for (; void 0 !== i;)C = { name: i.name, styles: i.styles, next: C }, i = i.next; return n.styles + ";" } return function (e, t, n) { var i = ""; if (Array.isArray(n)) for (var r = 0; r < n.length; r++)i += u(e, t, n[r]) + ";"; else for (var a in n) { var o = n[a]; if ("object" !== typeof o) null != t && void 0 !== t[o] ? i += a + "{" + t[o] + "}" : l(o) && (i += g(a) + ":" + c(a, o) + ";"); else if (!Array.isArray(o) || "string" !== typeof o[0] || null != t && void 0 !== t[o[0]]) { var s = u(e, t, o); switch (a) { case "animation": case "animationName": i += g(a) + ":" + s + ";"; break; default: i += a + "{" + s + "}" } } else for (var C = 0; C < o.length; C++)l(o[C]) && (i += g(a) + ":" + c(a, o[C]) + ";") } return i }(e, t, n); case "function": if (void 0 !== e) { var r = C, a = n(e); return C = r, u(e, t, a) } }if (null == t) return n; var o = t[n]; return void 0 !== o ? o : n } var C, d = /label:\s*([^\s;\n{]+)\s*(;|$)/g; var I = function (e, t, n) { if (1 === e.length && "object" === typeof e[0] && null !== e[0] && void 0 !== e[0].styles) return e[0]; var i = !0, r = ""; C = void 0; var a = e[0]; null == a || void 0 === a.raw ? (i = !1, r += u(n, t, a)) : r += a[0]; for (var o = 1; o < e.length; o++)r += u(n, t, e[o]), i && (r += a[o]); d.lastIndex = 0; for (var s, l = ""; null !== (s = d.exec(r));)l += "-" + s[1]; var g = function (e) { for (var t, n = 0, i = 0, r = e.length; r >= 4; ++i, r -= 4)t = 1540483477 * (65535 & (t = 255 & e.charCodeAt(i) | (255 & e.charCodeAt(++i)) << 8 | (255 & e.charCodeAt(++i)) << 16 | (255 & e.charCodeAt(++i)) << 24)) + (59797 * (t >>> 16) << 16), n = 1540483477 * (65535 & (t ^= t >>> 24)) + (59797 * (t >>> 16) << 16) ^ 1540483477 * (65535 & n) + (59797 * (n >>> 16) << 16); switch (r) { case 3: n ^= (255 & e.charCodeAt(i + 2)) << 16; case 2: n ^= (255 & e.charCodeAt(i + 1)) << 8; case 1: n = 1540483477 * (65535 & (n ^= 255 & e.charCodeAt(i))) + (59797 * (n >>> 16) << 16) }return (((n = 1540483477 * (65535 & (n ^= n >>> 13)) + (59797 * (n >>> 16) << 16)) ^ n >>> 15) >>> 0).toString(36) }(r) + l; return { name: g, styles: r, next: C } } }, 2561: function (e, t, n) { "use strict"; var i; n.d(t, { L: function () { return o } }); var r = n(2791), a = !!(i || (i = n.t(r, 2))).useInsertionEffect && (i || (i = n.t(r, 2))).useInsertionEffect, o = a || function (e) { return e() }; a || r.useLayoutEffect }, 5438: function (e, t, n) { "use strict"; n.d(t, { My: function () { return a }, fp: function () { return i }, hC: function () { return r } }); function i(e, t, n) { var i = ""; return n.split(" ").forEach((function (n) { void 0 !== e[n] ? t.push(e[n] + ";") : i += n + " " })), i } var r = function (e, t, n) { var i = e.key + "-" + t.name; !1 === n && void 0 === e.registered[i] && (e.registered[i] = t.styles) }, a = function (e, t, n) { r(e, t, n); var i = e.key + "-" + t.name; if (void 0 === e.inserted[t.name]) { var a = t; do { e.insert(t === a ? "." + i : "", a, e.sheet, !0), a = a.next } while (void 0 !== a) } } }, 8202: function (e, t) { "use strict"; var n = 60103, i = 60106, r = 60107, a = 60108, o = 60114, s = 60109, l = 60110, g = 60112, c = 60113, u = 60120, C = 60115, d = 60116, I = 60121, h = 60122, A = 60117, p = 60129, f = 60131; if ("function" === typeof Symbol && Symbol.for) { var m = Symbol.for; n = m("react.element"), i = m("react.portal"), r = m("react.fragment"), a = m("react.strict_mode"), o = m("react.profiler"), s = m("react.provider"), l = m("react.context"), g = m("react.forward_ref"), c = m("react.suspense"), u = m("react.suspense_list"), C = m("react.memo"), d = m("react.lazy"), I = m("react.block"), h = m("react.server.block"), A = m("react.fundamental"), p = m("react.debug_trace_mode"), f = m("react.legacy_hidden") } function v(e) { if ("object" === typeof e && null !== e) { var t = e.$$typeof; switch (t) { case n: switch (e = e.type) { case r: case o: case a: case c: case u: return e; default: switch (e = e && e.$$typeof) { case l: case g: case d: case C: case s: return e; default: return t } }case i: return t } } } }, 3413: function (e, t, n) { "use strict"; n(8202) }, 8996: function (e, t, n) { "use strict"; var i = n(4836); t.Z = void 0; var r = i(n(5649)), a = n(184), o = (0, r.default)((0, a.jsx)("path", { d: "M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" }), "ChevronRight"); t.Z = o }, 1131: function (e, t, n) { "use strict"; var i = n(4836); t.Z = void 0; var r = i(n(5649)), a = n(184), o = (0, r.default)((0, a.jsx)("path", { d: "M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z" }), "ExpandMore"); t.Z = o }, 5649: function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), Object.defineProperty(t, "default", { enumerable: !0, get: function () { return i.createSvgIcon } }); var i = n(7991) }, 1314: function (e, t, n) { "use strict"; n.d(t, { ZP: function () { return c }, x9: function () { return s } }); var i = n(3366), r = n(7462), a = ["duration", "easing", "delay"], o = { easeInOut: "cubic-bezier(0.4, 0, 0.2, 1)", easeOut: "cubic-bezier(0.0, 0, 0.2, 1)", easeIn: "cubic-bezier(0.4, 0, 1, 1)", sharp: "cubic-bezier(0.4, 0, 0.6, 1)" }, s = { shortest: 150, shorter: 200, short: 250, standard: 300, complex: 375, enteringScreen: 225, leavingScreen: 195 }; function l(e) { return "".concat(Math.round(e), "ms") } function g(e) { if (!e) return 0; var t = e / 36; return Math.round(10 * (4 + 15 * Math.pow(t, .25) + t / 5)) } function c(e) { var t = (0, r.Z)({}, o, e.easing), n = (0, r.Z)({}, s, e.duration); return (0, r.Z)({ getAutoHeightDuration: g, create: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ["all"], r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, o = r.duration, s = void 0 === o ? n.standard : o, g = r.easing, c = void 0 === g ? t.easeInOut : g, u = r.delay, C = void 0 === u ? 0 : u; (0, i.Z)(r, a); return (Array.isArray(e) ? e : [e]).map((function (e) { return "".concat(e, " ").concat("string" === typeof s ? s : l(s), " ").concat(c, " ").concat("string" === typeof C ? C : l(C)) })).join(",") } }, e, { easing: t, duration: n }) } }, 9691: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return N } }); var i = n(7462), r = n(3366), a = n(6189), o = n(2466), s = n(5080), l = n(7416), g = n(104), c = n(4942); function u(e, t) { var n; return (0, i.Z)({ toolbar: (n = { minHeight: 56 }, (0, c.Z)(n, e.up("xs"), { "@media (orientation: landscape)": { minHeight: 48 } }), (0, c.Z)(n, e.up("sm"), { minHeight: 64 }), n) }, t) } var C = n(2065), d = { black: "#000", white: "#fff" }, I = { 50: "#fafafa", 100: "#f5f5f5", 200: "#eeeeee", 300: "#e0e0e0", 400: "#bdbdbd", 500: "#9e9e9e", 600: "#757575", 700: "#616161", 800: "#424242", 900: "#212121", A100: "#f5f5f5", A200: "#eeeeee", A400: "#bdbdbd", A700: "#616161" }, h = { 50: "#f3e5f5", 100: "#e1bee7", 200: "#ce93d8", 300: "#ba68c8", 400: "#ab47bc", 500: "#9c27b0", 600: "#8e24aa", 700: "#7b1fa2", 800: "#6a1b9a", 900: "#4a148c", A100: "#ea80fc", A200: "#e040fb", A400: "#d500f9", A700: "#aa00ff" }, A = { 50: "#ffebee", 100: "#ffcdd2", 200: "#ef9a9a", 300: "#e57373", 400: "#ef5350", 500: "#f44336", 600: "#e53935", 700: "#d32f2f", 800: "#c62828", 900: "#b71c1c", A100: "#ff8a80", A200: "#ff5252", A400: "#ff1744", A700: "#d50000" }, p = { 50: "#fff3e0", 100: "#ffe0b2", 200: "#ffcc80", 300: "#ffb74d", 400: "#ffa726", 500: "#ff9800", 600: "#fb8c00", 700: "#f57c00", 800: "#ef6c00", 900: "#e65100", A100: "#ffd180", A200: "#ffab40", A400: "#ff9100", A700: "#ff6d00" }, f = { 50: "#e3f2fd", 100: "#bbdefb", 200: "#90caf9", 300: "#64b5f6", 400: "#42a5f5", 500: "#2196f3", 600: "#1e88e5", 700: "#1976d2", 800: "#1565c0", 900: "#0d47a1", A100: "#82b1ff", A200: "#448aff", A400: "#2979ff", A700: "#2962ff" }, m = { 50: "#e1f5fe", 100: "#b3e5fc", 200: "#81d4fa", 300: "#4fc3f7", 400: "#29b6f6", 500: "#03a9f4", 600: "#039be5", 700: "#0288d1", 800: "#0277bd", 900: "#01579b", A100: "#80d8ff", A200: "#40c4ff", A400: "#00b0ff", A700: "#0091ea" }, v = { 50: "#e8f5e9", 100: "#c8e6c9", 200: "#a5d6a7", 300: "#81c784", 400: "#66bb6a", 500: "#4caf50", 600: "#43a047", 700: "#388e3c", 800: "#2e7d32", 900: "#1b5e20", A100: "#b9f6ca", A200: "#69f0ae", A400: "#00e676", A700: "#00c853" }, b = ["mode", "contrastThreshold", "tonalOffset"], y = { text: { primary: "rgba(0, 0, 0, 0.87)", secondary: "rgba(0, 0, 0, 0.6)", disabled: "rgba(0, 0, 0, 0.38)" }, divider: "rgba(0, 0, 0, 0.12)", background: { paper: d.white, default: d.white }, action: { active: "rgba(0, 0, 0, 0.54)", hover: "rgba(0, 0, 0, 0.04)", hoverOpacity: .04, selected: "rgba(0, 0, 0, 0.08)", selectedOpacity: .08, disabled: "rgba(0, 0, 0, 0.26)", disabledBackground: "rgba(0, 0, 0, 0.12)", disabledOpacity: .38, focus: "rgba(0, 0, 0, 0.12)", focusOpacity: .12, activatedOpacity: .12 } }, G = { text: { primary: d.white, secondary: "rgba(255, 255, 255, 0.7)", disabled: "rgba(255, 255, 255, 0.5)", icon: "rgba(255, 255, 255, 0.5)" }, divider: "rgba(255, 255, 255, 0.12)", background: { paper: "#121212", default: "#121212" }, action: { active: d.white, hover: "rgba(255, 255, 255, 0.08)", hoverOpacity: .08, selected: "rgba(255, 255, 255, 0.16)", selectedOpacity: .16, disabled: "rgba(255, 255, 255, 0.3)", disabledBackground: "rgba(255, 255, 255, 0.12)", disabledOpacity: .38, focus: "rgba(255, 255, 255, 0.12)", focusOpacity: .12, activatedOpacity: .24 } }; function B(e, t, n, i) { var r = i.light || i, a = i.dark || 1.5 * i; e[t] || (e.hasOwnProperty(n) ? e[t] = e[n] : "light" === t ? e.light = (0, C.$n)(e.main, r) : "dark" === t && (e.dark = (0, C._j)(e.main, a))) } function Z(e) { var t = e.mode, n = void 0 === t ? "light" : t, s = e.contrastThreshold, l = void 0 === s ? 3 : s, g = e.tonalOffset, c = void 0 === g ? .2 : g, u = (0, r.Z)(e, b), Z = e.primary || function () { return "dark" === (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "light") ? { main: f[200], light: f[50], dark: f[400] } : { main: f[700], light: f[400], dark: f[800] } }(n), w = e.secondary || function () { return "dark" === (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "light") ? { main: h[200], light: h[50], dark: h[400] } : { main: h[500], light: h[300], dark: h[700] } }(n), S = e.error || function () { return "dark" === (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "light") ? { main: A[500], light: A[300], dark: A[700] } : { main: A[700], light: A[400], dark: A[800] } }(n), R = e.info || function () { return "dark" === (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "light") ? { main: m[400], light: m[300], dark: m[700] } : { main: m[700], light: m[500], dark: m[900] } }(n), x = e.success || function () { return "dark" === (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "light") ? { main: v[400], light: v[300], dark: v[700] } : { main: v[800], light: v[500], dark: v[900] } }(n), W = e.warning || function () { return "dark" === (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "light") ? { main: p[400], light: p[300], dark: p[700] } : { main: "#ed6c02", light: p[500], dark: p[900] } }(n); function V(e) { return (0, C.mi)(e, G.text.primary) >= l ? G.text.primary : y.text.primary } var k = function (e) { var t = e.color, n = e.name, r = e.mainShade, o = void 0 === r ? 500 : r, s = e.lightShade, l = void 0 === s ? 300 : s, g = e.darkShade, u = void 0 === g ? 700 : g; if (!(t = (0, i.Z)({}, t)).main && t[o] && (t.main = t[o]), !t.hasOwnProperty("main")) throw new Error((0, a.Z)(11, n ? " (".concat(n, ")") : "", o)); if ("string" !== typeof t.main) throw new Error((0, a.Z)(12, n ? " (".concat(n, ")") : "", JSON.stringify(t.main))); return B(t, "light", l, c), B(t, "dark", u, c), t.contrastText || (t.contrastText = V(t.main)), t }, H = { dark: G, light: y }; return (0, o.Z)((0, i.Z)({ common: (0, i.Z)({}, d), mode: n, primary: k({ color: Z, name: "primary" }), secondary: k({ color: w, name: "secondary", mainShade: "A400", lightShade: "A200", darkShade: "A700" }), error: k({ color: S, name: "error" }), warning: k({ color: W, name: "warning" }), info: k({ color: R, name: "info" }), success: k({ color: x, name: "success" }), grey: I, contrastThreshold: l, getContrastText: V, augmentColor: k, tonalOffset: c }, H[n]), u) } var w = ["fontFamily", "fontSize", "fontWeightLight", "fontWeightRegular", "fontWeightMedium", "fontWeightBold", "htmlFontSize", "allVariants", "pxToRem"]; var S = { textTransform: "uppercase" }, R = '"Roboto", "Helvetica", "Arial", sans-serif'; function x(e, t) { var n = "function" === typeof t ? t(e) : t, a = n.fontFamily, s = void 0 === a ? R : a, l = n.fontSize, g = void 0 === l ? 14 : l, c = n.fontWeightLight, u = void 0 === c ? 300 : c, C = n.fontWeightRegular, d = void 0 === C ? 400 : C, I = n.fontWeightMedium, h = void 0 === I ? 500 : I, A = n.fontWeightBold, p = void 0 === A ? 700 : A, f = n.htmlFontSize, m = void 0 === f ? 16 : f, v = n.allVariants, b = n.pxToRem, y = (0, r.Z)(n, w); var G = g / 14, B = b || function (e) { return "".concat(e / m * G, "rem") }, Z = function (e, t, n, r, a) { return (0, i.Z)({ fontFamily: s, fontWeight: e, fontSize: B(t), lineHeight: n }, s === R ? { letterSpacing: "".concat((o = r / t, Math.round(1e5 * o) / 1e5), "em") } : {}, a, v); var o }, x = { h1: Z(u, 96, 1.167, -1.5), h2: Z(u, 60, 1.2, -.5), h3: Z(d, 48, 1.167, 0), h4: Z(d, 34, 1.235, .25), h5: Z(d, 24, 1.334, 0), h6: Z(h, 20, 1.6, .15), subtitle1: Z(d, 16, 1.75, .15), subtitle2: Z(h, 14, 1.57, .1), body1: Z(d, 16, 1.5, .15), body2: Z(d, 14, 1.43, .15), button: Z(h, 14, 1.75, .4, S), caption: Z(d, 12, 1.66, .4), overline: Z(d, 12, 2.66, 1, S), inherit: { fontFamily: "inherit", fontWeight: "inherit", fontSize: "inherit", lineHeight: "inherit", letterSpacing: "inherit" } }; return (0, o.Z)((0, i.Z)({ htmlFontSize: m, pxToRem: B, fontFamily: s, fontSize: g, fontWeightLight: u, fontWeightRegular: d, fontWeightMedium: h, fontWeightBold: p }, x), y, { clone: !1 }) } function W() { return ["".concat(arguments.length <= 0 ? void 0 : arguments[0], "px ").concat(arguments.length <= 1 ? void 0 : arguments[1], "px ").concat(arguments.length <= 2 ? void 0 : arguments[2], "px ").concat(arguments.length <= 3 ? void 0 : arguments[3], "px rgba(0,0,0,").concat(.2, ")"), "".concat(arguments.length <= 4 ? void 0 : arguments[4], "px ").concat(arguments.length <= 5 ? void 0 : arguments[5], "px ").concat(arguments.length <= 6 ? void 0 : arguments[6], "px ").concat(arguments.length <= 7 ? void 0 : arguments[7], "px rgba(0,0,0,").concat(.14, ")"), "".concat(arguments.length <= 8 ? void 0 : arguments[8], "px ").concat(arguments.length <= 9 ? void 0 : arguments[9], "px ").concat(arguments.length <= 10 ? void 0 : arguments[10], "px ").concat(arguments.length <= 11 ? void 0 : arguments[11], "px rgba(0,0,0,").concat(.12, ")")].join(",") } var V = ["none", W(0, 2, 1, -1, 0, 1, 1, 0, 0, 1, 3, 0), W(0, 3, 1, -2, 0, 2, 2, 0, 0, 1, 5, 0), W(0, 3, 3, -2, 0, 3, 4, 0, 0, 1, 8, 0), W(0, 2, 4, -1, 0, 4, 5, 0, 0, 1, 10, 0), W(0, 3, 5, -1, 0, 5, 8, 0, 0, 1, 14, 0), W(0, 3, 5, -1, 0, 6, 10, 0, 0, 1, 18, 0), W(0, 4, 5, -2, 0, 7, 10, 1, 0, 2, 16, 1), W(0, 5, 5, -3, 0, 8, 10, 1, 0, 3, 14, 2), W(0, 5, 6, -3, 0, 9, 12, 1, 0, 3, 16, 2), W(0, 6, 6, -3, 0, 10, 14, 1, 0, 4, 18, 3), W(0, 6, 7, -4, 0, 11, 15, 1, 0, 4, 20, 3), W(0, 7, 8, -4, 0, 12, 17, 2, 0, 5, 22, 4), W(0, 7, 8, -4, 0, 13, 19, 2, 0, 5, 24, 4), W(0, 7, 9, -4, 0, 14, 21, 2, 0, 5, 26, 4), W(0, 8, 9, -5, 0, 15, 22, 2, 0, 6, 28, 5), W(0, 8, 10, -5, 0, 16, 24, 2, 0, 6, 30, 5), W(0, 8, 11, -5, 0, 17, 26, 2, 0, 6, 32, 5), W(0, 9, 11, -5, 0, 18, 28, 2, 0, 7, 34, 6), W(0, 9, 12, -6, 0, 19, 29, 2, 0, 7, 36, 6), W(0, 10, 13, -6, 0, 20, 31, 3, 0, 8, 38, 7), W(0, 10, 13, -6, 0, 21, 33, 3, 0, 8, 40, 7), W(0, 10, 14, -6, 0, 22, 35, 3, 0, 8, 42, 7), W(0, 11, 14, -7, 0, 23, 36, 3, 0, 9, 44, 8), W(0, 11, 15, -7, 0, 24, 38, 3, 0, 9, 46, 8)], k = n(1314), H = { mobileStepper: 1e3, fab: 1050, speedDial: 1050, appBar: 1100, drawer: 1200, modal: 1300, snackbar: 1400, tooltip: 1500 }, M = ["breakpoints", "mixins", "spacing", "palette", "transitions", "typography", "shape"]; function F() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.mixins, n = void 0 === t ? {} : t, c = e.palette, C = void 0 === c ? {} : c, d = e.transitions, I = void 0 === d ? {} : d, h = e.typography, A = void 0 === h ? {} : h, p = (0, r.Z)(e, M); if (e.vars) throw new Error((0, a.Z)(18)); var f = Z(C), m = (0, s.Z)(e), v = (0, o.Z)(m, { mixins: u(m.breakpoints, n), palette: f, shadows: V.slice(), typography: x(f, A), transitions: (0, k.ZP)(I), zIndex: (0, i.Z)({}, H) }); v = (0, o.Z)(v, p); for (var b = arguments.length, y = new Array(b > 1 ? b - 1 : 0), G = 1; G < b; G++)y[G - 1] = arguments[G]; return (v = y.reduce((function (e, t) { return (0, o.Z)(e, t) }), v)).unstable_sxConfig = (0, i.Z)({}, l.Z, null == p ? void 0 : p.unstable_sxConfig), v.unstable_sx = function (e) { return (0, g.Z)({ sx: e, theme: this }) }, v } var N = F() }, 988: function (e, t) { "use strict"; t.Z = "$$material" }, 724: function (e, t, n) { "use strict"; n.d(t, { ZP: function () { return X }, FO: function () { return F } }); var i = n(9439), r = n(3433), a = n(3366), o = n(7462), s = n(2791), l = n(9791), g = n(2564), c = n(5438), u = n(9140), C = n(2561), d = l.Z, I = function (e) { return "theme" !== e }, h = function (e) { return "string" === typeof e && e.charCodeAt(0) > 96 ? d : I }, A = function (e, t, n) { var i; if (t) { var r = t.shouldForwardProp; i = e.__emotion_forwardProp && r ? function (t) { return e.__emotion_forwardProp(t) && r(t) } : r } return "function" !== typeof i && n && (i = e.__emotion_forwardProp), i }, p = function (e) { var t = e.cache, n = e.serialized, i = e.isStringTag; return (0, c.hC)(t, n, i), (0, C.L)((function () { return (0, c.My)(t, n, i) })), null }, f = function e(t, n) { var i, r, a = t.__emotion_real === t, l = a && t.__emotion_base || t; void 0 !== n && (i = n.label, r = n.target); var C = A(t, n, a), d = C || h(l), I = !d("as"); return function () { var f = arguments, m = a && void 0 !== t.__emotion_styles ? t.__emotion_styles.slice(0) : []; if (void 0 !== i && m.push("label:" + i + ";"), null == f[0] || void 0 === f[0].raw) m.push.apply(m, f); else { 0, m.push(f[0][0]); for (var v = f.length, b = 1; b < v; b++)m.push(f[b], f[0][b]) } var y = (0, g.w)((function (e, t, n) { var i = I && e.as || l, a = "", o = [], A = e; if (null == e.theme) { for (var f in A = {}, e) A[f] = e[f]; A.theme = s.useContext(g.T) } "string" === typeof e.className ? a = (0, c.fp)(t.registered, o, e.className) : null != e.className && (a = e.className + " "); var v = (0, u.O)(m.concat(o), t.registered, A); a += t.key + "-" + v.name, void 0 !== r && (a += " " + r); var b = I && void 0 === C ? h(i) : d, y = {}; for (var G in e) I && "as" === G || b(G) && (y[G] = e[G]); return y.className = a, y.ref = n, s.createElement(s.Fragment, null, s.createElement(p, { cache: t, serialized: v, isStringTag: "string" === typeof i }), s.createElement(i, y)) })); return y.displayName = void 0 !== i ? i : "Styled(" + ("string" === typeof l ? l : l.displayName || l.name || "Component") + ")", y.defaultProps = t.defaultProps, y.__emotion_real = y, y.__emotion_base = l, y.__emotion_styles = m, y.__emotion_forwardProp = C, Object.defineProperty(y, "toString", { value: function () { return "." + r } }), y.withComponent = function (t, i) { return e(t, (0, o.Z)({}, n, i, { shouldForwardProp: A(y, i, !0) })).apply(void 0, m) }, y } }.bind();["a", "abbr", "address", "area", "article", "aside", "audio", "b", "base", "bdi", "bdo", "big", "blockquote", "body", "br", "button", "canvas", "caption", "cite", "code", "col", "colgroup", "data", "datalist", "dd", "del", "details", "dfn", "dialog", "div", "dl", "dt", "em", "embed", "fieldset", "figcaption", "figure", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "head", "header", "hgroup", "hr", "html", "i", "iframe", "img", "input", "ins", "kbd", "keygen", "label", "legend", "li", "link", "main", "map", "mark", "marquee", "menu", "menuitem", "meta", "meter", "nav", "noscript", "object", "ol", "optgroup", "option", "output", "p", "param", "picture", "pre", "progress", "q", "rp", "rt", "ruby", "s", "samp", "script", "section", "select", "small", "source", "span", "strong", "style", "sub", "summary", "sup", "table", "tbody", "td", "textarea", "tfoot", "th", "thead", "time", "title", "tr", "track", "u", "ul", "var", "video", "wbr", "circle", "clipPath", "defs", "ellipse", "foreignObject", "g", "image", "line", "linearGradient", "mask", "path", "pattern", "polygon", "polyline", "radialGradient", "rect", "stop", "svg", "text", "tspan"].forEach((function (e) { f[e] = f(e) })); var m = n(2466), v = n(5080), b = n(1122), y = ["variant"]; function G(e) { return 0 === e.length } function B(e) { var t = e.variant, n = (0, a.Z)(e, y), i = t || ""; return Object.keys(n).sort().forEach((function (t) { i += "color" === t ? G(i) ? e[t] : (0, b.Z)(e[t]) : "".concat(G(i) ? t : (0, b.Z)(t)).concat((0, b.Z)(e[t].toString())) })), i } var Z = n(104), w = ["name", "slot", "skipVariantsResolver", "skipSx", "overridesResolver"]; var S = function (e) { var t = {}; return e && e.forEach((function (e) { var n = B(e.props); t[n] = e.style })), t }, R = function (e, t, n) { var i = e.ownerState, r = void 0 === i ? {} : i, a = []; return n && n.forEach((function (n) { var i = !0; Object.keys(n.props).forEach((function (t) { r[t] !== n.props[t] && e[t] !== n.props[t] && (i = !1) })), i && a.push(t[B(n.props)]) })), a }; function x(e) { return "ownerState" !== e && "theme" !== e && "sx" !== e && "as" !== e } var W = (0, v.Z)(); function V(e) { var t, n = e.defaultTheme, i = e.theme, r = e.themeId; return t = i, 0 === Object.keys(t).length ? n : i[r] || i } var k = function (e) { var t, n = e.styledArg, i = e.props, a = e.defaultTheme, s = e.themeId, l = n((0, o.Z)({}, i, { theme: V((0, o.Z)({}, i, { defaultTheme: a, themeId: s })) })); if (l && l.variants && (t = l.variants, delete l.variants), t) { var g = R(i, S(t), t); return [l].concat((0, r.Z)(g)) } return l }; var H = n(9691), M = n(988), F = function (e) { return x(e) && "classes" !== e }, N = function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.themeId, n = e.defaultTheme, s = void 0 === n ? W : n, l = e.rootShouldForwardProp, g = void 0 === l ? x : l, c = e.slotShouldForwardProp, u = void 0 === c ? x : c, C = function (e) { return (0, Z.Z)((0, o.Z)({}, e, { theme: V((0, o.Z)({}, e, { defaultTheme: s, themeId: t })) })) }; return C.__mui_systemSx = !0, function (e) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; !function (e, t) { Array.isArray(e.__emotion_styles) && (e.__emotion_styles = t(e.__emotion_styles)) }(e, (function (e) { return e.filter((function (e) { return !(null != e && e.__mui_systemSx) })) })); var l, c, d = n.name, I = n.slot, h = n.skipVariantsResolver, A = n.skipSx, p = n.overridesResolver, v = void 0 === p ? (l = (c = I) ? c.charAt(0).toLowerCase() + c.slice(1) : c) ? function (e, t) { return t[l] } : null : p, b = (0, a.Z)(n, w), y = void 0 !== h ? h : I && "Root" !== I && "root" !== I || !1, G = A || !1; var B = x; "Root" === I || "root" === I ? B = g : I ? B = u : function (e) { return "string" === typeof e && e.charCodeAt(0) > 96 }(e) && (B = void 0); var Z = function (e, t) { return f(e, t) }(e, (0, o.Z)({ shouldForwardProp: B, label: undefined }, b)), W = function (n) { for (var a = arguments.length, l = new Array(a > 1 ? a - 1 : 0), g = 1; g < a; g++)l[g - 1] = arguments[g]; var c, u = l ? l.map((function (e) { if ("function" === typeof e && e.__emotion_real !== e) return function (n) { return k({ styledArg: e, props: n, defaultTheme: s, themeId: t }) }; if ((0, m.P)(e)) { var n, i = e; return e && e.variants && (n = e.variants, delete i.variants, i = function (t) { var i = e; return R(t, S(n), n).forEach((function (e) { i = (0, m.Z)(i, e) })), i }), i } return e })) : [], I = n; (0, m.P)(n) ? n && n.variants && (c = n.variants, delete I.variants, I = function (e) { var t = n; return R(e, S(c), c).forEach((function (e) { t = (0, m.Z)(t, e) })), t }) : "function" === typeof n && n.__emotion_real !== n && (I = function (e) { return k({ styledArg: n, props: e, defaultTheme: s, themeId: t }) }); d && v && u.push((function (e) { var n = V((0, o.Z)({}, e, { defaultTheme: s, themeId: t })), r = function (e, t) { return t.components && t.components[e] && t.components[e].styleOverrides ? t.components[e].styleOverrides : null }(d, n); if (r) { var a = {}; return Object.entries(r).forEach((function (t) { var r = (0, i.Z)(t, 2), s = r[0], l = r[1]; a[s] = "function" === typeof l ? l((0, o.Z)({}, e, { theme: n })) : l })), v(e, a) } return null })), d && !y && u.push((function (e) { var n = V((0, o.Z)({}, e, { defaultTheme: s, themeId: t })); return function (e, t, n, i) { var r, a = null == n || null == (r = n.components) || null == (r = r[i]) ? void 0 : r.variants; return R(e, t, a) }(e, function (e, t) { var n = []; return t && t.components && t.components[e] && t.components[e].variants && (n = t.components[e].variants), S(n) }(d, n), n, d) })), G || u.push(C); var h = u.length - l.length; if (Array.isArray(n) && h > 0) { var A = new Array(h).fill(""); (I = [].concat((0, r.Z)(n), (0, r.Z)(A))).raw = [].concat((0, r.Z)(n.raw), (0, r.Z)(A)) } var p = Z.apply(void 0, [I].concat((0, r.Z)(u))); return e.muiName && (p.muiName = e.muiName), p }; return Z.withConfig && (W.withConfig = Z.withConfig), W } }({ themeId: M.Z, defaultTheme: H.Z, rootShouldForwardProp: F }), X = N }, 1046: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return l } }); var i = n(5735); var r = n(3459); function a(e) { var t = e.props, n = e.name, a = e.defaultTheme, o = e.themeId, s = (0, r.Z)(a); o && (s = s[o] || s); var l = function (e) { var t = e.theme, n = e.name, r = e.props; return t && t.components && t.components[n] && t.components[n].defaultProps ? (0, i.Z)(t.components[n].defaultProps, r) : r }({ theme: s, name: n, props: t }); return l } var o = n(9691), s = n(988); function l(e) { return a({ props: e.props, name: e.name, defaultTheme: o.Z, themeId: s.Z }) } }, 4036: function (e, t, n) { "use strict"; var i = n(1122); t.Z = i.Z }, 7991: function (e, t, n) { "use strict"; n.r(t), n.d(t, { capitalize: function () { return r.Z }, createChainedFunction: function () { return a }, createSvgIcon: function () { return y }, debounce: function () { return G }, deprecatedPropType: function () { return B }, isMuiElement: function () { return Z }, ownerDocument: function () { return S }, ownerWindow: function () { return R }, requirePropFactory: function () { return x }, setRef: function () { return W }, unstable_ClassNameGenerator: function () { return z }, unstable_useEnhancedEffect: function () { return V }, unstable_useId: function () { return F }, unsupportedProp: function () { return N }, useControlled: function () { return X.Z }, useEventCallback: function () { return Y.Z }, useForkRef: function () { return K.Z }, useIsFocusVisible: function () { return L.Z } }); var i = n(5902), r = n(4036); var a = function () { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; return t.reduce((function (e, t) { return null == t ? e : function () { for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)i[r] = arguments[r]; e.apply(this, i), t.apply(this, i) } }), (function () { })) }, o = n(7462), s = n(2791), l = n.t(s, 2), g = n(3366), c = n(3733), u = n(4419), C = n(1046), d = n(724), I = n(5878), h = n(1217); function A(e) { return (0, h.Z)("MuiSvgIcon", e) } (0, I.Z)("MuiSvgIcon", ["root", "colorPrimary", "colorSecondary", "colorAction", "colorError", "colorDisabled", "fontSizeInherit", "fontSizeSmall", "fontSizeMedium", "fontSizeLarge"]); var p = n(184), f = ["children", "className", "color", "component", "fontSize", "htmlColor", "inheritViewBox", "titleAccess", "viewBox"], m = (0, d.ZP)("svg", { name: "MuiSvgIcon", slot: "Root", overridesResolver: function (e, t) { var n = e.ownerState; return [t.root, "inherit" !== n.color && t["color".concat((0, r.Z)(n.color))], t["fontSize".concat((0, r.Z)(n.fontSize))]] } })((function (e) { var t, n, i, r, a, o, s, l, g, c, u, C, d, I = e.theme, h = e.ownerState; return { userSelect: "none", width: "1em", height: "1em", display: "inline-block", fill: h.hasSvgAsChild ? void 0 : "currentColor", flexShrink: 0, transition: null == (t = I.transitions) || null == (n = t.create) ? void 0 : n.call(t, "fill", { duration: null == (i = I.transitions) || null == (i = i.duration) ? void 0 : i.shorter }), fontSize: { inherit: "inherit", small: (null == (r = I.typography) || null == (a = r.pxToRem) ? void 0 : a.call(r, 20)) || "1.25rem", medium: (null == (o = I.typography) || null == (s = o.pxToRem) ? void 0 : s.call(o, 24)) || "1.5rem", large: (null == (l = I.typography) || null == (g = l.pxToRem) ? void 0 : g.call(l, 35)) || "2.1875rem" }[h.fontSize], color: null != (c = null == (u = (I.vars || I).palette) || null == (u = u[h.color]) ? void 0 : u.main) ? c : { action: null == (C = (I.vars || I).palette) || null == (C = C.action) ? void 0 : C.active, disabled: null == (d = (I.vars || I).palette) || null == (d = d.action) ? void 0 : d.disabled, inherit: void 0 }[h.color] } })), v = s.forwardRef((function (e, t) { var n = (0, C.Z)({ props: e, name: "MuiSvgIcon" }), i = n.children, a = n.className, l = n.color, d = void 0 === l ? "inherit" : l, I = n.component, h = void 0 === I ? "svg" : I, v = n.fontSize, b = void 0 === v ? "medium" : v, y = n.htmlColor, G = n.inheritViewBox, B = void 0 !== G && G, Z = n.titleAccess, w = n.viewBox, S = void 0 === w ? "0 0 24 24" : w, R = (0, g.Z)(n, f), x = s.isValidElement(i) && "svg" === i.type, W = (0, o.Z)({}, n, { color: d, component: h, fontSize: b, instanceFontSize: e.fontSize, inheritViewBox: B, viewBox: S, hasSvgAsChild: x }), V = {}; B || (V.viewBox = S); var k = function (e) { var t = e.color, n = e.fontSize, i = e.classes, a = { root: ["root", "inherit" !== t && "color".concat((0, r.Z)(t)), "fontSize".concat((0, r.Z)(n))] }; return (0, u.Z)(a, A, i) }(W); return (0, p.jsxs)(m, (0, o.Z)({ as: h, className: (0, c.Z)(k.root, a), focusable: "false", color: y, "aria-hidden": !Z || void 0, role: Z ? "img" : void 0, ref: t }, V, R, x && i.props, { ownerState: W, children: [x ? i.props.children : i, Z ? (0, p.jsx)("title", { children: Z }) : null] })) })); v.muiName = "SvgIcon"; var b = v; function y(e, t) { function n(n, i) { return (0, p.jsx)(b, (0, o.Z)({ "data-testid": "".concat(t, "Icon"), ref: i }, n, { children: e })) } return n.muiName = b.muiName, s.memo(s.forwardRef(n)) } var G = function (e) { var t, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 166; function i() { for (var i = this, r = arguments.length, a = new Array(r), o = 0; o < r; o++)a[o] = arguments[o]; clearTimeout(t), t = setTimeout((function () { e.apply(i, a) }), n) } return i.clear = function () { clearTimeout(t) }, i }; var B = function (e, t) { return function () { return null } }; var Z = function (e, t) { var n, i; return s.isValidElement(e) && -1 !== t.indexOf(null != (n = e.type.muiName) ? n : null == (i = e.type) || null == (i = i._payload) || null == (i = i.value) ? void 0 : i.muiName) }; function w(e) { return e && e.ownerDocument || document } var S = w; var R = function (e) { return w(e).defaultView || window }; var x = function (e, t) { return function () { return null } }, W = n(2971).Z, V = n(2876).Z, k = n(9439), H = 0; var M = l["useId".toString()]; var F = function (e) { if (void 0 !== M) { var t = M(); return null != e ? e : t } return function (e) { var t = s.useState(e), n = (0, k.Z)(t, 2), i = n[0], r = n[1], a = e || i; return s.useEffect((function () { null == i && r("mui-".concat(H += 1)) }), [i]), a }(e) }; var N = function (e, t, n, i, r) { return null }, X = n(5158), Y = n(7992), K = n(8047), L = n(3031), z = { configure: function (e) { i.Z.configure(e) } } }, 5158: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return a } }); var i = n(9439), r = n(2791); var a = function (e) { var t = e.controlled, n = e.default, a = (e.name, e.state, r.useRef(void 0 !== t).current), o = r.useState(n), s = (0, i.Z)(o, 2), l = s[0], g = s[1]; return [a ? t : l, r.useCallback((function (e) { a || g(e) }), [])] } }, 7992: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return o } }); var i = n(2791), r = n(2876); var a = function (e) { var t = i.useRef(e); return (0, r.Z)((function () { t.current = e })), i.useRef((function () { return t.current.apply(void 0, arguments) })).current }, o = a }, 8047: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return a } }); var i = n(2791), r = n(2971); var a = function () { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; return i.useMemo((function () { return t.every((function (e) { return null == e })) ? null : function (e) { t.forEach((function (t) { (0, r.Z)(t, e) })) } }), t) } }, 3031: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return C } }); var i, r = n(2791), a = !0, o = !1, s = { text: !0, search: !0, url: !0, tel: !0, email: !0, password: !0, number: !0, date: !0, month: !0, week: !0, time: !0, datetime: !0, "datetime-local": !0 }; function l(e) { e.metaKey || e.altKey || e.ctrlKey || (a = !0) } function g() { a = !1 } function c() { "hidden" === this.visibilityState && o && (a = !0) } function u(e) { var t = e.target; try { return t.matches(":focus-visible") } catch (n) { } return a || function (e) { var t = e.type, n = e.tagName; return !("INPUT" !== n || !s[t] || e.readOnly) || "TEXTAREA" === n && !e.readOnly || !!e.isContentEditable }(t) } var C = function () { var e = r.useCallback((function (e) { var t; null != e && ((t = e.ownerDocument).addEventListener("keydown", l, !0), t.addEventListener("mousedown", g, !0), t.addEventListener("pointerdown", g, !0), t.addEventListener("touchstart", g, !0), t.addEventListener("visibilitychange", c, !0)) }), []), t = r.useRef(!1); return { isFocusVisibleRef: t, onFocus: function (e) { return !!u(e) && (t.current = !0, !0) }, onBlur: function () { return !!t.current && (o = !0, window.clearTimeout(i), i = window.setTimeout((function () { o = !1 }), 100), t.current = !1, !0) }, ref: e } } }, 1184: function (e, t, n) { "use strict"; n.d(t, { L7: function () { return s }, VO: function () { return i }, W8: function () { return o }, k9: function () { return a } }); var i = { xs: 0, sm: 600, md: 900, lg: 1200, xl: 1536 }, r = { keys: ["xs", "sm", "md", "lg", "xl"], up: function (e) { return "@media (min-width:".concat(i[e], "px)") } }; function a(e, t, n) { var a = e.theme || {}; if (Array.isArray(t)) { var o = a.breakpoints || r; return t.reduce((function (e, i, r) { return e[o.up(o.keys[r])] = n(t[r]), e }), {}) } if ("object" === typeof t) { var s = a.breakpoints || r; return Object.keys(t).reduce((function (e, r) { if (-1 !== Object.keys(s.values || i).indexOf(r)) { e[s.up(r)] = n(t[r], r) } else { var a = r; e[a] = t[a] } return e }), {}) } return n(t) } function o() { var e, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; return (null == (e = t.keys) ? void 0 : e.reduce((function (e, n) { return e[t.up(n)] = {}, e }), {})) || {} } function s(e, t) { return e.reduce((function (e, t) { var n = e[t]; return (!n || 0 === Object.keys(n).length) && delete e[t], e }), t) } }, 2065: function (e, t, n) { "use strict"; n.d(t, { $n: function () { return u }, Fq: function () { return g }, _j: function () { return c }, mi: function () { return l } }); var i = n(6189); function r(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1; return Math.min(Math.max(t, e), n) } function a(e) { if (e.type) return e; if ("#" === e.charAt(0)) return a(function (e) { e = e.slice(1); var t = new RegExp(".{1,".concat(e.length >= 6 ? 2 : 1, "}"), "g"), n = e.match(t); return n && 1 === n[0].length && (n = n.map((function (e) { return e + e }))), n ? "rgb".concat(4 === n.length ? "a" : "", "(").concat(n.map((function (e, t) { return t < 3 ? parseInt(e, 16) : Math.round(parseInt(e, 16) / 255 * 1e3) / 1e3 })).join(", "), ")") : "" }(e)); var t = e.indexOf("("), n = e.substring(0, t); if (-1 === ["rgb", "rgba", "hsl", "hsla", "color"].indexOf(n)) throw new Error((0, i.Z)(9, e)); var r, o = e.substring(t + 1, e.length - 1); if ("color" === n) { if (r = (o = o.split(" ")).shift(), 4 === o.length && "/" === o[3].charAt(0) && (o[3] = o[3].slice(1)), -1 === ["srgb", "display-p3", "a98-rgb", "prophoto-rgb", "rec-2020"].indexOf(r)) throw new Error((0, i.Z)(10, r)) } else o = o.split(","); return { type: n, values: o = o.map((function (e) { return parseFloat(e) })), colorSpace: r } } function o(e) { var t = e.type, n = e.colorSpace, i = e.values; return -1 !== t.indexOf("rgb") ? i = i.map((function (e, t) { return t < 3 ? parseInt(e, 10) : e })) : -1 !== t.indexOf("hsl") && (i[1] = "".concat(i[1], "%"), i[2] = "".concat(i[2], "%")), i = -1 !== t.indexOf("color") ? "".concat(n, " ").concat(i.join(" ")) : "".concat(i.join(", ")), "".concat(t, "(").concat(i, ")") } function s(e) { var t = "hsl" === (e = a(e)).type || "hsla" === e.type ? a(function (e) { var t = (e = a(e)).values, n = t[0], i = t[1] / 100, r = t[2] / 100, s = i * Math.min(r, 1 - r), l = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : (e + n / 30) % 12; return r - s * Math.max(Math.min(t - 3, 9 - t, 1), -1) }, g = "rgb", c = [Math.round(255 * l(0)), Math.round(255 * l(8)), Math.round(255 * l(4))]; return "hsla" === e.type && (g += "a", c.push(t[3])), o({ type: g, values: c }) }(e)).values : e.values; return t = t.map((function (t) { return "color" !== e.type && (t /= 255), t <= .03928 ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4) })), Number((.2126 * t[0] + .7152 * t[1] + .0722 * t[2]).toFixed(3)) } function l(e, t) { var n = s(e), i = s(t); return (Math.max(n, i) + .05) / (Math.min(n, i) + .05) } function g(e, t) { return e = a(e), t = r(t), "rgb" !== e.type && "hsl" !== e.type || (e.type += "a"), "color" === e.type ? e.values[3] = "/".concat(t) : e.values[3] = t, o(e) } function c(e, t) { if (e = a(e), t = r(t), -1 !== e.type.indexOf("hsl")) e.values[2] *= 1 - t; else if (-1 !== e.type.indexOf("rgb") || -1 !== e.type.indexOf("color")) for (var n = 0; n < 3; n += 1)e.values[n] *= 1 - t; return o(e) } function u(e, t) { if (e = a(e), t = r(t), -1 !== e.type.indexOf("hsl")) e.values[2] += (100 - e.values[2]) * t; else if (-1 !== e.type.indexOf("rgb")) for (var n = 0; n < 3; n += 1)e.values[n] += (255 - e.values[n]) * t; else if (-1 !== e.type.indexOf("color")) for (var i = 0; i < 3; i += 1)e.values[i] += (1 - e.values[i]) * t; return o(e) } }, 5080: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return I } }); var i = n(7462), r = n(3366), a = n(2466), o = n(4942), s = ["values", "unit", "step"], l = function (e) { var t = Object.keys(e).map((function (t) { return { key: t, val: e[t] } })) || []; return t.sort((function (e, t) { return e.val - t.val })), t.reduce((function (e, t) { return (0, i.Z)({}, e, (0, o.Z)({}, t.key, t.val)) }), {}) }; var g = { borderRadius: 4 }, c = n(5682); var u = n(104), C = n(7416), d = ["breakpoints", "palette", "spacing", "shape"]; var I = function () { for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.breakpoints, n = void 0 === t ? {} : t, o = e.palette, I = void 0 === o ? {} : o, h = e.spacing, A = e.shape, p = void 0 === A ? {} : A, f = (0, r.Z)(e, d), m = function (e) { var t = e.values, n = void 0 === t ? { xs: 0, sm: 600, md: 900, lg: 1200, xl: 1536 } : t, a = e.unit, o = void 0 === a ? "px" : a, g = e.step, c = void 0 === g ? 5 : g, u = (0, r.Z)(e, s), C = l(n), d = Object.keys(C); function I(e) { var t = "number" === typeof n[e] ? n[e] : e; return "@media (min-width:".concat(t).concat(o, ")") } function h(e) { var t = "number" === typeof n[e] ? n[e] : e; return "@media (max-width:".concat(t - c / 100).concat(o, ")") } function A(e, t) { var i = d.indexOf(t); return "@media (min-width:".concat("number" === typeof n[e] ? n[e] : e).concat(o, ") and ") + "(max-width:".concat((-1 !== i && "number" === typeof n[d[i]] ? n[d[i]] : t) - c / 100).concat(o, ")") } return (0, i.Z)({ keys: d, values: C, up: I, down: h, between: A, only: function (e) { return d.indexOf(e) + 1 < d.length ? A(e, d[d.indexOf(e) + 1]) : I(e) }, not: function (e) { var t = d.indexOf(e); return 0 === t ? I(d[1]) : t === d.length - 1 ? h(d[t]) : A(e, d[d.indexOf(e) + 1]).replace("@media", "@media not all and") }, unit: o }, u) }(n), v = function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 8; if (e.mui) return e; var t = (0, c.hB)({ spacing: e }), n = function () { for (var e = arguments.length, n = new Array(e), i = 0; i < e; i++)n[i] = arguments[i]; return (0 === n.length ? [1] : n).map((function (e) { var n = t(e); return "number" === typeof n ? "".concat(n, "px") : n })).join(" ") }; return n.mui = !0, n }(h), b = (0, a.Z)({ breakpoints: m, direction: "ltr", components: {}, palette: (0, i.Z)({ mode: "light" }, I), spacing: v, shape: (0, i.Z)({}, g, p) }, f), y = arguments.length, G = new Array(y > 1 ? y - 1 : 0), B = 1; B < y; B++)G[B - 1] = arguments[B]; return (b = G.reduce((function (e, t) { return (0, a.Z)(e, t) }), b)).unstable_sxConfig = (0, i.Z)({}, C.Z, null == f ? void 0 : f.unstable_sxConfig), b.unstable_sx = function (e) { return (0, u.Z)({ sx: e, theme: this }) }, b } }, 8247: function (e, t, n) { "use strict"; var i = n(2466); t.Z = function (e, t) { return t ? (0, i.Z)(e, t, { clone: !1 }) : e } }, 5682: function (e, t, n) { "use strict"; n.d(t, { hB: function () { return h }, eI: function () { return I }, NA: function () { return A }, e6: function () { return m }, o3: function () { return v } }); var i = n(9439), r = n(1184), a = n(8529), o = n(8247); var s = { m: "margin", p: "padding" }, l = { t: "Top", r: "Right", b: "Bottom", l: "Left", x: ["Left", "Right"], y: ["Top", "Bottom"] }, g = { marginX: "mx", marginY: "my", paddingX: "px", paddingY: "py" }, c = function (e) { var t = {}; return function (n) { return void 0 === t[n] && (t[n] = e(n)), t[n] } }((function (e) { if (e.length > 2) { if (!g[e]) return [e]; e = g[e] } var t = e.split(""), n = (0, i.Z)(t, 2), r = n[0], a = n[1], o = s[r], c = l[a] || ""; return Array.isArray(c) ? c.map((function (e) { return o + e })) : [o + c] })), u = ["m", "mt", "mr", "mb", "ml", "mx", "my", "margin", "marginTop", "marginRight", "marginBottom", "marginLeft", "marginX", "marginY", "marginInline", "marginInlineStart", "marginInlineEnd", "marginBlock", "marginBlockStart", "marginBlockEnd"], C = ["p", "pt", "pr", "pb", "pl", "px", "py", "padding", "paddingTop", "paddingRight", "paddingBottom", "paddingLeft", "paddingX", "paddingY", "paddingInline", "paddingInlineStart", "paddingInlineEnd", "paddingBlock", "paddingBlockStart", "paddingBlockEnd"], d = [].concat(u, C); function I(e, t, n, i) { var r, o = null != (r = (0, a.DW)(e, t, !1)) ? r : n; return "number" === typeof o ? function (e) { return "string" === typeof e ? e : o * e } : Array.isArray(o) ? function (e) { return "string" === typeof e ? e : o[e] } : "function" === typeof o ? o : function () { } } function h(e) { return I(e, "spacing", 8) } function A(e, t) { if ("string" === typeof t || null == t) return t; var n = e(Math.abs(t)); return t >= 0 ? n : "number" === typeof n ? -n : "-".concat(n) } function p(e, t, n, i) { if (-1 === t.indexOf(n)) return null; var a = function (e, t) { return function (n) { return e.reduce((function (e, i) { return e[i] = A(t, n), e }), {}) } }(c(n), i), o = e[n]; return (0, r.k9)(e, o, a) } function f(e, t) { var n = h(e.theme); return Object.keys(e).map((function (i) { return p(e, t, i, n) })).reduce(o.Z, {}) } function m(e) { return f(e, u) } function v(e) { return f(e, C) } function b(e) { return f(e, d) } m.propTypes = {}, m.filterProps = u, v.propTypes = {}, v.filterProps = C, b.propTypes = {}, b.filterProps = d }, 8529: function (e, t, n) { "use strict"; n.d(t, { DW: function () { return o }, Jq: function () { return s } }); var i = n(4942), r = n(1122), a = n(1184); function o(e, t) { var n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2]; if (!t || "string" !== typeof t) return null; if (e && e.vars && n) { var i = "vars.".concat(t).split(".").reduce((function (e, t) { return e && e[t] ? e[t] : null }), e); if (null != i) return i } return t.split(".").reduce((function (e, t) { return e && null != e[t] ? e[t] : null }), e) } function s(e, t, n) { var i, r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : n; return i = "function" === typeof e ? e(n) : Array.isArray(e) ? e[n] || r : o(e, n) || r, t && (i = t(i, r, e)), i } t.ZP = function (e) { var t = e.prop, n = e.cssProperty, l = void 0 === n ? e.prop : n, g = e.themeKey, c = e.transform, u = function (e) { if (null == e[t]) return null; var n = e[t], u = o(e.theme, g) || {}; return (0, a.k9)(e, n, (function (e) { var n = s(u, c, e); return e === n && "string" === typeof e && (n = s(u, c, "".concat(t).concat("default" === e ? "" : (0, r.Z)(e)), e)), !1 === l ? n : (0, i.Z)({}, l, n) })) }; return u.propTypes = {}, u.filterProps = [t], u } }, 7416: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return V } }); var i = n(5682), r = n(8529), a = n(8247); var o = function () { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; var i = t.reduce((function (e, t) { return t.filterProps.forEach((function (n) { e[n] = t })), e }), {}), r = function (e) { return Object.keys(e).reduce((function (t, n) { return i[n] ? (0, a.Z)(t, i[n](e)) : t }), {}) }; return r.propTypes = {}, r.filterProps = t.reduce((function (e, t) { return e.concat(t.filterProps) }), []), r }, s = n(1184); function l(e) { return "number" !== typeof e ? e : "".concat(e, "px solid") } var g = (0, r.ZP)({ prop: "border", themeKey: "borders", transform: l }), c = (0, r.ZP)({ prop: "borderTop", themeKey: "borders", transform: l }), u = (0, r.ZP)({ prop: "borderRight", themeKey: "borders", transform: l }), C = (0, r.ZP)({ prop: "borderBottom", themeKey: "borders", transform: l }), d = (0, r.ZP)({ prop: "borderLeft", themeKey: "borders", transform: l }), I = (0, r.ZP)({ prop: "borderColor", themeKey: "palette" }), h = (0, r.ZP)({ prop: "borderTopColor", themeKey: "palette" }), A = (0, r.ZP)({ prop: "borderRightColor", themeKey: "palette" }), p = (0, r.ZP)({ prop: "borderBottomColor", themeKey: "palette" }), f = (0, r.ZP)({ prop: "borderLeftColor", themeKey: "palette" }), m = function (e) { if (void 0 !== e.borderRadius && null !== e.borderRadius) { var t = (0, i.eI)(e.theme, "shape.borderRadius", 4, "borderRadius"); return (0, s.k9)(e, e.borderRadius, (function (e) { return { borderRadius: (0, i.NA)(t, e) } })) } return null }; m.propTypes = {}, m.filterProps = ["borderRadius"]; o(g, c, u, C, d, I, h, A, p, f, m); var v = function (e) { if (void 0 !== e.gap && null !== e.gap) { var t = (0, i.eI)(e.theme, "spacing", 8, "gap"); return (0, s.k9)(e, e.gap, (function (e) { return { gap: (0, i.NA)(t, e) } })) } return null }; v.propTypes = {}, v.filterProps = ["gap"]; var b = function (e) { if (void 0 !== e.columnGap && null !== e.columnGap) { var t = (0, i.eI)(e.theme, "spacing", 8, "columnGap"); return (0, s.k9)(e, e.columnGap, (function (e) { return { columnGap: (0, i.NA)(t, e) } })) } return null }; b.propTypes = {}, b.filterProps = ["columnGap"]; var y = function (e) { if (void 0 !== e.rowGap && null !== e.rowGap) { var t = (0, i.eI)(e.theme, "spacing", 8, "rowGap"); return (0, s.k9)(e, e.rowGap, (function (e) { return { rowGap: (0, i.NA)(t, e) } })) } return null }; y.propTypes = {}, y.filterProps = ["rowGap"]; o(v, b, y, (0, r.ZP)({ prop: "gridColumn" }), (0, r.ZP)({ prop: "gridRow" }), (0, r.ZP)({ prop: "gridAutoFlow" }), (0, r.ZP)({ prop: "gridAutoColumns" }), (0, r.ZP)({ prop: "gridAutoRows" }), (0, r.ZP)({ prop: "gridTemplateColumns" }), (0, r.ZP)({ prop: "gridTemplateRows" }), (0, r.ZP)({ prop: "gridTemplateAreas" }), (0, r.ZP)({ prop: "gridArea" })); function G(e, t) { return "grey" === t ? t : e } o((0, r.ZP)({ prop: "color", themeKey: "palette", transform: G }), (0, r.ZP)({ prop: "bgcolor", cssProperty: "backgroundColor", themeKey: "palette", transform: G }), (0, r.ZP)({ prop: "backgroundColor", themeKey: "palette", transform: G })); function B(e) { return e <= 1 && 0 !== e ? "".concat(100 * e, "%") : e } var Z = (0, r.ZP)({ prop: "width", transform: B }), w = function (e) { if (void 0 !== e.maxWidth && null !== e.maxWidth) { return (0, s.k9)(e, e.maxWidth, (function (t) { var n, i, r = (null == (n = e.theme) || null == (n = n.breakpoints) || null == (n = n.values) ? void 0 : n[t]) || s.VO[t]; return r ? "px" !== (null == (i = e.theme) || null == (i = i.breakpoints) ? void 0 : i.unit) ? { maxWidth: "".concat(r).concat(e.theme.breakpoints.unit) } : { maxWidth: r } : { maxWidth: B(t) } })) } return null }; w.filterProps = ["maxWidth"]; var S = (0, r.ZP)({ prop: "minWidth", transform: B }), R = (0, r.ZP)({ prop: "height", transform: B }), x = (0, r.ZP)({ prop: "maxHeight", transform: B }), W = (0, r.ZP)({ prop: "minHeight", transform: B }), V = ((0, r.ZP)({ prop: "size", cssProperty: "width", transform: B }), (0, r.ZP)({ prop: "size", cssProperty: "height", transform: B }), o(Z, w, S, R, x, W, (0, r.ZP)({ prop: "boxSizing" })), { border: { themeKey: "borders", transform: l }, borderTop: { themeKey: "borders", transform: l }, borderRight: { themeKey: "borders", transform: l }, borderBottom: { themeKey: "borders", transform: l }, borderLeft: { themeKey: "borders", transform: l }, borderColor: { themeKey: "palette" }, borderTopColor: { themeKey: "palette" }, borderRightColor: { themeKey: "palette" }, borderBottomColor: { themeKey: "palette" }, borderLeftColor: { themeKey: "palette" }, borderRadius: { themeKey: "shape.borderRadius", style: m }, color: { themeKey: "palette", transform: G }, bgcolor: { themeKey: "palette", cssProperty: "backgroundColor", transform: G }, backgroundColor: { themeKey: "palette", transform: G }, p: { style: i.o3 }, pt: { style: i.o3 }, pr: { style: i.o3 }, pb: { style: i.o3 }, pl: { style: i.o3 }, px: { style: i.o3 }, py: { style: i.o3 }, padding: { style: i.o3 }, paddingTop: { style: i.o3 }, paddingRight: { style: i.o3 }, paddingBottom: { style: i.o3 }, paddingLeft: { style: i.o3 }, paddingX: { style: i.o3 }, paddingY: { style: i.o3 }, paddingInline: { style: i.o3 }, paddingInlineStart: { style: i.o3 }, paddingInlineEnd: { style: i.o3 }, paddingBlock: { style: i.o3 }, paddingBlockStart: { style: i.o3 }, paddingBlockEnd: { style: i.o3 }, m: { style: i.e6 }, mt: { style: i.e6 }, mr: { style: i.e6 }, mb: { style: i.e6 }, ml: { style: i.e6 }, mx: { style: i.e6 }, my: { style: i.e6 }, margin: { style: i.e6 }, marginTop: { style: i.e6 }, marginRight: { style: i.e6 }, marginBottom: { style: i.e6 }, marginLeft: { style: i.e6 }, marginX: { style: i.e6 }, marginY: { style: i.e6 }, marginInline: { style: i.e6 }, marginInlineStart: { style: i.e6 }, marginInlineEnd: { style: i.e6 }, marginBlock: { style: i.e6 }, marginBlockStart: { style: i.e6 }, marginBlockEnd: { style: i.e6 }, displayPrint: { cssProperty: !1, transform: function (e) { return { "@media print": { display: e } } } }, display: {}, overflow: {}, textOverflow: {}, visibility: {}, whiteSpace: {}, flexBasis: {}, flexDirection: {}, flexWrap: {}, justifyContent: {}, alignItems: {}, alignContent: {}, order: {}, flex: {}, flexGrow: {}, flexShrink: {}, alignSelf: {}, justifyItems: {}, justifySelf: {}, gap: { style: v }, rowGap: { style: y }, columnGap: { style: b }, gridColumn: {}, gridRow: {}, gridAutoFlow: {}, gridAutoColumns: {}, gridAutoRows: {}, gridTemplateColumns: {}, gridTemplateRows: {}, gridTemplateAreas: {}, gridArea: {}, position: {}, zIndex: { themeKey: "zIndex" }, top: {}, right: {}, bottom: {}, left: {}, boxShadow: { themeKey: "shadows" }, width: { transform: B }, maxWidth: { style: w }, minWidth: { transform: B }, height: { transform: B }, maxHeight: { transform: B }, minHeight: { transform: B }, boxSizing: {}, fontFamily: { themeKey: "typography" }, fontSize: { themeKey: "typography" }, fontStyle: { themeKey: "typography" }, fontWeight: { themeKey: "typography" }, letterSpacing: {}, textTransform: {}, lineHeight: {}, textAlign: {}, typography: { cssProperty: !1, themeKey: "typography" } }) }, 104: function (e, t, n) { "use strict"; var i = n(4942), r = n(1122), a = n(8247), o = n(8529), s = n(1184), l = n(7416); var g = function () { function e(e, t, n, a) { var l, g = (l = {}, (0, i.Z)(l, e, t), (0, i.Z)(l, "theme", n), l), c = a[e]; if (!c) return (0, i.Z)({}, e, t); var u = c.cssProperty, C = void 0 === u ? e : u, d = c.themeKey, I = c.transform, h = c.style; if (null == t) return null; if ("typography" === d && "inherit" === t) return (0, i.Z)({}, e, t); var A = (0, o.DW)(n, d) || {}; if (h) return h(g); return (0, s.k9)(g, t, (function (t) { var n = (0, o.Jq)(A, I, t); return t === n && "string" === typeof t && (n = (0, o.Jq)(A, I, "".concat(e).concat("default" === t ? "" : (0, r.Z)(t)), t)), !1 === C ? n : (0, i.Z)({}, C, n) })) } return function t(n) { var r, o = n || {}, g = o.sx, c = o.theme, u = void 0 === c ? {} : c; if (!g) return null; var C = null != (r = u.unstable_sxConfig) ? r : l.Z; function d(n) { var r = n; if ("function" === typeof n) r = n(u); else if ("object" !== typeof n) return n; if (!r) return null; var o = (0, s.W8)(u.breakpoints), l = Object.keys(o), g = o; return Object.keys(r).forEach((function (n) { var o, l, c = (o = r[n], l = u, "function" === typeof o ? o(l) : o); if (null !== c && void 0 !== c) if ("object" === typeof c) if (C[n]) g = (0, a.Z)(g, e(n, c, u, C)); else { var d = (0, s.k9)({ theme: u }, c, (function (e) { return (0, i.Z)({}, n, e) })); !function () { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; var i = t.reduce((function (e, t) { return e.concat(Object.keys(t)) }), []), r = new Set(i); return t.every((function (e) { return r.size === Object.keys(e).length })) }(d, c) ? g = (0, a.Z)(g, d) : g[n] = t({ sx: c, theme: u }) } else g = (0, a.Z)(g, e(n, c, u, C)) })), (0, s.L7)(l, g) } return Array.isArray(g) ? g.map(d) : d(g) } }(); g.filterProps = ["sx"], t.Z = g }, 3459: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return l } }); var i = n(5080), r = n(2791), a = n(2564); var o = function () { var e, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, n = r.useContext(a.T); return n && (e = n, 0 !== Object.keys(e).length) ? n : t }, s = (0, i.Z)(); var l = function () { return o(arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : s) } }, 5902: function (e, t) { "use strict"; var n = function (e) { return e }, i = function () { var e = n; return { configure: function (t) { e = t }, generate: function (t) { return e(t) }, reset: function () { e = n } } }(); t.Z = i }, 1122: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return r } }); var i = n(6189); function r(e) { if ("string" !== typeof e) throw new Error((0, i.Z)(7)); return e.charAt(0).toUpperCase() + e.slice(1) } }, 4419: function (e, t, n) { "use strict"; function i(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0, i = {}; return Object.keys(e).forEach((function (r) { i[r] = e[r].reduce((function (e, i) { if (i) { var r = t(i); "" !== r && e.push(r), n && n[i] && e.push(n[i]) } return e }), []).join(" ") })), i } n.d(t, { Z: function () { return i } }) }, 2466: function (e, t, n) { "use strict"; n.d(t, { P: function () { return r }, Z: function () { return o } }); var i = n(7462); function r(e) { return null !== e && "object" === typeof e && e.constructor === Object } function a(e) { if (!r(e)) return e; var t = {}; return Object.keys(e).forEach((function (n) { t[n] = a(e[n]) })), t } function o(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : { clone: !0 }, s = n.clone ? (0, i.Z)({}, e) : e; return r(e) && r(t) && Object.keys(t).forEach((function (i) { "__proto__" !== i && (r(t[i]) && i in e && r(e[i]) ? s[i] = o(e[i], t[i], n) : n.clone ? s[i] = r(t[i]) ? a(t[i]) : t[i] : s[i] = t[i]) })), s } }, 6189: function (e, t, n) { "use strict"; function i(e) { for (var t = "https://mui.com/production-error/?code=" + e, n = 1; n < arguments.length; n += 1)t += "&args[]=" + encodeURIComponent(arguments[n]); return "Minified MUI error #" + e + "; visit " + t + " for the full message." } n.d(t, { Z: function () { return i } }) }, 1217: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return a } }); var i = n(5902), r = { active: "active", checked: "checked", completed: "completed", disabled: "disabled", error: "error", expanded: "expanded", focused: "focused", focusVisible: "focusVisible", open: "open", readOnly: "readOnly", required: "required", selected: "selected" }; function a(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "Mui", a = r[t]; return a ? "".concat(n, "-").concat(a) : "".concat(i.Z.generate(e), "-").concat(t) } }, 5878: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return r } }); var i = n(1217); function r(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "Mui", r = {}; return t.forEach((function (t) { r[t] = (0, i.Z)(e, t, n) })), r } }, 5735: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return r } }); var i = n(7462); function r(e, t) { var n = (0, i.Z)({}, t); return Object.keys(e).forEach((function (a) { if (a.toString().match(/^(components|slots)$/)) n[a] = (0, i.Z)({}, e[a], n[a]); else if (a.toString().match(/^(componentsProps|slotProps)$/)) { var o = e[a] || {}, s = t[a]; n[a] = {}, s && Object.keys(s) ? o && Object.keys(o) ? (n[a] = (0, i.Z)({}, s), Object.keys(o).forEach((function (e) { n[a][e] = r(o[e], s[e]) }))) : n[a] = s : n[a] = o } else void 0 === n[a] && (n[a] = e[a]) })), n } }, 2971: function (e, t, n) { "use strict"; function i(e, t) { "function" === typeof e ? e(t) : e && (e.current = t) } n.d(t, { Z: function () { return i } }) }, 2876: function (e, t, n) { "use strict"; var i = n(2791), r = "undefined" !== typeof window ? i.useLayoutEffect : i.useEffect; t.Z = r }, 7494: function (e) { function t(e, t, n) { var i, r, a, o, s; function l() { var g = Date.now() - o; g < t && g >= 0 ? i = setTimeout(l, t - g) : (i = null, n || (s = e.apply(a, r), a = r = null)) } null == t && (t = 100); var g = function () { a = this, r = arguments, o = Date.now(); var g = n && !i; return i || (i = setTimeout(l, t)), g && (s = e.apply(a, r), a = r = null), s }; return g.clear = function () { i && (clearTimeout(i), i = null) }, g.flush = function () { i && (s = e.apply(a, r), a = r = null, clearTimeout(i), i = null) }, g } t.debounce = t, e.exports = t }, 2110: function (e, t, n) { "use strict"; var i = n(8309), r = { childContextTypes: !0, contextType: !0, contextTypes: !0, defaultProps: !0, displayName: !0, getDefaultProps: !0, getDerivedStateFromError: !0, getDerivedStateFromProps: !0, mixins: !0, propTypes: !0, type: !0 }, a = { name: !0, length: !0, prototype: !0, caller: !0, callee: !0, arguments: !0, arity: !0 }, o = { $$typeof: !0, compare: !0, defaultProps: !0, displayName: !0, propTypes: !0, type: !0 }, s = {}; function l(e) { return i.isMemo(e) ? o : s[e.$$typeof] || r } s[i.ForwardRef] = { $$typeof: !0, render: !0, defaultProps: !0, displayName: !0, propTypes: !0 }, s[i.Memo] = o; var g = Object.defineProperty, c = Object.getOwnPropertyNames, u = Object.getOwnPropertySymbols, C = Object.getOwnPropertyDescriptor, d = Object.getPrototypeOf, I = Object.prototype; e.exports = function e(t, n, i) { if ("string" !== typeof n) { if (I) { var r = d(n); r && r !== I && e(t, r, i) } var o = c(n); u && (o = o.concat(u(n))); for (var s = l(t), h = l(n), A = 0; A < o.length; ++A) { var p = o[A]; if (!a[p] && (!i || !i[p]) && (!h || !h[p]) && (!s || !s[p])) { var f = C(n, p); try { g(t, p, f) } catch (m) { } } } } return t } }, 746: function (e, t) { "use strict"; var n = "function" === typeof Symbol && Symbol.for, i = n ? Symbol.for("react.element") : 60103, r = n ? Symbol.for("react.portal") : 60106, a = n ? Symbol.for("react.fragment") : 60107, o = n ? Symbol.for("react.strict_mode") : 60108, s = n ? Symbol.for("react.profiler") : 60114, l = n ? Symbol.for("react.provider") : 60109, g = n ? Symbol.for("react.context") : 60110, c = n ? Symbol.for("react.async_mode") : 60111, u = n ? Symbol.for("react.concurrent_mode") : 60111, C = n ? Symbol.for("react.forward_ref") : 60112, d = n ? Symbol.for("react.suspense") : 60113, I = n ? Symbol.for("react.suspense_list") : 60120, h = n ? Symbol.for("react.memo") : 60115, A = n ? Symbol.for("react.lazy") : 60116, p = n ? Symbol.for("react.block") : 60121, f = n ? Symbol.for("react.fundamental") : 60117, m = n ? Symbol.for("react.responder") : 60118, v = n ? Symbol.for("react.scope") : 60119; function b(e) { if ("object" === typeof e && null !== e) { var t = e.$$typeof; switch (t) { case i: switch (e = e.type) { case c: case u: case a: case s: case o: case d: return e; default: switch (e = e && e.$$typeof) { case g: case C: case A: case h: case l: return e; default: return t } }case r: return t } } } function y(e) { return b(e) === u } t.AsyncMode = c, t.ConcurrentMode = u, t.ContextConsumer = g, t.ContextProvider = l, t.Element = i, t.ForwardRef = C, t.Fragment = a, t.Lazy = A, t.Memo = h, t.Portal = r, t.Profiler = s, t.StrictMode = o, t.Suspense = d, t.isAsyncMode = function (e) { return y(e) || b(e) === c }, t.isConcurrentMode = y, t.isContextConsumer = function (e) { return b(e) === g }, t.isContextProvider = function (e) { return b(e) === l }, t.isElement = function (e) { return "object" === typeof e && null !== e && e.$$typeof === i }, t.isForwardRef = function (e) { return b(e) === C }, t.isFragment = function (e) { return b(e) === a }, t.isLazy = function (e) { return b(e) === A }, t.isMemo = function (e) { return b(e) === h }, t.isPortal = function (e) { return b(e) === r }, t.isProfiler = function (e) { return b(e) === s }, t.isStrictMode = function (e) { return b(e) === o }, t.isSuspense = function (e) { return b(e) === d }, t.isValidElementType = function (e) { return "string" === typeof e || "function" === typeof e || e === a || e === u || e === s || e === o || e === d || e === I || "object" === typeof e && null !== e && (e.$$typeof === A || e.$$typeof === h || e.$$typeof === l || e.$$typeof === g || e.$$typeof === C || e.$$typeof === f || e.$$typeof === m || e.$$typeof === v || e.$$typeof === p) }, t.typeOf = b }, 8309: function (e, t, n) { "use strict"; e.exports = n(746) }, 4463: function (e, t, n) { "use strict"; var i = n(2791), r = n(5585); function a(e) { for (var t = "https://reactjs.org/docs/error-decoder.html?invariant=" + e, n = 1; n < arguments.length; n++)t += "&args[]=" + encodeURIComponent(arguments[n]); return "Minified React error #" + e + "; visit " + t + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings." } var o = new Set, s = {}; function l(e, t) { g(e, t), g(e + "Capture", t) } function g(e, t) { for (s[e] = t, e = 0; e < t.length; e++)o.add(t[e]) } var c = !("undefined" === typeof window || "undefined" === typeof window.document || "undefined" === typeof window.document.createElement), u = Object.prototype.hasOwnProperty, C = /^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/, d = {}, I = {}; function h(e, t, n, i, r, a, o) { this.acceptsBooleans = 2 === t || 3 === t || 4 === t, this.attributeName = i, this.attributeNamespace = r, this.mustUseProperty = n, this.propertyName = e, this.type = t, this.sanitizeURL = a, this.removeEmptyString = o } var A = {}; "children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function (e) { A[e] = new h(e, 0, !1, e, null, !1, !1) })), [["acceptCharset", "accept-charset"], ["className", "class"], ["htmlFor", "for"], ["httpEquiv", "http-equiv"]].forEach((function (e) { var t = e[0]; A[t] = new h(t, 1, !1, e[1], null, !1, !1) })), ["contentEditable", "draggable", "spellCheck", "value"].forEach((function (e) { A[e] = new h(e, 2, !1, e.toLowerCase(), null, !1, !1) })), ["autoReverse", "externalResourcesRequired", "focusable", "preserveAlpha"].forEach((function (e) { A[e] = new h(e, 2, !1, e, null, !1, !1) })), "allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function (e) { A[e] = new h(e, 3, !1, e.toLowerCase(), null, !1, !1) })), ["checked", "multiple", "muted", "selected"].forEach((function (e) { A[e] = new h(e, 3, !0, e, null, !1, !1) })), ["capture", "download"].forEach((function (e) { A[e] = new h(e, 4, !1, e, null, !1, !1) })), ["cols", "rows", "size", "span"].forEach((function (e) { A[e] = new h(e, 6, !1, e, null, !1, !1) })), ["rowSpan", "start"].forEach((function (e) { A[e] = new h(e, 5, !1, e.toLowerCase(), null, !1, !1) })); var p = /[\-:]([a-z])/g; function f(e) { return e[1].toUpperCase() } function m(e, t, n, i) { var r = A.hasOwnProperty(t) ? A[t] : null; (null !== r ? 0 !== r.type : i || !(2 < t.length) || "o" !== t[0] && "O" !== t[0] || "n" !== t[1] && "N" !== t[1]) && (function (e, t, n, i) { if (null === t || "undefined" === typeof t || function (e, t, n, i) { if (null !== n && 0 === n.type) return !1; switch (typeof t) { case "function": case "symbol": return !0; case "boolean": return !i && (null !== n ? !n.acceptsBooleans : "data-" !== (e = e.toLowerCase().slice(0, 5)) && "aria-" !== e); default: return !1 } }(e, t, n, i)) return !0; if (i) return !1; if (null !== n) switch (n.type) { case 3: return !t; case 4: return !1 === t; case 5: return isNaN(t); case 6: return isNaN(t) || 1 > t }return !1 }(t, n, r, i) && (n = null), i || null === r ? function (e) { return !!u.call(I, e) || !u.call(d, e) && (C.test(e) ? I[e] = !0 : (d[e] = !0, !1)) }(t) && (null === n ? e.removeAttribute(t) : e.setAttribute(t, "" + n)) : r.mustUseProperty ? e[r.propertyName] = null === n ? 3 !== r.type && "" : n : (t = r.attributeName, i = r.attributeNamespace, null === n ? e.removeAttribute(t) : (n = 3 === (r = r.type) || 4 === r && !0 === n ? "" : "" + n, i ? e.setAttributeNS(i, t, n) : e.setAttribute(t, n)))) } "accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function (e) { var t = e.replace(p, f); A[t] = new h(t, 1, !1, e, null, !1, !1) })), "xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function (e) { var t = e.replace(p, f); A[t] = new h(t, 1, !1, e, "http://www.w3.org/1999/xlink", !1, !1) })), ["xml:base", "xml:lang", "xml:space"].forEach((function (e) { var t = e.replace(p, f); A[t] = new h(t, 1, !1, e, "http://www.w3.org/XML/1998/namespace", !1, !1) })), ["tabIndex", "crossOrigin"].forEach((function (e) { A[e] = new h(e, 1, !1, e.toLowerCase(), null, !1, !1) })), A.xlinkHref = new h("xlinkHref", 1, !1, "xlink:href", "http://www.w3.org/1999/xlink", !0, !1), ["src", "href", "action", "formAction"].forEach((function (e) { A[e] = new h(e, 1, !1, e.toLowerCase(), null, !0, !0) })); var v = i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED, b = Symbol.for("react.element"), y = Symbol.for("react.portal"), G = Symbol.for("react.fragment"), B = Symbol.for("react.strict_mode"), Z = Symbol.for("react.profiler"), w = Symbol.for("react.provider"), S = Symbol.for("react.context"), R = Symbol.for("react.forward_ref"), x = Symbol.for("react.suspense"), W = Symbol.for("react.suspense_list"), V = Symbol.for("react.memo"), k = Symbol.for("react.lazy"); Symbol.for("react.scope"), Symbol.for("react.debug_trace_mode"); var H = Symbol.for("react.offscreen"); Symbol.for("react.legacy_hidden"), Symbol.for("react.cache"), Symbol.for("react.tracing_marker"); var M = Symbol.iterator; function F(e) { return null === e || "object" !== typeof e ? null : "function" === typeof (e = M && e[M] || e["@@iterator"]) ? e : null } var N, X = Object.assign; function Y(e) { if (void 0 === N) try { throw Error() } catch (n) { var t = n.stack.trim().match(/\n( *(at )?)/); N = t && t[1] || "" } return "\n" + N + e } var K = !1; function L(e, t) { if (!e || K) return ""; K = !0; var n = Error.prepareStackTrace; Error.prepareStackTrace = void 0; try { if (t) if (t = function () { throw Error() }, Object.defineProperty(t.prototype, "props", { set: function () { throw Error() } }), "object" === typeof Reflect && Reflect.construct) { try { Reflect.construct(t, []) } catch (g) { var i = g } Reflect.construct(e, [], t) } else { try { t.call() } catch (g) { i = g } e.call(t.prototype) } else { try { throw Error() } catch (g) { i = g } e() } } catch (g) { if (g && i && "string" === typeof g.stack) { for (var r = g.stack.split("\n"), a = i.stack.split("\n"), o = r.length - 1, s = a.length - 1; 1 <= o && 0 <= s && r[o] !== a[s];)s--; for (; 1 <= o && 0 <= s; o--, s--)if (r[o] !== a[s]) { if (1 !== o || 1 !== s) do { if (o--, 0 > --s || r[o] !== a[s]) { var l = "\n" + r[o].replace(" at new ", " at "); return e.displayName && l.includes("<anonymous>") && (l = l.replace("<anonymous>", e.displayName)), l } } while (1 <= o && 0 <= s); break } } } finally { K = !1, Error.prepareStackTrace = n } return (e = e ? e.displayName || e.name : "") ? Y(e) : "" } function z(e) { switch (e.tag) { case 5: return Y(e.type); case 16: return Y("Lazy"); case 13: return Y("Suspense"); case 19: return Y("SuspenseList"); case 0: case 2: case 15: return e = L(e.type, !1); case 11: return e = L(e.type.render, !1); case 1: return e = L(e.type, !0); default: return "" } } function E(e) { if (null == e) return null; if ("function" === typeof e) return e.displayName || e.name || null; if ("string" === typeof e) return e; switch (e) { case G: return "Fragment"; case y: return "Portal"; case Z: return "Profiler"; case B: return "StrictMode"; case x: return "Suspense"; case W: return "SuspenseList" }if ("object" === typeof e) switch (e.$$typeof) { case S: return (e.displayName || "Context") + ".Consumer"; case w: return (e._context.displayName || "Context") + ".Provider"; case R: var t = e.render; return (e = e.displayName) || (e = "" !== (e = t.displayName || t.name || "") ? "ForwardRef(" + e + ")" : "ForwardRef"), e; case V: return null !== (t = e.displayName || null) ? t : E(e.type) || "Memo"; case k: t = e._payload, e = e._init; try { return E(e(t)) } catch (n) { } }return null } function T(e) { var t = e.type; switch (e.tag) { case 24: return "Cache"; case 9: return (t.displayName || "Context") + ".Consumer"; case 10: return (t._context.displayName || "Context") + ".Provider"; case 18: return "DehydratedFragment"; case 11: return e = (e = t.render).displayName || e.name || "", t.displayName || ("" !== e ? "ForwardRef(" + e + ")" : "ForwardRef"); case 7: return "Fragment"; case 5: return t; case 4: return "Portal"; case 3: return "Root"; case 6: return "Text"; case 16: return E(t); case 8: return t === B ? "StrictMode" : "Mode"; case 22: return "Offscreen"; case 12: return "Profiler"; case 21: return "Scope"; case 13: return "Suspense"; case 19: return "SuspenseList"; case 25: return "TracingMarker"; case 1: case 0: case 17: case 2: case 14: case 15: if ("function" === typeof t) return t.displayName || t.name || null; if ("string" === typeof t) return t }return null } function _(e) { switch (typeof e) { case "boolean": case "number": case "string": case "undefined": case "object": return e; default: return "" } } function U(e) { var t = e.type; return (e = e.nodeName) && "input" === e.toLowerCase() && ("checkbox" === t || "radio" === t) } function D(e) { e._valueTracker || (e._valueTracker = function (e) { var t = U(e) ? "checked" : "value", n = Object.getOwnPropertyDescriptor(e.constructor.prototype, t), i = "" + e[t]; if (!e.hasOwnProperty(t) && "undefined" !== typeof n && "function" === typeof n.get && "function" === typeof n.set) { var r = n.get, a = n.set; return Object.defineProperty(e, t, { configurable: !0, get: function () { return r.call(this) }, set: function (e) { i = "" + e, a.call(this, e) } }), Object.defineProperty(e, t, { enumerable: n.enumerable }), { getValue: function () { return i }, setValue: function (e) { i = "" + e }, stopTracking: function () { e._valueTracker = null, delete e[t] } } } }(e)) } function P(e) { if (!e) return !1; var t = e._valueTracker; if (!t) return !0; var n = t.getValue(), i = ""; return e && (i = U(e) ? e.checked ? "true" : "false" : e.value), (e = i) !== n && (t.setValue(e), !0) } function J(e) { if ("undefined" === typeof (e = e || ("undefined" !== typeof document ? document : void 0))) return null; try { return e.activeElement || e.body } catch (t) { return e.body } } function O(e, t) { var n = t.checked; return X({}, t, { defaultChecked: void 0, defaultValue: void 0, value: void 0, checked: null != n ? n : e._wrapperState.initialChecked }) } function j(e, t) { var n = null == t.defaultValue ? "" : t.defaultValue, i = null != t.checked ? t.checked : t.defaultChecked; n = _(null != t.value ? t.value : n), e._wrapperState = { initialChecked: i, initialValue: n, controlled: "checkbox" === t.type || "radio" === t.type ? null != t.checked : null != t.value } } function Q(e, t) { null != (t = t.checked) && m(e, "checked", t, !1) } function q(e, t) { Q(e, t); var n = _(t.value), i = t.type; if (null != n) "number" === i ? (0 === n && "" === e.value || e.value != n) && (e.value = "" + n) : e.value !== "" + n && (e.value = "" + n); else if ("submit" === i || "reset" === i) return void e.removeAttribute("value"); t.hasOwnProperty("value") ? ee(e, t.type, n) : t.hasOwnProperty("defaultValue") && ee(e, t.type, _(t.defaultValue)), null == t.checked && null != t.defaultChecked && (e.defaultChecked = !!t.defaultChecked) } function $(e, t, n) { if (t.hasOwnProperty("value") || t.hasOwnProperty("defaultValue")) { var i = t.type; if (!("submit" !== i && "reset" !== i || void 0 !== t.value && null !== t.value)) return; t = "" + e._wrapperState.initialValue, n || t === e.value || (e.value = t), e.defaultValue = t } "" !== (n = e.name) && (e.name = ""), e.defaultChecked = !!e._wrapperState.initialChecked, "" !== n && (e.name = n) } function ee(e, t, n) { "number" === t && J(e.ownerDocument) === e || (null == n ? e.defaultValue = "" + e._wrapperState.initialValue : e.defaultValue !== "" + n && (e.defaultValue = "" + n)) } var te = Array.isArray; function ne(e, t, n, i) { if (e = e.options, t) { t = {}; for (var r = 0; r < n.length; r++)t["$" + n[r]] = !0; for (n = 0; n < e.length; n++)r = t.hasOwnProperty("$" + e[n].value), e[n].selected !== r && (e[n].selected = r), r && i && (e[n].defaultSelected = !0) } else { for (n = "" + _(n), t = null, r = 0; r < e.length; r++) { if (e[r].value === n) return e[r].selected = !0, void (i && (e[r].defaultSelected = !0)); null !== t || e[r].disabled || (t = e[r]) } null !== t && (t.selected = !0) } } function ie(e, t) { if (null != t.dangerouslySetInnerHTML) throw Error(a(91)); return X({}, t, { value: void 0, defaultValue: void 0, children: "" + e._wrapperState.initialValue }) } function re(e, t) { var n = t.value; if (null == n) { if (n = t.children, t = t.defaultValue, null != n) { if (null != t) throw Error(a(92)); if (te(n)) { if (1 < n.length) throw Error(a(93)); n = n[0] } t = n } null == t && (t = ""), n = t } e._wrapperState = { initialValue: _(n) } } function ae(e, t) { var n = _(t.value), i = _(t.defaultValue); null != n && ((n = "" + n) !== e.value && (e.value = n), null == t.defaultValue && e.defaultValue !== n && (e.defaultValue = n)), null != i && (e.defaultValue = "" + i) } function oe(e) { var t = e.textContent; t === e._wrapperState.initialValue && "" !== t && null !== t && (e.value = t) } function se(e) { switch (e) { case "svg": return "http://www.w3.org/2000/svg"; case "math": return "http://www.w3.org/1998/Math/MathML"; default: return "http://www.w3.org/1999/xhtml" } } function le(e, t) { return null == e || "http://www.w3.org/1999/xhtml" === e ? se(t) : "http://www.w3.org/2000/svg" === e && "foreignObject" === t ? "http://www.w3.org/1999/xhtml" : e } var ge, ce, ue = (ce = function (e, t) { if ("http://www.w3.org/2000/svg" !== e.namespaceURI || "innerHTML" in e) e.innerHTML = t; else { for ((ge = ge || document.createElement("div")).innerHTML = "<svg>" + t.valueOf().toString() + "</svg>", t = ge.firstChild; e.firstChild;)e.removeChild(e.firstChild); for (; t.firstChild;)e.appendChild(t.firstChild) } }, "undefined" !== typeof MSApp && MSApp.execUnsafeLocalFunction ? function (e, t, n, i) { MSApp.execUnsafeLocalFunction((function () { return ce(e, t) })) } : ce); function Ce(e, t) { if (t) { var n = e.firstChild; if (n && n === e.lastChild && 3 === n.nodeType) return void (n.nodeValue = t) } e.textContent = t } var de = { animationIterationCount: !0, aspectRatio: !0, borderImageOutset: !0, borderImageSlice: !0, borderImageWidth: !0, boxFlex: !0, boxFlexGroup: !0, boxOrdinalGroup: !0, columnCount: !0, columns: !0, flex: !0, flexGrow: !0, flexPositive: !0, flexShrink: !0, flexNegative: !0, flexOrder: !0, gridArea: !0, gridRow: !0, gridRowEnd: !0, gridRowSpan: !0, gridRowStart: !0, gridColumn: !0, gridColumnEnd: !0, gridColumnSpan: !0, gridColumnStart: !0, fontWeight: !0, lineClamp: !0, lineHeight: !0, opacity: !0, order: !0, orphans: !0, tabSize: !0, widows: !0, zIndex: !0, zoom: !0, fillOpacity: !0, floodOpacity: !0, stopOpacity: !0, strokeDasharray: !0, strokeDashoffset: !0, strokeMiterlimit: !0, strokeOpacity: !0, strokeWidth: !0 }, Ie = ["Webkit", "ms", "Moz", "O"]; function he(e, t, n) { return null == t || "boolean" === typeof t || "" === t ? "" : n || "number" !== typeof t || 0 === t || de.hasOwnProperty(e) && de[e] ? ("" + t).trim() : t + "px" } function Ae(e, t) { for (var n in e = e.style, t) if (t.hasOwnProperty(n)) { var i = 0 === n.indexOf("--"), r = he(n, t[n], i); "float" === n && (n = "cssFloat"), i ? e.setProperty(n, r) : e[n] = r } } Object.keys(de).forEach((function (e) { Ie.forEach((function (t) { t = t + e.charAt(0).toUpperCase() + e.substring(1), de[t] = de[e] })) })); var pe = X({ menuitem: !0 }, { area: !0, base: !0, br: !0, col: !0, embed: !0, hr: !0, img: !0, input: !0, keygen: !0, link: !0, meta: !0, param: !0, source: !0, track: !0, wbr: !0 }); function fe(e, t) { if (t) { if (pe[e] && (null != t.children || null != t.dangerouslySetInnerHTML)) throw Error(a(137, e)); if (null != t.dangerouslySetInnerHTML) { if (null != t.children) throw Error(a(60)); if ("object" !== typeof t.dangerouslySetInnerHTML || !("__html" in t.dangerouslySetInnerHTML)) throw Error(a(61)) } if (null != t.style && "object" !== typeof t.style) throw Error(a(62)) } } function me(e, t) { if (-1 === e.indexOf("-")) return "string" === typeof t.is; switch (e) { case "annotation-xml": case "color-profile": case "font-face": case "font-face-src": case "font-face-uri": case "font-face-format": case "font-face-name": case "missing-glyph": return !1; default: return !0 } } var ve = null; function be(e) { return (e = e.target || e.srcElement || window).correspondingUseElement && (e = e.correspondingUseElement), 3 === e.nodeType ? e.parentNode : e } var ye = null, Ge = null, Be = null; function Ze(e) { if (e = mr(e)) { if ("function" !== typeof ye) throw Error(a(280)); var t = e.stateNode; t && (t = br(t), ye(e.stateNode, e.type, t)) } } function we(e) { Ge ? Be ? Be.push(e) : Be = [e] : Ge = e } function Se() { if (Ge) { var e = Ge, t = Be; if (Be = Ge = null, Ze(e), t) for (e = 0; e < t.length; e++)Ze(t[e]) } } function Re(e, t) { return e(t) } function xe() { } var We = !1; function Ve(e, t, n) { if (We) return e(t, n); We = !0; try { return Re(e, t, n) } finally { We = !1, (null !== Ge || null !== Be) && (xe(), Se()) } } function ke(e, t) { var n = e.stateNode; if (null === n) return null; var i = br(n); if (null === i) return null; n = i[t]; e: switch (t) { case "onClick": case "onClickCapture": case "onDoubleClick": case "onDoubleClickCapture": case "onMouseDown": case "onMouseDownCapture": case "onMouseMove": case "onMouseMoveCapture": case "onMouseUp": case "onMouseUpCapture": case "onMouseEnter": (i = !i.disabled) || (i = !("button" === (e = e.type) || "input" === e || "select" === e || "textarea" === e)), e = !i; break e; default: e = !1 }if (e) return null; if (n && "function" !== typeof n) throw Error(a(231, t, typeof n)); return n } var He = !1; if (c) try { var Me = {}; Object.defineProperty(Me, "passive", { get: function () { He = !0 } }), window.addEventListener("test", Me, Me), window.removeEventListener("test", Me, Me) } catch (ce) { He = !1 } function Fe(e, t, n, i, r, a, o, s, l) { var g = Array.prototype.slice.call(arguments, 3); try { t.apply(n, g) } catch (c) { this.onError(c) } } var Ne = !1, Xe = null, Ye = !1, Ke = null, Le = { onError: function (e) { Ne = !0, Xe = e } }; function ze(e, t, n, i, r, a, o, s, l) { Ne = !1, Xe = null, Fe.apply(Le, arguments) } function Ee(e) { var t = e, n = e; if (e.alternate) for (; t.return;)t = t.return; else { e = t; do { 0 !== (4098 & (t = e).flags) && (n = t.return), e = t.return } while (e) } return 3 === t.tag ? n : null } function Te(e) { if (13 === e.tag) { var t = e.memoizedState; if (null === t && (null !== (e = e.alternate) && (t = e.memoizedState)), null !== t) return t.dehydrated } return null } function _e(e) { if (Ee(e) !== e) throw Error(a(188)) } function Ue(e) { return null !== (e = function (e) { var t = e.alternate; if (!t) { if (null === (t = Ee(e))) throw Error(a(188)); return t !== e ? null : e } for (var n = e, i = t; ;) { var r = n.return; if (null === r) break; var o = r.alternate; if (null === o) { if (null !== (i = r.return)) { n = i; continue } break } if (r.child === o.child) { for (o = r.child; o;) { if (o === n) return _e(r), e; if (o === i) return _e(r), t; o = o.sibling } throw Error(a(188)) } if (n.return !== i.return) n = r, i = o; else { for (var s = !1, l = r.child; l;) { if (l === n) { s = !0, n = r, i = o; break } if (l === i) { s = !0, i = r, n = o; break } l = l.sibling } if (!s) { for (l = o.child; l;) { if (l === n) { s = !0, n = o, i = r; break } if (l === i) { s = !0, i = o, n = r; break } l = l.sibling } if (!s) throw Error(a(189)) } } if (n.alternate !== i) throw Error(a(190)) } if (3 !== n.tag) throw Error(a(188)); return n.stateNode.current === n ? e : t }(e)) ? De(e) : null } function De(e) { if (5 === e.tag || 6 === e.tag) return e; for (e = e.child; null !== e;) { var t = De(e); if (null !== t) return t; e = e.sibling } return null } var Pe = r.unstable_scheduleCallback, Je = r.unstable_cancelCallback, Oe = r.unstable_shouldYield, je = r.unstable_requestPaint, Qe = r.unstable_now, qe = r.unstable_getCurrentPriorityLevel, $e = r.unstable_ImmediatePriority, et = r.unstable_UserBlockingPriority, tt = r.unstable_NormalPriority, nt = r.unstable_LowPriority, it = r.unstable_IdlePriority, rt = null, at = null; var ot = Math.clz32 ? Math.clz32 : function (e) { return e >>>= 0, 0 === e ? 32 : 31 - (st(e) / lt | 0) | 0 }, st = Math.log, lt = Math.LN2; var gt = 64, ct = 4194304; function ut(e) { switch (e & -e) { case 1: return 1; case 2: return 2; case 4: return 4; case 8: return 8; case 16: return 16; case 32: return 32; case 64: case 128: case 256: case 512: case 1024: case 2048: case 4096: case 8192: case 16384: case 32768: case 65536: case 131072: case 262144: case 524288: case 1048576: case 2097152: return 4194240 & e; case 4194304: case 8388608: case 16777216: case 33554432: case 67108864: return 130023424 & e; case 134217728: return 134217728; case 268435456: return 268435456; case 536870912: return 536870912; case 1073741824: return 1073741824; default: return e } } function Ct(e, t) { var n = e.pendingLanes; if (0 === n) return 0; var i = 0, r = e.suspendedLanes, a = e.pingedLanes, o = 268435455 & n; if (0 !== o) { var s = o & ~r; 0 !== s ? i = ut(s) : 0 !== (a &= o) && (i = ut(a)) } else 0 !== (o = n & ~r) ? i = ut(o) : 0 !== a && (i = ut(a)); if (0 === i) return 0; if (0 !== t && t !== i && 0 === (t & r) && ((r = i & -i) >= (a = t & -t) || 16 === r && 0 !== (4194240 & a))) return t; if (0 !== (4 & i) && (i |= 16 & n), 0 !== (t = e.entangledLanes)) for (e = e.entanglements, t &= i; 0 < t;)r = 1 << (n = 31 - ot(t)), i |= e[n], t &= ~r; return i } function dt(e, t) { switch (e) { case 1: case 2: case 4: return t + 250; case 8: case 16: case 32: case 64: case 128: case 256: case 512: case 1024: case 2048: case 4096: case 8192: case 16384: case 32768: case 65536: case 131072: case 262144: case 524288: case 1048576: case 2097152: return t + 5e3; default: return -1 } } function It(e) { return 0 !== (e = -1073741825 & e.pendingLanes) ? e : 1073741824 & e ? 1073741824 : 0 } function ht() { var e = gt; return 0 === (4194240 & (gt <<= 1)) && (gt = 64), e } function At(e) { for (var t = [], n = 0; 31 > n; n++)t.push(e); return t } function pt(e, t, n) { e.pendingLanes |= t, 536870912 !== t && (e.suspendedLanes = 0, e.pingedLanes = 0), (e = e.eventTimes)[t = 31 - ot(t)] = n } function ft(e, t) { var n = e.entangledLanes |= t; for (e = e.entanglements; n;) { var i = 31 - ot(n), r = 1 << i; r & t | e[i] & t && (e[i] |= t), n &= ~r } } var mt = 0; function vt(e) { return 1 < (e &= -e) ? 4 < e ? 0 !== (268435455 & e) ? 16 : 536870912 : 4 : 1 } var bt, yt, Gt, Bt, Zt, wt = !1, St = [], Rt = null, xt = null, Wt = null, Vt = new Map, kt = new Map, Ht = [], Mt = "mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" "); function Ft(e, t) { switch (e) { case "focusin": case "focusout": Rt = null; break; case "dragenter": case "dragleave": xt = null; break; case "mouseover": case "mouseout": Wt = null; break; case "pointerover": case "pointerout": Vt.delete(t.pointerId); break; case "gotpointercapture": case "lostpointercapture": kt.delete(t.pointerId) } } function Nt(e, t, n, i, r, a) { return null === e || e.nativeEvent !== a ? (e = { blockedOn: t, domEventName: n, eventSystemFlags: i, nativeEvent: a, targetContainers: [r] }, null !== t && (null !== (t = mr(t)) && yt(t)), e) : (e.eventSystemFlags |= i, t = e.targetContainers, null !== r && -1 === t.indexOf(r) && t.push(r), e) } function Xt(e) { var t = fr(e.target); if (null !== t) { var n = Ee(t); if (null !== n) if (13 === (t = n.tag)) { if (null !== (t = Te(n))) return e.blockedOn = t, void Zt(e.priority, (function () { Gt(n) })) } else if (3 === t && n.stateNode.current.memoizedState.isDehydrated) return void (e.blockedOn = 3 === n.tag ? n.stateNode.containerInfo : null) } e.blockedOn = null } function Yt(e) { if (null !== e.blockedOn) return !1; for (var t = e.targetContainers; 0 < t.length;) { var n = Ot(e.domEventName, e.eventSystemFlags, t[0], e.nativeEvent); if (null !== n) return null !== (t = mr(n)) && yt(t), e.blockedOn = n, !1; var i = new (n = e.nativeEvent).constructor(n.type, n); ve = i, n.target.dispatchEvent(i), ve = null, t.shift() } return !0 } function Kt(e, t, n) { Yt(e) && n.delete(t) } function Lt() { wt = !1, null !== Rt && Yt(Rt) && (Rt = null), null !== xt && Yt(xt) && (xt = null), null !== Wt && Yt(Wt) && (Wt = null), Vt.forEach(Kt), kt.forEach(Kt) } function zt(e, t) { e.blockedOn === t && (e.blockedOn = null, wt || (wt = !0, r.unstable_scheduleCallback(r.unstable_NormalPriority, Lt))) } function Et(e) { function t(t) { return zt(t, e) } if (0 < St.length) { zt(St[0], e); for (var n = 1; n < St.length; n++) { var i = St[n]; i.blockedOn === e && (i.blockedOn = null) } } for (null !== Rt && zt(Rt, e), null !== xt && zt(xt, e), null !== Wt && zt(Wt, e), Vt.forEach(t), kt.forEach(t), n = 0; n < Ht.length; n++)(i = Ht[n]).blockedOn === e && (i.blockedOn = null); for (; 0 < Ht.length && null === (n = Ht[0]).blockedOn;)Xt(n), null === n.blockedOn && Ht.shift() } var Tt = v.ReactCurrentBatchConfig, _t = !0; function Ut(e, t, n, i) { var r = mt, a = Tt.transition; Tt.transition = null; try { mt = 1, Pt(e, t, n, i) } finally { mt = r, Tt.transition = a } } function Dt(e, t, n, i) { var r = mt, a = Tt.transition; Tt.transition = null; try { mt = 4, Pt(e, t, n, i) } finally { mt = r, Tt.transition = a } } function Pt(e, t, n, i) { if (_t) { var r = Ot(e, t, n, i); if (null === r) _i(e, t, i, Jt, n), Ft(e, i); else if (function (e, t, n, i, r) { switch (t) { case "focusin": return Rt = Nt(Rt, e, t, n, i, r), !0; case "dragenter": return xt = Nt(xt, e, t, n, i, r), !0; case "mouseover": return Wt = Nt(Wt, e, t, n, i, r), !0; case "pointerover": var a = r.pointerId; return Vt.set(a, Nt(Vt.get(a) || null, e, t, n, i, r)), !0; case "gotpointercapture": return a = r.pointerId, kt.set(a, Nt(kt.get(a) || null, e, t, n, i, r)), !0 }return !1 }(r, e, t, n, i)) i.stopPropagation(); else if (Ft(e, i), 4 & t && -1 < Mt.indexOf(e)) { for (; null !== r;) { var a = mr(r); if (null !== a && bt(a), null === (a = Ot(e, t, n, i)) && _i(e, t, i, Jt, n), a === r) break; r = a } null !== r && i.stopPropagation() } else _i(e, t, i, null, n) } } var Jt = null; function Ot(e, t, n, i) { if (Jt = null, null !== (e = fr(e = be(i)))) if (null === (t = Ee(e))) e = null; else if (13 === (n = t.tag)) { if (null !== (e = Te(t))) return e; e = null } else if (3 === n) { if (t.stateNode.current.memoizedState.isDehydrated) return 3 === t.tag ? t.stateNode.containerInfo : null; e = null } else t !== e && (e = null); return Jt = e, null } function jt(e) { switch (e) { case "cancel": case "click": case "close": case "contextmenu": case "copy": case "cut": case "auxclick": case "dblclick": case "dragend": case "dragstart": case "drop": case "focusin": case "focusout": case "input": case "invalid": case "keydown": case "keypress": case "keyup": case "mousedown": case "mouseup": case "paste": case "pause": case "play": case "pointercancel": case "pointerdown": case "pointerup": case "ratechange": case "reset": case "resize": case "seeked": case "submit": case "touchcancel": case "touchend": case "touchstart": case "volumechange": case "change": case "selectionchange": case "textInput": case "compositionstart": case "compositionend": case "compositionupdate": case "beforeblur": case "afterblur": case "beforeinput": case "blur": case "fullscreenchange": case "focus": case "hashchange": case "popstate": case "select": case "selectstart": return 1; case "drag": case "dragenter": case "dragexit": case "dragleave": case "dragover": case "mousemove": case "mouseout": case "mouseover": case "pointermove": case "pointerout": case "pointerover": case "scroll": case "toggle": case "touchmove": case "wheel": case "mouseenter": case "mouseleave": case "pointerenter": case "pointerleave": return 4; case "message": switch (qe()) { case $e: return 1; case et: return 4; case tt: case nt: return 16; case it: return 536870912; default: return 16 }default: return 16 } } var Qt = null, qt = null, $t = null; function en() { if ($t) return $t; var e, t, n = qt, i = n.length, r = "value" in Qt ? Qt.value : Qt.textContent, a = r.length; for (e = 0; e < i && n[e] === r[e]; e++); var o = i - e; for (t = 1; t <= o && n[i - t] === r[a - t]; t++); return $t = r.slice(e, 1 < t ? 1 - t : void 0) } function tn(e) { var t = e.keyCode; return "charCode" in e ? 0 === (e = e.charCode) && 13 === t && (e = 13) : e = t, 10 === e && (e = 13), 32 <= e || 13 === e ? e : 0 } function nn() { return !0 } function rn() { return !1 } function an(e) { function t(t, n, i, r, a) { for (var o in this._reactName = t, this._targetInst = i, this.type = n, this.nativeEvent = r, this.target = a, this.currentTarget = null, e) e.hasOwnProperty(o) && (t = e[o], this[o] = t ? t(r) : r[o]); return this.isDefaultPrevented = (null != r.defaultPrevented ? r.defaultPrevented : !1 === r.returnValue) ? nn : rn, this.isPropagationStopped = rn, this } return X(t.prototype, { preventDefault: function () { this.defaultPrevented = !0; var e = this.nativeEvent; e && (e.preventDefault ? e.preventDefault() : "unknown" !== typeof e.returnValue && (e.returnValue = !1), this.isDefaultPrevented = nn) }, stopPropagation: function () { var e = this.nativeEvent; e && (e.stopPropagation ? e.stopPropagation() : "unknown" !== typeof e.cancelBubble && (e.cancelBubble = !0), this.isPropagationStopped = nn) }, persist: function () { }, isPersistent: nn }), t } var on, sn, ln, gn = { eventPhase: 0, bubbles: 0, cancelable: 0, timeStamp: function (e) { return e.timeStamp || Date.now() }, defaultPrevented: 0, isTrusted: 0 }, cn = an(gn), un = X({}, gn, { view: 0, detail: 0 }), Cn = an(un), dn = X({}, un, { screenX: 0, screenY: 0, clientX: 0, clientY: 0, pageX: 0, pageY: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, getModifierState: Zn, button: 0, buttons: 0, relatedTarget: function (e) { return void 0 === e.relatedTarget ? e.fromElement === e.srcElement ? e.toElement : e.fromElement : e.relatedTarget }, movementX: function (e) { return "movementX" in e ? e.movementX : (e !== ln && (ln && "mousemove" === e.type ? (on = e.screenX - ln.screenX, sn = e.screenY - ln.screenY) : sn = on = 0, ln = e), on) }, movementY: function (e) { return "movementY" in e ? e.movementY : sn } }), In = an(dn), hn = an(X({}, dn, { dataTransfer: 0 })), An = an(X({}, un, { relatedTarget: 0 })), pn = an(X({}, gn, { animationName: 0, elapsedTime: 0, pseudoElement: 0 })), fn = X({}, gn, { clipboardData: function (e) { return "clipboardData" in e ? e.clipboardData : window.clipboardData } }), mn = an(fn), vn = an(X({}, gn, { data: 0 })), bn = { Esc: "Escape", Spacebar: " ", Left: "ArrowLeft", Up: "ArrowUp", Right: "ArrowRight", Down: "ArrowDown", Del: "Delete", Win: "OS", Menu: "ContextMenu", Apps: "ContextMenu", Scroll: "ScrollLock", MozPrintableKey: "Unidentified" }, yn = { 8: "Backspace", 9: "Tab", 12: "Clear", 13: "Enter", 16: "Shift", 17: "Control", 18: "Alt", 19: "Pause", 20: "CapsLock", 27: "Escape", 32: " ", 33: "PageUp", 34: "PageDown", 35: "End", 36: "Home", 37: "ArrowLeft", 38: "ArrowUp", 39: "ArrowRight", 40: "ArrowDown", 45: "Insert", 46: "Delete", 112: "F1", 113: "F2", 114: "F3", 115: "F4", 116: "F5", 117: "F6", 118: "F7", 119: "F8", 120: "F9", 121: "F10", 122: "F11", 123: "F12", 144: "NumLock", 145: "ScrollLock", 224: "Meta" }, Gn = { Alt: "altKey", Control: "ctrlKey", Meta: "metaKey", Shift: "shiftKey" }; function Bn(e) { var t = this.nativeEvent; return t.getModifierState ? t.getModifierState(e) : !!(e = Gn[e]) && !!t[e] } function Zn() { return Bn } var wn = X({}, un, { key: function (e) { if (e.key) { var t = bn[e.key] || e.key; if ("Unidentified" !== t) return t } return "keypress" === e.type ? 13 === (e = tn(e)) ? "Enter" : String.fromCharCode(e) : "keydown" === e.type || "keyup" === e.type ? yn[e.keyCode] || "Unidentified" : "" }, code: 0, location: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, repeat: 0, locale: 0, getModifierState: Zn, charCode: function (e) { return "keypress" === e.type ? tn(e) : 0 }, keyCode: function (e) { return "keydown" === e.type || "keyup" === e.type ? e.keyCode : 0 }, which: function (e) { return "keypress" === e.type ? tn(e) : "keydown" === e.type || "keyup" === e.type ? e.keyCode : 0 } }), Sn = an(wn), Rn = an(X({}, dn, { pointerId: 0, width: 0, height: 0, pressure: 0, tangentialPressure: 0, tiltX: 0, tiltY: 0, twist: 0, pointerType: 0, isPrimary: 0 })), xn = an(X({}, un, { touches: 0, targetTouches: 0, changedTouches: 0, altKey: 0, metaKey: 0, ctrlKey: 0, shiftKey: 0, getModifierState: Zn })), Wn = an(X({}, gn, { propertyName: 0, elapsedTime: 0, pseudoElement: 0 })), Vn = X({}, dn, { deltaX: function (e) { return "deltaX" in e ? e.deltaX : "wheelDeltaX" in e ? -e.wheelDeltaX : 0 }, deltaY: function (e) { return "deltaY" in e ? e.deltaY : "wheelDeltaY" in e ? -e.wheelDeltaY : "wheelDelta" in e ? -e.wheelDelta : 0 }, deltaZ: 0, deltaMode: 0 }), kn = an(Vn), Hn = [9, 13, 27, 32], Mn = c && "CompositionEvent" in window, Fn = null; c && "documentMode" in document && (Fn = document.documentMode); var Nn = c && "TextEvent" in window && !Fn, Xn = c && (!Mn || Fn && 8 < Fn && 11 >= Fn), Yn = String.fromCharCode(32), Kn = !1; function Ln(e, t) { switch (e) { case "keyup": return -1 !== Hn.indexOf(t.keyCode); case "keydown": return 229 !== t.keyCode; case "keypress": case "mousedown": case "focusout": return !0; default: return !1 } } function zn(e) { return "object" === typeof (e = e.detail) && "data" in e ? e.data : null } var En = !1; var Tn = { color: !0, date: !0, datetime: !0, "datetime-local": !0, email: !0, month: !0, number: !0, password: !0, range: !0, search: !0, tel: !0, text: !0, time: !0, url: !0, week: !0 }; function _n(e) { var t = e && e.nodeName && e.nodeName.toLowerCase(); return "input" === t ? !!Tn[e.type] : "textarea" === t } function Un(e, t, n, i) { we(i), 0 < (t = Di(t, "onChange")).length && (n = new cn("onChange", "change", null, n, i), e.push({ event: n, listeners: t })) } var Dn = null, Pn = null; function Jn(e) { Yi(e, 0) } function On(e) { if (P(vr(e))) return e } function jn(e, t) { if ("change" === e) return t } var Qn = !1; if (c) { var qn; if (c) { var $n = "oninput" in document; if (!$n) { var ei = document.createElement("div"); ei.setAttribute("oninput", "return;"), $n = "function" === typeof ei.oninput } qn = $n } else qn = !1; Qn = qn && (!document.documentMode || 9 < document.documentMode) } function ti() { Dn && (Dn.detachEvent("onpropertychange", ni), Pn = Dn = null) } function ni(e) { if ("value" === e.propertyName && On(Pn)) { var t = []; Un(t, Pn, e, be(e)), Ve(Jn, t) } } function ii(e, t, n) { "focusin" === e ? (ti(), Pn = n, (Dn = t).attachEvent("onpropertychange", ni)) : "focusout" === e && ti() } function ri(e) { if ("selectionchange" === e || "keyup" === e || "keydown" === e) return On(Pn) } function ai(e, t) { if ("click" === e) return On(t) } function oi(e, t) { if ("input" === e || "change" === e) return On(t) } var si = "function" === typeof Object.is ? Object.is : function (e, t) { return e === t && (0 !== e || 1 / e === 1 / t) || e !== e && t !== t }; function li(e, t) { if (si(e, t)) return !0; if ("object" !== typeof e || null === e || "object" !== typeof t || null === t) return !1; var n = Object.keys(e), i = Object.keys(t); if (n.length !== i.length) return !1; for (i = 0; i < n.length; i++) { var r = n[i]; if (!u.call(t, r) || !si(e[r], t[r])) return !1 } return !0 } function gi(e) { for (; e && e.firstChild;)e = e.firstChild; return e } function ci(e, t) { var n, i = gi(e); for (e = 0; i;) { if (3 === i.nodeType) { if (n = e + i.textContent.length, e <= t && n >= t) return { node: i, offset: t - e }; e = n } e: { for (; i;) { if (i.nextSibling) { i = i.nextSibling; break e } i = i.parentNode } i = void 0 } i = gi(i) } } function ui(e, t) { return !(!e || !t) && (e === t || (!e || 3 !== e.nodeType) && (t && 3 === t.nodeType ? ui(e, t.parentNode) : "contains" in e ? e.contains(t) : !!e.compareDocumentPosition && !!(16 & e.compareDocumentPosition(t)))) } function Ci() { for (var e = window, t = J(); t instanceof e.HTMLIFrameElement;) { try { var n = "string" === typeof t.contentWindow.location.href } catch (i) { n = !1 } if (!n) break; t = J((e = t.contentWindow).document) } return t } function di(e) { var t = e && e.nodeName && e.nodeName.toLowerCase(); return t && ("input" === t && ("text" === e.type || "search" === e.type || "tel" === e.type || "url" === e.type || "password" === e.type) || "textarea" === t || "true" === e.contentEditable) } function Ii(e) { var t = Ci(), n = e.focusedElem, i = e.selectionRange; if (t !== n && n && n.ownerDocument && ui(n.ownerDocument.documentElement, n)) { if (null !== i && di(n)) if (t = i.start, void 0 === (e = i.end) && (e = t), "selectionStart" in n) n.selectionStart = t, n.selectionEnd = Math.min(e, n.value.length); else if ((e = (t = n.ownerDocument || document) && t.defaultView || window).getSelection) { e = e.getSelection(); var r = n.textContent.length, a = Math.min(i.start, r); i = void 0 === i.end ? a : Math.min(i.end, r), !e.extend && a > i && (r = i, i = a, a = r), r = ci(n, a); var o = ci(n, i); r && o && (1 !== e.rangeCount || e.anchorNode !== r.node || e.anchorOffset !== r.offset || e.focusNode !== o.node || e.focusOffset !== o.offset) && ((t = t.createRange()).setStart(r.node, r.offset), e.removeAllRanges(), a > i ? (e.addRange(t), e.extend(o.node, o.offset)) : (t.setEnd(o.node, o.offset), e.addRange(t))) } for (t = [], e = n; e = e.parentNode;)1 === e.nodeType && t.push({ element: e, left: e.scrollLeft, top: e.scrollTop }); for ("function" === typeof n.focus && n.focus(), n = 0; n < t.length; n++)(e = t[n]).element.scrollLeft = e.left, e.element.scrollTop = e.top } } var hi = c && "documentMode" in document && 11 >= document.documentMode, Ai = null, pi = null, fi = null, mi = !1; function vi(e, t, n) { var i = n.window === n ? n.document : 9 === n.nodeType ? n : n.ownerDocument; mi || null == Ai || Ai !== J(i) || ("selectionStart" in (i = Ai) && di(i) ? i = { start: i.selectionStart, end: i.selectionEnd } : i = { anchorNode: (i = (i.ownerDocument && i.ownerDocument.defaultView || window).getSelection()).anchorNode, anchorOffset: i.anchorOffset, focusNode: i.focusNode, focusOffset: i.focusOffset }, fi && li(fi, i) || (fi = i, 0 < (i = Di(pi, "onSelect")).length && (t = new cn("onSelect", "select", null, t, n), e.push({ event: t, listeners: i }), t.target = Ai))) } function bi(e, t) { var n = {}; return n[e.toLowerCase()] = t.toLowerCase(), n["Webkit" + e] = "webkit" + t, n["Moz" + e] = "moz" + t, n } var yi = { animationend: bi("Animation", "AnimationEnd"), animationiteration: bi("Animation", "AnimationIteration"), animationstart: bi("Animation", "AnimationStart"), transitionend: bi("Transition", "TransitionEnd") }, Gi = {}, Bi = {}; function Zi(e) { if (Gi[e]) return Gi[e]; if (!yi[e]) return e; var t, n = yi[e]; for (t in n) if (n.hasOwnProperty(t) && t in Bi) return Gi[e] = n[t]; return e } c && (Bi = document.createElement("div").style, "AnimationEvent" in window || (delete yi.animationend.animation, delete yi.animationiteration.animation, delete yi.animationstart.animation), "TransitionEvent" in window || delete yi.transitionend.transition); var wi = Zi("animationend"), Si = Zi("animationiteration"), Ri = Zi("animationstart"), xi = Zi("transitionend"), Wi = new Map, Vi = "abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" "); function ki(e, t) { Wi.set(e, t), l(t, [e]) } for (var Hi = 0; Hi < Vi.length; Hi++) { var Mi = Vi[Hi]; ki(Mi.toLowerCase(), "on" + (Mi[0].toUpperCase() + Mi.slice(1))) } ki(wi, "onAnimationEnd"), ki(Si, "onAnimationIteration"), ki(Ri, "onAnimationStart"), ki("dblclick", "onDoubleClick"), ki("focusin", "onFocus"), ki("focusout", "onBlur"), ki(xi, "onTransitionEnd"), g("onMouseEnter", ["mouseout", "mouseover"]), g("onMouseLeave", ["mouseout", "mouseover"]), g("onPointerEnter", ["pointerout", "pointerover"]), g("onPointerLeave", ["pointerout", "pointerover"]), l("onChange", "change click focusin focusout input keydown keyup selectionchange".split(" ")), l("onSelect", "focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")), l("onBeforeInput", ["compositionend", "keypress", "textInput", "paste"]), l("onCompositionEnd", "compositionend focusout keydown keypress keyup mousedown".split(" ")), l("onCompositionStart", "compositionstart focusout keydown keypress keyup mousedown".split(" ")), l("onCompositionUpdate", "compositionupdate focusout keydown keypress keyup mousedown".split(" ")); var Fi = "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "), Ni = new Set("cancel close invalid load scroll toggle".split(" ").concat(Fi)); function Xi(e, t, n) { var i = e.type || "unknown-event"; e.currentTarget = n, function (e, t, n, i, r, o, s, l, g) { if (ze.apply(this, arguments), Ne) { if (!Ne) throw Error(a(198)); var c = Xe; Ne = !1, Xe = null, Ye || (Ye = !0, Ke = c) } }(i, t, void 0, e), e.currentTarget = null } function Yi(e, t) { t = 0 !== (4 & t); for (var n = 0; n < e.length; n++) { var i = e[n], r = i.event; i = i.listeners; e: { var a = void 0; if (t) for (var o = i.length - 1; 0 <= o; o--) { var s = i[o], l = s.instance, g = s.currentTarget; if (s = s.listener, l !== a && r.isPropagationStopped()) break e; Xi(r, s, g), a = l } else for (o = 0; o < i.length; o++) { if (l = (s = i[o]).instance, g = s.currentTarget, s = s.listener, l !== a && r.isPropagationStopped()) break e; Xi(r, s, g), a = l } } } if (Ye) throw e = Ke, Ye = !1, Ke = null, e } function Ki(e, t) { var n = t[hr]; void 0 === n && (n = t[hr] = new Set); var i = e + "__bubble"; n.has(i) || (Ti(t, e, 2, !1), n.add(i)) } function Li(e, t, n) { var i = 0; t && (i |= 4), Ti(n, e, i, t) } var zi = "_reactListening" + Math.random().toString(36).slice(2); function Ei(e) { if (!e[zi]) { e[zi] = !0, o.forEach((function (t) { "selectionchange" !== t && (Ni.has(t) || Li(t, !1, e), Li(t, !0, e)) })); var t = 9 === e.nodeType ? e : e.ownerDocument; null === t || t[zi] || (t[zi] = !0, Li("selectionchange", !1, t)) } } function Ti(e, t, n, i) { switch (jt(t)) { case 1: var r = Ut; break; case 4: r = Dt; break; default: r = Pt }n = r.bind(null, t, n, e), r = void 0, !He || "touchstart" !== t && "touchmove" !== t && "wheel" !== t || (r = !0), i ? void 0 !== r ? e.addEventListener(t, n, { capture: !0, passive: r }) : e.addEventListener(t, n, !0) : void 0 !== r ? e.addEventListener(t, n, { passive: r }) : e.addEventListener(t, n, !1) } function _i(e, t, n, i, r) { var a = i; if (0 === (1 & t) && 0 === (2 & t) && null !== i) e: for (; ;) { if (null === i) return; var o = i.tag; if (3 === o || 4 === o) { var s = i.stateNode.containerInfo; if (s === r || 8 === s.nodeType && s.parentNode === r) break; if (4 === o) for (o = i.return; null !== o;) { var l = o.tag; if ((3 === l || 4 === l) && ((l = o.stateNode.containerInfo) === r || 8 === l.nodeType && l.parentNode === r)) return; o = o.return } for (; null !== s;) { if (null === (o = fr(s))) return; if (5 === (l = o.tag) || 6 === l) { i = a = o; continue e } s = s.parentNode } } i = i.return } Ve((function () { var i = a, r = be(n), o = []; e: { var s = Wi.get(e); if (void 0 !== s) { var l = cn, g = e; switch (e) { case "keypress": if (0 === tn(n)) break e; case "keydown": case "keyup": l = Sn; break; case "focusin": g = "focus", l = An; break; case "focusout": g = "blur", l = An; break; case "beforeblur": case "afterblur": l = An; break; case "click": if (2 === n.button) break e; case "auxclick": case "dblclick": case "mousedown": case "mousemove": case "mouseup": case "mouseout": case "mouseover": case "contextmenu": l = In; break; case "drag": case "dragend": case "dragenter": case "dragexit": case "dragleave": case "dragover": case "dragstart": case "drop": l = hn; break; case "touchcancel": case "touchend": case "touchmove": case "touchstart": l = xn; break; case wi: case Si: case Ri: l = pn; break; case xi: l = Wn; break; case "scroll": l = Cn; break; case "wheel": l = kn; break; case "copy": case "cut": case "paste": l = mn; break; case "gotpointercapture": case "lostpointercapture": case "pointercancel": case "pointerdown": case "pointermove": case "pointerout": case "pointerover": case "pointerup": l = Rn }var c = 0 !== (4 & t), u = !c && "scroll" === e, C = c ? null !== s ? s + "Capture" : null : s; c = []; for (var d, I = i; null !== I;) { var h = (d = I).stateNode; if (5 === d.tag && null !== h && (d = h, null !== C && (null != (h = ke(I, C)) && c.push(Ui(I, h, d)))), u) break; I = I.return } 0 < c.length && (s = new l(s, g, null, n, r), o.push({ event: s, listeners: c })) } } if (0 === (7 & t)) { if (l = "mouseout" === e || "pointerout" === e, (!(s = "mouseover" === e || "pointerover" === e) || n === ve || !(g = n.relatedTarget || n.fromElement) || !fr(g) && !g[Ir]) && (l || s) && (s = r.window === r ? r : (s = r.ownerDocument) ? s.defaultView || s.parentWindow : window, l ? (l = i, null !== (g = (g = n.relatedTarget || n.toElement) ? fr(g) : null) && (g !== (u = Ee(g)) || 5 !== g.tag && 6 !== g.tag) && (g = null)) : (l = null, g = i), l !== g)) { if (c = In, h = "onMouseLeave", C = "onMouseEnter", I = "mouse", "pointerout" !== e && "pointerover" !== e || (c = Rn, h = "onPointerLeave", C = "onPointerEnter", I = "pointer"), u = null == l ? s : vr(l), d = null == g ? s : vr(g), (s = new c(h, I + "leave", l, n, r)).target = u, s.relatedTarget = d, h = null, fr(r) === i && ((c = new c(C, I + "enter", g, n, r)).target = d, c.relatedTarget = u, h = c), u = h, l && g) e: { for (C = g, I = 0, d = c = l; d; d = Pi(d))I++; for (d = 0, h = C; h; h = Pi(h))d++; for (; 0 < I - d;)c = Pi(c), I--; for (; 0 < d - I;)C = Pi(C), d--; for (; I--;) { if (c === C || null !== C && c === C.alternate) break e; c = Pi(c), C = Pi(C) } c = null } else c = null; null !== l && Ji(o, s, l, c, !1), null !== g && null !== u && Ji(o, u, g, c, !0) } if ("select" === (l = (s = i ? vr(i) : window).nodeName && s.nodeName.toLowerCase()) || "input" === l && "file" === s.type) var A = jn; else if (_n(s)) if (Qn) A = oi; else { A = ri; var p = ii } else (l = s.nodeName) && "input" === l.toLowerCase() && ("checkbox" === s.type || "radio" === s.type) && (A = ai); switch (A && (A = A(e, i)) ? Un(o, A, n, r) : (p && p(e, s, i), "focusout" === e && (p = s._wrapperState) && p.controlled && "number" === s.type && ee(s, "number", s.value)), p = i ? vr(i) : window, e) { case "focusin": (_n(p) || "true" === p.contentEditable) && (Ai = p, pi = i, fi = null); break; case "focusout": fi = pi = Ai = null; break; case "mousedown": mi = !0; break; case "contextmenu": case "mouseup": case "dragend": mi = !1, vi(o, n, r); break; case "selectionchange": if (hi) break; case "keydown": case "keyup": vi(o, n, r) }var f; if (Mn) e: { switch (e) { case "compositionstart": var m = "onCompositionStart"; break e; case "compositionend": m = "onCompositionEnd"; break e; case "compositionupdate": m = "onCompositionUpdate"; break e }m = void 0 } else En ? Ln(e, n) && (m = "onCompositionEnd") : "keydown" === e && 229 === n.keyCode && (m = "onCompositionStart"); m && (Xn && "ko" !== n.locale && (En || "onCompositionStart" !== m ? "onCompositionEnd" === m && En && (f = en()) : (qt = "value" in (Qt = r) ? Qt.value : Qt.textContent, En = !0)), 0 < (p = Di(i, m)).length && (m = new vn(m, e, null, n, r), o.push({ event: m, listeners: p }), f ? m.data = f : null !== (f = zn(n)) && (m.data = f))), (f = Nn ? function (e, t) { switch (e) { case "compositionend": return zn(t); case "keypress": return 32 !== t.which ? null : (Kn = !0, Yn); case "textInput": return (e = t.data) === Yn && Kn ? null : e; default: return null } }(e, n) : function (e, t) { if (En) return "compositionend" === e || !Mn && Ln(e, t) ? (e = en(), $t = qt = Qt = null, En = !1, e) : null; switch (e) { case "paste": default: return null; case "keypress": if (!(t.ctrlKey || t.altKey || t.metaKey) || t.ctrlKey && t.altKey) { if (t.char && 1 < t.char.length) return t.char; if (t.which) return String.fromCharCode(t.which) } return null; case "compositionend": return Xn && "ko" !== t.locale ? null : t.data } }(e, n)) && (0 < (i = Di(i, "onBeforeInput")).length && (r = new vn("onBeforeInput", "beforeinput", null, n, r), o.push({ event: r, listeners: i }), r.data = f)) } Yi(o, t) })) } function Ui(e, t, n) { return { instance: e, listener: t, currentTarget: n } } function Di(e, t) { for (var n = t + "Capture", i = []; null !== e;) { var r = e, a = r.stateNode; 5 === r.tag && null !== a && (r = a, null != (a = ke(e, n)) && i.unshift(Ui(e, a, r)), null != (a = ke(e, t)) && i.push(Ui(e, a, r))), e = e.return } return i } function Pi(e) { if (null === e) return null; do { e = e.return } while (e && 5 !== e.tag); return e || null } function Ji(e, t, n, i, r) { for (var a = t._reactName, o = []; null !== n && n !== i;) { var s = n, l = s.alternate, g = s.stateNode; if (null !== l && l === i) break; 5 === s.tag && null !== g && (s = g, r ? null != (l = ke(n, a)) && o.unshift(Ui(n, l, s)) : r || null != (l = ke(n, a)) && o.push(Ui(n, l, s))), n = n.return } 0 !== o.length && e.push({ event: t, listeners: o }) } var Oi = /\r\n?/g, ji = /\u0000|\uFFFD/g; function Qi(e) { return ("string" === typeof e ? e : "" + e).replace(Oi, "\n").replace(ji, "") } function qi(e, t, n) { if (t = Qi(t), Qi(e) !== t && n) throw Error(a(425)) } function $i() { } var er = null, tr = null; function nr(e, t) { return "textarea" === e || "noscript" === e || "string" === typeof t.children || "number" === typeof t.children || "object" === typeof t.dangerouslySetInnerHTML && null !== t.dangerouslySetInnerHTML && null != t.dangerouslySetInnerHTML.__html } var ir = "function" === typeof setTimeout ? setTimeout : void 0, rr = "function" === typeof clearTimeout ? clearTimeout : void 0, ar = "function" === typeof Promise ? Promise : void 0, or = "function" === typeof queueMicrotask ? queueMicrotask : "undefined" !== typeof ar ? function (e) { return ar.resolve(null).then(e).catch(sr) } : ir; function sr(e) { setTimeout((function () { throw e })) } function lr(e, t) { var n = t, i = 0; do { var r = n.nextSibling; if (e.removeChild(n), r && 8 === r.nodeType) if ("/$" === (n = r.data)) { if (0 === i) return e.removeChild(r), void Et(t); i-- } else "$" !== n && "$?" !== n && "$!" !== n || i++; n = r } while (n); Et(t) } function gr(e) { for (; null != e; e = e.nextSibling) { var t = e.nodeType; if (1 === t || 3 === t) break; if (8 === t) { if ("$" === (t = e.data) || "$!" === t || "$?" === t) break; if ("/$" === t) return null } } return e } function cr(e) { e = e.previousSibling; for (var t = 0; e;) { if (8 === e.nodeType) { var n = e.data; if ("$" === n || "$!" === n || "$?" === n) { if (0 === t) return e; t-- } else "/$" === n && t++ } e = e.previousSibling } return null } var ur = Math.random().toString(36).slice(2), Cr = "__reactFiber$" + ur, dr = "__reactProps$" + ur, Ir = "__reactContainer$" + ur, hr = "__reactEvents$" + ur, Ar = "__reactListeners$" + ur, pr = "__reactHandles$" + ur; function fr(e) { var t = e[Cr]; if (t) return t; for (var n = e.parentNode; n;) { if (t = n[Ir] || n[Cr]) { if (n = t.alternate, null !== t.child || null !== n && null !== n.child) for (e = cr(e); null !== e;) { if (n = e[Cr]) return n; e = cr(e) } return t } n = (e = n).parentNode } return null } function mr(e) { return !(e = e[Cr] || e[Ir]) || 5 !== e.tag && 6 !== e.tag && 13 !== e.tag && 3 !== e.tag ? null : e } function vr(e) { if (5 === e.tag || 6 === e.tag) return e.stateNode; throw Error(a(33)) } function br(e) { return e[dr] || null } var yr = [], Gr = -1; function Br(e) { return { current: e } } function Zr(e) { 0 > Gr || (e.current = yr[Gr], yr[Gr] = null, Gr--) } function wr(e, t) { Gr++, yr[Gr] = e.current, e.current = t } var Sr = {}, Rr = Br(Sr), xr = Br(!1), Wr = Sr; function Vr(e, t) { var n = e.type.contextTypes; if (!n) return Sr; var i = e.stateNode; if (i && i.__reactInternalMemoizedUnmaskedChildContext === t) return i.__reactInternalMemoizedMaskedChildContext; var r, a = {}; for (r in n) a[r] = t[r]; return i && ((e = e.stateNode).__reactInternalMemoizedUnmaskedChildContext = t, e.__reactInternalMemoizedMaskedChildContext = a), a } function kr(e) { return null !== (e = e.childContextTypes) && void 0 !== e } function Hr() { Zr(xr), Zr(Rr) } function Mr(e, t, n) { if (Rr.current !== Sr) throw Error(a(168)); wr(Rr, t), wr(xr, n) } function Fr(e, t, n) { var i = e.stateNode; if (t = t.childContextTypes, "function" !== typeof i.getChildContext) return n; for (var r in i = i.getChildContext()) if (!(r in t)) throw Error(a(108, T(e) || "Unknown", r)); return X({}, n, i) } function Nr(e) { return e = (e = e.stateNode) && e.__reactInternalMemoizedMergedChildContext || Sr, Wr = Rr.current, wr(Rr, e), wr(xr, xr.current), !0 } function Xr(e, t, n) { var i = e.stateNode; if (!i) throw Error(a(169)); n ? (e = Fr(e, t, Wr), i.__reactInternalMemoizedMergedChildContext = e, Zr(xr), Zr(Rr), wr(Rr, e)) : Zr(xr), wr(xr, n) } var Yr = null, Kr = !1, Lr = !1; function zr(e) { null === Yr ? Yr = [e] : Yr.push(e) } function Er() { if (!Lr && null !== Yr) { Lr = !0; var e = 0, t = mt; try { var n = Yr; for (mt = 1; e < n.length; e++) { var i = n[e]; do { i = i(!0) } while (null !== i) } Yr = null, Kr = !1 } catch (r) { throw null !== Yr && (Yr = Yr.slice(e + 1)), Pe($e, Er), r } finally { mt = t, Lr = !1 } } return null } var Tr = [], _r = 0, Ur = null, Dr = 0, Pr = [], Jr = 0, Or = null, jr = 1, Qr = ""; function qr(e, t) { Tr[_r++] = Dr, Tr[_r++] = Ur, Ur = e, Dr = t } function $r(e, t, n) { Pr[Jr++] = jr, Pr[Jr++] = Qr, Pr[Jr++] = Or, Or = e; var i = jr; e = Qr; var r = 32 - ot(i) - 1; i &= ~(1 << r), n += 1; var a = 32 - ot(t) + r; if (30 < a) { var o = r - r % 5; a = (i & (1 << o) - 1).toString(32), i >>= o, r -= o, jr = 1 << 32 - ot(t) + r | n << r | i, Qr = a + e } else jr = 1 << a | n << r | i, Qr = e } function ea(e) { null !== e.return && (qr(e, 1), $r(e, 1, 0)) } function ta(e) { for (; e === Ur;)Ur = Tr[--_r], Tr[_r] = null, Dr = Tr[--_r], Tr[_r] = null; for (; e === Or;)Or = Pr[--Jr], Pr[Jr] = null, Qr = Pr[--Jr], Pr[Jr] = null, jr = Pr[--Jr], Pr[Jr] = null } var na = null, ia = null, ra = !1, aa = null; function oa(e, t) { var n = kg(5, null, null, 0); n.elementType = "DELETED", n.stateNode = t, n.return = e, null === (t = e.deletions) ? (e.deletions = [n], e.flags |= 16) : t.push(n) } function sa(e, t) { switch (e.tag) { case 5: var n = e.type; return null !== (t = 1 !== t.nodeType || n.toLowerCase() !== t.nodeName.toLowerCase() ? null : t) && (e.stateNode = t, na = e, ia = gr(t.firstChild), !0); case 6: return null !== (t = "" === e.pendingProps || 3 !== t.nodeType ? null : t) && (e.stateNode = t, na = e, ia = null, !0); case 13: return null !== (t = 8 !== t.nodeType ? null : t) && (n = null !== Or ? { id: jr, overflow: Qr } : null, e.memoizedState = { dehydrated: t, treeContext: n, retryLane: 1073741824 }, (n = kg(18, null, null, 0)).stateNode = t, n.return = e, e.child = n, na = e, ia = null, !0); default: return !1 } } function la(e) { return 0 !== (1 & e.mode) && 0 === (128 & e.flags) } function ga(e) { if (ra) { var t = ia; if (t) { var n = t; if (!sa(e, t)) { if (la(e)) throw Error(a(418)); t = gr(n.nextSibling); var i = na; t && sa(e, t) ? oa(i, n) : (e.flags = -4097 & e.flags | 2, ra = !1, na = e) } } else { if (la(e)) throw Error(a(418)); e.flags = -4097 & e.flags | 2, ra = !1, na = e } } } function ca(e) { for (e = e.return; null !== e && 5 !== e.tag && 3 !== e.tag && 13 !== e.tag;)e = e.return; na = e } function ua(e) { if (e !== na) return !1; if (!ra) return ca(e), ra = !0, !1; var t; if ((t = 3 !== e.tag) && !(t = 5 !== e.tag) && (t = "head" !== (t = e.type) && "body" !== t && !nr(e.type, e.memoizedProps)), t && (t = ia)) { if (la(e)) throw Ca(), Error(a(418)); for (; t;)oa(e, t), t = gr(t.nextSibling) } if (ca(e), 13 === e.tag) { if (!(e = null !== (e = e.memoizedState) ? e.dehydrated : null)) throw Error(a(317)); e: { for (e = e.nextSibling, t = 0; e;) { if (8 === e.nodeType) { var n = e.data; if ("/$" === n) { if (0 === t) { ia = gr(e.nextSibling); break e } t-- } else "$" !== n && "$!" !== n && "$?" !== n || t++ } e = e.nextSibling } ia = null } } else ia = na ? gr(e.stateNode.nextSibling) : null; return !0 } function Ca() { for (var e = ia; e;)e = gr(e.nextSibling) } function da() { ia = na = null, ra = !1 } function Ia(e) { null === aa ? aa = [e] : aa.push(e) } var ha = v.ReactCurrentBatchConfig; function Aa(e, t) { if (e && e.defaultProps) { for (var n in t = X({}, t), e = e.defaultProps) void 0 === t[n] && (t[n] = e[n]); return t } return t } var pa = Br(null), fa = null, ma = null, va = null; function ba() { va = ma = fa = null } function ya(e) { var t = pa.current; Zr(pa), e._currentValue = t } function Ga(e, t, n) { for (; null !== e;) { var i = e.alternate; if ((e.childLanes & t) !== t ? (e.childLanes |= t, null !== i && (i.childLanes |= t)) : null !== i && (i.childLanes & t) !== t && (i.childLanes |= t), e === n) break; e = e.return } } function Ba(e, t) { fa = e, va = ma = null, null !== (e = e.dependencies) && null !== e.firstContext && (0 !== (e.lanes & t) && (vs = !0), e.firstContext = null) } function Za(e) { var t = e._currentValue; if (va !== e) if (e = { context: e, memoizedValue: t, next: null }, null === ma) { if (null === fa) throw Error(a(308)); ma = e, fa.dependencies = { lanes: 0, firstContext: e } } else ma = ma.next = e; return t } var wa = null; function Sa(e) { null === wa ? wa = [e] : wa.push(e) } function Ra(e, t, n, i) { var r = t.interleaved; return null === r ? (n.next = n, Sa(t)) : (n.next = r.next, r.next = n), t.interleaved = n, xa(e, i) } function xa(e, t) { e.lanes |= t; var n = e.alternate; for (null !== n && (n.lanes |= t), n = e, e = e.return; null !== e;)e.childLanes |= t, null !== (n = e.alternate) && (n.childLanes |= t), n = e, e = e.return; return 3 === n.tag ? n.stateNode : null } var Wa = !1; function Va(e) { e.updateQueue = { baseState: e.memoizedState, firstBaseUpdate: null, lastBaseUpdate: null, shared: { pending: null, interleaved: null, lanes: 0 }, effects: null } } function ka(e, t) { e = e.updateQueue, t.updateQueue === e && (t.updateQueue = { baseState: e.baseState, firstBaseUpdate: e.firstBaseUpdate, lastBaseUpdate: e.lastBaseUpdate, shared: e.shared, effects: e.effects }) } function Ha(e, t) { return { eventTime: e, lane: t, tag: 0, payload: null, callback: null, next: null } } function Ma(e, t, n) { var i = e.updateQueue; if (null === i) return null; if (i = i.shared, 0 !== (2 & xl)) { var r = i.pending; return null === r ? t.next = t : (t.next = r.next, r.next = t), i.pending = t, xa(e, n) } return null === (r = i.interleaved) ? (t.next = t, Sa(i)) : (t.next = r.next, r.next = t), i.interleaved = t, xa(e, n) } function Fa(e, t, n) { if (null !== (t = t.updateQueue) && (t = t.shared, 0 !== (4194240 & n))) { var i = t.lanes; n |= i &= e.pendingLanes, t.lanes = n, ft(e, n) } } function Na(e, t) { var n = e.updateQueue, i = e.alternate; if (null !== i && n === (i = i.updateQueue)) { var r = null, a = null; if (null !== (n = n.firstBaseUpdate)) { do { var o = { eventTime: n.eventTime, lane: n.lane, tag: n.tag, payload: n.payload, callback: n.callback, next: null }; null === a ? r = a = o : a = a.next = o, n = n.next } while (null !== n); null === a ? r = a = t : a = a.next = t } else r = a = t; return n = { baseState: i.baseState, firstBaseUpdate: r, lastBaseUpdate: a, shared: i.shared, effects: i.effects }, void (e.updateQueue = n) } null === (e = n.lastBaseUpdate) ? n.firstBaseUpdate = t : e.next = t, n.lastBaseUpdate = t } function Xa(e, t, n, i) { var r = e.updateQueue; Wa = !1; var a = r.firstBaseUpdate, o = r.lastBaseUpdate, s = r.shared.pending; if (null !== s) { r.shared.pending = null; var l = s, g = l.next; l.next = null, null === o ? a = g : o.next = g, o = l; var c = e.alternate; null !== c && ((s = (c = c.updateQueue).lastBaseUpdate) !== o && (null === s ? c.firstBaseUpdate = g : s.next = g, c.lastBaseUpdate = l)) } if (null !== a) { var u = r.baseState; for (o = 0, c = g = l = null, s = a; ;) { var C = s.lane, d = s.eventTime; if ((i & C) === C) { null !== c && (c = c.next = { eventTime: d, lane: 0, tag: s.tag, payload: s.payload, callback: s.callback, next: null }); e: { var I = e, h = s; switch (C = t, d = n, h.tag) { case 1: if ("function" === typeof (I = h.payload)) { u = I.call(d, u, C); break e } u = I; break e; case 3: I.flags = -65537 & I.flags | 128; case 0: if (null === (C = "function" === typeof (I = h.payload) ? I.call(d, u, C) : I) || void 0 === C) break e; u = X({}, u, C); break e; case 2: Wa = !0 } } null !== s.callback && 0 !== s.lane && (e.flags |= 64, null === (C = r.effects) ? r.effects = [s] : C.push(s)) } else d = { eventTime: d, lane: C, tag: s.tag, payload: s.payload, callback: s.callback, next: null }, null === c ? (g = c = d, l = u) : c = c.next = d, o |= C; if (null === (s = s.next)) { if (null === (s = r.shared.pending)) break; s = (C = s).next, C.next = null, r.lastBaseUpdate = C, r.shared.pending = null } } if (null === c && (l = u), r.baseState = l, r.firstBaseUpdate = g, r.lastBaseUpdate = c, null !== (t = r.shared.interleaved)) { r = t; do { o |= r.lane, r = r.next } while (r !== t) } else null === a && (r.shared.lanes = 0); Xl |= o, e.lanes = o, e.memoizedState = u } } function Ya(e, t, n) { if (e = t.effects, t.effects = null, null !== e) for (t = 0; t < e.length; t++) { var i = e[t], r = i.callback; if (null !== r) { if (i.callback = null, i = n, "function" !== typeof r) throw Error(a(191, r)); r.call(i) } } } var Ka = (new i.Component).refs; function La(e, t, n, i) { n = null === (n = n(i, t = e.memoizedState)) || void 0 === n ? t : X({}, t, n), e.memoizedState = n, 0 === e.lanes && (e.updateQueue.baseState = n) } var za = { isMounted: function (e) { return !!(e = e._reactInternals) && Ee(e) === e }, enqueueSetState: function (e, t, n) { e = e._reactInternals; var i = tg(), r = ng(e), a = Ha(i, r); a.payload = t, void 0 !== n && null !== n && (a.callback = n), null !== (t = Ma(e, a, r)) && (ig(t, e, r, i), Fa(t, e, r)) }, enqueueReplaceState: function (e, t, n) { e = e._reactInternals; var i = tg(), r = ng(e), a = Ha(i, r); a.tag = 1, a.payload = t, void 0 !== n && null !== n && (a.callback = n), null !== (t = Ma(e, a, r)) && (ig(t, e, r, i), Fa(t, e, r)) }, enqueueForceUpdate: function (e, t) { e = e._reactInternals; var n = tg(), i = ng(e), r = Ha(n, i); r.tag = 2, void 0 !== t && null !== t && (r.callback = t), null !== (t = Ma(e, r, i)) && (ig(t, e, i, n), Fa(t, e, i)) } }; function Ea(e, t, n, i, r, a, o) { return "function" === typeof (e = e.stateNode).shouldComponentUpdate ? e.shouldComponentUpdate(i, a, o) : !t.prototype || !t.prototype.isPureReactComponent || (!li(n, i) || !li(r, a)) } function Ta(e, t, n) { var i = !1, r = Sr, a = t.contextType; return "object" === typeof a && null !== a ? a = Za(a) : (r = kr(t) ? Wr : Rr.current, a = (i = null !== (i = t.contextTypes) && void 0 !== i) ? Vr(e, r) : Sr), t = new t(n, a), e.memoizedState = null !== t.state && void 0 !== t.state ? t.state : null, t.updater = za, e.stateNode = t, t._reactInternals = e, i && ((e = e.stateNode).__reactInternalMemoizedUnmaskedChildContext = r, e.__reactInternalMemoizedMaskedChildContext = a), t } function _a(e, t, n, i) { e = t.state, "function" === typeof t.componentWillReceiveProps && t.componentWillReceiveProps(n, i), "function" === typeof t.UNSAFE_componentWillReceiveProps && t.UNSAFE_componentWillReceiveProps(n, i), t.state !== e && za.enqueueReplaceState(t, t.state, null) } function Ua(e, t, n, i) { var r = e.stateNode; r.props = n, r.state = e.memoizedState, r.refs = Ka, Va(e); var a = t.contextType; "object" === typeof a && null !== a ? r.context = Za(a) : (a = kr(t) ? Wr : Rr.current, r.context = Vr(e, a)), r.state = e.memoizedState, "function" === typeof (a = t.getDerivedStateFromProps) && (La(e, t, a, n), r.state = e.memoizedState), "function" === typeof t.getDerivedStateFromProps || "function" === typeof r.getSnapshotBeforeUpdate || "function" !== typeof r.UNSAFE_componentWillMount && "function" !== typeof r.componentWillMount || (t = r.state, "function" === typeof r.componentWillMount && r.componentWillMount(), "function" === typeof r.UNSAFE_componentWillMount && r.UNSAFE_componentWillMount(), t !== r.state && za.enqueueReplaceState(r, r.state, null), Xa(e, n, r, i), r.state = e.memoizedState), "function" === typeof r.componentDidMount && (e.flags |= 4194308) } function Da(e, t, n) { if (null !== (e = n.ref) && "function" !== typeof e && "object" !== typeof e) { if (n._owner) { if (n = n._owner) { if (1 !== n.tag) throw Error(a(309)); var i = n.stateNode } if (!i) throw Error(a(147, e)); var r = i, o = "" + e; return null !== t && null !== t.ref && "function" === typeof t.ref && t.ref._stringRef === o ? t.ref : (t = function (e) { var t = r.refs; t === Ka && (t = r.refs = {}), null === e ? delete t[o] : t[o] = e }, t._stringRef = o, t) } if ("string" !== typeof e) throw Error(a(284)); if (!n._owner) throw Error(a(290, e)) } return e } function Pa(e, t) { throw e = Object.prototype.toString.call(t), Error(a(31, "[object Object]" === e ? "object with keys {" + Object.keys(t).join(", ") + "}" : e)) } function Ja(e) { return (0, e._init)(e._payload) } function Oa(e) { function t(t, n) { if (e) { var i = t.deletions; null === i ? (t.deletions = [n], t.flags |= 16) : i.push(n) } } function n(n, i) { if (!e) return null; for (; null !== i;)t(n, i), i = i.sibling; return null } function i(e, t) { for (e = new Map; null !== t;)null !== t.key ? e.set(t.key, t) : e.set(t.index, t), t = t.sibling; return e } function r(e, t) { return (e = Mg(e, t)).index = 0, e.sibling = null, e } function o(t, n, i) { return t.index = i, e ? null !== (i = t.alternate) ? (i = i.index) < n ? (t.flags |= 2, n) : i : (t.flags |= 2, n) : (t.flags |= 1048576, n) } function s(t) { return e && null === t.alternate && (t.flags |= 2), t } function l(e, t, n, i) { return null === t || 6 !== t.tag ? ((t = Yg(n, e.mode, i)).return = e, t) : ((t = r(t, n)).return = e, t) } function g(e, t, n, i) { var a = n.type; return a === G ? u(e, t, n.props.children, i, n.key) : null !== t && (t.elementType === a || "object" === typeof a && null !== a && a.$$typeof === k && Ja(a) === t.type) ? ((i = r(t, n.props)).ref = Da(e, t, n), i.return = e, i) : ((i = Fg(n.type, n.key, n.props, null, e.mode, i)).ref = Da(e, t, n), i.return = e, i) } function c(e, t, n, i) { return null === t || 4 !== t.tag || t.stateNode.containerInfo !== n.containerInfo || t.stateNode.implementation !== n.implementation ? ((t = Kg(n, e.mode, i)).return = e, t) : ((t = r(t, n.children || [])).return = e, t) } function u(e, t, n, i, a) { return null === t || 7 !== t.tag ? ((t = Ng(n, e.mode, i, a)).return = e, t) : ((t = r(t, n)).return = e, t) } function C(e, t, n) { if ("string" === typeof t && "" !== t || "number" === typeof t) return (t = Yg("" + t, e.mode, n)).return = e, t; if ("object" === typeof t && null !== t) { switch (t.$$typeof) { case b: return (n = Fg(t.type, t.key, t.props, null, e.mode, n)).ref = Da(e, null, t), n.return = e, n; case y: return (t = Kg(t, e.mode, n)).return = e, t; case k: return C(e, (0, t._init)(t._payload), n) }if (te(t) || F(t)) return (t = Ng(t, e.mode, n, null)).return = e, t; Pa(e, t) } return null } function d(e, t, n, i) { var r = null !== t ? t.key : null; if ("string" === typeof n && "" !== n || "number" === typeof n) return null !== r ? null : l(e, t, "" + n, i); if ("object" === typeof n && null !== n) { switch (n.$$typeof) { case b: return n.key === r ? g(e, t, n, i) : null; case y: return n.key === r ? c(e, t, n, i) : null; case k: return d(e, t, (r = n._init)(n._payload), i) }if (te(n) || F(n)) return null !== r ? null : u(e, t, n, i, null); Pa(e, n) } return null } function I(e, t, n, i, r) { if ("string" === typeof i && "" !== i || "number" === typeof i) return l(t, e = e.get(n) || null, "" + i, r); if ("object" === typeof i && null !== i) { switch (i.$$typeof) { case b: return g(t, e = e.get(null === i.key ? n : i.key) || null, i, r); case y: return c(t, e = e.get(null === i.key ? n : i.key) || null, i, r); case k: return I(e, t, n, (0, i._init)(i._payload), r) }if (te(i) || F(i)) return u(t, e = e.get(n) || null, i, r, null); Pa(t, i) } return null } function h(r, a, s, l) { for (var g = null, c = null, u = a, h = a = 0, A = null; null !== u && h < s.length; h++) { u.index > h ? (A = u, u = null) : A = u.sibling; var p = d(r, u, s[h], l); if (null === p) { null === u && (u = A); break } e && u && null === p.alternate && t(r, u), a = o(p, a, h), null === c ? g = p : c.sibling = p, c = p, u = A } if (h === s.length) return n(r, u), ra && qr(r, h), g; if (null === u) { for (; h < s.length; h++)null !== (u = C(r, s[h], l)) && (a = o(u, a, h), null === c ? g = u : c.sibling = u, c = u); return ra && qr(r, h), g } for (u = i(r, u); h < s.length; h++)null !== (A = I(u, r, h, s[h], l)) && (e && null !== A.alternate && u.delete(null === A.key ? h : A.key), a = o(A, a, h), null === c ? g = A : c.sibling = A, c = A); return e && u.forEach((function (e) { return t(r, e) })), ra && qr(r, h), g } function A(r, s, l, g) { var c = F(l); if ("function" !== typeof c) throw Error(a(150)); if (null == (l = c.call(l))) throw Error(a(151)); for (var u = c = null, h = s, A = s = 0, p = null, f = l.next(); null !== h && !f.done; A++, f = l.next()) { h.index > A ? (p = h, h = null) : p = h.sibling; var m = d(r, h, f.value, g); if (null === m) { null === h && (h = p); break } e && h && null === m.alternate && t(r, h), s = o(m, s, A), null === u ? c = m : u.sibling = m, u = m, h = p } if (f.done) return n(r, h), ra && qr(r, A), c; if (null === h) { for (; !f.done; A++, f = l.next())null !== (f = C(r, f.value, g)) && (s = o(f, s, A), null === u ? c = f : u.sibling = f, u = f); return ra && qr(r, A), c } for (h = i(r, h); !f.done; A++, f = l.next())null !== (f = I(h, r, A, f.value, g)) && (e && null !== f.alternate && h.delete(null === f.key ? A : f.key), s = o(f, s, A), null === u ? c = f : u.sibling = f, u = f); return e && h.forEach((function (e) { return t(r, e) })), ra && qr(r, A), c } return function e(i, a, o, l) { if ("object" === typeof o && null !== o && o.type === G && null === o.key && (o = o.props.children), "object" === typeof o && null !== o) { switch (o.$$typeof) { case b: e: { for (var g = o.key, c = a; null !== c;) { if (c.key === g) { if ((g = o.type) === G) { if (7 === c.tag) { n(i, c.sibling), (a = r(c, o.props.children)).return = i, i = a; break e } } else if (c.elementType === g || "object" === typeof g && null !== g && g.$$typeof === k && Ja(g) === c.type) { n(i, c.sibling), (a = r(c, o.props)).ref = Da(i, c, o), a.return = i, i = a; break e } n(i, c); break } t(i, c), c = c.sibling } o.type === G ? ((a = Ng(o.props.children, i.mode, l, o.key)).return = i, i = a) : ((l = Fg(o.type, o.key, o.props, null, i.mode, l)).ref = Da(i, a, o), l.return = i, i = l) } return s(i); case y: e: { for (c = o.key; null !== a;) { if (a.key === c) { if (4 === a.tag && a.stateNode.containerInfo === o.containerInfo && a.stateNode.implementation === o.implementation) { n(i, a.sibling), (a = r(a, o.children || [])).return = i, i = a; break e } n(i, a); break } t(i, a), a = a.sibling } (a = Kg(o, i.mode, l)).return = i, i = a } return s(i); case k: return e(i, a, (c = o._init)(o._payload), l) }if (te(o)) return h(i, a, o, l); if (F(o)) return A(i, a, o, l); Pa(i, o) } return "string" === typeof o && "" !== o || "number" === typeof o ? (o = "" + o, null !== a && 6 === a.tag ? (n(i, a.sibling), (a = r(a, o)).return = i, i = a) : (n(i, a), (a = Yg(o, i.mode, l)).return = i, i = a), s(i)) : n(i, a) } } var ja = Oa(!0), Qa = Oa(!1), qa = {}, $a = Br(qa), eo = Br(qa), to = Br(qa); function no(e) { if (e === qa) throw Error(a(174)); return e } function io(e, t) { switch (wr(to, t), wr(eo, e), wr($a, qa), e = t.nodeType) { case 9: case 11: t = (t = t.documentElement) ? t.namespaceURI : le(null, ""); break; default: t = le(t = (e = 8 === e ? t.parentNode : t).namespaceURI || null, e = e.tagName) }Zr($a), wr($a, t) } function ro() { Zr($a), Zr(eo), Zr(to) } function ao(e) { no(to.current); var t = no($a.current), n = le(t, e.type); t !== n && (wr(eo, e), wr($a, n)) } function oo(e) { eo.current === e && (Zr($a), Zr(eo)) } var so = Br(0); function lo(e) { for (var t = e; null !== t;) { if (13 === t.tag) { var n = t.memoizedState; if (null !== n && (null === (n = n.dehydrated) || "$?" === n.data || "$!" === n.data)) return t } else if (19 === t.tag && void 0 !== t.memoizedProps.revealOrder) { if (0 !== (128 & t.flags)) return t } else if (null !== t.child) { t.child.return = t, t = t.child; continue } if (t === e) break; for (; null === t.sibling;) { if (null === t.return || t.return === e) return null; t = t.return } t.sibling.return = t.return, t = t.sibling } return null } var go = []; function co() { for (var e = 0; e < go.length; e++)go[e]._workInProgressVersionPrimary = null; go.length = 0 } var uo = v.ReactCurrentDispatcher, Co = v.ReactCurrentBatchConfig, Io = 0, ho = null, Ao = null, po = null, fo = !1, mo = !1, vo = 0, bo = 0; function yo() { throw Error(a(321)) } function Go(e, t) { if (null === t) return !1; for (var n = 0; n < t.length && n < e.length; n++)if (!si(e[n], t[n])) return !1; return !0 } function Bo(e, t, n, i, r, o) { if (Io = o, ho = t, t.memoizedState = null, t.updateQueue = null, t.lanes = 0, uo.current = null === e || null === e.memoizedState ? ss : ls, e = n(i, r), mo) { o = 0; do { if (mo = !1, vo = 0, 25 <= o) throw Error(a(301)); o += 1, po = Ao = null, t.updateQueue = null, uo.current = gs, e = n(i, r) } while (mo) } if (uo.current = os, t = null !== Ao && null !== Ao.next, Io = 0, po = Ao = ho = null, fo = !1, t) throw Error(a(300)); return e } function Zo() { var e = 0 !== vo; return vo = 0, e } function wo() { var e = { memoizedState: null, baseState: null, baseQueue: null, queue: null, next: null }; return null === po ? ho.memoizedState = po = e : po = po.next = e, po } function So() { if (null === Ao) { var e = ho.alternate; e = null !== e ? e.memoizedState : null } else e = Ao.next; var t = null === po ? ho.memoizedState : po.next; if (null !== t) po = t, Ao = e; else { if (null === e) throw Error(a(310)); e = { memoizedState: (Ao = e).memoizedState, baseState: Ao.baseState, baseQueue: Ao.baseQueue, queue: Ao.queue, next: null }, null === po ? ho.memoizedState = po = e : po = po.next = e } return po } function Ro(e, t) { return "function" === typeof t ? t(e) : t } function xo(e) { var t = So(), n = t.queue; if (null === n) throw Error(a(311)); n.lastRenderedReducer = e; var i = Ao, r = i.baseQueue, o = n.pending; if (null !== o) { if (null !== r) { var s = r.next; r.next = o.next, o.next = s } i.baseQueue = r = o, n.pending = null } if (null !== r) { o = r.next, i = i.baseState; var l = s = null, g = null, c = o; do { var u = c.lane; if ((Io & u) === u) null !== g && (g = g.next = { lane: 0, action: c.action, hasEagerState: c.hasEagerState, eagerState: c.eagerState, next: null }), i = c.hasEagerState ? c.eagerState : e(i, c.action); else { var C = { lane: u, action: c.action, hasEagerState: c.hasEagerState, eagerState: c.eagerState, next: null }; null === g ? (l = g = C, s = i) : g = g.next = C, ho.lanes |= u, Xl |= u } c = c.next } while (null !== c && c !== o); null === g ? s = i : g.next = l, si(i, t.memoizedState) || (vs = !0), t.memoizedState = i, t.baseState = s, t.baseQueue = g, n.lastRenderedState = i } if (null !== (e = n.interleaved)) { r = e; do { o = r.lane, ho.lanes |= o, Xl |= o, r = r.next } while (r !== e) } else null === r && (n.lanes = 0); return [t.memoizedState, n.dispatch] } function Wo(e) { var t = So(), n = t.queue; if (null === n) throw Error(a(311)); n.lastRenderedReducer = e; var i = n.dispatch, r = n.pending, o = t.memoizedState; if (null !== r) { n.pending = null; var s = r = r.next; do { o = e(o, s.action), s = s.next } while (s !== r); si(o, t.memoizedState) || (vs = !0), t.memoizedState = o, null === t.baseQueue && (t.baseState = o), n.lastRenderedState = o } return [o, i] } function Vo() { } function ko(e, t) { var n = ho, i = So(), r = t(), o = !si(i.memoizedState, r); if (o && (i.memoizedState = r, vs = !0), i = i.queue, _o(Fo.bind(null, n, i, e), [e]), i.getSnapshot !== t || o || null !== po && 1 & po.memoizedState.tag) { if (n.flags |= 2048, Ko(9, Mo.bind(null, n, i, r, t), void 0, null), null === Wl) throw Error(a(349)); 0 !== (30 & Io) || Ho(n, t, r) } return r } function Ho(e, t, n) { e.flags |= 16384, e = { getSnapshot: t, value: n }, null === (t = ho.updateQueue) ? (t = { lastEffect: null, stores: null }, ho.updateQueue = t, t.stores = [e]) : null === (n = t.stores) ? t.stores = [e] : n.push(e) } function Mo(e, t, n, i) { t.value = n, t.getSnapshot = i, No(t) && Xo(e) } function Fo(e, t, n) { return n((function () { No(t) && Xo(e) })) } function No(e) { var t = e.getSnapshot; e = e.value; try { var n = t(); return !si(e, n) } catch (i) { return !0 } } function Xo(e) { var t = xa(e, 1); null !== t && ig(t, e, 1, -1) } function Yo(e) { var t = wo(); return "function" === typeof e && (e = e()), t.memoizedState = t.baseState = e, e = { pending: null, interleaved: null, lanes: 0, dispatch: null, lastRenderedReducer: Ro, lastRenderedState: e }, t.queue = e, e = e.dispatch = ns.bind(null, ho, e), [t.memoizedState, e] } function Ko(e, t, n, i) { return e = { tag: e, create: t, destroy: n, deps: i, next: null }, null === (t = ho.updateQueue) ? (t = { lastEffect: null, stores: null }, ho.updateQueue = t, t.lastEffect = e.next = e) : null === (n = t.lastEffect) ? t.lastEffect = e.next = e : (i = n.next, n.next = e, e.next = i, t.lastEffect = e), e } function Lo() { return So().memoizedState } function zo(e, t, n, i) { var r = wo(); ho.flags |= e, r.memoizedState = Ko(1 | t, n, void 0, void 0 === i ? null : i) } function Eo(e, t, n, i) { var r = So(); i = void 0 === i ? null : i; var a = void 0; if (null !== Ao) { var o = Ao.memoizedState; if (a = o.destroy, null !== i && Go(i, o.deps)) return void (r.memoizedState = Ko(t, n, a, i)) } ho.flags |= e, r.memoizedState = Ko(1 | t, n, a, i) } function To(e, t) { return zo(8390656, 8, e, t) } function _o(e, t) { return Eo(2048, 8, e, t) } function Uo(e, t) { return Eo(4, 2, e, t) } function Do(e, t) { return Eo(4, 4, e, t) } function Po(e, t) { return "function" === typeof t ? (e = e(), t(e), function () { t(null) }) : null !== t && void 0 !== t ? (e = e(), t.current = e, function () { t.current = null }) : void 0 } function Jo(e, t, n) { return n = null !== n && void 0 !== n ? n.concat([e]) : null, Eo(4, 4, Po.bind(null, t, e), n) } function Oo() { } function jo(e, t) { var n = So(); t = void 0 === t ? null : t; var i = n.memoizedState; return null !== i && null !== t && Go(t, i[1]) ? i[0] : (n.memoizedState = [e, t], e) } function Qo(e, t) { var n = So(); t = void 0 === t ? null : t; var i = n.memoizedState; return null !== i && null !== t && Go(t, i[1]) ? i[0] : (e = e(), n.memoizedState = [e, t], e) } function qo(e, t, n) { return 0 === (21 & Io) ? (e.baseState && (e.baseState = !1, vs = !0), e.memoizedState = n) : (si(n, t) || (n = ht(), ho.lanes |= n, Xl |= n, e.baseState = !0), t) } function $o(e, t) { var n = mt; mt = 0 !== n && 4 > n ? n : 4, e(!0); var i = Co.transition; Co.transition = {}; try { e(!1), t() } finally { mt = n, Co.transition = i } } function es() { return So().memoizedState } function ts(e, t, n) { var i = ng(e); if (n = { lane: i, action: n, hasEagerState: !1, eagerState: null, next: null }, is(e)) rs(t, n); else if (null !== (n = Ra(e, t, n, i))) { ig(n, e, i, tg()), as(n, t, i) } } function ns(e, t, n) { var i = ng(e), r = { lane: i, action: n, hasEagerState: !1, eagerState: null, next: null }; if (is(e)) rs(t, r); else { var a = e.alternate; if (0 === e.lanes && (null === a || 0 === a.lanes) && null !== (a = t.lastRenderedReducer)) try { var o = t.lastRenderedState, s = a(o, n); if (r.hasEagerState = !0, r.eagerState = s, si(s, o)) { var l = t.interleaved; return null === l ? (r.next = r, Sa(t)) : (r.next = l.next, l.next = r), void (t.interleaved = r) } } catch (g) { } null !== (n = Ra(e, t, r, i)) && (ig(n, e, i, r = tg()), as(n, t, i)) } } function is(e) { var t = e.alternate; return e === ho || null !== t && t === ho } function rs(e, t) { mo = fo = !0; var n = e.pending; null === n ? t.next = t : (t.next = n.next, n.next = t), e.pending = t } function as(e, t, n) { if (0 !== (4194240 & n)) { var i = t.lanes; n |= i &= e.pendingLanes, t.lanes = n, ft(e, n) } } var os = { readContext: Za, useCallback: yo, useContext: yo, useEffect: yo, useImperativeHandle: yo, useInsertionEffect: yo, useLayoutEffect: yo, useMemo: yo, useReducer: yo, useRef: yo, useState: yo, useDebugValue: yo, useDeferredValue: yo, useTransition: yo, useMutableSource: yo, useSyncExternalStore: yo, useId: yo, unstable_isNewReconciler: !1 }, ss = { readContext: Za, useCallback: function (e, t) { return wo().memoizedState = [e, void 0 === t ? null : t], e }, useContext: Za, useEffect: To, useImperativeHandle: function (e, t, n) { return n = null !== n && void 0 !== n ? n.concat([e]) : null, zo(4194308, 4, Po.bind(null, t, e), n) }, useLayoutEffect: function (e, t) { return zo(4194308, 4, e, t) }, useInsertionEffect: function (e, t) { return zo(4, 2, e, t) }, useMemo: function (e, t) { var n = wo(); return t = void 0 === t ? null : t, e = e(), n.memoizedState = [e, t], e }, useReducer: function (e, t, n) { var i = wo(); return t = void 0 !== n ? n(t) : t, i.memoizedState = i.baseState = t, e = { pending: null, interleaved: null, lanes: 0, dispatch: null, lastRenderedReducer: e, lastRenderedState: t }, i.queue = e, e = e.dispatch = ts.bind(null, ho, e), [i.memoizedState, e] }, useRef: function (e) { return e = { current: e }, wo().memoizedState = e }, useState: Yo, useDebugValue: Oo, useDeferredValue: function (e) { return wo().memoizedState = e }, useTransition: function () { var e = Yo(!1), t = e[0]; return e = $o.bind(null, e[1]), wo().memoizedState = e, [t, e] }, useMutableSource: function () { }, useSyncExternalStore: function (e, t, n) { var i = ho, r = wo(); if (ra) { if (void 0 === n) throw Error(a(407)); n = n() } else { if (n = t(), null === Wl) throw Error(a(349)); 0 !== (30 & Io) || Ho(i, t, n) } r.memoizedState = n; var o = { value: n, getSnapshot: t }; return r.queue = o, To(Fo.bind(null, i, o, e), [e]), i.flags |= 2048, Ko(9, Mo.bind(null, i, o, n, t), void 0, null), n }, useId: function () { var e = wo(), t = Wl.identifierPrefix; if (ra) { var n = Qr; t = ":" + t + "R" + (n = (jr & ~(1 << 32 - ot(jr) - 1)).toString(32) + n), 0 < (n = vo++) && (t += "H" + n.toString(32)), t += ":" } else t = ":" + t + "r" + (n = bo++).toString(32) + ":"; return e.memoizedState = t }, unstable_isNewReconciler: !1 }, ls = { readContext: Za, useCallback: jo, useContext: Za, useEffect: _o, useImperativeHandle: Jo, useInsertionEffect: Uo, useLayoutEffect: Do, useMemo: Qo, useReducer: xo, useRef: Lo, useState: function () { return xo(Ro) }, useDebugValue: Oo, useDeferredValue: function (e) { return qo(So(), Ao.memoizedState, e) }, useTransition: function () { return [xo(Ro)[0], So().memoizedState] }, useMutableSource: Vo, useSyncExternalStore: ko, useId: es, unstable_isNewReconciler: !1 }, gs = { readContext: Za, useCallback: jo, useContext: Za, useEffect: _o, useImperativeHandle: Jo, useInsertionEffect: Uo, useLayoutEffect: Do, useMemo: Qo, useReducer: Wo, useRef: Lo, useState: function () { return Wo(Ro) }, useDebugValue: Oo, useDeferredValue: function (e) { var t = So(); return null === Ao ? t.memoizedState = e : qo(t, Ao.memoizedState, e) }, useTransition: function () { return [Wo(Ro)[0], So().memoizedState] }, useMutableSource: Vo, useSyncExternalStore: ko, useId: es, unstable_isNewReconciler: !1 }; function cs(e, t) { try { var n = "", i = t; do { n += z(i), i = i.return } while (i); var r = n } catch (a) { r = "\nError generating stack: " + a.message + "\n" + a.stack } return { value: e, source: t, stack: r, digest: null } } function us(e, t, n) { return { value: e, source: null, stack: null != n ? n : null, digest: null != t ? t : null } } function Cs(e, t) { try { console.error(t.value) } catch (n) { setTimeout((function () { throw n })) } } var ds = "function" === typeof WeakMap ? WeakMap : Map; function Is(e, t, n) { (n = Ha(-1, n)).tag = 3, n.payload = { element: null }; var i = t.value; return n.callback = function () { Ul || (Ul = !0, Dl = i), Cs(0, t) }, n } function hs(e, t, n) { (n = Ha(-1, n)).tag = 3; var i = e.type.getDerivedStateFromError; if ("function" === typeof i) { var r = t.value; n.payload = function () { return i(r) }, n.callback = function () { Cs(0, t) } } var a = e.stateNode; return null !== a && "function" === typeof a.componentDidCatch && (n.callback = function () { Cs(0, t), "function" !== typeof i && (null === Pl ? Pl = new Set([this]) : Pl.add(this)); var e = t.stack; this.componentDidCatch(t.value, { componentStack: null !== e ? e : "" }) }), n } function As(e, t, n) { var i = e.pingCache; if (null === i) { i = e.pingCache = new ds; var r = new Set; i.set(t, r) } else void 0 === (r = i.get(t)) && (r = new Set, i.set(t, r)); r.has(n) || (r.add(n), e = wg.bind(null, e, t, n), t.then(e, e)) } function ps(e) { do { var t; if ((t = 13 === e.tag) && (t = null === (t = e.memoizedState) || null !== t.dehydrated), t) return e; e = e.return } while (null !== e); return null } function fs(e, t, n, i, r) { return 0 === (1 & e.mode) ? (e === t ? e.flags |= 65536 : (e.flags |= 128, n.flags |= 131072, n.flags &= -52805, 1 === n.tag && (null === n.alternate ? n.tag = 17 : ((t = Ha(-1, 1)).tag = 2, Ma(n, t, 1))), n.lanes |= 1), e) : (e.flags |= 65536, e.lanes = r, e) } var ms = v.ReactCurrentOwner, vs = !1; function bs(e, t, n, i) { t.child = null === e ? Qa(t, null, n, i) : ja(t, e.child, n, i) } function ys(e, t, n, i, r) { n = n.render; var a = t.ref; return Ba(t, r), i = Bo(e, t, n, i, a, r), n = Zo(), null === e || vs ? (ra && n && ea(t), t.flags |= 1, bs(e, t, i, r), t.child) : (t.updateQueue = e.updateQueue, t.flags &= -2053, e.lanes &= ~r, Us(e, t, r)) } function Gs(e, t, n, i, r) { if (null === e) { var a = n.type; return "function" !== typeof a || Hg(a) || void 0 !== a.defaultProps || null !== n.compare || void 0 !== n.defaultProps ? ((e = Fg(n.type, null, i, t, t.mode, r)).ref = t.ref, e.return = t, t.child = e) : (t.tag = 15, t.type = a, Bs(e, t, a, i, r)) } if (a = e.child, 0 === (e.lanes & r)) { var o = a.memoizedProps; if ((n = null !== (n = n.compare) ? n : li)(o, i) && e.ref === t.ref) return Us(e, t, r) } return t.flags |= 1, (e = Mg(a, i)).ref = t.ref, e.return = t, t.child = e } function Bs(e, t, n, i, r) { if (null !== e) { var a = e.memoizedProps; if (li(a, i) && e.ref === t.ref) { if (vs = !1, t.pendingProps = i = a, 0 === (e.lanes & r)) return t.lanes = e.lanes, Us(e, t, r); 0 !== (131072 & e.flags) && (vs = !0) } } return Ss(e, t, n, i, r) } function Zs(e, t, n) { var i = t.pendingProps, r = i.children, a = null !== e ? e.memoizedState : null; if ("hidden" === i.mode) if (0 === (1 & t.mode)) t.memoizedState = { baseLanes: 0, cachePool: null, transitions: null }, wr(Ml, Hl), Hl |= n; else { if (0 === (1073741824 & n)) return e = null !== a ? a.baseLanes | n : n, t.lanes = t.childLanes = 1073741824, t.memoizedState = { baseLanes: e, cachePool: null, transitions: null }, t.updateQueue = null, wr(Ml, Hl), Hl |= e, null; t.memoizedState = { baseLanes: 0, cachePool: null, transitions: null }, i = null !== a ? a.baseLanes : n, wr(Ml, Hl), Hl |= i } else null !== a ? (i = a.baseLanes | n, t.memoizedState = null) : i = n, wr(Ml, Hl), Hl |= i; return bs(e, t, r, n), t.child } function ws(e, t) { var n = t.ref; (null === e && null !== n || null !== e && e.ref !== n) && (t.flags |= 512, t.flags |= 2097152) } function Ss(e, t, n, i, r) { var a = kr(n) ? Wr : Rr.current; return a = Vr(t, a), Ba(t, r), n = Bo(e, t, n, i, a, r), i = Zo(), null === e || vs ? (ra && i && ea(t), t.flags |= 1, bs(e, t, n, r), t.child) : (t.updateQueue = e.updateQueue, t.flags &= -2053, e.lanes &= ~r, Us(e, t, r)) } function Rs(e, t, n, i, r) { if (kr(n)) { var a = !0; Nr(t) } else a = !1; if (Ba(t, r), null === t.stateNode) _s(e, t), Ta(t, n, i), Ua(t, n, i, r), i = !0; else if (null === e) { var o = t.stateNode, s = t.memoizedProps; o.props = s; var l = o.context, g = n.contextType; "object" === typeof g && null !== g ? g = Za(g) : g = Vr(t, g = kr(n) ? Wr : Rr.current); var c = n.getDerivedStateFromProps, u = "function" === typeof c || "function" === typeof o.getSnapshotBeforeUpdate; u || "function" !== typeof o.UNSAFE_componentWillReceiveProps && "function" !== typeof o.componentWillReceiveProps || (s !== i || l !== g) && _a(t, o, i, g), Wa = !1; var C = t.memoizedState; o.state = C, Xa(t, i, o, r), l = t.memoizedState, s !== i || C !== l || xr.current || Wa ? ("function" === typeof c && (La(t, n, c, i), l = t.memoizedState), (s = Wa || Ea(t, n, s, i, C, l, g)) ? (u || "function" !== typeof o.UNSAFE_componentWillMount && "function" !== typeof o.componentWillMount || ("function" === typeof o.componentWillMount && o.componentWillMount(), "function" === typeof o.UNSAFE_componentWillMount && o.UNSAFE_componentWillMount()), "function" === typeof o.componentDidMount && (t.flags |= 4194308)) : ("function" === typeof o.componentDidMount && (t.flags |= 4194308), t.memoizedProps = i, t.memoizedState = l), o.props = i, o.state = l, o.context = g, i = s) : ("function" === typeof o.componentDidMount && (t.flags |= 4194308), i = !1) } else { o = t.stateNode, ka(e, t), s = t.memoizedProps, g = t.type === t.elementType ? s : Aa(t.type, s), o.props = g, u = t.pendingProps, C = o.context, "object" === typeof (l = n.contextType) && null !== l ? l = Za(l) : l = Vr(t, l = kr(n) ? Wr : Rr.current); var d = n.getDerivedStateFromProps; (c = "function" === typeof d || "function" === typeof o.getSnapshotBeforeUpdate) || "function" !== typeof o.UNSAFE_componentWillReceiveProps && "function" !== typeof o.componentWillReceiveProps || (s !== u || C !== l) && _a(t, o, i, l), Wa = !1, C = t.memoizedState, o.state = C, Xa(t, i, o, r); var I = t.memoizedState; s !== u || C !== I || xr.current || Wa ? ("function" === typeof d && (La(t, n, d, i), I = t.memoizedState), (g = Wa || Ea(t, n, g, i, C, I, l) || !1) ? (c || "function" !== typeof o.UNSAFE_componentWillUpdate && "function" !== typeof o.componentWillUpdate || ("function" === typeof o.componentWillUpdate && o.componentWillUpdate(i, I, l), "function" === typeof o.UNSAFE_componentWillUpdate && o.UNSAFE_componentWillUpdate(i, I, l)), "function" === typeof o.componentDidUpdate && (t.flags |= 4), "function" === typeof o.getSnapshotBeforeUpdate && (t.flags |= 1024)) : ("function" !== typeof o.componentDidUpdate || s === e.memoizedProps && C === e.memoizedState || (t.flags |= 4), "function" !== typeof o.getSnapshotBeforeUpdate || s === e.memoizedProps && C === e.memoizedState || (t.flags |= 1024), t.memoizedProps = i, t.memoizedState = I), o.props = i, o.state = I, o.context = l, i = g) : ("function" !== typeof o.componentDidUpdate || s === e.memoizedProps && C === e.memoizedState || (t.flags |= 4), "function" !== typeof o.getSnapshotBeforeUpdate || s === e.memoizedProps && C === e.memoizedState || (t.flags |= 1024), i = !1) } return xs(e, t, n, i, a, r) } function xs(e, t, n, i, r, a) { ws(e, t); var o = 0 !== (128 & t.flags); if (!i && !o) return r && Xr(t, n, !1), Us(e, t, a); i = t.stateNode, ms.current = t; var s = o && "function" !== typeof n.getDerivedStateFromError ? null : i.render(); return t.flags |= 1, null !== e && o ? (t.child = ja(t, e.child, null, a), t.child = ja(t, null, s, a)) : bs(e, t, s, a), t.memoizedState = i.state, r && Xr(t, n, !0), t.child } function Ws(e) { var t = e.stateNode; t.pendingContext ? Mr(0, t.pendingContext, t.pendingContext !== t.context) : t.context && Mr(0, t.context, !1), io(e, t.containerInfo) } function Vs(e, t, n, i, r) { return da(), Ia(r), t.flags |= 256, bs(e, t, n, i), t.child } var ks, Hs, Ms, Fs, Ns = { dehydrated: null, treeContext: null, retryLane: 0 }; function Xs(e) { return { baseLanes: e, cachePool: null, transitions: null } } function Ys(e, t, n) { var i, r = t.pendingProps, o = so.current, s = !1, l = 0 !== (128 & t.flags); if ((i = l) || (i = (null === e || null !== e.memoizedState) && 0 !== (2 & o)), i ? (s = !0, t.flags &= -129) : null !== e && null === e.memoizedState || (o |= 1), wr(so, 1 & o), null === e) return ga(t), null !== (e = t.memoizedState) && null !== (e = e.dehydrated) ? (0 === (1 & t.mode) ? t.lanes = 1 : "$!" === e.data ? t.lanes = 8 : t.lanes = 1073741824, null) : (l = r.children, e = r.fallback, s ? (r = t.mode, s = t.child, l = { mode: "hidden", children: l }, 0 === (1 & r) && null !== s ? (s.childLanes = 0, s.pendingProps = l) : s = Xg(l, r, 0, null), e = Ng(e, r, n, null), s.return = t, e.return = t, s.sibling = e, t.child = s, t.child.memoizedState = Xs(n), t.memoizedState = Ns, e) : Ks(t, l)); if (null !== (o = e.memoizedState) && null !== (i = o.dehydrated)) return function (e, t, n, i, r, o, s) { if (n) return 256 & t.flags ? (t.flags &= -257, Ls(e, t, s, i = us(Error(a(422))))) : null !== t.memoizedState ? (t.child = e.child, t.flags |= 128, null) : (o = i.fallback, r = t.mode, i = Xg({ mode: "visible", children: i.children }, r, 0, null), (o = Ng(o, r, s, null)).flags |= 2, i.return = t, o.return = t, i.sibling = o, t.child = i, 0 !== (1 & t.mode) && ja(t, e.child, null, s), t.child.memoizedState = Xs(s), t.memoizedState = Ns, o); if (0 === (1 & t.mode)) return Ls(e, t, s, null); if ("$!" === r.data) { if (i = r.nextSibling && r.nextSibling.dataset) var l = i.dgst; return i = l, Ls(e, t, s, i = us(o = Error(a(419)), i, void 0)) } if (l = 0 !== (s & e.childLanes), vs || l) { if (null !== (i = Wl)) { switch (s & -s) { case 4: r = 2; break; case 16: r = 8; break; case 64: case 128: case 256: case 512: case 1024: case 2048: case 4096: case 8192: case 16384: case 32768: case 65536: case 131072: case 262144: case 524288: case 1048576: case 2097152: case 4194304: case 8388608: case 16777216: case 33554432: case 67108864: r = 32; break; case 536870912: r = 268435456; break; default: r = 0 }0 !== (r = 0 !== (r & (i.suspendedLanes | s)) ? 0 : r) && r !== o.retryLane && (o.retryLane = r, xa(e, r), ig(i, e, r, -1)) } return Ag(), Ls(e, t, s, i = us(Error(a(421)))) } return "$?" === r.data ? (t.flags |= 128, t.child = e.child, t = Rg.bind(null, e), r._reactRetry = t, null) : (e = o.treeContext, ia = gr(r.nextSibling), na = t, ra = !0, aa = null, null !== e && (Pr[Jr++] = jr, Pr[Jr++] = Qr, Pr[Jr++] = Or, jr = e.id, Qr = e.overflow, Or = t), t = Ks(t, i.children), t.flags |= 4096, t) }(e, t, l, r, i, o, n); if (s) { s = r.fallback, l = t.mode, i = (o = e.child).sibling; var g = { mode: "hidden", children: r.children }; return 0 === (1 & l) && t.child !== o ? ((r = t.child).childLanes = 0, r.pendingProps = g, t.deletions = null) : (r = Mg(o, g)).subtreeFlags = 14680064 & o.subtreeFlags, null !== i ? s = Mg(i, s) : (s = Ng(s, l, n, null)).flags |= 2, s.return = t, r.return = t, r.sibling = s, t.child = r, r = s, s = t.child, l = null === (l = e.child.memoizedState) ? Xs(n) : { baseLanes: l.baseLanes | n, cachePool: null, transitions: l.transitions }, s.memoizedState = l, s.childLanes = e.childLanes & ~n, t.memoizedState = Ns, r } return e = (s = e.child).sibling, r = Mg(s, { mode: "visible", children: r.children }), 0 === (1 & t.mode) && (r.lanes = n), r.return = t, r.sibling = null, null !== e && (null === (n = t.deletions) ? (t.deletions = [e], t.flags |= 16) : n.push(e)), t.child = r, t.memoizedState = null, r } function Ks(e, t) { return (t = Xg({ mode: "visible", children: t }, e.mode, 0, null)).return = e, e.child = t } function Ls(e, t, n, i) { return null !== i && Ia(i), ja(t, e.child, null, n), (e = Ks(t, t.pendingProps.children)).flags |= 2, t.memoizedState = null, e } function zs(e, t, n) { e.lanes |= t; var i = e.alternate; null !== i && (i.lanes |= t), Ga(e.return, t, n) } function Es(e, t, n, i, r) { var a = e.memoizedState; null === a ? e.memoizedState = { isBackwards: t, rendering: null, renderingStartTime: 0, last: i, tail: n, tailMode: r } : (a.isBackwards = t, a.rendering = null, a.renderingStartTime = 0, a.last = i, a.tail = n, a.tailMode = r) } function Ts(e, t, n) { var i = t.pendingProps, r = i.revealOrder, a = i.tail; if (bs(e, t, i.children, n), 0 !== (2 & (i = so.current))) i = 1 & i | 2, t.flags |= 128; else { if (null !== e && 0 !== (128 & e.flags)) e: for (e = t.child; null !== e;) { if (13 === e.tag) null !== e.memoizedState && zs(e, n, t); else if (19 === e.tag) zs(e, n, t); else if (null !== e.child) { e.child.return = e, e = e.child; continue } if (e === t) break e; for (; null === e.sibling;) { if (null === e.return || e.return === t) break e; e = e.return } e.sibling.return = e.return, e = e.sibling } i &= 1 } if (wr(so, i), 0 === (1 & t.mode)) t.memoizedState = null; else switch (r) { case "forwards": for (n = t.child, r = null; null !== n;)null !== (e = n.alternate) && null === lo(e) && (r = n), n = n.sibling; null === (n = r) ? (r = t.child, t.child = null) : (r = n.sibling, n.sibling = null), Es(t, !1, r, n, a); break; case "backwards": for (n = null, r = t.child, t.child = null; null !== r;) { if (null !== (e = r.alternate) && null === lo(e)) { t.child = r; break } e = r.sibling, r.sibling = n, n = r, r = e } Es(t, !0, n, null, a); break; case "together": Es(t, !1, null, null, void 0); break; default: t.memoizedState = null }return t.child } function _s(e, t) { 0 === (1 & t.mode) && null !== e && (e.alternate = null, t.alternate = null, t.flags |= 2) } function Us(e, t, n) { if (null !== e && (t.dependencies = e.dependencies), Xl |= t.lanes, 0 === (n & t.childLanes)) return null; if (null !== e && t.child !== e.child) throw Error(a(153)); if (null !== t.child) { for (n = Mg(e = t.child, e.pendingProps), t.child = n, n.return = t; null !== e.sibling;)e = e.sibling, (n = n.sibling = Mg(e, e.pendingProps)).return = t; n.sibling = null } return t.child } function Ds(e, t) { if (!ra) switch (e.tailMode) { case "hidden": t = e.tail; for (var n = null; null !== t;)null !== t.alternate && (n = t), t = t.sibling; null === n ? e.tail = null : n.sibling = null; break; case "collapsed": n = e.tail; for (var i = null; null !== n;)null !== n.alternate && (i = n), n = n.sibling; null === i ? t || null === e.tail ? e.tail = null : e.tail.sibling = null : i.sibling = null } } function Ps(e) { var t = null !== e.alternate && e.alternate.child === e.child, n = 0, i = 0; if (t) for (var r = e.child; null !== r;)n |= r.lanes | r.childLanes, i |= 14680064 & r.subtreeFlags, i |= 14680064 & r.flags, r.return = e, r = r.sibling; else for (r = e.child; null !== r;)n |= r.lanes | r.childLanes, i |= r.subtreeFlags, i |= r.flags, r.return = e, r = r.sibling; return e.subtreeFlags |= i, e.childLanes = n, t } function Js(e, t, n) { var i = t.pendingProps; switch (ta(t), t.tag) { case 2: case 16: case 15: case 0: case 11: case 7: case 8: case 12: case 9: case 14: return Ps(t), null; case 1: case 17: return kr(t.type) && Hr(), Ps(t), null; case 3: return i = t.stateNode, ro(), Zr(xr), Zr(Rr), co(), i.pendingContext && (i.context = i.pendingContext, i.pendingContext = null), null !== e && null !== e.child || (ua(t) ? t.flags |= 4 : null === e || e.memoizedState.isDehydrated && 0 === (256 & t.flags) || (t.flags |= 1024, null !== aa && (sg(aa), aa = null))), Hs(e, t), Ps(t), null; case 5: oo(t); var r = no(to.current); if (n = t.type, null !== e && null != t.stateNode) Ms(e, t, n, i, r), e.ref !== t.ref && (t.flags |= 512, t.flags |= 2097152); else { if (!i) { if (null === t.stateNode) throw Error(a(166)); return Ps(t), null } if (e = no($a.current), ua(t)) { i = t.stateNode, n = t.type; var o = t.memoizedProps; switch (i[Cr] = t, i[dr] = o, e = 0 !== (1 & t.mode), n) { case "dialog": Ki("cancel", i), Ki("close", i); break; case "iframe": case "object": case "embed": Ki("load", i); break; case "video": case "audio": for (r = 0; r < Fi.length; r++)Ki(Fi[r], i); break; case "source": Ki("error", i); break; case "img": case "image": case "link": Ki("error", i), Ki("load", i); break; case "details": Ki("toggle", i); break; case "input": j(i, o), Ki("invalid", i); break; case "select": i._wrapperState = { wasMultiple: !!o.multiple }, Ki("invalid", i); break; case "textarea": re(i, o), Ki("invalid", i) }for (var l in fe(n, o), r = null, o) if (o.hasOwnProperty(l)) { var g = o[l]; "children" === l ? "string" === typeof g ? i.textContent !== g && (!0 !== o.suppressHydrationWarning && qi(i.textContent, g, e), r = ["children", g]) : "number" === typeof g && i.textContent !== "" + g && (!0 !== o.suppressHydrationWarning && qi(i.textContent, g, e), r = ["children", "" + g]) : s.hasOwnProperty(l) && null != g && "onScroll" === l && Ki("scroll", i) } switch (n) { case "input": D(i), $(i, o, !0); break; case "textarea": D(i), oe(i); break; case "select": case "option": break; default: "function" === typeof o.onClick && (i.onclick = $i) }i = r, t.updateQueue = i, null !== i && (t.flags |= 4) } else { l = 9 === r.nodeType ? r : r.ownerDocument, "http://www.w3.org/1999/xhtml" === e && (e = se(n)), "http://www.w3.org/1999/xhtml" === e ? "script" === n ? ((e = l.createElement("div")).innerHTML = "<script><\/script>", e = e.removeChild(e.firstChild)) : "string" === typeof i.is ? e = l.createElement(n, { is: i.is }) : (e = l.createElement(n), "select" === n && (l = e, i.multiple ? l.multiple = !0 : i.size && (l.size = i.size))) : e = l.createElementNS(e, n), e[Cr] = t, e[dr] = i, ks(e, t, !1, !1), t.stateNode = e; e: { switch (l = me(n, i), n) { case "dialog": Ki("cancel", e), Ki("close", e), r = i; break; case "iframe": case "object": case "embed": Ki("load", e), r = i; break; case "video": case "audio": for (r = 0; r < Fi.length; r++)Ki(Fi[r], e); r = i; break; case "source": Ki("error", e), r = i; break; case "img": case "image": case "link": Ki("error", e), Ki("load", e), r = i; break; case "details": Ki("toggle", e), r = i; break; case "input": j(e, i), r = O(e, i), Ki("invalid", e); break; case "option": default: r = i; break; case "select": e._wrapperState = { wasMultiple: !!i.multiple }, r = X({}, i, { value: void 0 }), Ki("invalid", e); break; case "textarea": re(e, i), r = ie(e, i), Ki("invalid", e) }for (o in fe(n, r), g = r) if (g.hasOwnProperty(o)) { var c = g[o]; "style" === o ? Ae(e, c) : "dangerouslySetInnerHTML" === o ? null != (c = c ? c.__html : void 0) && ue(e, c) : "children" === o ? "string" === typeof c ? ("textarea" !== n || "" !== c) && Ce(e, c) : "number" === typeof c && Ce(e, "" + c) : "suppressContentEditableWarning" !== o && "suppressHydrationWarning" !== o && "autoFocus" !== o && (s.hasOwnProperty(o) ? null != c && "onScroll" === o && Ki("scroll", e) : null != c && m(e, o, c, l)) } switch (n) { case "input": D(e), $(e, i, !1); break; case "textarea": D(e), oe(e); break; case "option": null != i.value && e.setAttribute("value", "" + _(i.value)); break; case "select": e.multiple = !!i.multiple, null != (o = i.value) ? ne(e, !!i.multiple, o, !1) : null != i.defaultValue && ne(e, !!i.multiple, i.defaultValue, !0); break; default: "function" === typeof r.onClick && (e.onclick = $i) }switch (n) { case "button": case "input": case "select": case "textarea": i = !!i.autoFocus; break e; case "img": i = !0; break e; default: i = !1 } } i && (t.flags |= 4) } null !== t.ref && (t.flags |= 512, t.flags |= 2097152) } return Ps(t), null; case 6: if (e && null != t.stateNode) Fs(e, t, e.memoizedProps, i); else { if ("string" !== typeof i && null === t.stateNode) throw Error(a(166)); if (n = no(to.current), no($a.current), ua(t)) { if (i = t.stateNode, n = t.memoizedProps, i[Cr] = t, (o = i.nodeValue !== n) && null !== (e = na)) switch (e.tag) { case 3: qi(i.nodeValue, n, 0 !== (1 & e.mode)); break; case 5: !0 !== e.memoizedProps.suppressHydrationWarning && qi(i.nodeValue, n, 0 !== (1 & e.mode)) }o && (t.flags |= 4) } else (i = (9 === n.nodeType ? n : n.ownerDocument).createTextNode(i))[Cr] = t, t.stateNode = i } return Ps(t), null; case 13: if (Zr(so), i = t.memoizedState, null === e || null !== e.memoizedState && null !== e.memoizedState.dehydrated) { if (ra && null !== ia && 0 !== (1 & t.mode) && 0 === (128 & t.flags)) Ca(), da(), t.flags |= 98560, o = !1; else if (o = ua(t), null !== i && null !== i.dehydrated) { if (null === e) { if (!o) throw Error(a(318)); if (!(o = null !== (o = t.memoizedState) ? o.dehydrated : null)) throw Error(a(317)); o[Cr] = t } else da(), 0 === (128 & t.flags) && (t.memoizedState = null), t.flags |= 4; Ps(t), o = !1 } else null !== aa && (sg(aa), aa = null), o = !0; if (!o) return 65536 & t.flags ? t : null } return 0 !== (128 & t.flags) ? (t.lanes = n, t) : ((i = null !== i) !== (null !== e && null !== e.memoizedState) && i && (t.child.flags |= 8192, 0 !== (1 & t.mode) && (null === e || 0 !== (1 & so.current) ? 0 === Fl && (Fl = 3) : Ag())), null !== t.updateQueue && (t.flags |= 4), Ps(t), null); case 4: return ro(), Hs(e, t), null === e && Ei(t.stateNode.containerInfo), Ps(t), null; case 10: return ya(t.type._context), Ps(t), null; case 19: if (Zr(so), null === (o = t.memoizedState)) return Ps(t), null; if (i = 0 !== (128 & t.flags), null === (l = o.rendering)) if (i) Ds(o, !1); else { if (0 !== Fl || null !== e && 0 !== (128 & e.flags)) for (e = t.child; null !== e;) { if (null !== (l = lo(e))) { for (t.flags |= 128, Ds(o, !1), null !== (i = l.updateQueue) && (t.updateQueue = i, t.flags |= 4), t.subtreeFlags = 0, i = n, n = t.child; null !== n;)e = i, (o = n).flags &= 14680066, null === (l = o.alternate) ? (o.childLanes = 0, o.lanes = e, o.child = null, o.subtreeFlags = 0, o.memoizedProps = null, o.memoizedState = null, o.updateQueue = null, o.dependencies = null, o.stateNode = null) : (o.childLanes = l.childLanes, o.lanes = l.lanes, o.child = l.child, o.subtreeFlags = 0, o.deletions = null, o.memoizedProps = l.memoizedProps, o.memoizedState = l.memoizedState, o.updateQueue = l.updateQueue, o.type = l.type, e = l.dependencies, o.dependencies = null === e ? null : { lanes: e.lanes, firstContext: e.firstContext }), n = n.sibling; return wr(so, 1 & so.current | 2), t.child } e = e.sibling } null !== o.tail && Qe() > Tl && (t.flags |= 128, i = !0, Ds(o, !1), t.lanes = 4194304) } else { if (!i) if (null !== (e = lo(l))) { if (t.flags |= 128, i = !0, null !== (n = e.updateQueue) && (t.updateQueue = n, t.flags |= 4), Ds(o, !0), null === o.tail && "hidden" === o.tailMode && !l.alternate && !ra) return Ps(t), null } else 2 * Qe() - o.renderingStartTime > Tl && 1073741824 !== n && (t.flags |= 128, i = !0, Ds(o, !1), t.lanes = 4194304); o.isBackwards ? (l.sibling = t.child, t.child = l) : (null !== (n = o.last) ? n.sibling = l : t.child = l, o.last = l) } return null !== o.tail ? (t = o.tail, o.rendering = t, o.tail = t.sibling, o.renderingStartTime = Qe(), t.sibling = null, n = so.current, wr(so, i ? 1 & n | 2 : 1 & n), t) : (Ps(t), null); case 22: case 23: return Cg(), i = null !== t.memoizedState, null !== e && null !== e.memoizedState !== i && (t.flags |= 8192), i && 0 !== (1 & t.mode) ? 0 !== (1073741824 & Hl) && (Ps(t), 6 & t.subtreeFlags && (t.flags |= 8192)) : Ps(t), null; case 24: case 25: return null }throw Error(a(156, t.tag)) } function Os(e, t) { switch (ta(t), t.tag) { case 1: return kr(t.type) && Hr(), 65536 & (e = t.flags) ? (t.flags = -65537 & e | 128, t) : null; case 3: return ro(), Zr(xr), Zr(Rr), co(), 0 !== (65536 & (e = t.flags)) && 0 === (128 & e) ? (t.flags = -65537 & e | 128, t) : null; case 5: return oo(t), null; case 13: if (Zr(so), null !== (e = t.memoizedState) && null !== e.dehydrated) { if (null === t.alternate) throw Error(a(340)); da() } return 65536 & (e = t.flags) ? (t.flags = -65537 & e | 128, t) : null; case 19: return Zr(so), null; case 4: return ro(), null; case 10: return ya(t.type._context), null; case 22: case 23: return Cg(), null; default: return null } } ks = function (e, t) { for (var n = t.child; null !== n;) { if (5 === n.tag || 6 === n.tag) e.appendChild(n.stateNode); else if (4 !== n.tag && null !== n.child) { n.child.return = n, n = n.child; continue } if (n === t) break; for (; null === n.sibling;) { if (null === n.return || n.return === t) return; n = n.return } n.sibling.return = n.return, n = n.sibling } }, Hs = function () { }, Ms = function (e, t, n, i) { var r = e.memoizedProps; if (r !== i) { e = t.stateNode, no($a.current); var a, o = null; switch (n) { case "input": r = O(e, r), i = O(e, i), o = []; break; case "select": r = X({}, r, { value: void 0 }), i = X({}, i, { value: void 0 }), o = []; break; case "textarea": r = ie(e, r), i = ie(e, i), o = []; break; default: "function" !== typeof r.onClick && "function" === typeof i.onClick && (e.onclick = $i) }for (c in fe(n, i), n = null, r) if (!i.hasOwnProperty(c) && r.hasOwnProperty(c) && null != r[c]) if ("style" === c) { var l = r[c]; for (a in l) l.hasOwnProperty(a) && (n || (n = {}), n[a] = "") } else "dangerouslySetInnerHTML" !== c && "children" !== c && "suppressContentEditableWarning" !== c && "suppressHydrationWarning" !== c && "autoFocus" !== c && (s.hasOwnProperty(c) ? o || (o = []) : (o = o || []).push(c, null)); for (c in i) { var g = i[c]; if (l = null != r ? r[c] : void 0, i.hasOwnProperty(c) && g !== l && (null != g || null != l)) if ("style" === c) if (l) { for (a in l) !l.hasOwnProperty(a) || g && g.hasOwnProperty(a) || (n || (n = {}), n[a] = ""); for (a in g) g.hasOwnProperty(a) && l[a] !== g[a] && (n || (n = {}), n[a] = g[a]) } else n || (o || (o = []), o.push(c, n)), n = g; else "dangerouslySetInnerHTML" === c ? (g = g ? g.__html : void 0, l = l ? l.__html : void 0, null != g && l !== g && (o = o || []).push(c, g)) : "children" === c ? "string" !== typeof g && "number" !== typeof g || (o = o || []).push(c, "" + g) : "suppressContentEditableWarning" !== c && "suppressHydrationWarning" !== c && (s.hasOwnProperty(c) ? (null != g && "onScroll" === c && Ki("scroll", e), o || l === g || (o = [])) : (o = o || []).push(c, g)) } n && (o = o || []).push("style", n); var c = o; (t.updateQueue = c) && (t.flags |= 4) } }, Fs = function (e, t, n, i) { n !== i && (t.flags |= 4) }; var js = !1, Qs = !1, qs = "function" === typeof WeakSet ? WeakSet : Set, $s = null; function el(e, t) { var n = e.ref; if (null !== n) if ("function" === typeof n) try { n(null) } catch (i) { Zg(e, t, i) } else n.current = null } function tl(e, t, n) { try { n() } catch (i) { Zg(e, t, i) } } var nl = !1; function il(e, t, n) { var i = t.updateQueue; if (null !== (i = null !== i ? i.lastEffect : null)) { var r = i = i.next; do { if ((r.tag & e) === e) { var a = r.destroy; r.destroy = void 0, void 0 !== a && tl(t, n, a) } r = r.next } while (r !== i) } } function rl(e, t) { if (null !== (t = null !== (t = t.updateQueue) ? t.lastEffect : null)) { var n = t = t.next; do { if ((n.tag & e) === e) { var i = n.create; n.destroy = i() } n = n.next } while (n !== t) } } function al(e) { var t = e.ref; if (null !== t) { var n = e.stateNode; e.tag, e = n, "function" === typeof t ? t(e) : t.current = e } } function ol(e) { var t = e.alternate; null !== t && (e.alternate = null, ol(t)), e.child = null, e.deletions = null, e.sibling = null, 5 === e.tag && (null !== (t = e.stateNode) && (delete t[Cr], delete t[dr], delete t[hr], delete t[Ar], delete t[pr])), e.stateNode = null, e.return = null, e.dependencies = null, e.memoizedProps = null, e.memoizedState = null, e.pendingProps = null, e.stateNode = null, e.updateQueue = null } function sl(e) { return 5 === e.tag || 3 === e.tag || 4 === e.tag } function ll(e) { e: for (; ;) { for (; null === e.sibling;) { if (null === e.return || sl(e.return)) return null; e = e.return } for (e.sibling.return = e.return, e = e.sibling; 5 !== e.tag && 6 !== e.tag && 18 !== e.tag;) { if (2 & e.flags) continue e; if (null === e.child || 4 === e.tag) continue e; e.child.return = e, e = e.child } if (!(2 & e.flags)) return e.stateNode } } function gl(e, t, n) { var i = e.tag; if (5 === i || 6 === i) e = e.stateNode, t ? 8 === n.nodeType ? n.parentNode.insertBefore(e, t) : n.insertBefore(e, t) : (8 === n.nodeType ? (t = n.parentNode).insertBefore(e, n) : (t = n).appendChild(e), null !== (n = n._reactRootContainer) && void 0 !== n || null !== t.onclick || (t.onclick = $i)); else if (4 !== i && null !== (e = e.child)) for (gl(e, t, n), e = e.sibling; null !== e;)gl(e, t, n), e = e.sibling } function cl(e, t, n) { var i = e.tag; if (5 === i || 6 === i) e = e.stateNode, t ? n.insertBefore(e, t) : n.appendChild(e); else if (4 !== i && null !== (e = e.child)) for (cl(e, t, n), e = e.sibling; null !== e;)cl(e, t, n), e = e.sibling } var ul = null, Cl = !1; function dl(e, t, n) { for (n = n.child; null !== n;)Il(e, t, n), n = n.sibling } function Il(e, t, n) { if (at && "function" === typeof at.onCommitFiberUnmount) try { at.onCommitFiberUnmount(rt, n) } catch (s) { } switch (n.tag) { case 5: Qs || el(n, t); case 6: var i = ul, r = Cl; ul = null, dl(e, t, n), Cl = r, null !== (ul = i) && (Cl ? (e = ul, n = n.stateNode, 8 === e.nodeType ? e.parentNode.removeChild(n) : e.removeChild(n)) : ul.removeChild(n.stateNode)); break; case 18: null !== ul && (Cl ? (e = ul, n = n.stateNode, 8 === e.nodeType ? lr(e.parentNode, n) : 1 === e.nodeType && lr(e, n), Et(e)) : lr(ul, n.stateNode)); break; case 4: i = ul, r = Cl, ul = n.stateNode.containerInfo, Cl = !0, dl(e, t, n), ul = i, Cl = r; break; case 0: case 11: case 14: case 15: if (!Qs && (null !== (i = n.updateQueue) && null !== (i = i.lastEffect))) { r = i = i.next; do { var a = r, o = a.destroy; a = a.tag, void 0 !== o && (0 !== (2 & a) || 0 !== (4 & a)) && tl(n, t, o), r = r.next } while (r !== i) } dl(e, t, n); break; case 1: if (!Qs && (el(n, t), "function" === typeof (i = n.stateNode).componentWillUnmount)) try { i.props = n.memoizedProps, i.state = n.memoizedState, i.componentWillUnmount() } catch (s) { Zg(n, t, s) } dl(e, t, n); break; case 21: dl(e, t, n); break; case 22: 1 & n.mode ? (Qs = (i = Qs) || null !== n.memoizedState, dl(e, t, n), Qs = i) : dl(e, t, n); break; default: dl(e, t, n) } } function hl(e) { var t = e.updateQueue; if (null !== t) { e.updateQueue = null; var n = e.stateNode; null === n && (n = e.stateNode = new qs), t.forEach((function (t) { var i = xg.bind(null, e, t); n.has(t) || (n.add(t), t.then(i, i)) })) } } function Al(e, t) { var n = t.deletions; if (null !== n) for (var i = 0; i < n.length; i++) { var r = n[i]; try { var o = e, s = t, l = s; e: for (; null !== l;) { switch (l.tag) { case 5: ul = l.stateNode, Cl = !1; break e; case 3: case 4: ul = l.stateNode.containerInfo, Cl = !0; break e }l = l.return } if (null === ul) throw Error(a(160)); Il(o, s, r), ul = null, Cl = !1; var g = r.alternate; null !== g && (g.return = null), r.return = null } catch (c) { Zg(r, t, c) } } if (12854 & t.subtreeFlags) for (t = t.child; null !== t;)pl(t, e), t = t.sibling } function pl(e, t) { var n = e.alternate, i = e.flags; switch (e.tag) { case 0: case 11: case 14: case 15: if (Al(t, e), fl(e), 4 & i) { try { il(3, e, e.return), rl(3, e) } catch (A) { Zg(e, e.return, A) } try { il(5, e, e.return) } catch (A) { Zg(e, e.return, A) } } break; case 1: Al(t, e), fl(e), 512 & i && null !== n && el(n, n.return); break; case 5: if (Al(t, e), fl(e), 512 & i && null !== n && el(n, n.return), 32 & e.flags) { var r = e.stateNode; try { Ce(r, "") } catch (A) { Zg(e, e.return, A) } } if (4 & i && null != (r = e.stateNode)) { var o = e.memoizedProps, s = null !== n ? n.memoizedProps : o, l = e.type, g = e.updateQueue; if (e.updateQueue = null, null !== g) try { "input" === l && "radio" === o.type && null != o.name && Q(r, o), me(l, s); var c = me(l, o); for (s = 0; s < g.length; s += 2) { var u = g[s], C = g[s + 1]; "style" === u ? Ae(r, C) : "dangerouslySetInnerHTML" === u ? ue(r, C) : "children" === u ? Ce(r, C) : m(r, u, C, c) } switch (l) { case "input": q(r, o); break; case "textarea": ae(r, o); break; case "select": var d = r._wrapperState.wasMultiple; r._wrapperState.wasMultiple = !!o.multiple; var I = o.value; null != I ? ne(r, !!o.multiple, I, !1) : d !== !!o.multiple && (null != o.defaultValue ? ne(r, !!o.multiple, o.defaultValue, !0) : ne(r, !!o.multiple, o.multiple ? [] : "", !1)) }r[dr] = o } catch (A) { Zg(e, e.return, A) } } break; case 6: if (Al(t, e), fl(e), 4 & i) { if (null === e.stateNode) throw Error(a(162)); r = e.stateNode, o = e.memoizedProps; try { r.nodeValue = o } catch (A) { Zg(e, e.return, A) } } break; case 3: if (Al(t, e), fl(e), 4 & i && null !== n && n.memoizedState.isDehydrated) try { Et(t.containerInfo) } catch (A) { Zg(e, e.return, A) } break; case 4: default: Al(t, e), fl(e); break; case 13: Al(t, e), fl(e), 8192 & (r = e.child).flags && (o = null !== r.memoizedState, r.stateNode.isHidden = o, !o || null !== r.alternate && null !== r.alternate.memoizedState || (El = Qe())), 4 & i && hl(e); break; case 22: if (u = null !== n && null !== n.memoizedState, 1 & e.mode ? (Qs = (c = Qs) || u, Al(t, e), Qs = c) : Al(t, e), fl(e), 8192 & i) { if (c = null !== e.memoizedState, (e.stateNode.isHidden = c) && !u && 0 !== (1 & e.mode)) for ($s = e, u = e.child; null !== u;) { for (C = $s = u; null !== $s;) { switch (I = (d = $s).child, d.tag) { case 0: case 11: case 14: case 15: il(4, d, d.return); break; case 1: el(d, d.return); var h = d.stateNode; if ("function" === typeof h.componentWillUnmount) { i = d, n = d.return; try { t = i, h.props = t.memoizedProps, h.state = t.memoizedState, h.componentWillUnmount() } catch (A) { Zg(i, n, A) } } break; case 5: el(d, d.return); break; case 22: if (null !== d.memoizedState) { yl(C); continue } }null !== I ? (I.return = d, $s = I) : yl(C) } u = u.sibling } e: for (u = null, C = e; ;) { if (5 === C.tag) { if (null === u) { u = C; try { r = C.stateNode, c ? "function" === typeof (o = r.style).setProperty ? o.setProperty("display", "none", "important") : o.display = "none" : (l = C.stateNode, s = void 0 !== (g = C.memoizedProps.style) && null !== g && g.hasOwnProperty("display") ? g.display : null, l.style.display = he("display", s)) } catch (A) { Zg(e, e.return, A) } } } else if (6 === C.tag) { if (null === u) try { C.stateNode.nodeValue = c ? "" : C.memoizedProps } catch (A) { Zg(e, e.return, A) } } else if ((22 !== C.tag && 23 !== C.tag || null === C.memoizedState || C === e) && null !== C.child) { C.child.return = C, C = C.child; continue } if (C === e) break e; for (; null === C.sibling;) { if (null === C.return || C.return === e) break e; u === C && (u = null), C = C.return } u === C && (u = null), C.sibling.return = C.return, C = C.sibling } } break; case 19: Al(t, e), fl(e), 4 & i && hl(e); case 21: } } function fl(e) { var t = e.flags; if (2 & t) { try { e: { for (var n = e.return; null !== n;) { if (sl(n)) { var i = n; break e } n = n.return } throw Error(a(160)) } switch (i.tag) { case 5: var r = i.stateNode; 32 & i.flags && (Ce(r, ""), i.flags &= -33), cl(e, ll(e), r); break; case 3: case 4: var o = i.stateNode.containerInfo; gl(e, ll(e), o); break; default: throw Error(a(161)) } } catch (s) { Zg(e, e.return, s) } e.flags &= -3 } 4096 & t && (e.flags &= -4097) } function ml(e, t, n) { $s = e, vl(e, t, n) } function vl(e, t, n) { for (var i = 0 !== (1 & e.mode); null !== $s;) { var r = $s, a = r.child; if (22 === r.tag && i) { var o = null !== r.memoizedState || js; if (!o) { var s = r.alternate, l = null !== s && null !== s.memoizedState || Qs; s = js; var g = Qs; if (js = o, (Qs = l) && !g) for ($s = r; null !== $s;)l = (o = $s).child, 22 === o.tag && null !== o.memoizedState ? Gl(r) : null !== l ? (l.return = o, $s = l) : Gl(r); for (; null !== a;)$s = a, vl(a, t, n), a = a.sibling; $s = r, js = s, Qs = g } bl(e) } else 0 !== (8772 & r.subtreeFlags) && null !== a ? (a.return = r, $s = a) : bl(e) } } function bl(e) { for (; null !== $s;) { var t = $s; if (0 !== (8772 & t.flags)) { var n = t.alternate; try { if (0 !== (8772 & t.flags)) switch (t.tag) { case 0: case 11: case 15: Qs || rl(5, t); break; case 1: var i = t.stateNode; if (4 & t.flags && !Qs) if (null === n) i.componentDidMount(); else { var r = t.elementType === t.type ? n.memoizedProps : Aa(t.type, n.memoizedProps); i.componentDidUpdate(r, n.memoizedState, i.__reactInternalSnapshotBeforeUpdate) } var o = t.updateQueue; null !== o && Ya(t, o, i); break; case 3: var s = t.updateQueue; if (null !== s) { if (n = null, null !== t.child) switch (t.child.tag) { case 5: case 1: n = t.child.stateNode }Ya(t, s, n) } break; case 5: var l = t.stateNode; if (null === n && 4 & t.flags) { n = l; var g = t.memoizedProps; switch (t.type) { case "button": case "input": case "select": case "textarea": g.autoFocus && n.focus(); break; case "img": g.src && (n.src = g.src) } } break; case 6: case 4: case 12: case 19: case 17: case 21: case 22: case 23: case 25: break; case 13: if (null === t.memoizedState) { var c = t.alternate; if (null !== c) { var u = c.memoizedState; if (null !== u) { var C = u.dehydrated; null !== C && Et(C) } } } break; default: throw Error(a(163)) }Qs || 512 & t.flags && al(t) } catch (d) { Zg(t, t.return, d) } } if (t === e) { $s = null; break } if (null !== (n = t.sibling)) { n.return = t.return, $s = n; break } $s = t.return } } function yl(e) { for (; null !== $s;) { var t = $s; if (t === e) { $s = null; break } var n = t.sibling; if (null !== n) { n.return = t.return, $s = n; break } $s = t.return } } function Gl(e) { for (; null !== $s;) { var t = $s; try { switch (t.tag) { case 0: case 11: case 15: var n = t.return; try { rl(4, t) } catch (l) { Zg(t, n, l) } break; case 1: var i = t.stateNode; if ("function" === typeof i.componentDidMount) { var r = t.return; try { i.componentDidMount() } catch (l) { Zg(t, r, l) } } var a = t.return; try { al(t) } catch (l) { Zg(t, a, l) } break; case 5: var o = t.return; try { al(t) } catch (l) { Zg(t, o, l) } } } catch (l) { Zg(t, t.return, l) } if (t === e) { $s = null; break } var s = t.sibling; if (null !== s) { s.return = t.return, $s = s; break } $s = t.return } } var Bl, Zl = Math.ceil, wl = v.ReactCurrentDispatcher, Sl = v.ReactCurrentOwner, Rl = v.ReactCurrentBatchConfig, xl = 0, Wl = null, Vl = null, kl = 0, Hl = 0, Ml = Br(0), Fl = 0, Nl = null, Xl = 0, Yl = 0, Kl = 0, Ll = null, zl = null, El = 0, Tl = 1 / 0, _l = null, Ul = !1, Dl = null, Pl = null, Jl = !1, Ol = null, jl = 0, Ql = 0, ql = null, $l = -1, eg = 0; function tg() { return 0 !== (6 & xl) ? Qe() : -1 !== $l ? $l : $l = Qe() } function ng(e) { return 0 === (1 & e.mode) ? 1 : 0 !== (2 & xl) && 0 !== kl ? kl & -kl : null !== ha.transition ? (0 === eg && (eg = ht()), eg) : 0 !== (e = mt) ? e : e = void 0 === (e = window.event) ? 16 : jt(e.type) } function ig(e, t, n, i) { if (50 < Ql) throw Ql = 0, ql = null, Error(a(185)); pt(e, n, i), 0 !== (2 & xl) && e === Wl || (e === Wl && (0 === (2 & xl) && (Yl |= n), 4 === Fl && lg(e, kl)), rg(e, i), 1 === n && 0 === xl && 0 === (1 & t.mode) && (Tl = Qe() + 500, Kr && Er())) } function rg(e, t) { var n = e.callbackNode; !function (e, t) { for (var n = e.suspendedLanes, i = e.pingedLanes, r = e.expirationTimes, a = e.pendingLanes; 0 < a;) { var o = 31 - ot(a), s = 1 << o, l = r[o]; -1 === l ? 0 !== (s & n) && 0 === (s & i) || (r[o] = dt(s, t)) : l <= t && (e.expiredLanes |= s), a &= ~s } }(e, t); var i = Ct(e, e === Wl ? kl : 0); if (0 === i) null !== n && Je(n), e.callbackNode = null, e.callbackPriority = 0; else if (t = i & -i, e.callbackPriority !== t) { if (null != n && Je(n), 1 === t) 0 === e.tag ? function (e) { Kr = !0, zr(e) }(gg.bind(null, e)) : zr(gg.bind(null, e)), or((function () { 0 === (6 & xl) && Er() })), n = null; else { switch (vt(i)) { case 1: n = $e; break; case 4: n = et; break; case 16: default: n = tt; break; case 536870912: n = it }n = Wg(n, ag.bind(null, e)) } e.callbackPriority = t, e.callbackNode = n } } function ag(e, t) { if ($l = -1, eg = 0, 0 !== (6 & xl)) throw Error(a(327)); var n = e.callbackNode; if (Gg() && e.callbackNode !== n) return null; var i = Ct(e, e === Wl ? kl : 0); if (0 === i) return null; if (0 !== (30 & i) || 0 !== (i & e.expiredLanes) || t) t = pg(e, i); else { t = i; var r = xl; xl |= 2; var o = hg(); for (Wl === e && kl === t || (_l = null, Tl = Qe() + 500, dg(e, t)); ;)try { mg(); break } catch (l) { Ig(e, l) } ba(), wl.current = o, xl = r, null !== Vl ? t = 0 : (Wl = null, kl = 0, t = Fl) } if (0 !== t) { if (2 === t && (0 !== (r = It(e)) && (i = r, t = og(e, r))), 1 === t) throw n = Nl, dg(e, 0), lg(e, i), rg(e, Qe()), n; if (6 === t) lg(e, i); else { if (r = e.current.alternate, 0 === (30 & i) && !function (e) { for (var t = e; ;) { if (16384 & t.flags) { var n = t.updateQueue; if (null !== n && null !== (n = n.stores)) for (var i = 0; i < n.length; i++) { var r = n[i], a = r.getSnapshot; r = r.value; try { if (!si(a(), r)) return !1 } catch (s) { return !1 } } } if (n = t.child, 16384 & t.subtreeFlags && null !== n) n.return = t, t = n; else { if (t === e) break; for (; null === t.sibling;) { if (null === t.return || t.return === e) return !0; t = t.return } t.sibling.return = t.return, t = t.sibling } } return !0 }(r) && (2 === (t = pg(e, i)) && (0 !== (o = It(e)) && (i = o, t = og(e, o))), 1 === t)) throw n = Nl, dg(e, 0), lg(e, i), rg(e, Qe()), n; switch (e.finishedWork = r, e.finishedLanes = i, t) { case 0: case 1: throw Error(a(345)); case 2: case 5: yg(e, zl, _l); break; case 3: if (lg(e, i), (130023424 & i) === i && 10 < (t = El + 500 - Qe())) { if (0 !== Ct(e, 0)) break; if (((r = e.suspendedLanes) & i) !== i) { tg(), e.pingedLanes |= e.suspendedLanes & r; break } e.timeoutHandle = ir(yg.bind(null, e, zl, _l), t); break } yg(e, zl, _l); break; case 4: if (lg(e, i), (4194240 & i) === i) break; for (t = e.eventTimes, r = -1; 0 < i;) { var s = 31 - ot(i); o = 1 << s, (s = t[s]) > r && (r = s), i &= ~o } if (i = r, 10 < (i = (120 > (i = Qe() - i) ? 120 : 480 > i ? 480 : 1080 > i ? 1080 : 1920 > i ? 1920 : 3e3 > i ? 3e3 : 4320 > i ? 4320 : 1960 * Zl(i / 1960)) - i)) { e.timeoutHandle = ir(yg.bind(null, e, zl, _l), i); break } yg(e, zl, _l); break; default: throw Error(a(329)) } } } return rg(e, Qe()), e.callbackNode === n ? ag.bind(null, e) : null } function og(e, t) { var n = Ll; return e.current.memoizedState.isDehydrated && (dg(e, t).flags |= 256), 2 !== (e = pg(e, t)) && (t = zl, zl = n, null !== t && sg(t)), e } function sg(e) { null === zl ? zl = e : zl.push.apply(zl, e) } function lg(e, t) { for (t &= ~Kl, t &= ~Yl, e.suspendedLanes |= t, e.pingedLanes &= ~t, e = e.expirationTimes; 0 < t;) { var n = 31 - ot(t), i = 1 << n; e[n] = -1, t &= ~i } } function gg(e) { if (0 !== (6 & xl)) throw Error(a(327)); Gg(); var t = Ct(e, 0); if (0 === (1 & t)) return rg(e, Qe()), null; var n = pg(e, t); if (0 !== e.tag && 2 === n) { var i = It(e); 0 !== i && (t = i, n = og(e, i)) } if (1 === n) throw n = Nl, dg(e, 0), lg(e, t), rg(e, Qe()), n; if (6 === n) throw Error(a(345)); return e.finishedWork = e.current.alternate, e.finishedLanes = t, yg(e, zl, _l), rg(e, Qe()), null } function cg(e, t) { var n = xl; xl |= 1; try { return e(t) } finally { 0 === (xl = n) && (Tl = Qe() + 500, Kr && Er()) } } function ug(e) { null !== Ol && 0 === Ol.tag && 0 === (6 & xl) && Gg(); var t = xl; xl |= 1; var n = Rl.transition, i = mt; try { if (Rl.transition = null, mt = 1, e) return e() } finally { mt = i, Rl.transition = n, 0 === (6 & (xl = t)) && Er() } } function Cg() { Hl = Ml.current, Zr(Ml) } function dg(e, t) { e.finishedWork = null, e.finishedLanes = 0; var n = e.timeoutHandle; if (-1 !== n && (e.timeoutHandle = -1, rr(n)), null !== Vl) for (n = Vl.return; null !== n;) { var i = n; switch (ta(i), i.tag) { case 1: null !== (i = i.type.childContextTypes) && void 0 !== i && Hr(); break; case 3: ro(), Zr(xr), Zr(Rr), co(); break; case 5: oo(i); break; case 4: ro(); break; case 13: case 19: Zr(so); break; case 10: ya(i.type._context); break; case 22: case 23: Cg() }n = n.return } if (Wl = e, Vl = e = Mg(e.current, null), kl = Hl = t, Fl = 0, Nl = null, Kl = Yl = Xl = 0, zl = Ll = null, null !== wa) { for (t = 0; t < wa.length; t++)if (null !== (i = (n = wa[t]).interleaved)) { n.interleaved = null; var r = i.next, a = n.pending; if (null !== a) { var o = a.next; a.next = r, i.next = o } n.pending = i } wa = null } return e } function Ig(e, t) { for (; ;) { var n = Vl; try { if (ba(), uo.current = os, fo) { for (var i = ho.memoizedState; null !== i;) { var r = i.queue; null !== r && (r.pending = null), i = i.next } fo = !1 } if (Io = 0, po = Ao = ho = null, mo = !1, vo = 0, Sl.current = null, null === n || null === n.return) { Fl = 1, Nl = t, Vl = null; break } e: { var o = e, s = n.return, l = n, g = t; if (t = kl, l.flags |= 32768, null !== g && "object" === typeof g && "function" === typeof g.then) { var c = g, u = l, C = u.tag; if (0 === (1 & u.mode) && (0 === C || 11 === C || 15 === C)) { var d = u.alternate; d ? (u.updateQueue = d.updateQueue, u.memoizedState = d.memoizedState, u.lanes = d.lanes) : (u.updateQueue = null, u.memoizedState = null) } var I = ps(s); if (null !== I) { I.flags &= -257, fs(I, s, l, 0, t), 1 & I.mode && As(o, c, t), g = c; var h = (t = I).updateQueue; if (null === h) { var A = new Set; A.add(g), t.updateQueue = A } else h.add(g); break e } if (0 === (1 & t)) { As(o, c, t), Ag(); break e } g = Error(a(426)) } else if (ra && 1 & l.mode) { var p = ps(s); if (null !== p) { 0 === (65536 & p.flags) && (p.flags |= 256), fs(p, s, l, 0, t), Ia(cs(g, l)); break e } } o = g = cs(g, l), 4 !== Fl && (Fl = 2), null === Ll ? Ll = [o] : Ll.push(o), o = s; do { switch (o.tag) { case 3: o.flags |= 65536, t &= -t, o.lanes |= t, Na(o, Is(0, g, t)); break e; case 1: l = g; var f = o.type, m = o.stateNode; if (0 === (128 & o.flags) && ("function" === typeof f.getDerivedStateFromError || null !== m && "function" === typeof m.componentDidCatch && (null === Pl || !Pl.has(m)))) { o.flags |= 65536, t &= -t, o.lanes |= t, Na(o, hs(o, l, t)); break e } }o = o.return } while (null !== o) } bg(n) } catch (v) { t = v, Vl === n && null !== n && (Vl = n = n.return); continue } break } } function hg() { var e = wl.current; return wl.current = os, null === e ? os : e } function Ag() { 0 !== Fl && 3 !== Fl && 2 !== Fl || (Fl = 4), null === Wl || 0 === (268435455 & Xl) && 0 === (268435455 & Yl) || lg(Wl, kl) } function pg(e, t) { var n = xl; xl |= 2; var i = hg(); for (Wl === e && kl === t || (_l = null, dg(e, t)); ;)try { fg(); break } catch (r) { Ig(e, r) } if (ba(), xl = n, wl.current = i, null !== Vl) throw Error(a(261)); return Wl = null, kl = 0, Fl } function fg() { for (; null !== Vl;)vg(Vl) } function mg() { for (; null !== Vl && !Oe();)vg(Vl) } function vg(e) { var t = Bl(e.alternate, e, Hl); e.memoizedProps = e.pendingProps, null === t ? bg(e) : Vl = t, Sl.current = null } function bg(e) { var t = e; do { var n = t.alternate; if (e = t.return, 0 === (32768 & t.flags)) { if (null !== (n = Js(n, t, Hl))) return void (Vl = n) } else { if (null !== (n = Os(n, t))) return n.flags &= 32767, void (Vl = n); if (null === e) return Fl = 6, void (Vl = null); e.flags |= 32768, e.subtreeFlags = 0, e.deletions = null } if (null !== (t = t.sibling)) return void (Vl = t); Vl = t = e } while (null !== t); 0 === Fl && (Fl = 5) } function yg(e, t, n) { var i = mt, r = Rl.transition; try { Rl.transition = null, mt = 1, function (e, t, n, i) { do { Gg() } while (null !== Ol); if (0 !== (6 & xl)) throw Error(a(327)); n = e.finishedWork; var r = e.finishedLanes; if (null === n) return null; if (e.finishedWork = null, e.finishedLanes = 0, n === e.current) throw Error(a(177)); e.callbackNode = null, e.callbackPriority = 0; var o = n.lanes | n.childLanes; if (function (e, t) { var n = e.pendingLanes & ~t; e.pendingLanes = t, e.suspendedLanes = 0, e.pingedLanes = 0, e.expiredLanes &= t, e.mutableReadLanes &= t, e.entangledLanes &= t, t = e.entanglements; var i = e.eventTimes; for (e = e.expirationTimes; 0 < n;) { var r = 31 - ot(n), a = 1 << r; t[r] = 0, i[r] = -1, e[r] = -1, n &= ~a } }(e, o), e === Wl && (Vl = Wl = null, kl = 0), 0 === (2064 & n.subtreeFlags) && 0 === (2064 & n.flags) || Jl || (Jl = !0, Wg(tt, (function () { return Gg(), null }))), o = 0 !== (15990 & n.flags), 0 !== (15990 & n.subtreeFlags) || o) { o = Rl.transition, Rl.transition = null; var s = mt; mt = 1; var l = xl; xl |= 4, Sl.current = null, function (e, t) { if (er = _t, di(e = Ci())) { if ("selectionStart" in e) var n = { start: e.selectionStart, end: e.selectionEnd }; else e: { var i = (n = (n = e.ownerDocument) && n.defaultView || window).getSelection && n.getSelection(); if (i && 0 !== i.rangeCount) { n = i.anchorNode; var r = i.anchorOffset, o = i.focusNode; i = i.focusOffset; try { n.nodeType, o.nodeType } catch (b) { n = null; break e } var s = 0, l = -1, g = -1, c = 0, u = 0, C = e, d = null; t: for (; ;) { for (var I; C !== n || 0 !== r && 3 !== C.nodeType || (l = s + r), C !== o || 0 !== i && 3 !== C.nodeType || (g = s + i), 3 === C.nodeType && (s += C.nodeValue.length), null !== (I = C.firstChild);)d = C, C = I; for (; ;) { if (C === e) break t; if (d === n && ++c === r && (l = s), d === o && ++u === i && (g = s), null !== (I = C.nextSibling)) break; d = (C = d).parentNode } C = I } n = -1 === l || -1 === g ? null : { start: l, end: g } } else n = null } n = n || { start: 0, end: 0 } } else n = null; for (tr = { focusedElem: e, selectionRange: n }, _t = !1, $s = t; null !== $s;)if (e = (t = $s).child, 0 !== (1028 & t.subtreeFlags) && null !== e) e.return = t, $s = e; else for (; null !== $s;) { t = $s; try { var h = t.alternate; if (0 !== (1024 & t.flags)) switch (t.tag) { case 0: case 11: case 15: case 5: case 6: case 4: case 17: break; case 1: if (null !== h) { var A = h.memoizedProps, p = h.memoizedState, f = t.stateNode, m = f.getSnapshotBeforeUpdate(t.elementType === t.type ? A : Aa(t.type, A), p); f.__reactInternalSnapshotBeforeUpdate = m } break; case 3: var v = t.stateNode.containerInfo; 1 === v.nodeType ? v.textContent = "" : 9 === v.nodeType && v.documentElement && v.removeChild(v.documentElement); break; default: throw Error(a(163)) } } catch (b) { Zg(t, t.return, b) } if (null !== (e = t.sibling)) { e.return = t.return, $s = e; break } $s = t.return } h = nl, nl = !1 }(e, n), pl(n, e), Ii(tr), _t = !!er, tr = er = null, e.current = n, ml(n, e, r), je(), xl = l, mt = s, Rl.transition = o } else e.current = n; if (Jl && (Jl = !1, Ol = e, jl = r), o = e.pendingLanes, 0 === o && (Pl = null), function (e) { if (at && "function" === typeof at.onCommitFiberRoot) try { at.onCommitFiberRoot(rt, e, void 0, 128 === (128 & e.current.flags)) } catch (t) { } }(n.stateNode), rg(e, Qe()), null !== t) for (i = e.onRecoverableError, n = 0; n < t.length; n++)r = t[n], i(r.value, { componentStack: r.stack, digest: r.digest }); if (Ul) throw Ul = !1, e = Dl, Dl = null, e; 0 !== (1 & jl) && 0 !== e.tag && Gg(), o = e.pendingLanes, 0 !== (1 & o) ? e === ql ? Ql++ : (Ql = 0, ql = e) : Ql = 0, Er() }(e, t, n, i) } finally { Rl.transition = r, mt = i } return null } function Gg() { if (null !== Ol) { var e = vt(jl), t = Rl.transition, n = mt; try { if (Rl.transition = null, mt = 16 > e ? 16 : e, null === Ol) var i = !1; else { if (e = Ol, Ol = null, jl = 0, 0 !== (6 & xl)) throw Error(a(331)); var r = xl; for (xl |= 4, $s = e.current; null !== $s;) { var o = $s, s = o.child; if (0 !== (16 & $s.flags)) { var l = o.deletions; if (null !== l) { for (var g = 0; g < l.length; g++) { var c = l[g]; for ($s = c; null !== $s;) { var u = $s; switch (u.tag) { case 0: case 11: case 15: il(8, u, o) }var C = u.child; if (null !== C) C.return = u, $s = C; else for (; null !== $s;) { var d = (u = $s).sibling, I = u.return; if (ol(u), u === c) { $s = null; break } if (null !== d) { d.return = I, $s = d; break } $s = I } } } var h = o.alternate; if (null !== h) { var A = h.child; if (null !== A) { h.child = null; do { var p = A.sibling; A.sibling = null, A = p } while (null !== A) } } $s = o } } if (0 !== (2064 & o.subtreeFlags) && null !== s) s.return = o, $s = s; else e: for (; null !== $s;) { if (0 !== (2048 & (o = $s).flags)) switch (o.tag) { case 0: case 11: case 15: il(9, o, o.return) }var f = o.sibling; if (null !== f) { f.return = o.return, $s = f; break e } $s = o.return } } var m = e.current; for ($s = m; null !== $s;) { var v = (s = $s).child; if (0 !== (2064 & s.subtreeFlags) && null !== v) v.return = s, $s = v; else e: for (s = m; null !== $s;) { if (0 !== (2048 & (l = $s).flags)) try { switch (l.tag) { case 0: case 11: case 15: rl(9, l) } } catch (y) { Zg(l, l.return, y) } if (l === s) { $s = null; break e } var b = l.sibling; if (null !== b) { b.return = l.return, $s = b; break e } $s = l.return } } if (xl = r, Er(), at && "function" === typeof at.onPostCommitFiberRoot) try { at.onPostCommitFiberRoot(rt, e) } catch (y) { } i = !0 } return i } finally { mt = n, Rl.transition = t } } return !1 } function Bg(e, t, n) { e = Ma(e, t = Is(0, t = cs(n, t), 1), 1), t = tg(), null !== e && (pt(e, 1, t), rg(e, t)) } function Zg(e, t, n) { if (3 === e.tag) Bg(e, e, n); else for (; null !== t;) { if (3 === t.tag) { Bg(t, e, n); break } if (1 === t.tag) { var i = t.stateNode; if ("function" === typeof t.type.getDerivedStateFromError || "function" === typeof i.componentDidCatch && (null === Pl || !Pl.has(i))) { t = Ma(t, e = hs(t, e = cs(n, e), 1), 1), e = tg(), null !== t && (pt(t, 1, e), rg(t, e)); break } } t = t.return } } function wg(e, t, n) { var i = e.pingCache; null !== i && i.delete(t), t = tg(), e.pingedLanes |= e.suspendedLanes & n, Wl === e && (kl & n) === n && (4 === Fl || 3 === Fl && (130023424 & kl) === kl && 500 > Qe() - El ? dg(e, 0) : Kl |= n), rg(e, t) } function Sg(e, t) { 0 === t && (0 === (1 & e.mode) ? t = 1 : (t = ct, 0 === (130023424 & (ct <<= 1)) && (ct = 4194304))); var n = tg(); null !== (e = xa(e, t)) && (pt(e, t, n), rg(e, n)) } function Rg(e) { var t = e.memoizedState, n = 0; null !== t && (n = t.retryLane), Sg(e, n) } function xg(e, t) { var n = 0; switch (e.tag) { case 13: var i = e.stateNode, r = e.memoizedState; null !== r && (n = r.retryLane); break; case 19: i = e.stateNode; break; default: throw Error(a(314)) }null !== i && i.delete(t), Sg(e, n) } function Wg(e, t) { return Pe(e, t) } function Vg(e, t, n, i) { this.tag = e, this.key = n, this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null, this.index = 0, this.ref = null, this.pendingProps = t, this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null, this.mode = i, this.subtreeFlags = this.flags = 0, this.deletions = null, this.childLanes = this.lanes = 0, this.alternate = null } function kg(e, t, n, i) { return new Vg(e, t, n, i) } function Hg(e) { return !(!(e = e.prototype) || !e.isReactComponent) } function Mg(e, t) { var n = e.alternate; return null === n ? ((n = kg(e.tag, t, e.key, e.mode)).elementType = e.elementType, n.type = e.type, n.stateNode = e.stateNode, n.alternate = e, e.alternate = n) : (n.pendingProps = t, n.type = e.type, n.flags = 0, n.subtreeFlags = 0, n.deletions = null), n.flags = 14680064 & e.flags, n.childLanes = e.childLanes, n.lanes = e.lanes, n.child = e.child, n.memoizedProps = e.memoizedProps, n.memoizedState = e.memoizedState, n.updateQueue = e.updateQueue, t = e.dependencies, n.dependencies = null === t ? null : { lanes: t.lanes, firstContext: t.firstContext }, n.sibling = e.sibling, n.index = e.index, n.ref = e.ref, n } function Fg(e, t, n, i, r, o) { var s = 2; if (i = e, "function" === typeof e) Hg(e) && (s = 1); else if ("string" === typeof e) s = 5; else e: switch (e) { case G: return Ng(n.children, r, o, t); case B: s = 8, r |= 8; break; case Z: return (e = kg(12, n, t, 2 | r)).elementType = Z, e.lanes = o, e; case x: return (e = kg(13, n, t, r)).elementType = x, e.lanes = o, e; case W: return (e = kg(19, n, t, r)).elementType = W, e.lanes = o, e; case H: return Xg(n, r, o, t); default: if ("object" === typeof e && null !== e) switch (e.$$typeof) { case w: s = 10; break e; case S: s = 9; break e; case R: s = 11; break e; case V: s = 14; break e; case k: s = 16, i = null; break e }throw Error(a(130, null == e ? e : typeof e, "")) }return (t = kg(s, n, t, r)).elementType = e, t.type = i, t.lanes = o, t } function Ng(e, t, n, i) { return (e = kg(7, e, i, t)).lanes = n, e } function Xg(e, t, n, i) { return (e = kg(22, e, i, t)).elementType = H, e.lanes = n, e.stateNode = { isHidden: !1 }, e } function Yg(e, t, n) { return (e = kg(6, e, null, t)).lanes = n, e } function Kg(e, t, n) { return (t = kg(4, null !== e.children ? e.children : [], e.key, t)).lanes = n, t.stateNode = { containerInfo: e.containerInfo, pendingChildren: null, implementation: e.implementation }, t } function Lg(e, t, n, i, r) { this.tag = t, this.containerInfo = e, this.finishedWork = this.pingCache = this.current = this.pendingChildren = null, this.timeoutHandle = -1, this.callbackNode = this.pendingContext = this.context = null, this.callbackPriority = 0, this.eventTimes = At(0), this.expirationTimes = At(-1), this.entangledLanes = this.finishedLanes = this.mutableReadLanes = this.expiredLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0, this.entanglements = At(0), this.identifierPrefix = i, this.onRecoverableError = r, this.mutableSourceEagerHydrationData = null } function zg(e, t, n, i, r, a, o, s, l) { return e = new Lg(e, t, n, s, l), 1 === t ? (t = 1, !0 === a && (t |= 8)) : t = 0, a = kg(3, null, null, t), e.current = a, a.stateNode = e, a.memoizedState = { element: i, isDehydrated: n, cache: null, transitions: null, pendingSuspenseBoundaries: null }, Va(a), e } function Eg(e) { if (!e) return Sr; e: { if (Ee(e = e._reactInternals) !== e || 1 !== e.tag) throw Error(a(170)); var t = e; do { switch (t.tag) { case 3: t = t.stateNode.context; break e; case 1: if (kr(t.type)) { t = t.stateNode.__reactInternalMemoizedMergedChildContext; break e } }t = t.return } while (null !== t); throw Error(a(171)) } if (1 === e.tag) { var n = e.type; if (kr(n)) return Fr(e, n, t) } return t } function Tg(e, t, n, i, r, a, o, s, l) { return (e = zg(n, i, !0, e, 0, a, 0, s, l)).context = Eg(null), n = e.current, (a = Ha(i = tg(), r = ng(n))).callback = void 0 !== t && null !== t ? t : null, Ma(n, a, r), e.current.lanes = r, pt(e, r, i), rg(e, i), e } function _g(e, t, n, i) { var r = t.current, a = tg(), o = ng(r); return n = Eg(n), null === t.context ? t.context = n : t.pendingContext = n, (t = Ha(a, o)).payload = { element: e }, null !== (i = void 0 === i ? null : i) && (t.callback = i), null !== (e = Ma(r, t, o)) && (ig(e, r, o, a), Fa(e, r, o)), o } function Ug(e) { return (e = e.current).child ? (e.child.tag, e.child.stateNode) : null } function Dg(e, t) { if (null !== (e = e.memoizedState) && null !== e.dehydrated) { var n = e.retryLane; e.retryLane = 0 !== n && n < t ? n : t } } function Pg(e, t) { Dg(e, t), (e = e.alternate) && Dg(e, t) } Bl = function (e, t, n) { if (null !== e) if (e.memoizedProps !== t.pendingProps || xr.current) vs = !0; else { if (0 === (e.lanes & n) && 0 === (128 & t.flags)) return vs = !1, function (e, t, n) { switch (t.tag) { case 3: Ws(t), da(); break; case 5: ao(t); break; case 1: kr(t.type) && Nr(t); break; case 4: io(t, t.stateNode.containerInfo); break; case 10: var i = t.type._context, r = t.memoizedProps.value; wr(pa, i._currentValue), i._currentValue = r; break; case 13: if (null !== (i = t.memoizedState)) return null !== i.dehydrated ? (wr(so, 1 & so.current), t.flags |= 128, null) : 0 !== (n & t.child.childLanes) ? Ys(e, t, n) : (wr(so, 1 & so.current), null !== (e = Us(e, t, n)) ? e.sibling : null); wr(so, 1 & so.current); break; case 19: if (i = 0 !== (n & t.childLanes), 0 !== (128 & e.flags)) { if (i) return Ts(e, t, n); t.flags |= 128 } if (null !== (r = t.memoizedState) && (r.rendering = null, r.tail = null, r.lastEffect = null), wr(so, so.current), i) break; return null; case 22: case 23: return t.lanes = 0, Zs(e, t, n) }return Us(e, t, n) }(e, t, n); vs = 0 !== (131072 & e.flags) } else vs = !1, ra && 0 !== (1048576 & t.flags) && $r(t, Dr, t.index); switch (t.lanes = 0, t.tag) { case 2: var i = t.type; _s(e, t), e = t.pendingProps; var r = Vr(t, Rr.current); Ba(t, n), r = Bo(null, t, i, e, r, n); var o = Zo(); return t.flags |= 1, "object" === typeof r && null !== r && "function" === typeof r.render && void 0 === r.$$typeof ? (t.tag = 1, t.memoizedState = null, t.updateQueue = null, kr(i) ? (o = !0, Nr(t)) : o = !1, t.memoizedState = null !== r.state && void 0 !== r.state ? r.state : null, Va(t), r.updater = za, t.stateNode = r, r._reactInternals = t, Ua(t, i, e, n), t = xs(null, t, i, !0, o, n)) : (t.tag = 0, ra && o && ea(t), bs(null, t, r, n), t = t.child), t; case 16: i = t.elementType; e: { switch (_s(e, t), e = t.pendingProps, i = (r = i._init)(i._payload), t.type = i, r = t.tag = function (e) { if ("function" === typeof e) return Hg(e) ? 1 : 0; if (void 0 !== e && null !== e) { if ((e = e.$$typeof) === R) return 11; if (e === V) return 14 } return 2 }(i), e = Aa(i, e), r) { case 0: t = Ss(null, t, i, e, n); break e; case 1: t = Rs(null, t, i, e, n); break e; case 11: t = ys(null, t, i, e, n); break e; case 14: t = Gs(null, t, i, Aa(i.type, e), n); break e }throw Error(a(306, i, "")) } return t; case 0: return i = t.type, r = t.pendingProps, Ss(e, t, i, r = t.elementType === i ? r : Aa(i, r), n); case 1: return i = t.type, r = t.pendingProps, Rs(e, t, i, r = t.elementType === i ? r : Aa(i, r), n); case 3: e: { if (Ws(t), null === e) throw Error(a(387)); i = t.pendingProps, r = (o = t.memoizedState).element, ka(e, t), Xa(t, i, null, n); var s = t.memoizedState; if (i = s.element, o.isDehydrated) { if (o = { element: i, isDehydrated: !1, cache: s.cache, pendingSuspenseBoundaries: s.pendingSuspenseBoundaries, transitions: s.transitions }, t.updateQueue.baseState = o, t.memoizedState = o, 256 & t.flags) { t = Vs(e, t, i, n, r = cs(Error(a(423)), t)); break e } if (i !== r) { t = Vs(e, t, i, n, r = cs(Error(a(424)), t)); break e } for (ia = gr(t.stateNode.containerInfo.firstChild), na = t, ra = !0, aa = null, n = Qa(t, null, i, n), t.child = n; n;)n.flags = -3 & n.flags | 4096, n = n.sibling } else { if (da(), i === r) { t = Us(e, t, n); break e } bs(e, t, i, n) } t = t.child } return t; case 5: return ao(t), null === e && ga(t), i = t.type, r = t.pendingProps, o = null !== e ? e.memoizedProps : null, s = r.children, nr(i, r) ? s = null : null !== o && nr(i, o) && (t.flags |= 32), ws(e, t), bs(e, t, s, n), t.child; case 6: return null === e && ga(t), null; case 13: return Ys(e, t, n); case 4: return io(t, t.stateNode.containerInfo), i = t.pendingProps, null === e ? t.child = ja(t, null, i, n) : bs(e, t, i, n), t.child; case 11: return i = t.type, r = t.pendingProps, ys(e, t, i, r = t.elementType === i ? r : Aa(i, r), n); case 7: return bs(e, t, t.pendingProps, n), t.child; case 8: case 12: return bs(e, t, t.pendingProps.children, n), t.child; case 10: e: { if (i = t.type._context, r = t.pendingProps, o = t.memoizedProps, s = r.value, wr(pa, i._currentValue), i._currentValue = s, null !== o) if (si(o.value, s)) { if (o.children === r.children && !xr.current) { t = Us(e, t, n); break e } } else for (null !== (o = t.child) && (o.return = t); null !== o;) { var l = o.dependencies; if (null !== l) { s = o.child; for (var g = l.firstContext; null !== g;) { if (g.context === i) { if (1 === o.tag) { (g = Ha(-1, n & -n)).tag = 2; var c = o.updateQueue; if (null !== c) { var u = (c = c.shared).pending; null === u ? g.next = g : (g.next = u.next, u.next = g), c.pending = g } } o.lanes |= n, null !== (g = o.alternate) && (g.lanes |= n), Ga(o.return, n, t), l.lanes |= n; break } g = g.next } } else if (10 === o.tag) s = o.type === t.type ? null : o.child; else if (18 === o.tag) { if (null === (s = o.return)) throw Error(a(341)); s.lanes |= n, null !== (l = s.alternate) && (l.lanes |= n), Ga(s, n, t), s = o.sibling } else s = o.child; if (null !== s) s.return = o; else for (s = o; null !== s;) { if (s === t) { s = null; break } if (null !== (o = s.sibling)) { o.return = s.return, s = o; break } s = s.return } o = s } bs(e, t, r.children, n), t = t.child } return t; case 9: return r = t.type, i = t.pendingProps.children, Ba(t, n), i = i(r = Za(r)), t.flags |= 1, bs(e, t, i, n), t.child; case 14: return r = Aa(i = t.type, t.pendingProps), Gs(e, t, i, r = Aa(i.type, r), n); case 15: return Bs(e, t, t.type, t.pendingProps, n); case 17: return i = t.type, r = t.pendingProps, r = t.elementType === i ? r : Aa(i, r), _s(e, t), t.tag = 1, kr(i) ? (e = !0, Nr(t)) : e = !1, Ba(t, n), Ta(t, i, r), Ua(t, i, r, n), xs(null, t, i, !0, e, n); case 19: return Ts(e, t, n); case 22: return Zs(e, t, n) }throw Error(a(156, t.tag)) }; var Jg = "function" === typeof reportError ? reportError : function (e) { console.error(e) }; function Og(e) { this._internalRoot = e } function jg(e) { this._internalRoot = e } function Qg(e) { return !(!e || 1 !== e.nodeType && 9 !== e.nodeType && 11 !== e.nodeType) } function qg(e) { return !(!e || 1 !== e.nodeType && 9 !== e.nodeType && 11 !== e.nodeType && (8 !== e.nodeType || " react-mount-point-unstable " !== e.nodeValue)) } function $g() { } function ec(e, t, n, i, r) { var a = n._reactRootContainer; if (a) { var o = a; if ("function" === typeof r) { var s = r; r = function () { var e = Ug(o); s.call(e) } } _g(t, o, e, r) } else o = function (e, t, n, i, r) { if (r) { if ("function" === typeof i) { var a = i; i = function () { var e = Ug(o); a.call(e) } } var o = Tg(t, i, e, 0, null, !1, 0, "", $g); return e._reactRootContainer = o, e[Ir] = o.current, Ei(8 === e.nodeType ? e.parentNode : e), ug(), o } for (; r = e.lastChild;)e.removeChild(r); if ("function" === typeof i) { var s = i; i = function () { var e = Ug(l); s.call(e) } } var l = zg(e, 0, !1, null, 0, !1, 0, "", $g); return e._reactRootContainer = l, e[Ir] = l.current, Ei(8 === e.nodeType ? e.parentNode : e), ug((function () { _g(t, l, n, i) })), l }(n, t, e, r, i); return Ug(o) } jg.prototype.render = Og.prototype.render = function (e) { var t = this._internalRoot; if (null === t) throw Error(a(409)); _g(e, t, null, null) }, jg.prototype.unmount = Og.prototype.unmount = function () { var e = this._internalRoot; if (null !== e) { this._internalRoot = null; var t = e.containerInfo; ug((function () { _g(null, e, null, null) })), t[Ir] = null } }, jg.prototype.unstable_scheduleHydration = function (e) { if (e) { var t = Bt(); e = { blockedOn: null, target: e, priority: t }; for (var n = 0; n < Ht.length && 0 !== t && t < Ht[n].priority; n++); Ht.splice(n, 0, e), 0 === n && Xt(e) } }, bt = function (e) { switch (e.tag) { case 3: var t = e.stateNode; if (t.current.memoizedState.isDehydrated) { var n = ut(t.pendingLanes); 0 !== n && (ft(t, 1 | n), rg(t, Qe()), 0 === (6 & xl) && (Tl = Qe() + 500, Er())) } break; case 13: ug((function () { var t = xa(e, 1); if (null !== t) { var n = tg(); ig(t, e, 1, n) } })), Pg(e, 1) } }, yt = function (e) { if (13 === e.tag) { var t = xa(e, 134217728); if (null !== t) ig(t, e, 134217728, tg()); Pg(e, 134217728) } }, Gt = function (e) { if (13 === e.tag) { var t = ng(e), n = xa(e, t); if (null !== n) ig(n, e, t, tg()); Pg(e, t) } }, Bt = function () { return mt }, Zt = function (e, t) { var n = mt; try { return mt = e, t() } finally { mt = n } }, ye = function (e, t, n) { switch (t) { case "input": if (q(e, n), t = n.name, "radio" === n.type && null != t) { for (n = e; n.parentNode;)n = n.parentNode; for (n = n.querySelectorAll("input[name=" + JSON.stringify("" + t) + '][type="radio"]'), t = 0; t < n.length; t++) { var i = n[t]; if (i !== e && i.form === e.form) { var r = br(i); if (!r) throw Error(a(90)); P(i), q(i, r) } } } break; case "textarea": ae(e, n); break; case "select": null != (t = n.value) && ne(e, !!n.multiple, t, !1) } }, Re = cg, xe = ug; var tc = { usingClientEntryPoint: !1, Events: [mr, vr, br, we, Se, cg] }, nc = { findFiberByHostInstance: fr, bundleType: 0, version: "18.2.0", rendererPackageName: "react-dom" }, ic = { bundleType: nc.bundleType, version: nc.version, rendererPackageName: nc.rendererPackageName, rendererConfig: nc.rendererConfig, overrideHookState: null, overrideHookStateDeletePath: null, overrideHookStateRenamePath: null, overrideProps: null, overridePropsDeletePath: null, overridePropsRenamePath: null, setErrorHandler: null, setSuspenseHandler: null, scheduleUpdate: null, currentDispatcherRef: v.ReactCurrentDispatcher, findHostInstanceByFiber: function (e) { return null === (e = Ue(e)) ? null : e.stateNode }, findFiberByHostInstance: nc.findFiberByHostInstance || function () { return null }, findHostInstancesForRefresh: null, scheduleRefresh: null, scheduleRoot: null, setRefreshHandler: null, getCurrentFiber: null, reconcilerVersion: "18.2.0-next-9e3b772b8-20220608" }; if ("undefined" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) { var rc = __REACT_DEVTOOLS_GLOBAL_HOOK__; if (!rc.isDisabled && rc.supportsFiber) try { rt = rc.inject(ic), at = rc } catch (ce) { } } t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = tc, t.createPortal = function (e, t) { var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null; if (!Qg(t)) throw Error(a(200)); return function (e, t, n) { var i = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null; return { $$typeof: y, key: null == i ? null : "" + i, children: e, containerInfo: t, implementation: n } }(e, t, null, n) }, t.createRoot = function (e, t) { if (!Qg(e)) throw Error(a(299)); var n = !1, i = "", r = Jg; return null !== t && void 0 !== t && (!0 === t.unstable_strictMode && (n = !0), void 0 !== t.identifierPrefix && (i = t.identifierPrefix), void 0 !== t.onRecoverableError && (r = t.onRecoverableError)), t = zg(e, 1, !1, null, 0, n, 0, i, r), e[Ir] = t.current, Ei(8 === e.nodeType ? e.parentNode : e), new Og(t) }, t.findDOMNode = function (e) { if (null == e) return null; if (1 === e.nodeType) return e; var t = e._reactInternals; if (void 0 === t) { if ("function" === typeof e.render) throw Error(a(188)); throw e = Object.keys(e).join(","), Error(a(268, e)) } return e = null === (e = Ue(t)) ? null : e.stateNode }, t.flushSync = function (e) { return ug(e) }, t.hydrate = function (e, t, n) { if (!qg(t)) throw Error(a(200)); return ec(null, e, t, !0, n) }, t.hydrateRoot = function (e, t, n) { if (!Qg(e)) throw Error(a(405)); var i = null != n && n.hydratedSources || null, r = !1, o = "", s = Jg; if (null !== n && void 0 !== n && (!0 === n.unstable_strictMode && (r = !0), void 0 !== n.identifierPrefix && (o = n.identifierPrefix), void 0 !== n.onRecoverableError && (s = n.onRecoverableError)), t = Tg(t, null, e, 1, null != n ? n : null, r, 0, o, s), e[Ir] = t.current, Ei(e), i) for (e = 0; e < i.length; e++)r = (r = (n = i[e])._getVersion)(n._source), null == t.mutableSourceEagerHydrationData ? t.mutableSourceEagerHydrationData = [n, r] : t.mutableSourceEagerHydrationData.push(n, r); return new jg(t) }, t.render = function (e, t, n) { if (!qg(t)) throw Error(a(200)); return ec(null, e, t, !1, n) }, t.unmountComponentAtNode = function (e) { if (!qg(e)) throw Error(a(40)); return !!e._reactRootContainer && (ug((function () { ec(null, null, e, !1, (function () { e._reactRootContainer = null, e[Ir] = null })) })), !0) }, t.unstable_batchedUpdates = cg, t.unstable_renderSubtreeIntoContainer = function (e, t, n, i) { if (!qg(n)) throw Error(a(200)); if (null == e || void 0 === e._reactInternals) throw Error(a(38)); return ec(e, t, n, !1, i) }, t.version = "18.2.0-next-9e3b772b8-20220608" }, 4164: function (e, t, n) { "use strict"; !function e() { if ("undefined" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ && "function" === typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE) try { __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e) } catch (t) { console.error(t) } }(), e.exports = n(4463) }, 67: function (e, t) { "use strict"; function n(e, t) { var n = e.length; e.push(t); e: for (; 0 < n;) { var i = n - 1 >>> 1, r = e[i]; if (!(0 < a(r, t))) break e; e[i] = t, e[n] = r, n = i } } function i(e) { return 0 === e.length ? null : e[0] } function r(e) { if (0 === e.length) return null; var t = e[0], n = e.pop(); if (n !== t) { e[0] = n; e: for (var i = 0, r = e.length, o = r >>> 1; i < o;) { var s = 2 * (i + 1) - 1, l = e[s], g = s + 1, c = e[g]; if (0 > a(l, n)) g < r && 0 > a(c, l) ? (e[i] = c, e[g] = n, i = g) : (e[i] = l, e[s] = n, i = s); else { if (!(g < r && 0 > a(c, n))) break e; e[i] = c, e[g] = n, i = g } } } return t } function a(e, t) { var n = e.sortIndex - t.sortIndex; return 0 !== n ? n : e.id - t.id } if ("object" === typeof performance && "function" === typeof performance.now) { var o = performance; t.unstable_now = function () { return o.now() } } else { var s = Date, l = s.now(); t.unstable_now = function () { return s.now() - l } } var g = [], c = [], u = 1, C = null, d = 3, I = !1, h = !1, A = !1, p = "function" === typeof setTimeout ? setTimeout : null, f = "function" === typeof clearTimeout ? clearTimeout : null, m = "undefined" !== typeof setImmediate ? setImmediate : null; function v(e) { for (var t = i(c); null !== t;) { if (null === t.callback) r(c); else { if (!(t.startTime <= e)) break; r(c), t.sortIndex = t.expirationTime, n(g, t) } t = i(c) } } function b(e) { if (A = !1, v(e), !h) if (null !== i(g)) h = !0, H(y); else { var t = i(c); null !== t && M(b, t.startTime - e) } } function y(e, n) { h = !1, A && (A = !1, f(w), w = -1), I = !0; var a = d; try { for (v(n), C = i(g); null !== C && (!(C.expirationTime > n) || e && !x());) { var o = C.callback; if ("function" === typeof o) { C.callback = null, d = C.priorityLevel; var s = o(C.expirationTime <= n); n = t.unstable_now(), "function" === typeof s ? C.callback = s : C === i(g) && r(g), v(n) } else r(g); C = i(g) } if (null !== C) var l = !0; else { var u = i(c); null !== u && M(b, u.startTime - n), l = !1 } return l } finally { C = null, d = a, I = !1 } } "undefined" !== typeof navigator && void 0 !== navigator.scheduling && void 0 !== navigator.scheduling.isInputPending && navigator.scheduling.isInputPending.bind(navigator.scheduling); var G, B = !1, Z = null, w = -1, S = 5, R = -1; function x() { return !(t.unstable_now() - R < S) } function W() { if (null !== Z) { var e = t.unstable_now(); R = e; var n = !0; try { n = Z(!0, e) } finally { n ? G() : (B = !1, Z = null) } } else B = !1 } if ("function" === typeof m) G = function () { m(W) }; else if ("undefined" !== typeof MessageChannel) { var V = new MessageChannel, k = V.port2; V.port1.onmessage = W, G = function () { k.postMessage(null) } } else G = function () { p(W, 0) }; function H(e) { Z = e, B || (B = !0, G()) } function M(e, n) { w = p((function () { e(t.unstable_now()) }), n) } t.unstable_IdlePriority = 5, t.unstable_ImmediatePriority = 1, t.unstable_LowPriority = 4, t.unstable_NormalPriority = 3, t.unstable_Profiling = null, t.unstable_UserBlockingPriority = 2, t.unstable_cancelCallback = function (e) { e.callback = null }, t.unstable_continueExecution = function () { h || I || (h = !0, H(y)) }, t.unstable_forceFrameRate = function (e) { 0 > e || 125 < e ? console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported") : S = 0 < e ? Math.floor(1e3 / e) : 5 }, t.unstable_getCurrentPriorityLevel = function () { return d }, t.unstable_getFirstCallbackNode = function () { return i(g) }, t.unstable_next = function (e) { switch (d) { case 1: case 2: case 3: var t = 3; break; default: t = d }var n = d; d = t; try { return e() } finally { d = n } }, t.unstable_pauseExecution = function () { }, t.unstable_requestPaint = function () { }, t.unstable_runWithPriority = function (e, t) { switch (e) { case 1: case 2: case 3: case 4: case 5: break; default: e = 3 }var n = d; d = e; try { return t() } finally { d = n } }, t.unstable_scheduleCallback = function (e, r, a) { var o = t.unstable_now(); switch ("object" === typeof a && null !== a ? a = "number" === typeof (a = a.delay) && 0 < a ? o + a : o : a = o, e) { case 1: var s = -1; break; case 2: s = 250; break; case 5: s = 1073741823; break; case 4: s = 1e4; break; default: s = 5e3 }return e = { id: u++, callback: r, priorityLevel: e, startTime: a, expirationTime: s = a + s, sortIndex: -1 }, a > o ? (e.sortIndex = a, n(c, e), null === i(g) && e === i(c) && (A ? (f(w), w = -1) : A = !0, M(b, a - o))) : (e.sortIndex = s, n(g, e), h || I || (h = !0, H(y))), e }, t.unstable_shouldYield = x, t.unstable_wrapCallback = function (e) { var t = d; return function () { var n = d; d = t; try { return e.apply(this, arguments) } finally { d = n } } } }, 5585: function (e, t, n) { "use strict"; e.exports = n(67) }, 1372: function (e, t) { "use strict"; var n, i = Symbol.for("react.element"), r = Symbol.for("react.portal"), a = Symbol.for("react.fragment"), o = Symbol.for("react.strict_mode"), s = Symbol.for("react.profiler"), l = Symbol.for("react.provider"), g = Symbol.for("react.context"), c = Symbol.for("react.server_context"), u = Symbol.for("react.forward_ref"), C = Symbol.for("react.suspense"), d = Symbol.for("react.suspense_list"), I = Symbol.for("react.memo"), h = Symbol.for("react.lazy"), A = Symbol.for("react.offscreen"); function p(e) { if ("object" === typeof e && null !== e) { var t = e.$$typeof; switch (t) { case i: switch (e = e.type) { case a: case s: case o: case C: case d: return e; default: switch (e = e && e.$$typeof) { case c: case g: case u: case h: case I: case l: return e; default: return t } }case r: return t } } } n = Symbol.for("react.module.reference"), t.isValidElementType = function (e) { return "string" === typeof e || "function" === typeof e || e === a || e === s || e === o || e === C || e === d || e === A || "object" === typeof e && null !== e && (e.$$typeof === h || e.$$typeof === I || e.$$typeof === l || e.$$typeof === g || e.$$typeof === u || e.$$typeof === n || void 0 !== e.getModuleId) }, t.typeOf = p }, 7441: function (e, t, n) { "use strict"; e.exports = n(1372) }, 4976: function (e, t) { "use strict"; t.ConcurrentRoot = 1, t.ContinuousEventPriority = 4, t.DefaultEventPriority = 16, t.DiscreteEventPriority = 1 }, 3721: function (e, t, n) { e.exports = function (e) { var t = {}, i = n(2791), r = n(5296), a = Object.assign; function o(e) { for (var t = "https://reactjs.org/docs/error-decoder.html?invariant=" + e, n = 1; n < arguments.length; n++)t += "&args[]=" + encodeURIComponent(arguments[n]); return "Minified React error #" + e + "; visit " + t + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings." } var s = i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED, l = Symbol.for("react.element"), g = Symbol.for("react.portal"), c = Symbol.for("react.fragment"), u = Symbol.for("react.strict_mode"), C = Symbol.for("react.profiler"), d = Symbol.for("react.provider"), I = Symbol.for("react.context"), h = Symbol.for("react.forward_ref"), A = Symbol.for("react.suspense"), p = Symbol.for("react.suspense_list"), f = Symbol.for("react.memo"), m = Symbol.for("react.lazy"); Symbol.for("react.scope"), Symbol.for("react.debug_trace_mode"); var v = Symbol.for("react.offscreen"); Symbol.for("react.legacy_hidden"), Symbol.for("react.cache"), Symbol.for("react.tracing_marker"); var b = Symbol.iterator; function y(e) { return null === e || "object" !== typeof e ? null : "function" === typeof (e = b && e[b] || e["@@iterator"]) ? e : null } function G(e) { if (null == e) return null; if ("function" === typeof e) return e.displayName || e.name || null; if ("string" === typeof e) return e; switch (e) { case c: return "Fragment"; case g: return "Portal"; case C: return "Profiler"; case u: return "StrictMode"; case A: return "Suspense"; case p: return "SuspenseList" }if ("object" === typeof e) switch (e.$$typeof) { case I: return (e.displayName || "Context") + ".Consumer"; case d: return (e._context.displayName || "Context") + ".Provider"; case h: var t = e.render; return (e = e.displayName) || (e = "" !== (e = t.displayName || t.name || "") ? "ForwardRef(" + e + ")" : "ForwardRef"), e; case f: return null !== (t = e.displayName || null) ? t : G(e.type) || "Memo"; case m: t = e._payload, e = e._init; try { return G(e(t)) } catch (n) { } }return null } function B(e) { var t = e.type; switch (e.tag) { case 24: return "Cache"; case 9: return (t.displayName || "Context") + ".Consumer"; case 10: return (t._context.displayName || "Context") + ".Provider"; case 18: return "DehydratedFragment"; case 11: return e = (e = t.render).displayName || e.name || "", t.displayName || ("" !== e ? "ForwardRef(" + e + ")" : "ForwardRef"); case 7: return "Fragment"; case 5: return t; case 4: return "Portal"; case 3: return "Root"; case 6: return "Text"; case 16: return G(t); case 8: return t === u ? "StrictMode" : "Mode"; case 22: return "Offscreen"; case 12: return "Profiler"; case 21: return "Scope"; case 13: return "Suspense"; case 19: return "SuspenseList"; case 25: return "TracingMarker"; case 1: case 0: case 17: case 2: case 14: case 15: if ("function" === typeof t) return t.displayName || t.name || null; if ("string" === typeof t) return t }return null } function Z(e) { var t = e, n = e; if (e.alternate) for (; t.return;)t = t.return; else { e = t; do { 0 !== (4098 & (t = e).flags) && (n = t.return), e = t.return } while (e) } return 3 === t.tag ? n : null } function w(e) { if (Z(e) !== e) throw Error(o(188)) } function S(e) { var t = e.alternate; if (!t) { if (null === (t = Z(e))) throw Error(o(188)); return t !== e ? null : e } for (var n = e, i = t; ;) { var r = n.return; if (null === r) break; var a = r.alternate; if (null === a) { if (null !== (i = r.return)) { n = i; continue } break } if (r.child === a.child) { for (a = r.child; a;) { if (a === n) return w(r), e; if (a === i) return w(r), t; a = a.sibling } throw Error(o(188)) } if (n.return !== i.return) n = r, i = a; else { for (var s = !1, l = r.child; l;) { if (l === n) { s = !0, n = r, i = a; break } if (l === i) { s = !0, i = r, n = a; break } l = l.sibling } if (!s) { for (l = a.child; l;) { if (l === n) { s = !0, n = a, i = r; break } if (l === i) { s = !0, i = a, n = r; break } l = l.sibling } if (!s) throw Error(o(189)) } } if (n.alternate !== i) throw Error(o(190)) } if (3 !== n.tag) throw Error(o(188)); return n.stateNode.current === n ? e : t } function R(e) { return null !== (e = S(e)) ? x(e) : null } function x(e) { if (5 === e.tag || 6 === e.tag) return e; for (e = e.child; null !== e;) { var t = x(e); if (null !== t) return t; e = e.sibling } return null } function W(e) { if (5 === e.tag || 6 === e.tag) return e; for (e = e.child; null !== e;) { if (4 !== e.tag) { var t = W(e); if (null !== t) return t } e = e.sibling } return null } var V, k = Array.isArray, H = e.getPublicInstance, M = e.getRootHostContext, F = e.getChildHostContext, N = e.prepareForCommit, X = e.resetAfterCommit, Y = e.createInstance, K = e.appendInitialChild, L = e.finalizeInitialChildren, z = e.prepareUpdate, E = e.shouldSetTextContent, T = e.createTextInstance, _ = e.scheduleTimeout, U = e.cancelTimeout, D = e.noTimeout, P = e.isPrimaryRenderer, J = e.supportsMutation, O = e.supportsPersistence, j = e.supportsHydration, Q = e.getInstanceFromNode, q = e.preparePortalMount, $ = e.getCurrentEventPriority, ee = e.detachDeletedInstance, te = e.supportsMicrotasks, ne = e.scheduleMicrotask, ie = e.supportsTestSelectors, re = e.findFiberRoot, ae = e.getBoundingRect, oe = e.getTextContent, se = e.isHiddenSubtree, le = e.matchAccessibilityRole, ge = e.setFocusIfFocusable, ce = e.setupIntersectionObserver, ue = e.appendChild, Ce = e.appendChildToContainer, de = e.commitTextUpdate, Ie = e.commitMount, he = e.commitUpdate, Ae = e.insertBefore, pe = e.insertInContainerBefore, fe = e.removeChild, me = e.removeChildFromContainer, ve = e.resetTextContent, be = e.hideInstance, ye = e.hideTextInstance, Ge = e.unhideInstance, Be = e.unhideTextInstance, Ze = e.clearContainer, we = e.cloneInstance, Se = e.createContainerChildSet, Re = e.appendChildToContainerChildSet, xe = e.finalizeContainerChildren, We = e.replaceContainerChildren, Ve = e.cloneHiddenInstance, ke = e.cloneHiddenTextInstance, He = e.canHydrateInstance, Me = e.canHydrateTextInstance, Fe = e.canHydrateSuspenseInstance, Ne = e.isSuspenseInstancePending, Xe = e.isSuspenseInstanceFallback, Ye = e.registerSuspenseInstanceRetry, Ke = e.getNextHydratableSibling, Le = e.getFirstHydratableChild, ze = e.getFirstHydratableChildWithinContainer, Ee = e.getFirstHydratableChildWithinSuspenseInstance, Te = e.hydrateInstance, _e = e.hydrateTextInstance, Ue = e.hydrateSuspenseInstance, De = e.getNextHydratableInstanceAfterSuspenseInstance, Pe = e.commitHydratedContainer, Je = e.commitHydratedSuspenseInstance, Oe = e.clearSuspenseBoundary, je = e.clearSuspenseBoundaryFromContainer, Qe = e.shouldDeleteUnhydratedTailInstances, qe = e.didNotMatchHydratedContainerTextInstance, $e = e.didNotMatchHydratedTextInstance; function et(e) { if (void 0 === V) try { throw Error() } catch (n) { var t = n.stack.trim().match(/\n( *(at )?)/); V = t && t[1] || "" } return "\n" + V + e } var tt = !1; function nt(e, t) { if (!e || tt) return ""; tt = !0; var n = Error.prepareStackTrace; Error.prepareStackTrace = void 0; try { if (t) if (t = function () { throw Error() }, Object.defineProperty(t.prototype, "props", { set: function () { throw Error() } }), "object" === typeof Reflect && Reflect.construct) { try { Reflect.construct(t, []) } catch (g) { var i = g } Reflect.construct(e, [], t) } else { try { t.call() } catch (g) { i = g } e.call(t.prototype) } else { try { throw Error() } catch (g) { i = g } e() } } catch (g) { if (g && i && "string" === typeof g.stack) { for (var r = g.stack.split("\n"), a = i.stack.split("\n"), o = r.length - 1, s = a.length - 1; 1 <= o && 0 <= s && r[o] !== a[s];)s--; for (; 1 <= o && 0 <= s; o--, s--)if (r[o] !== a[s]) { if (1 !== o || 1 !== s) do { if (o--, 0 > --s || r[o] !== a[s]) { var l = "\n" + r[o].replace(" at new ", " at "); return e.displayName && l.includes("<anonymous>") && (l = l.replace("<anonymous>", e.displayName)), l } } while (1 <= o && 0 <= s); break } } } finally { tt = !1, Error.prepareStackTrace = n } return (e = e ? e.displayName || e.name : "") ? et(e) : "" } var it = Object.prototype.hasOwnProperty, rt = [], at = -1; function ot(e) { return { current: e } } function st(e) { 0 > at || (e.current = rt[at], rt[at] = null, at--) } function lt(e, t) { at++, rt[at] = e.current, e.current = t } var gt = {}, ct = ot(gt), ut = ot(!1), Ct = gt; function dt(e, t) { var n = e.type.contextTypes; if (!n) return gt; var i = e.stateNode; if (i && i.__reactInternalMemoizedUnmaskedChildContext === t) return i.__reactInternalMemoizedMaskedChildContext; var r, a = {}; for (r in n) a[r] = t[r]; return i && ((e = e.stateNode).__reactInternalMemoizedUnmaskedChildContext = t, e.__reactInternalMemoizedMaskedChildContext = a), a } function It(e) { return null !== (e = e.childContextTypes) && void 0 !== e } function ht() { st(ut), st(ct) } function At(e, t, n) { if (ct.current !== gt) throw Error(o(168)); lt(ct, t), lt(ut, n) } function pt(e, t, n) { var i = e.stateNode; if (t = t.childContextTypes, "function" !== typeof i.getChildContext) return n; for (var r in i = i.getChildContext()) if (!(r in t)) throw Error(o(108, B(e) || "Unknown", r)); return a({}, n, i) } function ft(e) { return e = (e = e.stateNode) && e.__reactInternalMemoizedMergedChildContext || gt, Ct = ct.current, lt(ct, e), lt(ut, ut.current), !0 } function mt(e, t, n) { var i = e.stateNode; if (!i) throw Error(o(169)); n ? (e = pt(e, t, Ct), i.__reactInternalMemoizedMergedChildContext = e, st(ut), st(ct), lt(ct, e)) : st(ut), lt(ut, n) } var vt = Math.clz32 ? Math.clz32 : function (e) { return 0 === (e >>>= 0) ? 32 : 31 - (bt(e) / yt | 0) | 0 }, bt = Math.log, yt = Math.LN2; var Gt = 64, Bt = 4194304; function Zt(e) { switch (e & -e) { case 1: return 1; case 2: return 2; case 4: return 4; case 8: return 8; case 16: return 16; case 32: return 32; case 64: case 128: case 256: case 512: case 1024: case 2048: case 4096: case 8192: case 16384: case 32768: case 65536: case 131072: case 262144: case 524288: case 1048576: case 2097152: return 4194240 & e; case 4194304: case 8388608: case 16777216: case 33554432: case 67108864: return 130023424 & e; case 134217728: return 134217728; case 268435456: return 268435456; case 536870912: return 536870912; case 1073741824: return 1073741824; default: return e } } function wt(e, t) { var n = e.pendingLanes; if (0 === n) return 0; var i = 0, r = e.suspendedLanes, a = e.pingedLanes, o = 268435455 & n; if (0 !== o) { var s = o & ~r; 0 !== s ? i = Zt(s) : 0 !== (a &= o) && (i = Zt(a)) } else 0 !== (o = n & ~r) ? i = Zt(o) : 0 !== a && (i = Zt(a)); if (0 === i) return 0; if (0 !== t && t !== i && 0 === (t & r) && ((r = i & -i) >= (a = t & -t) || 16 === r && 0 !== (4194240 & a))) return t; if (0 !== (4 & i) && (i |= 16 & n), 0 !== (t = e.entangledLanes)) for (e = e.entanglements, t &= i; 0 < t;)r = 1 << (n = 31 - vt(t)), i |= e[n], t &= ~r; return i } function St(e, t) { switch (e) { case 1: case 2: case 4: return t + 250; case 8: case 16: case 32: case 64: case 128: case 256: case 512: case 1024: case 2048: case 4096: case 8192: case 16384: case 32768: case 65536: case 131072: case 262144: case 524288: case 1048576: case 2097152: return t + 5e3; default: return -1 } } function Rt(e) { return 0 !== (e = -1073741825 & e.pendingLanes) ? e : 1073741824 & e ? 1073741824 : 0 } function xt(e) { for (var t = [], n = 0; 31 > n; n++)t.push(e); return t } function Wt(e, t, n) { e.pendingLanes |= t, 536870912 !== t && (e.suspendedLanes = 0, e.pingedLanes = 0), (e = e.eventTimes)[t = 31 - vt(t)] = n } function Vt(e, t) { var n = e.entangledLanes |= t; for (e = e.entanglements; n;) { var i = 31 - vt(n), r = 1 << i; r & t | e[i] & t && (e[i] |= t), n &= ~r } } var kt = 0; function Ht(e) { return 1 < (e &= -e) ? 4 < e ? 0 !== (268435455 & e) ? 16 : 536870912 : 4 : 1 } var Mt = r.unstable_scheduleCallback, Ft = r.unstable_cancelCallback, Nt = r.unstable_shouldYield, Xt = r.unstable_requestPaint, Yt = r.unstable_now, Kt = r.unstable_ImmediatePriority, Lt = r.unstable_UserBlockingPriority, zt = r.unstable_NormalPriority, Et = r.unstable_IdlePriority, Tt = null, _t = null; var Ut = "function" === typeof Object.is ? Object.is : function (e, t) { return e === t && (0 !== e || 1 / e === 1 / t) || e !== e && t !== t }, Dt = null, Pt = !1, Jt = !1; function Ot(e) { null === Dt ? Dt = [e] : Dt.push(e) } function jt() { if (!Jt && null !== Dt) { Jt = !0; var e = 0, t = kt; try { var n = Dt; for (kt = 1; e < n.length; e++) { var i = n[e]; do { i = i(!0) } while (null !== i) } Dt = null, Pt = !1 } catch (r) { throw null !== Dt && (Dt = Dt.slice(e + 1)), Mt(Kt, jt), r } finally { kt = t, Jt = !1 } } return null } var Qt = s.ReactCurrentBatchConfig; function qt(e, t) { if (Ut(e, t)) return !0; if ("object" !== typeof e || null === e || "object" !== typeof t || null === t) return !1; var n = Object.keys(e), i = Object.keys(t); if (n.length !== i.length) return !1; for (i = 0; i < n.length; i++) { var r = n[i]; if (!it.call(t, r) || !Ut(e[r], t[r])) return !1 } return !0 } function $t(e) { switch (e.tag) { case 5: return et(e.type); case 16: return et("Lazy"); case 13: return et("Suspense"); case 19: return et("SuspenseList"); case 0: case 2: case 15: return e = nt(e.type, !1); case 11: return e = nt(e.type.render, !1); case 1: return e = nt(e.type, !0); default: return "" } } function en(e, t) { if (e && e.defaultProps) { for (var n in t = a({}, t), e = e.defaultProps) void 0 === t[n] && (t[n] = e[n]); return t } return t } var tn = ot(null), nn = null, rn = null, an = null; function on() { an = rn = nn = null } function sn(e, t, n) { P ? (lt(tn, t._currentValue), t._currentValue = n) : (lt(tn, t._currentValue2), t._currentValue2 = n) } function ln(e) { var t = tn.current; st(tn), P ? e._currentValue = t : e._currentValue2 = t } function gn(e, t, n) { for (; null !== e;) { var i = e.alternate; if ((e.childLanes & t) !== t ? (e.childLanes |= t, null !== i && (i.childLanes |= t)) : null !== i && (i.childLanes & t) !== t && (i.childLanes |= t), e === n) break; e = e.return } } function cn(e, t) { nn = e, an = rn = null, null !== (e = e.dependencies) && null !== e.firstContext && (0 !== (e.lanes & t) && (Nr = !0), e.firstContext = null) } function un(e) { var t = P ? e._currentValue : e._currentValue2; if (an !== e) if (e = { context: e, memoizedValue: t, next: null }, null === rn) { if (null === nn) throw Error(o(308)); rn = e, nn.dependencies = { lanes: 0, firstContext: e } } else rn = rn.next = e; return t } var Cn = null, dn = !1; function In(e) { e.updateQueue = { baseState: e.memoizedState, firstBaseUpdate: null, lastBaseUpdate: null, shared: { pending: null, interleaved: null, lanes: 0 }, effects: null } } function hn(e, t) { e = e.updateQueue, t.updateQueue === e && (t.updateQueue = { baseState: e.baseState, firstBaseUpdate: e.firstBaseUpdate, lastBaseUpdate: e.lastBaseUpdate, shared: e.shared, effects: e.effects }) } function An(e, t) { return { eventTime: e, lane: t, tag: 0, payload: null, callback: null, next: null } } function pn(e, t) { var n = e.updateQueue; null !== n && (n = n.shared, null !== Ja && 0 !== (1 & e.mode) && 0 === (2 & Pa) ? (null === (e = n.interleaved) ? (t.next = t, null === Cn ? Cn = [n] : Cn.push(n)) : (t.next = e.next, e.next = t), n.interleaved = t) : (null === (e = n.pending) ? t.next = t : (t.next = e.next, e.next = t), n.pending = t)) } function fn(e, t, n) { if (null !== (t = t.updateQueue) && (t = t.shared, 0 !== (4194240 & n))) { var i = t.lanes; n |= i &= e.pendingLanes, t.lanes = n, Vt(e, n) } } function mn(e, t) { var n = e.updateQueue, i = e.alternate; if (null !== i && n === (i = i.updateQueue)) { var r = null, a = null; if (null !== (n = n.firstBaseUpdate)) { do { var o = { eventTime: n.eventTime, lane: n.lane, tag: n.tag, payload: n.payload, callback: n.callback, next: null }; null === a ? r = a = o : a = a.next = o, n = n.next } while (null !== n); null === a ? r = a = t : a = a.next = t } else r = a = t; return n = { baseState: i.baseState, firstBaseUpdate: r, lastBaseUpdate: a, shared: i.shared, effects: i.effects }, void (e.updateQueue = n) } null === (e = n.lastBaseUpdate) ? n.firstBaseUpdate = t : e.next = t, n.lastBaseUpdate = t } function vn(e, t, n, i) { var r = e.updateQueue; dn = !1; var o = r.firstBaseUpdate, s = r.lastBaseUpdate, l = r.shared.pending; if (null !== l) { r.shared.pending = null; var g = l, c = g.next; g.next = null, null === s ? o = c : s.next = c, s = g; var u = e.alternate; null !== u && ((l = (u = u.updateQueue).lastBaseUpdate) !== s && (null === l ? u.firstBaseUpdate = c : l.next = c, u.lastBaseUpdate = g)) } if (null !== o) { var C = r.baseState; for (s = 0, u = c = g = null, l = o; ;) { var d = l.lane, I = l.eventTime; if ((i & d) === d) { null !== u && (u = u.next = { eventTime: I, lane: 0, tag: l.tag, payload: l.payload, callback: l.callback, next: null }); e: { var h = e, A = l; switch (d = t, I = n, A.tag) { case 1: if ("function" === typeof (h = A.payload)) { C = h.call(I, C, d); break e } C = h; break e; case 3: h.flags = -65537 & h.flags | 128; case 0: if (null === (d = "function" === typeof (h = A.payload) ? h.call(I, C, d) : h) || void 0 === d) break e; C = a({}, C, d); break e; case 2: dn = !0 } } null !== l.callback && 0 !== l.lane && (e.flags |= 64, null === (d = r.effects) ? r.effects = [l] : d.push(l)) } else I = { eventTime: I, lane: d, tag: l.tag, payload: l.payload, callback: l.callback, next: null }, null === u ? (c = u = I, g = C) : u = u.next = I, s |= d; if (null === (l = l.next)) { if (null === (l = r.shared.pending)) break; l = (d = l).next, d.next = null, r.lastBaseUpdate = d, r.shared.pending = null } } if (null === u && (g = C), r.baseState = g, r.firstBaseUpdate = c, r.lastBaseUpdate = u, null !== (t = r.shared.interleaved)) { r = t; do { s |= r.lane, r = r.next } while (r !== t) } else null === o && (r.shared.lanes = 0); to |= s, e.lanes = s, e.memoizedState = C } } function bn(e, t, n) { if (e = t.effects, t.effects = null, null !== e) for (t = 0; t < e.length; t++) { var i = e[t], r = i.callback; if (null !== r) { if (i.callback = null, i = n, "function" !== typeof r) throw Error(o(191, r)); r.call(i) } } } var yn = (new i.Component).refs; function Gn(e, t, n, i) { n = null === (n = n(i, t = e.memoizedState)) || void 0 === n ? t : a({}, t, n), e.memoizedState = n, 0 === e.lanes && (e.updateQueue.baseState = n) } var Bn = { isMounted: function (e) { return !!(e = e._reactInternals) && Z(e) === e }, enqueueSetState: function (e, t, n) { e = e._reactInternals; var i = bo(), r = yo(e), a = An(i, r); a.payload = t, void 0 !== n && null !== n && (a.callback = n), pn(e, a), null !== (t = Go(e, r, i)) && fn(t, e, r) }, enqueueReplaceState: function (e, t, n) { e = e._reactInternals; var i = bo(), r = yo(e), a = An(i, r); a.tag = 1, a.payload = t, void 0 !== n && null !== n && (a.callback = n), pn(e, a), null !== (t = Go(e, r, i)) && fn(t, e, r) }, enqueueForceUpdate: function (e, t) { e = e._reactInternals; var n = bo(), i = yo(e), r = An(n, i); r.tag = 2, void 0 !== t && null !== t && (r.callback = t), pn(e, r), null !== (t = Go(e, i, n)) && fn(t, e, i) } }; function Zn(e, t, n, i, r, a, o) { return "function" === typeof (e = e.stateNode).shouldComponentUpdate ? e.shouldComponentUpdate(i, a, o) : !t.prototype || !t.prototype.isPureReactComponent || (!qt(n, i) || !qt(r, a)) } function wn(e, t, n) { var i = !1, r = gt, a = t.contextType; return "object" === typeof a && null !== a ? a = un(a) : (r = It(t) ? Ct : ct.current, a = (i = null !== (i = t.contextTypes) && void 0 !== i) ? dt(e, r) : gt), t = new t(n, a), e.memoizedState = null !== t.state && void 0 !== t.state ? t.state : null, t.updater = Bn, e.stateNode = t, t._reactInternals = e, i && ((e = e.stateNode).__reactInternalMemoizedUnmaskedChildContext = r, e.__reactInternalMemoizedMaskedChildContext = a), t } function Sn(e, t, n, i) { e = t.state, "function" === typeof t.componentWillReceiveProps && t.componentWillReceiveProps(n, i), "function" === typeof t.UNSAFE_componentWillReceiveProps && t.UNSAFE_componentWillReceiveProps(n, i), t.state !== e && Bn.enqueueReplaceState(t, t.state, null) } function Rn(e, t, n, i) { var r = e.stateNode; r.props = n, r.state = e.memoizedState, r.refs = yn, In(e); var a = t.contextType; "object" === typeof a && null !== a ? r.context = un(a) : (a = It(t) ? Ct : ct.current, r.context = dt(e, a)), r.state = e.memoizedState, "function" === typeof (a = t.getDerivedStateFromProps) && (Gn(e, t, a, n), r.state = e.memoizedState), "function" === typeof t.getDerivedStateFromProps || "function" === typeof r.getSnapshotBeforeUpdate || "function" !== typeof r.UNSAFE_componentWillMount && "function" !== typeof r.componentWillMount || (t = r.state, "function" === typeof r.componentWillMount && r.componentWillMount(), "function" === typeof r.UNSAFE_componentWillMount && r.UNSAFE_componentWillMount(), t !== r.state && Bn.enqueueReplaceState(r, r.state, null), vn(e, n, r, i), r.state = e.memoizedState), "function" === typeof r.componentDidMount && (e.flags |= 4194308) } var xn = [], Wn = 0, Vn = null, kn = 0, Hn = [], Mn = 0, Fn = null, Nn = 1, Xn = ""; function Yn(e, t) { xn[Wn++] = kn, xn[Wn++] = Vn, Vn = e, kn = t } function Kn(e, t, n) { Hn[Mn++] = Nn, Hn[Mn++] = Xn, Hn[Mn++] = Fn, Fn = e; var i = Nn; e = Xn; var r = 32 - vt(i) - 1; i &= ~(1 << r), n += 1; var a = 32 - vt(t) + r; if (30 < a) { var o = r - r % 5; a = (i & (1 << o) - 1).toString(32), i >>= o, r -= o, Nn = 1 << 32 - vt(t) + r | n << r | i, Xn = a + e } else Nn = 1 << a | n << r | i, Xn = e } function Ln(e) { null !== e.return && (Yn(e, 1), Kn(e, 1, 0)) } function zn(e) { for (; e === Vn;)Vn = xn[--Wn], xn[Wn] = null, kn = xn[--Wn], xn[Wn] = null; for (; e === Fn;)Fn = Hn[--Mn], Hn[Mn] = null, Xn = Hn[--Mn], Hn[Mn] = null, Nn = Hn[--Mn], Hn[Mn] = null } var En = null, Tn = null, _n = !1, Un = !1, Dn = null; function Pn(e, t) { var n = qo(5, null, null, 0); n.elementType = "DELETED", n.stateNode = t, n.return = e, null === (t = e.deletions) ? (e.deletions = [n], e.flags |= 16) : t.push(n) } function Jn(e, t) { switch (e.tag) { case 5: return null !== (t = He(t, e.type, e.pendingProps)) && (e.stateNode = t, En = e, Tn = Le(t), !0); case 6: return null !== (t = Me(t, e.pendingProps)) && (e.stateNode = t, En = e, Tn = null, !0); case 13: if (null !== (t = Fe(t))) { var n = null !== Fn ? { id: Nn, overflow: Xn } : null; return e.memoizedState = { dehydrated: t, treeContext: n, retryLane: 1073741824 }, (n = qo(18, null, null, 0)).stateNode = t, n.return = e, e.child = n, En = e, Tn = null, !0 } return !1; default: return !1 } } function On(e) { return 0 !== (1 & e.mode) && 0 === (128 & e.flags) } function jn(e) { if (_n) { var t = Tn; if (t) { var n = t; if (!Jn(e, t)) { if (On(e)) throw Error(o(418)); t = Ke(n); var i = En; t && Jn(e, t) ? Pn(i, n) : (e.flags = -4097 & e.flags | 2, _n = !1, En = e) } } else { if (On(e)) throw Error(o(418)); e.flags = -4097 & e.flags | 2, _n = !1, En = e } } } function Qn(e) { for (e = e.return; null !== e && 5 !== e.tag && 3 !== e.tag && 13 !== e.tag;)e = e.return; En = e } function qn(e) { if (!j || e !== En) return !1; if (!_n) return Qn(e), _n = !0, !1; if (3 !== e.tag && (5 !== e.tag || Qe(e.type) && !E(e.type, e.memoizedProps))) { var t = Tn; if (t) { if (On(e)) { for (e = Tn; e;)e = Ke(e); throw Error(o(418)) } for (; t;)Pn(e, t), t = Ke(t) } } if (Qn(e), 13 === e.tag) { if (!j) throw Error(o(316)); if (!(e = null !== (e = e.memoizedState) ? e.dehydrated : null)) throw Error(o(317)); Tn = De(e) } else Tn = En ? Ke(e.stateNode) : null; return !0 } function $n() { j && (Tn = En = null, Un = _n = !1) } function ei(e) { null === Dn ? Dn = [e] : Dn.push(e) } function ti(e, t, n) { if (null !== (e = n.ref) && "function" !== typeof e && "object" !== typeof e) { if (n._owner) { if (n = n._owner) { if (1 !== n.tag) throw Error(o(309)); var i = n.stateNode } if (!i) throw Error(o(147, e)); var r = i, a = "" + e; return null !== t && null !== t.ref && "function" === typeof t.ref && t.ref._stringRef === a ? t.ref : (t = function (e) { var t = r.refs; t === yn && (t = r.refs = {}), null === e ? delete t[a] : t[a] = e }, t._stringRef = a, t) } if ("string" !== typeof e) throw Error(o(284)); if (!n._owner) throw Error(o(290, e)) } return e } function ni(e, t) { throw e = Object.prototype.toString.call(t), Error(o(31, "[object Object]" === e ? "object with keys {" + Object.keys(t).join(", ") + "}" : e)) } function ii(e) { return (0, e._init)(e._payload) } function ri(e) { function t(t, n) { if (e) { var i = t.deletions; null === i ? (t.deletions = [n], t.flags |= 16) : i.push(n) } } function n(n, i) { if (!e) return null; for (; null !== i;)t(n, i), i = i.sibling; return null } function i(e, t) { for (e = new Map; null !== t;)null !== t.key ? e.set(t.key, t) : e.set(t.index, t), t = t.sibling; return e } function r(e, t) { return (e = es(e, t)).index = 0, e.sibling = null, e } function a(t, n, i) { return t.index = i, e ? null !== (i = t.alternate) ? (i = i.index) < n ? (t.flags |= 2, n) : i : (t.flags |= 2, n) : (t.flags |= 1048576, n) } function s(t) { return e && null === t.alternate && (t.flags |= 2), t } function u(e, t, n, i) { return null === t || 6 !== t.tag ? ((t = rs(n, e.mode, i)).return = e, t) : ((t = r(t, n)).return = e, t) } function C(e, t, n, i) { var a = n.type; return a === c ? I(e, t, n.props.children, i, n.key) : null !== t && (t.elementType === a || "object" === typeof a && null !== a && a.$$typeof === m && ii(a) === t.type) ? ((i = r(t, n.props)).ref = ti(e, t, n), i.return = e, i) : ((i = ts(n.type, n.key, n.props, null, e.mode, i)).ref = ti(e, t, n), i.return = e, i) } function d(e, t, n, i) { return null === t || 4 !== t.tag || t.stateNode.containerInfo !== n.containerInfo || t.stateNode.implementation !== n.implementation ? ((t = as(n, e.mode, i)).return = e, t) : ((t = r(t, n.children || [])).return = e, t) } function I(e, t, n, i, a) { return null === t || 7 !== t.tag ? ((t = ns(n, e.mode, i, a)).return = e, t) : ((t = r(t, n)).return = e, t) } function h(e, t, n) { if ("string" === typeof t && "" !== t || "number" === typeof t) return (t = rs("" + t, e.mode, n)).return = e, t; if ("object" === typeof t && null !== t) { switch (t.$$typeof) { case l: return (n = ts(t.type, t.key, t.props, null, e.mode, n)).ref = ti(e, null, t), n.return = e, n; case g: return (t = as(t, e.mode, n)).return = e, t; case m: return h(e, (0, t._init)(t._payload), n) }if (k(t) || y(t)) return (t = ns(t, e.mode, n, null)).return = e, t; ni(e, t) } return null } function A(e, t, n, i) { var r = null !== t ? t.key : null; if ("string" === typeof n && "" !== n || "number" === typeof n) return null !== r ? null : u(e, t, "" + n, i); if ("object" === typeof n && null !== n) { switch (n.$$typeof) { case l: return n.key === r ? C(e, t, n, i) : null; case g: return n.key === r ? d(e, t, n, i) : null; case m: return A(e, t, (r = n._init)(n._payload), i) }if (k(n) || y(n)) return null !== r ? null : I(e, t, n, i, null); ni(e, n) } return null } function p(e, t, n, i, r) { if ("string" === typeof i && "" !== i || "number" === typeof i) return u(t, e = e.get(n) || null, "" + i, r); if ("object" === typeof i && null !== i) { switch (i.$$typeof) { case l: return C(t, e = e.get(null === i.key ? n : i.key) || null, i, r); case g: return d(t, e = e.get(null === i.key ? n : i.key) || null, i, r); case m: return p(e, t, n, (0, i._init)(i._payload), r) }if (k(i) || y(i)) return I(t, e = e.get(n) || null, i, r, null); ni(t, i) } return null } function f(r, o, s, l) { for (var g = null, c = null, u = o, C = o = 0, d = null; null !== u && C < s.length; C++) { u.index > C ? (d = u, u = null) : d = u.sibling; var I = A(r, u, s[C], l); if (null === I) { null === u && (u = d); break } e && u && null === I.alternate && t(r, u), o = a(I, o, C), null === c ? g = I : c.sibling = I, c = I, u = d } if (C === s.length) return n(r, u), _n && Yn(r, C), g; if (null === u) { for (; C < s.length; C++)null !== (u = h(r, s[C], l)) && (o = a(u, o, C), null === c ? g = u : c.sibling = u, c = u); return _n && Yn(r, C), g } for (u = i(r, u); C < s.length; C++)null !== (d = p(u, r, C, s[C], l)) && (e && null !== d.alternate && u.delete(null === d.key ? C : d.key), o = a(d, o, C), null === c ? g = d : c.sibling = d, c = d); return e && u.forEach((function (e) { return t(r, e) })), _n && Yn(r, C), g } function v(r, s, l, g) { var c = y(l); if ("function" !== typeof c) throw Error(o(150)); if (null == (l = c.call(l))) throw Error(o(151)); for (var u = c = null, C = s, d = s = 0, I = null, f = l.next(); null !== C && !f.done; d++, f = l.next()) { C.index > d ? (I = C, C = null) : I = C.sibling; var m = A(r, C, f.value, g); if (null === m) { null === C && (C = I); break } e && C && null === m.alternate && t(r, C), s = a(m, s, d), null === u ? c = m : u.sibling = m, u = m, C = I } if (f.done) return n(r, C), _n && Yn(r, d), c; if (null === C) { for (; !f.done; d++, f = l.next())null !== (f = h(r, f.value, g)) && (s = a(f, s, d), null === u ? c = f : u.sibling = f, u = f); return _n && Yn(r, d), c } for (C = i(r, C); !f.done; d++, f = l.next())null !== (f = p(C, r, d, f.value, g)) && (e && null !== f.alternate && C.delete(null === f.key ? d : f.key), s = a(f, s, d), null === u ? c = f : u.sibling = f, u = f); return e && C.forEach((function (e) { return t(r, e) })), _n && Yn(r, d), c } return function e(i, a, o, u) { if ("object" === typeof o && null !== o && o.type === c && null === o.key && (o = o.props.children), "object" === typeof o && null !== o) { switch (o.$$typeof) { case l: e: { for (var C = o.key, d = a; null !== d;) { if (d.key === C) { if ((C = o.type) === c) { if (7 === d.tag) { n(i, d.sibling), (a = r(d, o.props.children)).return = i, i = a; break e } } else if (d.elementType === C || "object" === typeof C && null !== C && C.$$typeof === m && ii(C) === d.type) { n(i, d.sibling), (a = r(d, o.props)).ref = ti(i, d, o), a.return = i, i = a; break e } n(i, d); break } t(i, d), d = d.sibling } o.type === c ? ((a = ns(o.props.children, i.mode, u, o.key)).return = i, i = a) : ((u = ts(o.type, o.key, o.props, null, i.mode, u)).ref = ti(i, a, o), u.return = i, i = u) } return s(i); case g: e: { for (d = o.key; null !== a;) { if (a.key === d) { if (4 === a.tag && a.stateNode.containerInfo === o.containerInfo && a.stateNode.implementation === o.implementation) { n(i, a.sibling), (a = r(a, o.children || [])).return = i, i = a; break e } n(i, a); break } t(i, a), a = a.sibling } (a = as(o, i.mode, u)).return = i, i = a } return s(i); case m: return e(i, a, (d = o._init)(o._payload), u) }if (k(o)) return f(i, a, o, u); if (y(o)) return v(i, a, o, u); ni(i, o) } return "string" === typeof o && "" !== o || "number" === typeof o ? (o = "" + o, null !== a && 6 === a.tag ? (n(i, a.sibling), (a = r(a, o)).return = i, i = a) : (n(i, a), (a = rs(o, i.mode, u)).return = i, i = a), s(i)) : n(i, a) } } var ai = ri(!0), oi = ri(!1), si = {}, li = ot(si), gi = ot(si), ci = ot(si); function ui(e) { if (e === si) throw Error(o(174)); return e } function Ci(e, t) { lt(ci, t), lt(gi, e), lt(li, si), e = M(t), st(li), lt(li, e) } function di() { st(li), st(gi), st(ci) } function Ii(e) { var t = ui(ci.current), n = ui(li.current); n !== (t = F(n, e.type, t)) && (lt(gi, e), lt(li, t)) } function hi(e) { gi.current === e && (st(li), st(gi)) } var Ai = ot(0); function pi(e) { for (var t = e; null !== t;) { if (13 === t.tag) { var n = t.memoizedState; if (null !== n && (null === (n = n.dehydrated) || Ne(n) || Xe(n))) return t } else if (19 === t.tag && void 0 !== t.memoizedProps.revealOrder) { if (0 !== (128 & t.flags)) return t } else if (null !== t.child) { t.child.return = t, t = t.child; continue } if (t === e) break; for (; null === t.sibling;) { if (null === t.return || t.return === e) return null; t = t.return } t.sibling.return = t.return, t = t.sibling } return null } var fi = []; function mi() { for (var e = 0; e < fi.length; e++) { var t = fi[e]; P ? t._workInProgressVersionPrimary = null : t._workInProgressVersionSecondary = null } fi.length = 0 } var vi = s.ReactCurrentDispatcher, bi = s.ReactCurrentBatchConfig, yi = 0, Gi = null, Bi = null, Zi = null, wi = !1, Si = !1, Ri = 0, xi = 0; function Wi() { throw Error(o(321)) } function Vi(e, t) { if (null === t) return !1; for (var n = 0; n < t.length && n < e.length; n++)if (!Ut(e[n], t[n])) return !1; return !0 } function ki(e, t, n, i, r, a) { if (yi = a, Gi = t, t.memoizedState = null, t.updateQueue = null, t.lanes = 0, vi.current = null === e || null === e.memoizedState ? Ir : hr, e = n(i, r), Si) { a = 0; do { if (Si = !1, Ri = 0, 25 <= a) throw Error(o(301)); a += 1, Zi = Bi = null, t.updateQueue = null, vi.current = Ar, e = n(i, r) } while (Si) } if (vi.current = dr, t = null !== Bi && null !== Bi.next, yi = 0, Zi = Bi = Gi = null, wi = !1, t) throw Error(o(300)); return e } function Hi() { var e = 0 !== Ri; return Ri = 0, e } function Mi() { var e = { memoizedState: null, baseState: null, baseQueue: null, queue: null, next: null }; return null === Zi ? Gi.memoizedState = Zi = e : Zi = Zi.next = e, Zi } function Fi() { if (null === Bi) { var e = Gi.alternate; e = null !== e ? e.memoizedState : null } else e = Bi.next; var t = null === Zi ? Gi.memoizedState : Zi.next; if (null !== t) Zi = t, Bi = e; else { if (null === e) throw Error(o(310)); e = { memoizedState: (Bi = e).memoizedState, baseState: Bi.baseState, baseQueue: Bi.baseQueue, queue: Bi.queue, next: null }, null === Zi ? Gi.memoizedState = Zi = e : Zi = Zi.next = e } return Zi } function Ni(e, t) { return "function" === typeof t ? t(e) : t } function Xi(e) { var t = Fi(), n = t.queue; if (null === n) throw Error(o(311)); n.lastRenderedReducer = e; var i = Bi, r = i.baseQueue, a = n.pending; if (null !== a) { if (null !== r) { var s = r.next; r.next = a.next, a.next = s } i.baseQueue = r = a, n.pending = null } if (null !== r) { a = r.next, i = i.baseState; var l = s = null, g = null, c = a; do { var u = c.lane; if ((yi & u) === u) null !== g && (g = g.next = { lane: 0, action: c.action, hasEagerState: c.hasEagerState, eagerState: c.eagerState, next: null }), i = c.hasEagerState ? c.eagerState : e(i, c.action); else { var C = { lane: u, action: c.action, hasEagerState: c.hasEagerState, eagerState: c.eagerState, next: null }; null === g ? (l = g = C, s = i) : g = g.next = C, Gi.lanes |= u, to |= u } c = c.next } while (null !== c && c !== a); null === g ? s = i : g.next = l, Ut(i, t.memoizedState) || (Nr = !0), t.memoizedState = i, t.baseState = s, t.baseQueue = g, n.lastRenderedState = i } if (null !== (e = n.interleaved)) { r = e; do { a = r.lane, Gi.lanes |= a, to |= a, r = r.next } while (r !== e) } else null === r && (n.lanes = 0); return [t.memoizedState, n.dispatch] } function Yi(e) { var t = Fi(), n = t.queue; if (null === n) throw Error(o(311)); n.lastRenderedReducer = e; var i = n.dispatch, r = n.pending, a = t.memoizedState; if (null !== r) { n.pending = null; var s = r = r.next; do { a = e(a, s.action), s = s.next } while (s !== r); Ut(a, t.memoizedState) || (Nr = !0), t.memoizedState = a, null === t.baseQueue && (t.baseState = a), n.lastRenderedState = a } return [a, i] } function Ki() { } function Li(e, t) { var n = Gi, i = Fi(), r = t(), a = !Ut(i.memoizedState, r); if (a && (i.memoizedState = r, Nr = !0), i = i.queue, Qi(Ti.bind(null, n, i, e), [e]), i.getSnapshot !== t || a || null !== Zi && 1 & Zi.memoizedState.tag) { if (n.flags |= 2048, Di(9, Ei.bind(null, n, i, r, t), void 0, null), null === Ja) throw Error(o(349)); 0 !== (30 & yi) || zi(n, t, r) } return r } function zi(e, t, n) { e.flags |= 16384, e = { getSnapshot: t, value: n }, null === (t = Gi.updateQueue) ? (t = { lastEffect: null, stores: null }, Gi.updateQueue = t, t.stores = [e]) : null === (n = t.stores) ? t.stores = [e] : n.push(e) } function Ei(e, t, n, i) { t.value = n, t.getSnapshot = i, _i(t) && Go(e, 1, -1) } function Ti(e, t, n) { return n((function () { _i(t) && Go(e, 1, -1) })) } function _i(e) { var t = e.getSnapshot; e = e.value; try { var n = t(); return !Ut(e, n) } catch (i) { return !0 } } function Ui(e) { var t = Mi(); return "function" === typeof e && (e = e()), t.memoizedState = t.baseState = e, e = { pending: null, interleaved: null, lanes: 0, dispatch: null, lastRenderedReducer: Ni, lastRenderedState: e }, t.queue = e, e = e.dispatch = lr.bind(null, Gi, e), [t.memoizedState, e] } function Di(e, t, n, i) { return e = { tag: e, create: t, destroy: n, deps: i, next: null }, null === (t = Gi.updateQueue) ? (t = { lastEffect: null, stores: null }, Gi.updateQueue = t, t.lastEffect = e.next = e) : null === (n = t.lastEffect) ? t.lastEffect = e.next = e : (i = n.next, n.next = e, e.next = i, t.lastEffect = e), e } function Pi() { return Fi().memoizedState } function Ji(e, t, n, i) { var r = Mi(); Gi.flags |= e, r.memoizedState = Di(1 | t, n, void 0, void 0 === i ? null : i) } function Oi(e, t, n, i) { var r = Fi(); i = void 0 === i ? null : i; var a = void 0; if (null !== Bi) { var o = Bi.memoizedState; if (a = o.destroy, null !== i && Vi(i, o.deps)) return void (r.memoizedState = Di(t, n, a, i)) } Gi.flags |= e, r.memoizedState = Di(1 | t, n, a, i) } function ji(e, t) { return Ji(8390656, 8, e, t) } function Qi(e, t) { return Oi(2048, 8, e, t) } function qi(e, t) { return Oi(4, 2, e, t) } function $i(e, t) { return Oi(4, 4, e, t) } function er(e, t) { return "function" === typeof t ? (e = e(), t(e), function () { t(null) }) : null !== t && void 0 !== t ? (e = e(), t.current = e, function () { t.current = null }) : void 0 } function tr(e, t, n) { return n = null !== n && void 0 !== n ? n.concat([e]) : null, Oi(4, 4, er.bind(null, t, e), n) } function nr() { } function ir(e, t) { var n = Fi(); t = void 0 === t ? null : t; var i = n.memoizedState; return null !== i && null !== t && Vi(t, i[1]) ? i[0] : (n.memoizedState = [e, t], e) } function rr(e, t) { var n = Fi(); t = void 0 === t ? null : t; var i = n.memoizedState; return null !== i && null !== t && Vi(t, i[1]) ? i[0] : (e = e(), n.memoizedState = [e, t], e) } function ar(e, t) { var n = kt; kt = 0 !== n && 4 > n ? n : 4, e(!0); var i = bi.transition; bi.transition = {}; try { e(!1), t() } finally { kt = n, bi.transition = i } } function or() { return Fi().memoizedState } function sr(e, t, n) { var i = yo(e); n = { lane: i, action: n, hasEagerState: !1, eagerState: null, next: null }, gr(e) ? cr(t, n) : (ur(e, t, n), null !== (e = Go(e, i, n = bo())) && Cr(e, t, i)) } function lr(e, t, n) { var i = yo(e), r = { lane: i, action: n, hasEagerState: !1, eagerState: null, next: null }; if (gr(e)) cr(t, r); else { ur(e, t, r); var a = e.alternate; if (0 === e.lanes && (null === a || 0 === a.lanes) && null !== (a = t.lastRenderedReducer)) try { var o = t.lastRenderedState, s = a(o, n); if (r.hasEagerState = !0, r.eagerState = s, Ut(s, o)) return } catch (l) { } null !== (e = Go(e, i, n = bo())) && Cr(e, t, i) } } function gr(e) { var t = e.alternate; return e === Gi || null !== t && t === Gi } function cr(e, t) { Si = wi = !0; var n = e.pending; null === n ? t.next = t : (t.next = n.next, n.next = t), e.pending = t } function ur(e, t, n) { null !== Ja && 0 !== (1 & e.mode) && 0 === (2 & Pa) ? (null === (e = t.interleaved) ? (n.next = n, null === Cn ? Cn = [t] : Cn.push(t)) : (n.next = e.next, e.next = n), t.interleaved = n) : (null === (e = t.pending) ? n.next = n : (n.next = e.next, e.next = n), t.pending = n) } function Cr(e, t, n) { if (0 !== (4194240 & n)) { var i = t.lanes; n |= i &= e.pendingLanes, t.lanes = n, Vt(e, n) } } var dr = { readContext: un, useCallback: Wi, useContext: Wi, useEffect: Wi, useImperativeHandle: Wi, useInsertionEffect: Wi, useLayoutEffect: Wi, useMemo: Wi, useReducer: Wi, useRef: Wi, useState: Wi, useDebugValue: Wi, useDeferredValue: Wi, useTransition: Wi, useMutableSource: Wi, useSyncExternalStore: Wi, useId: Wi, unstable_isNewReconciler: !1 }, Ir = { readContext: un, useCallback: function (e, t) { return Mi().memoizedState = [e, void 0 === t ? null : t], e }, useContext: un, useEffect: ji, useImperativeHandle: function (e, t, n) { return n = null !== n && void 0 !== n ? n.concat([e]) : null, Ji(4194308, 4, er.bind(null, t, e), n) }, useLayoutEffect: function (e, t) { return Ji(4194308, 4, e, t) }, useInsertionEffect: function (e, t) { return Ji(4, 2, e, t) }, useMemo: function (e, t) { var n = Mi(); return t = void 0 === t ? null : t, e = e(), n.memoizedState = [e, t], e }, useReducer: function (e, t, n) { var i = Mi(); return t = void 0 !== n ? n(t) : t, i.memoizedState = i.baseState = t, e = { pending: null, interleaved: null, lanes: 0, dispatch: null, lastRenderedReducer: e, lastRenderedState: t }, i.queue = e, e = e.dispatch = sr.bind(null, Gi, e), [i.memoizedState, e] }, useRef: function (e) { return e = { current: e }, Mi().memoizedState = e }, useState: Ui, useDebugValue: nr, useDeferredValue: function (e) { var t = Ui(e), n = t[0], i = t[1]; return ji((function () { var t = bi.transition; bi.transition = {}; try { i(e) } finally { bi.transition = t } }), [e]), n }, useTransition: function () { var e = Ui(!1), t = e[0]; return e = ar.bind(null, e[1]), Mi().memoizedState = e, [t, e] }, useMutableSource: function () { }, useSyncExternalStore: function (e, t, n) { var i = Gi, r = Mi(); if (_n) { if (void 0 === n) throw Error(o(407)); n = n() } else { if (n = t(), null === Ja) throw Error(o(349)); 0 !== (30 & yi) || zi(i, t, n) } r.memoizedState = n; var a = { value: n, getSnapshot: t }; return r.queue = a, ji(Ti.bind(null, i, a, e), [e]), i.flags |= 2048, Di(9, Ei.bind(null, i, a, n, t), void 0, null), n }, useId: function () { var e = Mi(), t = Ja.identifierPrefix; if (_n) { var n = Xn; t = ":" + t + "R" + (n = (Nn & ~(1 << 32 - vt(Nn) - 1)).toString(32) + n), 0 < (n = Ri++) && (t += "H" + n.toString(32)), t += ":" } else t = ":" + t + "r" + (n = xi++).toString(32) + ":"; return e.memoizedState = t }, unstable_isNewReconciler: !1 }, hr = { readContext: un, useCallback: ir, useContext: un, useEffect: Qi, useImperativeHandle: tr, useInsertionEffect: qi, useLayoutEffect: $i, useMemo: rr, useReducer: Xi, useRef: Pi, useState: function () { return Xi(Ni) }, useDebugValue: nr, useDeferredValue: function (e) { var t = Xi(Ni), n = t[0], i = t[1]; return Qi((function () { var t = bi.transition; bi.transition = {}; try { i(e) } finally { bi.transition = t } }), [e]), n }, useTransition: function () { return [Xi(Ni)[0], Fi().memoizedState] }, useMutableSource: Ki, useSyncExternalStore: Li, useId: or, unstable_isNewReconciler: !1 }, Ar = { readContext: un, useCallback: ir, useContext: un, useEffect: Qi, useImperativeHandle: tr, useInsertionEffect: qi, useLayoutEffect: $i, useMemo: rr, useReducer: Yi, useRef: Pi, useState: function () { return Yi(Ni) }, useDebugValue: nr, useDeferredValue: function (e) { var t = Yi(Ni), n = t[0], i = t[1]; return Qi((function () { var t = bi.transition; bi.transition = {}; try { i(e) } finally { bi.transition = t } }), [e]), n }, useTransition: function () { return [Yi(Ni)[0], Fi().memoizedState] }, useMutableSource: Ki, useSyncExternalStore: Li, useId: or, unstable_isNewReconciler: !1 }; function pr(e, t) { try { var n = "", i = t; do { n += $t(i), i = i.return } while (i); var r = n } catch (a) { r = "\nError generating stack: " + a.message + "\n" + a.stack } return { value: e, source: t, stack: r } } function fr(e, t) { try { console.error(t.value) } catch (n) { setTimeout((function () { throw n })) } } var mr, vr, br, yr, Gr = "function" === typeof WeakMap ? WeakMap : Map; function Br(e, t, n) { (n = An(-1, n)).tag = 3, n.payload = { element: null }; var i = t.value; return n.callback = function () { co || (co = !0, uo = i), fr(0, t) }, n } function Zr(e, t, n) { (n = An(-1, n)).tag = 3; var i = e.type.getDerivedStateFromError; if ("function" === typeof i) { var r = t.value; n.payload = function () { return i(r) }, n.callback = function () { fr(0, t) } } var a = e.stateNode; return null !== a && "function" === typeof a.componentDidCatch && (n.callback = function () { fr(0, t), "function" !== typeof i && (null === Co ? Co = new Set([this]) : Co.add(this)); var e = t.stack; this.componentDidCatch(t.value, { componentStack: null !== e ? e : "" }) }), n } function wr(e, t, n) { var i = e.pingCache; if (null === i) { i = e.pingCache = new Gr; var r = new Set; i.set(t, r) } else void 0 === (r = i.get(t)) && (r = new Set, i.set(t, r)); r.has(n) || (r.add(n), e = Do.bind(null, e, t, n), t.then(e, e)) } function Sr(e) { do { var t; if ((t = 13 === e.tag) && (t = null === (t = e.memoizedState) || null !== t.dehydrated), t) return e; e = e.return } while (null !== e); return null } function Rr(e, t, n, i, r) { return 0 === (1 & e.mode) ? (e === t ? e.flags |= 65536 : (e.flags |= 128, n.flags |= 131072, n.flags &= -52805, 1 === n.tag && (null === n.alternate ? n.tag = 17 : ((t = An(-1, 1)).tag = 2, pn(n, t))), n.lanes |= 1), e) : (e.flags |= 65536, e.lanes = r, e) } function xr(e) { e.flags |= 4 } function Wr(e, t) { if (null !== e && e.child === t.child) return !0; if (0 !== (16 & t.flags)) return !1; for (e = t.child; null !== e;) { if (0 !== (12854 & e.flags) || 0 !== (12854 & e.subtreeFlags)) return !1; e = e.sibling } return !0 } if (J) mr = function (e, t) { for (var n = t.child; null !== n;) { if (5 === n.tag || 6 === n.tag) K(e, n.stateNode); else if (4 !== n.tag && null !== n.child) { n.child.return = n, n = n.child; continue } if (n === t) break; for (; null === n.sibling;) { if (null === n.return || n.return === t) return; n = n.return } n.sibling.return = n.return, n = n.sibling } }, vr = function () { }, br = function (e, t, n, i, r) { if ((e = e.memoizedProps) !== i) { var a = t.stateNode, o = ui(li.current); n = z(a, n, e, i, r, o), (t.updateQueue = n) && xr(t) } }, yr = function (e, t, n, i) { n !== i && xr(t) }; else if (O) { mr = function (e, t, n, i) { for (var r = t.child; null !== r;) { if (5 === r.tag) { var a = r.stateNode; n && i && (a = Ve(a, r.type, r.memoizedProps, r)), K(e, a) } else if (6 === r.tag) a = r.stateNode, n && i && (a = ke(a, r.memoizedProps, r)), K(e, a); else if (4 !== r.tag) if (22 === r.tag && null !== r.memoizedState) null !== (a = r.child) && (a.return = r), mr(e, r, !0, !0); else if (null !== r.child) { r.child.return = r, r = r.child; continue } if (r === t) break; for (; null === r.sibling;) { if (null === r.return || r.return === t) return; r = r.return } r.sibling.return = r.return, r = r.sibling } }; var Vr = function e(t, n, i, r) { for (var a = n.child; null !== a;) { if (5 === a.tag) { var o = a.stateNode; i && r && (o = Ve(o, a.type, a.memoizedProps, a)), Re(t, o) } else if (6 === a.tag) o = a.stateNode, i && r && (o = ke(o, a.memoizedProps, a)), Re(t, o); else if (4 !== a.tag) if (22 === a.tag && null !== a.memoizedState) null !== (o = a.child) && (o.return = a), e(t, a, !0, !0); else if (null !== a.child) { a.child.return = a, a = a.child; continue } if (a === n) break; for (; null === a.sibling;) { if (null === a.return || a.return === n) return; a = a.return } a.sibling.return = a.return, a = a.sibling } }; vr = function (e, t) { var n = t.stateNode; if (!Wr(e, t)) { e = n.containerInfo; var i = Se(e); Vr(i, t, !1, !1), n.pendingChildren = i, xr(t), xe(e, i) } }, br = function (e, t, n, i, r) { var a = e.stateNode, o = e.memoizedProps; if ((e = Wr(e, t)) && o === i) t.stateNode = a; else { var s = t.stateNode, l = ui(li.current), g = null; o !== i && (g = z(s, n, o, i, r, l)), e && null === g ? t.stateNode = a : (a = we(a, g, n, o, i, t, e, s), L(a, n, i, r, l) && xr(t), t.stateNode = a, e ? xr(t) : mr(a, t, !1, !1)) } }, yr = function (e, t, n, i) { n !== i ? (e = ui(ci.current), n = ui(li.current), t.stateNode = T(i, e, n, t), xr(t)) : t.stateNode = e.stateNode } } else vr = function () { }, br = function () { }, yr = function () { }; function kr(e, t) { if (!_n) switch (e.tailMode) { case "hidden": t = e.tail; for (var n = null; null !== t;)null !== t.alternate && (n = t), t = t.sibling; null === n ? e.tail = null : n.sibling = null; break; case "collapsed": n = e.tail; for (var i = null; null !== n;)null !== n.alternate && (i = n), n = n.sibling; null === i ? t || null === e.tail ? e.tail = null : e.tail.sibling = null : i.sibling = null } } function Hr(e) { var t = null !== e.alternate && e.alternate.child === e.child, n = 0, i = 0; if (t) for (var r = e.child; null !== r;)n |= r.lanes | r.childLanes, i |= 14680064 & r.subtreeFlags, i |= 14680064 & r.flags, r.return = e, r = r.sibling; else for (r = e.child; null !== r;)n |= r.lanes | r.childLanes, i |= r.subtreeFlags, i |= r.flags, r.return = e, r = r.sibling; return e.subtreeFlags |= i, e.childLanes = n, t } function Mr(e, t, n) { var i = t.pendingProps; switch (zn(t), t.tag) { case 2: case 16: case 15: case 0: case 11: case 7: case 8: case 12: case 9: case 14: return Hr(t), null; case 1: case 17: return It(t.type) && ht(), Hr(t), null; case 3: return i = t.stateNode, di(), st(ut), st(ct), mi(), i.pendingContext && (i.context = i.pendingContext, i.pendingContext = null), null !== e && null !== e.child || (qn(t) ? xr(t) : null === e || e.memoizedState.isDehydrated && 0 === (256 & t.flags) || (t.flags |= 1024, null !== Dn && (Ro(Dn), Dn = null))), vr(e, t), Hr(t), null; case 5: hi(t), n = ui(ci.current); var r = t.type; if (null !== e && null != t.stateNode) br(e, t, r, i, n), e.ref !== t.ref && (t.flags |= 512, t.flags |= 2097152); else { if (!i) { if (null === t.stateNode) throw Error(o(166)); return Hr(t), null } if (e = ui(li.current), qn(t)) { if (!j) throw Error(o(175)); e = Te(t.stateNode, t.type, t.memoizedProps, n, e, t, !Un), t.updateQueue = e, null !== e && xr(t) } else { var a = Y(r, i, n, e, t); mr(a, t, !1, !1), t.stateNode = a, L(a, r, i, n, e) && xr(t) } null !== t.ref && (t.flags |= 512, t.flags |= 2097152) } return Hr(t), null; case 6: if (e && null != t.stateNode) yr(e, t, e.memoizedProps, i); else { if ("string" !== typeof i && null === t.stateNode) throw Error(o(166)); if (e = ui(ci.current), n = ui(li.current), qn(t)) { if (!j) throw Error(o(176)); if (e = t.stateNode, i = t.memoizedProps, (n = _e(e, i, t, !Un)) && null !== (r = En)) switch (a = 0 !== (1 & r.mode), r.tag) { case 3: qe(r.stateNode.containerInfo, e, i, a); break; case 5: $e(r.type, r.memoizedProps, r.stateNode, e, i, a) }n && xr(t) } else t.stateNode = T(i, e, n, t) } return Hr(t), null; case 13: if (st(Ai), i = t.memoizedState, _n && null !== Tn && 0 !== (1 & t.mode) && 0 === (128 & t.flags)) { for (e = Tn; e;)e = Ke(e); return $n(), t.flags |= 98560, t } if (null !== i && null !== i.dehydrated) { if (i = qn(t), null === e) { if (!i) throw Error(o(318)); if (!j) throw Error(o(344)); if (!(e = null !== (e = t.memoizedState) ? e.dehydrated : null)) throw Error(o(317)); Ue(e, t) } else $n(), 0 === (128 & t.flags) && (t.memoizedState = null), t.flags |= 4; return Hr(t), null } return null !== Dn && (Ro(Dn), Dn = null), 0 !== (128 & t.flags) ? (t.lanes = n, t) : (i = null !== i, n = !1, null === e ? qn(t) : n = null !== e.memoizedState, i && !n && (t.child.flags |= 8192, 0 !== (1 & t.mode) && (null === e || 0 !== (1 & Ai.current) ? 0 === $a && ($a = 3) : No())), null !== t.updateQueue && (t.flags |= 4), Hr(t), null); case 4: return di(), vr(e, t), null === e && q(t.stateNode.containerInfo), Hr(t), null; case 10: return ln(t.type._context), Hr(t), null; case 19: if (st(Ai), null === (r = t.memoizedState)) return Hr(t), null; if (i = 0 !== (128 & t.flags), null === (a = r.rendering)) if (i) kr(r, !1); else { if (0 !== $a || null !== e && 0 !== (128 & e.flags)) for (e = t.child; null !== e;) { if (null !== (a = pi(e))) { for (t.flags |= 128, kr(r, !1), null !== (e = a.updateQueue) && (t.updateQueue = e, t.flags |= 4), t.subtreeFlags = 0, e = n, i = t.child; null !== i;)r = e, (n = i).flags &= 14680066, null === (a = n.alternate) ? (n.childLanes = 0, n.lanes = r, n.child = null, n.subtreeFlags = 0, n.memoizedProps = null, n.memoizedState = null, n.updateQueue = null, n.dependencies = null, n.stateNode = null) : (n.childLanes = a.childLanes, n.lanes = a.lanes, n.child = a.child, n.subtreeFlags = 0, n.deletions = null, n.memoizedProps = a.memoizedProps, n.memoizedState = a.memoizedState, n.updateQueue = a.updateQueue, n.type = a.type, r = a.dependencies, n.dependencies = null === r ? null : { lanes: r.lanes, firstContext: r.firstContext }), i = i.sibling; return lt(Ai, 1 & Ai.current | 2), t.child } e = e.sibling } null !== r.tail && Yt() > so && (t.flags |= 128, i = !0, kr(r, !1), t.lanes = 4194304) } else { if (!i) if (null !== (e = pi(a))) { if (t.flags |= 128, i = !0, null !== (e = e.updateQueue) && (t.updateQueue = e, t.flags |= 4), kr(r, !0), null === r.tail && "hidden" === r.tailMode && !a.alternate && !_n) return Hr(t), null } else 2 * Yt() - r.renderingStartTime > so && 1073741824 !== n && (t.flags |= 128, i = !0, kr(r, !1), t.lanes = 4194304); r.isBackwards ? (a.sibling = t.child, t.child = a) : (null !== (e = r.last) ? e.sibling = a : t.child = a, r.last = a) } return null !== r.tail ? (t = r.tail, r.rendering = t, r.tail = t.sibling, r.renderingStartTime = Yt(), t.sibling = null, e = Ai.current, lt(Ai, i ? 1 & e | 2 : 1 & e), t) : (Hr(t), null); case 22: case 23: return ko(), i = null !== t.memoizedState, null !== e && null !== e.memoizedState !== i && (t.flags |= 8192), i && 0 !== (1 & t.mode) ? 0 !== (1073741824 & Qa) && (Hr(t), J && 6 & t.subtreeFlags && (t.flags |= 8192)) : Hr(t), null; case 24: case 25: return null }throw Error(o(156, t.tag)) } var Fr = s.ReactCurrentOwner, Nr = !1; function Xr(e, t, n, i) { t.child = null === e ? oi(t, null, n, i) : ai(t, e.child, n, i) } function Yr(e, t, n, i, r) { n = n.render; var a = t.ref; return cn(t, r), i = ki(e, t, n, i, a, r), n = Hi(), null === e || Nr ? (_n && n && Ln(t), t.flags |= 1, Xr(e, t, i, r), t.child) : (t.updateQueue = e.updateQueue, t.flags &= -2053, e.lanes &= ~r, ra(e, t, r)) } function Kr(e, t, n, i, r) { if (null === e) { var a = n.type; return "function" !== typeof a || $o(a) || void 0 !== a.defaultProps || null !== n.compare || void 0 !== n.defaultProps ? ((e = ts(n.type, null, i, t, t.mode, r)).ref = t.ref, e.return = t, t.child = e) : (t.tag = 15, t.type = a, Lr(e, t, a, i, r)) } if (a = e.child, 0 === (e.lanes & r)) { var o = a.memoizedProps; if ((n = null !== (n = n.compare) ? n : qt)(o, i) && e.ref === t.ref) return ra(e, t, r) } return t.flags |= 1, (e = es(a, i)).ref = t.ref, e.return = t, t.child = e } function Lr(e, t, n, i, r) { if (null !== e && qt(e.memoizedProps, i) && e.ref === t.ref) { if (Nr = !1, 0 === (e.lanes & r)) return t.lanes = e.lanes, ra(e, t, r); 0 !== (131072 & e.flags) && (Nr = !0) } return Tr(e, t, n, i, r) } function zr(e, t, n) { var i = t.pendingProps, r = i.children, a = null !== e ? e.memoizedState : null; if ("hidden" === i.mode) if (0 === (1 & t.mode)) t.memoizedState = { baseLanes: 0, cachePool: null }, lt(qa, Qa), Qa |= n; else { if (0 === (1073741824 & n)) return e = null !== a ? a.baseLanes | n : n, t.lanes = t.childLanes = 1073741824, t.memoizedState = { baseLanes: e, cachePool: null }, t.updateQueue = null, lt(qa, Qa), Qa |= e, null; t.memoizedState = { baseLanes: 0, cachePool: null }, i = null !== a ? a.baseLanes : n, lt(qa, Qa), Qa |= i } else null !== a ? (i = a.baseLanes | n, t.memoizedState = null) : i = n, lt(qa, Qa), Qa |= i; return Xr(e, t, r, n), t.child } function Er(e, t) { var n = t.ref; (null === e && null !== n || null !== e && e.ref !== n) && (t.flags |= 512, t.flags |= 2097152) } function Tr(e, t, n, i, r) { var a = It(n) ? Ct : ct.current; return a = dt(t, a), cn(t, r), n = ki(e, t, n, i, a, r), i = Hi(), null === e || Nr ? (_n && i && Ln(t), t.flags |= 1, Xr(e, t, n, r), t.child) : (t.updateQueue = e.updateQueue, t.flags &= -2053, e.lanes &= ~r, ra(e, t, r)) } function _r(e, t, n, i, r) { if (It(n)) { var a = !0; ft(t) } else a = !1; if (cn(t, r), null === t.stateNode) null !== e && (e.alternate = null, t.alternate = null, t.flags |= 2), wn(t, n, i), Rn(t, n, i, r), i = !0; else if (null === e) { var o = t.stateNode, s = t.memoizedProps; o.props = s; var l = o.context, g = n.contextType; "object" === typeof g && null !== g ? g = un(g) : g = dt(t, g = It(n) ? Ct : ct.current); var c = n.getDerivedStateFromProps, u = "function" === typeof c || "function" === typeof o.getSnapshotBeforeUpdate; u || "function" !== typeof o.UNSAFE_componentWillReceiveProps && "function" !== typeof o.componentWillReceiveProps || (s !== i || l !== g) && Sn(t, o, i, g), dn = !1; var C = t.memoizedState; o.state = C, vn(t, i, o, r), l = t.memoizedState, s !== i || C !== l || ut.current || dn ? ("function" === typeof c && (Gn(t, n, c, i), l = t.memoizedState), (s = dn || Zn(t, n, s, i, C, l, g)) ? (u || "function" !== typeof o.UNSAFE_componentWillMount && "function" !== typeof o.componentWillMount || ("function" === typeof o.componentWillMount && o.componentWillMount(), "function" === typeof o.UNSAFE_componentWillMount && o.UNSAFE_componentWillMount()), "function" === typeof o.componentDidMount && (t.flags |= 4194308)) : ("function" === typeof o.componentDidMount && (t.flags |= 4194308), t.memoizedProps = i, t.memoizedState = l), o.props = i, o.state = l, o.context = g, i = s) : ("function" === typeof o.componentDidMount && (t.flags |= 4194308), i = !1) } else { o = t.stateNode, hn(e, t), s = t.memoizedProps, g = t.type === t.elementType ? s : en(t.type, s), o.props = g, u = t.pendingProps, C = o.context, "object" === typeof (l = n.contextType) && null !== l ? l = un(l) : l = dt(t, l = It(n) ? Ct : ct.current); var d = n.getDerivedStateFromProps; (c = "function" === typeof d || "function" === typeof o.getSnapshotBeforeUpdate) || "function" !== typeof o.UNSAFE_componentWillReceiveProps && "function" !== typeof o.componentWillReceiveProps || (s !== u || C !== l) && Sn(t, o, i, l), dn = !1, C = t.memoizedState, o.state = C, vn(t, i, o, r); var I = t.memoizedState; s !== u || C !== I || ut.current || dn ? ("function" === typeof d && (Gn(t, n, d, i), I = t.memoizedState), (g = dn || Zn(t, n, g, i, C, I, l) || !1) ? (c || "function" !== typeof o.UNSAFE_componentWillUpdate && "function" !== typeof o.componentWillUpdate || ("function" === typeof o.componentWillUpdate && o.componentWillUpdate(i, I, l), "function" === typeof o.UNSAFE_componentWillUpdate && o.UNSAFE_componentWillUpdate(i, I, l)), "function" === typeof o.componentDidUpdate && (t.flags |= 4), "function" === typeof o.getSnapshotBeforeUpdate && (t.flags |= 1024)) : ("function" !== typeof o.componentDidUpdate || s === e.memoizedProps && C === e.memoizedState || (t.flags |= 4), "function" !== typeof o.getSnapshotBeforeUpdate || s === e.memoizedProps && C === e.memoizedState || (t.flags |= 1024), t.memoizedProps = i, t.memoizedState = I), o.props = i, o.state = I, o.context = l, i = g) : ("function" !== typeof o.componentDidUpdate || s === e.memoizedProps && C === e.memoizedState || (t.flags |= 4), "function" !== typeof o.getSnapshotBeforeUpdate || s === e.memoizedProps && C === e.memoizedState || (t.flags |= 1024), i = !1) } return Ur(e, t, n, i, a, r) } function Ur(e, t, n, i, r, a) { Er(e, t); var o = 0 !== (128 & t.flags); if (!i && !o) return r && mt(t, n, !1), ra(e, t, a); i = t.stateNode, Fr.current = t; var s = o && "function" !== typeof n.getDerivedStateFromError ? null : i.render(); return t.flags |= 1, null !== e && o ? (t.child = ai(t, e.child, null, a), t.child = ai(t, null, s, a)) : Xr(e, t, s, a), t.memoizedState = i.state, r && mt(t, n, !0), t.child } function Dr(e) { var t = e.stateNode; t.pendingContext ? At(0, t.pendingContext, t.pendingContext !== t.context) : t.context && At(0, t.context, !1), Ci(e, t.containerInfo) } function Pr(e, t, n, i, r) { return $n(), ei(r), t.flags |= 256, Xr(e, t, n, i), t.child } var Jr = { dehydrated: null, treeContext: null, retryLane: 0 }; function Or(e) { return { baseLanes: e, cachePool: null } } function jr(e, t, n) { var i, r = t.pendingProps, a = Ai.current, s = !1, l = 0 !== (128 & t.flags); if ((i = l) || (i = (null === e || null !== e.memoizedState) && 0 !== (2 & a)), i ? (s = !0, t.flags &= -129) : null !== e && null === e.memoizedState || (a |= 1), lt(Ai, 1 & a), null === e) return jn(t), null !== (e = t.memoizedState) && null !== (e = e.dehydrated) ? (0 === (1 & t.mode) ? t.lanes = 1 : Xe(e) ? t.lanes = 8 : t.lanes = 1073741824, null) : (a = r.children, e = r.fallback, s ? (r = t.mode, s = t.child, a = { mode: "hidden", children: a }, 0 === (1 & r) && null !== s ? (s.childLanes = 0, s.pendingProps = a) : s = is(a, r, 0, null), e = ns(e, r, n, null), s.return = t, e.return = t, s.sibling = e, t.child = s, t.child.memoizedState = Or(n), t.memoizedState = Jr, e) : Qr(t, a)); if (null !== (a = e.memoizedState)) { if (null !== (i = a.dehydrated)) { if (l) return 256 & t.flags ? (t.flags &= -257, ea(e, t, n, Error(o(422)))) : null !== t.memoizedState ? (t.child = e.child, t.flags |= 128, null) : (s = r.fallback, a = t.mode, r = is({ mode: "visible", children: r.children }, a, 0, null), (s = ns(s, a, n, null)).flags |= 2, r.return = t, s.return = t, r.sibling = s, t.child = r, 0 !== (1 & t.mode) && ai(t, e.child, null, n), t.child.memoizedState = Or(n), t.memoizedState = Jr, s); if (0 === (1 & t.mode)) t = ea(e, t, n, null); else if (Xe(i)) t = ea(e, t, n, Error(o(419))); else if (r = 0 !== (n & e.childLanes), Nr || r) { if (null !== (r = Ja)) { switch (n & -n) { case 4: s = 2; break; case 16: s = 8; break; case 64: case 128: case 256: case 512: case 1024: case 2048: case 4096: case 8192: case 16384: case 32768: case 65536: case 131072: case 262144: case 524288: case 1048576: case 2097152: case 4194304: case 8388608: case 16777216: case 33554432: case 67108864: s = 32; break; case 536870912: s = 268435456; break; default: s = 0 }0 !== (r = 0 !== (s & (r.suspendedLanes | n)) ? 0 : s) && r !== a.retryLane && (a.retryLane = r, Go(e, r, -1)) } No(), t = ea(e, t, n, Error(o(421))) } else Ne(i) ? (t.flags |= 128, t.child = e.child, t = Jo.bind(null, e), Ye(i, t), t = null) : (n = a.treeContext, j && (Tn = Ee(i), En = t, _n = !0, Dn = null, Un = !1, null !== n && (Hn[Mn++] = Nn, Hn[Mn++] = Xn, Hn[Mn++] = Fn, Nn = n.id, Xn = n.overflow, Fn = t)), (t = Qr(t, t.pendingProps.children)).flags |= 4096); return t } return s ? (r = $r(e, t, r.children, r.fallback, n), s = t.child, a = e.child.memoizedState, s.memoizedState = null === a ? Or(n) : { baseLanes: a.baseLanes | n, cachePool: null }, s.childLanes = e.childLanes & ~n, t.memoizedState = Jr, r) : (n = qr(e, t, r.children, n), t.memoizedState = null, n) } return s ? (r = $r(e, t, r.children, r.fallback, n), s = t.child, a = e.child.memoizedState, s.memoizedState = null === a ? Or(n) : { baseLanes: a.baseLanes | n, cachePool: null }, s.childLanes = e.childLanes & ~n, t.memoizedState = Jr, r) : (n = qr(e, t, r.children, n), t.memoizedState = null, n) } function Qr(e, t) { return (t = is({ mode: "visible", children: t }, e.mode, 0, null)).return = e, e.child = t } function qr(e, t, n, i) { var r = e.child; return e = r.sibling, n = es(r, { mode: "visible", children: n }), 0 === (1 & t.mode) && (n.lanes = i), n.return = t, n.sibling = null, null !== e && (null === (i = t.deletions) ? (t.deletions = [e], t.flags |= 16) : i.push(e)), t.child = n } function $r(e, t, n, i, r) { var a = t.mode, o = (e = e.child).sibling, s = { mode: "hidden", children: n }; return 0 === (1 & a) && t.child !== e ? ((n = t.child).childLanes = 0, n.pendingProps = s, t.deletions = null) : (n = es(e, s)).subtreeFlags = 14680064 & e.subtreeFlags, null !== o ? i = es(o, i) : (i = ns(i, a, r, null)).flags |= 2, i.return = t, n.return = t, n.sibling = i, t.child = n, i } function ea(e, t, n, i) { return null !== i && ei(i), ai(t, e.child, null, n), (e = Qr(t, t.pendingProps.children)).flags |= 2, t.memoizedState = null, e } function ta(e, t, n) { e.lanes |= t; var i = e.alternate; null !== i && (i.lanes |= t), gn(e.return, t, n) } function na(e, t, n, i, r) { var a = e.memoizedState; null === a ? e.memoizedState = { isBackwards: t, rendering: null, renderingStartTime: 0, last: i, tail: n, tailMode: r } : (a.isBackwards = t, a.rendering = null, a.renderingStartTime = 0, a.last = i, a.tail = n, a.tailMode = r) } function ia(e, t, n) { var i = t.pendingProps, r = i.revealOrder, a = i.tail; if (Xr(e, t, i.children, n), 0 !== (2 & (i = Ai.current))) i = 1 & i | 2, t.flags |= 128; else { if (null !== e && 0 !== (128 & e.flags)) e: for (e = t.child; null !== e;) { if (13 === e.tag) null !== e.memoizedState && ta(e, n, t); else if (19 === e.tag) ta(e, n, t); else if (null !== e.child) { e.child.return = e, e = e.child; continue } if (e === t) break e; for (; null === e.sibling;) { if (null === e.return || e.return === t) break e; e = e.return } e.sibling.return = e.return, e = e.sibling } i &= 1 } if (lt(Ai, i), 0 === (1 & t.mode)) t.memoizedState = null; else switch (r) { case "forwards": for (n = t.child, r = null; null !== n;)null !== (e = n.alternate) && null === pi(e) && (r = n), n = n.sibling; null === (n = r) ? (r = t.child, t.child = null) : (r = n.sibling, n.sibling = null), na(t, !1, r, n, a); break; case "backwards": for (n = null, r = t.child, t.child = null; null !== r;) { if (null !== (e = r.alternate) && null === pi(e)) { t.child = r; break } e = r.sibling, r.sibling = n, n = r, r = e } na(t, !0, n, null, a); break; case "together": na(t, !1, null, null, void 0); break; default: t.memoizedState = null }return t.child } function ra(e, t, n) { if (null !== e && (t.dependencies = e.dependencies), to |= t.lanes, 0 === (n & t.childLanes)) return null; if (null !== e && t.child !== e.child) throw Error(o(153)); if (null !== t.child) { for (n = es(e = t.child, e.pendingProps), t.child = n, n.return = t; null !== e.sibling;)e = e.sibling, (n = n.sibling = es(e, e.pendingProps)).return = t; n.sibling = null } return t.child } function aa(e, t) { switch (zn(t), t.tag) { case 1: return It(t.type) && ht(), 65536 & (e = t.flags) ? (t.flags = -65537 & e | 128, t) : null; case 3: return di(), st(ut), st(ct), mi(), 0 !== (65536 & (e = t.flags)) && 0 === (128 & e) ? (t.flags = -65537 & e | 128, t) : null; case 5: return hi(t), null; case 13: if (st(Ai), null !== (e = t.memoizedState) && null !== e.dehydrated) { if (null === t.alternate) throw Error(o(340)); $n() } return 65536 & (e = t.flags) ? (t.flags = -65537 & e | 128, t) : null; case 19: return st(Ai), null; case 4: return di(), null; case 10: return ln(t.type._context), null; case 22: case 23: return ko(), null; default: return null } } var oa = !1, sa = !1, la = "function" === typeof WeakSet ? WeakSet : Set, ga = null; function ca(e, t) { var n = e.ref; if (null !== n) if ("function" === typeof n) try { n(null) } catch (i) { Uo(e, t, i) } else n.current = null } function ua(e, t, n) { try { n() } catch (i) { Uo(e, t, i) } } var Ca = !1; function da(e, t, n) { var i = t.updateQueue; if (null !== (i = null !== i ? i.lastEffect : null)) { var r = i = i.next; do { if ((r.tag & e) === e) { var a = r.destroy; r.destroy = void 0, void 0 !== a && ua(t, n, a) } r = r.next } while (r !== i) } } function Ia(e, t) { if (null !== (t = null !== (t = t.updateQueue) ? t.lastEffect : null)) { var n = t = t.next; do { if ((n.tag & e) === e) { var i = n.create; n.destroy = i() } n = n.next } while (n !== t) } } function ha(e) { var t = e.ref; if (null !== t) { var n = e.stateNode; if (5 === e.tag) e = H(n); else e = n; "function" === typeof t ? t(e) : t.current = e } } function Aa(e, t, n) { if (_t && "function" === typeof _t.onCommitFiberUnmount) try { _t.onCommitFiberUnmount(Tt, t) } catch (o) { } switch (t.tag) { case 0: case 11: case 14: case 15: if (null !== (e = t.updateQueue) && null !== (e = e.lastEffect)) { var i = e = e.next; do { var r = i, a = r.destroy; r = r.tag, void 0 !== a && (0 !== (2 & r) || 0 !== (4 & r)) && ua(t, n, a), i = i.next } while (i !== e) } break; case 1: if (ca(t, n), "function" === typeof (e = t.stateNode).componentWillUnmount) try { e.props = t.memoizedProps, e.state = t.memoizedState, e.componentWillUnmount() } catch (o) { Uo(t, n, o) } break; case 5: ca(t, n); break; case 4: J ? Ba(e, t, n) : O && O && (t = t.stateNode.containerInfo, n = Se(t), We(t, n)) } } function pa(e, t, n) { for (var i = t; ;)if (Aa(e, i, n), null === i.child || J && 4 === i.tag) { if (i === t) break; for (; null === i.sibling;) { if (null === i.return || i.return === t) return; i = i.return } i.sibling.return = i.return, i = i.sibling } else i.child.return = i, i = i.child } function fa(e) { var t = e.alternate; null !== t && (e.alternate = null, fa(t)), e.child = null, e.deletions = null, e.sibling = null, 5 === e.tag && (null !== (t = e.stateNode) && ee(t)), e.stateNode = null, e.return = null, e.dependencies = null, e.memoizedProps = null, e.memoizedState = null, e.pendingProps = null, e.stateNode = null, e.updateQueue = null } function ma(e) { return 5 === e.tag || 3 === e.tag || 4 === e.tag } function va(e) { e: for (; ;) { for (; null === e.sibling;) { if (null === e.return || ma(e.return)) return null; e = e.return } for (e.sibling.return = e.return, e = e.sibling; 5 !== e.tag && 6 !== e.tag && 18 !== e.tag;) { if (2 & e.flags) continue e; if (null === e.child || 4 === e.tag) continue e; e.child.return = e, e = e.child } if (!(2 & e.flags)) return e.stateNode } } function ba(e) { if (J) { e: { for (var t = e.return; null !== t;) { if (ma(t)) break e; t = t.return } throw Error(o(160)) } var n = t; switch (n.tag) { case 5: t = n.stateNode, 32 & n.flags && (ve(t), n.flags &= -33), Ga(e, n = va(e), t); break; case 3: case 4: t = n.stateNode.containerInfo, ya(e, n = va(e), t); break; default: throw Error(o(161)) } } } function ya(e, t, n) { var i = e.tag; if (5 === i || 6 === i) e = e.stateNode, t ? pe(n, e, t) : Ce(n, e); else if (4 !== i && null !== (e = e.child)) for (ya(e, t, n), e = e.sibling; null !== e;)ya(e, t, n), e = e.sibling } function Ga(e, t, n) { var i = e.tag; if (5 === i || 6 === i) e = e.stateNode, t ? Ae(n, e, t) : ue(n, e); else if (4 !== i && null !== (e = e.child)) for (Ga(e, t, n), e = e.sibling; null !== e;)Ga(e, t, n), e = e.sibling } function Ba(e, t, n) { for (var i, r, a = t, s = !1; ;) { if (!s) { s = a.return; e: for (; ;) { if (null === s) throw Error(o(160)); switch (i = s.stateNode, s.tag) { case 5: r = !1; break e; case 3: case 4: i = i.containerInfo, r = !0; break e }s = s.return } s = !0 } if (5 === a.tag || 6 === a.tag) pa(e, a, n), r ? me(i, a.stateNode) : fe(i, a.stateNode); else if (18 === a.tag) r ? je(i, a.stateNode) : Oe(i, a.stateNode); else if (4 === a.tag) { if (null !== a.child) { i = a.stateNode.containerInfo, r = !0, a.child.return = a, a = a.child; continue } } else if (Aa(e, a, n), null !== a.child) { a.child.return = a, a = a.child; continue } if (a === t) break; for (; null === a.sibling;) { if (null === a.return || a.return === t) return; 4 === (a = a.return).tag && (s = !1) } a.sibling.return = a.return, a = a.sibling } } function Za(e, t) { if (J) { switch (t.tag) { case 0: case 11: case 14: case 15: return da(3, t, t.return), Ia(3, t), void da(5, t, t.return); case 1: case 12: case 17: return; case 5: var n = t.stateNode; if (null != n) { var i = t.memoizedProps; e = null !== e ? e.memoizedProps : i; var r = t.type, a = t.updateQueue; t.updateQueue = null, null !== a && he(n, a, r, e, i, t) } return; case 6: if (null === t.stateNode) throw Error(o(162)); return n = t.memoizedProps, void de(t.stateNode, null !== e ? e.memoizedProps : n, n); case 3: return void (j && null !== e && e.memoizedState.isDehydrated && Pe(t.stateNode.containerInfo)); case 13: case 19: return void wa(t) }throw Error(o(163)) } switch (t.tag) { case 0: case 11: case 14: case 15: return da(3, t, t.return), Ia(3, t), void da(5, t, t.return); case 12: case 22: case 23: return; case 13: case 19: return void wa(t); case 3: j && null !== e && e.memoizedState.isDehydrated && Pe(t.stateNode.containerInfo) }e: if (O) { switch (t.tag) { case 1: case 5: case 6: break e; case 3: case 4: t = t.stateNode, We(t.containerInfo, t.pendingChildren); break e }throw Error(o(163)) } } function wa(e) { var t = e.updateQueue; if (null !== t) { e.updateQueue = null; var n = e.stateNode; null === n && (n = e.stateNode = new la), t.forEach((function (t) { var i = Oo.bind(null, e, t); n.has(t) || (n.add(t), t.then(i, i)) })) } } function Sa(e, t, n) { ga = e, Ra(e, t, n) } function Ra(e, t, n) { for (var i = 0 !== (1 & e.mode); null !== ga;) { var r = ga, a = r.child; if (22 === r.tag && i) { var o = null !== r.memoizedState || oa; if (!o) { var s = r.alternate, l = null !== s && null !== s.memoizedState || sa; s = oa; var g = sa; if (oa = o, (sa = l) && !g) for (ga = r; null !== ga;)l = (o = ga).child, 22 === o.tag && null !== o.memoizedState ? Va(r) : null !== l ? (l.return = o, ga = l) : Va(r); for (; null !== a;)ga = a, Ra(a, t, n), a = a.sibling; ga = r, oa = s, sa = g } xa(e) } else 0 !== (8772 & r.subtreeFlags) && null !== a ? (a.return = r, ga = a) : xa(e) } } function xa(e) { for (; null !== ga;) { var t = ga; if (0 !== (8772 & t.flags)) { var n = t.alternate; try { if (0 !== (8772 & t.flags)) switch (t.tag) { case 0: case 11: case 15: sa || Ia(5, t); break; case 1: var i = t.stateNode; if (4 & t.flags && !sa) if (null === n) i.componentDidMount(); else { var r = t.elementType === t.type ? n.memoizedProps : en(t.type, n.memoizedProps); i.componentDidUpdate(r, n.memoizedState, i.__reactInternalSnapshotBeforeUpdate) } var a = t.updateQueue; null !== a && bn(t, a, i); break; case 3: var s = t.updateQueue; if (null !== s) { if (n = null, null !== t.child) switch (t.child.tag) { case 5: n = H(t.child.stateNode); break; case 1: n = t.child.stateNode }bn(t, s, n) } break; case 5: var l = t.stateNode; null === n && 4 & t.flags && Ie(l, t.type, t.memoizedProps, t); break; case 6: case 4: case 12: case 19: case 17: case 21: case 22: case 23: break; case 13: if (j && null === t.memoizedState) { var g = t.alternate; if (null !== g) { var c = g.memoizedState; if (null !== c) { var u = c.dehydrated; null !== u && Je(u) } } } break; default: throw Error(o(163)) }sa || 512 & t.flags && ha(t) } catch (C) { Uo(t, t.return, C) } } if (t === e) { ga = null; break } if (null !== (n = t.sibling)) { n.return = t.return, ga = n; break } ga = t.return } } function Wa(e) { for (; null !== ga;) { var t = ga; if (t === e) { ga = null; break } var n = t.sibling; if (null !== n) { n.return = t.return, ga = n; break } ga = t.return } } function Va(e) { for (; null !== ga;) { var t = ga; try { switch (t.tag) { case 0: case 11: case 15: var n = t.return; try { Ia(4, t) } catch (l) { Uo(t, n, l) } break; case 1: var i = t.stateNode; if ("function" === typeof i.componentDidMount) { var r = t.return; try { i.componentDidMount() } catch (l) { Uo(t, r, l) } } var a = t.return; try { ha(t) } catch (l) { Uo(t, a, l) } break; case 5: var o = t.return; try { ha(t) } catch (l) { Uo(t, o, l) } } } catch (l) { Uo(t, t.return, l) } if (t === e) { ga = null; break } var s = t.sibling; if (null !== s) { s.return = t.return, ga = s; break } ga = t.return } } var ka = 0, Ha = 1, Ma = 2, Fa = 3, Na = 4; if ("function" === typeof Symbol && Symbol.for) { var Xa = Symbol.for; ka = Xa("selector.component"), Ha = Xa("selector.has_pseudo_class"), Ma = Xa("selector.role"), Fa = Xa("selector.test_id"), Na = Xa("selector.text") } function Ya(e) { var t = Q(e); if (null != t) { if ("string" !== typeof t.memoizedProps["data-testname"]) throw Error(o(364)); return t } if (null === (e = re(e))) throw Error(o(362)); return e.stateNode.current } function Ka(e, t) { switch (t.$$typeof) { case ka: if (e.type === t.value) return !0; break; case Ha: e: { t = t.value, e = [e, 0]; for (var n = 0; n < e.length;) { var i = e[n++], r = e[n++], a = t[r]; if (5 !== i.tag || !se(i)) { for (; null != a && Ka(i, a);)a = t[++r]; if (r === t.length) { t = !0; break e } for (i = i.child; null !== i;)e.push(i, r), i = i.sibling } } t = !1 } return t; case Ma: if (5 === e.tag && le(e.stateNode, t.value)) return !0; break; case Na: if ((5 === e.tag || 6 === e.tag) && (null !== (e = oe(e)) && 0 <= e.indexOf(t.value))) return !0; break; case Fa: if (5 === e.tag && ("string" === typeof (e = e.memoizedProps["data-testname"]) && e.toLowerCase() === t.value.toLowerCase())) return !0; break; default: throw Error(o(365)) }return !1 } function La(e) { switch (e.$$typeof) { case ka: return "<" + (G(e.value) || "Unknown") + ">"; case Ha: return ":has(" + (La(e) || "") + ")"; case Ma: return '[role="' + e.value + '"]'; case Na: return '"' + e.value + '"'; case Fa: return '[data-testname="' + e.value + '"]'; default: throw Error(o(365)) } } function za(e, t) { var n = []; e = [e, 0]; for (var i = 0; i < e.length;) { var r = e[i++], a = e[i++], o = t[a]; if (5 !== r.tag || !se(r)) { for (; null != o && Ka(r, o);)o = t[++a]; if (a === t.length) n.push(r); else for (r = r.child; null !== r;)e.push(r, a), r = r.sibling } } return n } function Ea(e, t) { if (!ie) throw Error(o(363)); e = za(e = Ya(e), t), t = [], e = Array.from(e); for (var n = 0; n < e.length;) { var i = e[n++]; if (5 === i.tag) se(i) || t.push(i.stateNode); else for (i = i.child; null !== i;)e.push(i), i = i.sibling } return t } var Ta = Math.ceil, _a = s.ReactCurrentDispatcher, Ua = s.ReactCurrentOwner, Da = s.ReactCurrentBatchConfig, Pa = 0, Ja = null, Oa = null, ja = 0, Qa = 0, qa = ot(0), $a = 0, eo = null, to = 0, no = 0, io = 0, ro = null, ao = null, oo = 0, so = 1 / 0; function lo() { so = Yt() + 500 } var go, co = !1, uo = null, Co = null, Io = !1, ho = null, Ao = 0, po = 0, fo = null, mo = -1, vo = 0; function bo() { return 0 !== (6 & Pa) ? Yt() : -1 !== mo ? mo : mo = Yt() } function yo(e) { return 0 === (1 & e.mode) ? 1 : 0 !== (2 & Pa) && 0 !== ja ? ja & -ja : null !== Qt.transition ? (0 === vo && (e = Gt, 0 === (4194240 & (Gt <<= 1)) && (Gt = 64), vo = e), vo) : 0 !== (e = kt) ? e : $() } function Go(e, t, n) { if (50 < po) throw po = 0, fo = null, Error(o(185)); var i = Bo(e, t); return null === i ? null : (Wt(i, t, n), 0 !== (2 & Pa) && i === Ja || (i === Ja && (0 === (2 & Pa) && (no |= t), 4 === $a && xo(i, ja)), Zo(i, n), 1 === t && 0 === Pa && 0 === (1 & e.mode) && (lo(), Pt && jt())), i) } function Bo(e, t) { e.lanes |= t; var n = e.alternate; for (null !== n && (n.lanes |= t), n = e, e = e.return; null !== e;)e.childLanes |= t, null !== (n = e.alternate) && (n.childLanes |= t), n = e, e = e.return; return 3 === n.tag ? n.stateNode : null } function Zo(e, t) { var n = e.callbackNode; !function (e, t) { for (var n = e.suspendedLanes, i = e.pingedLanes, r = e.expirationTimes, a = e.pendingLanes; 0 < a;) { var o = 31 - vt(a), s = 1 << o, l = r[o]; -1 === l ? 0 !== (s & n) && 0 === (s & i) || (r[o] = St(s, t)) : l <= t && (e.expiredLanes |= s), a &= ~s } }(e, t); var i = wt(e, e === Ja ? ja : 0); if (0 === i) null !== n && Ft(n), e.callbackNode = null, e.callbackPriority = 0; else if (t = i & -i, e.callbackPriority !== t) { if (null != n && Ft(n), 1 === t) 0 === e.tag ? function (e) { Pt = !0, Ot(e) }(Wo.bind(null, e)) : Ot(Wo.bind(null, e)), te ? ne((function () { 0 === Pa && jt() })) : Mt(Kt, jt), n = null; else { switch (Ht(i)) { case 1: n = Kt; break; case 4: n = Lt; break; case 16: default: n = zt; break; case 536870912: n = Et }n = jo(n, wo.bind(null, e)) } e.callbackPriority = t, e.callbackNode = n } } function wo(e, t) { if (mo = -1, vo = 0, 0 !== (6 & Pa)) throw Error(o(327)); var n = e.callbackNode; if (To() && e.callbackNode !== n) return null; var i = wt(e, e === Ja ? ja : 0); if (0 === i) return null; if (0 !== (30 & i) || 0 !== (i & e.expiredLanes) || t) t = Xo(e, i); else { t = i; var r = Pa; Pa |= 2; var a = Fo(); for (Ja === e && ja === t || (lo(), Ho(e, t)); ;)try { Ko(); break } catch (l) { Mo(e, l) } on(), _a.current = a, Pa = r, null !== Oa ? t = 0 : (Ja = null, ja = 0, t = $a) } if (0 !== t) { if (2 === t && (0 !== (r = Rt(e)) && (i = r, t = So(e, r))), 1 === t) throw n = eo, Ho(e, 0), xo(e, i), Zo(e, Yt()), n; if (6 === t) xo(e, i); else { if (r = e.current.alternate, 0 === (30 & i) && !function (e) { for (var t = e; ;) { if (16384 & t.flags) { var n = t.updateQueue; if (null !== n && null !== (n = n.stores)) for (var i = 0; i < n.length; i++) { var r = n[i], a = r.getSnapshot; r = r.value; try { if (!Ut(a(), r)) return !1 } catch (s) { return !1 } } } if (n = t.child, 16384 & t.subtreeFlags && null !== n) n.return = t, t = n; else { if (t === e) break; for (; null === t.sibling;) { if (null === t.return || t.return === e) return !0; t = t.return } t.sibling.return = t.return, t = t.sibling } } return !0 }(r) && (2 === (t = Xo(e, i)) && (0 !== (a = Rt(e)) && (i = a, t = So(e, a))), 1 === t)) throw n = eo, Ho(e, 0), xo(e, i), Zo(e, Yt()), n; switch (e.finishedWork = r, e.finishedLanes = i, t) { case 0: case 1: throw Error(o(345)); case 2: case 5: Eo(e, ao); break; case 3: if (xo(e, i), (130023424 & i) === i && 10 < (t = oo + 500 - Yt())) { if (0 !== wt(e, 0)) break; if (((r = e.suspendedLanes) & i) !== i) { bo(), e.pingedLanes |= e.suspendedLanes & r; break } e.timeoutHandle = _(Eo.bind(null, e, ao), t); break } Eo(e, ao); break; case 4: if (xo(e, i), (4194240 & i) === i) break; for (t = e.eventTimes, r = -1; 0 < i;) { var s = 31 - vt(i); a = 1 << s, (s = t[s]) > r && (r = s), i &= ~a } if (i = r, 10 < (i = (120 > (i = Yt() - i) ? 120 : 480 > i ? 480 : 1080 > i ? 1080 : 1920 > i ? 1920 : 3e3 > i ? 3e3 : 4320 > i ? 4320 : 1960 * Ta(i / 1960)) - i)) { e.timeoutHandle = _(Eo.bind(null, e, ao), i); break } Eo(e, ao); break; default: throw Error(o(329)) } } } return Zo(e, Yt()), e.callbackNode === n ? wo.bind(null, e) : null } function So(e, t) { var n = ro; return e.current.memoizedState.isDehydrated && (Ho(e, t).flags |= 256), 2 !== (e = Xo(e, t)) && (t = ao, ao = n, null !== t && Ro(t)), e } function Ro(e) { null === ao ? ao = e : ao.push.apply(ao, e) } function xo(e, t) { for (t &= ~io, t &= ~no, e.suspendedLanes |= t, e.pingedLanes &= ~t, e = e.expirationTimes; 0 < t;) { var n = 31 - vt(t), i = 1 << n; e[n] = -1, t &= ~i } } function Wo(e) { if (0 !== (6 & Pa)) throw Error(o(327)); To(); var t = wt(e, 0); if (0 === (1 & t)) return Zo(e, Yt()), null; var n = Xo(e, t); if (0 !== e.tag && 2 === n) { var i = Rt(e); 0 !== i && (t = i, n = So(e, i)) } if (1 === n) throw n = eo, Ho(e, 0), xo(e, t), Zo(e, Yt()), n; if (6 === n) throw Error(o(345)); return e.finishedWork = e.current.alternate, e.finishedLanes = t, Eo(e, ao), Zo(e, Yt()), null } function Vo(e) { null !== ho && 0 === ho.tag && 0 === (6 & Pa) && To(); var t = Pa; Pa |= 1; var n = Da.transition, i = kt; try { if (Da.transition = null, kt = 1, e) return e() } finally { kt = i, Da.transition = n, 0 === (6 & (Pa = t)) && jt() } } function ko() { Qa = qa.current, st(qa) } function Ho(e, t) { e.finishedWork = null, e.finishedLanes = 0; var n = e.timeoutHandle; if (n !== D && (e.timeoutHandle = D, U(n)), null !== Oa) for (n = Oa.return; null !== n;) { var i = n; switch (zn(i), i.tag) { case 1: null !== (i = i.type.childContextTypes) && void 0 !== i && ht(); break; case 3: di(), st(ut), st(ct), mi(); break; case 5: hi(i); break; case 4: di(); break; case 13: case 19: st(Ai); break; case 10: ln(i.type._context); break; case 22: case 23: ko() }n = n.return } if (Ja = e, Oa = e = es(e.current, null), ja = Qa = t, $a = 0, eo = null, io = no = to = 0, ao = ro = null, null !== Cn) { for (t = 0; t < Cn.length; t++)if (null !== (i = (n = Cn[t]).interleaved)) { n.interleaved = null; var r = i.next, a = n.pending; if (null !== a) { var o = a.next; a.next = r, i.next = o } n.pending = i } Cn = null } return e } function Mo(e, t) { for (; ;) { var n = Oa; try { if (on(), vi.current = dr, wi) { for (var i = Gi.memoizedState; null !== i;) { var r = i.queue; null !== r && (r.pending = null), i = i.next } wi = !1 } if (yi = 0, Zi = Bi = Gi = null, Si = !1, Ri = 0, Ua.current = null, null === n || null === n.return) { $a = 1, eo = t, Oa = null; break } e: { var a = e, s = n.return, l = n, g = t; if (t = ja, l.flags |= 32768, null !== g && "object" === typeof g && "function" === typeof g.then) { var c = g, u = l, C = u.tag; if (0 === (1 & u.mode) && (0 === C || 11 === C || 15 === C)) { var d = u.alternate; d ? (u.updateQueue = d.updateQueue, u.memoizedState = d.memoizedState, u.lanes = d.lanes) : (u.updateQueue = null, u.memoizedState = null) } var I = Sr(s); if (null !== I) { I.flags &= -257, Rr(I, s, l, 0, t), 1 & I.mode && wr(a, c, t), g = c; var h = (t = I).updateQueue; if (null === h) { var A = new Set; A.add(g), t.updateQueue = A } else h.add(g); break e } if (0 === (1 & t)) { wr(a, c, t), No(); break e } g = Error(o(426)) } else if (_n && 1 & l.mode) { var p = Sr(s); if (null !== p) { 0 === (65536 & p.flags) && (p.flags |= 256), Rr(p, s, l, 0, t), ei(g); break e } } a = g, 4 !== $a && ($a = 2), null === ro ? ro = [a] : ro.push(a), g = pr(g, l), l = s; do { switch (l.tag) { case 3: l.flags |= 65536, t &= -t, l.lanes |= t, mn(l, Br(0, g, t)); break e; case 1: a = g; var f = l.type, m = l.stateNode; if (0 === (128 & l.flags) && ("function" === typeof f.getDerivedStateFromError || null !== m && "function" === typeof m.componentDidCatch && (null === Co || !Co.has(m)))) { l.flags |= 65536, t &= -t, l.lanes |= t, mn(l, Zr(l, a, t)); break e } }l = l.return } while (null !== l) } zo(n) } catch (v) { t = v, Oa === n && null !== n && (Oa = n = n.return); continue } break } } function Fo() { var e = _a.current; return _a.current = dr, null === e ? dr : e } function No() { 0 !== $a && 3 !== $a && 2 !== $a || ($a = 4), null === Ja || 0 === (268435455 & to) && 0 === (268435455 & no) || xo(Ja, ja) } function Xo(e, t) { var n = Pa; Pa |= 2; var i = Fo(); for (Ja === e && ja === t || Ho(e, t); ;)try { Yo(); break } catch (r) { Mo(e, r) } if (on(), Pa = n, _a.current = i, null !== Oa) throw Error(o(261)); return Ja = null, ja = 0, $a } function Yo() { for (; null !== Oa;)Lo(Oa) } function Ko() { for (; null !== Oa && !Nt();)Lo(Oa) } function Lo(e) { var t = go(e.alternate, e, Qa); e.memoizedProps = e.pendingProps, null === t ? zo(e) : Oa = t, Ua.current = null } function zo(e) { var t = e; do { var n = t.alternate; if (e = t.return, 0 === (32768 & t.flags)) { if (null !== (n = Mr(n, t, Qa))) return void (Oa = n) } else { if (null !== (n = aa(n, t))) return n.flags &= 32767, void (Oa = n); if (null === e) return $a = 6, void (Oa = null); e.flags |= 32768, e.subtreeFlags = 0, e.deletions = null } if (null !== (t = t.sibling)) return void (Oa = t); Oa = t = e } while (null !== t); 0 === $a && ($a = 5) } function Eo(e, t) { var n = kt, i = Da.transition; try { Da.transition = null, kt = 1, function (e, t, n) { do { To() } while (null !== ho); if (0 !== (6 & Pa)) throw Error(o(327)); var i = e.finishedWork, r = e.finishedLanes; if (null === i) return null; if (e.finishedWork = null, e.finishedLanes = 0, i === e.current) throw Error(o(177)); e.callbackNode = null, e.callbackPriority = 0; var a = i.lanes | i.childLanes; if (function (e, t) { var n = e.pendingLanes & ~t; e.pendingLanes = t, e.suspendedLanes = 0, e.pingedLanes = 0, e.expiredLanes &= t, e.mutableReadLanes &= t, e.entangledLanes &= t, t = e.entanglements; var i = e.eventTimes; for (e = e.expirationTimes; 0 < n;) { var r = 31 - vt(n), a = 1 << r; t[r] = 0, i[r] = -1, e[r] = -1, n &= ~a } }(e, a), e === Ja && (Oa = Ja = null, ja = 0), 0 === (2064 & i.subtreeFlags) && 0 === (2064 & i.flags) || Io || (Io = !0, jo(zt, (function () { return To(), null }))), a = 0 !== (15990 & i.flags), 0 !== (15990 & i.subtreeFlags) || a) { a = Da.transition, Da.transition = null; var s = kt; kt = 1; var l = Pa; Pa |= 4, Ua.current = null, function (e, t) { for (N(e.containerInfo), ga = t; null !== ga;)if (t = (e = ga).child, 0 !== (1028 & e.subtreeFlags) && null !== t) t.return = e, ga = t; else for (; null !== ga;) { e = ga; try { var n = e.alternate; if (0 !== (1024 & e.flags)) switch (e.tag) { case 0: case 11: case 15: case 5: case 6: case 4: case 17: break; case 1: if (null !== n) { var i = n.memoizedProps, r = n.memoizedState, a = e.stateNode, s = a.getSnapshotBeforeUpdate(e.elementType === e.type ? i : en(e.type, i), r); a.__reactInternalSnapshotBeforeUpdate = s } break; case 3: J && Ze(e.stateNode.containerInfo); break; default: throw Error(o(163)) } } catch (l) { Uo(e, e.return, l) } if (null !== (t = e.sibling)) { t.return = e.return, ga = t; break } ga = e.return } n = Ca, Ca = !1 }(e, i), function (e, t) { for (ga = t; null !== ga;) { var n = (t = ga).deletions; if (null !== n) for (var i = 0; i < n.length; i++) { var r = n[i]; try { var a = e; J ? Ba(a, r, t) : pa(a, r, t); var o = r.alternate; null !== o && (o.return = null), r.return = null } catch (b) { Uo(r, t, b) } } if (n = t.child, 0 !== (12854 & t.subtreeFlags) && null !== n) n.return = t, ga = n; else for (; null !== ga;) { t = ga; try { var s = t.flags; if (32 & s && J && ve(t.stateNode), 512 & s) { var l = t.alternate; if (null !== l) { var g = l.ref; null !== g && ("function" === typeof g ? g(null) : g.current = null) } } if (8192 & s) switch (t.tag) { case 13: if (null !== t.memoizedState) { var c = t.alternate; null !== c && null !== c.memoizedState || (oo = Yt()) } break; case 22: var u = null !== t.memoizedState, C = t.alternate, d = null !== C && null !== C.memoizedState; if (n = t, J) e: if (i = n, r = u, a = null, J) for (var I = i; ;) { if (5 === I.tag) { if (null === a) { a = I; var h = I.stateNode; r ? be(h) : Ge(I.stateNode, I.memoizedProps) } } else if (6 === I.tag) { if (null === a) { var A = I.stateNode; r ? ye(A) : Be(A, I.memoizedProps) } } else if ((22 !== I.tag && 23 !== I.tag || null === I.memoizedState || I === i) && null !== I.child) { I.child.return = I, I = I.child; continue } if (I === i) break; for (; null === I.sibling;) { if (null === I.return || I.return === i) break e; a === I && (a = null), I = I.return } a === I && (a = null), I.sibling.return = I.return, I = I.sibling } if (u && !d && 0 !== (1 & n.mode)) { ga = n; for (var p = n.child; null !== p;) { for (n = ga = p; null !== ga;) { var f = (i = ga).child; switch (i.tag) { case 0: case 11: case 14: case 15: da(4, i, i.return); break; case 1: ca(i, i.return); var m = i.stateNode; if ("function" === typeof m.componentWillUnmount) { var v = i.return; try { m.props = i.memoizedProps, m.state = i.memoizedState, m.componentWillUnmount() } catch (b) { Uo(i, v, b) } } break; case 5: ca(i, i.return); break; case 22: if (null !== i.memoizedState) { Wa(n); continue } }null !== f ? (f.return = i, ga = f) : Wa(n) } p = p.sibling } } }switch (4102 & s) { case 2: ba(t), t.flags &= -3; break; case 6: ba(t), t.flags &= -3, Za(t.alternate, t); break; case 4096: t.flags &= -4097; break; case 4100: t.flags &= -4097, Za(t.alternate, t); break; case 4: Za(t.alternate, t) } } catch (b) { Uo(t, t.return, b) } if (null !== (n = t.sibling)) { n.return = t.return, ga = n; break } ga = t.return } } }(e, i), X(e.containerInfo), e.current = i, Sa(i, e, r), Xt(), Pa = l, kt = s, Da.transition = a } else e.current = i; if (Io && (Io = !1, ho = e, Ao = r), a = e.pendingLanes, 0 === a && (Co = null), function (e) { if (_t && "function" === typeof _t.onCommitFiberRoot) try { _t.onCommitFiberRoot(Tt, e, void 0, 128 === (128 & e.current.flags)) } catch (t) { } }(i.stateNode), Zo(e, Yt()), null !== t) for (n = e.onRecoverableError, i = 0; i < t.length; i++)n(t[i]); if (co) throw co = !1, e = uo, uo = null, e; 0 !== (1 & Ao) && 0 !== e.tag && To(), a = e.pendingLanes, 0 !== (1 & a) ? e === fo ? po++ : (po = 0, fo = e) : po = 0, jt() }(e, t, n) } finally { Da.transition = i, kt = n } return null } function To() { if (null !== ho) { var e = Ht(Ao), t = Da.transition, n = kt; try { if (Da.transition = null, kt = 16 > e ? 16 : e, null === ho) var i = !1; else { if (e = ho, ho = null, Ao = 0, 0 !== (6 & Pa)) throw Error(o(331)); var r = Pa; for (Pa |= 4, ga = e.current; null !== ga;) { var a = ga, s = a.child; if (0 !== (16 & ga.flags)) { var l = a.deletions; if (null !== l) { for (var g = 0; g < l.length; g++) { var c = l[g]; for (ga = c; null !== ga;) { var u = ga; switch (u.tag) { case 0: case 11: case 15: da(8, u, a) }var C = u.child; if (null !== C) C.return = u, ga = C; else for (; null !== ga;) { var d = (u = ga).sibling, I = u.return; if (fa(u), u === c) { ga = null; break } if (null !== d) { d.return = I, ga = d; break } ga = I } } } var h = a.alternate; if (null !== h) { var A = h.child; if (null !== A) { h.child = null; do { var p = A.sibling; A.sibling = null, A = p } while (null !== A) } } ga = a } } if (0 !== (2064 & a.subtreeFlags) && null !== s) s.return = a, ga = s; else e: for (; null !== ga;) { if (0 !== (2048 & (a = ga).flags)) switch (a.tag) { case 0: case 11: case 15: da(9, a, a.return) }var f = a.sibling; if (null !== f) { f.return = a.return, ga = f; break e } ga = a.return } } var m = e.current; for (ga = m; null !== ga;) { var v = (s = ga).child; if (0 !== (2064 & s.subtreeFlags) && null !== v) v.return = s, ga = v; else e: for (s = m; null !== ga;) { if (0 !== (2048 & (l = ga).flags)) try { switch (l.tag) { case 0: case 11: case 15: Ia(9, l) } } catch (y) { Uo(l, l.return, y) } if (l === s) { ga = null; break e } var b = l.sibling; if (null !== b) { b.return = l.return, ga = b; break e } ga = l.return } } if (Pa = r, jt(), _t && "function" === typeof _t.onPostCommitFiberRoot) try { _t.onPostCommitFiberRoot(Tt, e) } catch (y) { } i = !0 } return i } finally { kt = n, Da.transition = t } } return !1 } function _o(e, t, n) { pn(e, t = Br(0, t = pr(n, t), 1)), t = bo(), null !== (e = Bo(e, 1)) && (Wt(e, 1, t), Zo(e, t)) } function Uo(e, t, n) { if (3 === e.tag) _o(e, e, n); else for (; null !== t;) { if (3 === t.tag) { _o(t, e, n); break } if (1 === t.tag) { var i = t.stateNode; if ("function" === typeof t.type.getDerivedStateFromError || "function" === typeof i.componentDidCatch && (null === Co || !Co.has(i))) { pn(t, e = Zr(t, e = pr(n, e), 1)), e = bo(), null !== (t = Bo(t, 1)) && (Wt(t, 1, e), Zo(t, e)); break } } t = t.return } } function Do(e, t, n) { var i = e.pingCache; null !== i && i.delete(t), t = bo(), e.pingedLanes |= e.suspendedLanes & n, Ja === e && (ja & n) === n && (4 === $a || 3 === $a && (130023424 & ja) === ja && 500 > Yt() - oo ? Ho(e, 0) : io |= n), Zo(e, t) } function Po(e, t) { 0 === t && (0 === (1 & e.mode) ? t = 1 : (t = Bt, 0 === (130023424 & (Bt <<= 1)) && (Bt = 4194304))); var n = bo(); null !== (e = Bo(e, t)) && (Wt(e, t, n), Zo(e, n)) } function Jo(e) { var t = e.memoizedState, n = 0; null !== t && (n = t.retryLane), Po(e, n) } function Oo(e, t) { var n = 0; switch (e.tag) { case 13: var i = e.stateNode, r = e.memoizedState; null !== r && (n = r.retryLane); break; case 19: i = e.stateNode; break; default: throw Error(o(314)) }null !== i && i.delete(t), Po(e, n) } function jo(e, t) { return Mt(e, t) } function Qo(e, t, n, i) { this.tag = e, this.key = n, this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null, this.index = 0, this.ref = null, this.pendingProps = t, this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null, this.mode = i, this.subtreeFlags = this.flags = 0, this.deletions = null, this.childLanes = this.lanes = 0, this.alternate = null } function qo(e, t, n, i) { return new Qo(e, t, n, i) } function $o(e) { return !(!(e = e.prototype) || !e.isReactComponent) } function es(e, t) { var n = e.alternate; return null === n ? ((n = qo(e.tag, t, e.key, e.mode)).elementType = e.elementType, n.type = e.type, n.stateNode = e.stateNode, n.alternate = e, e.alternate = n) : (n.pendingProps = t, n.type = e.type, n.flags = 0, n.subtreeFlags = 0, n.deletions = null), n.flags = 14680064 & e.flags, n.childLanes = e.childLanes, n.lanes = e.lanes, n.child = e.child, n.memoizedProps = e.memoizedProps, n.memoizedState = e.memoizedState, n.updateQueue = e.updateQueue, t = e.dependencies, n.dependencies = null === t ? null : { lanes: t.lanes, firstContext: t.firstContext }, n.sibling = e.sibling, n.index = e.index, n.ref = e.ref, n } function ts(e, t, n, i, r, a) { var s = 2; if (i = e, "function" === typeof e) $o(e) && (s = 1); else if ("string" === typeof e) s = 5; else e: switch (e) { case c: return ns(n.children, r, a, t); case u: s = 8, r |= 8; break; case C: return (e = qo(12, n, t, 2 | r)).elementType = C, e.lanes = a, e; case A: return (e = qo(13, n, t, r)).elementType = A, e.lanes = a, e; case p: return (e = qo(19, n, t, r)).elementType = p, e.lanes = a, e; case v: return is(n, r, a, t); default: if ("object" === typeof e && null !== e) switch (e.$$typeof) { case d: s = 10; break e; case I: s = 9; break e; case h: s = 11; break e; case f: s = 14; break e; case m: s = 16, i = null; break e }throw Error(o(130, null == e ? e : typeof e, "")) }return (t = qo(s, n, t, r)).elementType = e, t.type = i, t.lanes = a, t } function ns(e, t, n, i) { return (e = qo(7, e, i, t)).lanes = n, e } function is(e, t, n, i) { return (e = qo(22, e, i, t)).elementType = v, e.lanes = n, e.stateNode = {}, e } function rs(e, t, n) { return (e = qo(6, e, null, t)).lanes = n, e } function as(e, t, n) { return (t = qo(4, null !== e.children ? e.children : [], e.key, t)).lanes = n, t.stateNode = { containerInfo: e.containerInfo, pendingChildren: null, implementation: e.implementation }, t } function os(e, t, n, i, r) { this.tag = t, this.containerInfo = e, this.finishedWork = this.pingCache = this.current = this.pendingChildren = null, this.timeoutHandle = D, this.callbackNode = this.pendingContext = this.context = null, this.callbackPriority = 0, this.eventTimes = xt(0), this.expirationTimes = xt(-1), this.entangledLanes = this.finishedLanes = this.mutableReadLanes = this.expiredLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0, this.entanglements = xt(0), this.identifierPrefix = i, this.onRecoverableError = r, j && (this.mutableSourceEagerHydrationData = null) } function ss(e, t, n, i, r, a, o, s, l) { return e = new os(e, t, n, s, l), 1 === t ? (t = 1, !0 === a && (t |= 8)) : t = 0, a = qo(3, null, null, t), e.current = a, a.stateNode = e, a.memoizedState = { element: i, isDehydrated: n, cache: null, transitions: null }, In(a), e } function ls(e) { if (!e) return gt; e: { if (Z(e = e._reactInternals) !== e || 1 !== e.tag) throw Error(o(170)); var t = e; do { switch (t.tag) { case 3: t = t.stateNode.context; break e; case 1: if (It(t.type)) { t = t.stateNode.__reactInternalMemoizedMergedChildContext; break e } }t = t.return } while (null !== t); throw Error(o(171)) } if (1 === e.tag) { var n = e.type; if (It(n)) return pt(e, n, t) } return t } function gs(e) { var t = e._reactInternals; if (void 0 === t) { if ("function" === typeof e.render) throw Error(o(188)); throw e = Object.keys(e).join(","), Error(o(268, e)) } return null === (e = R(t)) ? null : e.stateNode } function cs(e, t) { if (null !== (e = e.memoizedState) && null !== e.dehydrated) { var n = e.retryLane; e.retryLane = 0 !== n && n < t ? n : t } } function us(e, t) { cs(e, t), (e = e.alternate) && cs(e, t) } function Cs(e) { return null === (e = R(e)) ? null : e.stateNode } function ds() { return null } return go = function (e, t, n) { if (null !== e) if (e.memoizedProps !== t.pendingProps || ut.current) Nr = !0; else { if (0 === (e.lanes & n) && 0 === (128 & t.flags)) return Nr = !1, function (e, t, n) { switch (t.tag) { case 3: Dr(t), $n(); break; case 5: Ii(t); break; case 1: It(t.type) && ft(t); break; case 4: Ci(t, t.stateNode.containerInfo); break; case 10: sn(0, t.type._context, t.memoizedProps.value); break; case 13: var i = t.memoizedState; if (null !== i) return null !== i.dehydrated ? (lt(Ai, 1 & Ai.current), t.flags |= 128, null) : 0 !== (n & t.child.childLanes) ? jr(e, t, n) : (lt(Ai, 1 & Ai.current), null !== (e = ra(e, t, n)) ? e.sibling : null); lt(Ai, 1 & Ai.current); break; case 19: if (i = 0 !== (n & t.childLanes), 0 !== (128 & e.flags)) { if (i) return ia(e, t, n); t.flags |= 128 } var r = t.memoizedState; if (null !== r && (r.rendering = null, r.tail = null, r.lastEffect = null), lt(Ai, Ai.current), i) break; return null; case 22: case 23: return t.lanes = 0, zr(e, t, n) }return ra(e, t, n) }(e, t, n); Nr = 0 !== (131072 & e.flags) } else Nr = !1, _n && 0 !== (1048576 & t.flags) && Kn(t, kn, t.index); switch (t.lanes = 0, t.tag) { case 2: var i = t.type; null !== e && (e.alternate = null, t.alternate = null, t.flags |= 2), e = t.pendingProps; var r = dt(t, ct.current); cn(t, n), r = ki(null, t, i, e, r, n); var a = Hi(); return t.flags |= 1, "object" === typeof r && null !== r && "function" === typeof r.render && void 0 === r.$$typeof ? (t.tag = 1, t.memoizedState = null, t.updateQueue = null, It(i) ? (a = !0, ft(t)) : a = !1, t.memoizedState = null !== r.state && void 0 !== r.state ? r.state : null, In(t), r.updater = Bn, t.stateNode = r, r._reactInternals = t, Rn(t, i, e, n), t = Ur(null, t, i, !0, a, n)) : (t.tag = 0, _n && a && Ln(t), Xr(null, t, r, n), t = t.child), t; case 16: i = t.elementType; e: { switch (null !== e && (e.alternate = null, t.alternate = null, t.flags |= 2), e = t.pendingProps, i = (r = i._init)(i._payload), t.type = i, r = t.tag = function (e) { if ("function" === typeof e) return $o(e) ? 1 : 0; if (void 0 !== e && null !== e) { if ((e = e.$$typeof) === h) return 11; if (e === f) return 14 } return 2 }(i), e = en(i, e), r) { case 0: t = Tr(null, t, i, e, n); break e; case 1: t = _r(null, t, i, e, n); break e; case 11: t = Yr(null, t, i, e, n); break e; case 14: t = Kr(null, t, i, en(i.type, e), n); break e }throw Error(o(306, i, "")) } return t; case 0: return i = t.type, r = t.pendingProps, Tr(e, t, i, r = t.elementType === i ? r : en(i, r), n); case 1: return i = t.type, r = t.pendingProps, _r(e, t, i, r = t.elementType === i ? r : en(i, r), n); case 3: e: { if (Dr(t), null === e) throw Error(o(387)); i = t.pendingProps, r = (a = t.memoizedState).element, hn(e, t), vn(t, i, null, n); var s = t.memoizedState; if (i = s.element, j && a.isDehydrated) { if (a = { element: i, isDehydrated: !1, cache: s.cache, transitions: s.transitions }, t.updateQueue.baseState = a, t.memoizedState = a, 256 & t.flags) { t = Pr(e, t, i, n, r = Error(o(423))); break e } if (i !== r) { t = Pr(e, t, i, n, r = Error(o(424))); break e } for (j && (Tn = ze(t.stateNode.containerInfo), En = t, _n = !0, Dn = null, Un = !1), n = oi(t, null, i, n), t.child = n; n;)n.flags = -3 & n.flags | 4096, n = n.sibling } else { if ($n(), i === r) { t = ra(e, t, n); break e } Xr(e, t, i, n) } t = t.child } return t; case 5: return Ii(t), null === e && jn(t), i = t.type, r = t.pendingProps, a = null !== e ? e.memoizedProps : null, s = r.children, E(i, r) ? s = null : null !== a && E(i, a) && (t.flags |= 32), Er(e, t), Xr(e, t, s, n), t.child; case 6: return null === e && jn(t), null; case 13: return jr(e, t, n); case 4: return Ci(t, t.stateNode.containerInfo), i = t.pendingProps, null === e ? t.child = ai(t, null, i, n) : Xr(e, t, i, n), t.child; case 11: return i = t.type, r = t.pendingProps, Yr(e, t, i, r = t.elementType === i ? r : en(i, r), n); case 7: return Xr(e, t, t.pendingProps, n), t.child; case 8: case 12: return Xr(e, t, t.pendingProps.children, n), t.child; case 10: e: { if (i = t.type._context, r = t.pendingProps, a = t.memoizedProps, sn(0, i, s = r.value), null !== a) if (Ut(a.value, s)) { if (a.children === r.children && !ut.current) { t = ra(e, t, n); break e } } else for (null !== (a = t.child) && (a.return = t); null !== a;) { var l = a.dependencies; if (null !== l) { s = a.child; for (var g = l.firstContext; null !== g;) { if (g.context === i) { if (1 === a.tag) { (g = An(-1, n & -n)).tag = 2; var c = a.updateQueue; if (null !== c) { var u = (c = c.shared).pending; null === u ? g.next = g : (g.next = u.next, u.next = g), c.pending = g } } a.lanes |= n, null !== (g = a.alternate) && (g.lanes |= n), gn(a.return, n, t), l.lanes |= n; break } g = g.next } } else if (10 === a.tag) s = a.type === t.type ? null : a.child; else if (18 === a.tag) { if (null === (s = a.return)) throw Error(o(341)); s.lanes |= n, null !== (l = s.alternate) && (l.lanes |= n), gn(s, n, t), s = a.sibling } else s = a.child; if (null !== s) s.return = a; else for (s = a; null !== s;) { if (s === t) { s = null; break } if (null !== (a = s.sibling)) { a.return = s.return, s = a; break } s = s.return } a = s } Xr(e, t, r.children, n), t = t.child } return t; case 9: return r = t.type, i = t.pendingProps.children, cn(t, n), i = i(r = un(r)), t.flags |= 1, Xr(e, t, i, n), t.child; case 14: return r = en(i = t.type, t.pendingProps), Kr(e, t, i, r = en(i.type, r), n); case 15: return Lr(e, t, t.type, t.pendingProps, n); case 17: return i = t.type, r = t.pendingProps, r = t.elementType === i ? r : en(i, r), null !== e && (e.alternate = null, t.alternate = null, t.flags |= 2), t.tag = 1, It(i) ? (e = !0, ft(t)) : e = !1, cn(t, n), wn(t, i, r), Rn(t, i, r, n), Ur(null, t, i, !0, e, n); case 19: return ia(e, t, n); case 22: return zr(e, t, n) }throw Error(o(156, t.tag)) }, t.attemptContinuousHydration = function (e) { 13 === e.tag && (Go(e, 134217728, bo()), us(e, 134217728)) }, t.attemptHydrationAtCurrentPriority = function (e) { if (13 === e.tag) { var t = bo(), n = yo(e); Go(e, n, t), us(e, n) } }, t.attemptSynchronousHydration = function (e) { switch (e.tag) { case 3: var t = e.stateNode; if (t.current.memoizedState.isDehydrated) { var n = Zt(t.pendingLanes); 0 !== n && (Vt(t, 1 | n), Zo(t, Yt()), 0 === (6 & Pa) && (lo(), jt())) } break; case 13: var i = bo(); Vo((function () { return Go(e, 1, i) })), us(e, 1) } }, t.batchedUpdates = function (e, t) { var n = Pa; Pa |= 1; try { return e(t) } finally { 0 === (Pa = n) && (lo(), Pt && jt()) } }, t.createComponentSelector = function (e) { return { $$typeof: ka, value: e } }, t.createContainer = function (e, t, n, i, r, a, o) { return ss(e, t, !1, null, 0, i, 0, a, o) }, t.createHasPseudoClassSelector = function (e) { return { $$typeof: Ha, value: e } }, t.createHydrationContainer = function (e, t, n, i, r, a, o, s, l) { return (e = ss(n, i, !0, e, 0, a, 0, s, l)).context = ls(null), n = e.current, (a = An(i = bo(), r = yo(n))).callback = void 0 !== t && null !== t ? t : null, pn(n, a), e.current.lanes = r, Wt(e, r, i), Zo(e, i), e }, t.createPortal = function (e, t, n) { var i = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null; return { $$typeof: g, key: null == i ? null : "" + i, children: e, containerInfo: t, implementation: n } }, t.createRoleSelector = function (e) { return { $$typeof: Ma, value: e } }, t.createTestNameSelector = function (e) { return { $$typeof: Fa, value: e } }, t.createTextSelector = function (e) { return { $$typeof: Na, value: e } }, t.deferredUpdates = function (e) { var t = kt, n = Da.transition; try { return Da.transition = null, kt = 16, e() } finally { kt = t, Da.transition = n } }, t.discreteUpdates = function (e, t, n, i, r) { var a = kt, o = Da.transition; try { return Da.transition = null, kt = 1, e(t, n, i, r) } finally { kt = a, Da.transition = o, 0 === Pa && lo() } }, t.findAllNodes = Ea, t.findBoundingRects = function (e, t) { if (!ie) throw Error(o(363)); t = Ea(e, t), e = []; for (var n = 0; n < t.length; n++)e.push(ae(t[n])); for (t = e.length - 1; 0 < t; t--)for (var i = (n = e[t]).x, r = i + n.width, a = n.y, s = a + n.height, l = t - 1; 0 <= l; l--)if (t !== l) { var g = e[l], c = g.x, u = c + g.width, C = g.y, d = C + g.height; if (i >= c && a >= C && r <= u && s <= d) { e.splice(t, 1); break } if (!(i !== c || n.width !== g.width || d < a || C > s)) { C > a && (g.height += C - a, g.y = a), d < s && (g.height = s - C), e.splice(t, 1); break } if (!(a !== C || n.height !== g.height || u < i || c > r)) { c > i && (g.width += c - i, g.x = i), u < r && (g.width = r - c), e.splice(t, 1); break } } return e }, t.findHostInstance = gs, t.findHostInstanceWithNoPortals = function (e) { return null === (e = null !== (e = S(e)) ? W(e) : null) ? null : e.stateNode }, t.findHostInstanceWithWarning = function (e) { return gs(e) }, t.flushControlled = function (e) { var t = Pa; Pa |= 1; var n = Da.transition, i = kt; try { Da.transition = null, kt = 1, e() } finally { kt = i, Da.transition = n, 0 === (Pa = t) && (lo(), jt()) } }, t.flushPassiveEffects = To, t.flushSync = Vo, t.focusWithin = function (e, t) { if (!ie) throw Error(o(363)); for (t = za(e = Ya(e), t), t = Array.from(t), e = 0; e < t.length;) { var n = t[e++]; if (!se(n)) { if (5 === n.tag && ge(n.stateNode)) return !0; for (n = n.child; null !== n;)t.push(n), n = n.sibling } } return !1 }, t.getCurrentUpdatePriority = function () { return kt }, t.getFindAllNodesFailureDescription = function (e, t) { if (!ie) throw Error(o(363)); var n = 0, i = []; e = [Ya(e), 0]; for (var r = 0; r < e.length;) { var a = e[r++], s = e[r++], l = t[s]; if ((5 !== a.tag || !se(a)) && (Ka(a, l) && (i.push(La(l)), ++s > n && (n = s)), s < t.length)) for (a = a.child; null !== a;)e.push(a, s), a = a.sibling } if (n < t.length) { for (e = []; n < t.length; n++)e.push(La(t[n])); return "findAllNodes was able to match part of the selector:\n  " + i.join(" > ") + "\n\nNo matching component was found for:\n  " + e.join(" > ") } return null }, t.getPublicRootInstance = function (e) { return (e = e.current).child ? 5 === e.child.tag ? H(e.child.stateNode) : e.child.stateNode : null }, t.injectIntoDevTools = function (e) { if (e = { bundleType: e.bundleType, version: e.version, rendererPackageName: e.rendererPackageName, rendererConfig: e.rendererConfig, overrideHookState: null, overrideHookStateDeletePath: null, overrideHookStateRenamePath: null, overrideProps: null, overridePropsDeletePath: null, overridePropsRenamePath: null, setErrorHandler: null, setSuspenseHandler: null, scheduleUpdate: null, currentDispatcherRef: s.ReactCurrentDispatcher, findHostInstanceByFiber: Cs, findFiberByHostInstance: e.findFiberByHostInstance || ds, findHostInstancesForRefresh: null, scheduleRefresh: null, scheduleRoot: null, setRefreshHandler: null, getCurrentFiber: null, reconcilerVersion: "18.0.0-fc46dba67-20220329" }, "undefined" === typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) e = !1; else { var t = __REACT_DEVTOOLS_GLOBAL_HOOK__; if (t.isDisabled || !t.supportsFiber) e = !0; else { try { Tt = t.inject(e), _t = t } catch (n) { } e = !!t.checkDCE } } return e }, t.isAlreadyRendering = function () { return !1 }, t.observeVisibleRects = function (e, t, n, i) { if (!ie) throw Error(o(363)); e = Ea(e, t); var r = ce(e, n, i).disconnect; return { disconnect: function () { r() } } }, t.registerMutableSourceForHydration = function (e, t) { var n = t._getVersion; n = n(t._source), null == e.mutableSourceEagerHydrationData ? e.mutableSourceEagerHydrationData = [t, n] : e.mutableSourceEagerHydrationData.push(t, n) }, t.runWithPriority = function (e, t) { var n = kt; try { return kt = e, t() } finally { kt = n } }, t.shouldError = function () { return null }, t.shouldSuspend = function () { return !1 }, t.updateContainer = function (e, t, n, i) { var r = t.current, a = bo(), o = yo(r); return n = ls(n), null === t.context ? t.context = n : t.pendingContext = n, (t = An(a, o)).payload = { element: e }, null !== (i = void 0 === i ? null : i) && (t.callback = i), pn(r, t), null !== (e = Go(r, o, a)) && fn(e, r, o), o }, t } }, 4585: function (e, t, n) { "use strict"; e.exports = n(4976) }, 258: function (e, t, n) { "use strict"; e.exports = n(3721) }, 9803: function (e, t, n) { e.exports = function (e) { var t = {}; function n(i) { if (t[i]) return t[i].exports; var r = t[i] = { exports: {}, id: i, loaded: !1 }; return e[i].call(r.exports, r, r.exports, n), r.loaded = !0, r.exports } return n.m = e, n.c = t, n.p = "", n(0) }([function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var i = Object.assign || function (e) { for (var t = 1; t < arguments.length; t++) { var n = arguments[t]; for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i]) } return e }, r = function () { function e(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } return function (t, n, i) { return n && e(t.prototype, n), i && e(t, i), t } }(), a = n(1), o = C(a), s = C(n(2)), l = C(n(10)), g = C(n(12)), c = C(n(13)), u = function (e) { if (e && e.__esModule) return e; var t = {}; if (null != e) for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]); return t.default = e, t }(n(14)); function C(e) { return e && e.__esModule ? e : { default: e } } var d = ["\ud83d\udd19", "\u23f0"], I = function (e) { function t(e) { !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, t); var n = function (e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" !== typeof t && "function" !== typeof t ? e : t }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e)); return n.state = { textLines: [], isDone: !1 }, n.onTypingDone = function () { n.mounted && (n.setState({ isDone: !0 }), n.props.onTypingDone()) }, n.delayGenerator = function (e, t, i, r) { var a = n.props.avgTypingDelay, o = n.props.stdTypingDelay; return n.props.delayGenerator(a, o, { line: e, lineIdx: t, character: i, charIdx: r, defDelayGenerator: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : a, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : o; return u.gaussianRnd(e, t) } }) }, n.typeLine = function (e, t) { if (!n.mounted) return Promise.resolve(); var i = e, r = n.props.onLineTyped; return u.isBackspaceElement(e) ? (e.props.delay > 0 && (n.introducedDelay = e.props.delay), i = String("\ud83d\udd19").repeat(e.props.count)) : u.isDelayElement(e) && (n.introducedDelay = e.props.ms, i = "\u23f0"), new Promise((function (e, a) { n.setState({ textLines: n.state.textLines.concat([""]) }, (function () { u.eachPromise(i, n.typeCharacter, i, t).then((function () { return r(i, t) })).then(e).catch(a) })) })) }, n.typeCharacter = function (e, t, i, r) { if (!n.mounted) return Promise.resolve(); var a = n.props.onCharacterTyped; return new Promise((function (o) { var s = n.state.textLines.slice(); u.sleep(n.introducedDelay).then((function () { n.introducedDelay = null; var l = "\ud83d\udd19" === e; if ("\u23f0" === e) o(); else { if (l && r > 0) { for (var g = r - 1, c = s[g], u = g; u >= 0 && (!(c.length > 0) || d.includes(c[0])); u--)c = s[g = u]; s[g] = c.substr(0, c.length - 1) } else s[r] += e; n.setState({ textLines: s }, (function () { var s = n.delayGenerator(i, r, e, t); a(e, t), setTimeout(o, s) })) } })) })) }, n.mounted = !1, n.linesToType = [], n.introducedDelay = null, e.children && (n.linesToType = u.extractTextFromElement(e.children)), n } return function (e, t) { if ("function" !== typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(t, e), r(t, [{ key: "componentDidMount", value: function () { this.mounted = !0; var e = this.props, t = e.children, n = e.startDelay; t ? n > 0 && "undefined" !== typeof window ? setTimeout(this.typeAllLines.bind(this), n) : this.typeAllLines() : this.onTypingDone() } }, { key: "shouldComponentUpdate", value: function (e, t) { if (t.textLines.length !== this.state.textLines.length) return !0; for (var n = 0; n < t.textLines.length; n++) { if (this.state.textLines[n] !== t.textLines[n]) return !0 } return this.state.isDone !== t.isDone } }, { key: "componentWillUnmount", value: function () { this.mounted = !1 } }, { key: "typeAllLines", value: function () { var e = this, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.linesToType; return u.eachPromise(t, this.typeLine).then((function () { return e.onTypingDone() })) } }, { key: "render", value: function () { var e = this.props, t = e.className, n = e.cursor, r = this.state.isDone, a = u.cloneElementWithSpecifiedText({ element: this.props.children, textLines: this.state.textLines }); return o.default.createElement("div", { className: "Typist " + t }, a, o.default.createElement(l.default, i({ isDone: r }, n))) } }]), t }(a.Component); I.propTypes = { children: s.default.node, className: s.default.string, avgTypingDelay: s.default.number, stdTypingDelay: s.default.number, startDelay: s.default.number, cursor: s.default.object, onCharacterTyped: s.default.func, onLineTyped: s.default.func, onTypingDone: s.default.func, delayGenerator: s.default.func }, I.defaultProps = { className: "", avgTypingDelay: 70, stdTypingDelay: 25, startDelay: 0, cursor: {}, onCharacterTyped: function () { }, onLineTyped: function () { }, onTypingDone: function () { }, delayGenerator: u.gaussianRnd }, t.default = I, I.Backspace = g.default, I.Delay = c.default }, function (e, t) { e.exports = n(2791) }, function (e, t, n) { e.exports = n(9)() }, function (e, t, n) { "use strict"; var i = n(4), r = n(5), a = n(6), o = n(7), s = n(8); e.exports = function (e, t) { var n = "function" === typeof Symbol && Symbol.iterator, l = "@@iterator"; var g = "<<anonymous>>", c = { array: I("array"), bool: I("boolean"), func: I("function"), number: I("number"), object: I("object"), string: I("string"), symbol: I("symbol"), any: d(i.thatReturnsNull), arrayOf: function (e) { return d((function (t, n, i, r, a) { if ("function" !== typeof e) return new C("Property `" + a + "` of component `" + i + "` has invalid PropType notation inside arrayOf."); var s = t[n]; if (!Array.isArray(s)) return new C("Invalid " + r + " `" + a + "` of type `" + A(s) + "` supplied to `" + i + "`, expected an array."); for (var l = 0; l < s.length; l++) { var g = e(s, l, i, r, a + "[" + l + "]", o); if (g instanceof Error) return g } return null })) }, element: d((function (t, n, i, r, a) { var o = t[n]; return e(o) ? null : new C("Invalid " + r + " `" + a + "` of type `" + A(o) + "` supplied to `" + i + "`, expected a single ReactElement.") })), instanceOf: function (e) { return d((function (t, n, i, r, a) { if (!(t[n] instanceof e)) { var o = e.name || g; return new C("Invalid " + r + " `" + a + "` of type `" + (((s = t[n]).constructor && s.constructor.name ? s.constructor.name : g) + "` supplied to `") + i + "`, expected instance of `" + o + "`.") } var s; return null })) }, node: d((function (e, t, n, i, r) { return h(e[t]) ? null : new C("Invalid " + i + " `" + r + "` supplied to `" + n + "`, expected a ReactNode.") })), objectOf: function (e) { return d((function (t, n, i, r, a) { if ("function" !== typeof e) return new C("Property `" + a + "` of component `" + i + "` has invalid PropType notation inside objectOf."); var s = t[n], l = A(s); if ("object" !== l) return new C("Invalid " + r + " `" + a + "` of type `" + l + "` supplied to `" + i + "`, expected an object."); for (var g in s) if (s.hasOwnProperty(g)) { var c = e(s, g, i, r, a + "." + g, o); if (c instanceof Error) return c } return null })) }, oneOf: function (e) { if (!Array.isArray(e)) return i.thatReturnsNull; return d((function (t, n, i, r, a) { for (var o = t[n], s = 0; s < e.length; s++)if (u(o, e[s])) return null; return new C("Invalid " + r + " `" + a + "` of value `" + o + "` supplied to `" + i + "`, expected one of " + JSON.stringify(e) + ".") })) }, oneOfType: function (e) { if (!Array.isArray(e)) return i.thatReturnsNull; for (var t = 0; t < e.length; t++) { var n = e[t]; if ("function" !== typeof n) return a(!1, "Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.", f(n), t), i.thatReturnsNull } return d((function (t, n, i, r, a) { for (var s = 0; s < e.length; s++)if (null == (0, e[s])(t, n, i, r, a, o)) return null; return new C("Invalid " + r + " `" + a + "` supplied to `" + i + "`.") })) }, shape: function (e) { return d((function (t, n, i, r, a) { var s = t[n], l = A(s); if ("object" !== l) return new C("Invalid " + r + " `" + a + "` of type `" + l + "` supplied to `" + i + "`, expected `object`."); for (var g in e) { var c = e[g]; if (c) { var u = c(s, g, i, r, a + "." + g, o); if (u) return u } } return null })) } }; function u(e, t) { return e === t ? 0 !== e || 1 / e === 1 / t : e !== e && t !== t } function C(e) { this.message = e, this.stack = "" } function d(e) { function n(n, i, a, s, l, c, u) { (s = s || g, c = c || a, u !== o) && (t && r(!1, "Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types")); return null == i[a] ? n ? null === i[a] ? new C("The " + l + " `" + c + "` is marked as required in `" + s + "`, but its value is `null`.") : new C("The " + l + " `" + c + "` is marked as required in `" + s + "`, but its value is `undefined`.") : null : e(i, a, s, l, c) } var i = n.bind(null, !1); return i.isRequired = n.bind(null, !0), i } function I(e) { return d((function (t, n, i, r, a, o) { var s = t[n]; return A(s) !== e ? new C("Invalid " + r + " `" + a + "` of type `" + p(s) + "` supplied to `" + i + "`, expected `" + e + "`.") : null })) } function h(t) { switch (typeof t) { case "number": case "string": case "undefined": return !0; case "boolean": return !t; case "object": if (Array.isArray(t)) return t.every(h); if (null === t || e(t)) return !0; var i = function (e) { var t = e && (n && e[n] || e[l]); if ("function" === typeof t) return t }(t); if (!i) return !1; var r, a = i.call(t); if (i !== t.entries) { for (; !(r = a.next()).done;)if (!h(r.value)) return !1 } else for (; !(r = a.next()).done;) { var o = r.value; if (o && !h(o[1])) return !1 } return !0; default: return !1 } } function A(e) { var t = typeof e; return Array.isArray(e) ? "array" : e instanceof RegExp ? "object" : function (e, t) { return "symbol" === e || "Symbol" === t["@@toStringTag"] || "function" === typeof Symbol && t instanceof Symbol }(t, e) ? "symbol" : t } function p(e) { if ("undefined" === typeof e || null === e) return "" + e; var t = A(e); if ("object" === t) { if (e instanceof Date) return "date"; if (e instanceof RegExp) return "regexp" } return t } function f(e) { var t = p(e); switch (t) { case "array": case "object": return "an " + t; case "boolean": case "date": case "regexp": return "a " + t; default: return t } } return C.prototype = Error.prototype, c.checkPropTypes = s, c.PropTypes = c, c } }, function (e, t) { "use strict"; function n(e) { return function () { return e } } var i = function () { }; i.thatReturns = n, i.thatReturnsFalse = n(!1), i.thatReturnsTrue = n(!0), i.thatReturnsNull = n(null), i.thatReturnsThis = function () { return this }, i.thatReturnsArgument = function (e) { return e }, e.exports = i }, function (e, t) { "use strict"; e.exports = function (e, t, n, i, r, a, o, s) { if (!e) { var l; if (void 0 === t) l = new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings."); else { var g = [n, i, r, a, o, s], c = 0; (l = new Error(t.replace(/%s/g, (function () { return g[c++] })))).name = "Invariant Violation" } throw l.framesToPop = 1, l } } }, function (e, t, n) { "use strict"; var i = n(4); e.exports = i }, function (e, t) { "use strict"; e.exports = "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED" }, function (e, t, n) { "use strict"; e.exports = function (e, t, n, i, r) { } }, function (e, t, n) { "use strict"; var i = n(4), r = n(5), a = n(7); e.exports = function () { function e(e, t, n, i, o, s) { s !== a && r(!1, "Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types") } function t() { return e } e.isRequired = e; var n = { array: e, bool: e, func: e, number: e, object: e, string: e, symbol: e, any: e, arrayOf: t, element: e, instanceOf: t, node: e, objectOf: t, oneOf: t, oneOfType: t, shape: t }; return n.checkPropTypes = i, n.PropTypes = n, n } }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var i = function () { function e(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } return function (t, n, i) { return n && e(t.prototype, n), i && e(t, i), t } }(), r = n(1), a = s(r), o = s(n(2)); function s(e) { return e && e.__esModule ? e : { default: e } } n(11); var l = function (e) { function t(e) { !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, t); var n = function (e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" !== typeof t && "function" !== typeof t ? e : t }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e)); return n._isReRenderingCursor = !1, n.state = { shouldRender: n.props.show }, n } return function (e, t) { if ("function" !== typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(t, e), i(t, [{ key: "componentWillReceiveProps", value: function (e) { var t = this; !this.props.isDone && e.isDone && this.props.hideWhenDone && setTimeout((function () { return t.setState({ shouldRender: !1 }) }), this.props.hideWhenDoneDelay) } }, { key: "componentDidUpdate", value: function () { var e = this.props, t = e.show, n = e.isDone; t && (n || this._isReRenderingCursor || this._reRenderCursor()) } }, { key: "_reRenderCursor", value: function () { var e = this; this._isReRenderingCursor = !0, this.setState({ shouldRender: !1 }, (function () { e.setState({ shouldRender: !0 }, (function () { e._isReRenderingCursor = !1 })) })) } }, { key: "render", value: function () { if (this.state.shouldRender) { var e = this.props.blink ? " Cursor--blinking" : ""; return a.default.createElement("span", { className: "Cursor" + e }, this.props.element) } return null } }]), t }(r.Component); l.propTypes = { blink: o.default.bool, show: o.default.bool, element: o.default.node, hideWhenDone: o.default.bool, hideWhenDoneDelay: o.default.number, isDone: o.default.bool }, l.defaultProps = { blink: !0, show: !0, element: "|", hideWhenDone: !1, hideWhenDoneDelay: 1e3, isDone: !1 }, t.default = l }, function (e, t) { }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var i = a(n(1)), r = a(n(2)); function a(e) { return e && e.__esModule ? e : { default: e } } var o = function () { return i.default.createElement("noscript", null) }; o.componentName = "Backspace", o.propTypes = { count: r.default.number, delay: r.default.number }, o.defaultProps = { count: 1, delay: 0 }, t.default = o }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var i = a(n(1)), r = a(n(2)); function a(e) { return e && e.__esModule ? e : { default: e } } var o = function () { return i.default.createElement("noscript", null) }; o.componentName = "Delay", o.propTypes = { ms: r.default.number.isRequired }, t.default = o }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.sleep = void 0; var i = function (e, t) { if (Array.isArray(e)) return e; if (Symbol.iterator in Object(e)) return function (e, t) { var n = [], i = !0, r = !1, a = void 0; try { for (var o, s = e[Symbol.iterator](); !(i = (o = s.next()).done) && (n.push(o.value), !t || n.length !== t); i = !0); } catch (l) { r = !0, a = l } finally { try { !i && s.return && s.return() } finally { if (r) throw a } } return n }(e, t); throw new TypeError("Invalid attempt to destructure non-iterable instance") }; t.gaussianRnd = function (e, t) { for (var n = 0, i = 0; i < 12; i++)n += Math.random(); return n -= 6, Math.round(n * t) + e }, t.eachPromise = function (e, t) { for (var n = arguments.length, i = Array(n > 2 ? n - 2 : 0), r = 2; r < n; r++)i[r - 2] = arguments[r]; return Array.from(e).reduce((function (e, n, r) { return e.then((function () { return t.apply(void 0, [n, r].concat(i)) })) }), Promise.resolve()) }, t.exclude = s, t.isBackspaceElement = l, t.isDelayElement = g, t.extractTextFromElement = function (e) { var t = e ? [e] : [], n = []; for (; t.length > 0;) { var i = t.pop(); if (o.default.isValidElement(i)) l(i) || g(i) ? n.unshift(i) : o.default.Children.forEach(i.props.children, (function (e) { t.push(e) })); else if (Array.isArray(i)) { var r = !0, a = !1, s = void 0; try { for (var c, u = i[Symbol.iterator](); !(r = (c = u.next()).done); r = !0) { var C = c.value; t.push(C) } } catch (d) { a = !0, s = d } finally { try { !r && u.return && u.return() } finally { if (a) throw s } } } else n.unshift(i) } return n }, t.cloneElement = c, t.cloneElementWithSpecifiedText = function (e) { var t = e.element, n = e.textLines; if (!t) return; return u(t, n, 0)[0] }; var r, a = n(1), o = (r = a) && r.__esModule ? r : { default: r }; t.sleep = function (e) { return new Promise((function (t) { return null != e ? setTimeout(t, e) : t() })) }; function s(e, t) { var n = {}; for (var i in e) -1 === t.indexOf(i) && (n[i] = e[i]); return n } function l(e) { return e && e.type && "Backspace" === e.type.componentName } function g(e) { return e && e.type && "Delay" === e.type.componentName } function c(e, t) { var n = e.type, i = s(e.props, ["children"]), r = (new Date).getUTCMilliseconds() + Math.random() + Math.random(); return i.key = "Typist-element-" + n + "-" + r, o.default.createElement.apply(o.default, [n, i].concat(function (e) { if (Array.isArray(e)) { for (var t = 0, n = Array(e.length); t < e.length; t++)n[t] = e[t]; return n } return Array.from(e) }(t))) } function u(e, t, n) { if (n >= t.length) return [null, n]; var r = n, a = function (e) { var n = u(e, t, r), a = i(n, 2), o = a[0], s = a[1]; return r = s, o }; return o.default.isValidElement(e) && !(l(e) || g(e)) ? [c(e, o.default.Children.map(e.props.children, a) || []), r] : Array.isArray(e) ? [e.map(a), r] : [t[r], r + 1] } }]) }, 6374: function (e, t, n) { "use strict"; var i = n(2791), r = Symbol.for("react.element"), a = Symbol.for("react.fragment"), o = Object.prototype.hasOwnProperty, s = i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner, l = { key: !0, ref: !0, __self: !0, __source: !0 }; function g(e, t, n) { var i, a = {}, g = null, c = null; for (i in void 0 !== n && (g = "" + n), void 0 !== t.key && (g = "" + t.key), void 0 !== t.ref && (c = t.ref), t) o.call(t, i) && !l.hasOwnProperty(i) && (a[i] = t[i]); if (e && e.defaultProps) for (i in t = e.defaultProps) void 0 === a[i] && (a[i] = t[i]); return { $$typeof: r, type: e, key: g, ref: c, props: a, _owner: s.current } } t.Fragment = a, t.jsx = g, t.jsxs = g }, 9117: function (e, t) { "use strict"; var n = Symbol.for("react.element"), i = Symbol.for("react.portal"), r = Symbol.for("react.fragment"), a = Symbol.for("react.strict_mode"), o = Symbol.for("react.profiler"), s = Symbol.for("react.provider"), l = Symbol.for("react.context"), g = Symbol.for("react.forward_ref"), c = Symbol.for("react.suspense"), u = Symbol.for("react.memo"), C = Symbol.for("react.lazy"), d = Symbol.iterator; var I = { isMounted: function () { return !1 }, enqueueForceUpdate: function () { }, enqueueReplaceState: function () { }, enqueueSetState: function () { } }, h = Object.assign, A = {}; function p(e, t, n) { this.props = e, this.context = t, this.refs = A, this.updater = n || I } function f() { } function m(e, t, n) { this.props = e, this.context = t, this.refs = A, this.updater = n || I } p.prototype.isReactComponent = {}, p.prototype.setState = function (e, t) { if ("object" !== typeof e && "function" !== typeof e && null != e) throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables."); this.updater.enqueueSetState(this, e, t, "setState") }, p.prototype.forceUpdate = function (e) { this.updater.enqueueForceUpdate(this, e, "forceUpdate") }, f.prototype = p.prototype; var v = m.prototype = new f; v.constructor = m, h(v, p.prototype), v.isPureReactComponent = !0; var b = Array.isArray, y = Object.prototype.hasOwnProperty, G = { current: null }, B = { key: !0, ref: !0, __self: !0, __source: !0 }; function Z(e, t, i) { var r, a = {}, o = null, s = null; if (null != t) for (r in void 0 !== t.ref && (s = t.ref), void 0 !== t.key && (o = "" + t.key), t) y.call(t, r) && !B.hasOwnProperty(r) && (a[r] = t[r]); var l = arguments.length - 2; if (1 === l) a.children = i; else if (1 < l) { for (var g = Array(l), c = 0; c < l; c++)g[c] = arguments[c + 2]; a.children = g } if (e && e.defaultProps) for (r in l = e.defaultProps) void 0 === a[r] && (a[r] = l[r]); return { $$typeof: n, type: e, key: o, ref: s, props: a, _owner: G.current } } function w(e) { return "object" === typeof e && null !== e && e.$$typeof === n } var S = /\/+/g; function R(e, t) { return "object" === typeof e && null !== e && null != e.key ? function (e) { var t = { "=": "=0", ":": "=2" }; return "$" + e.replace(/[=:]/g, (function (e) { return t[e] })) }("" + e.key) : t.toString(36) } function x(e, t, r, a, o) { var s = typeof e; "undefined" !== s && "boolean" !== s || (e = null); var l = !1; if (null === e) l = !0; else switch (s) { case "string": case "number": l = !0; break; case "object": switch (e.$$typeof) { case n: case i: l = !0 } }if (l) return o = o(l = e), e = "" === a ? "." + R(l, 0) : a, b(o) ? (r = "", null != e && (r = e.replace(S, "$&/") + "/"), x(o, t, r, "", (function (e) { return e }))) : null != o && (w(o) && (o = function (e, t) { return { $$typeof: n, type: e.type, key: t, ref: e.ref, props: e.props, _owner: e._owner } }(o, r + (!o.key || l && l.key === o.key ? "" : ("" + o.key).replace(S, "$&/") + "/") + e)), t.push(o)), 1; if (l = 0, a = "" === a ? "." : a + ":", b(e)) for (var g = 0; g < e.length; g++) { var c = a + R(s = e[g], g); l += x(s, t, r, c, o) } else if (c = function (e) { return null === e || "object" !== typeof e ? null : "function" === typeof (e = d && e[d] || e["@@iterator"]) ? e : null }(e), "function" === typeof c) for (e = c.call(e), g = 0; !(s = e.next()).done;)l += x(s = s.value, t, r, c = a + R(s, g++), o); else if ("object" === s) throw t = String(e), Error("Objects are not valid as a React child (found: " + ("[object Object]" === t ? "object with keys {" + Object.keys(e).join(", ") + "}" : t) + "). If you meant to render a collection of children, use an array instead."); return l } function W(e, t, n) { if (null == e) return e; var i = [], r = 0; return x(e, i, "", "", (function (e) { return t.call(n, e, r++) })), i } function V(e) { if (-1 === e._status) { var t = e._result; (t = t()).then((function (t) { 0 !== e._status && -1 !== e._status || (e._status = 1, e._result = t) }), (function (t) { 0 !== e._status && -1 !== e._status || (e._status = 2, e._result = t) })), -1 === e._status && (e._status = 0, e._result = t) } if (1 === e._status) return e._result.default; throw e._result } var k = { current: null }, H = { transition: null }, M = { ReactCurrentDispatcher: k, ReactCurrentBatchConfig: H, ReactCurrentOwner: G }; t.Children = { map: W, forEach: function (e, t, n) { W(e, (function () { t.apply(this, arguments) }), n) }, count: function (e) { var t = 0; return W(e, (function () { t++ })), t }, toArray: function (e) { return W(e, (function (e) { return e })) || [] }, only: function (e) { if (!w(e)) throw Error("React.Children.only expected to receive a single React element child."); return e } }, t.Component = p, t.Fragment = r, t.Profiler = o, t.PureComponent = m, t.StrictMode = a, t.Suspense = c, t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = M, t.cloneElement = function (e, t, i) { if (null === e || void 0 === e) throw Error("React.cloneElement(...): The argument must be a React element, but you passed " + e + "."); var r = h({}, e.props), a = e.key, o = e.ref, s = e._owner; if (null != t) { if (void 0 !== t.ref && (o = t.ref, s = G.current), void 0 !== t.key && (a = "" + t.key), e.type && e.type.defaultProps) var l = e.type.defaultProps; for (g in t) y.call(t, g) && !B.hasOwnProperty(g) && (r[g] = void 0 === t[g] && void 0 !== l ? l[g] : t[g]) } var g = arguments.length - 2; if (1 === g) r.children = i; else if (1 < g) { l = Array(g); for (var c = 0; c < g; c++)l[c] = arguments[c + 2]; r.children = l } return { $$typeof: n, type: e.type, key: a, ref: o, props: r, _owner: s } }, t.createContext = function (e) { return (e = { $$typeof: l, _currentValue: e, _currentValue2: e, _threadCount: 0, Provider: null, Consumer: null, _defaultValue: null, _globalName: null }).Provider = { $$typeof: s, _context: e }, e.Consumer = e }, t.createElement = Z, t.createFactory = function (e) { var t = Z.bind(null, e); return t.type = e, t }, t.createRef = function () { return { current: null } }, t.forwardRef = function (e) { return { $$typeof: g, render: e } }, t.isValidElement = w, t.lazy = function (e) { return { $$typeof: C, _payload: { _status: -1, _result: e }, _init: V } }, t.memo = function (e, t) { return { $$typeof: u, type: e, compare: void 0 === t ? null : t } }, t.startTransition = function (e) { var t = H.transition; H.transition = {}; try { e() } finally { H.transition = t } }, t.unstable_act = function () { throw Error("act(...) is not supported in production builds of React.") }, t.useCallback = function (e, t) { return k.current.useCallback(e, t) }, t.useContext = function (e) { return k.current.useContext(e) }, t.useDebugValue = function () { }, t.useDeferredValue = function (e) { return k.current.useDeferredValue(e) }, t.useEffect = function (e, t) { return k.current.useEffect(e, t) }, t.useId = function () { return k.current.useId() }, t.useImperativeHandle = function (e, t, n) { return k.current.useImperativeHandle(e, t, n) }, t.useInsertionEffect = function (e, t) { return k.current.useInsertionEffect(e, t) }, t.useLayoutEffect = function (e, t) { return k.current.useLayoutEffect(e, t) }, t.useMemo = function (e, t) { return k.current.useMemo(e, t) }, t.useReducer = function (e, t, n) { return k.current.useReducer(e, t, n) }, t.useRef = function (e) { return k.current.useRef(e) }, t.useState = function (e) { return k.current.useState(e) }, t.useSyncExternalStore = function (e, t, n) { return k.current.useSyncExternalStore(e, t, n) }, t.useTransition = function () { return k.current.useTransition() }, t.version = "18.2.0" }, 2791: function (e, t, n) { "use strict"; e.exports = n(9117) }, 184: function (e, t, n) { "use strict"; e.exports = n(6374) }, 6813: function (e, t) { "use strict"; function n(e, t) { var n = e.length; e.push(t); e: for (; 0 < n;) { var i = n - 1 >>> 1, r = e[i]; if (!(0 < a(r, t))) break e; e[i] = t, e[n] = r, n = i } } function i(e) { return 0 === e.length ? null : e[0] } function r(e) { if (0 === e.length) return null; var t = e[0], n = e.pop(); if (n !== t) { e[0] = n; e: for (var i = 0, r = e.length, o = r >>> 1; i < o;) { var s = 2 * (i + 1) - 1, l = e[s], g = s + 1, c = e[g]; if (0 > a(l, n)) g < r && 0 > a(c, l) ? (e[i] = c, e[g] = n, i = g) : (e[i] = l, e[s] = n, i = s); else { if (!(g < r && 0 > a(c, n))) break e; e[i] = c, e[g] = n, i = g } } } return t } function a(e, t) { var n = e.sortIndex - t.sortIndex; return 0 !== n ? n : e.id - t.id } if ("object" === typeof performance && "function" === typeof performance.now) { var o = performance; t.unstable_now = function () { return o.now() } } else { var s = Date, l = s.now(); t.unstable_now = function () { return s.now() - l } } var g = [], c = [], u = 1, C = null, d = 3, I = !1, h = !1, A = !1, p = "function" === typeof setTimeout ? setTimeout : null, f = "function" === typeof clearTimeout ? clearTimeout : null, m = "undefined" !== typeof setImmediate ? setImmediate : null; function v(e) { for (var t = i(c); null !== t;) { if (null === t.callback) r(c); else { if (!(t.startTime <= e)) break; r(c), t.sortIndex = t.expirationTime, n(g, t) } t = i(c) } } function b(e) { if (A = !1, v(e), !h) if (null !== i(g)) h = !0, H(y); else { var t = i(c); null !== t && M(b, t.startTime - e) } } function y(e, n) { h = !1, A && (A = !1, f(w), w = -1), I = !0; var a = d; try { for (v(n), C = i(g); null !== C && (!(C.expirationTime > n) || e && !x());) { var o = C.callback; if ("function" === typeof o) { C.callback = null, d = C.priorityLevel; var s = o(C.expirationTime <= n); n = t.unstable_now(), "function" === typeof s ? C.callback = s : C === i(g) && r(g), v(n) } else r(g); C = i(g) } if (null !== C) var l = !0; else { var u = i(c); null !== u && M(b, u.startTime - n), l = !1 } return l } finally { C = null, d = a, I = !1 } } "undefined" !== typeof navigator && void 0 !== navigator.scheduling && void 0 !== navigator.scheduling.isInputPending && navigator.scheduling.isInputPending.bind(navigator.scheduling); var G, B = !1, Z = null, w = -1, S = 5, R = -1; function x() { return !(t.unstable_now() - R < S) } function W() { if (null !== Z) { var e = t.unstable_now(); R = e; var n = !0; try { n = Z(!0, e) } finally { n ? G() : (B = !1, Z = null) } } else B = !1 } if ("function" === typeof m) G = function () { m(W) }; else if ("undefined" !== typeof MessageChannel) { var V = new MessageChannel, k = V.port2; V.port1.onmessage = W, G = function () { k.postMessage(null) } } else G = function () { p(W, 0) }; function H(e) { Z = e, B || (B = !0, G()) } function M(e, n) { w = p((function () { e(t.unstable_now()) }), n) } t.unstable_IdlePriority = 5, t.unstable_ImmediatePriority = 1, t.unstable_LowPriority = 4, t.unstable_NormalPriority = 3, t.unstable_Profiling = null, t.unstable_UserBlockingPriority = 2, t.unstable_cancelCallback = function (e) { e.callback = null }, t.unstable_continueExecution = function () { h || I || (h = !0, H(y)) }, t.unstable_forceFrameRate = function (e) { 0 > e || 125 < e ? console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported") : S = 0 < e ? Math.floor(1e3 / e) : 5 }, t.unstable_getCurrentPriorityLevel = function () { return d }, t.unstable_getFirstCallbackNode = function () { return i(g) }, t.unstable_next = function (e) { switch (d) { case 1: case 2: case 3: var t = 3; break; default: t = d }var n = d; d = t; try { return e() } finally { d = n } }, t.unstable_pauseExecution = function () { }, t.unstable_requestPaint = function () { }, t.unstable_runWithPriority = function (e, t) { switch (e) { case 1: case 2: case 3: case 4: case 5: break; default: e = 3 }var n = d; d = e; try { return t() } finally { d = n } }, t.unstable_scheduleCallback = function (e, r, a) { var o = t.unstable_now(); switch ("object" === typeof a && null !== a ? a = "number" === typeof (a = a.delay) && 0 < a ? o + a : o : a = o, e) { case 1: var s = -1; break; case 2: s = 250; break; case 5: s = 1073741823; break; case 4: s = 1e4; break; default: s = 5e3 }return e = { id: u++, callback: r, priorityLevel: e, startTime: a, expirationTime: s = a + s, sortIndex: -1 }, a > o ? (e.sortIndex = a, n(c, e), null === i(g) && e === i(c) && (A ? (f(w), w = -1) : A = !0, M(b, a - o))) : (e.sortIndex = s, n(g, e), h || I || (h = !0, H(y))), e }, t.unstable_shouldYield = x, t.unstable_wrapCallback = function (e) { var t = d; return function () { var n = d; d = t; try { return e.apply(this, arguments) } finally { d = n } } } }, 5296: function (e, t, n) { "use strict"; e.exports = n(6813) }, 9613: function (e) { e.exports = function (e, t, n, i) { var r = n ? n.call(i, e, t) : void 0; if (void 0 !== r) return !!r; if (e === t) return !0; if ("object" !== typeof e || !e || "object" !== typeof t || !t) return !1; var a = Object.keys(e), o = Object.keys(t); if (a.length !== o.length) return !1; for (var s = Object.prototype.hasOwnProperty.bind(t), l = 0; l < a.length; l++) { var g = a[l]; if (!s(g)) return !1; var c = e[g], u = t[g]; if (!1 === (r = n ? n.call(i, c, u, g) : void 0) || void 0 === r && c !== u) return !1 } return !0 } }, 1561: function (e, t, n) { "use strict"; var i = n(2791); var r = "function" === typeof Object.is ? Object.is : function (e, t) { return e === t && (0 !== e || 1 / e === 1 / t) || e !== e && t !== t }, a = i.useState, o = i.useEffect, s = i.useLayoutEffect, l = i.useDebugValue; function g(e) { var t = e.getSnapshot; e = e.value; try { var n = t(); return !r(e, n) } catch (i) { return !0 } } var c = "undefined" === typeof window || "undefined" === typeof window.document || "undefined" === typeof window.document.createElement ? function (e, t) { return t() } : function (e, t) { var n = t(), i = a({ inst: { value: n, getSnapshot: t } }), r = i[0].inst, c = i[1]; return s((function () { r.value = n, r.getSnapshot = t, g(r) && c({ inst: r }) }), [e, n, t]), o((function () { return g(r) && c({ inst: r }), e((function () { g(r) && c({ inst: r }) })) }), [e]), l(n), n }; t.useSyncExternalStore = void 0 !== i.useSyncExternalStore ? i.useSyncExternalStore : c }, 7595: function (e, t, n) { "use strict"; var i = n(2791), r = n(7248); var a = "function" === typeof Object.is ? Object.is : function (e, t) { return e === t && (0 !== e || 1 / e === 1 / t) || e !== e && t !== t }, o = r.useSyncExternalStore, s = i.useRef, l = i.useEffect, g = i.useMemo, c = i.useDebugValue; t.useSyncExternalStoreWithSelector = function (e, t, n, i, r) { var u = s(null); if (null === u.current) { var C = { hasValue: !1, value: null }; u.current = C } else C = u.current; u = g((function () { function e(e) { if (!l) { if (l = !0, o = e, e = i(e), void 0 !== r && C.hasValue) { var t = C.value; if (r(t, e)) return s = t } return s = e } if (t = s, a(o, e)) return t; var n = i(e); return void 0 !== r && r(t, n) ? t : (o = e, s = n) } var o, s, l = !1, g = void 0 === n ? null : n; return [function () { return e(t()) }, null === g ? void 0 : function () { return e(g()) }] }), [t, n, i, r]); var d = o(e, u[0], u[1]); return l((function () { C.hasValue = !0, C.value = d }), [d]), c(d), d } }, 7248: function (e, t, n) { "use strict"; e.exports = n(1561) }, 327: function (e, t, n) { "use strict"; e.exports = n(7595) }, 4836: function (e) { e.exports = function (e) { return e && e.__esModule ? e : { default: e } }, e.exports.__esModule = !0, e.exports.default = e.exports }, 907: function (e, t, n) { "use strict"; function i(e, t) { (null == t || t > e.length) && (t = e.length); for (var n = 0, i = new Array(t); n < t; n++)i[n] = e[n]; return i } n.d(t, { Z: function () { return i } }) }, 3878: function (e, t, n) { "use strict"; function i(e) { if (Array.isArray(e)) return e } n.d(t, { Z: function () { return i } }) }, 4942: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return r } }); var i = n(9142); function r(e, t, n) { return (t = (0, i.Z)(t)) in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } }, 7462: function (e, t, n) { "use strict"; function i() { return i = Object.assign ? Object.assign.bind() : function (e) { for (var t = 1; t < arguments.length; t++) { var n = arguments[t]; for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i]) } return e }, i.apply(this, arguments) } n.d(t, { Z: function () { return i } }) }, 9199: function (e, t, n) { "use strict"; function i(e) { if ("undefined" !== typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"]) return Array.from(e) } n.d(t, { Z: function () { return i } }) }, 5267: function (e, t, n) { "use strict"; function i() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } n.d(t, { Z: function () { return i } }) }, 3366: function (e, t, n) { "use strict"; function i(e, t) { if (null == e) return {}; var n, i, r = {}, a = Object.keys(e); for (i = 0; i < a.length; i++)n = a[i], t.indexOf(n) >= 0 || (r[n] = e[n]); return r } n.d(t, { Z: function () { return i } }) }, 9439: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return o } }); var i = n(3878); var r = n(181), a = n(5267); function o(e, t) { return (0, i.Z)(e) || function (e, t) { var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"]; if (null != n) { var i, r, a, o, s = [], l = !0, g = !1; try { if (a = (n = n.call(e)).next, 0 === t) { if (Object(n) !== n) return; l = !1 } else for (; !(l = (i = a.call(n)).done) && (s.push(i.value), s.length !== t); l = !0); } catch (e) { g = !0, r = e } finally { try { if (!l && null != n.return && (o = n.return(), Object(o) !== o)) return } finally { if (g) throw r } } return s } }(e, t) || (0, r.Z)(e, t) || (0, a.Z)() } }, 3433: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return o } }); var i = n(907); var r = n(9199), a = n(181); function o(e) { return function (e) { if (Array.isArray(e)) return (0, i.Z)(e) }(e) || (0, r.Z)(e) || (0, a.Z)(e) || function () { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } }, 9142: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return r } }); var i = n(1002); function r(e) { var t = function (e, t) { if ("object" !== (0, i.Z)(e) || null === e) return e; var n = e[Symbol.toPrimitive]; if (void 0 !== n) { var r = n.call(e, t || "default"); if ("object" !== (0, i.Z)(r)) return r; throw new TypeError("@@toPrimitive must return a primitive value.") } return ("string" === t ? String : Number)(e) }(e, "string"); return "symbol" === (0, i.Z)(t) ? t : String(t) } }, 1002: function (e, t, n) { "use strict"; function i(e) { return i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, i(e) } n.d(t, { Z: function () { return i } }) }, 181: function (e, t, n) { "use strict"; n.d(t, { Z: function () { return r } }); var i = n(907); function r(e, t) { if (e) { if ("string" === typeof e) return (0, i.Z)(e, t); var n = Object.prototype.toString.call(e).slice(8, -1); return "Object" === n && e.constructor && (n = e.constructor.name), "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? (0, i.Z)(e, t) : void 0 } } }, 3733: function (e, t, n) { "use strict"; function i(e) { var t, n, r = ""; if ("string" == typeof e || "number" == typeof e) r += e; else if ("object" == typeof e) if (Array.isArray(e)) for (t = 0; t < e.length; t++)e[t] && (n = i(e[t])) && (r && (r += " "), r += n); else for (t in e) e[t] && (r && (r += " "), r += t); return r } t.Z = function () { for (var e, t, n = 0, r = ""; n < arguments.length;)(e = arguments[n++]) && (t = i(e)) && (r && (r += " "), r += t); return r } } }, t = {}; function n(i) { var r = t[i]; if (void 0 !== r) return r.exports; var a = t[i] = { exports: {} }; return e[i](a, a.exports, n), a.exports } n.m = e, n.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return n.d(t, { a: t }), t }, function () { var e, t = Object.getPrototypeOf ? function (e) { return Object.getPrototypeOf(e) } : function (e) { return e.__proto__ }; n.t = function (i, r) { if (1 & r && (i = this(i)), 8 & r) return i; if ("object" === typeof i && i) { if (4 & r && i.__esModule) return i; if (16 & r && "function" === typeof i.then) return i } var a = Object.create(null); n.r(a); var o = {}; e = e || [null, t({}), t([]), t(t)]; for (var s = 2 & r && i; "object" == typeof s && !~e.indexOf(s); s = t(s))Object.getOwnPropertyNames(s).forEach((function (e) { o[e] = function () { return i[e] } })); return o.default = function () { return i }, n.d(a, o), a } }(), n.d = function (e, t) { for (var i in t) n.o(t, i) && !n.o(e, i) && Object.defineProperty(e, i, { enumerable: !0, get: t[i] }) }, n.f = {}, n.e = function (e) { return Promise.all(Object.keys(n.f).reduce((function (t, i) { return n.f[i](e, t), t }), [])) }, n.u = function (e) { return "static/js/" + e + ".dccd3c53.chunk.js" }, n.miniCssF = function (e) { }, n.g = function () { if ("object" === typeof globalThis) return globalThis; try { return this || new Function("return this")() } catch (e) { if ("object" === typeof window) return window } }(), n.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, function () { var e = {}, t = "exp2:"; n.l = function (i, r, a, o) { if (e[i]) e[i].push(r); else { var s, l; if (void 0 !== a) for (var g = document.getElementsByTagName("script"), c = 0; c < g.length; c++) { var u = g[c]; if (u.getAttribute("src") == i || u.getAttribute("data-webpack") == t + a) { s = u; break } } s || (l = !0, (s = document.createElement("script")).charset = "utf-8", s.timeout = 120, n.nc && s.setAttribute("nonce", n.nc), s.setAttribute("data-webpack", t + a), s.src = i), e[i] = [r]; var C = function (t, n) { s.onerror = s.onload = null, clearTimeout(d); var r = e[i]; if (delete e[i], s.parentNode && s.parentNode.removeChild(s), r && r.forEach((function (e) { return e(n) })), t) return t(n) }, d = setTimeout(C.bind(null, void 0, { type: "timeout", target: s }), 12e4); s.onerror = C.bind(null, s.onerror), s.onload = C.bind(null, s.onload), l && document.head.appendChild(s) } } }(), n.r = function (e) { "undefined" !== typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, n.p = "./", function () { var e = { 179: 0 }; n.f.j = function (t, i) { var r = n.o(e, t) ? e[t] : void 0; if (0 !== r) if (r) i.push(r[2]); else { var a = new Promise((function (n, i) { r = e[t] = [n, i] })); i.push(r[2] = a); var o = n.p + n.u(t), s = new Error; n.l(o, (function (i) { if (n.o(e, t) && (0 !== (r = e[t]) && (e[t] = void 0), r)) { var a = i && ("load" === i.type ? "missing" : i.type), o = i && i.target && i.target.src; s.message = "Loading chunk " + t + " failed.\n(" + a + ": " + o + ")", s.name = "ChunkLoadError", s.type = a, s.request = o, r[1](s) } }), "chunk-" + t, t) } }; var t = function (t, i) { var r, a, o = i[0], s = i[1], l = i[2], g = 0; if (o.some((function (t) { return 0 !== e[t] }))) { for (r in s) n.o(s, r) && (n.m[r] = s[r]); if (l) l(n) } for (t && t(i); g < o.length; g++)a = o[g], n.o(e, a) && e[a] && e[a][0](), e[a] = 0 }, i = self.webpackChunkexp2 = self.webpackChunkexp2 || []; i.forEach(t.bind(null, 0)), i.push = t.bind(null, i.push.bind(i)) }(), n.nc = void 0, function () { "use strict"; var e = {}; n.r(e), n.d(e, { ACESFilmicToneMapping: function () { return ya }, AddEquation: function () { return Ur }, AddOperation: function () { return pa }, AdditiveAnimationBlendMode: function () { return es }, AdditiveBlending: function () { return zr }, AlphaFormat: function () { return eo }, AlwaysCompare: function () { return Es }, AlwaysDepth: function () { return la }, AlwaysStencilFunc: function () { return Ms }, AmbientLight: function () { return rf }, AnimationAction: function () { return Pf }, AnimationClip: function () { return wp }, AnimationLoader: function () { return Np }, AnimationMixer: function () { return Of }, AnimationObjectGroup: function () { return Df }, AnimationUtils: function () { return dp }, ArcCurve: function () { return Vh }, ArrayCamera: function () { return eI }, ArrowHelper: function () { return Lm }, Audio: function () { return Wf }, AudioAnalyser: function () { return Nf }, AudioContext: function () { return pf }, AudioListener: function () { return xf }, AudioLoader: function () { return ff }, AxesHelper: function () { return zm }, BackSide: function () { return Nr }, BasicDepthPacking: function () { return os }, BasicShadowMap: function () { return Vr }, Bone: function () { return UI }, BooleanKeyframeTrack: function () { return mp }, Box2: function () { return sm }, Box3: function () { return eg }, Box3Helper: function () { return Xm }, BoxGeometry: function () { return uu }, BoxHelper: function () { return Nm }, BufferAttribute: function () { return Sc }, BufferGeometry: function () { return Uc }, BufferGeometryLoader: function () { return uf }, ByteType: function () { return _a }, Cache: function () { return Rp }, Camera: function () { return pu }, CameraHelper: function () { return Vm }, CanvasTexture: function () { return Rh }, CapsuleGeometry: function () { return qh }, CatmullRomCurve3: function () { return Xh }, CineonToneMapping: function () { return ba }, CircleGeometry: function () { return $h }, ClampToEdgeWrapping: function () { return Va }, Clock: function () { return Gf }, Color: function () { return pc }, ColorKeyframeTrack: function () { return vp }, ColorManagement: function () { return Hl }, CompressedArrayTexture: function () { return wh }, CompressedCubeTexture: function () { return Sh }, CompressedTexture: function () { return Zh }, CompressedTextureLoader: function () { return Xp }, ConeGeometry: function () { return tA }, CubeCamera: function () { return vu }, CubeReflectionMapping: function () { return Za }, CubeRefractionMapping: function () { return wa }, CubeTexture: function () { return bu }, CubeTextureLoader: function () { return Kp }, CubeUVReflectionMapping: function () { return xa }, CubicBezierCurve: function () { return zh }, CubicBezierCurve3: function () { return Eh }, CubicInterpolant: function () { return hp }, CullFaceBack: function () { return Rr }, CullFaceFront: function () { return xr }, CullFaceFrontBack: function () { return Wr }, CullFaceNone: function () { return Sr }, Curve: function () { return xh }, CurvePath: function () { return Oh }, CustomBlending: function () { return _r }, CustomToneMapping: function () { return Ga }, CylinderGeometry: function () { return eA }, Cylindrical: function () { return am }, Data3DTexture: function () { return Pl }, DataArrayTexture: function () { return Ul }, DataTexture: function () { return DI }, DataTextureLoader: function () { return Lp }, DataUtils: function () { return Bc }, DecrementStencilOp: function () { return Gs }, DecrementWrapStencilOp: function () { return Zs }, DefaultLoadingManager: function () { return Wp }, DepthFormat: function () { return ro }, DepthStencilFormat: function () { return ao }, DepthTexture: function () { return rI }, DirectionalLight: function () { return nf }, DirectionalLightHelper: function () { return Rm }, DiscreteInterpolant: function () { return pp }, DisplayP3ColorSpace: function () { return ds }, DodecahedronGeometry: function () { return iA }, DoubleSide: function () { return Xr }, DstAlphaFactor: function () { return na }, DstColorFactor: function () { return ra }, DynamicCopyUsage: function () { return js }, DynamicDrawUsage: function () { return _s }, DynamicReadUsage: function () { return Ps }, EdgesGeometry: function () { return lA }, EllipseCurve: function () { return Wh }, EqualCompare: function () { return Xs }, EqualDepth: function () { return ua }, EqualStencilFunc: function () { return xs }, EquirectangularReflectionMapping: function () { return Sa }, EquirectangularRefractionMapping: function () { return Ra }, Euler: function () { return Xg }, EventDispatcher: function () { return il }, ExtrudeGeometry: function () { return YA }, FileLoader: function () { return Fp }, Float16BufferAttribute: function () { return Fc }, Float32BufferAttribute: function () { return Nc }, Float64BufferAttribute: function () { return Xc }, FloatType: function () { return Oa }, Fog: function () { return CI }, FogExp2: function () { return uI }, FramebufferTexture: function () { return Bh }, FrontSide: function () { return Fr }, Frustum: function () { return xu }, GLBufferAttribute: function () { return em }, GLSL1: function () { return qs }, GLSL3: function () { return $s }, GreaterCompare: function () { return Ks }, GreaterDepth: function () { return da }, GreaterEqualCompare: function () { return zs }, GreaterEqualDepth: function () { return Ca }, GreaterEqualStencilFunc: function () { return Hs }, GreaterStencilFunc: function () { return Vs }, GridHelper: function () { return Gm }, Group: function () { return tI }, HalfFloatType: function () { return ja }, HemisphereLight: function () { return Tp }, HemisphereLightHelper: function () { return ym }, IcosahedronGeometry: function () { return LA }, ImageBitmapLoader: function () { return Af }, ImageLoader: function () { return Yp }, ImageUtils: function () { return Nl }, IncrementStencilOp: function () { return ys }, IncrementWrapStencilOp: function () { return Bs }, InstancedBufferAttribute: function () { return jI }, InstancedBufferGeometry: function () { return cf }, InstancedInterleavedBuffer: function () { return $f }, InstancedMesh: function () { return rh }, Int16BufferAttribute: function () { return Vc }, Int32BufferAttribute: function () { return Hc }, Int8BufferAttribute: function () { return Rc }, IntType: function () { return Pa }, InterleavedBuffer: function () { return II }, InterleavedBufferAttribute: function () { return AI }, Interpolant: function () { return Ip }, InterpolateDiscrete: function () { return Po }, InterpolateLinear: function () { return Jo }, InterpolateSmooth: function () { return Oo }, InvertStencilOp: function () { return ws }, KeepStencilOp: function () { return vs }, KeyframeTrack: function () { return fp }, LOD: function () { return MI }, LatheGeometry: function () { return Qh }, Layers: function () { return Yg }, LessCompare: function () { return Ns }, LessDepth: function () { return ga }, LessEqualCompare: function () { return Ys }, LessEqualDepth: function () { return ca }, LessEqualStencilFunc: function () { return Ws }, LessStencilFunc: function () { return Rs }, Light: function () { return Ep }, LightProbe: function () { return sf }, Line: function () { return uh }, Line3: function () { return cm }, LineBasicMaterial: function () { return ah }, LineCurve: function () { return Th }, LineCurve3: function () { return _h }, LineDashedMaterial: function () { return sp }, LineLoop: function () { return hh }, LineSegments: function () { return Ih }, LinearDisplayP3ColorSpace: function () { return Is }, LinearEncoding: function () { return rs }, LinearFilter: function () { return Ya }, LinearInterpolant: function () { return Ap }, LinearMipMapLinearFilter: function () { return Ea }, LinearMipMapNearestFilter: function () { return La }, LinearMipmapLinearFilter: function () { return za }, LinearMipmapNearestFilter: function () { return Ka }, LinearSRGBColorSpace: function () { return Cs }, LinearToneMapping: function () { return ma }, LinearTransfer: function () { return hs }, Loader: function () { return Vp }, LoaderUtils: function () { return gf }, LoadingManager: function () { return xp }, LoopOnce: function () { return _o }, LoopPingPong: function () { return Do }, LoopRepeat: function () { return Uo }, LuminanceAlphaFormat: function () { return io }, LuminanceFormat: function () { return no }, MOUSE: function () { return Zr }, Material: function () { return Cc }, MaterialLoader: function () { return lf }, MathUtils: function () { return pl }, Matrix3: function () { return ml }, Matrix4: function () { return Sg }, MaxEquation: function () { return Or }, Mesh: function () { return gu }, MeshBasicMaterial: function () { return mc }, MeshDepthMaterial: function () { return Jd }, MeshDistanceMaterial: function () { return Od }, MeshLambertMaterial: function () { return ap }, MeshMatcapMaterial: function () { return op }, MeshNormalMaterial: function () { return rp }, MeshPhongMaterial: function () { return np }, MeshPhysicalMaterial: function () { return tp }, MeshStandardMaterial: function () { return ep }, MeshToonMaterial: function () { return ip }, MinEquation: function () { return Jr }, MirroredRepeatWrapping: function () { return ka }, MixOperation: function () { return Aa }, MultiplyBlending: function () { return Tr }, MultiplyOperation: function () { return ha }, NearestFilter: function () { return Ha }, NearestMipMapLinearFilter: function () { return Xa }, NearestMipMapNearestFilter: function () { return Fa }, NearestMipmapLinearFilter: function () { return Na }, NearestMipmapNearestFilter: function () { return Ma }, NeverCompare: function () { return Fs }, NeverDepth: function () { return sa }, NeverStencilFunc: function () { return Ss }, NoBlending: function () { return Kr }, NoColorSpace: function () { return cs }, NoToneMapping: function () { return fa }, NormalAnimationBlendMode: function () { return $o }, NormalBlending: function () { return Lr }, NotEqualCompare: function () { return Ls }, NotEqualDepth: function () { return Ia }, NotEqualStencilFunc: function () { return ks }, NumberKeyframeTrack: function () { return bp }, Object3D: function () { return qg }, ObjectLoader: function () { return Cf }, ObjectSpaceNormalMap: function () { return gs }, OctahedronGeometry: function () { return zA }, OneFactor: function () { return Qr }, OneMinusDstAlphaFactor: function () { return ia }, OneMinusDstColorFactor: function () { return aa }, OneMinusSrcAlphaFactor: function () { return ta }, OneMinusSrcColorFactor: function () { return $r }, OrthographicCamera: function () { return Tu }, P3Primaries: function () { return fs }, PCFShadowMap: function () { return kr }, PCFSoftShadowMap: function () { return Hr }, PMREMGenerator: function () { return qu }, Path: function () { return jh }, PerspectiveCamera: function () { return fu }, Plane: function () { return wu }, PlaneGeometry: function () { return ku }, PlaneHelper: function () { return Ym }, PointLight: function () { return ef }, PointLightHelper: function () { return fm }, Points: function () { return bh }, PointsMaterial: function () { return Ah }, PolarGridHelper: function () { return Bm }, PolyhedronGeometry: function () { return nA }, PositionalAudio: function () { return Ff }, PropertyBinding: function () { return Uf }, PropertyMixer: function () { return Xf }, QuadraticBezierCurve: function () { return Uh }, QuadraticBezierCurve3: function () { return Dh }, Quaternion: function () { return jl }, QuaternionKeyframeTrack: function () { return Gp }, QuaternionLinearInterpolant: function () { return yp }, RED_GREEN_RGTC2_Format: function () { return Eo }, RED_RGTC1_Format: function () { return Lo }, REVISION: function () { return Br }, RGBADepthPacking: function () { return ss }, RGBAFormat: function () { return to }, RGBAIntegerFormat: function () { return co }, RGBA_ASTC_10x10_Format: function () { return Mo }, RGBA_ASTC_10x5_Format: function () { return Vo }, RGBA_ASTC_10x6_Format: function () { return ko }, RGBA_ASTC_10x8_Format: function () { return Ho }, RGBA_ASTC_12x10_Format: function () { return Fo }, RGBA_ASTC_12x12_Format: function () { return No }, RGBA_ASTC_4x4_Format: function () { return Go }, RGBA_ASTC_5x4_Format: function () { return Bo }, RGBA_ASTC_5x5_Format: function () { return Zo }, RGBA_ASTC_6x5_Format: function () { return wo }, RGBA_ASTC_6x6_Format: function () { return So }, RGBA_ASTC_8x5_Format: function () { return Ro }, RGBA_ASTC_8x6_Format: function () { return xo }, RGBA_ASTC_8x8_Format: function () { return Wo }, RGBA_BPTC_Format: function () { return Xo }, RGBA_ETC2_EAC_Format: function () { return yo }, RGBA_PVRTC_2BPPV1_Format: function () { return mo }, RGBA_PVRTC_4BPPV1_Format: function () { return fo }, RGBA_S3TC_DXT1_Format: function () { return Co }, RGBA_S3TC_DXT3_Format: function () { return Io }, RGBA_S3TC_DXT5_Format: function () { return ho }, RGB_BPTC_SIGNED_Format: function () { return Yo }, RGB_BPTC_UNSIGNED_Format: function () { return Ko }, RGB_ETC1_Format: function () { return vo }, RGB_ETC2_Format: function () { return bo }, RGB_PVRTC_2BPPV1_Format: function () { return po }, RGB_PVRTC_4BPPV1_Format: function () { return Ao }, RGB_S3TC_DXT1_Format: function () { return uo }, RGFormat: function () { return lo }, RGIntegerFormat: function () { return go }, RawShaderMaterial: function () { return $A }, Ray: function () { return wg }, Raycaster: function () { return tm }, Rec709Primaries: function () { return ps }, RectAreaLight: function () { return af }, RedFormat: function () { return oo }, RedIntegerFormat: function () { return so }, ReinhardToneMapping: function () { return va }, RenderTarget: function () { return Tl }, RepeatWrapping: function () { return Wa }, ReplaceStencilOp: function () { return bs }, ReverseSubtractEquation: function () { return Pr }, RingGeometry: function () { return EA }, SIGNED_RED_GREEN_RGTC2_Format: function () { return To }, SIGNED_RED_RGTC1_Format: function () { return zo }, SRGBColorSpace: function () { return us }, SRGBTransfer: function () { return As }, Scene: function () { return dI }, ShaderChunk: function () { return Hu }, ShaderLib: function () { return Fu }, ShaderMaterial: function () { return Au }, ShadowMaterial: function () { return qA }, Shape: function () { return gA }, ShapeGeometry: function () { return TA }, ShapePath: function () { return Em }, ShapeUtils: function () { return FA }, ShortType: function () { return Ua }, Skeleton: function () { return OI }, SkeletonHelper: function () { return Am }, SkinnedMesh: function () { return _I }, Source: function () { return Yl }, Sphere: function () { return fg }, SphereGeometry: function () { return _A }, Spherical: function () { return rm }, SphericalHarmonics3: function () { return of }, SplineCurve: function () { return Ph }, SpotLight: function () { return Op }, SpotLightHelper: function () { return Cm }, Sprite: function () { return WI }, SpriteMaterial: function () { return pI }, SrcAlphaFactor: function () { return ea }, SrcAlphaSaturateFactor: function () { return oa }, SrcColorFactor: function () { return qr }, StaticCopyUsage: function () { return Os }, StaticDrawUsage: function () { return Ts }, StaticReadUsage: function () { return Ds }, StereoCamera: function () { return yf }, StreamCopyUsage: function () { return Qs }, StreamDrawUsage: function () { return Us }, StreamReadUsage: function () { return Js }, StringKeyframeTrack: function () { return Bp }, SubtractEquation: function () { return Dr }, SubtractiveBlending: function () { return Er }, TOUCH: function () { return wr }, TangentSpaceNormalMap: function () { return ls }, TetrahedronGeometry: function () { return UA }, Texture: function () { return zl }, TextureLoader: function () { return zp }, TorusGeometry: function () { return DA }, TorusKnotGeometry: function () { return PA }, Triangle: function () { return cc }, TriangleFanDrawMode: function () { return is }, TriangleStripDrawMode: function () { return ns }, TrianglesDrawMode: function () { return ts }, TubeGeometry: function () { return JA }, TwoPassDoubleSide: function () { return Yr }, UVMapping: function () { return Ba }, Uint16BufferAttribute: function () { return kc }, Uint32BufferAttribute: function () { return Mc }, Uint8BufferAttribute: function () { return xc }, Uint8ClampedBufferAttribute: function () { return Wc }, Uniform: function () { return jf }, UniformsGroup: function () { return qf }, UniformsLib: function () { return Mu }, UniformsUtils: function () { return hu }, UnsignedByteType: function () { return Ta }, UnsignedInt248Type: function () { return $a }, UnsignedIntType: function () { return Ja }, UnsignedShort4444Type: function () { return Qa }, UnsignedShort5551Type: function () { return qa }, UnsignedShortType: function () { return Da }, VSMShadowMap: function () { return Mr }, Vector2: function () { return fl }, Vector3: function () { return Ql }, Vector4: function () { return El }, VectorKeyframeTrack: function () { return Zp }, VideoTexture: function () { return Gh }, WebGL1Renderer: function () { return gI }, WebGL3DRenderTarget: function () { return Jl }, WebGLArrayRenderTarget: function () { return Dl }, WebGLCoordinateSystem: function () { return tl }, WebGLCubeRenderTarget: function () { return yu }, WebGLMultipleRenderTargets: function () { return Ol }, WebGLRenderTarget: function () { return _l }, WebGLRenderer: function () { return lI }, WebGLUtils: function () { return $d }, WebGPUCoordinateSystem: function () { return nl }, WireframeGeometry: function () { return OA }, WrapAroundEnding: function () { return qo }, ZeroCurvatureEnding: function () { return jo }, ZeroFactor: function () { return jr }, ZeroSlopeEnding: function () { return Qo }, ZeroStencilOp: function () { return ms }, _SRGBAFormat: function () { return el }, createCanvasElement: function () { return Zl }, sRGBEncoding: function () { return as } }); var t = n(2791), i = n(4164), r = n(9439); n.p; var a = n.p + "images/Channel1.f2f8c5086bb1d7767aeb0563a8d898a0.svg"; var o = n.p + "images/Channel2.19d18778d5e8d0570703866c52eb706c.svg"; var s = n.p + "images/Channel3.e9ace8ba5b49fc411793a02a5f857d82.svg", l = n(4942), g = n(3366), c = n(7462), u = n(3733), C = n(5735), d = n(4419), I = n(2065), h = n(724), A = n(1046), p = n(8047), f = n(7992), m = n(3031), v = n(3433); function b(e, t) { return t || (t = e.slice(0)), Object.freeze(Object.defineProperties(e, { raw: { value: Object.freeze(t) } })) } function y(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function G(e, t) { return G = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, G(e, t) } function B(e, t) { e.prototype = Object.create(t.prototype), e.prototype.constructor = e, G(e, t) } var Z = t.createContext(null); function w(e, n) { var i = Object.create(null); return e && t.Children.map(e, (function (e) { return e })).forEach((function (e) { i[e.key] = function (e) { return n && (0, t.isValidElement)(e) ? n(e) : e }(e) })), i } function S(e, t, n) { return null != n[t] ? n[t] : e.props[t] } function R(e, n, i) { var r = w(e.children), a = function (e, t) { function n(n) { return n in t ? t[n] : e[n] } e = e || {}, t = t || {}; var i, r = Object.create(null), a = []; for (var o in e) o in t ? a.length && (r[o] = a, a = []) : a.push(o); var s = {}; for (var l in t) { if (r[l]) for (i = 0; i < r[l].length; i++) { var g = r[l][i]; s[r[l][i]] = n(g) } s[l] = n(l) } for (i = 0; i < a.length; i++)s[a[i]] = n(a[i]); return s }(n, r); return Object.keys(a).forEach((function (o) { var s = a[o]; if ((0, t.isValidElement)(s)) { var l = o in n, g = o in r, c = n[o], u = (0, t.isValidElement)(c) && !c.props.in; !g || l && !u ? g || !l || u ? g && l && (0, t.isValidElement)(c) && (a[o] = (0, t.cloneElement)(s, { onExited: i.bind(null, s), in: c.props.in, exit: S(s, "exit", e), enter: S(s, "enter", e) })) : a[o] = (0, t.cloneElement)(s, { in: !1 }) : a[o] = (0, t.cloneElement)(s, { onExited: i.bind(null, s), in: !0, exit: S(s, "exit", e), enter: S(s, "enter", e) }) } })), a } var x = Object.values || function (e) { return Object.keys(e).map((function (t) { return e[t] })) }, W = function (e) { function n(t, n) { var i, r = (i = e.call(this, t, n) || this).handleExited.bind(y(i)); return i.state = { contextValue: { isMounting: !0 }, handleExited: r, firstRender: !0 }, i } B(n, e); var i = n.prototype; return i.componentDidMount = function () { this.mounted = !0, this.setState({ contextValue: { isMounting: !1 } }) }, i.componentWillUnmount = function () { this.mounted = !1 }, n.getDerivedStateFromProps = function (e, n) { var i, r, a = n.children, o = n.handleExited; return { children: n.firstRender ? (i = e, r = o, w(i.children, (function (e) { return (0, t.cloneElement)(e, { onExited: r.bind(null, e), in: !0, appear: S(e, "appear", i), enter: S(e, "enter", i), exit: S(e, "exit", i) }) }))) : R(e, a, o), firstRender: !1 } }, i.handleExited = function (e, t) { var n = w(this.props.children); e.key in n || (e.props.onExited && e.props.onExited(t), this.mounted && this.setState((function (t) { var n = (0, c.Z)({}, t.children); return delete n[e.key], { children: n } }))) }, i.render = function () { var e = this.props, n = e.component, i = e.childFactory, r = (0, g.Z)(e, ["component", "childFactory"]), a = this.state.contextValue, o = x(this.state.children).map(i); return delete r.appear, delete r.enter, delete r.exit, null === n ? t.createElement(Z.Provider, { value: a }, o) : t.createElement(Z.Provider, { value: a }, t.createElement(n, r, o)) }, n }(t.Component); W.propTypes = {}, W.defaultProps = { component: "div", childFactory: function (e) { return e } }; var V = W, k = n(2564), H = (n(2561), n(9140)), M = (n(3361), n(2110)), F = n.n(M), N = function (e, n) { var i = arguments; if (null == n || !k.h.call(n, "css")) return t.createElement.apply(void 0, i); var r = i.length, a = new Array(r); a[0] = k.E, a[1] = (0, k.c)(e, n); for (var o = 2; o < r; o++)a[o] = i[o]; return t.createElement.apply(null, a) }; function X() { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; return (0, H.O)(t) } var Y = function () { var e = X.apply(void 0, arguments), t = "animation-" + e.name; return { name: t, styles: "@keyframes " + t + "{" + e.styles + "}", anim: 1, toString: function () { return "_EMO_" + this.name + "_" + this.styles + "_EMO_" } } }; var K = n(184); var L = function (e) { var n = e.className, i = e.classes, a = e.pulsate, o = void 0 !== a && a, s = e.rippleX, l = e.rippleY, g = e.rippleSize, c = e.in, C = e.onExited, d = e.timeout, I = t.useState(!1), h = (0, r.Z)(I, 2), A = h[0], p = h[1], f = (0, u.Z)(n, i.ripple, i.rippleVisible, o && i.ripplePulsate), m = { width: g, height: g, top: -g / 2 + l, left: -g / 2 + s }, v = (0, u.Z)(i.child, A && i.childLeaving, o && i.childPulsate); return c || A || p(!0), t.useEffect((function () { if (!c && null != C) { var e = setTimeout(C, d); return function () { clearTimeout(e) } } }), [C, c, d]), (0, K.jsx)("span", { className: f, style: m, children: (0, K.jsx)("span", { className: v }) }) }, z = n(5878); var E, T, _, U, D, P, J, O, j = (0, z.Z)("MuiTouchRipple", ["root", "ripple", "rippleVisible", "ripplePulsate", "child", "childLeaving", "childPulsate"]), Q = ["center", "classes", "className"], q = Y(D || (D = E || (E = b(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))), $ = Y(P || (P = T || (T = b(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))), ee = Y(J || (J = _ || (_ = b(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))), te = (0, h.ZP)("span", { name: "MuiTouchRipple", slot: "Root" })({ overflow: "hidden", pointerEvents: "none", position: "absolute", zIndex: 0, top: 0, right: 0, bottom: 0, left: 0, borderRadius: "inherit" }), ne = (0, h.ZP)(L, { name: "MuiTouchRipple", slot: "Ripple" })(O || (O = U || (U = b(["\n  opacity: 0;\n  position: absolute;\n\n  &.", " {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ", ";\n    animation-duration: ", "ms;\n    animation-timing-function: ", ";\n  }\n\n  &.", " {\n    animation-duration: ", "ms;\n  }\n\n  & .", " {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & .", " {\n    opacity: 0;\n    animation-name: ", ";\n    animation-duration: ", "ms;\n    animation-timing-function: ", ";\n  }\n\n  & .", " {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ", ";\n    animation-duration: 2500ms;\n    animation-timing-function: ", ";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))), j.rippleVisible, q, 550, (function (e) { return e.theme.transitions.easing.easeInOut }), j.ripplePulsate, (function (e) { return e.theme.transitions.duration.shorter }), j.child, j.childLeaving, $, 550, (function (e) { return e.theme.transitions.easing.easeInOut }), j.childPulsate, ee, (function (e) { return e.theme.transitions.easing.easeInOut })), ie = t.forwardRef((function (e, n) { var i = (0, A.Z)({ props: e, name: "MuiTouchRipple" }), a = i.center, o = void 0 !== a && a, s = i.classes, l = void 0 === s ? {} : s, C = i.className, d = (0, g.Z)(i, Q), I = t.useState([]), h = (0, r.Z)(I, 2), p = h[0], f = h[1], m = t.useRef(0), b = t.useRef(null); t.useEffect((function () { b.current && (b.current(), b.current = null) }), [p]); var y = t.useRef(!1), G = t.useRef(0), B = t.useRef(null), Z = t.useRef(null); t.useEffect((function () { return function () { G.current && clearTimeout(G.current) } }), []); var w = t.useCallback((function (e) { var t = e.pulsate, n = e.rippleX, i = e.rippleY, r = e.rippleSize, a = e.cb; f((function (e) { return [].concat((0, v.Z)(e), [(0, K.jsx)(ne, { classes: { ripple: (0, u.Z)(l.ripple, j.ripple), rippleVisible: (0, u.Z)(l.rippleVisible, j.rippleVisible), ripplePulsate: (0, u.Z)(l.ripplePulsate, j.ripplePulsate), child: (0, u.Z)(l.child, j.child), childLeaving: (0, u.Z)(l.childLeaving, j.childLeaving), childPulsate: (0, u.Z)(l.childPulsate, j.childPulsate) }, timeout: 550, pulsate: t, rippleX: n, rippleY: i, rippleSize: r }, m.current)]) })), m.current += 1, b.current = a }), [l]), S = t.useCallback((function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : function () { }, i = t.pulsate, r = void 0 !== i && i, a = t.center, s = void 0 === a ? o || t.pulsate : a, l = t.fakeElement, g = void 0 !== l && l; if ("mousedown" === (null == e ? void 0 : e.type) && y.current) y.current = !1; else { "touchstart" === (null == e ? void 0 : e.type) && (y.current = !0); var c, u, C, d = g ? null : Z.current, I = d ? d.getBoundingClientRect() : { width: 0, height: 0, left: 0, top: 0 }; if (s || void 0 === e || 0 === e.clientX && 0 === e.clientY || !e.clientX && !e.touches) c = Math.round(I.width / 2), u = Math.round(I.height / 2); else { var h = e.touches && e.touches.length > 0 ? e.touches[0] : e, A = h.clientX, p = h.clientY; c = Math.round(A - I.left), u = Math.round(p - I.top) } if (s) (C = Math.sqrt((2 * Math.pow(I.width, 2) + Math.pow(I.height, 2)) / 3)) % 2 === 0 && (C += 1); else { var f = 2 * Math.max(Math.abs((d ? d.clientWidth : 0) - c), c) + 2, m = 2 * Math.max(Math.abs((d ? d.clientHeight : 0) - u), u) + 2; C = Math.sqrt(Math.pow(f, 2) + Math.pow(m, 2)) } null != e && e.touches ? null === B.current && (B.current = function () { w({ pulsate: r, rippleX: c, rippleY: u, rippleSize: C, cb: n }) }, G.current = setTimeout((function () { B.current && (B.current(), B.current = null) }), 80)) : w({ pulsate: r, rippleX: c, rippleY: u, rippleSize: C, cb: n }) } }), [o, w]), R = t.useCallback((function () { S({}, { pulsate: !0 }) }), [S]), x = t.useCallback((function (e, t) { if (clearTimeout(G.current), "touchend" === (null == e ? void 0 : e.type) && B.current) return B.current(), B.current = null, void (G.current = setTimeout((function () { x(e, t) }))); B.current = null, f((function (e) { return e.length > 0 ? e.slice(1) : e })), b.current = t }), []); return t.useImperativeHandle(n, (function () { return { pulsate: R, start: S, stop: x } }), [R, S, x]), (0, K.jsx)(te, (0, c.Z)({ className: (0, u.Z)(j.root, l.root, C), ref: Z }, d, { children: (0, K.jsx)(V, { component: null, exit: !0, children: p }) })) })), re = ie, ae = n(1217); function oe(e) { return (0, ae.Z)("MuiButtonBase", e) } var se, le = (0, z.Z)("MuiButtonBase", ["root", "disabled", "focusVisible"]), ge = ["action", "centerRipple", "children", "className", "component", "disabled", "disableRipple", "disableTouchRipple", "focusRipple", "focusVisibleClassName", "LinkComponent", "onBlur", "onClick", "onContextMenu", "onDragLeave", "onFocus", "onFocusVisible", "onKeyDown", "onKeyUp", "onMouseDown", "onMouseLeave", "onMouseUp", "onTouchEnd", "onTouchMove", "onTouchStart", "tabIndex", "TouchRippleProps", "touchRippleRef", "type"], ce = (0, h.ZP)("button", { name: "MuiButtonBase", slot: "Root", overridesResolver: function (e, t) { return t.root } })((se = { display: "inline-flex", alignItems: "center", justifyContent: "center", position: "relative", boxSizing: "border-box", WebkitTapHighlightColor: "transparent", backgroundColor: "transparent", outline: 0, border: 0, margin: 0, borderRadius: 0, padding: 0, cursor: "pointer", userSelect: "none", verticalAlign: "middle", MozAppearance: "none", WebkitAppearance: "none", textDecoration: "none", color: "inherit", "&::-moz-focus-inner": { borderStyle: "none" } }, (0, l.Z)(se, "&.".concat(le.disabled), { pointerEvents: "none", cursor: "default" }), (0, l.Z)(se, "@media print", { colorAdjust: "exact" }), se)), ue = t.forwardRef((function (e, n) { var i = (0, A.Z)({ props: e, name: "MuiButtonBase" }), a = i.action, o = i.centerRipple, s = void 0 !== o && o, l = i.children, C = i.className, I = i.component, h = void 0 === I ? "button" : I, v = i.disabled, b = void 0 !== v && v, y = i.disableRipple, G = void 0 !== y && y, B = i.disableTouchRipple, Z = void 0 !== B && B, w = i.focusRipple, S = void 0 !== w && w, R = i.LinkComponent, x = void 0 === R ? "a" : R, W = i.onBlur, V = i.onClick, k = i.onContextMenu, H = i.onDragLeave, M = i.onFocus, F = i.onFocusVisible, N = i.onKeyDown, X = i.onKeyUp, Y = i.onMouseDown, L = i.onMouseLeave, z = i.onMouseUp, E = i.onTouchEnd, T = i.onTouchMove, _ = i.onTouchStart, U = i.tabIndex, D = void 0 === U ? 0 : U, P = i.TouchRippleProps, J = i.touchRippleRef, O = i.type, j = (0, g.Z)(i, ge), Q = t.useRef(null), q = t.useRef(null), $ = (0, p.Z)(q, J), ee = (0, m.Z)(), te = ee.isFocusVisibleRef, ne = ee.onFocus, ie = ee.onBlur, ae = ee.ref, se = t.useState(!1), le = (0, r.Z)(se, 2), ue = le[0], Ce = le[1]; b && ue && Ce(!1), t.useImperativeHandle(a, (function () { return { focusVisible: function () { Ce(!0), Q.current.focus() } } }), []); var de = t.useState(!1), Ie = (0, r.Z)(de, 2), he = Ie[0], Ae = Ie[1]; t.useEffect((function () { Ae(!0) }), []); var pe = he && !G && !b; function fe(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : Z; return (0, f.Z)((function (i) { return t && t(i), !n && q.current && q.current[e](i), !0 })) } t.useEffect((function () { ue && S && !G && he && q.current.pulsate() }), [G, S, ue, he]); var me = fe("start", Y), ve = fe("stop", k), be = fe("stop", H), ye = fe("stop", z), Ge = fe("stop", (function (e) { ue && e.preventDefault(), L && L(e) })), Be = fe("start", _), Ze = fe("stop", E), we = fe("stop", T), Se = fe("stop", (function (e) { ie(e), !1 === te.current && Ce(!1), W && W(e) }), !1), Re = (0, f.Z)((function (e) { Q.current || (Q.current = e.currentTarget), ne(e), !0 === te.current && (Ce(!0), F && F(e)), M && M(e) })), xe = function () { var e = Q.current; return h && "button" !== h && !("A" === e.tagName && e.href) }, We = t.useRef(!1), Ve = (0, f.Z)((function (e) { S && !We.current && ue && q.current && " " === e.key && (We.current = !0, q.current.stop(e, (function () { q.current.start(e) }))), e.target === e.currentTarget && xe() && " " === e.key && e.preventDefault(), N && N(e), e.target === e.currentTarget && xe() && "Enter" === e.key && !b && (e.preventDefault(), V && V(e)) })), ke = (0, f.Z)((function (e) { S && " " === e.key && q.current && ue && !e.defaultPrevented && (We.current = !1, q.current.stop(e, (function () { q.current.pulsate(e) }))), X && X(e), V && e.target === e.currentTarget && xe() && " " === e.key && !e.defaultPrevented && V(e) })), He = h; "button" === He && (j.href || j.to) && (He = x); var Me = {}; "button" === He ? (Me.type = void 0 === O ? "button" : O, Me.disabled = b) : (j.href || j.to || (Me.role = "button"), b && (Me["aria-disabled"] = b)); var Fe = (0, p.Z)(n, ae, Q); var Ne = (0, c.Z)({}, i, { centerRipple: s, component: h, disabled: b, disableRipple: G, disableTouchRipple: Z, focusRipple: S, tabIndex: D, focusVisible: ue }), Xe = function (e) { var t = e.disabled, n = e.focusVisible, i = e.focusVisibleClassName, r = e.classes, a = { root: ["root", t && "disabled", n && "focusVisible"] }, o = (0, d.Z)(a, oe, r); return n && i && (o.root += " ".concat(i)), o }(Ne); return (0, K.jsxs)(ce, (0, c.Z)({ as: He, className: (0, u.Z)(Xe.root, C), ownerState: Ne, onBlur: Se, onClick: V, onContextMenu: ve, onFocus: Re, onKeyDown: Ve, onKeyUp: ke, onMouseDown: me, onMouseLeave: Ge, onMouseUp: ye, onDragLeave: be, onTouchEnd: Ze, onTouchMove: we, onTouchStart: Be, ref: Fe, tabIndex: b ? -1 : D, type: O }, Me, j, { children: [l, pe ? (0, K.jsx)(re, (0, c.Z)({ ref: $, center: s }, P)) : null] })) })), Ce = ue, de = n(4036); function Ie(e) { return (0, ae.Z)("MuiButton", e) } var he = (0, z.Z)("MuiButton", ["root", "text", "textInherit", "textPrimary", "textSecondary", "textSuccess", "textError", "textInfo", "textWarning", "outlined", "outlinedInherit", "outlinedPrimary", "outlinedSecondary", "outlinedSuccess", "outlinedError", "outlinedInfo", "outlinedWarning", "contained", "containedInherit", "containedPrimary", "containedSecondary", "containedSuccess", "containedError", "containedInfo", "containedWarning", "disableElevation", "focusVisible", "disabled", "colorInherit", "textSizeSmall", "textSizeMedium", "textSizeLarge", "outlinedSizeSmall", "outlinedSizeMedium", "outlinedSizeLarge", "containedSizeSmall", "containedSizeMedium", "containedSizeLarge", "sizeMedium", "sizeSmall", "sizeLarge", "fullWidth", "startIcon", "endIcon", "iconSizeSmall", "iconSizeMedium", "iconSizeLarge"]); var Ae = t.createContext({}); var pe = t.createContext(void 0), fe = ["children", "color", "component", "className", "disabled", "disableElevation", "disableFocusRipple", "endIcon", "focusVisibleClassName", "fullWidth", "size", "startIcon", "type", "variant"], me = function (e) { return (0, c.Z)({}, "small" === e.size && { "& > *:nth-of-type(1)": { fontSize: 18 } }, "medium" === e.size && { "& > *:nth-of-type(1)": { fontSize: 20 } }, "large" === e.size && { "& > *:nth-of-type(1)": { fontSize: 22 } }) }, ve = (0, h.ZP)(Ce, { shouldForwardProp: function (e) { return (0, h.FO)(e) || "classes" === e }, name: "MuiButton", slot: "Root", overridesResolver: function (e, t) { var n = e.ownerState; return [t.root, t[n.variant], t["".concat(n.variant).concat((0, de.Z)(n.color))], t["size".concat((0, de.Z)(n.size))], t["".concat(n.variant, "Size").concat((0, de.Z)(n.size))], "inherit" === n.color && t.colorInherit, n.disableElevation && t.disableElevation, n.fullWidth && t.fullWidth] } })((function (e) { var t, n, i, r = e.theme, a = e.ownerState, o = "light" === r.palette.mode ? r.palette.grey[300] : r.palette.grey[800], s = "light" === r.palette.mode ? r.palette.grey.A100 : r.palette.grey[700]; return (0, c.Z)({}, r.typography.button, (t = { minWidth: 64, padding: "6px 16px", borderRadius: (r.vars || r).shape.borderRadius, transition: r.transitions.create(["background-color", "box-shadow", "border-color", "color"], { duration: r.transitions.duration.short }), "&:hover": (0, c.Z)({ textDecoration: "none", backgroundColor: r.vars ? "rgba(".concat(r.vars.palette.text.primaryChannel, " / ").concat(r.vars.palette.action.hoverOpacity, ")") : (0, I.Fq)(r.palette.text.primary, r.palette.action.hoverOpacity), "@media (hover: none)": { backgroundColor: "transparent" } }, "text" === a.variant && "inherit" !== a.color && { backgroundColor: r.vars ? "rgba(".concat(r.vars.palette[a.color].mainChannel, " / ").concat(r.vars.palette.action.hoverOpacity, ")") : (0, I.Fq)(r.palette[a.color].main, r.palette.action.hoverOpacity), "@media (hover: none)": { backgroundColor: "transparent" } }, "outlined" === a.variant && "inherit" !== a.color && { border: "1px solid ".concat((r.vars || r).palette[a.color].main), backgroundColor: r.vars ? "rgba(".concat(r.vars.palette[a.color].mainChannel, " / ").concat(r.vars.palette.action.hoverOpacity, ")") : (0, I.Fq)(r.palette[a.color].main, r.palette.action.hoverOpacity), "@media (hover: none)": { backgroundColor: "transparent" } }, "contained" === a.variant && { backgroundColor: r.vars ? r.vars.palette.Button.inheritContainedHoverBg : s, boxShadow: (r.vars || r).shadows[4], "@media (hover: none)": { boxShadow: (r.vars || r).shadows[2], backgroundColor: (r.vars || r).palette.grey[300] } }, "contained" === a.variant && "inherit" !== a.color && { backgroundColor: (r.vars || r).palette[a.color].dark, "@media (hover: none)": { backgroundColor: (r.vars || r).palette[a.color].main } }), "&:active": (0, c.Z)({}, "contained" === a.variant && { boxShadow: (r.vars || r).shadows[8] }) }, (0, l.Z)(t, "&.".concat(he.focusVisible), (0, c.Z)({}, "contained" === a.variant && { boxShadow: (r.vars || r).shadows[6] })), (0, l.Z)(t, "&.".concat(he.disabled), (0, c.Z)({ color: (r.vars || r).palette.action.disabled }, "outlined" === a.variant && { border: "1px solid ".concat((r.vars || r).palette.action.disabledBackground) }, "contained" === a.variant && { color: (r.vars || r).palette.action.disabled, boxShadow: (r.vars || r).shadows[0], backgroundColor: (r.vars || r).palette.action.disabledBackground })), t), "text" === a.variant && { padding: "6px 8px" }, "text" === a.variant && "inherit" !== a.color && { color: (r.vars || r).palette[a.color].main }, "outlined" === a.variant && { padding: "5px 15px", border: "1px solid currentColor" }, "outlined" === a.variant && "inherit" !== a.color && { color: (r.vars || r).palette[a.color].main, border: r.vars ? "1px solid rgba(".concat(r.vars.palette[a.color].mainChannel, " / 0.5)") : "1px solid ".concat((0, I.Fq)(r.palette[a.color].main, .5)) }, "contained" === a.variant && { color: r.vars ? r.vars.palette.text.primary : null == (n = (i = r.palette).getContrastText) ? void 0 : n.call(i, r.palette.grey[300]), backgroundColor: r.vars ? r.vars.palette.Button.inheritContainedBg : o, boxShadow: (r.vars || r).shadows[2] }, "contained" === a.variant && "inherit" !== a.color && { color: (r.vars || r).palette[a.color].contrastText, backgroundColor: (r.vars || r).palette[a.color].main }, "inherit" === a.color && { color: "inherit", borderColor: "currentColor" }, "small" === a.size && "text" === a.variant && { padding: "4px 5px", fontSize: r.typography.pxToRem(13) }, "large" === a.size && "text" === a.variant && { padding: "8px 11px", fontSize: r.typography.pxToRem(15) }, "small" === a.size && "outlined" === a.variant && { padding: "3px 9px", fontSize: r.typography.pxToRem(13) }, "large" === a.size && "outlined" === a.variant && { padding: "7px 21px", fontSize: r.typography.pxToRem(15) }, "small" === a.size && "contained" === a.variant && { padding: "4px 10px", fontSize: r.typography.pxToRem(13) }, "large" === a.size && "contained" === a.variant && { padding: "8px 22px", fontSize: r.typography.pxToRem(15) }, a.fullWidth && { width: "100%" }) }), (function (e) { var t; return e.ownerState.disableElevation && (t = { boxShadow: "none", "&:hover": { boxShadow: "none" } }, (0, l.Z)(t, "&.".concat(he.focusVisible), { boxShadow: "none" }), (0, l.Z)(t, "&:active", { boxShadow: "none" }), (0, l.Z)(t, "&.".concat(he.disabled), { boxShadow: "none" }), t) })), be = (0, h.ZP)("span", { name: "MuiButton", slot: "StartIcon", overridesResolver: function (e, t) { var n = e.ownerState; return [t.startIcon, t["iconSize".concat((0, de.Z)(n.size))]] } })((function (e) { var t = e.ownerState; return (0, c.Z)({ display: "inherit", marginRight: 8, marginLeft: -4 }, "small" === t.size && { marginLeft: -2 }, me(t)) })), ye = (0, h.ZP)("span", { name: "MuiButton", slot: "EndIcon", overridesResolver: function (e, t) { var n = e.ownerState; return [t.endIcon, t["iconSize".concat((0, de.Z)(n.size))]] } })((function (e) { var t = e.ownerState; return (0, c.Z)({ display: "inherit", marginRight: -4, marginLeft: 8 }, "small" === t.size && { marginRight: -2 }, me(t)) })), Ge = t.forwardRef((function (e, n) { var i = t.useContext(Ae), r = t.useContext(pe), a = (0, C.Z)(i, e), o = (0, A.Z)({ props: a, name: "MuiButton" }), s = o.children, l = o.color, I = void 0 === l ? "primary" : l, h = o.component, p = void 0 === h ? "button" : h, f = o.className, m = o.disabled, v = void 0 !== m && m, b = o.disableElevation, y = void 0 !== b && b, G = o.disableFocusRipple, B = void 0 !== G && G, Z = o.endIcon, w = o.focusVisibleClassName, S = o.fullWidth, R = void 0 !== S && S, x = o.size, W = void 0 === x ? "medium" : x, V = o.startIcon, k = o.type, H = o.variant, M = void 0 === H ? "text" : H, F = (0, g.Z)(o, fe), N = (0, c.Z)({}, o, { color: I, component: p, disabled: v, disableElevation: y, disableFocusRipple: B, fullWidth: R, size: W, type: k, variant: M }), X = function (e) { var t = e.color, n = e.disableElevation, i = e.fullWidth, r = e.size, a = e.variant, o = e.classes, s = { root: ["root", a, "".concat(a).concat((0, de.Z)(t)), "size".concat((0, de.Z)(r)), "".concat(a, "Size").concat((0, de.Z)(r)), "inherit" === t && "colorInherit", n && "disableElevation", i && "fullWidth"], label: ["label"], startIcon: ["startIcon", "iconSize".concat((0, de.Z)(r))], endIcon: ["endIcon", "iconSize".concat((0, de.Z)(r))] }, l = (0, d.Z)(s, Ie, o); return (0, c.Z)({}, o, l) }(N), Y = V && (0, K.jsx)(be, { className: X.startIcon, ownerState: N, children: V }), L = Z && (0, K.jsx)(ye, { className: X.endIcon, ownerState: N, children: Z }), z = r || ""; return (0, K.jsxs)(ve, (0, c.Z)({ ownerState: N, className: (0, u.Z)(i.className, X.root, f, z), component: p, disabled: v, focusRipple: !B, focusVisibleClassName: (0, u.Z)(X.focusVisible, w), ref: n, type: k }, F, { classes: X, children: [Y, s, L] })) })), Be = n(2466), Ze = n(7416), we = ["sx"]; function Se(e) { var t, n = e.sx, i = function (e) { var t, n, i = { systemProps: {}, otherProps: {} }, r = null != (t = null == e || null == (n = e.theme) ? void 0 : n.unstable_sxConfig) ? t : Ze.Z; return Object.keys(e).forEach((function (t) { r[t] ? i.systemProps[t] = e[t] : i.otherProps[t] = e[t] })), i }((0, g.Z)(e, we)), r = i.systemProps, a = i.otherProps; return t = Array.isArray(n) ? [r].concat((0, v.Z)(n)) : "function" === typeof n ? function () { var e = n.apply(void 0, arguments); return (0, Be.P)(e) ? (0, c.Z)({}, r, e) : r } : (0, c.Z)({}, r, n), (0, c.Z)({}, a, { sx: t }) } function Re(e) { return (0, ae.Z)("MuiTypography", e) } (0, z.Z)("MuiTypography", ["root", "h1", "h2", "h3", "h4", "h5", "h6", "subtitle1", "subtitle2", "body1", "body2", "inherit", "button", "caption", "overline", "alignLeft", "alignRight", "alignCenter", "alignJustify", "noWrap", "gutterBottom", "paragraph"]); var xe = ["align", "className", "component", "gutterBottom", "noWrap", "paragraph", "variant", "variantMapping"], We = (0, h.ZP)("span", { name: "MuiTypography", slot: "Root", overridesResolver: function (e, t) { var n = e.ownerState; return [t.root, n.variant && t[n.variant], "inherit" !== n.align && t["align".concat((0, de.Z)(n.align))], n.noWrap && t.noWrap, n.gutterBottom && t.gutterBottom, n.paragraph && t.paragraph] } })((function (e) { var t = e.theme, n = e.ownerState; return (0, c.Z)({ margin: 0 }, "inherit" === n.variant && { font: "inherit" }, "inherit" !== n.variant && t.typography[n.variant], "inherit" !== n.align && { textAlign: n.align }, n.noWrap && { overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }, n.gutterBottom && { marginBottom: "0.35em" }, n.paragraph && { marginBottom: 16 }) })), Ve = { h1: "h1", h2: "h2", h3: "h3", h4: "h4", h5: "h5", h6: "h6", subtitle1: "h6", subtitle2: "h6", body1: "p", body2: "p", inherit: "p" }, ke = { primary: "primary.main", textPrimary: "text.primary", secondary: "secondary.main", textSecondary: "text.secondary", error: "error.main" }, He = t.forwardRef((function (e, t) { var n = (0, A.Z)({ props: e, name: "MuiTypography" }), i = function (e) { return ke[e] || e }(n.color), r = Se((0, c.Z)({}, n, { color: i })), a = r.align, o = void 0 === a ? "inherit" : a, s = r.className, l = r.component, C = r.gutterBottom, I = void 0 !== C && C, h = r.noWrap, p = void 0 !== h && h, f = r.paragraph, m = void 0 !== f && f, v = r.variant, b = void 0 === v ? "body1" : v, y = r.variantMapping, G = void 0 === y ? Ve : y, B = (0, g.Z)(r, xe), Z = (0, c.Z)({}, r, { align: o, color: i, className: s, component: l, gutterBottom: I, noWrap: p, paragraph: m, variant: b, variantMapping: G }), w = l || (m ? "p" : G[b] || Ve[b]) || "span", S = function (e) { var t = e.align, n = e.gutterBottom, i = e.noWrap, r = e.paragraph, a = e.variant, o = e.classes, s = { root: ["root", a, "inherit" !== e.align && "align".concat((0, de.Z)(t)), n && "gutterBottom", i && "noWrap", r && "paragraph"] }; return (0, d.Z)(s, Re, o) }(Z); return (0, K.jsx)(We, (0, c.Z)({ as: w, ref: t, ownerState: Z, className: (0, u.Z)(S.root, s) }, B)) })), Me = n(8996), Fe = n(7248), Ne = n(327); var Xe = function (e) { e() }, Ye = function () { return Xe }, Ke = Symbol.for("react-redux-context"), Le = "undefined" !== typeof globalThis ? globalThis : {}; function ze() { var e; if (!t.createContext) return {}; var n = null != (e = Le[Ke]) ? e : Le[Ke] = new Map, i = n.get(t.createContext); return i || (i = t.createContext(null), n.set(t.createContext, i)), i } var Ee = ze(); function Te() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : Ee; return function () { return (0, t.useContext)(e) } } var _e = Te(), Ue = function () { throw new Error("uSES not initialized!") }, De = function (e, t) { return e === t }; function Pe() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : Ee, n = e === Ee ? _e : Te(e); return function (e) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, r = "function" === typeof i ? { equalityFn: i } : i, a = r.equalityFn, o = void 0 === a ? De : a, s = r.stabilityCheck, g = void 0 === s ? void 0 : s; r.noopCheck; var c = n(), u = c.store, C = c.subscription, d = c.getServerState, I = c.stabilityCheck, h = (c.noopCheck, (0, t.useRef)(!0), (0, t.useCallback)((0, l.Z)({}, e.name, (function (t) { return e(t) }))[e.name], [e, I, g])), A = Ue(C.addNestedSub, u.getState, d || u.getState, h, o); return (0, t.useDebugValue)(A), A } } var Je = Pe(), Oe = n(7441); var je = { notify: function () { }, get: function () { return [] } }; function Qe(e, t) { var n, i = je, r = 0, a = !1; function o() { g.onStateChange && g.onStateChange() } function s() { r++, n || (n = t ? t.addNestedSub(o) : e.subscribe(o), i = function () { var e = Ye(), t = null, n = null; return { clear: function () { t = null, n = null }, notify: function () { e((function () { for (var e = t; e;)e.callback(), e = e.next })) }, get: function () { for (var e = [], n = t; n;)e.push(n), n = n.next; return e }, subscribe: function (e) { var i = !0, r = n = { callback: e, next: null, prev: n }; return r.prev ? r.prev.next = r : t = r, function () { i && null !== t && (i = !1, r.next ? r.next.prev = r.prev : n = r.prev, r.prev ? r.prev.next = r.next : t = r.next) } } } }()) } function l() { r--, n && 0 === r && (n(), n = void 0, i.clear(), i = je) } var g = { addNestedSub: function (e) { s(); var t = i.subscribe(e), n = !1; return function () { n || (n = !0, t(), l()) } }, notifyNestedSubs: function () { i.notify() }, handleChangeWrapper: o, isSubscribed: function () { return a }, trySubscribe: function () { a || (a = !0, s()) }, tryUnsubscribe: function () { a && (a = !1, l()) }, getListeners: function () { return i } }; return g } var qe = !("undefined" === typeof window || "undefined" === typeof window.document || "undefined" === typeof window.document.createElement) ? t.useLayoutEffect : t.useEffect; var $e = function (e) { var n = e.store, i = e.context, r = e.children, a = e.serverState, o = e.stabilityCheck, s = void 0 === o ? "once" : o, l = e.noopCheck, g = void 0 === l ? "once" : l, c = t.useMemo((function () { var e = Qe(n); return { store: n, subscription: e, getServerState: a ? function () { return a } : void 0, stabilityCheck: s, noopCheck: g } }), [n, a, s, g]), u = t.useMemo((function () { return n.getState() }), [n]); qe((function () { var e = c.subscription; return e.onStateChange = e.notifyNestedSubs, e.trySubscribe(), u !== n.getState() && e.notifyNestedSubs(), function () { e.tryUnsubscribe(), e.onStateChange = void 0 } }), [c, u]); var C = i || Ee; return t.createElement(C.Provider, { value: c }, r) }; function et() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : Ee, t = e === Ee ? _e : Te(e); return function () { return t().store } } var tt = et(); function nt() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : Ee, t = e === Ee ? tt : et(e); return function () { return t().dispatch } } var it, rt = nt(); function at(e) { for (var t = arguments.length, n = Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++)n[i - 1] = arguments[i]; throw Error("[Immer] minified error nr: " + e + (n.length ? " " + n.map((function (e) { return "'" + e + "'" })).join(",") : "") + ". Find the full error at: https://bit.ly/3cXEKWf") } function ot(e) { return !!e && !!e[Ot] } function st(e) { var t; return !!e && (function (e) { if (!e || "object" != typeof e) return !1; var t = Object.getPrototypeOf(e); if (null === t) return !0; var n = Object.hasOwnProperty.call(t, "constructor") && t.constructor; return n === Object || "function" == typeof n && Function.toString.call(n) === jt }(e) || Array.isArray(e) || !!e[Jt] || !!(null === (t = e.constructor) || void 0 === t ? void 0 : t[Jt]) || It(e) || ht(e)) } function lt(e, t, n) { void 0 === n && (n = !1), 0 === gt(e) ? (n ? Object.keys : Qt)(e).forEach((function (i) { n && "symbol" == typeof i || t(i, e[i], e) })) : e.forEach((function (n, i) { return t(i, n, e) })) } function gt(e) { var t = e[Ot]; return t ? t.i > 3 ? t.i - 4 : t.i : Array.isArray(e) ? 1 : It(e) ? 2 : ht(e) ? 3 : 0 } function ct(e, t) { return 2 === gt(e) ? e.has(t) : Object.prototype.hasOwnProperty.call(e, t) } function ut(e, t) { return 2 === gt(e) ? e.get(t) : e[t] } function Ct(e, t, n) { var i = gt(e); 2 === i ? e.set(t, n) : 3 === i ? e.add(n) : e[t] = n } function dt(e, t) { return e === t ? 0 !== e || 1 / e == 1 / t : e != e && t != t } function It(e) { return _t && e instanceof Map } function ht(e) { return Ut && e instanceof Set } function At(e) { return e.o || e.t } function pt(e) { if (Array.isArray(e)) return Array.prototype.slice.call(e); var t = qt(e); delete t[Ot]; for (var n = Qt(t), i = 0; i < n.length; i++) { var r = n[i], a = t[r]; !1 === a.writable && (a.writable = !0, a.configurable = !0), (a.get || a.set) && (t[r] = { configurable: !0, writable: !0, enumerable: a.enumerable, value: e[r] }) } return Object.create(Object.getPrototypeOf(e), t) } function ft(e, t) { return void 0 === t && (t = !1), vt(e) || ot(e) || !st(e) || (gt(e) > 1 && (e.set = e.add = e.clear = e.delete = mt), Object.freeze(e), t && lt(e, (function (e, t) { return ft(t, !0) }), !0)), e } function mt() { at(2) } function vt(e) { return null == e || "object" != typeof e || Object.isFrozen(e) } function bt(e) { var t = $t[e]; return t || at(18, e), t } function yt(e, t) { $t[e] || ($t[e] = t) } function Gt() { return Et } function Bt(e, t) { t && (bt("Patches"), e.u = [], e.s = [], e.v = t) } function Zt(e) { wt(e), e.p.forEach(Rt), e.p = null } function wt(e) { e === Et && (Et = e.l) } function St(e) { return Et = { p: [], l: Et, h: e, m: !0, _: 0 } } function Rt(e) { var t = e[Ot]; 0 === t.i || 1 === t.i ? t.j() : t.g = !0 } function xt(e, t) { t._ = t.p.length; var n = t.p[0], i = void 0 !== e && e !== n; return t.h.O || bt("ES5").S(t, e, i), i ? (n[Ot].P && (Zt(t), at(4)), st(e) && (e = Wt(t, e), t.l || kt(t, e)), t.u && bt("Patches").M(n[Ot].t, e, t.u, t.s)) : e = Wt(t, n, []), Zt(t), t.u && t.v(t.u, t.s), e !== Pt ? e : void 0 } function Wt(e, t, n) { if (vt(t)) return t; var i = t[Ot]; if (!i) return lt(t, (function (r, a) { return Vt(e, i, t, r, a, n) }), !0), t; if (i.A !== e) return t; if (!i.P) return kt(e, i.t, !0), i.t; if (!i.I) { i.I = !0, i.A._--; var r = 4 === i.i || 5 === i.i ? i.o = pt(i.k) : i.o, a = r, o = !1; 3 === i.i && (a = new Set(r), r.clear(), o = !0), lt(a, (function (t, a) { return Vt(e, i, r, t, a, n, o) })), kt(e, r, !1), n && e.u && bt("Patches").N(i, n, e.u, e.s) } return i.o } function Vt(e, t, n, i, r, a, o) { if (ot(r)) { var s = Wt(e, r, a && t && 3 !== t.i && !ct(t.R, i) ? a.concat(i) : void 0); if (Ct(n, i, s), !ot(s)) return; e.m = !1 } else o && n.add(r); if (st(r) && !vt(r)) { if (!e.h.D && e._ < 1) return; Wt(e, r), t && t.A.l || kt(e, r) } } function kt(e, t, n) { void 0 === n && (n = !1), !e.l && e.h.D && e.m && ft(t, n) } function Ht(e, t) { var n = e[Ot]; return (n ? At(n) : e)[t] } function Mt(e, t) { if (t in e) for (var n = Object.getPrototypeOf(e); n;) { var i = Object.getOwnPropertyDescriptor(n, t); if (i) return i; n = Object.getPrototypeOf(n) } } function Ft(e) { e.P || (e.P = !0, e.l && Ft(e.l)) } function Nt(e) { e.o || (e.o = pt(e.t)) } function Xt(e, t, n) { var i = It(t) ? bt("MapSet").F(t, n) : ht(t) ? bt("MapSet").T(t, n) : e.O ? function (e, t) { var n = Array.isArray(e), i = { i: n ? 1 : 0, A: t ? t.A : Gt(), P: !1, I: !1, R: {}, l: t, t: e, k: null, o: null, j: null, C: !1 }, r = i, a = en; n && (r = [i], a = tn); var o = Proxy.revocable(r, a), s = o.revoke, l = o.proxy; return i.k = l, i.j = s, l }(t, n) : bt("ES5").J(t, n); return (n ? n.A : Gt()).p.push(i), i } function Yt(e) { return ot(e) || at(22, e), function e(t) { if (!st(t)) return t; var n, i = t[Ot], r = gt(t); if (i) { if (!i.P && (i.i < 4 || !bt("ES5").K(i))) return i.t; i.I = !0, n = Kt(t, r), i.I = !1 } else n = Kt(t, r); return lt(n, (function (t, r) { i && ut(i.t, t) === r || Ct(n, t, e(r)) })), 3 === r ? new Set(n) : n }(e) } function Kt(e, t) { switch (t) { case 2: return new Map(e); case 3: return Array.from(e) }return pt(e) } function Lt() { function e(e, t) { var n = r[e]; return n ? n.enumerable = t : r[e] = n = { configurable: !0, enumerable: t, get: function () { var t = this[Ot]; return en.get(t, e) }, set: function (t) { var n = this[Ot]; en.set(n, e, t) } }, n } function t(e) { for (var t = e.length - 1; t >= 0; t--) { var r = e[t][Ot]; if (!r.P) switch (r.i) { case 5: i(r) && Ft(r); break; case 4: n(r) && Ft(r) } } } function n(e) { for (var t = e.t, n = e.k, i = Qt(n), r = i.length - 1; r >= 0; r--) { var a = i[r]; if (a !== Ot) { var o = t[a]; if (void 0 === o && !ct(t, a)) return !0; var s = n[a], l = s && s[Ot]; if (l ? l.t !== o : !dt(s, o)) return !0 } } var g = !!t[Ot]; return i.length !== Qt(t).length + (g ? 0 : 1) } function i(e) { var t = e.k; if (t.length !== e.t.length) return !0; var n = Object.getOwnPropertyDescriptor(t, t.length - 1); if (n && !n.get) return !0; for (var i = 0; i < t.length; i++)if (!t.hasOwnProperty(i)) return !0; return !1 } var r = {}; yt("ES5", { J: function (t, n) { var i = Array.isArray(t), r = function (t, n) { if (t) { for (var i = Array(n.length), r = 0; r < n.length; r++)Object.defineProperty(i, "" + r, e(r, !0)); return i } var a = qt(n); delete a[Ot]; for (var o = Qt(a), s = 0; s < o.length; s++) { var l = o[s]; a[l] = e(l, t || !!a[l].enumerable) } return Object.create(Object.getPrototypeOf(n), a) }(i, t), a = { i: i ? 5 : 4, A: n ? n.A : Gt(), P: !1, I: !1, R: {}, l: n, t: t, k: r, o: null, g: !1, C: !1 }; return Object.defineProperty(r, Ot, { value: a, writable: !0 }), r }, S: function (e, n, r) { r ? ot(n) && n[Ot].A === e && t(e.p) : (e.u && function e(t) { if (t && "object" == typeof t) { var n = t[Ot]; if (n) { var r = n.t, a = n.k, o = n.R, s = n.i; if (4 === s) lt(a, (function (t) { t !== Ot && (void 0 !== r[t] || ct(r, t) ? o[t] || e(a[t]) : (o[t] = !0, Ft(n))) })), lt(r, (function (e) { void 0 !== a[e] || ct(a, e) || (o[e] = !1, Ft(n)) })); else if (5 === s) { if (i(n) && (Ft(n), o.length = !0), a.length < r.length) for (var l = a.length; l < r.length; l++)o[l] = !1; else for (var g = r.length; g < a.length; g++)o[g] = !0; for (var c = Math.min(a.length, r.length), u = 0; u < c; u++)a.hasOwnProperty(u) || (o[u] = !0), void 0 === o[u] && e(a[u]) } } } }(e.p[0]), t(e.p)) }, K: function (e) { return 4 === e.i ? n(e) : i(e) } }) } !function (e) { Ue = e }(Ne.useSyncExternalStoreWithSelector), function (e) { e }(Fe.useSyncExternalStore), it = i.unstable_batchedUpdates, Xe = it; var zt, Et, Tt = "undefined" != typeof Symbol && "symbol" == typeof Symbol("x"), _t = "undefined" != typeof Map, Ut = "undefined" != typeof Set, Dt = "undefined" != typeof Proxy && void 0 !== Proxy.revocable && "undefined" != typeof Reflect, Pt = Tt ? Symbol.for("immer-nothing") : ((zt = {})["immer-nothing"] = !0, zt), Jt = Tt ? Symbol.for("immer-draftable") : "__$immer_draftable", Ot = Tt ? Symbol.for("immer-state") : "__$immer_state", jt = ("undefined" != typeof Symbol && Symbol.iterator, "" + Object.prototype.constructor), Qt = "undefined" != typeof Reflect && Reflect.ownKeys ? Reflect.ownKeys : void 0 !== Object.getOwnPropertySymbols ? function (e) { return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)) } : Object.getOwnPropertyNames, qt = Object.getOwnPropertyDescriptors || function (e) { var t = {}; return Qt(e).forEach((function (n) { t[n] = Object.getOwnPropertyDescriptor(e, n) })), t }, $t = {}, en = { get: function (e, t) { if (t === Ot) return e; var n = At(e); if (!ct(n, t)) return function (e, t, n) { var i, r = Mt(t, n); return r ? "value" in r ? r.value : null === (i = r.get) || void 0 === i ? void 0 : i.call(e.k) : void 0 }(e, n, t); var i = n[t]; return e.I || !st(i) ? i : i === Ht(e.t, t) ? (Nt(e), e.o[t] = Xt(e.A.h, i, e)) : i }, has: function (e, t) { return t in At(e) }, ownKeys: function (e) { return Reflect.ownKeys(At(e)) }, set: function (e, t, n) { var i = Mt(At(e), t); if (null == i ? void 0 : i.set) return i.set.call(e.k, n), !0; if (!e.P) { var r = Ht(At(e), t), a = null == r ? void 0 : r[Ot]; if (a && a.t === n) return e.o[t] = n, e.R[t] = !1, !0; if (dt(n, r) && (void 0 !== n || ct(e.t, t))) return !0; Nt(e), Ft(e) } return e.o[t] === n && (void 0 !== n || t in e.o) || Number.isNaN(n) && Number.isNaN(e.o[t]) || (e.o[t] = n, e.R[t] = !0), !0 }, deleteProperty: function (e, t) { return void 0 !== Ht(e.t, t) || t in e.t ? (e.R[t] = !1, Nt(e), Ft(e)) : delete e.R[t], e.o && delete e.o[t], !0 }, getOwnPropertyDescriptor: function (e, t) { var n = At(e), i = Reflect.getOwnPropertyDescriptor(n, t); return i ? { writable: !0, configurable: 1 !== e.i || "length" !== t, enumerable: i.enumerable, value: n[t] } : i }, defineProperty: function () { at(11) }, getPrototypeOf: function (e) { return Object.getPrototypeOf(e.t) }, setPrototypeOf: function () { at(12) } }, tn = {}; lt(en, (function (e, t) { tn[e] = function () { return arguments[0] = arguments[0][0], t.apply(this, arguments) } })), tn.deleteProperty = function (e, t) { return tn.set.call(this, e, t, void 0) }, tn.set = function (e, t, n) { return en.set.call(this, e[0], t, n, e[0]) }; var nn = function () { function e(e) { var t = this; this.O = Dt, this.D = !0, this.produce = function (e, n, i) { if ("function" == typeof e && "function" != typeof n) { var r = n; n = e; var a = t; return function (e) { var t = this; void 0 === e && (e = r); for (var i = arguments.length, o = Array(i > 1 ? i - 1 : 0), s = 1; s < i; s++)o[s - 1] = arguments[s]; return a.produce(e, (function (e) { var i; return (i = n).call.apply(i, [t, e].concat(o)) })) } } var o; if ("function" != typeof n && at(6), void 0 !== i && "function" != typeof i && at(7), st(e)) { var s = St(t), l = Xt(t, e, void 0), g = !0; try { o = n(l), g = !1 } finally { g ? Zt(s) : wt(s) } return "undefined" != typeof Promise && o instanceof Promise ? o.then((function (e) { return Bt(s, i), xt(e, s) }), (function (e) { throw Zt(s), e })) : (Bt(s, i), xt(o, s)) } if (!e || "object" != typeof e) { if (void 0 === (o = n(e)) && (o = e), o === Pt && (o = void 0), t.D && ft(o, !0), i) { var c = [], u = []; bt("Patches").M(e, o, c, u), i(c, u) } return o } at(21, e) }, this.produceWithPatches = function (e, n) { if ("function" == typeof e) return function (n) { for (var i = arguments.length, r = Array(i > 1 ? i - 1 : 0), a = 1; a < i; a++)r[a - 1] = arguments[a]; return t.produceWithPatches(n, (function (t) { return e.apply(void 0, [t].concat(r)) })) }; var i, r, a = t.produce(e, n, (function (e, t) { i = e, r = t })); return "undefined" != typeof Promise && a instanceof Promise ? a.then((function (e) { return [e, i, r] })) : [a, i, r] }, "boolean" == typeof (null == e ? void 0 : e.useProxies) && this.setUseProxies(e.useProxies), "boolean" == typeof (null == e ? void 0 : e.autoFreeze) && this.setAutoFreeze(e.autoFreeze) } var t = e.prototype; return t.createDraft = function (e) { st(e) || at(8), ot(e) && (e = Yt(e)); var t = St(this), n = Xt(this, e, void 0); return n[Ot].C = !0, wt(t), n }, t.finishDraft = function (e, t) { var n = (e && e[Ot]).A; return Bt(n, t), xt(void 0, n) }, t.setAutoFreeze = function (e) { this.D = e }, t.setUseProxies = function (e) { e && !Dt && at(20), this.O = e }, t.applyPatches = function (e, t) { var n; for (n = t.length - 1; n >= 0; n--) { var i = t[n]; if (0 === i.path.length && "replace" === i.op) { e = i.value; break } } n > -1 && (t = t.slice(n + 1)); var r = bt("Patches").$; return ot(e) ? r(e, t) : this.produce(e, (function (e) { return r(e, t) })) }, e }(), rn = new nn, an = rn.produce, on = (rn.produceWithPatches.bind(rn), rn.setAutoFreeze.bind(rn), rn.setUseProxies.bind(rn), rn.applyPatches.bind(rn), rn.createDraft.bind(rn), rn.finishDraft.bind(rn), an); function sn(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); t && (i = i.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), n.push.apply(n, i) } return n } function ln(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? sn(Object(n), !0).forEach((function (t) { (0, l.Z)(e, t, n[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : sn(Object(n)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) })) } return e } function gn(e) { return "Minified Redux error #" + e + "; visit https://redux.js.org/Errors?code=" + e + " for the full message or use the non-minified dev environment for full errors. " } var cn = "function" === typeof Symbol && Symbol.observable || "@@observable", un = function () { return Math.random().toString(36).substring(7).split("").join(".") }, Cn = { INIT: "@@redux/INIT" + un(), REPLACE: "@@redux/REPLACE" + un(), PROBE_UNKNOWN_ACTION: function () { return "@@redux/PROBE_UNKNOWN_ACTION" + un() } }; function dn(e) { if ("object" !== typeof e || null === e) return !1; for (var t = e; null !== Object.getPrototypeOf(t);)t = Object.getPrototypeOf(t); return Object.getPrototypeOf(e) === t } function In(e, t, n) { var i; if ("function" === typeof t && "function" === typeof n || "function" === typeof n && "function" === typeof arguments[3]) throw new Error(gn(0)); if ("function" === typeof t && "undefined" === typeof n && (n = t, t = void 0), "undefined" !== typeof n) { if ("function" !== typeof n) throw new Error(gn(1)); return n(In)(e, t) } if ("function" !== typeof e) throw new Error(gn(2)); var r = e, a = t, o = [], s = o, l = !1; function g() { s === o && (s = o.slice()) } function c() { if (l) throw new Error(gn(3)); return a } function u(e) { if ("function" !== typeof e) throw new Error(gn(4)); if (l) throw new Error(gn(5)); var t = !0; return g(), s.push(e), function () { if (t) { if (l) throw new Error(gn(6)); t = !1, g(); var n = s.indexOf(e); s.splice(n, 1), o = null } } } function C(e) { if (!dn(e)) throw new Error(gn(7)); if ("undefined" === typeof e.type) throw new Error(gn(8)); if (l) throw new Error(gn(9)); try { l = !0, a = r(a, e) } finally { l = !1 } for (var t = o = s, n = 0; n < t.length; n++) { (0, t[n])() } return e } return C({ type: Cn.INIT }), (i = { dispatch: C, subscribe: u, getState: c, replaceReducer: function (e) { if ("function" !== typeof e) throw new Error(gn(10)); r = e, C({ type: Cn.REPLACE }) } })[cn] = function () { var e, t = u; return (e = { subscribe: function (e) { if ("object" !== typeof e || null === e) throw new Error(gn(11)); function n() { e.next && e.next(c()) } return n(), { unsubscribe: t(n) } } })[cn] = function () { return this }, e }, i } function hn(e) { for (var t = Object.keys(e), n = {}, i = 0; i < t.length; i++) { var r = t[i]; 0, "function" === typeof e[r] && (n[r] = e[r]) } var a, o = Object.keys(n); try { !function (e) { Object.keys(e).forEach((function (t) { var n = e[t]; if ("undefined" === typeof n(void 0, { type: Cn.INIT })) throw new Error(gn(12)); if ("undefined" === typeof n(void 0, { type: Cn.PROBE_UNKNOWN_ACTION() })) throw new Error(gn(13)) })) }(n) } catch (s) { a = s } return function (e, t) { if (void 0 === e && (e = {}), a) throw a; for (var i = !1, r = {}, s = 0; s < o.length; s++) { var l = o[s], g = n[l], c = e[l], u = g(c, t); if ("undefined" === typeof u) { t && t.type; throw new Error(gn(14)) } r[l] = u, i = i || u !== c } return (i = i || o.length !== Object.keys(e).length) ? r : e } } function An() { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; return 0 === t.length ? function (e) { return e } : 1 === t.length ? t[0] : t.reduce((function (e, t) { return function () { return e(t.apply(void 0, arguments)) } })) } function pn() { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; return function (e) { return function () { var n = e.apply(void 0, arguments), i = function () { throw new Error(gn(15)) }, r = { getState: n.getState, dispatch: function () { return i.apply(void 0, arguments) } }, a = t.map((function (e) { return e(r) })); return i = An.apply(void 0, a)(n.dispatch), ln(ln({}, n), {}, { dispatch: i }) } } } function fn(e) { return function (t) { var n = t.dispatch, i = t.getState; return function (t) { return function (r) { return "function" === typeof r ? r(n, i, e) : t(r) } } } } var mn = fn(); mn.withExtraArgument = fn; var vn = mn, bn = function () { var e = function (t, n) { return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]) }, e(t, n) }; return function (t, n) { if ("function" !== typeof n && null !== n) throw new TypeError("Class extends value " + String(n) + " is not a constructor or null"); function i() { this.constructor = t } e(t, n), t.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype, new i) } }(), yn = function (e, t) { var n, i, r, a, o = { label: 0, sent: function () { if (1 & r[0]) throw r[1]; return r[1] }, trys: [], ops: [] }; return a = { next: s(0), throw: s(1), return: s(2) }, "function" === typeof Symbol && (a[Symbol.iterator] = function () { return this }), a; function s(a) { return function (s) { return function (a) { if (n) throw new TypeError("Generator is already executing."); for (; o;)try { if (n = 1, i && (r = 2 & a[0] ? i.return : a[0] ? i.throw || ((r = i.return) && r.call(i), 0) : i.next) && !(r = r.call(i, a[1])).done) return r; switch (i = 0, r && (a = [2 & a[0], r.value]), a[0]) { case 0: case 1: r = a; break; case 4: return o.label++, { value: a[1], done: !1 }; case 5: o.label++, i = a[1], a = [0]; continue; case 7: a = o.ops.pop(), o.trys.pop(); continue; default: if (!(r = (r = o.trys).length > 0 && r[r.length - 1]) && (6 === a[0] || 2 === a[0])) { o = 0; continue } if (3 === a[0] && (!r || a[1] > r[0] && a[1] < r[3])) { o.label = a[1]; break } if (6 === a[0] && o.label < r[1]) { o.label = r[1], r = a; break } if (r && o.label < r[2]) { o.label = r[2], o.ops.push(a); break } r[2] && o.ops.pop(), o.trys.pop(); continue }a = t.call(e, o) } catch (s) { a = [6, s], i = 0 } finally { n = r = 0 } if (5 & a[0]) throw a[1]; return { value: a[0] ? a[1] : void 0, done: !0 } }([a, s]) } } }, Gn = function (e, t) { for (var n = 0, i = t.length, r = e.length; n < i; n++, r++)e[r] = t[n]; return e }, Bn = Object.defineProperty, Zn = Object.defineProperties, wn = Object.getOwnPropertyDescriptors, Sn = Object.getOwnPropertySymbols, Rn = Object.prototype.hasOwnProperty, xn = Object.prototype.propertyIsEnumerable, Wn = function (e, t, n) { return t in e ? Bn(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n }, Vn = function (e, t) { for (var n in t || (t = {})) Rn.call(t, n) && Wn(e, n, t[n]); if (Sn) for (var i = 0, r = Sn(t); i < r.length; i++) { n = r[i]; xn.call(t, n) && Wn(e, n, t[n]) } return e }, kn = function (e, t) { return Zn(e, wn(t)) }, Hn = function (e, t, n) { return new Promise((function (i, r) { var a = function (e) { try { s(n.next(e)) } catch (t) { r(t) } }, o = function (e) { try { s(n.throw(e)) } catch (t) { r(t) } }, s = function (e) { return e.done ? i(e.value) : Promise.resolve(e.value).then(a, o) }; s((n = n.apply(e, t)).next()) })) }, Mn = "undefined" !== typeof window && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ : function () { if (0 !== arguments.length) return "object" === typeof arguments[0] ? An : An.apply(null, arguments) }; "undefined" !== typeof window && window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__; function Fn(e) { if ("object" !== typeof e || null === e) return !1; var t = Object.getPrototypeOf(e); if (null === t) return !0; for (var n = t; null !== Object.getPrototypeOf(n);)n = Object.getPrototypeOf(n); return t === n } function Nn(e, t) { function n() { for (var n = [], i = 0; i < arguments.length; i++)n[i] = arguments[i]; if (t) { var r = t.apply(void 0, n); if (!r) throw new Error("prepareAction did not return an object"); return Vn(Vn({ type: e, payload: r.payload }, "meta" in r && { meta: r.meta }), "error" in r && { error: r.error }) } return { type: e, payload: n[0] } } return n.toString = function () { return "" + e }, n.type = e, n.match = function (t) { return t.type === e }, n } var Xn = function (e) { function t() { for (var n = [], i = 0; i < arguments.length; i++)n[i] = arguments[i]; var r = e.apply(this, n) || this; return Object.setPrototypeOf(r, t.prototype), r } return bn(t, e), Object.defineProperty(t, Symbol.species, { get: function () { return t }, enumerable: !1, configurable: !0 }), t.prototype.concat = function () { for (var t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; return e.prototype.concat.apply(this, t) }, t.prototype.prepend = function () { for (var e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return 1 === e.length && Array.isArray(e[0]) ? new (t.bind.apply(t, Gn([void 0], e[0].concat(this)))) : new (t.bind.apply(t, Gn([void 0], e.concat(this)))) }, t }(Array), Yn = function (e) { function t() { for (var n = [], i = 0; i < arguments.length; i++)n[i] = arguments[i]; var r = e.apply(this, n) || this; return Object.setPrototypeOf(r, t.prototype), r } return bn(t, e), Object.defineProperty(t, Symbol.species, { get: function () { return t }, enumerable: !1, configurable: !0 }), t.prototype.concat = function () { for (var t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; return e.prototype.concat.apply(this, t) }, t.prototype.prepend = function () { for (var e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return 1 === e.length && Array.isArray(e[0]) ? new (t.bind.apply(t, Gn([void 0], e[0].concat(this)))) : new (t.bind.apply(t, Gn([void 0], e.concat(this)))) }, t }(Array); function Kn(e) { return st(e) ? on(e, (function () { })) : e } function Ln() { return function (e) { return function (e) { void 0 === e && (e = {}); var t = e.thunk, n = void 0 === t || t, i = (e.immutableCheck, e.serializableCheck, e.actionCreatorCheck, new Xn); n && (!function (e) { return "boolean" === typeof e }(n) ? i.push(vn.withExtraArgument(n.extraArgument)) : i.push(vn)); 0; return i }(e) } } function zn(e) { var t, n = {}, i = [], r = { addCase: function (e, t) { var i = "string" === typeof e ? e : e.type; if (!i) throw new Error("`builder.addCase` cannot be called with an empty action type"); if (i in n) throw new Error("`builder.addCase` cannot be called with two reducers for the same action type"); return n[i] = t, r }, addMatcher: function (e, t) { return i.push({ matcher: e, reducer: t }), r }, addDefaultCase: function (e) { return t = e, r } }; return e(r), [n, i, t] } var En = function (e) { void 0 === e && (e = 21); for (var t = "", n = e; n--;)t += "ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64 * Math.random() | 0]; return t }, Tn = ["name", "message", "stack", "code"], _n = function (e, t) { this.payload = e, this.meta = t }, Un = function (e, t) { this.payload = e, this.meta = t }, Dn = function (e) { if ("object" === typeof e && null !== e) { for (var t = {}, n = 0, i = Tn; n < i.length; n++) { var r = i[n]; "string" === typeof e[r] && (t[r] = e[r]) } return t } return { message: String(e) } }; !function () { function e(e, t, n) { var i = Nn(e + "/fulfilled", (function (e, t, n, i) { return { payload: e, meta: kn(Vn({}, i || {}), { arg: n, requestId: t, requestStatus: "fulfilled" }) } })), r = Nn(e + "/pending", (function (e, t, n) { return { payload: void 0, meta: kn(Vn({}, n || {}), { arg: t, requestId: e, requestStatus: "pending" }) } })), a = Nn(e + "/rejected", (function (e, t, i, r, a) { return { payload: r, error: (n && n.serializeError || Dn)(e || "Rejected"), meta: kn(Vn({}, a || {}), { arg: i, requestId: t, rejectedWithValue: !!r, requestStatus: "rejected", aborted: "AbortError" === (null == e ? void 0 : e.name), condition: "ConditionError" === (null == e ? void 0 : e.name) }) } })), o = "undefined" !== typeof AbortController ? AbortController : function () { function e() { this.signal = { aborted: !1, addEventListener: function () { }, dispatchEvent: function () { return !1 }, onabort: function () { }, removeEventListener: function () { }, reason: void 0, throwIfAborted: function () { } } } return e.prototype.abort = function () { 0 }, e }(); return Object.assign((function (e) { return function (s, l, g) { var c, u = (null == n ? void 0 : n.idGenerator) ? n.idGenerator(e) : En(), C = new o; function d(e) { c = e, C.abort() } var I = function () { return Hn(this, null, (function () { var o, I, h, A, p, f; return yn(this, (function (m) { switch (m.label) { case 0: return m.trys.push([0, 4, , 5]), A = null == (o = null == n ? void 0 : n.condition) ? void 0 : o.call(n, e, { getState: l, extra: g }), null === (v = A) || "object" !== typeof v || "function" !== typeof v.then ? [3, 2] : [4, A]; case 1: A = m.sent(), m.label = 2; case 2: if (!1 === A || C.signal.aborted) throw { name: "ConditionError", message: "Aborted due to condition callback returning false." }; return !0, p = new Promise((function (e, t) { return C.signal.addEventListener("abort", (function () { return t({ name: "AbortError", message: c || "Aborted" }) })) })), s(r(u, e, null == (I = null == n ? void 0 : n.getPendingMeta) ? void 0 : I.call(n, { requestId: u, arg: e }, { getState: l, extra: g }))), [4, Promise.race([p, Promise.resolve(t(e, { dispatch: s, getState: l, extra: g, requestId: u, signal: C.signal, abort: d, rejectWithValue: function (e, t) { return new _n(e, t) }, fulfillWithValue: function (e, t) { return new Un(e, t) } })).then((function (t) { if (t instanceof _n) throw t; return t instanceof Un ? i(t.payload, u, e, t.meta) : i(t, u, e) }))])]; case 3: return h = m.sent(), [3, 5]; case 4: return f = m.sent(), h = f instanceof _n ? a(null, u, e, f.payload, f.meta) : a(f, u, e), [3, 5]; case 5: return n && !n.dispatchConditionRejection && a.match(h) && h.meta.condition || s(h), [2, h] }var v })) })) }(); return Object.assign(I, { abort: d, requestId: u, arg: e, unwrap: function () { return I.then(Pn) } }) } }), { pending: r, rejected: a, fulfilled: i, typePrefix: e }) } e.withTypes = function () { return e } }(); function Pn(e) { if (e.meta && e.meta.rejectedWithValue) throw e.payload; if (e.error) throw e.error; return e.payload } Object.assign; var Jn = "listenerMiddleware"; Nn(Jn + "/add"), Nn(Jn + "/removeAll"), Nn(Jn + "/remove"); "function" === typeof queueMicrotask && queueMicrotask.bind("undefined" !== typeof window ? window : "undefined" !== typeof n.g ? n.g : globalThis); var On, jn = function (e) { return function (t) { setTimeout(t, e) } }; "undefined" !== typeof window && window.requestAnimationFrame ? window.requestAnimationFrame : jn(10); Lt(); var Qn = function (e) { var t = e.name; if (!t) throw new Error("`name` is a required option for createSlice"); var n, i = "function" == typeof e.initialState ? e.initialState : Kn(e.initialState), r = e.reducers || {}, a = Object.keys(r), o = {}, s = {}, l = {}; function g() { var t = "function" === typeof e.extraReducers ? zn(e.extraReducers) : [e.extraReducers], n = t[0], r = void 0 === n ? {} : n, a = t[1], o = void 0 === a ? [] : a, l = t[2], g = void 0 === l ? void 0 : l, c = Vn(Vn({}, r), s); return function (e, t, n, i) { void 0 === n && (n = []); var r, a = "function" === typeof t ? zn(t) : [t, n, i], o = a[0], s = a[1], l = a[2]; if (function (e) { return "function" === typeof e }(e)) r = function () { return Kn(e()) }; else { var g = Kn(e); r = function () { return g } } function c(e, t) { void 0 === e && (e = r()); var n = Gn([o[t.type]], s.filter((function (e) { return (0, e.matcher)(t) })).map((function (e) { return e.reducer }))); return 0 === n.filter((function (e) { return !!e })).length && (n = [l]), n.reduce((function (e, n) { if (n) { var i; if (ot(e)) return void 0 === (i = n(e, t)) ? e : i; if (st(e)) return on(e, (function (e) { return n(e, t) })); if (void 0 === (i = n(e, t))) { if (null === e) return e; throw Error("A case reducer on a non-draftable value must not return undefined") } return i } return e }), e) } return c.getInitialState = r, c }(i, (function (e) { for (var t in c) e.addCase(t, c[t]); for (var n = 0, i = o; n < i.length; n++) { var r = i[n]; e.addMatcher(r.matcher, r.reducer) } g && e.addDefaultCase(g) })) } return a.forEach((function (e) { var n, i, a = r[e], g = t + "/" + e; "reducer" in a ? (n = a.reducer, i = a.prepare) : n = a, o[e] = n, s[g] = n, l[e] = i ? Nn(g, i) : Nn(g) })), { name: t, reducer: function (e, t) { return n || (n = g()), n(e, t) }, actions: l, caseReducers: o, getInitialState: function () { return n || (n = g()), n.getInitialState() } } }({ name: "BlockChainDetails", initialState: { selectedCardIndex: [], userIntract: !1, task: 1, ifClickLeft: !1, isVerified: !1, candidatesList: [{ id: 1, name: "Amit Trivedi", checks: [!0, !0, !0], verified: !0 }, { id: 2, name: "Vikram Patel", checks: [!0, !0, !0], verified: !0 }, { id: 3, name: "Geeta Jeeva", checks: [!0, !0, !0], verified: !0 }] }, reducers: { updateSelectedCardIndex: function (e, t) { e.selectedCardIndex = t.payload }, updateUserInteract: function (e, t) { e.userIntract = t.payload }, updateTask: function (e, t) { e.task = t.payload }, clearState: function (e, t) { e.selectedCardIndex = [], e.task = 1, e.userIntract = !1, e.ifClickLeft = !1 }, onClickLeft: function (e, t) { e.ifClickLeft = t.payload }, toggleCheck: function (e, t) { var n = e.candidatesList.find((function (e) { return e.id === t.payload.candidateId })); console.log(), n.checks[t.payload.checkIndex] = !n.checks[t.payload.checkIndex], n.verified = n.checks.every((function (e) { return e })) } } }), qn = Qn.actions, $n = qn.updateSelectedCardIndex, ei = qn.updateUserInteract, ti = qn.updateTask, ni = qn.onClickLeft, ii = qn.clearState, ri = qn.toggleCheck, ai = Qn.reducer, oi = function (e) { var n = e.instructions, i = e.heading, a = e.colors, o = (0, t.useState)(!1), s = (0, r.Z)(o, 2), l = s[0], g = s[1], c = rt(), u = Je((function (e) { return e.BlockChainReducer })), C = u.userIntract, d = u.task; return (0, t.useEffect)((function () { var e = setTimeout((function () { g(!0) }), 2e3); return function () { clearTimeout(e) } }), []), (0, K.jsxs)("div", { style: { color: "white" }, children: [(0, K.jsx)("h2", { style: { marginLeft: -1, color: "#22eff1" }, children: i }), (0, K.jsxs)("div", { style: { marginTop: "20px" }, children: [(0, K.jsx)("ul", { children: n && n.map((function (e, t) { return (0, K.jsx)("li", { style: { marginTop: "25px", color: a[t] }, children: e }, t) })) }), l && (0, K.jsx)(Ge, { sx: { marginTop: 3, marginLeft: -1 }, onClick: function () { C ? alert("Complete the task") : c(ni(!0)) }, children: (0, K.jsxs)(He, { style: { color: "#1bfaff", fontSize: 15, display: "flex", alignItems: "center" }, children: [1 === d ? "Start" : "Continue", (0, K.jsx)(Me.Z, {})] }) })] })] }) }; function si(e) { var n = (0, t.useState)(1), i = (0, r.Z)(n, 2), l = i[0], g = i[1], c = [a, o, s]; return (0, K.jsxs)(K.Fragment, { children: [(0, K.jsxs)("div", { className: "App", children: [(0, K.jsx)("div", { className: "image-container", children: (0, K.jsx)("img", { src: c[l - 1], alt: "Image ".concat(l) }) }), (0, K.jsxs)("div", { className: "button-container ", children: [(0, K.jsx)("button", { className: 'channel-button btn btn-outline-light details-btn"  '.concat(1 === l ? "active" : ""), onClick: function () { return g(1) }, children: "Channel 1" }), (0, K.jsx)("button", { className: "channel-button btn btn-outline-light  ".concat(2 === l ? "actives" : ""), onClick: function () { return g(2) }, children: "Channel 2" }), (0, K.jsx)("button", { className: "channel-button btn btn-outline-light  ".concat(3 === l ? "actives" : ""), onClick: function () { return g(3) }, children: "Channel 3" })] })] }), (0, K.jsx)("div", { children: (0, K.jsx)("div", { children: (0, K.jsx)("button", { style: { borderColor: "#22eff1" }, type: "button", className: "btn btn-outline-light details-btn", onClick: function () { e.onCloseClick(), e.onStepChange(), e.onActiveAccordionChange() }, children: "Close" }) }) })] }) } var li = n(3878), gi = n(9199), ci = n(181), ui = n(5267); function Ci(e) { return (0, li.Z)(e) || (0, gi.Z)(e) || (0, ci.Z)(e) || (0, ui.Z)() } var di = !1, Ii = "unmounted", hi = "exited", Ai = "entering", pi = "entered", fi = "exiting", mi = function (e) { function n(t, n) { var i; i = e.call(this, t, n) || this; var r, a = n && !n.isMounting ? t.enter : t.appear; return i.appearStatus = null, t.in ? a ? (r = hi, i.appearStatus = Ai) : r = pi : r = t.unmountOnExit || t.mountOnEnter ? Ii : hi, i.state = { status: r }, i.nextCallback = null, i } B(n, e), n.getDerivedStateFromProps = function (e, t) { return e.in && t.status === Ii ? { status: hi } : null }; var r = n.prototype; return r.componentDidMount = function () { this.updateStatus(!0, this.appearStatus) }, r.componentDidUpdate = function (e) { var t = null; if (e !== this.props) { var n = this.state.status; this.props.in ? n !== Ai && n !== pi && (t = Ai) : n !== Ai && n !== pi || (t = fi) } this.updateStatus(!1, t) }, r.componentWillUnmount = function () { this.cancelNextCallback() }, r.getTimeouts = function () { var e, t, n, i = this.props.timeout; return e = t = n = i, null != i && "number" !== typeof i && (e = i.exit, t = i.enter, n = void 0 !== i.appear ? i.appear : t), { exit: e, enter: t, appear: n } }, r.updateStatus = function (e, t) { if (void 0 === e && (e = !1), null !== t) if (this.cancelNextCallback(), t === Ai) { if (this.props.unmountOnExit || this.props.mountOnEnter) { var n = this.props.nodeRef ? this.props.nodeRef.current : i.findDOMNode(this); n && function (e) { e.scrollTop }(n) } this.performEnter(e) } else this.performExit(); else this.props.unmountOnExit && this.state.status === hi && this.setState({ status: Ii }) }, r.performEnter = function (e) { var t = this, n = this.props.enter, r = this.context ? this.context.isMounting : e, a = this.props.nodeRef ? [r] : [i.findDOMNode(this), r], o = a[0], s = a[1], l = this.getTimeouts(), g = r ? l.appear : l.enter; !e && !n || di ? this.safeSetState({ status: pi }, (function () { t.props.onEntered(o) })) : (this.props.onEnter(o, s), this.safeSetState({ status: Ai }, (function () { t.props.onEntering(o, s), t.onTransitionEnd(g, (function () { t.safeSetState({ status: pi }, (function () { t.props.onEntered(o, s) })) })) }))) }, r.performExit = function () { var e = this, t = this.props.exit, n = this.getTimeouts(), r = this.props.nodeRef ? void 0 : i.findDOMNode(this); t && !di ? (this.props.onExit(r), this.safeSetState({ status: fi }, (function () { e.props.onExiting(r), e.onTransitionEnd(n.exit, (function () { e.safeSetState({ status: hi }, (function () { e.props.onExited(r) })) })) }))) : this.safeSetState({ status: hi }, (function () { e.props.onExited(r) })) }, r.cancelNextCallback = function () { null !== this.nextCallback && (this.nextCallback.cancel(), this.nextCallback = null) }, r.safeSetState = function (e, t) { t = this.setNextCallback(t), this.setState(e, t) }, r.setNextCallback = function (e) { var t = this, n = !0; return this.nextCallback = function (i) { n && (n = !1, t.nextCallback = null, e(i)) }, this.nextCallback.cancel = function () { n = !1 }, this.nextCallback }, r.onTransitionEnd = function (e, t) { this.setNextCallback(t); var n = this.props.nodeRef ? this.props.nodeRef.current : i.findDOMNode(this), r = null == e && !this.props.addEndListener; if (n && !r) { if (this.props.addEndListener) { var a = this.props.nodeRef ? [this.nextCallback] : [n, this.nextCallback], o = a[0], s = a[1]; this.props.addEndListener(o, s) } null != e && setTimeout(this.nextCallback, e) } else setTimeout(this.nextCallback, 0) }, r.render = function () { var e = this.state.status; if (e === Ii) return null; var n = this.props, i = n.children, r = (n.in, n.mountOnEnter, n.unmountOnExit, n.appear, n.enter, n.exit, n.timeout, n.addEndListener, n.onEnter, n.onEntering, n.onEntered, n.onExit, n.onExiting, n.onExited, n.nodeRef, (0, g.Z)(n, ["children", "in", "mountOnEnter", "unmountOnExit", "appear", "enter", "exit", "timeout", "addEndListener", "onEnter", "onEntering", "onEntered", "onExit", "onExiting", "onExited", "nodeRef"])); return t.createElement(Z.Provider, { value: null }, "function" === typeof i ? i(e, r) : t.cloneElement(t.Children.only(i), r)) }, n }(t.Component); function vi() { } mi.contextType = Z, mi.propTypes = {}, mi.defaultProps = { in: !1, mountOnEnter: !1, unmountOnExit: !1, appear: !1, enter: !0, exit: !0, onEnter: vi, onEntering: vi, onEntered: vi, onExit: vi, onExiting: vi, onExited: vi }, mi.UNMOUNTED = Ii, mi.EXITED = hi, mi.ENTERING = Ai, mi.ENTERED = pi, mi.EXITING = fi; var bi = mi, yi = n(1314); function Gi(e, t) { var n, i, r = e.timeout, a = e.easing, o = e.style, s = void 0 === o ? {} : o; return { duration: null != (n = s.transitionDuration) ? n : "number" === typeof r ? r : r[t.mode] || 0, easing: null != (i = s.transitionTimingFunction) ? i : "object" === typeof a ? a[t.mode] : a, delay: s.transitionDelay } } var Bi = n(3459), Zi = n(9691), wi = n(988); function Si(e) { return (0, ae.Z)("MuiCollapse", e) } (0, z.Z)("MuiCollapse", ["root", "horizontal", "vertical", "entered", "hidden", "wrapper", "wrapperInner"]); var Ri = ["addEndListener", "children", "className", "collapsedSize", "component", "easing", "in", "onEnter", "onEntered", "onEntering", "onExit", "onExited", "onExiting", "orientation", "style", "timeout", "TransitionComponent"], xi = (0, h.ZP)("div", { name: "MuiCollapse", slot: "Root", overridesResolver: function (e, t) { var n = e.ownerState; return [t.root, t[n.orientation], "entered" === n.state && t.entered, "exited" === n.state && !n.in && "0px" === n.collapsedSize && t.hidden] } })((function (e) { var t = e.theme, n = e.ownerState; return (0, c.Z)({ height: 0, overflow: "hidden", transition: t.transitions.create("height") }, "horizontal" === n.orientation && { height: "auto", width: 0, transition: t.transitions.create("width") }, "entered" === n.state && (0, c.Z)({ height: "auto", overflow: "visible" }, "horizontal" === n.orientation && { width: "auto" }), "exited" === n.state && !n.in && "0px" === n.collapsedSize && { visibility: "hidden" }) })), Wi = (0, h.ZP)("div", { name: "MuiCollapse", slot: "Wrapper", overridesResolver: function (e, t) { return t.wrapper } })((function (e) { var t = e.ownerState; return (0, c.Z)({ display: "flex", width: "100%" }, "horizontal" === t.orientation && { width: "auto", height: "100%" }) })), Vi = (0, h.ZP)("div", { name: "MuiCollapse", slot: "WrapperInner", overridesResolver: function (e, t) { return t.wrapperInner } })((function (e) { var t = e.ownerState; return (0, c.Z)({ width: "100%" }, "horizontal" === t.orientation && { width: "auto", height: "100%" }) })), ki = t.forwardRef((function (e, n) { var i = (0, A.Z)({ props: e, name: "MuiCollapse" }), r = i.addEndListener, a = i.children, o = i.className, s = i.collapsedSize, C = void 0 === s ? "0px" : s, I = i.component, h = i.easing, f = i.in, m = i.onEnter, v = i.onEntered, b = i.onEntering, y = i.onExit, G = i.onExited, B = i.onExiting, Z = i.orientation, w = void 0 === Z ? "vertical" : Z, S = i.style, R = i.timeout, x = void 0 === R ? yi.x9.standard : R, W = i.TransitionComponent, V = void 0 === W ? bi : W, k = (0, g.Z)(i, Ri), H = (0, c.Z)({}, i, { orientation: w, collapsedSize: C }), M = function (e) { var t = e.orientation, n = e.classes, i = { root: ["root", "".concat(t)], entered: ["entered"], hidden: ["hidden"], wrapper: ["wrapper", "".concat(t)], wrapperInner: ["wrapperInner", "".concat(t)] }; return (0, d.Z)(i, Si, n) }(H), F = function () { var e = (0, Bi.Z)(Zi.Z); return e[wi.Z] || e }(), N = t.useRef(), X = t.useRef(null), Y = t.useRef(), L = "number" === typeof C ? "".concat(C, "px") : C, z = "horizontal" === w, E = z ? "width" : "height"; t.useEffect((function () { return function () { clearTimeout(N.current) } }), []); var T = t.useRef(null), _ = (0, p.Z)(n, T), U = function (e) { return function (t) { if (e) { var n = T.current; void 0 === t ? e(n) : e(n, t) } } }, D = function () { return X.current ? X.current[z ? "clientWidth" : "clientHeight"] : 0 }, P = U((function (e, t) { X.current && z && (X.current.style.position = "absolute"), e.style[E] = L, m && m(e, t) })), J = U((function (e, t) { var n = D(); X.current && z && (X.current.style.position = ""); var i = Gi({ style: S, timeout: x, easing: h }, { mode: "enter" }), r = i.duration, a = i.easing; if ("auto" === x) { var o = F.transitions.getAutoHeightDuration(n); e.style.transitionDuration = "".concat(o, "ms"), Y.current = o } else e.style.transitionDuration = "string" === typeof r ? r : "".concat(r, "ms"); e.style[E] = "".concat(n, "px"), e.style.transitionTimingFunction = a, b && b(e, t) })), O = U((function (e, t) { e.style[E] = "auto", v && v(e, t) })), j = U((function (e) { e.style[E] = "".concat(D(), "px"), y && y(e) })), Q = U(G), q = U((function (e) { var t = D(), n = Gi({ style: S, timeout: x, easing: h }, { mode: "exit" }), i = n.duration, r = n.easing; if ("auto" === x) { var a = F.transitions.getAutoHeightDuration(t); e.style.transitionDuration = "".concat(a, "ms"), Y.current = a } else e.style.transitionDuration = "string" === typeof i ? i : "".concat(i, "ms"); e.style[E] = L, e.style.transitionTimingFunction = r, B && B(e) })); return (0, K.jsx)(V, (0, c.Z)({ in: f, onEnter: P, onEntered: O, onEntering: J, onExit: j, onExited: Q, onExiting: q, addEndListener: function (e) { "auto" === x && (N.current = setTimeout(e, Y.current || 0)), r && r(T.current, e) }, nodeRef: T, timeout: "auto" === x ? null : x }, k, { children: function (e, t) { return (0, K.jsx)(xi, (0, c.Z)({ as: I, className: (0, u.Z)(M.root, o, { entered: M.entered, exited: !f && "0px" === L && M.hidden }[e]), style: (0, c.Z)((0, l.Z)({}, z ? "minWidth" : "minHeight", L), S), ownerState: (0, c.Z)({}, H, { state: e }), ref: _ }, t, { children: (0, K.jsx)(Wi, { ownerState: (0, c.Z)({}, H, { state: e }), className: M.wrapper, ref: X, children: (0, K.jsx)(Vi, { ownerState: (0, c.Z)({}, H, { state: e }), className: M.wrapperInner, children: a }) }) })) } })) })); ki.muiSupportAuto = !0; var Hi = ki, Mi = function (e) { return ((e < 1 ? 5.11916 * Math.pow(e, 2) : 4.5 * Math.log(e + 1) + 2) / 100).toFixed(2) }; function Fi(e) { return (0, ae.Z)("MuiPaper", e) } (0, z.Z)("MuiPaper", ["root", "rounded", "outlined", "elevation", "elevation0", "elevation1", "elevation2", "elevation3", "elevation4", "elevation5", "elevation6", "elevation7", "elevation8", "elevation9", "elevation10", "elevation11", "elevation12", "elevation13", "elevation14", "elevation15", "elevation16", "elevation17", "elevation18", "elevation19", "elevation20", "elevation21", "elevation22", "elevation23", "elevation24"]); var Ni = ["className", "component", "elevation", "square", "variant"], Xi = (0, h.ZP)("div", { name: "MuiPaper", slot: "Root", overridesResolver: function (e, t) { var n = e.ownerState; return [t.root, t[n.variant], !n.square && t.rounded, "elevation" === n.variant && t["elevation".concat(n.elevation)]] } })((function (e) { var t, n = e.theme, i = e.ownerState; return (0, c.Z)({ backgroundColor: (n.vars || n).palette.background.paper, color: (n.vars || n).palette.text.primary, transition: n.transitions.create("box-shadow") }, !i.square && { borderRadius: n.shape.borderRadius }, "outlined" === i.variant && { border: "1px solid ".concat((n.vars || n).palette.divider) }, "elevation" === i.variant && (0, c.Z)({ boxShadow: (n.vars || n).shadows[i.elevation] }, !n.vars && "dark" === n.palette.mode && { backgroundImage: "linear-gradient(".concat((0, I.Fq)("#fff", Mi(i.elevation)), ", ").concat((0, I.Fq)("#fff", Mi(i.elevation)), ")") }, n.vars && { backgroundImage: null == (t = n.vars.overlays) ? void 0 : t[i.elevation] })) })), Yi = t.forwardRef((function (e, t) { var n = (0, A.Z)({ props: e, name: "MuiPaper" }), i = n.className, r = n.component, a = void 0 === r ? "div" : r, o = n.elevation, s = void 0 === o ? 1 : o, l = n.square, C = void 0 !== l && l, I = n.variant, h = void 0 === I ? "elevation" : I, p = (0, g.Z)(n, Ni), f = (0, c.Z)({}, n, { component: a, elevation: s, square: C, variant: h }), m = function (e) { var t = e.square, n = e.elevation, i = e.variant, r = e.classes, a = { root: ["root", i, !t && "rounded", "elevation" === i && "elevation".concat(n)] }; return (0, d.Z)(a, Fi, r) }(f); return (0, K.jsx)(Xi, (0, c.Z)({ as: a, ownerState: f, className: (0, u.Z)(m.root, i), ref: t }, p)) })); var Ki = t.createContext({}), Li = n(5158); function zi(e) { return (0, ae.Z)("MuiAccordion", e) } var Ei = (0, z.Z)("MuiAccordion", ["root", "rounded", "expanded", "disabled", "gutters", "region"]), Ti = ["children", "className", "defaultExpanded", "disabled", "disableGutters", "expanded", "onChange", "square", "TransitionComponent", "TransitionProps"], _i = (0, h.ZP)(Yi, { name: "MuiAccordion", slot: "Root", overridesResolver: function (e, t) { var n = e.ownerState; return [(0, l.Z)({}, "& .".concat(Ei.region), t.region), t.root, !n.square && t.rounded, !n.disableGutters && t.gutters] } })((function (e) { var t, n = e.theme, i = { duration: n.transitions.duration.shortest }; return t = { position: "relative", transition: n.transitions.create(["margin"], i), overflowAnchor: "none", "&:before": { position: "absolute", left: 0, top: -1, right: 0, height: 1, content: '""', opacity: 1, backgroundColor: (n.vars || n).palette.divider, transition: n.transitions.create(["opacity", "background-color"], i) }, "&:first-of-type": { "&:before": { display: "none" } } }, (0, l.Z)(t, "&.".concat(Ei.expanded), { "&:before": { opacity: 0 }, "&:first-of-type": { marginTop: 0 }, "&:last-of-type": { marginBottom: 0 }, "& + &": { "&:before": { display: "none" } } }), (0, l.Z)(t, "&.".concat(Ei.disabled), { backgroundColor: (n.vars || n).palette.action.disabledBackground }), t }), (function (e) { var t = e.theme, n = e.ownerState; return (0, c.Z)({}, !n.square && { borderRadius: 0, "&:first-of-type": { borderTopLeftRadius: (t.vars || t).shape.borderRadius, borderTopRightRadius: (t.vars || t).shape.borderRadius }, "&:last-of-type": { borderBottomLeftRadius: (t.vars || t).shape.borderRadius, borderBottomRightRadius: (t.vars || t).shape.borderRadius, "@supports (-ms-ime-align: auto)": { borderBottomLeftRadius: 0, borderBottomRightRadius: 0 } } }, !n.disableGutters && (0, l.Z)({}, "&.".concat(Ei.expanded), { margin: "16px 0" })) })), Ui = t.forwardRef((function (e, n) { var i = (0, A.Z)({ props: e, name: "MuiAccordion" }), a = i.children, o = i.className, s = i.defaultExpanded, l = void 0 !== s && s, C = i.disabled, I = void 0 !== C && C, h = i.disableGutters, p = void 0 !== h && h, f = i.expanded, m = i.onChange, v = i.square, b = void 0 !== v && v, y = i.TransitionComponent, G = void 0 === y ? Hi : y, B = i.TransitionProps, Z = (0, g.Z)(i, Ti), w = (0, Li.Z)({ controlled: f, default: l, name: "Accordion", state: "expanded" }), S = (0, r.Z)(w, 2), R = S[0], x = S[1], W = t.useCallback((function (e) { x(!R), m && m(e, !R) }), [R, m, x]), V = Ci(t.Children.toArray(a)), k = V[0], H = V.slice(1), M = t.useMemo((function () { return { expanded: R, disabled: I, disableGutters: p, toggle: W } }), [R, I, p, W]), F = (0, c.Z)({}, i, { square: b, disabled: I, disableGutters: p, expanded: R }), N = function (e) { var t = e.classes, n = { root: ["root", !e.square && "rounded", e.expanded && "expanded", e.disabled && "disabled", !e.disableGutters && "gutters"], region: ["region"] }; return (0, d.Z)(n, zi, t) }(F); return (0, K.jsxs)(_i, (0, c.Z)({ className: (0, u.Z)(N.root, o), ref: n, ownerState: F, square: b }, Z, { children: [(0, K.jsx)(Ki.Provider, { value: M, children: k }), (0, K.jsx)(G, (0, c.Z)({ in: R, timeout: "auto" }, B, { children: (0, K.jsx)("div", { "aria-labelledby": k.props.id, id: k.props["aria-controls"], role: "region", className: N.region, children: H }) }))] })) })); function Di(e) { return (0, ae.Z)("MuiAccordionSummary", e) } var Pi = (0, z.Z)("MuiAccordionSummary", ["root", "expanded", "focusVisible", "disabled", "gutters", "contentGutters", "content", "expandIconWrapper"]), Ji = ["children", "className", "expandIcon", "focusVisibleClassName", "onClick"], Oi = (0, h.ZP)(Ce, { name: "MuiAccordionSummary", slot: "Root", overridesResolver: function (e, t) { return t.root } })((function (e) { var t, n = e.theme, i = e.ownerState, r = { duration: n.transitions.duration.shortest }; return (0, c.Z)((t = { display: "flex", minHeight: 48, padding: n.spacing(0, 2), transition: n.transitions.create(["min-height", "background-color"], r) }, (0, l.Z)(t, "&.".concat(Pi.focusVisible), { backgroundColor: (n.vars || n).palette.action.focus }), (0, l.Z)(t, "&.".concat(Pi.disabled), { opacity: (n.vars || n).palette.action.disabledOpacity }), (0, l.Z)(t, "&:hover:not(.".concat(Pi.disabled, ")"), { cursor: "pointer" }), t), !i.disableGutters && (0, l.Z)({}, "&.".concat(Pi.expanded), { minHeight: 64 })) })), ji = (0, h.ZP)("div", { name: "MuiAccordionSummary", slot: "Content", overridesResolver: function (e, t) { return t.content } })((function (e) { var t = e.theme, n = e.ownerState; return (0, c.Z)({ display: "flex", flexGrow: 1, margin: "12px 0" }, !n.disableGutters && (0, l.Z)({ transition: t.transitions.create(["margin"], { duration: t.transitions.duration.shortest }) }, "&.".concat(Pi.expanded), { margin: "20px 0" })) })), Qi = (0, h.ZP)("div", { name: "MuiAccordionSummary", slot: "ExpandIconWrapper", overridesResolver: function (e, t) { return t.expandIconWrapper } })((function (e) { var t = e.theme; return (0, l.Z)({ display: "flex", color: (t.vars || t).palette.action.active, transform: "rotate(0deg)", transition: t.transitions.create("transform", { duration: t.transitions.duration.shortest }) }, "&.".concat(Pi.expanded), { transform: "rotate(180deg)" }) })), qi = t.forwardRef((function (e, n) { var i = (0, A.Z)({ props: e, name: "MuiAccordionSummary" }), r = i.children, a = i.className, o = i.expandIcon, s = i.focusVisibleClassName, l = i.onClick, C = (0, g.Z)(i, Ji), I = t.useContext(Ki), h = I.disabled, p = void 0 !== h && h, f = I.disableGutters, m = I.expanded, v = I.toggle, b = (0, c.Z)({}, i, { expanded: m, disabled: p, disableGutters: f }), y = function (e) { var t = e.classes, n = e.expanded, i = e.disabled, r = e.disableGutters, a = { root: ["root", n && "expanded", i && "disabled", !r && "gutters"], focusVisible: ["focusVisible"], content: ["content", n && "expanded", !r && "contentGutters"], expandIconWrapper: ["expandIconWrapper", n && "expanded"] }; return (0, d.Z)(a, Di, t) }(b); return (0, K.jsxs)(Oi, (0, c.Z)({ focusRipple: !1, disableRipple: !0, disabled: p, component: "div", "aria-expanded": m, className: (0, u.Z)(y.root, a), focusVisibleClassName: (0, u.Z)(y.focusVisible, s), onClick: function (e) { v && v(e), l && l(e) }, ref: n, ownerState: b }, C, { children: [(0, K.jsx)(ji, { className: y.content, ownerState: b, children: r }), o && (0, K.jsx)(Qi, { className: y.expandIconWrapper, ownerState: b, children: o })] })) })); function $i(e) { return (0, ae.Z)("MuiAccordionDetails", e) } (0, z.Z)("MuiAccordionDetails", ["root"]); var er = ["className"], tr = (0, h.ZP)("div", { name: "MuiAccordionDetails", slot: "Root", overridesResolver: function (e, t) { return t.root } })((function (e) { return { padding: e.theme.spacing(1, 2, 2) } })), nr = t.forwardRef((function (e, t) { var n = (0, A.Z)({ props: e, name: "MuiAccordionDetails" }), i = n.className, r = (0, g.Z)(n, er), a = n, o = function (e) { var t = e.classes; return (0, d.Z)({ root: ["root"] }, $i, t) }(a); return (0, K.jsx)(tr, (0, c.Z)({ className: (0, u.Z)(o.root, i), ref: t, ownerState: a }, r)) })), ir = n(1131); function rr(e) { return (0, K.jsxs)(K.Fragment, { children: [(0, K.jsx)("div", { children: (0, K.jsxs)("div", { children: [(0, K.jsx)("h3", { className: "manifesto-heading", children: "Election manifesto" }), (0, K.jsxs)(Ui, { className: "details", style: { background: "black", borderColor: "green", borderWidth: "1px", borderStyle: "solid", borderRadius: "30px" }, children: [(0, K.jsx)(qi, { expandIcon: (0, K.jsx)(ir.Z, {}), "aria-controls": "panel1a-content", id: "panel1a-header", children: (0, K.jsxs)(He, { children: [" ", (0, K.jsx)("i", { class: "fa-solid fa-scroll fa-2xl", style: { color: "#119231" } }), "  Green Future Party ", (0, K.jsx)("span", { class: "material-symbols-outlined" })] }) }), (0, K.jsx)(nr, { children: (0, K.jsxs)(He, { children: [(0, K.jsxs)("ul", { children: [(0, K.jsx)("li", { children: " Powering a Renewable Nation: By 2040, ensure that our nation relies solely on green and renewable energy sources, phasing out coal and reducing our carbon footprint." }), (0, K.jsx)("li", { children: "   Agriculture Reimagined: Encourage organic farming, aim to reduce pesticide use by 50% within a decade, and incentivize sustainable farming practices.." })] }), (0, K.jsx)("div", { className: "manifesto-btn", children: (0, K.jsx)("button", { type: "button", class: "btn btn-outline-light manifesto-button ", on: !0, onClick: function () { e.onCloseClick(), e.onStepChange(), e.onActiveAccordionChange() }, children: "Select" }) })] }) })] }), (0, K.jsxs)(Ui, { className: "details", style: { background: "black", borderColor: "#19A7CE", borderWidth: "1px", borderStyle: "solid", borderRadius: "30px", marginTop: "5%" }, children: [(0, K.jsx)(qi, { expandIcon: (0, K.jsx)(ir.Z, {}), "aria-controls": "panel1a-content", id: "panel1a-header", children: (0, K.jsxs)(He, { children: [(0, K.jsx)("i", { class: "fa-solid fa-scroll fa-2xl", style: { color: "#1B82C9" } }), "Technological Party"] }) }), (0, K.jsx)(nr, { children: (0, K.jsxs)(He, { children: [(0, K.jsxs)("ul", { children: [(0, K.jsx)("li", { children: "Digital Literacy for All: Ensure every child, regardless of background, has access to computer education, making them future-ready. rioritizing ethics." }), (0, K.jsx)("li", { children: "Innovation Nation: Establish state-of-the-art innovation hubs across the country, creating a haven for startups and tech enterprises." })] }), (0, K.jsx)("div", { className: "manifesto-btn", children: (0, K.jsx)("button", { type: "button", class: "btn btn-outline-light manifesto-button ", onClick: function () { e.onCloseClick(), e.onStepChange(), e.onActiveAccordionChange() }, children: "Select" }) })] }) })] }), (0, K.jsxs)(Ui, { className: "details", style: { background: "black", borderColor: "#EAC696", borderWidth: "1px", borderStyle: "solid", borderRadius: "30px", marginTop: "5%" }, children: [(0, K.jsx)(qi, { expandIcon: (0, K.jsx)(ir.Z, {}), "aria-controls": "panel2a-content", id: "panel2a-header", children: (0, K.jsxs)(He, { children: [(0, K.jsx)("i", { class: "fa-solid fa-scroll fa-2xl", style: { color: "#D18960" } }), "Cultural Party"] }) }), (0, K.jsx)(nr, { children: (0, K.jsxs)(He, { children: [(0, K.jsx)("ul", { children: (0, K.jsxs)("li", { children: ["National Festivity Drive: Allocate funds to promote cultural festivals that underline our nation's diversity, attracting global tourism and strengthening national unity.", (0, K.jsx)("li", { children: "Renaissance in Education: Reform the educational system by mandating art, music, and cultural education, ensuring that our youth appreciate the beauty of our traditions." })] }) }), (0, K.jsx)("div", { className: "manifesto-btn", children: (0, K.jsx)("button", { type: "button", class: "btn btn-outline-light manifesto-button ", onClick: function () { e.onCloseClick(), e.onStepChange(), e.onActiveAccordionChange() }, children: "Select" }) })] }) })] })] }) }), (0, K.jsx)("div", { className: "next-button" })] }) } var ar = function (e) { var n = e.onNextClick, i = (0, t.useState)(""), a = (0, r.Z)(i, 2), o = a[0], s = a[1], l = (0, t.useState)(""), g = (0, r.Z)(l, 2), c = g[0], u = g[1], C = (0, t.useState)(""), d = (0, r.Z)(C, 2), I = d[0], h = d[1], A = (0, t.useState)(""), p = (0, r.Z)(A, 2), f = p[0], m = p[1]; return (0, K.jsx)(K.Fragment, { children: (0, K.jsxs)("div", { className: "login-container", children: [(0, K.jsx)("h4", { style: { color: "white", textAlign: "center" }, children: "Voter Verification" }), (0, K.jsxs)("form", { onSubmit: function (e) { e.preventDefault(); /^[A-Za-z]{4}\d{6}$/.test(c) ? (h(""), m("Verification successful!"), setTimeout((function () { m(""), n() }), 2e3)) : h("Invalid Voter ID. ID Should Start With 4 Letters Followed With 6 Numbers.") }, children: [(0, K.jsxs)("div", { className: "form-group", children: [(0, K.jsx)("label", { children: "Name:" }), (0, K.jsx)("input", { type: "text", className: "form-control", placeholder: "Enter Name", value: o, onChange: function (e) { s(e.target.value) }, required: !0 })] }), (0, K.jsxs)("div", { className: "form-group", children: [(0, K.jsx)("label", { children: "Voter ID:" }), (0, K.jsx)("input", { type: "text", className: "form-control", placeholder: "E.g; ABXD123456", value: c, onChange: function (e) { u(e.target.value) }, required: !0 })] }), (0, K.jsx)("button", { type: "submit", className: "btn btns", children: "Verify" })] }), I && (0, K.jsx)("div", { className: "alert alert-danger mt-3", children: I }), f && (0, K.jsx)("div", { className: "alert alert-success mt-3", children: f })] }) }) }; function or(e, t) { if (null == e) return {}; var n, i, r = (0, g.Z)(e, t); if (Object.getOwnPropertySymbols) { var a = Object.getOwnPropertySymbols(e); for (i = 0; i < a.length; i++)n = a[i], t.indexOf(n) >= 0 || Object.prototype.propertyIsEnumerable.call(e, n) && (r[n] = e[n]) } return r } function sr() { if ("undefined" === typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" === typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } } function lr(e, t, n) { return lr = sr() ? Reflect.construct.bind() : function (e, t, n) { var i = [null]; i.push.apply(i, t); var r = new (Function.bind.apply(e, i)); return n && G(r, n.prototype), r }, lr.apply(null, arguments) } function gr(e, t) { var n = "undefined" !== typeof Symbol && e[Symbol.iterator] || e["@@iterator"]; if (!n) { if (Array.isArray(e) || (n = (0, ci.Z)(e)) || t && e && "number" === typeof e.length) { n && (e = n); var i = 0, r = function () { }; return { s: r, n: function () { return i >= e.length ? { done: !0 } : { done: !1, value: e[i++] } }, e: function (e) { throw e }, f: r } } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } var a, o = !0, s = !1; return { s: function () { n = n.call(e) }, n: function () { var e = n.next(); return o = e.done, e }, e: function (e) { s = !0, a = e }, f: function () { try { o || null == n.return || n.return() } finally { if (s) throw a } } } } function cr(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } var ur = n(9142); function Cr(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, (0, ur.Z)(i.key), i) } } function dr(e, t, n) { return t && Cr(e.prototype, t), n && Cr(e, n), Object.defineProperty(e, "prototype", { writable: !1 }), e } function Ir(e, t) { if ("function" !== typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && G(e, t) } function hr(e) { return hr = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, hr(e) } var Ar, pr = n(1002); function fr(e) { var t = sr(); return function () { var n, i = hr(e); if (t) { var r = hr(this).constructor; n = Reflect.construct(i, arguments, r) } else n = i.apply(this, arguments); return function (e, t) { if (t && ("object" === (0, pr.Z)(t) || "function" === typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return y(e) }(this, n) } } function mr(e) { var t = "function" === typeof Map ? new Map : void 0; return mr = function (e) { if (null === e || !function (e) { try { return -1 !== Function.toString.call(e).indexOf("[native code]") } catch (t) { return "function" === typeof e } }(e)) return e; if ("function" !== typeof e) throw new TypeError("Super expression must either be null or a function"); if ("undefined" !== typeof t) { if (t.has(e)) return t.get(e); t.set(e, n) } function n() { return lr(e, arguments, hr(this).constructor) } return n.prototype = Object.create(e.prototype, { constructor: { value: n, enumerable: !1, writable: !0, configurable: !0 } }), G(n, e) }, mr(e) } function vr(e, t, n, i, r, a, o) { try { var s = e[a](o), l = s.value } catch (g) { return void n(g) } s.done ? t(l) : Promise.resolve(l).then(i, r) } function br(e) { return function () { var t = this, n = arguments; return new Promise((function (i, r) { var a = e.apply(t, n); function o(e) { vr(a, i, r, o, s, "next", e) } function s(e) { vr(a, i, r, o, s, "throw", e) } o(void 0) })) } } function yr() { return yr = "undefined" !== typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, n) { var i = function (e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = hr(e));); return e }(e, t); if (i) { var r = Object.getOwnPropertyDescriptor(i, t); return r.get ? r.get.call(arguments.length < 3 ? e : n) : r.value } }, yr.apply(this, arguments) } function Gr() { Gr = function () { return t }; var e, t = {}, n = Object.prototype, i = n.hasOwnProperty, r = Object.defineProperty || function (e, t, n) { e[t] = n.value }, a = "function" == typeof Symbol ? Symbol : {}, o = a.iterator || "@@iterator", s = a.asyncIterator || "@@asyncIterator", l = a.toStringTag || "@@toStringTag"; function g(e, t, n) { return Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }), e[t] } try { g({}, "") } catch (e) { g = function (e, t, n) { return e[t] = n } } function c(e, t, n, i) { var a = t && t.prototype instanceof p ? t : p, o = Object.create(a.prototype), s = new W(i || []); return r(o, "_invoke", { value: w(e, n, s) }), o } function u(e, t, n) { try { return { type: "normal", arg: e.call(t, n) } } catch (e) { return { type: "throw", arg: e } } } t.wrap = c; var C = "suspendedStart", d = "suspendedYield", I = "executing", h = "completed", A = {}; function p() { } function f() { } function m() { } var v = {}; g(v, o, (function () { return this })); var b = Object.getPrototypeOf, y = b && b(b(V([]))); y && y !== n && i.call(y, o) && (v = y); var G = m.prototype = p.prototype = Object.create(v); function B(e) { ["next", "throw", "return"].forEach((function (t) { g(e, t, (function (e) { return this._invoke(t, e) })) })) } function Z(e, t) { function n(r, a, o, s) { var l = u(e[r], e, a); if ("throw" !== l.type) { var g = l.arg, c = g.value; return c && "object" == (0, pr.Z)(c) && i.call(c, "__await") ? t.resolve(c.__await).then((function (e) { n("next", e, o, s) }), (function (e) { n("throw", e, o, s) })) : t.resolve(c).then((function (e) { g.value = e, o(g) }), (function (e) { return n("throw", e, o, s) })) } s(l.arg) } var a; r(this, "_invoke", { value: function (e, i) { function r() { return new t((function (t, r) { n(e, i, t, r) })) } return a = a ? a.then(r, r) : r() } }) } function w(t, n, i) { var r = C; return function (a, o) { if (r === I) throw new Error("Generator is already running"); if (r === h) { if ("throw" === a) throw o; return { value: e, done: !0 } } for (i.method = a, i.arg = o; ;) { var s = i.delegate; if (s) { var l = S(s, i); if (l) { if (l === A) continue; return l } } if ("next" === i.method) i.sent = i._sent = i.arg; else if ("throw" === i.method) { if (r === C) throw r = h, i.arg; i.dispatchException(i.arg) } else "return" === i.method && i.abrupt("return", i.arg); r = I; var g = u(t, n, i); if ("normal" === g.type) { if (r = i.done ? h : d, g.arg === A) continue; return { value: g.arg, done: i.done } } "throw" === g.type && (r = h, i.method = "throw", i.arg = g.arg) } } } function S(t, n) { var i = n.method, r = t.iterator[i]; if (r === e) return n.delegate = null, "throw" === i && t.iterator.return && (n.method = "return", n.arg = e, S(t, n), "throw" === n.method) || "return" !== i && (n.method = "throw", n.arg = new TypeError("The iterator does not provide a '" + i + "' method")), A; var a = u(r, t.iterator, n.arg); if ("throw" === a.type) return n.method = "throw", n.arg = a.arg, n.delegate = null, A; var o = a.arg; return o ? o.done ? (n[t.resultName] = o.value, n.next = t.nextLoc, "return" !== n.method && (n.method = "next", n.arg = e), n.delegate = null, A) : o : (n.method = "throw", n.arg = new TypeError("iterator result is not an object"), n.delegate = null, A) } function R(e) { var t = { tryLoc: e[0] }; 1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t) } function x(e) { var t = e.completion || {}; t.type = "normal", delete t.arg, e.completion = t } function W(e) { this.tryEntries = [{ tryLoc: "root" }], e.forEach(R, this), this.reset(!0) } function V(t) { if (t || "" === t) { var n = t[o]; if (n) return n.call(t); if ("function" == typeof t.next) return t; if (!isNaN(t.length)) { var r = -1, a = function n() { for (; ++r < t.length;)if (i.call(t, r)) return n.value = t[r], n.done = !1, n; return n.value = e, n.done = !0, n }; return a.next = a } } throw new TypeError((0, pr.Z)(t) + " is not iterable") } return f.prototype = m, r(G, "constructor", { value: m, configurable: !0 }), r(m, "constructor", { value: f, configurable: !0 }), f.displayName = g(m, l, "GeneratorFunction"), t.isGeneratorFunction = function (e) { var t = "function" == typeof e && e.constructor; return !!t && (t === f || "GeneratorFunction" === (t.displayName || t.name)) }, t.mark = function (e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, m) : (e.__proto__ = m, g(e, l, "GeneratorFunction")), e.prototype = Object.create(G), e }, t.awrap = function (e) { return { __await: e } }, B(Z.prototype), g(Z.prototype, s, (function () { return this })), t.AsyncIterator = Z, t.async = function (e, n, i, r, a) { void 0 === a && (a = Promise); var o = new Z(c(e, n, i, r), a); return t.isGeneratorFunction(n) ? o : o.next().then((function (e) { return e.done ? e.value : o.next() })) }, B(G), g(G, l, "Generator"), g(G, o, (function () { return this })), g(G, "toString", (function () { return "[object Generator]" })), t.keys = function (e) { var t = Object(e), n = []; for (var i in t) n.push(i); return n.reverse(), function e() { for (; n.length;) { var i = n.pop(); if (i in t) return e.value = i, e.done = !1, e } return e.done = !0, e } }, t.values = V, W.prototype = { constructor: W, reset: function (t) { if (this.prev = 0, this.next = 0, this.sent = this._sent = e, this.done = !1, this.delegate = null, this.method = "next", this.arg = e, this.tryEntries.forEach(x), !t) for (var n in this) "t" === n.charAt(0) && i.call(this, n) && !isNaN(+n.slice(1)) && (this[n] = e) }, stop: function () { this.done = !0; var e = this.tryEntries[0].completion; if ("throw" === e.type) throw e.arg; return this.rval }, dispatchException: function (t) { if (this.done) throw t; var n = this; function r(i, r) { return s.type = "throw", s.arg = t, n.next = i, r && (n.method = "next", n.arg = e), !!r } for (var a = this.tryEntries.length - 1; a >= 0; --a) { var o = this.tryEntries[a], s = o.completion; if ("root" === o.tryLoc) return r("end"); if (o.tryLoc <= this.prev) { var l = i.call(o, "catchLoc"), g = i.call(o, "finallyLoc"); if (l && g) { if (this.prev < o.catchLoc) return r(o.catchLoc, !0); if (this.prev < o.finallyLoc) return r(o.finallyLoc) } else if (l) { if (this.prev < o.catchLoc) return r(o.catchLoc, !0) } else { if (!g) throw new Error("try statement without catch or finally"); if (this.prev < o.finallyLoc) return r(o.finallyLoc) } } } }, abrupt: function (e, t) { for (var n = this.tryEntries.length - 1; n >= 0; --n) { var r = this.tryEntries[n]; if (r.tryLoc <= this.prev && i.call(r, "finallyLoc") && this.prev < r.finallyLoc) { var a = r; break } } a && ("break" === e || "continue" === e) && a.tryLoc <= t && t <= a.finallyLoc && (a = null); var o = a ? a.completion : {}; return o.type = e, o.arg = t, a ? (this.method = "next", this.next = a.finallyLoc, A) : this.complete(o) }, complete: function (e, t) { if ("throw" === e.type) throw e.arg; return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), A }, finish: function (e) { for (var t = this.tryEntries.length - 1; t >= 0; --t) { var n = this.tryEntries[t]; if (n.finallyLoc === e) return this.complete(n.completion, n.afterLoc), x(n), A } }, catch: function (e) { for (var t = this.tryEntries.length - 1; t >= 0; --t) { var n = this.tryEntries[t]; if (n.tryLoc === e) { var i = n.completion; if ("throw" === i.type) { var r = i.arg; x(n) } return r } } throw new Error("illegal catch attempt") }, delegateYield: function (t, n, i) { return this.delegate = { iterator: V(t), resultName: n, nextLoc: i }, "next" === this.method && (this.arg = e), A } }, t } var Br = "157", Zr = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 }, wr = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 }, Sr = 0, Rr = 1, xr = 2, Wr = 3, Vr = 0, kr = 1, Hr = 2, Mr = 3, Fr = 0, Nr = 1, Xr = 2, Yr = 2, Kr = 0, Lr = 1, zr = 2, Er = 3, Tr = 4, _r = 5, Ur = 100, Dr = 101, Pr = 102, Jr = 103, Or = 104, jr = 200, Qr = 201, qr = 202, $r = 203, ea = 204, ta = 205, na = 206, ia = 207, ra = 208, aa = 209, oa = 210, sa = 0, la = 1, ga = 2, ca = 3, ua = 4, Ca = 5, da = 6, Ia = 7, ha = 0, Aa = 1, pa = 2, fa = 0, ma = 1, va = 2, ba = 3, ya = 4, Ga = 5, Ba = 300, Za = 301, wa = 302, Sa = 303, Ra = 304, xa = 306, Wa = 1e3, Va = 1001, ka = 1002, Ha = 1003, Ma = 1004, Fa = 1004, Na = 1005, Xa = 1005, Ya = 1006, Ka = 1007, La = 1007, za = 1008, Ea = 1008, Ta = 1009, _a = 1010, Ua = 1011, Da = 1012, Pa = 1013, Ja = 1014, Oa = 1015, ja = 1016, Qa = 1017, qa = 1018, $a = 1020, eo = 1021, to = 1023, no = 1024, io = 1025, ro = 1026, ao = 1027, oo = 1028, so = 1029, lo = 1030, go = 1031, co = 1033, uo = 33776, Co = 33777, Io = 33778, ho = 33779, Ao = 35840, po = 35841, fo = 35842, mo = 35843, vo = 36196, bo = 37492, yo = 37496, Go = 37808, Bo = 37809, Zo = 37810, wo = 37811, So = 37812, Ro = 37813, xo = 37814, Wo = 37815, Vo = 37816, ko = 37817, Ho = 37818, Mo = 37819, Fo = 37820, No = 37821, Xo = 36492, Yo = 36494, Ko = 36495, Lo = 36283, zo = 36284, Eo = 36285, To = 36286, _o = 2200, Uo = 2201, Do = 2202, Po = 2300, Jo = 2301, Oo = 2302, jo = 2400, Qo = 2401, qo = 2402, $o = 2500, es = 2501, ts = 0, ns = 1, is = 2, rs = 3e3, as = 3001, os = 3200, ss = 3201, ls = 0, gs = 1, cs = "", us = "srgb", Cs = "srgb-linear", ds = "display-p3", Is = "display-p3-linear", hs = "linear", As = "srgb", ps = "rec709", fs = "p3", ms = 0, vs = 7680, bs = 7681, ys = 7682, Gs = 7683, Bs = 34055, Zs = 34056, ws = 5386, Ss = 512, Rs = 513, xs = 514, Ws = 515, Vs = 516, ks = 517, Hs = 518, Ms = 519, Fs = 512, Ns = 513, Xs = 514, Ys = 515, Ks = 516, Ls = 517, zs = 518, Es = 519, Ts = 35044, _s = 35048, Us = 35040, Ds = 35045, Ps = 35049, Js = 35041, Os = 35046, js = 35050, Qs = 35042, qs = "100", $s = "300 es", el = 1035, tl = 2e3, nl = 2001, il = function () { function e() { cr(this, e) } return dr(e, [{ key: "addEventListener", value: function (e, t) { void 0 === this._listeners && (this._listeners = {}); var n = this._listeners; void 0 === n[e] && (n[e] = []), -1 === n[e].indexOf(t) && n[e].push(t) } }, { key: "hasEventListener", value: function (e, t) { if (void 0 === this._listeners) return !1; var n = this._listeners; return void 0 !== n[e] && -1 !== n[e].indexOf(t) } }, { key: "removeEventListener", value: function (e, t) { if (void 0 !== this._listeners) { var n = this._listeners[e]; if (void 0 !== n) { var i = n.indexOf(t); -1 !== i && n.splice(i, 1) } } } }, { key: "dispatchEvent", value: function (e) { if (void 0 !== this._listeners) { var t = this._listeners[e.type]; if (void 0 !== t) { e.target = this; for (var n = t.slice(0), i = 0, r = n.length; i < r; i++)n[i].call(this, e); e.target = null } } } }]), e }(), rl = ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "0a", "0b", "0c", "0d", "0e", "0f", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "1a", "1b", "1c", "1d", "1e", "1f", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "2a", "2b", "2c", "2d", "2e", "2f", "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "3a", "3b", "3c", "3d", "3e", "3f", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "4a", "4b", "4c", "4d", "4e", "4f", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "5a", "5b", "5c", "5d", "5e", "5f", "60", "61", "62", "63", "64", "65", "66", "67", "68", "69", "6a", "6b", "6c", "6d", "6e", "6f", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "7a", "7b", "7c", "7d", "7e", "7f", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "8a", "8b", "8c", "8d", "8e", "8f", "90", "91", "92", "93", "94", "95", "96", "97", "98", "99", "9a", "9b", "9c", "9d", "9e", "9f", "a0", "a1", "a2", "a3", "a4", "a5", "a6", "a7", "a8", "a9", "aa", "ab", "ac", "ad", "ae", "af", "b0", "b1", "b2", "b3", "b4", "b5", "b6", "b7", "b8", "b9", "ba", "bb", "bc", "bd", "be", "bf", "c0", "c1", "c2", "c3", "c4", "c5", "c6", "c7", "c8", "c9", "ca", "cb", "cc", "cd", "ce", "cf", "d0", "d1", "d2", "d3", "d4", "d5", "d6", "d7", "d8", "d9", "da", "db", "dc", "dd", "de", "df", "e0", "e1", "e2", "e3", "e4", "e5", "e6", "e7", "e8", "e9", "ea", "eb", "ec", "ed", "ee", "ef", "f0", "f1", "f2", "f3", "f4", "f5", "f6", "f7", "f8", "f9", "fa", "fb", "fc", "fd", "fe", "ff"], al = 1234567, ol = Math.PI / 180, sl = 180 / Math.PI; function ll() { var e = 4294967295 * Math.random() | 0, t = 4294967295 * Math.random() | 0, n = 4294967295 * Math.random() | 0, i = 4294967295 * Math.random() | 0; return (rl[255 & e] + rl[e >> 8 & 255] + rl[e >> 16 & 255] + rl[e >> 24 & 255] + "-" + rl[255 & t] + rl[t >> 8 & 255] + "-" + rl[t >> 16 & 15 | 64] + rl[t >> 24 & 255] + "-" + rl[63 & n | 128] + rl[n >> 8 & 255] + "-" + rl[n >> 16 & 255] + rl[n >> 24 & 255] + rl[255 & i] + rl[i >> 8 & 255] + rl[i >> 16 & 255] + rl[i >> 24 & 255]).toLowerCase() } function gl(e, t, n) { return Math.max(t, Math.min(n, e)) } function cl(e, t) { return (e % t + t) % t } function ul(e, t, n) { return (1 - n) * e + n * t } function Cl(e) { return 0 === (e & e - 1) && 0 !== e } function dl(e) { return Math.pow(2, Math.ceil(Math.log(e) / Math.LN2)) } function Il(e) { return Math.pow(2, Math.floor(Math.log(e) / Math.LN2)) } function hl(e, t) { switch (t.constructor) { case Float32Array: return e; case Uint32Array: return e / 4294967295; case Uint16Array: return e / 65535; case Uint8Array: return e / 255; case Int32Array: return Math.max(e / 2147483647, -1); case Int16Array: return Math.max(e / 32767, -1); case Int8Array: return Math.max(e / 127, -1); default: throw new Error("Invalid component type.") } } function Al(e, t) { switch (t.constructor) { case Float32Array: return e; case Uint32Array: return Math.round(4294967295 * e); case Uint16Array: return Math.round(65535 * e); case Uint8Array: return Math.round(255 * e); case Int32Array: return Math.round(2147483647 * e); case Int16Array: return Math.round(32767 * e); case Int8Array: return Math.round(127 * e); default: throw new Error("Invalid component type.") } } var pl = { DEG2RAD: ol, RAD2DEG: sl, generateUUID: ll, clamp: gl, euclideanModulo: cl, mapLinear: function (e, t, n, i, r) { return i + (e - t) * (r - i) / (n - t) }, inverseLerp: function (e, t, n) { return e !== t ? (n - e) / (t - e) : 0 }, lerp: ul, damp: function (e, t, n, i) { return ul(e, t, 1 - Math.exp(-n * i)) }, pingpong: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; return t - Math.abs(cl(e, 2 * t) - t) }, smoothstep: function (e, t, n) { return e <= t ? 0 : e >= n ? 1 : (e = (e - t) / (n - t)) * e * (3 - 2 * e) }, smootherstep: function (e, t, n) { return e <= t ? 0 : e >= n ? 1 : (e = (e - t) / (n - t)) * e * e * (e * (6 * e - 15) + 10) }, randInt: function (e, t) { return e + Math.floor(Math.random() * (t - e + 1)) }, randFloat: function (e, t) { return e + Math.random() * (t - e) }, randFloatSpread: function (e) { return e * (.5 - Math.random()) }, seededRandom: function (e) { void 0 !== e && (al = e); var t = al += 1831565813; return t = Math.imul(t ^ t >>> 15, 1 | t), (((t ^= t + Math.imul(t ^ t >>> 7, 61 | t)) ^ t >>> 14) >>> 0) / 4294967296 }, degToRad: function (e) { return e * ol }, radToDeg: function (e) { return e * sl }, isPowerOfTwo: Cl, ceilPowerOfTwo: dl, floorPowerOfTwo: Il, setQuaternionFromProperEuler: function (e, t, n, i, r) { var a = Math.cos, o = Math.sin, s = a(n / 2), l = o(n / 2), g = a((t + i) / 2), c = o((t + i) / 2), u = a((t - i) / 2), C = o((t - i) / 2), d = a((i - t) / 2), I = o((i - t) / 2); switch (r) { case "XYX": e.set(s * c, l * u, l * C, s * g); break; case "YZY": e.set(l * C, s * c, l * u, s * g); break; case "ZXZ": e.set(l * u, l * C, s * c, s * g); break; case "XZX": e.set(s * c, l * I, l * d, s * g); break; case "YXY": e.set(l * d, s * c, l * I, s * g); break; case "ZYZ": e.set(l * I, l * d, s * c, s * g); break; default: console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: " + r) } }, normalize: Al, denormalize: hl }, fl = function (e) { function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; cr(this, t), t.prototype.isVector2 = !0, this.x = e, this.y = n } return dr(t, [{ key: "width", get: function () { return this.x }, set: function (e) { this.x = e } }, { key: "height", get: function () { return this.y }, set: function (e) { this.y = e } }, { key: "set", value: function (e, t) { return this.x = e, this.y = t, this } }, { key: "setScalar", value: function (e) { return this.x = e, this.y = e, this } }, { key: "setX", value: function (e) { return this.x = e, this } }, { key: "setY", value: function (e) { return this.y = e, this } }, { key: "setComponent", value: function (e, t) { switch (e) { case 0: this.x = t; break; case 1: this.y = t; break; default: throw new Error("index is out of range: " + e) }return this } }, { key: "getComponent", value: function (e) { switch (e) { case 0: return this.x; case 1: return this.y; default: throw new Error("index is out of range: " + e) } } }, { key: "clone", value: function () { return new this.constructor(this.x, this.y) } }, { key: "copy", value: function (e) { return this.x = e.x, this.y = e.y, this } }, { key: "add", value: function (e) { return this.x += e.x, this.y += e.y, this } }, { key: "addScalar", value: function (e) { return this.x += e, this.y += e, this } }, { key: "addVectors", value: function (e, t) { return this.x = e.x + t.x, this.y = e.y + t.y, this } }, { key: "addScaledVector", value: function (e, t) { return this.x += e.x * t, this.y += e.y * t, this } }, { key: "sub", value: function (e) { return this.x -= e.x, this.y -= e.y, this } }, { key: "subScalar", value: function (e) { return this.x -= e, this.y -= e, this } }, { key: "subVectors", value: function (e, t) { return this.x = e.x - t.x, this.y = e.y - t.y, this } }, { key: "multiply", value: function (e) { return this.x *= e.x, this.y *= e.y, this } }, { key: "multiplyScalar", value: function (e) { return this.x *= e, this.y *= e, this } }, { key: "divide", value: function (e) { return this.x /= e.x, this.y /= e.y, this } }, { key: "divideScalar", value: function (e) { return this.multiplyScalar(1 / e) } }, { key: "applyMatrix3", value: function (e) { var t = this.x, n = this.y, i = e.elements; return this.x = i[0] * t + i[3] * n + i[6], this.y = i[1] * t + i[4] * n + i[7], this } }, { key: "min", value: function (e) { return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this } }, { key: "max", value: function (e) { return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this } }, { key: "clamp", value: function (e, t) { return this.x = Math.max(e.x, Math.min(t.x, this.x)), this.y = Math.max(e.y, Math.min(t.y, this.y)), this } }, { key: "clampScalar", value: function (e, t) { return this.x = Math.max(e, Math.min(t, this.x)), this.y = Math.max(e, Math.min(t, this.y)), this } }, { key: "clampLength", value: function (e, t) { var n = this.length(); return this.divideScalar(n || 1).multiplyScalar(Math.max(e, Math.min(t, n))) } }, { key: "floor", value: function () { return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this } }, { key: "ceil", value: function () { return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this } }, { key: "round", value: function () { return this.x = Math.round(this.x), this.y = Math.round(this.y), this } }, { key: "roundToZero", value: function () { return this.x = Math.trunc(this.x), this.y = Math.trunc(this.y), this } }, { key: "negate", value: function () { return this.x = -this.x, this.y = -this.y, this } }, { key: "dot", value: function (e) { return this.x * e.x + this.y * e.y } }, { key: "cross", value: function (e) { return this.x * e.y - this.y * e.x } }, { key: "lengthSq", value: function () { return this.x * this.x + this.y * this.y } }, { key: "length", value: function () { return Math.sqrt(this.x * this.x + this.y * this.y) } }, { key: "manhattanLength", value: function () { return Math.abs(this.x) + Math.abs(this.y) } }, { key: "normalize", value: function () { return this.divideScalar(this.length() || 1) } }, { key: "angle", value: function () { var e = Math.atan2(-this.y, -this.x) + Math.PI; return e } }, { key: "angleTo", value: function (e) { var t = Math.sqrt(this.lengthSq() * e.lengthSq()); if (0 === t) return Math.PI / 2; var n = this.dot(e) / t; return Math.acos(gl(n, -1, 1)) } }, { key: "distanceTo", value: function (e) { return Math.sqrt(this.distanceToSquared(e)) } }, { key: "distanceToSquared", value: function (e) { var t = this.x - e.x, n = this.y - e.y; return t * t + n * n } }, { key: "manhattanDistanceTo", value: function (e) { return Math.abs(this.x - e.x) + Math.abs(this.y - e.y) } }, { key: "setLength", value: function (e) { return this.normalize().multiplyScalar(e) } }, { key: "lerp", value: function (e, t) { return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this } }, { key: "lerpVectors", value: function (e, t, n) { return this.x = e.x + (t.x - e.x) * n, this.y = e.y + (t.y - e.y) * n, this } }, { key: "equals", value: function (e) { return e.x === this.x && e.y === this.y } }, { key: "fromArray", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; return this.x = e[t], this.y = e[t + 1], this } }, { key: "toArray", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; return e[t] = this.x, e[t + 1] = this.y, e } }, { key: "fromBufferAttribute", value: function (e, t) { return this.x = e.getX(t), this.y = e.getY(t), this } }, { key: "rotateAround", value: function (e, t) { var n = Math.cos(t), i = Math.sin(t), r = this.x - e.x, a = this.y - e.y; return this.x = r * n - a * i + e.x, this.y = r * i + a * n + e.y, this } }, { key: "random", value: function () { return this.x = Math.random(), this.y = Math.random(), this } }, { key: Symbol.iterator, value: Gr().mark((function e() { return Gr().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, this.x; case 2: return e.next = 4, this.y; case 4: case "end": return e.stop() } }), e, this) })) }]), t }(), ml = function () { function e(t, n, i, r, a, o, s, l, g) { cr(this, e), e.prototype.isMatrix3 = !0, this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1], void 0 !== t && this.set(t, n, i, r, a, o, s, l, g) } return dr(e, [{ key: "set", value: function (e, t, n, i, r, a, o, s, l) { var g = this.elements; return g[0] = e, g[1] = i, g[2] = o, g[3] = t, g[4] = r, g[5] = s, g[6] = n, g[7] = a, g[8] = l, this } }, { key: "identity", value: function () { return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this } }, { key: "copy", value: function (e) { var t = this.elements, n = e.elements; return t[0] = n[0], t[1] = n[1], t[2] = n[2], t[3] = n[3], t[4] = n[4], t[5] = n[5], t[6] = n[6], t[7] = n[7], t[8] = n[8], this } }, { key: "extractBasis", value: function (e, t, n) { return e.setFromMatrix3Column(this, 0), t.setFromMatrix3Column(this, 1), n.setFromMatrix3Column(this, 2), this } }, { key: "setFromMatrix4", value: function (e) { var t = e.elements; return this.set(t[0], t[4], t[8], t[1], t[5], t[9], t[2], t[6], t[10]), this } }, { key: "multiply", value: function (e) { return this.multiplyMatrices(this, e) } }, { key: "premultiply", value: function (e) { return this.multiplyMatrices(e, this) } }, { key: "multiplyMatrices", value: function (e, t) { var n = e.elements, i = t.elements, r = this.elements, a = n[0], o = n[3], s = n[6], l = n[1], g = n[4], c = n[7], u = n[2], C = n[5], d = n[8], I = i[0], h = i[3], A = i[6], p = i[1], f = i[4], m = i[7], v = i[2], b = i[5], y = i[8]; return r[0] = a * I + o * p + s * v, r[3] = a * h + o * f + s * b, r[6] = a * A + o * m + s * y, r[1] = l * I + g * p + c * v, r[4] = l * h + g * f + c * b, r[7] = l * A + g * m + c * y, r[2] = u * I + C * p + d * v, r[5] = u * h + C * f + d * b, r[8] = u * A + C * m + d * y, this } }, { key: "multiplyScalar", value: function (e) { var t = this.elements; return t[0] *= e, t[3] *= e, t[6] *= e, t[1] *= e, t[4] *= e, t[7] *= e, t[2] *= e, t[5] *= e, t[8] *= e, this } }, { key: "determinant", value: function () { var e = this.elements, t = e[0], n = e[1], i = e[2], r = e[3], a = e[4], o = e[5], s = e[6], l = e[7], g = e[8]; return t * a * g - t * o * l - n * r * g + n * o * s + i * r * l - i * a * s } }, { key: "invert", value: function () { var e = this.elements, t = e[0], n = e[1], i = e[2], r = e[3], a = e[4], o = e[5], s = e[6], l = e[7], g = e[8], c = g * a - o * l, u = o * s - g * r, C = l * r - a * s, d = t * c + n * u + i * C; if (0 === d) return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0); var I = 1 / d; return e[0] = c * I, e[1] = (i * l - g * n) * I, e[2] = (o * n - i * a) * I, e[3] = u * I, e[4] = (g * t - i * s) * I, e[5] = (i * r - o * t) * I, e[6] = C * I, e[7] = (n * s - l * t) * I, e[8] = (a * t - n * r) * I, this } }, { key: "transpose", value: function () { var e, t = this.elements; return e = t[1], t[1] = t[3], t[3] = e, e = t[2], t[2] = t[6], t[6] = e, e = t[5], t[5] = t[7], t[7] = e, this } }, { key: "getNormalMatrix", value: function (e) { return this.setFromMatrix4(e).invert().transpose() } }, { key: "transposeIntoArray", value: function (e) { var t = this.elements; return e[0] = t[0], e[1] = t[3], e[2] = t[6], e[3] = t[1], e[4] = t[4], e[5] = t[7], e[6] = t[2], e[7] = t[5], e[8] = t[8], this } }, { key: "setUvTransform", value: function (e, t, n, i, r, a, o) { var s = Math.cos(r), l = Math.sin(r); return this.set(n * s, n * l, -n * (s * a + l * o) + a + e, -i * l, i * s, -i * (-l * a + s * o) + o + t, 0, 0, 1), this } }, { key: "scale", value: function (e, t) { return this.premultiply(vl.makeScale(e, t)), this } }, { key: "rotate", value: function (e) { return this.premultiply(vl.makeRotation(-e)), this } }, { key: "translate", value: function (e, t) { return this.premultiply(vl.makeTranslation(e, t)), this } }, { key: "makeTranslation", value: function (e, t) { return e.isVector2 ? this.set(1, 0, e.x, 0, 1, e.y, 0, 0, 1) : this.set(1, 0, e, 0, 1, t, 0, 0, 1), this } }, { key: "makeRotation", value: function (e) { var t = Math.cos(e), n = Math.sin(e); return this.set(t, -n, 0, n, t, 0, 0, 0, 1), this } }, { key: "makeScale", value: function (e, t) { return this.set(e, 0, 0, 0, t, 0, 0, 0, 1), this } }, { key: "equals", value: function (e) { for (var t = this.elements, n = e.elements, i = 0; i < 9; i++)if (t[i] !== n[i]) return !1; return !0 } }, { key: "fromArray", value: function (e) { for (var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = 0; n < 9; n++)this.elements[n] = e[n + t]; return this } }, { key: "toArray", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = this.elements; return e[t] = n[0], e[t + 1] = n[1], e[t + 2] = n[2], e[t + 3] = n[3], e[t + 4] = n[4], e[t + 5] = n[5], e[t + 6] = n[6], e[t + 7] = n[7], e[t + 8] = n[8], e } }, { key: "clone", value: function () { return (new this.constructor).fromArray(this.elements) } }]), e }(), vl = new ml; function bl(e) { for (var t = e.length - 1; t >= 0; --t)if (e[t] >= 65535) return !0; return !1 } var yl = { Int8Array: Int8Array, Uint8Array: Uint8Array, Uint8ClampedArray: Uint8ClampedArray, Int16Array: Int16Array, Uint16Array: Uint16Array, Int32Array: Int32Array, Uint32Array: Uint32Array, Float32Array: Float32Array, Float64Array: Float64Array }; function Gl(e, t) { return new yl[e](t) } function Bl(e) { return document.createElementNS("http://www.w3.org/1999/xhtml", e) } function Zl() { var e = Bl("canvas"); return e.style.display = "block", e } var wl = {}; function Sl(e) { e in wl || (wl[e] = !0, console.warn(e)) } var Rl, xl = (new ml).set(.8224621, .177538, 0, .0331941, .9668058, 0, .0170827, .0723974, .9105199), Wl = (new ml).set(1.2249401, -.2249404, 0, -.0420569, 1.0420571, 0, -.0196376, -.0786361, 1.0982735), Vl = (Ar = {}, (0, l.Z)(Ar, Cs, { transfer: hs, primaries: ps, toReference: function (e) { return e }, fromReference: function (e) { return e } }), (0, l.Z)(Ar, us, { transfer: As, primaries: ps, toReference: function (e) { return e.convertSRGBToLinear() }, fromReference: function (e) { return e.convertLinearToSRGB() } }), (0, l.Z)(Ar, Is, { transfer: hs, primaries: fs, toReference: function (e) { return e.applyMatrix3(Wl) }, fromReference: function (e) { return e.applyMatrix3(xl) } }), (0, l.Z)(Ar, ds, { transfer: As, primaries: fs, toReference: function (e) { return e.convertSRGBToLinear().applyMatrix3(Wl) }, fromReference: function (e) { return e.applyMatrix3(xl).convertLinearToSRGB() } }), Ar), kl = new Set([Cs, Is]), Hl = { enabled: !0, _workingColorSpace: Cs, get legacyMode() { return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."), !this.enabled }, set legacyMode(e) { console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."), this.enabled = !e }, get workingColorSpace() { return this._workingColorSpace }, set workingColorSpace(e) { if (!kl.has(e)) throw new Error('Unsupported working color space, "'.concat(e, '".')); this._workingColorSpace = e }, convert: function (e, t, n) { if (!1 === this.enabled || t === n || !t || !n) return e; var i = Vl[t].toReference; return (0, Vl[n].fromReference)(i(e)) }, fromWorkingColorSpace: function (e, t) { return this.convert(e, this._workingColorSpace, t) }, toWorkingColorSpace: function (e, t) { return this.convert(e, t, this._workingColorSpace) }, getPrimaries: function (e) { return Vl[e].primaries }, getTransfer: function (e) { return e === cs ? hs : Vl[e].transfer } }; function Ml(e) { return e < .04045 ? .0773993808 * e : Math.pow(.9478672986 * e + .0521327014, 2.4) } function Fl(e) { return e < .0031308 ? 12.92 * e : 1.055 * Math.pow(e, .41666) - .055 } var Nl = function () { function e() { cr(this, e) } return dr(e, null, [{ key: "getDataURL", value: function (e) { if (/^data:/i.test(e.src)) return e.src; if ("undefined" === typeof HTMLCanvasElement) return e.src; var t; if (e instanceof HTMLCanvasElement) t = e; else { void 0 === Rl && (Rl = Bl("canvas")), Rl.width = e.width, Rl.height = e.height; var n = Rl.getContext("2d"); e instanceof ImageData ? n.putImageData(e, 0, 0) : n.drawImage(e, 0, 0, e.width, e.height), t = Rl } return t.width > 2048 || t.height > 2048 ? (console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons", e), t.toDataURL("image/jpeg", .6)) : t.toDataURL("image/png") } }, { key: "sRGBToLinear", value: function (e) { if ("undefined" !== typeof HTMLImageElement && e instanceof HTMLImageElement || "undefined" !== typeof HTMLCanvasElement && e instanceof HTMLCanvasElement || "undefined" !== typeof ImageBitmap && e instanceof ImageBitmap) { var t = Bl("canvas"); t.width = e.width, t.height = e.height; var n = t.getContext("2d"); n.drawImage(e, 0, 0, e.width, e.height); for (var i = n.getImageData(0, 0, e.width, e.height), r = i.data, a = 0; a < r.length; a++)r[a] = 255 * Ml(r[a] / 255); return n.putImageData(i, 0, 0), t } if (e.data) { for (var o = e.data.slice(0), s = 0; s < o.length; s++)o instanceof Uint8Array || o instanceof Uint8ClampedArray ? o[s] = Math.floor(255 * Ml(o[s] / 255)) : o[s] = Ml(o[s]); return { data: o, width: e.width, height: e.height } } return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."), e } }]), e }(), Xl = 0, Yl = function () { function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; cr(this, e), this.isSource = !0, Object.defineProperty(this, "id", { value: Xl++ }), this.uuid = ll(), this.data = t, this.version = 0 } return dr(e, [{ key: "needsUpdate", set: function (e) { !0 === e && this.version++ } }, { key: "toJSON", value: function (e) { var t = void 0 === e || "string" === typeof e; if (!t && void 0 !== e.images[this.uuid]) return e.images[this.uuid]; var n = { uuid: this.uuid, url: "" }, i = this.data; if (null !== i) { var r; if (Array.isArray(i)) { r = []; for (var a = 0, o = i.length; a < o; a++)i[a].isDataTexture ? r.push(Kl(i[a].image)) : r.push(Kl(i[a])) } else r = Kl(i); n.url = r } return t || (e.images[this.uuid] = n), n } }]), e }(); function Kl(e) { return "undefined" !== typeof HTMLImageElement && e instanceof HTMLImageElement || "undefined" !== typeof HTMLCanvasElement && e instanceof HTMLCanvasElement || "undefined" !== typeof ImageBitmap && e instanceof ImageBitmap ? Nl.getDataURL(e) : e.data ? { data: Array.from(e.data), width: e.width, height: e.height, type: e.data.constructor.name } : (console.warn("THREE.Texture: Unable to serialize Texture."), {}) } var Ll = 0, zl = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : n.DEFAULT_IMAGE, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : n.DEFAULT_MAPPING, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : Va, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : Va, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : Ya, l = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : za, g = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : to, c = arguments.length > 7 && void 0 !== arguments[7] ? arguments[7] : Ta, u = arguments.length > 8 && void 0 !== arguments[8] ? arguments[8] : n.DEFAULT_ANISOTROPY, C = arguments.length > 9 && void 0 !== arguments[9] ? arguments[9] : cs; return cr(this, n), (e = t.call(this)).isTexture = !0, Object.defineProperty(y(e), "id", { value: Ll++ }), e.uuid = ll(), e.name = "", e.source = new Yl(i), e.mipmaps = [], e.mapping = r, e.channel = 0, e.wrapS = a, e.wrapT = o, e.magFilter = s, e.minFilter = l, e.anisotropy = u, e.format = g, e.internalFormat = null, e.type = c, e.offset = new fl(0, 0), e.repeat = new fl(1, 1), e.center = new fl(0, 0), e.rotation = 0, e.matrixAutoUpdate = !0, e.matrix = new ml, e.generateMipmaps = !0, e.premultiplyAlpha = !1, e.flipY = !0, e.unpackAlignment = 4, "string" === typeof C ? e.colorSpace = C : (Sl("THREE.Texture: Property .encoding has been replaced by .colorSpace."), e.colorSpace = C === as ? us : cs), e.userData = {}, e.version = 0, e.onUpdate = null, e.isRenderTargetTexture = !1, e.needsPMREMUpdate = !1, e } return dr(n, [{ key: "image", get: function () { return this.source.data }, set: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; this.source.data = e } }, { key: "updateMatrix", value: function () { this.matrix.setUvTransform(this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y) } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }, { key: "copy", value: function (e) { return this.name = e.name, this.source = e.source, this.mipmaps = e.mipmaps.slice(0), this.mapping = e.mapping, this.channel = e.channel, this.wrapS = e.wrapS, this.wrapT = e.wrapT, this.magFilter = e.magFilter, this.minFilter = e.minFilter, this.anisotropy = e.anisotropy, this.format = e.format, this.internalFormat = e.internalFormat, this.type = e.type, this.offset.copy(e.offset), this.repeat.copy(e.repeat), this.center.copy(e.center), this.rotation = e.rotation, this.matrixAutoUpdate = e.matrixAutoUpdate, this.matrix.copy(e.matrix), this.generateMipmaps = e.generateMipmaps, this.premultiplyAlpha = e.premultiplyAlpha, this.flipY = e.flipY, this.unpackAlignment = e.unpackAlignment, this.colorSpace = e.colorSpace, this.userData = JSON.parse(JSON.stringify(e.userData)), this.needsUpdate = !0, this } }, { key: "toJSON", value: function (e) { var t = void 0 === e || "string" === typeof e; if (!t && void 0 !== e.textures[this.uuid]) return e.textures[this.uuid]; var n = { metadata: { version: 4.6, type: "Texture", generator: "Texture.toJSON" }, uuid: this.uuid, name: this.name, image: this.source.toJSON(e).uuid, mapping: this.mapping, channel: this.channel, repeat: [this.repeat.x, this.repeat.y], offset: [this.offset.x, this.offset.y], center: [this.center.x, this.center.y], rotation: this.rotation, wrap: [this.wrapS, this.wrapT], format: this.format, internalFormat: this.internalFormat, type: this.type, colorSpace: this.colorSpace, minFilter: this.minFilter, magFilter: this.magFilter, anisotropy: this.anisotropy, flipY: this.flipY, generateMipmaps: this.generateMipmaps, premultiplyAlpha: this.premultiplyAlpha, unpackAlignment: this.unpackAlignment }; return Object.keys(this.userData).length > 0 && (n.userData = this.userData), t || (e.textures[this.uuid] = n), n } }, { key: "dispose", value: function () { this.dispatchEvent({ type: "dispose" }) } }, { key: "transformUv", value: function (e) { if (this.mapping !== Ba) return e; if (e.applyMatrix3(this.matrix), e.x < 0 || e.x > 1) switch (this.wrapS) { case Wa: e.x = e.x - Math.floor(e.x); break; case Va: e.x = e.x < 0 ? 0 : 1; break; case ka: 1 === Math.abs(Math.floor(e.x) % 2) ? e.x = Math.ceil(e.x) - e.x : e.x = e.x - Math.floor(e.x) }if (e.y < 0 || e.y > 1) switch (this.wrapT) { case Wa: e.y = e.y - Math.floor(e.y); break; case Va: e.y = e.y < 0 ? 0 : 1; break; case ka: 1 === Math.abs(Math.floor(e.y) % 2) ? e.y = Math.ceil(e.y) - e.y : e.y = e.y - Math.floor(e.y) }return this.flipY && (e.y = 1 - e.y), e } }, { key: "needsUpdate", set: function (e) { !0 === e && (this.version++, this.source.needsUpdate = !0) } }, { key: "encoding", get: function () { return Sl("THREE.Texture: Property .encoding has been replaced by .colorSpace."), this.colorSpace === us ? as : rs }, set: function (e) { Sl("THREE.Texture: Property .encoding has been replaced by .colorSpace."), this.colorSpace = e === as ? us : cs } }]), n }(il); zl.DEFAULT_IMAGE = null, zl.DEFAULT_MAPPING = Ba, zl.DEFAULT_ANISOTROPY = 1; var El = function (e) { function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1; cr(this, t), t.prototype.isVector4 = !0, this.x = e, this.y = n, this.z = i, this.w = r } return dr(t, [{ key: "width", get: function () { return this.z }, set: function (e) { this.z = e } }, { key: "height", get: function () { return this.w }, set: function (e) { this.w = e } }, { key: "set", value: function (e, t, n, i) { return this.x = e, this.y = t, this.z = n, this.w = i, this } }, { key: "setScalar", value: function (e) { return this.x = e, this.y = e, this.z = e, this.w = e, this } }, { key: "setX", value: function (e) { return this.x = e, this } }, { key: "setY", value: function (e) { return this.y = e, this } }, { key: "setZ", value: function (e) { return this.z = e, this } }, { key: "setW", value: function (e) { return this.w = e, this } }, { key: "setComponent", value: function (e, t) { switch (e) { case 0: this.x = t; break; case 1: this.y = t; break; case 2: this.z = t; break; case 3: this.w = t; break; default: throw new Error("index is out of range: " + e) }return this } }, { key: "getComponent", value: function (e) { switch (e) { case 0: return this.x; case 1: return this.y; case 2: return this.z; case 3: return this.w; default: throw new Error("index is out of range: " + e) } } }, { key: "clone", value: function () { return new this.constructor(this.x, this.y, this.z, this.w) } }, { key: "copy", value: function (e) { return this.x = e.x, this.y = e.y, this.z = e.z, this.w = void 0 !== e.w ? e.w : 1, this } }, { key: "add", value: function (e) { return this.x += e.x, this.y += e.y, this.z += e.z, this.w += e.w, this } }, { key: "addScalar", value: function (e) { return this.x += e, this.y += e, this.z += e, this.w += e, this } }, { key: "addVectors", value: function (e, t) { return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this.w = e.w + t.w, this } }, { key: "addScaledVector", value: function (e, t) { return this.x += e.x * t, this.y += e.y * t, this.z += e.z * t, this.w += e.w * t, this } }, { key: "sub", value: function (e) { return this.x -= e.x, this.y -= e.y, this.z -= e.z, this.w -= e.w, this } }, { key: "subScalar", value: function (e) { return this.x -= e, this.y -= e, this.z -= e, this.w -= e, this } }, { key: "subVectors", value: function (e, t) { return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this.w = e.w - t.w, this } }, { key: "multiply", value: function (e) { return this.x *= e.x, this.y *= e.y, this.z *= e.z, this.w *= e.w, this } }, { key: "multiplyScalar", value: function (e) { return this.x *= e, this.y *= e, this.z *= e, this.w *= e, this } }, { key: "applyMatrix4", value: function (e) { var t = this.x, n = this.y, i = this.z, r = this.w, a = e.elements; return this.x = a[0] * t + a[4] * n + a[8] * i + a[12] * r, this.y = a[1] * t + a[5] * n + a[9] * i + a[13] * r, this.z = a[2] * t + a[6] * n + a[10] * i + a[14] * r, this.w = a[3] * t + a[7] * n + a[11] * i + a[15] * r, this } }, { key: "divideScalar", value: function (e) { return this.multiplyScalar(1 / e) } }, { key: "setAxisAngleFromQuaternion", value: function (e) { this.w = 2 * Math.acos(e.w); var t = Math.sqrt(1 - e.w * e.w); return t < 1e-4 ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = e.x / t, this.y = e.y / t, this.z = e.z / t), this } }, { key: "setAxisAngleFromRotationMatrix", value: function (e) { var t, n, i, r, a = .01, o = .1, s = e.elements, l = s[0], g = s[4], c = s[8], u = s[1], C = s[5], d = s[9], I = s[2], h = s[6], A = s[10]; if (Math.abs(g - u) < a && Math.abs(c - I) < a && Math.abs(d - h) < a) { if (Math.abs(g + u) < o && Math.abs(c + I) < o && Math.abs(d + h) < o && Math.abs(l + C + A - 3) < o) return this.set(1, 0, 0, 0), this; t = Math.PI; var p = (l + 1) / 2, f = (C + 1) / 2, m = (A + 1) / 2, v = (g + u) / 4, b = (c + I) / 4, y = (d + h) / 4; return p > f && p > m ? p < a ? (n = 0, i = .707106781, r = .707106781) : (i = v / (n = Math.sqrt(p)), r = b / n) : f > m ? f < a ? (n = .707106781, i = 0, r = .707106781) : (n = v / (i = Math.sqrt(f)), r = y / i) : m < a ? (n = .707106781, i = .707106781, r = 0) : (n = b / (r = Math.sqrt(m)), i = y / r), this.set(n, i, r, t), this } var G = Math.sqrt((h - d) * (h - d) + (c - I) * (c - I) + (u - g) * (u - g)); return Math.abs(G) < .001 && (G = 1), this.x = (h - d) / G, this.y = (c - I) / G, this.z = (u - g) / G, this.w = Math.acos((l + C + A - 1) / 2), this } }, { key: "min", value: function (e) { return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this.z = Math.min(this.z, e.z), this.w = Math.min(this.w, e.w), this } }, { key: "max", value: function (e) { return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this.z = Math.max(this.z, e.z), this.w = Math.max(this.w, e.w), this } }, { key: "clamp", value: function (e, t) { return this.x = Math.max(e.x, Math.min(t.x, this.x)), this.y = Math.max(e.y, Math.min(t.y, this.y)), this.z = Math.max(e.z, Math.min(t.z, this.z)), this.w = Math.max(e.w, Math.min(t.w, this.w)), this } }, { key: "clampScalar", value: function (e, t) { return this.x = Math.max(e, Math.min(t, this.x)), this.y = Math.max(e, Math.min(t, this.y)), this.z = Math.max(e, Math.min(t, this.z)), this.w = Math.max(e, Math.min(t, this.w)), this } }, { key: "clampLength", value: function (e, t) { var n = this.length(); return this.divideScalar(n || 1).multiplyScalar(Math.max(e, Math.min(t, n))) } }, { key: "floor", value: function () { return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this.w = Math.floor(this.w), this } }, { key: "ceil", value: function () { return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this.w = Math.ceil(this.w), this } }, { key: "round", value: function () { return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this.w = Math.round(this.w), this } }, { key: "roundToZero", value: function () { return this.x = Math.trunc(this.x), this.y = Math.trunc(this.y), this.z = Math.trunc(this.z), this.w = Math.trunc(this.w), this } }, { key: "negate", value: function () { return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this } }, { key: "dot", value: function (e) { return this.x * e.x + this.y * e.y + this.z * e.z + this.w * e.w } }, { key: "lengthSq", value: function () { return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w } }, { key: "length", value: function () { return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w) } }, { key: "manhattanLength", value: function () { return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w) } }, { key: "normalize", value: function () { return this.divideScalar(this.length() || 1) } }, { key: "setLength", value: function (e) { return this.normalize().multiplyScalar(e) } }, { key: "lerp", value: function (e, t) { return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this.w += (e.w - this.w) * t, this } }, { key: "lerpVectors", value: function (e, t, n) { return this.x = e.x + (t.x - e.x) * n, this.y = e.y + (t.y - e.y) * n, this.z = e.z + (t.z - e.z) * n, this.w = e.w + (t.w - e.w) * n, this } }, { key: "equals", value: function (e) { return e.x === this.x && e.y === this.y && e.z === this.z && e.w === this.w } }, { key: "fromArray", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; return this.x = e[t], this.y = e[t + 1], this.z = e[t + 2], this.w = e[t + 3], this } }, { key: "toArray", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; return e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, e[t + 3] = this.w, e } }, { key: "fromBufferAttribute", value: function (e, t) { return this.x = e.getX(t), this.y = e.getY(t), this.z = e.getZ(t), this.w = e.getW(t), this } }, { key: "random", value: function () { return this.x = Math.random(), this.y = Math.random(), this.z = Math.random(), this.w = Math.random(), this } }, { key: Symbol.iterator, value: Gr().mark((function e() { return Gr().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, this.x; case 2: return e.next = 4, this.y; case 4: return e.next = 6, this.z; case 6: return e.next = 8, this.w; case 8: case "end": return e.stop() } }), e, this) })) }]), t }(), Tl = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; cr(this, n), (e = t.call(this)).isRenderTarget = !0, e.width = i, e.height = r, e.depth = 1, e.scissor = new El(0, 0, i, r), e.scissorTest = !1, e.viewport = new El(0, 0, i, r); var o = { width: i, height: r, depth: 1 }; return void 0 !== a.encoding && (Sl("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."), a.colorSpace = a.encoding === as ? us : cs), a = Object.assign({ generateMipmaps: !1, internalFormat: null, minFilter: Ya, depthBuffer: !0, stencilBuffer: !1, depthTexture: null, samples: 0 }, a), e.texture = new zl(o, a.mapping, a.wrapS, a.wrapT, a.magFilter, a.minFilter, a.format, a.type, a.anisotropy, a.colorSpace), e.texture.isRenderTargetTexture = !0, e.texture.flipY = !1, e.texture.generateMipmaps = a.generateMipmaps, e.texture.internalFormat = a.internalFormat, e.depthBuffer = a.depthBuffer, e.stencilBuffer = a.stencilBuffer, e.depthTexture = a.depthTexture, e.samples = a.samples, e } return dr(n, [{ key: "setSize", value: function (e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1; this.width === e && this.height === t && this.depth === n || (this.width = e, this.height = t, this.depth = n, this.texture.image.width = e, this.texture.image.height = t, this.texture.image.depth = n, this.dispose()), this.viewport.set(0, 0, e, t), this.scissor.set(0, 0, e, t) } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }, { key: "copy", value: function (e) { this.width = e.width, this.height = e.height, this.depth = e.depth, this.scissor.copy(e.scissor), this.scissorTest = e.scissorTest, this.viewport.copy(e.viewport), this.texture = e.texture.clone(), this.texture.isRenderTargetTexture = !0; var t = Object.assign({}, e.texture.image); return this.texture.source = new Yl(t), this.depthBuffer = e.depthBuffer, this.stencilBuffer = e.stencilBuffer, null !== e.depthTexture && (this.depthTexture = e.depthTexture.clone()), this.samples = e.samples, this } }, { key: "dispose", value: function () { this.dispatchEvent({ type: "dispose" }) } }]), n }(il), _l = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; return cr(this, n), (e = t.call(this, i, r, a)).isWebGLRenderTarget = !0, e } return dr(n) }(Tl), Ul = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1; return cr(this, n), (e = t.call(this, null)).isDataArrayTexture = !0, e.image = { data: i, width: r, height: a, depth: o }, e.magFilter = Ha, e.minFilter = Ha, e.wrapR = Va, e.generateMipmaps = !1, e.flipY = !1, e.unpackAlignment = 1, e } return dr(n) }(zl), Dl = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1; return cr(this, n), (e = t.call(this, i, r)).isWebGLArrayRenderTarget = !0, e.depth = a, e.texture = new Ul(null, i, r, a), e.texture.isRenderTargetTexture = !0, e } return dr(n) }(_l), Pl = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1; return cr(this, n), (e = t.call(this, null)).isData3DTexture = !0, e.image = { data: i, width: r, height: a, depth: o }, e.magFilter = Ha, e.minFilter = Ha, e.wrapR = Va, e.generateMipmaps = !1, e.flipY = !1, e.unpackAlignment = 1, e } return dr(n) }(zl), Jl = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1; return cr(this, n), (e = t.call(this, i, r)).isWebGL3DRenderTarget = !0, e.depth = a, e.texture = new Pl(null, i, r, a), e.texture.isRenderTargetTexture = !0, e } return dr(n) }(_l), Ol = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}; cr(this, n), (e = t.call(this, i, r, o)).isWebGLMultipleRenderTargets = !0; var s = e.texture; e.texture = []; for (var l = 0; l < a; l++)e.texture[l] = s.clone(), e.texture[l].isRenderTargetTexture = !0; return e } return dr(n, [{ key: "setSize", value: function (e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1; if (this.width !== e || this.height !== t || this.depth !== n) { this.width = e, this.height = t, this.depth = n; for (var i = 0, r = this.texture.length; i < r; i++)this.texture[i].image.width = e, this.texture[i].image.height = t, this.texture[i].image.depth = n; this.dispose() } this.viewport.set(0, 0, e, t), this.scissor.set(0, 0, e, t) } }, { key: "copy", value: function (e) { this.dispose(), this.width = e.width, this.height = e.height, this.depth = e.depth, this.scissor.copy(e.scissor), this.scissorTest = e.scissorTest, this.viewport.copy(e.viewport), this.depthBuffer = e.depthBuffer, this.stencilBuffer = e.stencilBuffer, null !== e.depthTexture && (this.depthTexture = e.depthTexture.clone()), this.texture.length = 0; for (var t = 0, n = e.texture.length; t < n; t++)this.texture[t] = e.texture[t].clone(), this.texture[t].isRenderTargetTexture = !0; return this } }]), n }(_l), jl = function (e) { function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1; cr(this, t), this.isQuaternion = !0, this._x = e, this._y = n, this._z = i, this._w = r } return dr(t, [{ key: "x", get: function () { return this._x }, set: function (e) { this._x = e, this._onChangeCallback() } }, { key: "y", get: function () { return this._y }, set: function (e) { this._y = e, this._onChangeCallback() } }, { key: "z", get: function () { return this._z }, set: function (e) { this._z = e, this._onChangeCallback() } }, { key: "w", get: function () { return this._w }, set: function (e) { this._w = e, this._onChangeCallback() } }, { key: "set", value: function (e, t, n, i) { return this._x = e, this._y = t, this._z = n, this._w = i, this._onChangeCallback(), this } }, { key: "clone", value: function () { return new this.constructor(this._x, this._y, this._z, this._w) } }, { key: "copy", value: function (e) { return this._x = e.x, this._y = e.y, this._z = e.z, this._w = e.w, this._onChangeCallback(), this } }, { key: "setFromEuler", value: function (e, t) { var n = e._x, i = e._y, r = e._z, a = e._order, o = Math.cos, s = Math.sin, l = o(n / 2), g = o(i / 2), c = o(r / 2), u = s(n / 2), C = s(i / 2), d = s(r / 2); switch (a) { case "XYZ": this._x = u * g * c + l * C * d, this._y = l * C * c - u * g * d, this._z = l * g * d + u * C * c, this._w = l * g * c - u * C * d; break; case "YXZ": this._x = u * g * c + l * C * d, this._y = l * C * c - u * g * d, this._z = l * g * d - u * C * c, this._w = l * g * c + u * C * d; break; case "ZXY": this._x = u * g * c - l * C * d, this._y = l * C * c + u * g * d, this._z = l * g * d + u * C * c, this._w = l * g * c - u * C * d; break; case "ZYX": this._x = u * g * c - l * C * d, this._y = l * C * c + u * g * d, this._z = l * g * d - u * C * c, this._w = l * g * c + u * C * d; break; case "YZX": this._x = u * g * c + l * C * d, this._y = l * C * c + u * g * d, this._z = l * g * d - u * C * c, this._w = l * g * c - u * C * d; break; case "XZY": this._x = u * g * c - l * C * d, this._y = l * C * c - u * g * d, this._z = l * g * d + u * C * c, this._w = l * g * c + u * C * d; break; default: console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: " + a) }return !1 !== t && this._onChangeCallback(), this } }, { key: "setFromAxisAngle", value: function (e, t) { var n = t / 2, i = Math.sin(n); return this._x = e.x * i, this._y = e.y * i, this._z = e.z * i, this._w = Math.cos(n), this._onChangeCallback(), this } }, { key: "setFromRotationMatrix", value: function (e) { var t = e.elements, n = t[0], i = t[4], r = t[8], a = t[1], o = t[5], s = t[9], l = t[2], g = t[6], c = t[10], u = n + o + c; if (u > 0) { var C = .5 / Math.sqrt(u + 1); this._w = .25 / C, this._x = (g - s) * C, this._y = (r - l) * C, this._z = (a - i) * C } else if (n > o && n > c) { var d = 2 * Math.sqrt(1 + n - o - c); this._w = (g - s) / d, this._x = .25 * d, this._y = (i + a) / d, this._z = (r + l) / d } else if (o > c) { var I = 2 * Math.sqrt(1 + o - n - c); this._w = (r - l) / I, this._x = (i + a) / I, this._y = .25 * I, this._z = (s + g) / I } else { var h = 2 * Math.sqrt(1 + c - n - o); this._w = (a - i) / h, this._x = (r + l) / h, this._y = (s + g) / h, this._z = .25 * h } return this._onChangeCallback(), this } }, { key: "setFromUnitVectors", value: function (e, t) { var n = e.dot(t) + 1; return n < Number.EPSILON ? (n = 0, Math.abs(e.x) > Math.abs(e.z) ? (this._x = -e.y, this._y = e.x, this._z = 0, this._w = n) : (this._x = 0, this._y = -e.z, this._z = e.y, this._w = n)) : (this._x = e.y * t.z - e.z * t.y, this._y = e.z * t.x - e.x * t.z, this._z = e.x * t.y - e.y * t.x, this._w = n), this.normalize() } }, { key: "angleTo", value: function (e) { return 2 * Math.acos(Math.abs(gl(this.dot(e), -1, 1))) } }, { key: "rotateTowards", value: function (e, t) { var n = this.angleTo(e); if (0 === n) return this; var i = Math.min(1, t / n); return this.slerp(e, i), this } }, { key: "identity", value: function () { return this.set(0, 0, 0, 1) } }, { key: "invert", value: function () { return this.conjugate() } }, { key: "conjugate", value: function () { return this._x *= -1, this._y *= -1, this._z *= -1, this._onChangeCallback(), this } }, { key: "dot", value: function (e) { return this._x * e._x + this._y * e._y + this._z * e._z + this._w * e._w } }, { key: "lengthSq", value: function () { return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w } }, { key: "length", value: function () { return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w) } }, { key: "normalize", value: function () { var e = this.length(); return 0 === e ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (e = 1 / e, this._x = this._x * e, this._y = this._y * e, this._z = this._z * e, this._w = this._w * e), this._onChangeCallback(), this } }, { key: "multiply", value: function (e) { return this.multiplyQuaternions(this, e) } }, { key: "premultiply", value: function (e) { return this.multiplyQuaternions(e, this) } }, { key: "multiplyQuaternions", value: function (e, t) { var n = e._x, i = e._y, r = e._z, a = e._w, o = t._x, s = t._y, l = t._z, g = t._w; return this._x = n * g + a * o + i * l - r * s, this._y = i * g + a * s + r * o - n * l, this._z = r * g + a * l + n * s - i * o, this._w = a * g - n * o - i * s - r * l, this._onChangeCallback(), this } }, { key: "slerp", value: function (e, t) { if (0 === t) return this; if (1 === t) return this.copy(e); var n = this._x, i = this._y, r = this._z, a = this._w, o = a * e._w + n * e._x + i * e._y + r * e._z; if (o < 0 ? (this._w = -e._w, this._x = -e._x, this._y = -e._y, this._z = -e._z, o = -o) : this.copy(e), o >= 1) return this._w = a, this._x = n, this._y = i, this._z = r, this; var s = 1 - o * o; if (s <= Number.EPSILON) { var l = 1 - t; return this._w = l * a + t * this._w, this._x = l * n + t * this._x, this._y = l * i + t * this._y, this._z = l * r + t * this._z, this.normalize(), this._onChangeCallback(), this } var g = Math.sqrt(s), c = Math.atan2(g, o), u = Math.sin((1 - t) * c) / g, C = Math.sin(t * c) / g; return this._w = a * u + this._w * C, this._x = n * u + this._x * C, this._y = i * u + this._y * C, this._z = r * u + this._z * C, this._onChangeCallback(), this } }, { key: "slerpQuaternions", value: function (e, t, n) { return this.copy(e).slerp(t, n) } }, { key: "random", value: function () { var e = Math.random(), t = Math.sqrt(1 - e), n = Math.sqrt(e), i = 2 * Math.PI * Math.random(), r = 2 * Math.PI * Math.random(); return this.set(t * Math.cos(i), n * Math.sin(r), n * Math.cos(r), t * Math.sin(i)) } }, { key: "equals", value: function (e) { return e._x === this._x && e._y === this._y && e._z === this._z && e._w === this._w } }, { key: "fromArray", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; return this._x = e[t], this._y = e[t + 1], this._z = e[t + 2], this._w = e[t + 3], this._onChangeCallback(), this } }, { key: "toArray", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; return e[t] = this._x, e[t + 1] = this._y, e[t + 2] = this._z, e[t + 3] = this._w, e } }, { key: "fromBufferAttribute", value: function (e, t) { return this._x = e.getX(t), this._y = e.getY(t), this._z = e.getZ(t), this._w = e.getW(t), this } }, { key: "toJSON", value: function () { return this.toArray() } }, { key: "_onChange", value: function (e) { return this._onChangeCallback = e, this } }, { key: "_onChangeCallback", value: function () { } }, { key: Symbol.iterator, value: Gr().mark((function e() { return Gr().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, this._x; case 2: return e.next = 4, this._y; case 4: return e.next = 6, this._z; case 6: return e.next = 8, this._w; case 8: case "end": return e.stop() } }), e, this) })) }], [{ key: "slerpFlat", value: function (e, t, n, i, r, a, o) { var s = n[i + 0], l = n[i + 1], g = n[i + 2], c = n[i + 3], u = r[a + 0], C = r[a + 1], d = r[a + 2], I = r[a + 3]; if (0 === o) return e[t + 0] = s, e[t + 1] = l, e[t + 2] = g, void (e[t + 3] = c); if (1 === o) return e[t + 0] = u, e[t + 1] = C, e[t + 2] = d, void (e[t + 3] = I); if (c !== I || s !== u || l !== C || g !== d) { var h = 1 - o, A = s * u + l * C + g * d + c * I, p = A >= 0 ? 1 : -1, f = 1 - A * A; if (f > Number.EPSILON) { var m = Math.sqrt(f), v = Math.atan2(m, A * p); h = Math.sin(h * v) / m, o = Math.sin(o * v) / m } var b = o * p; if (s = s * h + u * b, l = l * h + C * b, g = g * h + d * b, c = c * h + I * b, h === 1 - o) { var y = 1 / Math.sqrt(s * s + l * l + g * g + c * c); s *= y, l *= y, g *= y, c *= y } } e[t] = s, e[t + 1] = l, e[t + 2] = g, e[t + 3] = c } }, { key: "multiplyQuaternionsFlat", value: function (e, t, n, i, r, a) { var o = n[i], s = n[i + 1], l = n[i + 2], g = n[i + 3], c = r[a], u = r[a + 1], C = r[a + 2], d = r[a + 3]; return e[t] = o * d + g * c + s * C - l * u, e[t + 1] = s * d + g * u + l * c - o * C, e[t + 2] = l * d + g * C + o * u - s * c, e[t + 3] = g * d - o * c - s * u - l * C, e } }]), t }(), Ql = function (e) { function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; cr(this, t), t.prototype.isVector3 = !0, this.x = e, this.y = n, this.z = i } return dr(t, [{ key: "set", value: function (e, t, n) { return void 0 === n && (n = this.z), this.x = e, this.y = t, this.z = n, this } }, { key: "setScalar", value: function (e) { return this.x = e, this.y = e, this.z = e, this } }, { key: "setX", value: function (e) { return this.x = e, this } }, { key: "setY", value: function (e) { return this.y = e, this } }, { key: "setZ", value: function (e) { return this.z = e, this } }, { key: "setComponent", value: function (e, t) { switch (e) { case 0: this.x = t; break; case 1: this.y = t; break; case 2: this.z = t; break; default: throw new Error("index is out of range: " + e) }return this } }, { key: "getComponent", value: function (e) { switch (e) { case 0: return this.x; case 1: return this.y; case 2: return this.z; default: throw new Error("index is out of range: " + e) } } }, { key: "clone", value: function () { return new this.constructor(this.x, this.y, this.z) } }, { key: "copy", value: function (e) { return this.x = e.x, this.y = e.y, this.z = e.z, this } }, { key: "add", value: function (e) { return this.x += e.x, this.y += e.y, this.z += e.z, this } }, { key: "addScalar", value: function (e) { return this.x += e, this.y += e, this.z += e, this } }, { key: "addVectors", value: function (e, t) { return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this } }, { key: "addScaledVector", value: function (e, t) { return this.x += e.x * t, this.y += e.y * t, this.z += e.z * t, this } }, { key: "sub", value: function (e) { return this.x -= e.x, this.y -= e.y, this.z -= e.z, this } }, { key: "subScalar", value: function (e) { return this.x -= e, this.y -= e, this.z -= e, this } }, { key: "subVectors", value: function (e, t) { return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this } }, { key: "multiply", value: function (e) { return this.x *= e.x, this.y *= e.y, this.z *= e.z, this } }, { key: "multiplyScalar", value: function (e) { return this.x *= e, this.y *= e, this.z *= e, this } }, { key: "multiplyVectors", value: function (e, t) { return this.x = e.x * t.x, this.y = e.y * t.y, this.z = e.z * t.z, this } }, { key: "applyEuler", value: function (e) { return this.applyQuaternion($l.setFromEuler(e)) } }, { key: "applyAxisAngle", value: function (e, t) { return this.applyQuaternion($l.setFromAxisAngle(e, t)) } }, { key: "applyMatrix3", value: function (e) { var t = this.x, n = this.y, i = this.z, r = e.elements; return this.x = r[0] * t + r[3] * n + r[6] * i, this.y = r[1] * t + r[4] * n + r[7] * i, this.z = r[2] * t + r[5] * n + r[8] * i, this } }, { key: "applyNormalMatrix", value: function (e) { return this.applyMatrix3(e).normalize() } }, { key: "applyMatrix4", value: function (e) { var t = this.x, n = this.y, i = this.z, r = e.elements, a = 1 / (r[3] * t + r[7] * n + r[11] * i + r[15]); return this.x = (r[0] * t + r[4] * n + r[8] * i + r[12]) * a, this.y = (r[1] * t + r[5] * n + r[9] * i + r[13]) * a, this.z = (r[2] * t + r[6] * n + r[10] * i + r[14]) * a, this } }, { key: "applyQuaternion", value: function (e) { var t = this.x, n = this.y, i = this.z, r = e.x, a = e.y, o = e.z, s = e.w, l = s * t + a * i - o * n, g = s * n + o * t - r * i, c = s * i + r * n - a * t, u = -r * t - a * n - o * i; return this.x = l * s + u * -r + g * -o - c * -a, this.y = g * s + u * -a + c * -r - l * -o, this.z = c * s + u * -o + l * -a - g * -r, this } }, { key: "project", value: function (e) { return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix) } }, { key: "unproject", value: function (e) { return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld) } }, { key: "transformDirection", value: function (e) { var t = this.x, n = this.y, i = this.z, r = e.elements; return this.x = r[0] * t + r[4] * n + r[8] * i, this.y = r[1] * t + r[5] * n + r[9] * i, this.z = r[2] * t + r[6] * n + r[10] * i, this.normalize() } }, { key: "divide", value: function (e) { return this.x /= e.x, this.y /= e.y, this.z /= e.z, this } }, { key: "divideScalar", value: function (e) { return this.multiplyScalar(1 / e) } }, { key: "min", value: function (e) { return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this.z = Math.min(this.z, e.z), this } }, { key: "max", value: function (e) { return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this.z = Math.max(this.z, e.z), this } }, { key: "clamp", value: function (e, t) { return this.x = Math.max(e.x, Math.min(t.x, this.x)), this.y = Math.max(e.y, Math.min(t.y, this.y)), this.z = Math.max(e.z, Math.min(t.z, this.z)), this } }, { key: "clampScalar", value: function (e, t) { return this.x = Math.max(e, Math.min(t, this.x)), this.y = Math.max(e, Math.min(t, this.y)), this.z = Math.max(e, Math.min(t, this.z)), this } }, { key: "clampLength", value: function (e, t) { var n = this.length(); return this.divideScalar(n || 1).multiplyScalar(Math.max(e, Math.min(t, n))) } }, { key: "floor", value: function () { return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this } }, { key: "ceil", value: function () { return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this } }, { key: "round", value: function () { return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this } }, { key: "roundToZero", value: function () { return this.x = Math.trunc(this.x), this.y = Math.trunc(this.y), this.z = Math.trunc(this.z), this } }, { key: "negate", value: function () { return this.x = -this.x, this.y = -this.y, this.z = -this.z, this } }, { key: "dot", value: function (e) { return this.x * e.x + this.y * e.y + this.z * e.z } }, { key: "lengthSq", value: function () { return this.x * this.x + this.y * this.y + this.z * this.z } }, { key: "length", value: function () { return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z) } }, { key: "manhattanLength", value: function () { return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) } }, { key: "normalize", value: function () { return this.divideScalar(this.length() || 1) } }, { key: "setLength", value: function (e) { return this.normalize().multiplyScalar(e) } }, { key: "lerp", value: function (e, t) { return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this } }, { key: "lerpVectors", value: function (e, t, n) { return this.x = e.x + (t.x - e.x) * n, this.y = e.y + (t.y - e.y) * n, this.z = e.z + (t.z - e.z) * n, this } }, { key: "cross", value: function (e) { return this.crossVectors(this, e) } }, { key: "crossVectors", value: function (e, t) { var n = e.x, i = e.y, r = e.z, a = t.x, o = t.y, s = t.z; return this.x = i * s - r * o, this.y = r * a - n * s, this.z = n * o - i * a, this } }, { key: "projectOnVector", value: function (e) { var t = e.lengthSq(); if (0 === t) return this.set(0, 0, 0); var n = e.dot(this) / t; return this.copy(e).multiplyScalar(n) } }, { key: "projectOnPlane", value: function (e) { return ql.copy(this).projectOnVector(e), this.sub(ql) } }, { key: "reflect", value: function (e) { return this.sub(ql.copy(e).multiplyScalar(2 * this.dot(e))) } }, { key: "angleTo", value: function (e) { var t = Math.sqrt(this.lengthSq() * e.lengthSq()); if (0 === t) return Math.PI / 2; var n = this.dot(e) / t; return Math.acos(gl(n, -1, 1)) } }, { key: "distanceTo", value: function (e) { return Math.sqrt(this.distanceToSquared(e)) } }, { key: "distanceToSquared", value: function (e) { var t = this.x - e.x, n = this.y - e.y, i = this.z - e.z; return t * t + n * n + i * i } }, { key: "manhattanDistanceTo", value: function (e) { return Math.abs(this.x - e.x) + Math.abs(this.y - e.y) + Math.abs(this.z - e.z) } }, { key: "setFromSpherical", value: function (e) { return this.setFromSphericalCoords(e.radius, e.phi, e.theta) } }, { key: "setFromSphericalCoords", value: function (e, t, n) { var i = Math.sin(t) * e; return this.x = i * Math.sin(n), this.y = Math.cos(t) * e, this.z = i * Math.cos(n), this } }, { key: "setFromCylindrical", value: function (e) { return this.setFromCylindricalCoords(e.radius, e.theta, e.y) } }, { key: "setFromCylindricalCoords", value: function (e, t, n) { return this.x = e * Math.sin(t), this.y = n, this.z = e * Math.cos(t), this } }, { key: "setFromMatrixPosition", value: function (e) { var t = e.elements; return this.x = t[12], this.y = t[13], this.z = t[14], this } }, { key: "setFromMatrixScale", value: function (e) { var t = this.setFromMatrixColumn(e, 0).length(), n = this.setFromMatrixColumn(e, 1).length(), i = this.setFromMatrixColumn(e, 2).length(); return this.x = t, this.y = n, this.z = i, this } }, { key: "setFromMatrixColumn", value: function (e, t) { return this.fromArray(e.elements, 4 * t) } }, { key: "setFromMatrix3Column", value: function (e, t) { return this.fromArray(e.elements, 3 * t) } }, { key: "setFromEuler", value: function (e) { return this.x = e._x, this.y = e._y, this.z = e._z, this } }, { key: "setFromColor", value: function (e) { return this.x = e.r, this.y = e.g, this.z = e.b, this } }, { key: "equals", value: function (e) { return e.x === this.x && e.y === this.y && e.z === this.z } }, { key: "fromArray", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; return this.x = e[t], this.y = e[t + 1], this.z = e[t + 2], this } }, { key: "toArray", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; return e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, e } }, { key: "fromBufferAttribute", value: function (e, t) { return this.x = e.getX(t), this.y = e.getY(t), this.z = e.getZ(t), this } }, { key: "random", value: function () { return this.x = Math.random(), this.y = Math.random(), this.z = Math.random(), this } }, { key: "randomDirection", value: function () { var e = 2 * (Math.random() - .5), t = Math.random() * Math.PI * 2, n = Math.sqrt(1 - Math.pow(e, 2)); return this.x = n * Math.cos(t), this.y = n * Math.sin(t), this.z = e, this } }, { key: Symbol.iterator, value: Gr().mark((function e() { return Gr().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, this.x; case 2: return e.next = 4, this.y; case 4: return e.next = 6, this.z; case 6: case "end": return e.stop() } }), e, this) })) }]), t }(), ql = new Ql, $l = new jl, eg = function () { function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new Ql(1 / 0, 1 / 0, 1 / 0), n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new Ql(-1 / 0, -1 / 0, -1 / 0); cr(this, e), this.isBox3 = !0, this.min = t, this.max = n } return dr(e, [{ key: "set", value: function (e, t) { return this.min.copy(e), this.max.copy(t), this } }, { key: "setFromArray", value: function (e) { this.makeEmpty(); for (var t = 0, n = e.length; t < n; t += 3)this.expandByPoint(ng.fromArray(e, t)); return this } }, { key: "setFromBufferAttribute", value: function (e) { this.makeEmpty(); for (var t = 0, n = e.count; t < n; t++)this.expandByPoint(ng.fromBufferAttribute(e, t)); return this } }, { key: "setFromPoints", value: function (e) { this.makeEmpty(); for (var t = 0, n = e.length; t < n; t++)this.expandByPoint(e[t]); return this } }, { key: "setFromCenterAndSize", value: function (e, t) { var n = ng.copy(t).multiplyScalar(.5); return this.min.copy(e).sub(n), this.max.copy(e).add(n), this } }, { key: "setFromObject", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; return this.makeEmpty(), this.expandByObject(e, t) } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }, { key: "copy", value: function (e) { return this.min.copy(e.min), this.max.copy(e.max), this } }, { key: "makeEmpty", value: function () { return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -1 / 0, this } }, { key: "isEmpty", value: function () { return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z } }, { key: "getCenter", value: function (e) { return this.isEmpty() ? e.set(0, 0, 0) : e.addVectors(this.min, this.max).multiplyScalar(.5) } }, { key: "getSize", value: function (e) { return this.isEmpty() ? e.set(0, 0, 0) : e.subVectors(this.max, this.min) } }, { key: "expandByPoint", value: function (e) { return this.min.min(e), this.max.max(e), this } }, { key: "expandByVector", value: function (e) { return this.min.sub(e), this.max.add(e), this } }, { key: "expandByScalar", value: function (e) { return this.min.addScalar(-e), this.max.addScalar(e), this } }, { key: "expandByObject", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; if (e.updateWorldMatrix(!1, !1), void 0 !== e.boundingBox) null === e.boundingBox && e.computeBoundingBox(), ig.copy(e.boundingBox), ig.applyMatrix4(e.matrixWorld), this.union(ig); else { var n = e.geometry; if (void 0 !== n) if (t && void 0 !== n.attributes && void 0 !== n.attributes.position) for (var i = n.attributes.position, r = 0, a = i.count; r < a; r++)ng.fromBufferAttribute(i, r).applyMatrix4(e.matrixWorld), this.expandByPoint(ng); else null === n.boundingBox && n.computeBoundingBox(), ig.copy(n.boundingBox), ig.applyMatrix4(e.matrixWorld), this.union(ig) } for (var o = e.children, s = 0, l = o.length; s < l; s++)this.expandByObject(o[s], t); return this } }, { key: "containsPoint", value: function (e) { return !(e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y || e.z < this.min.z || e.z > this.max.z) } }, { key: "containsBox", value: function (e) { return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y && this.min.z <= e.min.z && e.max.z <= this.max.z } }, { key: "getParameter", value: function (e, t) { return t.set((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y), (e.z - this.min.z) / (this.max.z - this.min.z)) } }, { key: "intersectsBox", value: function (e) { return !(e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y || e.max.z < this.min.z || e.min.z > this.max.z) } }, { key: "intersectsSphere", value: function (e) { return this.clampPoint(e.center, ng), ng.distanceToSquared(e.center) <= e.radius * e.radius } }, { key: "intersectsPlane", value: function (e) { var t, n; return e.normal.x > 0 ? (t = e.normal.x * this.min.x, n = e.normal.x * this.max.x) : (t = e.normal.x * this.max.x, n = e.normal.x * this.min.x), e.normal.y > 0 ? (t += e.normal.y * this.min.y, n += e.normal.y * this.max.y) : (t += e.normal.y * this.max.y, n += e.normal.y * this.min.y), e.normal.z > 0 ? (t += e.normal.z * this.min.z, n += e.normal.z * this.max.z) : (t += e.normal.z * this.max.z, n += e.normal.z * this.min.z), t <= -e.constant && n >= -e.constant } }, { key: "intersectsTriangle", value: function (e) { if (this.isEmpty()) return !1; this.getCenter(cg), ug.subVectors(this.max, cg), rg.subVectors(e.a, cg), ag.subVectors(e.b, cg), og.subVectors(e.c, cg), sg.subVectors(ag, rg), lg.subVectors(og, ag), gg.subVectors(rg, og); var t = [0, -sg.z, sg.y, 0, -lg.z, lg.y, 0, -gg.z, gg.y, sg.z, 0, -sg.x, lg.z, 0, -lg.x, gg.z, 0, -gg.x, -sg.y, sg.x, 0, -lg.y, lg.x, 0, -gg.y, gg.x, 0]; return !!Ig(t, rg, ag, og, ug) && (!!Ig(t = [1, 0, 0, 0, 1, 0, 0, 0, 1], rg, ag, og, ug) && (Cg.crossVectors(sg, lg), Ig(t = [Cg.x, Cg.y, Cg.z], rg, ag, og, ug))) } }, { key: "clampPoint", value: function (e, t) { return t.copy(e).clamp(this.min, this.max) } }, { key: "distanceToPoint", value: function (e) { return this.clampPoint(e, ng).distanceTo(e) } }, { key: "getBoundingSphere", value: function (e) { return this.isEmpty() ? e.makeEmpty() : (this.getCenter(e.center), e.radius = .5 * this.getSize(ng).length()), e } }, { key: "intersect", value: function (e) { return this.min.max(e.min), this.max.min(e.max), this.isEmpty() && this.makeEmpty(), this } }, { key: "union", value: function (e) { return this.min.min(e.min), this.max.max(e.max), this } }, { key: "applyMatrix4", value: function (e) { return this.isEmpty() || (tg[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(e), tg[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(e), tg[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(e), tg[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(e), tg[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(e), tg[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(e), tg[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(e), tg[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(e), this.setFromPoints(tg)), this } }, { key: "translate", value: function (e) { return this.min.add(e), this.max.add(e), this } }, { key: "equals", value: function (e) { return e.min.equals(this.min) && e.max.equals(this.max) } }]), e }(), tg = [new Ql, new Ql, new Ql, new Ql, new Ql, new Ql, new Ql, new Ql], ng = new Ql, ig = new eg, rg = new Ql, ag = new Ql, og = new Ql, sg = new Ql, lg = new Ql, gg = new Ql, cg = new Ql, ug = new Ql, Cg = new Ql, dg = new Ql; function Ig(e, t, n, i, r) { for (var a = 0, o = e.length - 3; a <= o; a += 3) { dg.fromArray(e, a); var s = r.x * Math.abs(dg.x) + r.y * Math.abs(dg.y) + r.z * Math.abs(dg.z), l = t.dot(dg), g = n.dot(dg), c = i.dot(dg); if (Math.max(-Math.max(l, g, c), Math.min(l, g, c)) > s) return !1 } return !0 } var hg = new eg, Ag = new Ql, pg = new Ql, fg = function () { function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new Ql, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : -1; cr(this, e), this.center = t, this.radius = n } return dr(e, [{ key: "set", value: function (e, t) { return this.center.copy(e), this.radius = t, this } }, { key: "setFromPoints", value: function (e, t) { var n = this.center; void 0 !== t ? n.copy(t) : hg.setFromPoints(e).getCenter(n); for (var i = 0, r = 0, a = e.length; r < a; r++)i = Math.max(i, n.distanceToSquared(e[r])); return this.radius = Math.sqrt(i), this } }, { key: "copy", value: function (e) { return this.center.copy(e.center), this.radius = e.radius, this } }, { key: "isEmpty", value: function () { return this.radius < 0 } }, { key: "makeEmpty", value: function () { return this.center.set(0, 0, 0), this.radius = -1, this } }, { key: "containsPoint", value: function (e) { return e.distanceToSquared(this.center) <= this.radius * this.radius } }, { key: "distanceToPoint", value: function (e) { return e.distanceTo(this.center) - this.radius } }, { key: "intersectsSphere", value: function (e) { var t = this.radius + e.radius; return e.center.distanceToSquared(this.center) <= t * t } }, { key: "intersectsBox", value: function (e) { return e.intersectsSphere(this) } }, { key: "intersectsPlane", value: function (e) { return Math.abs(e.distanceToPoint(this.center)) <= this.radius } }, { key: "clampPoint", value: function (e, t) { var n = this.center.distanceToSquared(e); return t.copy(e), n > this.radius * this.radius && (t.sub(this.center).normalize(), t.multiplyScalar(this.radius).add(this.center)), t } }, { key: "getBoundingBox", value: function (e) { return this.isEmpty() ? (e.makeEmpty(), e) : (e.set(this.center, this.center), e.expandByScalar(this.radius), e) } }, { key: "applyMatrix4", value: function (e) { return this.center.applyMatrix4(e), this.radius = this.radius * e.getMaxScaleOnAxis(), this } }, { key: "translate", value: function (e) { return this.center.add(e), this } }, { key: "expandByPoint", value: function (e) { if (this.isEmpty()) return this.center.copy(e), this.radius = 0, this; Ag.subVectors(e, this.center); var t = Ag.lengthSq(); if (t > this.radius * this.radius) { var n = Math.sqrt(t), i = .5 * (n - this.radius); this.center.addScaledVector(Ag, i / n), this.radius += i } return this } }, { key: "union", value: function (e) { return e.isEmpty() ? this : this.isEmpty() ? (this.copy(e), this) : (!0 === this.center.equals(e.center) ? this.radius = Math.max(this.radius, e.radius) : (pg.subVectors(e.center, this.center).setLength(e.radius), this.expandByPoint(Ag.copy(e.center).add(pg)), this.expandByPoint(Ag.copy(e.center).sub(pg))), this) } }, { key: "equals", value: function (e) { return e.center.equals(this.center) && e.radius === this.radius } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }]), e }(), mg = new Ql, vg = new Ql, bg = new Ql, yg = new Ql, Gg = new Ql, Bg = new Ql, Zg = new Ql, wg = function () { function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new Ql, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new Ql(0, 0, -1); cr(this, e), this.origin = t, this.direction = n } return dr(e, [{ key: "set", value: function (e, t) { return this.origin.copy(e), this.direction.copy(t), this } }, { key: "copy", value: function (e) { return this.origin.copy(e.origin), this.direction.copy(e.direction), this } }, { key: "at", value: function (e, t) { return t.copy(this.origin).addScaledVector(this.direction, e) } }, { key: "lookAt", value: function (e) { return this.direction.copy(e).sub(this.origin).normalize(), this } }, { key: "recast", value: function (e) { return this.origin.copy(this.at(e, mg)), this } }, { key: "closestPointToPoint", value: function (e, t) { t.subVectors(e, this.origin); var n = t.dot(this.direction); return n < 0 ? t.copy(this.origin) : t.copy(this.origin).addScaledVector(this.direction, n) } }, { key: "distanceToPoint", value: function (e) { return Math.sqrt(this.distanceSqToPoint(e)) } }, { key: "distanceSqToPoint", value: function (e) { var t = mg.subVectors(e, this.origin).dot(this.direction); return t < 0 ? this.origin.distanceToSquared(e) : (mg.copy(this.origin).addScaledVector(this.direction, t), mg.distanceToSquared(e)) } }, { key: "distanceSqToSegment", value: function (e, t, n, i) { vg.copy(e).add(t).multiplyScalar(.5), bg.copy(t).sub(e).normalize(), yg.copy(this.origin).sub(vg); var r, a, o, s, l = .5 * e.distanceTo(t), g = -this.direction.dot(bg), c = yg.dot(this.direction), u = -yg.dot(bg), C = yg.lengthSq(), d = Math.abs(1 - g * g); if (d > 0) if (a = g * c - u, s = l * d, (r = g * u - c) >= 0) if (a >= -s) if (a <= s) { var I = 1 / d; o = (r *= I) * (r + g * (a *= I) + 2 * c) + a * (g * r + a + 2 * u) + C } else a = l, o = -(r = Math.max(0, -(g * a + c))) * r + a * (a + 2 * u) + C; else a = -l, o = -(r = Math.max(0, -(g * a + c))) * r + a * (a + 2 * u) + C; else a <= -s ? o = -(r = Math.max(0, -(-g * l + c))) * r + (a = r > 0 ? -l : Math.min(Math.max(-l, -u), l)) * (a + 2 * u) + C : a <= s ? (r = 0, o = (a = Math.min(Math.max(-l, -u), l)) * (a + 2 * u) + C) : o = -(r = Math.max(0, -(g * l + c))) * r + (a = r > 0 ? l : Math.min(Math.max(-l, -u), l)) * (a + 2 * u) + C; else a = g > 0 ? -l : l, o = -(r = Math.max(0, -(g * a + c))) * r + a * (a + 2 * u) + C; return n && n.copy(this.origin).addScaledVector(this.direction, r), i && i.copy(vg).addScaledVector(bg, a), o } }, { key: "intersectSphere", value: function (e, t) { mg.subVectors(e.center, this.origin); var n = mg.dot(this.direction), i = mg.dot(mg) - n * n, r = e.radius * e.radius; if (i > r) return null; var a = Math.sqrt(r - i), o = n - a, s = n + a; return s < 0 ? null : o < 0 ? this.at(s, t) : this.at(o, t) } }, { key: "intersectsSphere", value: function (e) { return this.distanceSqToPoint(e.center) <= e.radius * e.radius } }, { key: "distanceToPlane", value: function (e) { var t = e.normal.dot(this.direction); if (0 === t) return 0 === e.distanceToPoint(this.origin) ? 0 : null; var n = -(this.origin.dot(e.normal) + e.constant) / t; return n >= 0 ? n : null } }, { key: "intersectPlane", value: function (e, t) { var n = this.distanceToPlane(e); return null === n ? null : this.at(n, t) } }, { key: "intersectsPlane", value: function (e) { var t = e.distanceToPoint(this.origin); return 0 === t || e.normal.dot(this.direction) * t < 0 } }, { key: "intersectBox", value: function (e, t) { var n, i, r, a, o, s, l = 1 / this.direction.x, g = 1 / this.direction.y, c = 1 / this.direction.z, u = this.origin; return l >= 0 ? (n = (e.min.x - u.x) * l, i = (e.max.x - u.x) * l) : (n = (e.max.x - u.x) * l, i = (e.min.x - u.x) * l), g >= 0 ? (r = (e.min.y - u.y) * g, a = (e.max.y - u.y) * g) : (r = (e.max.y - u.y) * g, a = (e.min.y - u.y) * g), n > a || r > i ? null : ((r > n || isNaN(n)) && (n = r), (a < i || isNaN(i)) && (i = a), c >= 0 ? (o = (e.min.z - u.z) * c, s = (e.max.z - u.z) * c) : (o = (e.max.z - u.z) * c, s = (e.min.z - u.z) * c), n > s || o > i ? null : ((o > n || n !== n) && (n = o), (s < i || i !== i) && (i = s), i < 0 ? null : this.at(n >= 0 ? n : i, t))) } }, { key: "intersectsBox", value: function (e) { return null !== this.intersectBox(e, mg) } }, { key: "intersectTriangle", value: function (e, t, n, i, r) { Gg.subVectors(t, e), Bg.subVectors(n, e), Zg.crossVectors(Gg, Bg); var a, o = this.direction.dot(Zg); if (o > 0) { if (i) return null; a = 1 } else { if (!(o < 0)) return null; a = -1, o = -o } yg.subVectors(this.origin, e); var s = a * this.direction.dot(Bg.crossVectors(yg, Bg)); if (s < 0) return null; var l = a * this.direction.dot(Gg.cross(yg)); if (l < 0) return null; if (s + l > o) return null; var g = -a * yg.dot(Zg); return g < 0 ? null : this.at(g / o, r) } }, { key: "applyMatrix4", value: function (e) { return this.origin.applyMatrix4(e), this.direction.transformDirection(e), this } }, { key: "equals", value: function (e) { return e.origin.equals(this.origin) && e.direction.equals(this.direction) } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }]), e }(), Sg = function () { function e(t, n, i, r, a, o, s, l, g, c, u, C, d, I, h, A) { cr(this, e), e.prototype.isMatrix4 = !0, this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], void 0 !== t && this.set(t, n, i, r, a, o, s, l, g, c, u, C, d, I, h, A) } return dr(e, [{ key: "set", value: function (e, t, n, i, r, a, o, s, l, g, c, u, C, d, I, h) { var A = this.elements; return A[0] = e, A[4] = t, A[8] = n, A[12] = i, A[1] = r, A[5] = a, A[9] = o, A[13] = s, A[2] = l, A[6] = g, A[10] = c, A[14] = u, A[3] = C, A[7] = d, A[11] = I, A[15] = h, this } }, { key: "identity", value: function () { return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this } }, { key: "clone", value: function () { return (new e).fromArray(this.elements) } }, { key: "copy", value: function (e) { var t = this.elements, n = e.elements; return t[0] = n[0], t[1] = n[1], t[2] = n[2], t[3] = n[3], t[4] = n[4], t[5] = n[5], t[6] = n[6], t[7] = n[7], t[8] = n[8], t[9] = n[9], t[10] = n[10], t[11] = n[11], t[12] = n[12], t[13] = n[13], t[14] = n[14], t[15] = n[15], this } }, { key: "copyPosition", value: function (e) { var t = this.elements, n = e.elements; return t[12] = n[12], t[13] = n[13], t[14] = n[14], this } }, { key: "setFromMatrix3", value: function (e) { var t = e.elements; return this.set(t[0], t[3], t[6], 0, t[1], t[4], t[7], 0, t[2], t[5], t[8], 0, 0, 0, 0, 1), this } }, { key: "extractBasis", value: function (e, t, n) { return e.setFromMatrixColumn(this, 0), t.setFromMatrixColumn(this, 1), n.setFromMatrixColumn(this, 2), this } }, { key: "makeBasis", value: function (e, t, n) { return this.set(e.x, t.x, n.x, 0, e.y, t.y, n.y, 0, e.z, t.z, n.z, 0, 0, 0, 0, 1), this } }, { key: "extractRotation", value: function (e) { var t = this.elements, n = e.elements, i = 1 / Rg.setFromMatrixColumn(e, 0).length(), r = 1 / Rg.setFromMatrixColumn(e, 1).length(), a = 1 / Rg.setFromMatrixColumn(e, 2).length(); return t[0] = n[0] * i, t[1] = n[1] * i, t[2] = n[2] * i, t[3] = 0, t[4] = n[4] * r, t[5] = n[5] * r, t[6] = n[6] * r, t[7] = 0, t[8] = n[8] * a, t[9] = n[9] * a, t[10] = n[10] * a, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this } }, { key: "makeRotationFromEuler", value: function (e) { var t = this.elements, n = e.x, i = e.y, r = e.z, a = Math.cos(n), o = Math.sin(n), s = Math.cos(i), l = Math.sin(i), g = Math.cos(r), c = Math.sin(r); if ("XYZ" === e.order) { var u = a * g, C = a * c, d = o * g, I = o * c; t[0] = s * g, t[4] = -s * c, t[8] = l, t[1] = C + d * l, t[5] = u - I * l, t[9] = -o * s, t[2] = I - u * l, t[6] = d + C * l, t[10] = a * s } else if ("YXZ" === e.order) { var h = s * g, A = s * c, p = l * g, f = l * c; t[0] = h + f * o, t[4] = p * o - A, t[8] = a * l, t[1] = a * c, t[5] = a * g, t[9] = -o, t[2] = A * o - p, t[6] = f + h * o, t[10] = a * s } else if ("ZXY" === e.order) { var m = s * g, v = s * c, b = l * g, y = l * c; t[0] = m - y * o, t[4] = -a * c, t[8] = b + v * o, t[1] = v + b * o, t[5] = a * g, t[9] = y - m * o, t[2] = -a * l, t[6] = o, t[10] = a * s } else if ("ZYX" === e.order) { var G = a * g, B = a * c, Z = o * g, w = o * c; t[0] = s * g, t[4] = Z * l - B, t[8] = G * l + w, t[1] = s * c, t[5] = w * l + G, t[9] = B * l - Z, t[2] = -l, t[6] = o * s, t[10] = a * s } else if ("YZX" === e.order) { var S = a * s, R = a * l, x = o * s, W = o * l; t[0] = s * g, t[4] = W - S * c, t[8] = x * c + R, t[1] = c, t[5] = a * g, t[9] = -o * g, t[2] = -l * g, t[6] = R * c + x, t[10] = S - W * c } else if ("XZY" === e.order) { var V = a * s, k = a * l, H = o * s, M = o * l; t[0] = s * g, t[4] = -c, t[8] = l * g, t[1] = V * c + M, t[5] = a * g, t[9] = k * c - H, t[2] = H * c - k, t[6] = o * g, t[10] = M * c + V } return t[3] = 0, t[7] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this } }, { key: "makeRotationFromQuaternion", value: function (e) { return this.compose(Wg, e, Vg) } }, { key: "lookAt", value: function (e, t, n) { var i = this.elements; return Mg.subVectors(e, t), 0 === Mg.lengthSq() && (Mg.z = 1), Mg.normalize(), kg.crossVectors(n, Mg), 0 === kg.lengthSq() && (1 === Math.abs(n.z) ? Mg.x += 1e-4 : Mg.z += 1e-4, Mg.normalize(), kg.crossVectors(n, Mg)), kg.normalize(), Hg.crossVectors(Mg, kg), i[0] = kg.x, i[4] = Hg.x, i[8] = Mg.x, i[1] = kg.y, i[5] = Hg.y, i[9] = Mg.y, i[2] = kg.z, i[6] = Hg.z, i[10] = Mg.z, this } }, { key: "multiply", value: function (e) { return this.multiplyMatrices(this, e) } }, { key: "premultiply", value: function (e) { return this.multiplyMatrices(e, this) } }, { key: "multiplyMatrices", value: function (e, t) { var n = e.elements, i = t.elements, r = this.elements, a = n[0], o = n[4], s = n[8], l = n[12], g = n[1], c = n[5], u = n[9], C = n[13], d = n[2], I = n[6], h = n[10], A = n[14], p = n[3], f = n[7], m = n[11], v = n[15], b = i[0], y = i[4], G = i[8], B = i[12], Z = i[1], w = i[5], S = i[9], R = i[13], x = i[2], W = i[6], V = i[10], k = i[14], H = i[3], M = i[7], F = i[11], N = i[15]; return r[0] = a * b + o * Z + s * x + l * H, r[4] = a * y + o * w + s * W + l * M, r[8] = a * G + o * S + s * V + l * F, r[12] = a * B + o * R + s * k + l * N, r[1] = g * b + c * Z + u * x + C * H, r[5] = g * y + c * w + u * W + C * M, r[9] = g * G + c * S + u * V + C * F, r[13] = g * B + c * R + u * k + C * N, r[2] = d * b + I * Z + h * x + A * H, r[6] = d * y + I * w + h * W + A * M, r[10] = d * G + I * S + h * V + A * F, r[14] = d * B + I * R + h * k + A * N, r[3] = p * b + f * Z + m * x + v * H, r[7] = p * y + f * w + m * W + v * M, r[11] = p * G + f * S + m * V + v * F, r[15] = p * B + f * R + m * k + v * N, this } }, { key: "multiplyScalar", value: function (e) { var t = this.elements; return t[0] *= e, t[4] *= e, t[8] *= e, t[12] *= e, t[1] *= e, t[5] *= e, t[9] *= e, t[13] *= e, t[2] *= e, t[6] *= e, t[10] *= e, t[14] *= e, t[3] *= e, t[7] *= e, t[11] *= e, t[15] *= e, this } }, { key: "determinant", value: function () { var e = this.elements, t = e[0], n = e[4], i = e[8], r = e[12], a = e[1], o = e[5], s = e[9], l = e[13], g = e[2], c = e[6], u = e[10], C = e[14]; return e[3] * (+r * s * c - i * l * c - r * o * u + n * l * u + i * o * C - n * s * C) + e[7] * (+t * s * C - t * l * u + r * a * u - i * a * C + i * l * g - r * s * g) + e[11] * (+t * l * c - t * o * C - r * a * c + n * a * C + r * o * g - n * l * g) + e[15] * (-i * o * g - t * s * c + t * o * u + i * a * c - n * a * u + n * s * g) } }, { key: "transpose", value: function () { var e, t = this.elements; return e = t[1], t[1] = t[4], t[4] = e, e = t[2], t[2] = t[8], t[8] = e, e = t[6], t[6] = t[9], t[9] = e, e = t[3], t[3] = t[12], t[12] = e, e = t[7], t[7] = t[13], t[13] = e, e = t[11], t[11] = t[14], t[14] = e, this } }, { key: "setPosition", value: function (e, t, n) { var i = this.elements; return e.isVector3 ? (i[12] = e.x, i[13] = e.y, i[14] = e.z) : (i[12] = e, i[13] = t, i[14] = n), this } }, { key: "invert", value: function () { var e = this.elements, t = e[0], n = e[1], i = e[2], r = e[3], a = e[4], o = e[5], s = e[6], l = e[7], g = e[8], c = e[9], u = e[10], C = e[11], d = e[12], I = e[13], h = e[14], A = e[15], p = c * h * l - I * u * l + I * s * C - o * h * C - c * s * A + o * u * A, f = d * u * l - g * h * l - d * s * C + a * h * C + g * s * A - a * u * A, m = g * I * l - d * c * l + d * o * C - a * I * C - g * o * A + a * c * A, v = d * c * s - g * I * s - d * o * u + a * I * u + g * o * h - a * c * h, b = t * p + n * f + i * m + r * v; if (0 === b) return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0); var y = 1 / b; return e[0] = p * y, e[1] = (I * u * r - c * h * r - I * i * C + n * h * C + c * i * A - n * u * A) * y, e[2] = (o * h * r - I * s * r + I * i * l - n * h * l - o * i * A + n * s * A) * y, e[3] = (c * s * r - o * u * r - c * i * l + n * u * l + o * i * C - n * s * C) * y, e[4] = f * y, e[5] = (g * h * r - d * u * r + d * i * C - t * h * C - g * i * A + t * u * A) * y, e[6] = (d * s * r - a * h * r - d * i * l + t * h * l + a * i * A - t * s * A) * y, e[7] = (a * u * r - g * s * r + g * i * l - t * u * l - a * i * C + t * s * C) * y, e[8] = m * y, e[9] = (d * c * r - g * I * r - d * n * C + t * I * C + g * n * A - t * c * A) * y, e[10] = (a * I * r - d * o * r + d * n * l - t * I * l - a * n * A + t * o * A) * y, e[11] = (g * o * r - a * c * r - g * n * l + t * c * l + a * n * C - t * o * C) * y, e[12] = v * y, e[13] = (g * I * i - d * c * i + d * n * u - t * I * u - g * n * h + t * c * h) * y, e[14] = (d * o * i - a * I * i - d * n * s + t * I * s + a * n * h - t * o * h) * y, e[15] = (a * c * i - g * o * i + g * n * s - t * c * s - a * n * u + t * o * u) * y, this } }, { key: "scale", value: function (e) { var t = this.elements, n = e.x, i = e.y, r = e.z; return t[0] *= n, t[4] *= i, t[8] *= r, t[1] *= n, t[5] *= i, t[9] *= r, t[2] *= n, t[6] *= i, t[10] *= r, t[3] *= n, t[7] *= i, t[11] *= r, this } }, { key: "getMaxScaleOnAxis", value: function () { var e = this.elements, t = e[0] * e[0] + e[1] * e[1] + e[2] * e[2], n = e[4] * e[4] + e[5] * e[5] + e[6] * e[6], i = e[8] * e[8] + e[9] * e[9] + e[10] * e[10]; return Math.sqrt(Math.max(t, n, i)) } }, { key: "makeTranslation", value: function (e, t, n) { return e.isVector3 ? this.set(1, 0, 0, e.x, 0, 1, 0, e.y, 0, 0, 1, e.z, 0, 0, 0, 1) : this.set(1, 0, 0, e, 0, 1, 0, t, 0, 0, 1, n, 0, 0, 0, 1), this } }, { key: "makeRotationX", value: function (e) { var t = Math.cos(e), n = Math.sin(e); return this.set(1, 0, 0, 0, 0, t, -n, 0, 0, n, t, 0, 0, 0, 0, 1), this } }, { key: "makeRotationY", value: function (e) { var t = Math.cos(e), n = Math.sin(e); return this.set(t, 0, n, 0, 0, 1, 0, 0, -n, 0, t, 0, 0, 0, 0, 1), this } }, { key: "makeRotationZ", value: function (e) { var t = Math.cos(e), n = Math.sin(e); return this.set(t, -n, 0, 0, n, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this } }, { key: "makeRotationAxis", value: function (e, t) { var n = Math.cos(t), i = Math.sin(t), r = 1 - n, a = e.x, o = e.y, s = e.z, l = r * a, g = r * o; return this.set(l * a + n, l * o - i * s, l * s + i * o, 0, l * o + i * s, g * o + n, g * s - i * a, 0, l * s - i * o, g * s + i * a, r * s * s + n, 0, 0, 0, 0, 1), this } }, { key: "makeScale", value: function (e, t, n) { return this.set(e, 0, 0, 0, 0, t, 0, 0, 0, 0, n, 0, 0, 0, 0, 1), this } }, { key: "makeShear", value: function (e, t, n, i, r, a) { return this.set(1, n, r, 0, e, 1, a, 0, t, i, 1, 0, 0, 0, 0, 1), this } }, { key: "compose", value: function (e, t, n) { var i = this.elements, r = t._x, a = t._y, o = t._z, s = t._w, l = r + r, g = a + a, c = o + o, u = r * l, C = r * g, d = r * c, I = a * g, h = a * c, A = o * c, p = s * l, f = s * g, m = s * c, v = n.x, b = n.y, y = n.z; return i[0] = (1 - (I + A)) * v, i[1] = (C + m) * v, i[2] = (d - f) * v, i[3] = 0, i[4] = (C - m) * b, i[5] = (1 - (u + A)) * b, i[6] = (h + p) * b, i[7] = 0, i[8] = (d + f) * y, i[9] = (h - p) * y, i[10] = (1 - (u + I)) * y, i[11] = 0, i[12] = e.x, i[13] = e.y, i[14] = e.z, i[15] = 1, this } }, { key: "decompose", value: function (e, t, n) { var i = this.elements, r = Rg.set(i[0], i[1], i[2]).length(), a = Rg.set(i[4], i[5], i[6]).length(), o = Rg.set(i[8], i[9], i[10]).length(); this.determinant() < 0 && (r = -r), e.x = i[12], e.y = i[13], e.z = i[14], xg.copy(this); var s = 1 / r, l = 1 / a, g = 1 / o; return xg.elements[0] *= s, xg.elements[1] *= s, xg.elements[2] *= s, xg.elements[4] *= l, xg.elements[5] *= l, xg.elements[6] *= l, xg.elements[8] *= g, xg.elements[9] *= g, xg.elements[10] *= g, t.setFromRotationMatrix(xg), n.x = r, n.y = a, n.z = o, this } }, { key: "makePerspective", value: function (e, t, n, i, r, a) { var o, s, l = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : tl, g = this.elements, c = 2 * r / (t - e), u = 2 * r / (n - i), C = (t + e) / (t - e), d = (n + i) / (n - i); if (l === tl) o = -(a + r) / (a - r), s = -2 * a * r / (a - r); else { if (l !== nl) throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: " + l); o = -a / (a - r), s = -a * r / (a - r) } return g[0] = c, g[4] = 0, g[8] = C, g[12] = 0, g[1] = 0, g[5] = u, g[9] = d, g[13] = 0, g[2] = 0, g[6] = 0, g[10] = o, g[14] = s, g[3] = 0, g[7] = 0, g[11] = -1, g[15] = 0, this } }, { key: "makeOrthographic", value: function (e, t, n, i, r, a) { var o, s, l = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : tl, g = this.elements, c = 1 / (t - e), u = 1 / (n - i), C = 1 / (a - r), d = (t + e) * c, I = (n + i) * u; if (l === tl) o = (a + r) * C, s = -2 * C; else { if (l !== nl) throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: " + l); o = r * C, s = -1 * C } return g[0] = 2 * c, g[4] = 0, g[8] = 0, g[12] = -d, g[1] = 0, g[5] = 2 * u, g[9] = 0, g[13] = -I, g[2] = 0, g[6] = 0, g[10] = s, g[14] = -o, g[3] = 0, g[7] = 0, g[11] = 0, g[15] = 1, this } }, { key: "equals", value: function (e) { for (var t = this.elements, n = e.elements, i = 0; i < 16; i++)if (t[i] !== n[i]) return !1; return !0 } }, { key: "fromArray", value: function (e) { for (var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = 0; n < 16; n++)this.elements[n] = e[n + t]; return this } }, { key: "toArray", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = this.elements; return e[t] = n[0], e[t + 1] = n[1], e[t + 2] = n[2], e[t + 3] = n[3], e[t + 4] = n[4], e[t + 5] = n[5], e[t + 6] = n[6], e[t + 7] = n[7], e[t + 8] = n[8], e[t + 9] = n[9], e[t + 10] = n[10], e[t + 11] = n[11], e[t + 12] = n[12], e[t + 13] = n[13], e[t + 14] = n[14], e[t + 15] = n[15], e } }]), e }(), Rg = new Ql, xg = new Sg, Wg = new Ql(0, 0, 0), Vg = new Ql(1, 1, 1), kg = new Ql, Hg = new Ql, Mg = new Ql, Fg = new Sg, Ng = new jl, Xg = function (e) { function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : t.DEFAULT_ORDER; cr(this, t), this.isEuler = !0, this._x = e, this._y = n, this._z = i, this._order = r } return dr(t, [{ key: "x", get: function () { return this._x }, set: function (e) { this._x = e, this._onChangeCallback() } }, { key: "y", get: function () { return this._y }, set: function (e) { this._y = e, this._onChangeCallback() } }, { key: "z", get: function () { return this._z }, set: function (e) { this._z = e, this._onChangeCallback() } }, { key: "order", get: function () { return this._order }, set: function (e) { this._order = e, this._onChangeCallback() } }, { key: "set", value: function (e, t, n) { var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : this._order; return this._x = e, this._y = t, this._z = n, this._order = i, this._onChangeCallback(), this } }, { key: "clone", value: function () { return new this.constructor(this._x, this._y, this._z, this._order) } }, { key: "copy", value: function (e) { return this._x = e._x, this._y = e._y, this._z = e._z, this._order = e._order, this._onChangeCallback(), this } }, { key: "setFromRotationMatrix", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this._order, n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], i = e.elements, r = i[0], a = i[4], o = i[8], s = i[1], l = i[5], g = i[9], c = i[2], u = i[6], C = i[10]; switch (t) { case "XYZ": this._y = Math.asin(gl(o, -1, 1)), Math.abs(o) < .9999999 ? (this._x = Math.atan2(-g, C), this._z = Math.atan2(-a, r)) : (this._x = Math.atan2(u, l), this._z = 0); break; case "YXZ": this._x = Math.asin(-gl(g, -1, 1)), Math.abs(g) < .9999999 ? (this._y = Math.atan2(o, C), this._z = Math.atan2(s, l)) : (this._y = Math.atan2(-c, r), this._z = 0); break; case "ZXY": this._x = Math.asin(gl(u, -1, 1)), Math.abs(u) < .9999999 ? (this._y = Math.atan2(-c, C), this._z = Math.atan2(-a, l)) : (this._y = 0, this._z = Math.atan2(s, r)); break; case "ZYX": this._y = Math.asin(-gl(c, -1, 1)), Math.abs(c) < .9999999 ? (this._x = Math.atan2(u, C), this._z = Math.atan2(s, r)) : (this._x = 0, this._z = Math.atan2(-a, l)); break; case "YZX": this._z = Math.asin(gl(s, -1, 1)), Math.abs(s) < .9999999 ? (this._x = Math.atan2(-g, l), this._y = Math.atan2(-c, r)) : (this._x = 0, this._y = Math.atan2(o, C)); break; case "XZY": this._z = Math.asin(-gl(a, -1, 1)), Math.abs(a) < .9999999 ? (this._x = Math.atan2(u, l), this._y = Math.atan2(o, r)) : (this._x = Math.atan2(-g, C), this._y = 0); break; default: console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: " + t) }return this._order = t, !0 === n && this._onChangeCallback(), this } }, { key: "setFromQuaternion", value: function (e, t, n) { return Fg.makeRotationFromQuaternion(e), this.setFromRotationMatrix(Fg, t, n) } }, { key: "setFromVector3", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this._order; return this.set(e.x, e.y, e.z, t) } }, { key: "reorder", value: function (e) { return Ng.setFromEuler(this), this.setFromQuaternion(Ng, e) } }, { key: "equals", value: function (e) { return e._x === this._x && e._y === this._y && e._z === this._z && e._order === this._order } }, { key: "fromArray", value: function (e) { return this._x = e[0], this._y = e[1], this._z = e[2], void 0 !== e[3] && (this._order = e[3]), this._onChangeCallback(), this } }, { key: "toArray", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; return e[t] = this._x, e[t + 1] = this._y, e[t + 2] = this._z, e[t + 3] = this._order, e } }, { key: "_onChange", value: function (e) { return this._onChangeCallback = e, this } }, { key: "_onChangeCallback", value: function () { } }, { key: Symbol.iterator, value: Gr().mark((function e() { return Gr().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, this._x; case 2: return e.next = 4, this._y; case 4: return e.next = 6, this._z; case 6: return e.next = 8, this._order; case 8: case "end": return e.stop() } }), e, this) })) }]), t }(); Xg.DEFAULT_ORDER = "XYZ"; var Yg = function () { function e() { cr(this, e), this.mask = 1 } return dr(e, [{ key: "set", value: function (e) { this.mask = (1 << e | 0) >>> 0 } }, { key: "enable", value: function (e) { this.mask |= 1 << e | 0 } }, { key: "enableAll", value: function () { this.mask = -1 } }, { key: "toggle", value: function (e) { this.mask ^= 1 << e | 0 } }, { key: "disable", value: function (e) { this.mask &= ~(1 << e | 0) } }, { key: "disableAll", value: function () { this.mask = 0 } }, { key: "test", value: function (e) { return 0 !== (this.mask & e.mask) } }, { key: "isEnabled", value: function (e) { return 0 !== (this.mask & (1 << e | 0)) } }]), e }(), Kg = 0, Lg = new Ql, zg = new jl, Eg = new Sg, Tg = new Ql, _g = new Ql, Ug = new Ql, Dg = new jl, Pg = new Ql(1, 0, 0), Jg = new Ql(0, 1, 0), Og = new Ql(0, 0, 1), jg = { type: "added" }, Qg = { type: "removed" }, qg = function (e) { Ir(n, e); var t = fr(n); function n() { var e; cr(this, n), (e = t.call(this)).isObject3D = !0, Object.defineProperty(y(e), "id", { value: Kg++ }), e.uuid = ll(), e.name = "", e.type = "Object3D", e.parent = null, e.children = [], e.up = n.DEFAULT_UP.clone(); var i = new Ql, r = new Xg, a = new jl, o = new Ql(1, 1, 1); return r._onChange((function () { a.setFromEuler(r, !1) })), a._onChange((function () { r.setFromQuaternion(a, void 0, !1) })), Object.defineProperties(y(e), { position: { configurable: !0, enumerable: !0, value: i }, rotation: { configurable: !0, enumerable: !0, value: r }, quaternion: { configurable: !0, enumerable: !0, value: a }, scale: { configurable: !0, enumerable: !0, value: o }, modelViewMatrix: { value: new Sg }, normalMatrix: { value: new ml } }), e.matrix = new Sg, e.matrixWorld = new Sg, e.matrixAutoUpdate = n.DEFAULT_MATRIX_AUTO_UPDATE, e.matrixWorldNeedsUpdate = !1, e.matrixWorldAutoUpdate = n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE, e.layers = new Yg, e.visible = !0, e.castShadow = !1, e.receiveShadow = !1, e.frustumCulled = !0, e.renderOrder = 0, e.animations = [], e.userData = {}, e } return dr(n, [{ key: "onBeforeRender", value: function () { } }, { key: "onAfterRender", value: function () { } }, { key: "applyMatrix4", value: function (e) { this.matrixAutoUpdate && this.updateMatrix(), this.matrix.premultiply(e), this.matrix.decompose(this.position, this.quaternion, this.scale) } }, { key: "applyQuaternion", value: function (e) { return this.quaternion.premultiply(e), this } }, { key: "setRotationFromAxisAngle", value: function (e, t) { this.quaternion.setFromAxisAngle(e, t) } }, { key: "setRotationFromEuler", value: function (e) { this.quaternion.setFromEuler(e, !0) } }, { key: "setRotationFromMatrix", value: function (e) { this.quaternion.setFromRotationMatrix(e) } }, { key: "setRotationFromQuaternion", value: function (e) { this.quaternion.copy(e) } }, { key: "rotateOnAxis", value: function (e, t) { return zg.setFromAxisAngle(e, t), this.quaternion.multiply(zg), this } }, { key: "rotateOnWorldAxis", value: function (e, t) { return zg.setFromAxisAngle(e, t), this.quaternion.premultiply(zg), this } }, { key: "rotateX", value: function (e) { return this.rotateOnAxis(Pg, e) } }, { key: "rotateY", value: function (e) { return this.rotateOnAxis(Jg, e) } }, { key: "rotateZ", value: function (e) { return this.rotateOnAxis(Og, e) } }, { key: "translateOnAxis", value: function (e, t) { return Lg.copy(e).applyQuaternion(this.quaternion), this.position.add(Lg.multiplyScalar(t)), this } }, { key: "translateX", value: function (e) { return this.translateOnAxis(Pg, e) } }, { key: "translateY", value: function (e) { return this.translateOnAxis(Jg, e) } }, { key: "translateZ", value: function (e) { return this.translateOnAxis(Og, e) } }, { key: "localToWorld", value: function (e) { return this.updateWorldMatrix(!0, !1), e.applyMatrix4(this.matrixWorld) } }, { key: "worldToLocal", value: function (e) { return this.updateWorldMatrix(!0, !1), e.applyMatrix4(Eg.copy(this.matrixWorld).invert()) } }, { key: "lookAt", value: function (e, t, n) { e.isVector3 ? Tg.copy(e) : Tg.set(e, t, n); var i = this.parent; this.updateWorldMatrix(!0, !1), _g.setFromMatrixPosition(this.matrixWorld), this.isCamera || this.isLight ? Eg.lookAt(_g, Tg, this.up) : Eg.lookAt(Tg, _g, this.up), this.quaternion.setFromRotationMatrix(Eg), i && (Eg.extractRotation(i.matrixWorld), zg.setFromRotationMatrix(Eg), this.quaternion.premultiply(zg.invert())) } }, { key: "add", value: function (e) { if (arguments.length > 1) { for (var t = 0; t < arguments.length; t++)this.add(arguments[t]); return this } return e === this ? (console.error("THREE.Object3D.add: object can't be added as a child of itself.", e), this) : (e && e.isObject3D ? (null !== e.parent && e.parent.remove(e), e.parent = this, this.children.push(e), e.dispatchEvent(jg)) : console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", e), this) } }, { key: "remove", value: function (e) { if (arguments.length > 1) { for (var t = 0; t < arguments.length; t++)this.remove(arguments[t]); return this } var n = this.children.indexOf(e); return -1 !== n && (e.parent = null, this.children.splice(n, 1), e.dispatchEvent(Qg)), this } }, { key: "removeFromParent", value: function () { var e = this.parent; return null !== e && e.remove(this), this } }, { key: "clear", value: function () { return this.remove.apply(this, (0, v.Z)(this.children)) } }, { key: "attach", value: function (e) { return this.updateWorldMatrix(!0, !1), Eg.copy(this.matrixWorld).invert(), null !== e.parent && (e.parent.updateWorldMatrix(!0, !1), Eg.multiply(e.parent.matrixWorld)), e.applyMatrix4(Eg), this.add(e), e.updateWorldMatrix(!1, !0), this } }, { key: "getObjectById", value: function (e) { return this.getObjectByProperty("id", e) } }, { key: "getObjectByName", value: function (e) { return this.getObjectByProperty("name", e) } }, { key: "getObjectByProperty", value: function (e, t) { if (this[e] === t) return this; for (var n = 0, i = this.children.length; n < i; n++) { var r = this.children[n].getObjectByProperty(e, t); if (void 0 !== r) return r } } }, { key: "getObjectsByProperty", value: function (e, t) { var n = []; this[e] === t && n.push(this); for (var i = 0, r = this.children.length; i < r; i++) { var a = this.children[i].getObjectsByProperty(e, t); a.length > 0 && (n = n.concat(a)) } return n } }, { key: "getWorldPosition", value: function (e) { return this.updateWorldMatrix(!0, !1), e.setFromMatrixPosition(this.matrixWorld) } }, { key: "getWorldQuaternion", value: function (e) { return this.updateWorldMatrix(!0, !1), this.matrixWorld.decompose(_g, e, Ug), e } }, { key: "getWorldScale", value: function (e) { return this.updateWorldMatrix(!0, !1), this.matrixWorld.decompose(_g, Dg, e), e } }, { key: "getWorldDirection", value: function (e) { this.updateWorldMatrix(!0, !1); var t = this.matrixWorld.elements; return e.set(t[8], t[9], t[10]).normalize() } }, { key: "raycast", value: function () { } }, { key: "traverse", value: function (e) { e(this); for (var t = this.children, n = 0, i = t.length; n < i; n++)t[n].traverse(e) } }, { key: "traverseVisible", value: function (e) { if (!1 !== this.visible) { e(this); for (var t = this.children, n = 0, i = t.length; n < i; n++)t[n].traverseVisible(e) } } }, { key: "traverseAncestors", value: function (e) { var t = this.parent; null !== t && (e(t), t.traverseAncestors(e)) } }, { key: "updateMatrix", value: function () { this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = !0 } }, { key: "updateMatrixWorld", value: function (e) { this.matrixAutoUpdate && this.updateMatrix(), (this.matrixWorldNeedsUpdate || e) && (null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorldNeedsUpdate = !1, e = !0); for (var t = this.children, n = 0, i = t.length; n < i; n++) { var r = t[n]; !0 !== r.matrixWorldAutoUpdate && !0 !== e || r.updateMatrixWorld(e) } } }, { key: "updateWorldMatrix", value: function (e, t) { var n = this.parent; if (!0 === e && null !== n && !0 === n.matrixWorldAutoUpdate && n.updateWorldMatrix(!0, !1), this.matrixAutoUpdate && this.updateMatrix(), null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), !0 === t) for (var i = this.children, r = 0, a = i.length; r < a; r++) { var o = i[r]; !0 === o.matrixWorldAutoUpdate && o.updateWorldMatrix(!1, !0) } } }, { key: "toJSON", value: function (e) { var t = void 0 === e || "string" === typeof e, n = {}; t && (e = { geometries: {}, materials: {}, textures: {}, images: {}, shapes: {}, skeletons: {}, animations: {}, nodes: {} }, n.metadata = { version: 4.6, type: "Object", generator: "Object3D.toJSON" }); var i = {}; function r(t, n) { return void 0 === t[n.uuid] && (t[n.uuid] = n.toJSON(e)), n.uuid } if (i.uuid = this.uuid, i.type = this.type, "" !== this.name && (i.name = this.name), !0 === this.castShadow && (i.castShadow = !0), !0 === this.receiveShadow && (i.receiveShadow = !0), !1 === this.visible && (i.visible = !1), !1 === this.frustumCulled && (i.frustumCulled = !1), 0 !== this.renderOrder && (i.renderOrder = this.renderOrder), Object.keys(this.userData).length > 0 && (i.userData = this.userData), i.layers = this.layers.mask, i.matrix = this.matrix.toArray(), i.up = this.up.toArray(), !1 === this.matrixAutoUpdate && (i.matrixAutoUpdate = !1), this.isInstancedMesh && (i.type = "InstancedMesh", i.count = this.count, i.instanceMatrix = this.instanceMatrix.toJSON(), null !== this.instanceColor && (i.instanceColor = this.instanceColor.toJSON())), this.isScene) this.background && (this.background.isColor ? i.background = this.background.toJSON() : this.background.isTexture && (i.background = this.background.toJSON(e).uuid)), this.environment && this.environment.isTexture && !0 !== this.environment.isRenderTargetTexture && (i.environment = this.environment.toJSON(e).uuid); else if (this.isMesh || this.isLine || this.isPoints) { i.geometry = r(e.geometries, this.geometry); var a = this.geometry.parameters; if (void 0 !== a && void 0 !== a.shapes) { var o = a.shapes; if (Array.isArray(o)) for (var s = 0, l = o.length; s < l; s++) { var g = o[s]; r(e.shapes, g) } else r(e.shapes, o) } } if (this.isSkinnedMesh && (i.bindMode = this.bindMode, i.bindMatrix = this.bindMatrix.toArray(), void 0 !== this.skeleton && (r(e.skeletons, this.skeleton), i.skeleton = this.skeleton.uuid)), void 0 !== this.material) if (Array.isArray(this.material)) { for (var c = [], u = 0, C = this.material.length; u < C; u++)c.push(r(e.materials, this.material[u])); i.material = c } else i.material = r(e.materials, this.material); if (this.children.length > 0) { i.children = []; for (var d = 0; d < this.children.length; d++)i.children.push(this.children[d].toJSON(e).object) } if (this.animations.length > 0) { i.animations = []; for (var I = 0; I < this.animations.length; I++) { var h = this.animations[I]; i.animations.push(r(e.animations, h)) } } if (t) { var A = B(e.geometries), p = B(e.materials), f = B(e.textures), m = B(e.images), v = B(e.shapes), b = B(e.skeletons), y = B(e.animations), G = B(e.nodes); A.length > 0 && (n.geometries = A), p.length > 0 && (n.materials = p), f.length > 0 && (n.textures = f), m.length > 0 && (n.images = m), v.length > 0 && (n.shapes = v), b.length > 0 && (n.skeletons = b), y.length > 0 && (n.animations = y), G.length > 0 && (n.nodes = G) } return n.object = i, n; function B(e) { var t = []; for (var n in e) { var i = e[n]; delete i.metadata, t.push(i) } return t } } }, { key: "clone", value: function (e) { return (new this.constructor).copy(this, e) } }, { key: "copy", value: function (e) { var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1]; if (this.name = e.name, this.up.copy(e.up), this.position.copy(e.position), this.rotation.order = e.rotation.order, this.quaternion.copy(e.quaternion), this.scale.copy(e.scale), this.matrix.copy(e.matrix), this.matrixWorld.copy(e.matrixWorld), this.matrixAutoUpdate = e.matrixAutoUpdate, this.matrixWorldNeedsUpdate = e.matrixWorldNeedsUpdate, this.matrixWorldAutoUpdate = e.matrixWorldAutoUpdate, this.layers.mask = e.layers.mask, this.visible = e.visible, this.castShadow = e.castShadow, this.receiveShadow = e.receiveShadow, this.frustumCulled = e.frustumCulled, this.renderOrder = e.renderOrder, this.animations = e.animations.slice(), this.userData = JSON.parse(JSON.stringify(e.userData)), !0 === t) for (var n = 0; n < e.children.length; n++) { var i = e.children[n]; this.add(i.clone()) } return this } }]), n }(il); qg.DEFAULT_UP = new Ql(0, 1, 0), qg.DEFAULT_MATRIX_AUTO_UPDATE = !0, qg.DEFAULT_MATRIX_WORLD_AUTO_UPDATE = !0; var $g = new Ql, ec = new Ql, tc = new Ql, nc = new Ql, ic = new Ql, rc = new Ql, ac = new Ql, oc = new Ql, sc = new Ql, lc = new Ql, gc = !1, cc = function () { function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new Ql, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new Ql, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : new Ql; cr(this, e), this.a = t, this.b = n, this.c = i } return dr(e, [{ key: "set", value: function (e, t, n) { return this.a.copy(e), this.b.copy(t), this.c.copy(n), this } }, { key: "setFromPointsAndIndices", value: function (e, t, n, i) { return this.a.copy(e[t]), this.b.copy(e[n]), this.c.copy(e[i]), this } }, { key: "setFromAttributeAndIndices", value: function (e, t, n, i) { return this.a.fromBufferAttribute(e, t), this.b.fromBufferAttribute(e, n), this.c.fromBufferAttribute(e, i), this } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }, { key: "copy", value: function (e) { return this.a.copy(e.a), this.b.copy(e.b), this.c.copy(e.c), this } }, { key: "getArea", value: function () { return $g.subVectors(this.c, this.b), ec.subVectors(this.a, this.b), .5 * $g.cross(ec).length() } }, { key: "getMidpoint", value: function (e) { return e.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3) } }, { key: "getNormal", value: function (t) { return e.getNormal(this.a, this.b, this.c, t) } }, { key: "getPlane", value: function (e) { return e.setFromCoplanarPoints(this.a, this.b, this.c) } }, { key: "getBarycoord", value: function (t, n) { return e.getBarycoord(t, this.a, this.b, this.c, n) } }, { key: "getUV", value: function (t, n, i, r, a) { return !1 === gc && (console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."), gc = !0), e.getInterpolation(t, this.a, this.b, this.c, n, i, r, a) } }, { key: "getInterpolation", value: function (t, n, i, r, a) { return e.getInterpolation(t, this.a, this.b, this.c, n, i, r, a) } }, { key: "containsPoint", value: function (t) { return e.containsPoint(t, this.a, this.b, this.c) } }, { key: "isFrontFacing", value: function (t) { return e.isFrontFacing(this.a, this.b, this.c, t) } }, { key: "intersectsBox", value: function (e) { return e.intersectsTriangle(this) } }, { key: "closestPointToPoint", value: function (e, t) { var n, i, r = this.a, a = this.b, o = this.c; ic.subVectors(a, r), rc.subVectors(o, r), oc.subVectors(e, r); var s = ic.dot(oc), l = rc.dot(oc); if (s <= 0 && l <= 0) return t.copy(r); sc.subVectors(e, a); var g = ic.dot(sc), c = rc.dot(sc); if (g >= 0 && c <= g) return t.copy(a); var u = s * c - g * l; if (u <= 0 && s >= 0 && g <= 0) return n = s / (s - g), t.copy(r).addScaledVector(ic, n); lc.subVectors(e, o); var C = ic.dot(lc), d = rc.dot(lc); if (d >= 0 && C <= d) return t.copy(o); var I = C * l - s * d; if (I <= 0 && l >= 0 && d <= 0) return i = l / (l - d), t.copy(r).addScaledVector(rc, i); var h = g * d - C * c; if (h <= 0 && c - g >= 0 && C - d >= 0) return ac.subVectors(o, a), i = (c - g) / (c - g + (C - d)), t.copy(a).addScaledVector(ac, i); var A = 1 / (h + I + u); return n = I * A, i = u * A, t.copy(r).addScaledVector(ic, n).addScaledVector(rc, i) } }, { key: "equals", value: function (e) { return e.a.equals(this.a) && e.b.equals(this.b) && e.c.equals(this.c) } }], [{ key: "getNormal", value: function (e, t, n, i) { i.subVectors(n, t), $g.subVectors(e, t), i.cross($g); var r = i.lengthSq(); return r > 0 ? i.multiplyScalar(1 / Math.sqrt(r)) : i.set(0, 0, 0) } }, { key: "getBarycoord", value: function (e, t, n, i, r) { $g.subVectors(i, t), ec.subVectors(n, t), tc.subVectors(e, t); var a = $g.dot($g), o = $g.dot(ec), s = $g.dot(tc), l = ec.dot(ec), g = ec.dot(tc), c = a * l - o * o; if (0 === c) return r.set(-2, -1, -1); var u = 1 / c, C = (l * s - o * g) * u, d = (a * g - o * s) * u; return r.set(1 - C - d, d, C) } }, { key: "containsPoint", value: function (e, t, n, i) { return this.getBarycoord(e, t, n, i, nc), nc.x >= 0 && nc.y >= 0 && nc.x + nc.y <= 1 } }, { key: "getUV", value: function (e, t, n, i, r, a, o, s) { return !1 === gc && (console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."), gc = !0), this.getInterpolation(e, t, n, i, r, a, o, s) } }, { key: "getInterpolation", value: function (e, t, n, i, r, a, o, s) { return this.getBarycoord(e, t, n, i, nc), s.setScalar(0), s.addScaledVector(r, nc.x), s.addScaledVector(a, nc.y), s.addScaledVector(o, nc.z), s } }, { key: "isFrontFacing", value: function (e, t, n, i) { return $g.subVectors(n, t), ec.subVectors(e, t), $g.cross(ec).dot(i) < 0 } }]), e }(), uc = 0, Cc = function (e) { Ir(n, e); var t = fr(n); function n() { var e; return cr(this, n), (e = t.call(this)).isMaterial = !0, Object.defineProperty(y(e), "id", { value: uc++ }), e.uuid = ll(), e.name = "", e.type = "Material", e.blending = Lr, e.side = Fr, e.vertexColors = !1, e.opacity = 1, e.transparent = !1, e.alphaHash = !1, e.blendSrc = ea, e.blendDst = ta, e.blendEquation = Ur, e.blendSrcAlpha = null, e.blendDstAlpha = null, e.blendEquationAlpha = null, e.depthFunc = ca, e.depthTest = !0, e.depthWrite = !0, e.stencilWriteMask = 255, e.stencilFunc = Ms, e.stencilRef = 0, e.stencilFuncMask = 255, e.stencilFail = vs, e.stencilZFail = vs, e.stencilZPass = vs, e.stencilWrite = !1, e.clippingPlanes = null, e.clipIntersection = !1, e.clipShadows = !1, e.shadowSide = null, e.colorWrite = !0, e.precision = null, e.polygonOffset = !1, e.polygonOffsetFactor = 0, e.polygonOffsetUnits = 0, e.dithering = !1, e.alphaToCoverage = !1, e.premultipliedAlpha = !1, e.forceSinglePass = !1, e.visible = !0, e.toneMapped = !0, e.userData = {}, e.version = 0, e._alphaTest = 0, e } return dr(n, [{ key: "alphaTest", get: function () { return this._alphaTest }, set: function (e) { this._alphaTest > 0 !== e > 0 && this.version++, this._alphaTest = e } }, { key: "onBuild", value: function () { } }, { key: "onBeforeRender", value: function () { } }, { key: "onBeforeCompile", value: function () { } }, { key: "customProgramCacheKey", value: function () { return this.onBeforeCompile.toString() } }, { key: "setValues", value: function (e) { if (void 0 !== e) for (var t in e) { var n = e[t]; if (void 0 !== n) { var i = this[t]; void 0 !== i ? i && i.isColor ? i.set(n) : i && i.isVector3 && n && n.isVector3 ? i.copy(n) : this[t] = n : console.warn("THREE.Material: '".concat(t, "' is not a property of THREE.").concat(this.type, ".")) } else console.warn("THREE.Material: parameter '".concat(t, "' has value of undefined.")) } } }, { key: "toJSON", value: function (e) { var t = void 0 === e || "string" === typeof e; t && (e = { textures: {}, images: {} }); var n = { metadata: { version: 4.6, type: "Material", generator: "Material.toJSON" } }; function i(e) { var t = []; for (var n in e) { var i = e[n]; delete i.metadata, t.push(i) } return t } if (n.uuid = this.uuid, n.type = this.type, "" !== this.name && (n.name = this.name), this.color && this.color.isColor && (n.color = this.color.getHex()), void 0 !== this.roughness && (n.roughness = this.roughness), void 0 !== this.metalness && (n.metalness = this.metalness), void 0 !== this.sheen && (n.sheen = this.sheen), this.sheenColor && this.sheenColor.isColor && (n.sheenColor = this.sheenColor.getHex()), void 0 !== this.sheenRoughness && (n.sheenRoughness = this.sheenRoughness), this.emissive && this.emissive.isColor && (n.emissive = this.emissive.getHex()), this.emissiveIntensity && 1 !== this.emissiveIntensity && (n.emissiveIntensity = this.emissiveIntensity), this.specular && this.specular.isColor && (n.specular = this.specular.getHex()), void 0 !== this.specularIntensity && (n.specularIntensity = this.specularIntensity), this.specularColor && this.specularColor.isColor && (n.specularColor = this.specularColor.getHex()), void 0 !== this.shininess && (n.shininess = this.shininess), void 0 !== this.clearcoat && (n.clearcoat = this.clearcoat), void 0 !== this.clearcoatRoughness && (n.clearcoatRoughness = this.clearcoatRoughness), this.clearcoatMap && this.clearcoatMap.isTexture && (n.clearcoatMap = this.clearcoatMap.toJSON(e).uuid), this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture && (n.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON(e).uuid), this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture && (n.clearcoatNormalMap = this.clearcoatNormalMap.toJSON(e).uuid, n.clearcoatNormalScale = this.clearcoatNormalScale.toArray()), void 0 !== this.iridescence && (n.iridescence = this.iridescence), void 0 !== this.iridescenceIOR && (n.iridescenceIOR = this.iridescenceIOR), void 0 !== this.iridescenceThicknessRange && (n.iridescenceThicknessRange = this.iridescenceThicknessRange), this.iridescenceMap && this.iridescenceMap.isTexture && (n.iridescenceMap = this.iridescenceMap.toJSON(e).uuid), this.iridescenceThicknessMap && this.iridescenceThicknessMap.isTexture && (n.iridescenceThicknessMap = this.iridescenceThicknessMap.toJSON(e).uuid), void 0 !== this.anisotropy && (n.anisotropy = this.anisotropy), void 0 !== this.anisotropyRotation && (n.anisotropyRotation = this.anisotropyRotation), this.anisotropyMap && this.anisotropyMap.isTexture && (n.anisotropyMap = this.anisotropyMap.toJSON(e).uuid), this.map && this.map.isTexture && (n.map = this.map.toJSON(e).uuid), this.matcap && this.matcap.isTexture && (n.matcap = this.matcap.toJSON(e).uuid), this.alphaMap && this.alphaMap.isTexture && (n.alphaMap = this.alphaMap.toJSON(e).uuid), this.lightMap && this.lightMap.isTexture && (n.lightMap = this.lightMap.toJSON(e).uuid, n.lightMapIntensity = this.lightMapIntensity), this.aoMap && this.aoMap.isTexture && (n.aoMap = this.aoMap.toJSON(e).uuid, n.aoMapIntensity = this.aoMapIntensity), this.bumpMap && this.bumpMap.isTexture && (n.bumpMap = this.bumpMap.toJSON(e).uuid, n.bumpScale = this.bumpScale), this.normalMap && this.normalMap.isTexture && (n.normalMap = this.normalMap.toJSON(e).uuid, n.normalMapType = this.normalMapType, n.normalScale = this.normalScale.toArray()), this.displacementMap && this.displacementMap.isTexture && (n.displacementMap = this.displacementMap.toJSON(e).uuid, n.displacementScale = this.displacementScale, n.displacementBias = this.displacementBias), this.roughnessMap && this.roughnessMap.isTexture && (n.roughnessMap = this.roughnessMap.toJSON(e).uuid), this.metalnessMap && this.metalnessMap.isTexture && (n.metalnessMap = this.metalnessMap.toJSON(e).uuid), this.emissiveMap && this.emissiveMap.isTexture && (n.emissiveMap = this.emissiveMap.toJSON(e).uuid), this.specularMap && this.specularMap.isTexture && (n.specularMap = this.specularMap.toJSON(e).uuid), this.specularIntensityMap && this.specularIntensityMap.isTexture && (n.specularIntensityMap = this.specularIntensityMap.toJSON(e).uuid), this.specularColorMap && this.specularColorMap.isTexture && (n.specularColorMap = this.specularColorMap.toJSON(e).uuid), this.envMap && this.envMap.isTexture && (n.envMap = this.envMap.toJSON(e).uuid, void 0 !== this.combine && (n.combine = this.combine)), void 0 !== this.envMapIntensity && (n.envMapIntensity = this.envMapIntensity), void 0 !== this.reflectivity && (n.reflectivity = this.reflectivity), void 0 !== this.refractionRatio && (n.refractionRatio = this.refractionRatio), this.gradientMap && this.gradientMap.isTexture && (n.gradientMap = this.gradientMap.toJSON(e).uuid), void 0 !== this.transmission && (n.transmission = this.transmission), this.transmissionMap && this.transmissionMap.isTexture && (n.transmissionMap = this.transmissionMap.toJSON(e).uuid), void 0 !== this.thickness && (n.thickness = this.thickness), this.thicknessMap && this.thicknessMap.isTexture && (n.thicknessMap = this.thicknessMap.toJSON(e).uuid), void 0 !== this.attenuationDistance && this.attenuationDistance !== 1 / 0 && (n.attenuationDistance = this.attenuationDistance), void 0 !== this.attenuationColor && (n.attenuationColor = this.attenuationColor.getHex()), void 0 !== this.size && (n.size = this.size), null !== this.shadowSide && (n.shadowSide = this.shadowSide), void 0 !== this.sizeAttenuation && (n.sizeAttenuation = this.sizeAttenuation), this.blending !== Lr && (n.blending = this.blending), this.side !== Fr && (n.side = this.side), !0 === this.vertexColors && (n.vertexColors = !0), this.opacity < 1 && (n.opacity = this.opacity), !0 === this.transparent && (n.transparent = !0), n.depthFunc = this.depthFunc, n.depthTest = this.depthTest, n.depthWrite = this.depthWrite, n.colorWrite = this.colorWrite, n.stencilWrite = this.stencilWrite, n.stencilWriteMask = this.stencilWriteMask, n.stencilFunc = this.stencilFunc, n.stencilRef = this.stencilRef, n.stencilFuncMask = this.stencilFuncMask, n.stencilFail = this.stencilFail, n.stencilZFail = this.stencilZFail, n.stencilZPass = this.stencilZPass, void 0 !== this.rotation && 0 !== this.rotation && (n.rotation = this.rotation), !0 === this.polygonOffset && (n.polygonOffset = !0), 0 !== this.polygonOffsetFactor && (n.polygonOffsetFactor = this.polygonOffsetFactor), 0 !== this.polygonOffsetUnits && (n.polygonOffsetUnits = this.polygonOffsetUnits), void 0 !== this.linewidth && 1 !== this.linewidth && (n.linewidth = this.linewidth), void 0 !== this.dashSize && (n.dashSize = this.dashSize), void 0 !== this.gapSize && (n.gapSize = this.gapSize), void 0 !== this.scale && (n.scale = this.scale), !0 === this.dithering && (n.dithering = !0), this.alphaTest > 0 && (n.alphaTest = this.alphaTest), !0 === this.alphaHash && (n.alphaHash = !0), !0 === this.alphaToCoverage && (n.alphaToCoverage = !0), !0 === this.premultipliedAlpha && (n.premultipliedAlpha = !0), !0 === this.forceSinglePass && (n.forceSinglePass = !0), !0 === this.wireframe && (n.wireframe = !0), this.wireframeLinewidth > 1 && (n.wireframeLinewidth = this.wireframeLinewidth), "round" !== this.wireframeLinecap && (n.wireframeLinecap = this.wireframeLinecap), "round" !== this.wireframeLinejoin && (n.wireframeLinejoin = this.wireframeLinejoin), !0 === this.flatShading && (n.flatShading = !0), !1 === this.visible && (n.visible = !1), !1 === this.toneMapped && (n.toneMapped = !1), !1 === this.fog && (n.fog = !1), Object.keys(this.userData).length > 0 && (n.userData = this.userData), t) { var r = i(e.textures), a = i(e.images); r.length > 0 && (n.textures = r), a.length > 0 && (n.images = a) } return n } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }, { key: "copy", value: function (e) { this.name = e.name, this.blending = e.blending, this.side = e.side, this.vertexColors = e.vertexColors, this.opacity = e.opacity, this.transparent = e.transparent, this.blendSrc = e.blendSrc, this.blendDst = e.blendDst, this.blendEquation = e.blendEquation, this.blendSrcAlpha = e.blendSrcAlpha, this.blendDstAlpha = e.blendDstAlpha, this.blendEquationAlpha = e.blendEquationAlpha, this.depthFunc = e.depthFunc, this.depthTest = e.depthTest, this.depthWrite = e.depthWrite, this.stencilWriteMask = e.stencilWriteMask, this.stencilFunc = e.stencilFunc, this.stencilRef = e.stencilRef, this.stencilFuncMask = e.stencilFuncMask, this.stencilFail = e.stencilFail, this.stencilZFail = e.stencilZFail, this.stencilZPass = e.stencilZPass, this.stencilWrite = e.stencilWrite; var t = e.clippingPlanes, n = null; if (null !== t) { var i = t.length; n = new Array(i); for (var r = 0; r !== i; ++r)n[r] = t[r].clone() } return this.clippingPlanes = n, this.clipIntersection = e.clipIntersection, this.clipShadows = e.clipShadows, this.shadowSide = e.shadowSide, this.colorWrite = e.colorWrite, this.precision = e.precision, this.polygonOffset = e.polygonOffset, this.polygonOffsetFactor = e.polygonOffsetFactor, this.polygonOffsetUnits = e.polygonOffsetUnits, this.dithering = e.dithering, this.alphaTest = e.alphaTest, this.alphaHash = e.alphaHash, this.alphaToCoverage = e.alphaToCoverage, this.premultipliedAlpha = e.premultipliedAlpha, this.forceSinglePass = e.forceSinglePass, this.visible = e.visible, this.toneMapped = e.toneMapped, this.userData = JSON.parse(JSON.stringify(e.userData)), this } }, { key: "dispose", value: function () { this.dispatchEvent({ type: "dispose" }) } }, { key: "needsUpdate", set: function (e) { !0 === e && this.version++ } }]), n }(il), dc = { aliceblue: 15792383, antiquewhite: 16444375, aqua: 65535, aquamarine: 8388564, azure: 15794175, beige: 16119260, bisque: 16770244, black: 0, blanchedalmond: 16772045, blue: 255, blueviolet: 9055202, brown: 10824234, burlywood: 14596231, cadetblue: 6266528, chartreuse: 8388352, chocolate: 13789470, coral: 16744272, cornflowerblue: 6591981, cornsilk: 16775388, crimson: 14423100, cyan: 65535, darkblue: 139, darkcyan: 35723, darkgoldenrod: 12092939, darkgray: 11119017, darkgreen: 25600, darkgrey: 11119017, darkkhaki: 12433259, darkmagenta: 9109643, darkolivegreen: 5597999, darkorange: 16747520, darkorchid: 10040012, darkred: 9109504, darksalmon: 15308410, darkseagreen: 9419919, darkslateblue: 4734347, darkslategray: 3100495, darkslategrey: 3100495, darkturquoise: 52945, darkviolet: 9699539, deeppink: 16716947, deepskyblue: 49151, dimgray: 6908265, dimgrey: 6908265, dodgerblue: 2003199, firebrick: 11674146, floralwhite: 16775920, forestgreen: 2263842, fuchsia: 16711935, gainsboro: 14474460, ghostwhite: 16316671, gold: 16766720, goldenrod: 14329120, gray: 8421504, green: 32768, greenyellow: 11403055, grey: 8421504, honeydew: 15794160, hotpink: 16738740, indianred: 13458524, indigo: 4915330, ivory: 16777200, khaki: 15787660, lavender: 15132410, lavenderblush: 16773365, lawngreen: 8190976, lemonchiffon: 16775885, lightblue: 11393254, lightcoral: 15761536, lightcyan: 14745599, lightgoldenrodyellow: 16448210, lightgray: 13882323, lightgreen: 9498256, lightgrey: 13882323, lightpink: 16758465, lightsalmon: 16752762, lightseagreen: 2142890, lightskyblue: 8900346, lightslategray: 7833753, lightslategrey: 7833753, lightsteelblue: 11584734, lightyellow: 16777184, lime: 65280, limegreen: 3329330, linen: 16445670, magenta: 16711935, maroon: 8388608, mediumaquamarine: 6737322, mediumblue: 205, mediumorchid: 12211667, mediumpurple: 9662683, mediumseagreen: 3978097, mediumslateblue: 8087790, mediumspringgreen: 64154, mediumturquoise: 4772300, mediumvioletred: 13047173, midnightblue: 1644912, mintcream: 16121850, mistyrose: 16770273, moccasin: 16770229, navajowhite: 16768685, navy: 128, oldlace: 16643558, olive: 8421376, olivedrab: 7048739, orange: 16753920, orangered: 16729344, orchid: 14315734, palegoldenrod: 15657130, palegreen: 10025880, paleturquoise: 11529966, palevioletred: 14381203, papayawhip: 16773077, peachpuff: 16767673, peru: 13468991, pink: 16761035, plum: 14524637, powderblue: 11591910, purple: 8388736, rebeccapurple: 6697881, red: 16711680, rosybrown: 12357519, royalblue: 4286945, saddlebrown: 9127187, salmon: 16416882, sandybrown: 16032864, seagreen: 3050327, seashell: 16774638, sienna: 10506797, silver: 12632256, skyblue: 8900331, slateblue: 6970061, slategray: 7372944, slategrey: 7372944, snow: 16775930, springgreen: 65407, steelblue: 4620980, tan: 13808780, teal: 32896, thistle: 14204888, tomato: 16737095, turquoise: 4251856, violet: 15631086, wheat: 16113331, white: 16777215, whitesmoke: 16119285, yellow: 16776960, yellowgreen: 10145074 }, Ic = { h: 0, s: 0, l: 0 }, hc = { h: 0, s: 0, l: 0 }; function Ac(e, t, n) { return n < 0 && (n += 1), n > 1 && (n -= 1), n < 1 / 6 ? e + 6 * (t - e) * n : n < .5 ? t : n < 2 / 3 ? e + 6 * (t - e) * (2 / 3 - n) : e } var pc = function (e) { function t(e, n, i) { return cr(this, t), this.isColor = !0, this.r = 1, this.g = 1, this.b = 1, this.set(e, n, i) } return dr(t, [{ key: "set", value: function (e, t, n) { if (void 0 === t && void 0 === n) { var i = e; i && i.isColor ? this.copy(i) : "number" === typeof i ? this.setHex(i) : "string" === typeof i && this.setStyle(i) } else this.setRGB(e, t, n); return this } }, { key: "setScalar", value: function (e) { return this.r = e, this.g = e, this.b = e, this } }, { key: "setHex", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : us; return e = Math.floor(e), this.r = (e >> 16 & 255) / 255, this.g = (e >> 8 & 255) / 255, this.b = (255 & e) / 255, Hl.toWorkingColorSpace(this, t), this } }, { key: "setRGB", value: function (e, t, n) { var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : Hl.workingColorSpace; return this.r = e, this.g = t, this.b = n, Hl.toWorkingColorSpace(this, i), this } }, { key: "setHSL", value: function (e, t, n) { var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : Hl.workingColorSpace; if (e = cl(e, 1), t = gl(t, 0, 1), n = gl(n, 0, 1), 0 === t) this.r = this.g = this.b = n; else { var r = n <= .5 ? n * (1 + t) : n + t - n * t, a = 2 * n - r; this.r = Ac(a, r, e + 1 / 3), this.g = Ac(a, r, e), this.b = Ac(a, r, e - 1 / 3) } return Hl.toWorkingColorSpace(this, i), this } }, { key: "setStyle", value: function (e) { var t, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : us; function i(t) { void 0 !== t && parseFloat(t) < 1 && console.warn("THREE.Color: Alpha component of " + e + " will be ignored.") } if (t = /^(\w+)\(([^\)]*)\)/.exec(e)) { var r, a = t[1], o = t[2]; switch (a) { case "rgb": case "rgba": if (r = /^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)) return i(r[4]), this.setRGB(Math.min(255, parseInt(r[1], 10)) / 255, Math.min(255, parseInt(r[2], 10)) / 255, Math.min(255, parseInt(r[3], 10)) / 255, n); if (r = /^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)) return i(r[4]), this.setRGB(Math.min(100, parseInt(r[1], 10)) / 100, Math.min(100, parseInt(r[2], 10)) / 100, Math.min(100, parseInt(r[3], 10)) / 100, n); break; case "hsl": case "hsla": if (r = /^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)) return i(r[4]), this.setHSL(parseFloat(r[1]) / 360, parseFloat(r[2]) / 100, parseFloat(r[3]) / 100, n); break; default: console.warn("THREE.Color: Unknown color model " + e) } } else if (t = /^\#([A-Fa-f\d]+)$/.exec(e)) { var s = t[1], l = s.length; if (3 === l) return this.setRGB(parseInt(s.charAt(0), 16) / 15, parseInt(s.charAt(1), 16) / 15, parseInt(s.charAt(2), 16) / 15, n); if (6 === l) return this.setHex(parseInt(s, 16), n); console.warn("THREE.Color: Invalid hex color " + e) } else if (e && e.length > 0) return this.setColorName(e, n); return this } }, { key: "setColorName", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : us, n = dc[e.toLowerCase()]; return void 0 !== n ? this.setHex(n, t) : console.warn("THREE.Color: Unknown color " + e), this } }, { key: "clone", value: function () { return new this.constructor(this.r, this.g, this.b) } }, { key: "copy", value: function (e) { return this.r = e.r, this.g = e.g, this.b = e.b, this } }, { key: "copySRGBToLinear", value: function (e) { return this.r = Ml(e.r), this.g = Ml(e.g), this.b = Ml(e.b), this } }, { key: "copyLinearToSRGB", value: function (e) { return this.r = Fl(e.r), this.g = Fl(e.g), this.b = Fl(e.b), this } }, { key: "convertSRGBToLinear", value: function () { return this.copySRGBToLinear(this), this } }, { key: "convertLinearToSRGB", value: function () { return this.copyLinearToSRGB(this), this } }, { key: "getHex", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : us; return Hl.fromWorkingColorSpace(fc.copy(this), e), 65536 * Math.round(gl(255 * fc.r, 0, 255)) + 256 * Math.round(gl(255 * fc.g, 0, 255)) + Math.round(gl(255 * fc.b, 0, 255)) } }, { key: "getHexString", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : us; return ("000000" + this.getHex(e).toString(16)).slice(-6) } }, { key: "getHSL", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Hl.workingColorSpace; Hl.fromWorkingColorSpace(fc.copy(this), t); var n, i, r = fc.r, a = fc.g, o = fc.b, s = Math.max(r, a, o), l = Math.min(r, a, o), g = (l + s) / 2; if (l === s) n = 0, i = 0; else { var c = s - l; switch (i = g <= .5 ? c / (s + l) : c / (2 - s - l), s) { case r: n = (a - o) / c + (a < o ? 6 : 0); break; case a: n = (o - r) / c + 2; break; case o: n = (r - a) / c + 4 }n /= 6 } return e.h = n, e.s = i, e.l = g, e } }, { key: "getRGB", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Hl.workingColorSpace; return Hl.fromWorkingColorSpace(fc.copy(this), t), e.r = fc.r, e.g = fc.g, e.b = fc.b, e } }, { key: "getStyle", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : us; Hl.fromWorkingColorSpace(fc.copy(this), e); var t = fc.r, n = fc.g, i = fc.b; return e !== us ? "color(".concat(e, " ").concat(t.toFixed(3), " ").concat(n.toFixed(3), " ").concat(i.toFixed(3), ")") : "rgb(".concat(Math.round(255 * t), ",").concat(Math.round(255 * n), ",").concat(Math.round(255 * i), ")") } }, { key: "offsetHSL", value: function (e, t, n) { return this.getHSL(Ic), this.setHSL(Ic.h + e, Ic.s + t, Ic.l + n) } }, { key: "add", value: function (e) { return this.r += e.r, this.g += e.g, this.b += e.b, this } }, { key: "addColors", value: function (e, t) { return this.r = e.r + t.r, this.g = e.g + t.g, this.b = e.b + t.b, this } }, { key: "addScalar", value: function (e) { return this.r += e, this.g += e, this.b += e, this } }, { key: "sub", value: function (e) { return this.r = Math.max(0, this.r - e.r), this.g = Math.max(0, this.g - e.g), this.b = Math.max(0, this.b - e.b), this } }, { key: "multiply", value: function (e) { return this.r *= e.r, this.g *= e.g, this.b *= e.b, this } }, { key: "multiplyScalar", value: function (e) { return this.r *= e, this.g *= e, this.b *= e, this } }, { key: "lerp", value: function (e, t) { return this.r += (e.r - this.r) * t, this.g += (e.g - this.g) * t, this.b += (e.b - this.b) * t, this } }, { key: "lerpColors", value: function (e, t, n) { return this.r = e.r + (t.r - e.r) * n, this.g = e.g + (t.g - e.g) * n, this.b = e.b + (t.b - e.b) * n, this } }, { key: "lerpHSL", value: function (e, t) { this.getHSL(Ic), e.getHSL(hc); var n = ul(Ic.h, hc.h, t), i = ul(Ic.s, hc.s, t), r = ul(Ic.l, hc.l, t); return this.setHSL(n, i, r), this } }, { key: "setFromVector3", value: function (e) { return this.r = e.x, this.g = e.y, this.b = e.z, this } }, { key: "applyMatrix3", value: function (e) { var t = this.r, n = this.g, i = this.b, r = e.elements; return this.r = r[0] * t + r[3] * n + r[6] * i, this.g = r[1] * t + r[4] * n + r[7] * i, this.b = r[2] * t + r[5] * n + r[8] * i, this } }, { key: "equals", value: function (e) { return e.r === this.r && e.g === this.g && e.b === this.b } }, { key: "fromArray", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; return this.r = e[t], this.g = e[t + 1], this.b = e[t + 2], this } }, { key: "toArray", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; return e[t] = this.r, e[t + 1] = this.g, e[t + 2] = this.b, e } }, { key: "fromBufferAttribute", value: function (e, t) { return this.r = e.getX(t), this.g = e.getY(t), this.b = e.getZ(t), this } }, { key: "toJSON", value: function () { return this.getHex() } }, { key: Symbol.iterator, value: Gr().mark((function e() { return Gr().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, this.r; case 2: return e.next = 4, this.g; case 4: return e.next = 6, this.b; case 6: case "end": return e.stop() } }), e, this) })) }]), t }(), fc = new pc; pc.NAMES = dc; var mc = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).isMeshBasicMaterial = !0, i.type = "MeshBasicMaterial", i.color = new pc(16777215), i.map = null, i.lightMap = null, i.lightMapIntensity = 1, i.aoMap = null, i.aoMapIntensity = 1, i.specularMap = null, i.alphaMap = null, i.envMap = null, i.combine = ha, i.reflectivity = 1, i.refractionRatio = .98, i.wireframe = !1, i.wireframeLinewidth = 1, i.wireframeLinecap = "round", i.wireframeLinejoin = "round", i.fog = !0, i.setValues(e), i } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.color.copy(e.color), this.map = e.map, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.specularMap = e.specularMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.combine = e.combine, this.reflectivity = e.reflectivity, this.refractionRatio = e.refractionRatio, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.fog = e.fog, this } }]), n }(Cc), vc = bc(); function bc() { for (var e = new ArrayBuffer(4), t = new Float32Array(e), n = new Uint32Array(e), i = new Uint32Array(512), r = new Uint32Array(512), a = 0; a < 256; ++a) { var o = a - 127; o < -27 ? (i[a] = 0, i[256 | a] = 32768, r[a] = 24, r[256 | a] = 24) : o < -14 ? (i[a] = 1024 >> -o - 14, i[256 | a] = 1024 >> -o - 14 | 32768, r[a] = -o - 1, r[256 | a] = -o - 1) : o <= 15 ? (i[a] = o + 15 << 10, i[256 | a] = o + 15 << 10 | 32768, r[a] = 13, r[256 | a] = 13) : o < 128 ? (i[a] = 31744, i[256 | a] = 64512, r[a] = 24, r[256 | a] = 24) : (i[a] = 31744, i[256 | a] = 64512, r[a] = 13, r[256 | a] = 13) } for (var s = new Uint32Array(2048), l = new Uint32Array(64), g = new Uint32Array(64), c = 1; c < 1024; ++c) { for (var u = c << 13, C = 0; 0 === (8388608 & u);)u <<= 1, C -= 8388608; u &= -8388609, C += 947912704, s[c] = u | C } for (var d = 1024; d < 2048; ++d)s[d] = 939524096 + (d - 1024 << 13); for (var I = 1; I < 31; ++I)l[I] = I << 23; l[31] = 1199570944, l[32] = 2147483648; for (var h = 33; h < 63; ++h)l[h] = 2147483648 + (h - 32 << 23); l[63] = 3347054592; for (var A = 1; A < 64; ++A)32 !== A && (g[A] = 1024); return { floatView: t, uint32View: n, baseTable: i, shiftTable: r, mantissaTable: s, exponentTable: l, offsetTable: g } } function yc(e) { Math.abs(e) > 65504 && console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."), e = gl(e, -65504, 65504), vc.floatView[0] = e; var t = vc.uint32View[0], n = t >> 23 & 511; return vc.baseTable[n] + ((8388607 & t) >> vc.shiftTable[n]) } function Gc(e) { var t = e >> 10; return vc.uint32View[0] = vc.mantissaTable[vc.offsetTable[t] + (1023 & e)] + vc.exponentTable[t], vc.floatView[0] } var Bc = { toHalfFloat: yc, fromHalfFloat: Gc }, Zc = new Ql, wc = new fl, Sc = function () { function e(t, n) { var i = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]; if (cr(this, e), Array.isArray(t)) throw new TypeError("THREE.BufferAttribute: array should be a Typed Array."); this.isBufferAttribute = !0, this.name = "", this.array = t, this.itemSize = n, this.count = void 0 !== t ? t.length / n : 0, this.normalized = i, this.usage = Ts, this.updateRange = { offset: 0, count: -1 }, this.gpuType = Oa, this.version = 0 } return dr(e, [{ key: "onUploadCallback", value: function () { } }, { key: "needsUpdate", set: function (e) { !0 === e && this.version++ } }, { key: "setUsage", value: function (e) { return this.usage = e, this } }, { key: "copy", value: function (e) { return this.name = e.name, this.array = new e.array.constructor(e.array), this.itemSize = e.itemSize, this.count = e.count, this.normalized = e.normalized, this.usage = e.usage, this.gpuType = e.gpuType, this } }, { key: "copyAt", value: function (e, t, n) { e *= this.itemSize, n *= t.itemSize; for (var i = 0, r = this.itemSize; i < r; i++)this.array[e + i] = t.array[n + i]; return this } }, { key: "copyArray", value: function (e) { return this.array.set(e), this } }, { key: "applyMatrix3", value: function (e) { if (2 === this.itemSize) for (var t = 0, n = this.count; t < n; t++)wc.fromBufferAttribute(this, t), wc.applyMatrix3(e), this.setXY(t, wc.x, wc.y); else if (3 === this.itemSize) for (var i = 0, r = this.count; i < r; i++)Zc.fromBufferAttribute(this, i), Zc.applyMatrix3(e), this.setXYZ(i, Zc.x, Zc.y, Zc.z); return this } }, { key: "applyMatrix4", value: function (e) { for (var t = 0, n = this.count; t < n; t++)Zc.fromBufferAttribute(this, t), Zc.applyMatrix4(e), this.setXYZ(t, Zc.x, Zc.y, Zc.z); return this } }, { key: "applyNormalMatrix", value: function (e) { for (var t = 0, n = this.count; t < n; t++)Zc.fromBufferAttribute(this, t), Zc.applyNormalMatrix(e), this.setXYZ(t, Zc.x, Zc.y, Zc.z); return this } }, { key: "transformDirection", value: function (e) { for (var t = 0, n = this.count; t < n; t++)Zc.fromBufferAttribute(this, t), Zc.transformDirection(e), this.setXYZ(t, Zc.x, Zc.y, Zc.z); return this } }, { key: "set", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; return this.array.set(e, t), this } }, { key: "getComponent", value: function (e, t) { var n = this.array[e * this.itemSize + t]; return this.normalized && (n = hl(n, this.array)), n } }, { key: "setComponent", value: function (e, t, n) { return this.normalized && (n = Al(n, this.array)), this.array[e * this.itemSize + t] = n, this } }, { key: "getX", value: function (e) { var t = this.array[e * this.itemSize]; return this.normalized && (t = hl(t, this.array)), t } }, { key: "setX", value: function (e, t) { return this.normalized && (t = Al(t, this.array)), this.array[e * this.itemSize] = t, this } }, { key: "getY", value: function (e) { var t = this.array[e * this.itemSize + 1]; return this.normalized && (t = hl(t, this.array)), t } }, { key: "setY", value: function (e, t) { return this.normalized && (t = Al(t, this.array)), this.array[e * this.itemSize + 1] = t, this } }, { key: "getZ", value: function (e) { var t = this.array[e * this.itemSize + 2]; return this.normalized && (t = hl(t, this.array)), t } }, { key: "setZ", value: function (e, t) { return this.normalized && (t = Al(t, this.array)), this.array[e * this.itemSize + 2] = t, this } }, { key: "getW", value: function (e) { var t = this.array[e * this.itemSize + 3]; return this.normalized && (t = hl(t, this.array)), t } }, { key: "setW", value: function (e, t) { return this.normalized && (t = Al(t, this.array)), this.array[e * this.itemSize + 3] = t, this } }, { key: "setXY", value: function (e, t, n) { return e *= this.itemSize, this.normalized && (t = Al(t, this.array), n = Al(n, this.array)), this.array[e + 0] = t, this.array[e + 1] = n, this } }, { key: "setXYZ", value: function (e, t, n, i) { return e *= this.itemSize, this.normalized && (t = Al(t, this.array), n = Al(n, this.array), i = Al(i, this.array)), this.array[e + 0] = t, this.array[e + 1] = n, this.array[e + 2] = i, this } }, { key: "setXYZW", value: function (e, t, n, i, r) { return e *= this.itemSize, this.normalized && (t = Al(t, this.array), n = Al(n, this.array), i = Al(i, this.array), r = Al(r, this.array)), this.array[e + 0] = t, this.array[e + 1] = n, this.array[e + 2] = i, this.array[e + 3] = r, this } }, { key: "onUpload", value: function (e) { return this.onUploadCallback = e, this } }, { key: "clone", value: function () { return new this.constructor(this.array, this.itemSize).copy(this) } }, { key: "toJSON", value: function () { var e = { itemSize: this.itemSize, type: this.array.constructor.name, array: Array.from(this.array), normalized: this.normalized }; return "" !== this.name && (e.name = this.name), this.usage !== Ts && (e.usage = this.usage), 0 === this.updateRange.offset && -1 === this.updateRange.count || (e.updateRange = this.updateRange), e } }]), e }(), Rc = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { return cr(this, n), t.call(this, new Int8Array(e), i, r) } return dr(n) }(Sc), xc = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { return cr(this, n), t.call(this, new Uint8Array(e), i, r) } return dr(n) }(Sc), Wc = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { return cr(this, n), t.call(this, new Uint8ClampedArray(e), i, r) } return dr(n) }(Sc), Vc = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { return cr(this, n), t.call(this, new Int16Array(e), i, r) } return dr(n) }(Sc), kc = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { return cr(this, n), t.call(this, new Uint16Array(e), i, r) } return dr(n) }(Sc), Hc = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { return cr(this, n), t.call(this, new Int32Array(e), i, r) } return dr(n) }(Sc), Mc = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { return cr(this, n), t.call(this, new Uint32Array(e), i, r) } return dr(n) }(Sc), Fc = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { var a; return cr(this, n), (a = t.call(this, new Uint16Array(e), i, r)).isFloat16BufferAttribute = !0, a } return dr(n, [{ key: "getX", value: function (e) { var t = Gc(this.array[e * this.itemSize]); return this.normalized && (t = hl(t, this.array)), t } }, { key: "setX", value: function (e, t) { return this.normalized && (t = Al(t, this.array)), this.array[e * this.itemSize] = yc(t), this } }, { key: "getY", value: function (e) { var t = Gc(this.array[e * this.itemSize + 1]); return this.normalized && (t = hl(t, this.array)), t } }, { key: "setY", value: function (e, t) { return this.normalized && (t = Al(t, this.array)), this.array[e * this.itemSize + 1] = yc(t), this } }, { key: "getZ", value: function (e) { var t = Gc(this.array[e * this.itemSize + 2]); return this.normalized && (t = hl(t, this.array)), t } }, { key: "setZ", value: function (e, t) { return this.normalized && (t = Al(t, this.array)), this.array[e * this.itemSize + 2] = yc(t), this } }, { key: "getW", value: function (e) { var t = Gc(this.array[e * this.itemSize + 3]); return this.normalized && (t = hl(t, this.array)), t } }, { key: "setW", value: function (e, t) { return this.normalized && (t = Al(t, this.array)), this.array[e * this.itemSize + 3] = yc(t), this } }, { key: "setXY", value: function (e, t, n) { return e *= this.itemSize, this.normalized && (t = Al(t, this.array), n = Al(n, this.array)), this.array[e + 0] = yc(t), this.array[e + 1] = yc(n), this } }, { key: "setXYZ", value: function (e, t, n, i) { return e *= this.itemSize, this.normalized && (t = Al(t, this.array), n = Al(n, this.array), i = Al(i, this.array)), this.array[e + 0] = yc(t), this.array[e + 1] = yc(n), this.array[e + 2] = yc(i), this } }, { key: "setXYZW", value: function (e, t, n, i, r) { return e *= this.itemSize, this.normalized && (t = Al(t, this.array), n = Al(n, this.array), i = Al(i, this.array), r = Al(r, this.array)), this.array[e + 0] = yc(t), this.array[e + 1] = yc(n), this.array[e + 2] = yc(i), this.array[e + 3] = yc(r), this } }]), n }(Sc), Nc = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { return cr(this, n), t.call(this, new Float32Array(e), i, r) } return dr(n) }(Sc), Xc = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { return cr(this, n), t.call(this, new Float64Array(e), i, r) } return dr(n) }(Sc), Yc = 0, Kc = new Sg, Lc = new qg, zc = new Ql, Ec = new eg, Tc = new eg, _c = new Ql, Uc = function (e) { Ir(n, e); var t = fr(n); function n() { var e; return cr(this, n), (e = t.call(this)).isBufferGeometry = !0, Object.defineProperty(y(e), "id", { value: Yc++ }), e.uuid = ll(), e.name = "", e.type = "BufferGeometry", e.index = null, e.attributes = {}, e.morphAttributes = {}, e.morphTargetsRelative = !1, e.groups = [], e.boundingBox = null, e.boundingSphere = null, e.drawRange = { start: 0, count: 1 / 0 }, e.userData = {}, e } return dr(n, [{ key: "getIndex", value: function () { return this.index } }, { key: "setIndex", value: function (e) { return Array.isArray(e) ? this.index = new (bl(e) ? Mc : kc)(e, 1) : this.index = e, this } }, { key: "getAttribute", value: function (e) { return this.attributes[e] } }, { key: "setAttribute", value: function (e, t) { return this.attributes[e] = t, this } }, { key: "deleteAttribute", value: function (e) { return delete this.attributes[e], this } }, { key: "hasAttribute", value: function (e) { return void 0 !== this.attributes[e] } }, { key: "addGroup", value: function (e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; this.groups.push({ start: e, count: t, materialIndex: n }) } }, { key: "clearGroups", value: function () { this.groups = [] } }, { key: "setDrawRange", value: function (e, t) { this.drawRange.start = e, this.drawRange.count = t } }, { key: "applyMatrix4", value: function (e) { var t = this.attributes.position; void 0 !== t && (t.applyMatrix4(e), t.needsUpdate = !0); var n = this.attributes.normal; if (void 0 !== n) { var i = (new ml).getNormalMatrix(e); n.applyNormalMatrix(i), n.needsUpdate = !0 } var r = this.attributes.tangent; return void 0 !== r && (r.transformDirection(e), r.needsUpdate = !0), null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), this } }, { key: "applyQuaternion", value: function (e) { return Kc.makeRotationFromQuaternion(e), this.applyMatrix4(Kc), this } }, { key: "rotateX", value: function (e) { return Kc.makeRotationX(e), this.applyMatrix4(Kc), this } }, { key: "rotateY", value: function (e) { return Kc.makeRotationY(e), this.applyMatrix4(Kc), this } }, { key: "rotateZ", value: function (e) { return Kc.makeRotationZ(e), this.applyMatrix4(Kc), this } }, { key: "translate", value: function (e, t, n) { return Kc.makeTranslation(e, t, n), this.applyMatrix4(Kc), this } }, { key: "scale", value: function (e, t, n) { return Kc.makeScale(e, t, n), this.applyMatrix4(Kc), this } }, { key: "lookAt", value: function (e) { return Lc.lookAt(e), Lc.updateMatrix(), this.applyMatrix4(Lc.matrix), this } }, { key: "center", value: function () { return this.computeBoundingBox(), this.boundingBox.getCenter(zc).negate(), this.translate(zc.x, zc.y, zc.z), this } }, { key: "setFromPoints", value: function (e) { for (var t = [], n = 0, i = e.length; n < i; n++) { var r = e[n]; t.push(r.x, r.y, r.z || 0) } return this.setAttribute("position", new Nc(t, 3)), this } }, { key: "computeBoundingBox", value: function () { null === this.boundingBox && (this.boundingBox = new eg); var e = this.attributes.position, t = this.morphAttributes.position; if (e && e.isGLBufferAttribute) return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".', this), void this.boundingBox.set(new Ql(-1 / 0, -1 / 0, -1 / 0), new Ql(1 / 0, 1 / 0, 1 / 0)); if (void 0 !== e) { if (this.boundingBox.setFromBufferAttribute(e), t) for (var n = 0, i = t.length; n < i; n++) { var r = t[n]; Ec.setFromBufferAttribute(r), this.morphTargetsRelative ? (_c.addVectors(this.boundingBox.min, Ec.min), this.boundingBox.expandByPoint(_c), _c.addVectors(this.boundingBox.max, Ec.max), this.boundingBox.expandByPoint(_c)) : (this.boundingBox.expandByPoint(Ec.min), this.boundingBox.expandByPoint(Ec.max)) } } else this.boundingBox.makeEmpty(); (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.', this) } }, { key: "computeBoundingSphere", value: function () { null === this.boundingSphere && (this.boundingSphere = new fg); var e = this.attributes.position, t = this.morphAttributes.position; if (e && e.isGLBufferAttribute) return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".', this), void this.boundingSphere.set(new Ql, 1 / 0); if (e) { var n = this.boundingSphere.center; if (Ec.setFromBufferAttribute(e), t) for (var i = 0, r = t.length; i < r; i++) { var a = t[i]; Tc.setFromBufferAttribute(a), this.morphTargetsRelative ? (_c.addVectors(Ec.min, Tc.min), Ec.expandByPoint(_c), _c.addVectors(Ec.max, Tc.max), Ec.expandByPoint(_c)) : (Ec.expandByPoint(Tc.min), Ec.expandByPoint(Tc.max)) } Ec.getCenter(n); for (var o = 0, s = 0, l = e.count; s < l; s++)_c.fromBufferAttribute(e, s), o = Math.max(o, n.distanceToSquared(_c)); if (t) for (var g = 0, c = t.length; g < c; g++)for (var u = t[g], C = this.morphTargetsRelative, d = 0, I = u.count; d < I; d++)_c.fromBufferAttribute(u, d), C && (zc.fromBufferAttribute(e, d), _c.add(zc)), o = Math.max(o, n.distanceToSquared(_c)); this.boundingSphere.radius = Math.sqrt(o), isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.', this) } } }, { key: "computeTangents", value: function () { var e = this.index, t = this.attributes; if (null !== e && void 0 !== t.position && void 0 !== t.normal && void 0 !== t.uv) { var n = e.array, i = t.position.array, r = t.normal.array, a = t.uv.array, o = i.length / 3; !1 === this.hasAttribute("tangent") && this.setAttribute("tangent", new Sc(new Float32Array(4 * o), 4)); for (var s = this.getAttribute("tangent").array, l = [], g = [], c = 0; c < o; c++)l[c] = new Ql, g[c] = new Ql; var u = new Ql, C = new Ql, d = new Ql, I = new fl, h = new fl, A = new fl, p = new Ql, f = new Ql, m = this.groups; 0 === m.length && (m = [{ start: 0, count: n.length }]); for (var v = 0, b = m.length; v < b; ++v)for (var y = m[v], G = y.start, B = G, Z = G + y.count; B < Z; B += 3)N(n[B + 0], n[B + 1], n[B + 2]); for (var w = new Ql, S = new Ql, R = new Ql, x = new Ql, W = 0, V = m.length; W < V; ++W)for (var k = m[W], H = k.start, M = H, F = H + k.count; M < F; M += 3)X(n[M + 0]), X(n[M + 1]), X(n[M + 2]) } else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)"); function N(e, t, n) { u.fromArray(i, 3 * e), C.fromArray(i, 3 * t), d.fromArray(i, 3 * n), I.fromArray(a, 2 * e), h.fromArray(a, 2 * t), A.fromArray(a, 2 * n), C.sub(u), d.sub(u), h.sub(I), A.sub(I); var r = 1 / (h.x * A.y - A.x * h.y); isFinite(r) && (p.copy(C).multiplyScalar(A.y).addScaledVector(d, -h.y).multiplyScalar(r), f.copy(d).multiplyScalar(h.x).addScaledVector(C, -A.x).multiplyScalar(r), l[e].add(p), l[t].add(p), l[n].add(p), g[e].add(f), g[t].add(f), g[n].add(f)) } function X(e) { R.fromArray(r, 3 * e), x.copy(R); var t = l[e]; w.copy(t), w.sub(R.multiplyScalar(R.dot(t))).normalize(), S.crossVectors(x, t); var n = S.dot(g[e]) < 0 ? -1 : 1; s[4 * e] = w.x, s[4 * e + 1] = w.y, s[4 * e + 2] = w.z, s[4 * e + 3] = n } } }, { key: "computeVertexNormals", value: function () { var e = this.index, t = this.getAttribute("position"); if (void 0 !== t) { var n = this.getAttribute("normal"); if (void 0 === n) n = new Sc(new Float32Array(3 * t.count), 3), this.setAttribute("normal", n); else for (var i = 0, r = n.count; i < r; i++)n.setXYZ(i, 0, 0, 0); var a = new Ql, o = new Ql, s = new Ql, l = new Ql, g = new Ql, c = new Ql, u = new Ql, C = new Ql; if (e) for (var d = 0, I = e.count; d < I; d += 3) { var h = e.getX(d + 0), A = e.getX(d + 1), p = e.getX(d + 2); a.fromBufferAttribute(t, h), o.fromBufferAttribute(t, A), s.fromBufferAttribute(t, p), u.subVectors(s, o), C.subVectors(a, o), u.cross(C), l.fromBufferAttribute(n, h), g.fromBufferAttribute(n, A), c.fromBufferAttribute(n, p), l.add(u), g.add(u), c.add(u), n.setXYZ(h, l.x, l.y, l.z), n.setXYZ(A, g.x, g.y, g.z), n.setXYZ(p, c.x, c.y, c.z) } else for (var f = 0, m = t.count; f < m; f += 3)a.fromBufferAttribute(t, f + 0), o.fromBufferAttribute(t, f + 1), s.fromBufferAttribute(t, f + 2), u.subVectors(s, o), C.subVectors(a, o), u.cross(C), n.setXYZ(f + 0, u.x, u.y, u.z), n.setXYZ(f + 1, u.x, u.y, u.z), n.setXYZ(f + 2, u.x, u.y, u.z); this.normalizeNormals(), n.needsUpdate = !0 } } }, { key: "normalizeNormals", value: function () { for (var e = this.attributes.normal, t = 0, n = e.count; t < n; t++)_c.fromBufferAttribute(e, t), _c.normalize(), e.setXYZ(t, _c.x, _c.y, _c.z) } }, { key: "toNonIndexed", value: function () { function e(e, t) { for (var n = e.array, i = e.itemSize, r = e.normalized, a = new n.constructor(t.length * i), o = 0, s = 0, l = 0, g = t.length; l < g; l++) { o = e.isInterleavedBufferAttribute ? t[l] * e.data.stride + e.offset : t[l] * i; for (var c = 0; c < i; c++)a[s++] = n[o++] } return new Sc(a, i, r) } if (null === this.index) return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."), this; var t = new n, i = this.index.array, r = this.attributes; for (var a in r) { var o = e(r[a], i); t.setAttribute(a, o) } var s = this.morphAttributes; for (var l in s) { for (var g = [], c = s[l], u = 0, C = c.length; u < C; u++) { var d = e(c[u], i); g.push(d) } t.morphAttributes[l] = g } t.morphTargetsRelative = this.morphTargetsRelative; for (var I = this.groups, h = 0, A = I.length; h < A; h++) { var p = I[h]; t.addGroup(p.start, p.count, p.materialIndex) } return t } }, { key: "toJSON", value: function () { var e = { metadata: { version: 4.6, type: "BufferGeometry", generator: "BufferGeometry.toJSON" } }; if (e.uuid = this.uuid, e.type = this.type, "" !== this.name && (e.name = this.name), Object.keys(this.userData).length > 0 && (e.userData = this.userData), void 0 !== this.parameters) { var t = this.parameters; for (var n in t) void 0 !== t[n] && (e[n] = t[n]); return e } e.data = { attributes: {} }; var i = this.index; null !== i && (e.data.index = { type: i.array.constructor.name, array: Array.prototype.slice.call(i.array) }); var r = this.attributes; for (var a in r) { var o = r[a]; e.data.attributes[a] = o.toJSON(e.data) } var s = {}, l = !1; for (var g in this.morphAttributes) { for (var c = this.morphAttributes[g], u = [], C = 0, d = c.length; C < d; C++) { var I = c[C]; u.push(I.toJSON(e.data)) } u.length > 0 && (s[g] = u, l = !0) } l && (e.data.morphAttributes = s, e.data.morphTargetsRelative = this.morphTargetsRelative); var h = this.groups; h.length > 0 && (e.data.groups = JSON.parse(JSON.stringify(h))); var A = this.boundingSphere; return null !== A && (e.data.boundingSphere = { center: A.center.toArray(), radius: A.radius }), e } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }, { key: "copy", value: function (e) { this.index = null, this.attributes = {}, this.morphAttributes = {}, this.groups = [], this.boundingBox = null, this.boundingSphere = null; var t = {}; this.name = e.name; var n = e.index; null !== n && this.setIndex(n.clone(t)); var i = e.attributes; for (var r in i) { var a = i[r]; this.setAttribute(r, a.clone(t)) } var o = e.morphAttributes; for (var s in o) { for (var l = [], g = o[s], c = 0, u = g.length; c < u; c++)l.push(g[c].clone(t)); this.morphAttributes[s] = l } this.morphTargetsRelative = e.morphTargetsRelative; for (var C = e.groups, d = 0, I = C.length; d < I; d++) { var h = C[d]; this.addGroup(h.start, h.count, h.materialIndex) } var A = e.boundingBox; null !== A && (this.boundingBox = A.clone()); var p = e.boundingSphere; return null !== p && (this.boundingSphere = p.clone()), this.drawRange.start = e.drawRange.start, this.drawRange.count = e.drawRange.count, this.userData = e.userData, this } }, { key: "dispose", value: function () { this.dispatchEvent({ type: "dispose" }) } }]), n }(il), Dc = new Sg, Pc = new wg, Jc = new fg, Oc = new Ql, jc = new Ql, Qc = new Ql, qc = new Ql, $c = new Ql, eu = new Ql, tu = new fl, nu = new fl, iu = new fl, ru = new Ql, au = new Ql, ou = new Ql, su = new Ql, lu = new Ql, gu = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new Uc, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new mc; return cr(this, n), (e = t.call(this)).isMesh = !0, e.type = "Mesh", e.geometry = i, e.material = r, e.updateMorphTargets(), e } return dr(n, [{ key: "copy", value: function (e, t) { return yr(hr(n.prototype), "copy", this).call(this, e, t), void 0 !== e.morphTargetInfluences && (this.morphTargetInfluences = e.morphTargetInfluences.slice()), void 0 !== e.morphTargetDictionary && (this.morphTargetDictionary = Object.assign({}, e.morphTargetDictionary)), this.material = Array.isArray(e.material) ? e.material.slice() : e.material, this.geometry = e.geometry, this } }, { key: "updateMorphTargets", value: function () { var e = this.geometry.morphAttributes, t = Object.keys(e); if (t.length > 0) { var n = e[t[0]]; if (void 0 !== n) { this.morphTargetInfluences = [], this.morphTargetDictionary = {}; for (var i = 0, r = n.length; i < r; i++) { var a = n[i].name || String(i); this.morphTargetInfluences.push(0), this.morphTargetDictionary[a] = i } } } } }, { key: "getVertexPosition", value: function (e, t) { var n = this.geometry, i = n.attributes.position, r = n.morphAttributes.position, a = n.morphTargetsRelative; t.fromBufferAttribute(i, e); var o = this.morphTargetInfluences; if (r && o) { eu.set(0, 0, 0); for (var s = 0, l = r.length; s < l; s++) { var g = o[s], c = r[s]; 0 !== g && ($c.fromBufferAttribute(c, e), a ? eu.addScaledVector($c, g) : eu.addScaledVector($c.sub(t), g)) } t.add(eu) } return t } }, { key: "raycast", value: function (e, t) { var n = this.geometry, i = this.material, r = this.matrixWorld; if (void 0 !== i) { if (null === n.boundingSphere && n.computeBoundingSphere(), Jc.copy(n.boundingSphere), Jc.applyMatrix4(r), Pc.copy(e.ray).recast(e.near), !1 === Jc.containsPoint(Pc.origin)) { if (null === Pc.intersectSphere(Jc, Oc)) return; if (Pc.origin.distanceToSquared(Oc) > Math.pow(e.far - e.near, 2)) return } Dc.copy(r).invert(), Pc.copy(e.ray).applyMatrix4(Dc), null !== n.boundingBox && !1 === Pc.intersectsBox(n.boundingBox) || this._computeIntersections(e, t, Pc) } } }, { key: "_computeIntersections", value: function (e, t, n) { var i, r = this.geometry, a = this.material, o = r.index, s = r.attributes.position, l = r.attributes.uv, g = r.attributes.uv1, c = r.attributes.normal, u = r.groups, C = r.drawRange; if (null !== o) if (Array.isArray(a)) for (var d = 0, I = u.length; d < I; d++)for (var h = u[d], A = a[h.materialIndex], p = Math.max(h.start, C.start), f = Math.min(o.count, Math.min(h.start + h.count, C.start + C.count)); p < f; p += 3) { (i = cu(this, A, e, n, l, g, c, o.getX(p), o.getX(p + 1), o.getX(p + 2))) && (i.faceIndex = Math.floor(p / 3), i.face.materialIndex = h.materialIndex, t.push(i)) } else for (var m = Math.max(0, C.start), v = Math.min(o.count, C.start + C.count); m < v; m += 3) { (i = cu(this, a, e, n, l, g, c, o.getX(m), o.getX(m + 1), o.getX(m + 2))) && (i.faceIndex = Math.floor(m / 3), t.push(i)) } else if (void 0 !== s) if (Array.isArray(a)) for (var b = 0, y = u.length; b < y; b++)for (var G = u[b], B = a[G.materialIndex], Z = Math.max(G.start, C.start), w = Math.min(s.count, Math.min(G.start + G.count, C.start + C.count)); Z < w; Z += 3) { (i = cu(this, B, e, n, l, g, c, Z, Z + 1, Z + 2)) && (i.faceIndex = Math.floor(Z / 3), i.face.materialIndex = G.materialIndex, t.push(i)) } else for (var S = Math.max(0, C.start), R = Math.min(s.count, C.start + C.count); S < R; S += 3) { (i = cu(this, a, e, n, l, g, c, S, S + 1, S + 2)) && (i.faceIndex = Math.floor(S / 3), t.push(i)) } } }]), n }(qg); function cu(e, t, n, i, r, a, o, s, l, g) { e.getVertexPosition(s, jc), e.getVertexPosition(l, Qc), e.getVertexPosition(g, qc); var c = function (e, t, n, i, r, a, o, s) { if (null === (t.side === Nr ? i.intersectTriangle(o, a, r, !0, s) : i.intersectTriangle(r, a, o, t.side === Fr, s))) return null; lu.copy(s), lu.applyMatrix4(e.matrixWorld); var l = n.ray.origin.distanceTo(lu); return l < n.near || l > n.far ? null : { distance: l, point: lu.clone(), object: e } }(e, t, n, i, jc, Qc, qc, su); if (c) { r && (tu.fromBufferAttribute(r, s), nu.fromBufferAttribute(r, l), iu.fromBufferAttribute(r, g), c.uv = cc.getInterpolation(su, jc, Qc, qc, tu, nu, iu, new fl)), a && (tu.fromBufferAttribute(a, s), nu.fromBufferAttribute(a, l), iu.fromBufferAttribute(a, g), c.uv1 = cc.getInterpolation(su, jc, Qc, qc, tu, nu, iu, new fl), c.uv2 = c.uv1), o && (ru.fromBufferAttribute(o, s), au.fromBufferAttribute(o, l), ou.fromBufferAttribute(o, g), c.normal = cc.getInterpolation(su, jc, Qc, qc, ru, au, ou, new Ql), c.normal.dot(i.direction) > 0 && c.normal.multiplyScalar(-1)); var u = { a: s, b: l, c: g, normal: new Ql, materialIndex: 0 }; cc.getNormal(jc, Qc, qc, u.normal), c.face = u } return c } var uu = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 1, l = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 1; cr(this, n), (e = t.call(this)).type = "BoxGeometry", e.parameters = { width: i, height: r, depth: a, widthSegments: o, heightSegments: s, depthSegments: l }; var g = y(e); o = Math.floor(o), s = Math.floor(s), l = Math.floor(l); var c = [], u = [], C = [], d = [], I = 0, h = 0; function A(e, t, n, i, r, a, o, s, l, A, p) { for (var f = a / l, m = o / A, v = a / 2, b = o / 2, y = s / 2, G = l + 1, B = A + 1, Z = 0, w = 0, S = new Ql, R = 0; R < B; R++)for (var x = R * m - b, W = 0; W < G; W++) { var V = W * f - v; S[e] = V * i, S[t] = x * r, S[n] = y, u.push(S.x, S.y, S.z), S[e] = 0, S[t] = 0, S[n] = s > 0 ? 1 : -1, C.push(S.x, S.y, S.z), d.push(W / l), d.push(1 - R / A), Z += 1 } for (var k = 0; k < A; k++)for (var H = 0; H < l; H++) { var M = I + H + G * k, F = I + H + G * (k + 1), N = I + (H + 1) + G * (k + 1), X = I + (H + 1) + G * k; c.push(M, F, X), c.push(F, N, X), w += 6 } g.addGroup(h, w, p), h += w, I += Z } return A("z", "y", "x", -1, -1, a, r, i, l, s, 0), A("z", "y", "x", 1, -1, a, r, -i, l, s, 1), A("x", "z", "y", 1, 1, i, a, r, o, l, 2), A("x", "z", "y", 1, -1, i, a, -r, o, l, 3), A("x", "y", "z", 1, -1, i, r, a, o, s, 4), A("x", "y", "z", -1, -1, i, r, -a, o, s, 5), e.setIndex(c), e.setAttribute("position", new Nc(u, 3)), e.setAttribute("normal", new Nc(C, 3)), e.setAttribute("uv", new Nc(d, 2)), e } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.parameters = Object.assign({}, e.parameters), this } }], [{ key: "fromJSON", value: function (e) { return new n(e.width, e.height, e.depth, e.widthSegments, e.heightSegments, e.depthSegments) } }]), n }(Uc); function Cu(e) { var t = {}; for (var n in e) for (var i in t[n] = {}, e[n]) { var r = e[n][i]; r && (r.isColor || r.isMatrix3 || r.isMatrix4 || r.isVector2 || r.isVector3 || r.isVector4 || r.isTexture || r.isQuaternion) ? r.isRenderTargetTexture ? (console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."), t[n][i] = null) : t[n][i] = r.clone() : Array.isArray(r) ? t[n][i] = r.slice() : t[n][i] = r } return t } function du(e) { for (var t = {}, n = 0; n < e.length; n++) { var i = Cu(e[n]); for (var r in i) t[r] = i[r] } return t } function Iu(e) { return null === e.getRenderTarget() ? e.outputColorSpace : Hl.workingColorSpace } var hu = { clone: Cu, merge: du }, Au = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).isShaderMaterial = !0, i.type = "ShaderMaterial", i.defines = {}, i.uniforms = {}, i.uniformsGroups = [], i.vertexShader = "void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}", i.fragmentShader = "void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}", i.linewidth = 1, i.wireframe = !1, i.wireframeLinewidth = 1, i.fog = !1, i.lights = !1, i.clipping = !1, i.forceSinglePass = !0, i.extensions = { derivatives: !1, fragDepth: !1, drawBuffers: !1, shaderTextureLOD: !1 }, i.defaultAttributeValues = { color: [1, 1, 1], uv: [0, 0], uv1: [0, 0] }, i.index0AttributeName = void 0, i.uniformsNeedUpdate = !1, i.glslVersion = null, void 0 !== e && i.setValues(e), i } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.fragmentShader = e.fragmentShader, this.vertexShader = e.vertexShader, this.uniforms = Cu(e.uniforms), this.uniformsGroups = function (e) { for (var t = [], n = 0; n < e.length; n++)t.push(e[n].clone()); return t }(e.uniformsGroups), this.defines = Object.assign({}, e.defines), this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.fog = e.fog, this.lights = e.lights, this.clipping = e.clipping, this.extensions = Object.assign({}, e.extensions), this.glslVersion = e.glslVersion, this } }, { key: "toJSON", value: function (e) { var t = yr(hr(n.prototype), "toJSON", this).call(this, e); for (var i in t.glslVersion = this.glslVersion, t.uniforms = {}, this.uniforms) { var r = this.uniforms[i].value; r && r.isTexture ? t.uniforms[i] = { type: "t", value: r.toJSON(e).uuid } : r && r.isColor ? t.uniforms[i] = { type: "c", value: r.getHex() } : r && r.isVector2 ? t.uniforms[i] = { type: "v2", value: r.toArray() } : r && r.isVector3 ? t.uniforms[i] = { type: "v3", value: r.toArray() } : r && r.isVector4 ? t.uniforms[i] = { type: "v4", value: r.toArray() } : r && r.isMatrix3 ? t.uniforms[i] = { type: "m3", value: r.toArray() } : r && r.isMatrix4 ? t.uniforms[i] = { type: "m4", value: r.toArray() } : t.uniforms[i] = { value: r } } Object.keys(this.defines).length > 0 && (t.defines = this.defines), t.vertexShader = this.vertexShader, t.fragmentShader = this.fragmentShader, t.lights = this.lights, t.clipping = this.clipping; var a = {}; for (var o in this.extensions) !0 === this.extensions[o] && (a[o] = !0); return Object.keys(a).length > 0 && (t.extensions = a), t } }]), n }(Cc), pu = function (e) { Ir(n, e); var t = fr(n); function n() { var e; return cr(this, n), (e = t.call(this)).isCamera = !0, e.type = "Camera", e.matrixWorldInverse = new Sg, e.projectionMatrix = new Sg, e.projectionMatrixInverse = new Sg, e.coordinateSystem = tl, e } return dr(n, [{ key: "copy", value: function (e, t) { return yr(hr(n.prototype), "copy", this).call(this, e, t), this.matrixWorldInverse.copy(e.matrixWorldInverse), this.projectionMatrix.copy(e.projectionMatrix), this.projectionMatrixInverse.copy(e.projectionMatrixInverse), this.coordinateSystem = e.coordinateSystem, this } }, { key: "getWorldDirection", value: function (e) { return yr(hr(n.prototype), "getWorldDirection", this).call(this, e).negate() } }, { key: "updateMatrixWorld", value: function (e) { yr(hr(n.prototype), "updateMatrixWorld", this).call(this, e), this.matrixWorldInverse.copy(this.matrixWorld).invert() } }, { key: "updateWorldMatrix", value: function (e, t) { yr(hr(n.prototype), "updateWorldMatrix", this).call(this, e, t), this.matrixWorldInverse.copy(this.matrixWorld).invert() } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }]), n }(qg), fu = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 50, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : .1, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 2e3; return cr(this, n), (e = t.call(this)).isPerspectiveCamera = !0, e.type = "PerspectiveCamera", e.fov = i, e.zoom = 1, e.near = a, e.far = o, e.focus = 10, e.aspect = r, e.view = null, e.filmGauge = 35, e.filmOffset = 0, e.updateProjectionMatrix(), e } return dr(n, [{ key: "copy", value: function (e, t) { return yr(hr(n.prototype), "copy", this).call(this, e, t), this.fov = e.fov, this.zoom = e.zoom, this.near = e.near, this.far = e.far, this.focus = e.focus, this.aspect = e.aspect, this.view = null === e.view ? null : Object.assign({}, e.view), this.filmGauge = e.filmGauge, this.filmOffset = e.filmOffset, this } }, { key: "setFocalLength", value: function (e) { var t = .5 * this.getFilmHeight() / e; this.fov = 2 * sl * Math.atan(t), this.updateProjectionMatrix() } }, { key: "getFocalLength", value: function () { var e = Math.tan(.5 * ol * this.fov); return .5 * this.getFilmHeight() / e } }, { key: "getEffectiveFOV", value: function () { return 2 * sl * Math.atan(Math.tan(.5 * ol * this.fov) / this.zoom) } }, { key: "getFilmWidth", value: function () { return this.filmGauge * Math.min(this.aspect, 1) } }, { key: "getFilmHeight", value: function () { return this.filmGauge / Math.max(this.aspect, 1) } }, { key: "setViewOffset", value: function (e, t, n, i, r, a) { this.aspect = e / t, null === this.view && (this.view = { enabled: !0, fullWidth: 1, fullHeight: 1, offsetX: 0, offsetY: 0, width: 1, height: 1 }), this.view.enabled = !0, this.view.fullWidth = e, this.view.fullHeight = t, this.view.offsetX = n, this.view.offsetY = i, this.view.width = r, this.view.height = a, this.updateProjectionMatrix() } }, { key: "clearViewOffset", value: function () { null !== this.view && (this.view.enabled = !1), this.updateProjectionMatrix() } }, { key: "updateProjectionMatrix", value: function () { var e = this.near, t = e * Math.tan(.5 * ol * this.fov) / this.zoom, n = 2 * t, i = this.aspect * n, r = -.5 * i, a = this.view; if (null !== this.view && this.view.enabled) { var o = a.fullWidth, s = a.fullHeight; r += a.offsetX * i / o, t -= a.offsetY * n / s, i *= a.width / o, n *= a.height / s } var l = this.filmOffset; 0 !== l && (r += e * l / this.getFilmWidth()), this.projectionMatrix.makePerspective(r, r + i, t, t - n, e, this.far, this.coordinateSystem), this.projectionMatrixInverse.copy(this.projectionMatrix).invert() } }, { key: "toJSON", value: function (e) { var t = yr(hr(n.prototype), "toJSON", this).call(this, e); return t.object.fov = this.fov, t.object.zoom = this.zoom, t.object.near = this.near, t.object.far = this.far, t.object.focus = this.focus, t.object.aspect = this.aspect, null !== this.view && (t.object.view = Object.assign({}, this.view)), t.object.filmGauge = this.filmGauge, t.object.filmOffset = this.filmOffset, t } }]), n }(pu), mu = -90, vu = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { var a; cr(this, n), (a = t.call(this)).type = "CubeCamera", a.renderTarget = r, a.coordinateSystem = null, a.activeMipmapLevel = 0; var o = new fu(mu, 1, e, i); o.layers = a.layers, a.add(o); var s = new fu(mu, 1, e, i); s.layers = a.layers, a.add(s); var l = new fu(mu, 1, e, i); l.layers = a.layers, a.add(l); var g = new fu(mu, 1, e, i); g.layers = a.layers, a.add(g); var c = new fu(mu, 1, e, i); c.layers = a.layers, a.add(c); var u = new fu(mu, 1, e, i); return u.layers = a.layers, a.add(u), a } return dr(n, [{ key: "updateCoordinateSystem", value: function () { var e, t = this.coordinateSystem, n = this.children.concat(), i = (0, r.Z)(n, 6), a = i[0], o = i[1], s = i[2], l = i[3], g = i[4], c = i[5], u = gr(n); try { for (u.s(); !(e = u.n()).done;) { var C = e.value; this.remove(C) } } catch (A) { u.e(A) } finally { u.f() } if (t === tl) a.up.set(0, 1, 0), a.lookAt(1, 0, 0), o.up.set(0, 1, 0), o.lookAt(-1, 0, 0), s.up.set(0, 0, -1), s.lookAt(0, 1, 0), l.up.set(0, 0, 1), l.lookAt(0, -1, 0), g.up.set(0, 1, 0), g.lookAt(0, 0, 1), c.up.set(0, 1, 0), c.lookAt(0, 0, -1); else { if (t !== nl) throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: " + t); a.up.set(0, -1, 0), a.lookAt(-1, 0, 0), o.up.set(0, -1, 0), o.lookAt(1, 0, 0), s.up.set(0, 0, 1), s.lookAt(0, 1, 0), l.up.set(0, 0, -1), l.lookAt(0, -1, 0), g.up.set(0, -1, 0), g.lookAt(0, 0, 1), c.up.set(0, -1, 0), c.lookAt(0, 0, -1) } var d, I = gr(n); try { for (I.s(); !(d = I.n()).done;) { var h = d.value; this.add(h), h.updateMatrixWorld() } } catch (A) { I.e(A) } finally { I.f() } } }, { key: "update", value: function (e, t) { null === this.parent && this.updateMatrixWorld(); var n = this.renderTarget, i = this.activeMipmapLevel; this.coordinateSystem !== e.coordinateSystem && (this.coordinateSystem = e.coordinateSystem, this.updateCoordinateSystem()); var a = (0, r.Z)(this.children, 6), o = a[0], s = a[1], l = a[2], g = a[3], c = a[4], u = a[5], C = e.getRenderTarget(), d = e.getActiveCubeFace(), I = e.getActiveMipmapLevel(), h = e.xr.enabled; e.xr.enabled = !1; var A = n.texture.generateMipmaps; n.texture.generateMipmaps = !1, e.setRenderTarget(n, 0, i), e.render(t, o), e.setRenderTarget(n, 1, i), e.render(t, s), e.setRenderTarget(n, 2, i), e.render(t, l), e.setRenderTarget(n, 3, i), e.render(t, g), e.setRenderTarget(n, 4, i), e.render(t, c), n.texture.generateMipmaps = A, e.setRenderTarget(n, 5, i), e.render(t, u), e.setRenderTarget(C, d, I), e.xr.enabled = h, n.texture.needsPMREMUpdate = !0 } }]), n }(qg), bu = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r, a, o, s, l, g, c, u) { var C; return cr(this, n), e = void 0 !== e ? e : [], i = void 0 !== i ? i : Za, (C = t.call(this, e, i, r, a, o, s, l, g, c, u)).isCubeTexture = !0, C.flipY = !1, C } return dr(n, [{ key: "images", get: function () { return this.image }, set: function (e) { this.image = e } }]), n }(zl), yu = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; cr(this, n), (e = t.call(this, i, i, r)).isWebGLCubeRenderTarget = !0; var a = { width: i, height: i, depth: 1 }, o = [a, a, a, a, a, a]; return void 0 !== r.encoding && (Sl("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."), r.colorSpace = r.encoding === as ? us : cs), e.texture = new bu(o, r.mapping, r.wrapS, r.wrapT, r.magFilter, r.minFilter, r.format, r.type, r.anisotropy, r.colorSpace), e.texture.isRenderTargetTexture = !0, e.texture.generateMipmaps = void 0 !== r.generateMipmaps && r.generateMipmaps, e.texture.minFilter = void 0 !== r.minFilter ? r.minFilter : Ya, e } return dr(n, [{ key: "fromEquirectangularTexture", value: function (e, t) { this.texture.type = t.type, this.texture.colorSpace = t.colorSpace, this.texture.generateMipmaps = t.generateMipmaps, this.texture.minFilter = t.minFilter, this.texture.magFilter = t.magFilter; var n = { tEquirect: { value: null } }, i = "\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t", r = "\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t", a = new uu(5, 5, 5), o = new Au({ name: "CubemapFromEquirect", uniforms: Cu(n), vertexShader: i, fragmentShader: r, side: Nr, blending: Kr }); o.uniforms.tEquirect.value = t; var s = new gu(a, o), l = t.minFilter; return t.minFilter === za && (t.minFilter = Ya), new vu(1, 10, this).update(e, s), t.minFilter = l, s.geometry.dispose(), s.material.dispose(), this } }, { key: "clear", value: function (e, t, n, i) { for (var r = e.getRenderTarget(), a = 0; a < 6; a++)e.setRenderTarget(this, a), e.clear(t, n, i); e.setRenderTarget(r) } }]), n }(_l), Gu = new Ql, Bu = new Ql, Zu = new ml, wu = function () { function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new Ql(1, 0, 0), n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; cr(this, e), this.isPlane = !0, this.normal = t, this.constant = n } return dr(e, [{ key: "set", value: function (e, t) { return this.normal.copy(e), this.constant = t, this } }, { key: "setComponents", value: function (e, t, n, i) { return this.normal.set(e, t, n), this.constant = i, this } }, { key: "setFromNormalAndCoplanarPoint", value: function (e, t) { return this.normal.copy(e), this.constant = -t.dot(this.normal), this } }, { key: "setFromCoplanarPoints", value: function (e, t, n) { var i = Gu.subVectors(n, t).cross(Bu.subVectors(e, t)).normalize(); return this.setFromNormalAndCoplanarPoint(i, e), this } }, { key: "copy", value: function (e) { return this.normal.copy(e.normal), this.constant = e.constant, this } }, { key: "normalize", value: function () { var e = 1 / this.normal.length(); return this.normal.multiplyScalar(e), this.constant *= e, this } }, { key: "negate", value: function () { return this.constant *= -1, this.normal.negate(), this } }, { key: "distanceToPoint", value: function (e) { return this.normal.dot(e) + this.constant } }, { key: "distanceToSphere", value: function (e) { return this.distanceToPoint(e.center) - e.radius } }, { key: "projectPoint", value: function (e, t) { return t.copy(e).addScaledVector(this.normal, -this.distanceToPoint(e)) } }, { key: "intersectLine", value: function (e, t) { var n = e.delta(Gu), i = this.normal.dot(n); if (0 === i) return 0 === this.distanceToPoint(e.start) ? t.copy(e.start) : null; var r = -(e.start.dot(this.normal) + this.constant) / i; return r < 0 || r > 1 ? null : t.copy(e.start).addScaledVector(n, r) } }, { key: "intersectsLine", value: function (e) { var t = this.distanceToPoint(e.start), n = this.distanceToPoint(e.end); return t < 0 && n > 0 || n < 0 && t > 0 } }, { key: "intersectsBox", value: function (e) { return e.intersectsPlane(this) } }, { key: "intersectsSphere", value: function (e) { return e.intersectsPlane(this) } }, { key: "coplanarPoint", value: function (e) { return e.copy(this.normal).multiplyScalar(-this.constant) } }, { key: "applyMatrix4", value: function (e, t) { var n = t || Zu.getNormalMatrix(e), i = this.coplanarPoint(Gu).applyMatrix4(e), r = this.normal.applyMatrix3(n).normalize(); return this.constant = -i.dot(r), this } }, { key: "translate", value: function (e) { return this.constant -= e.dot(this.normal), this } }, { key: "equals", value: function (e) { return e.normal.equals(this.normal) && e.constant === this.constant } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }]), e }(), Su = new fg, Ru = new Ql, xu = function () { function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new wu, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new wu, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : new wu, r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : new wu, a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : new wu, o = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : new wu; cr(this, e), this.planes = [t, n, i, r, a, o] } return dr(e, [{ key: "set", value: function (e, t, n, i, r, a) { var o = this.planes; return o[0].copy(e), o[1].copy(t), o[2].copy(n), o[3].copy(i), o[4].copy(r), o[5].copy(a), this } }, { key: "copy", value: function (e) { for (var t = this.planes, n = 0; n < 6; n++)t[n].copy(e.planes[n]); return this } }, { key: "setFromProjectionMatrix", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : tl, n = this.planes, i = e.elements, r = i[0], a = i[1], o = i[2], s = i[3], l = i[4], g = i[5], c = i[6], u = i[7], C = i[8], d = i[9], I = i[10], h = i[11], A = i[12], p = i[13], f = i[14], m = i[15]; if (n[0].setComponents(s - r, u - l, h - C, m - A).normalize(), n[1].setComponents(s + r, u + l, h + C, m + A).normalize(), n[2].setComponents(s + a, u + g, h + d, m + p).normalize(), n[3].setComponents(s - a, u - g, h - d, m - p).normalize(), n[4].setComponents(s - o, u - c, h - I, m - f).normalize(), t === tl) n[5].setComponents(s + o, u + c, h + I, m + f).normalize(); else { if (t !== nl) throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: " + t); n[5].setComponents(o, c, I, f).normalize() } return this } }, { key: "intersectsObject", value: function (e) { if (void 0 !== e.boundingSphere) null === e.boundingSphere && e.computeBoundingSphere(), Su.copy(e.boundingSphere).applyMatrix4(e.matrixWorld); else { var t = e.geometry; null === t.boundingSphere && t.computeBoundingSphere(), Su.copy(t.boundingSphere).applyMatrix4(e.matrixWorld) } return this.intersectsSphere(Su) } }, { key: "intersectsSprite", value: function (e) { return Su.center.set(0, 0, 0), Su.radius = .7071067811865476, Su.applyMatrix4(e.matrixWorld), this.intersectsSphere(Su) } }, { key: "intersectsSphere", value: function (e) { for (var t = this.planes, n = e.center, i = -e.radius, r = 0; r < 6; r++) { if (t[r].distanceToPoint(n) < i) return !1 } return !0 } }, { key: "intersectsBox", value: function (e) { for (var t = this.planes, n = 0; n < 6; n++) { var i = t[n]; if (Ru.x = i.normal.x > 0 ? e.max.x : e.min.x, Ru.y = i.normal.y > 0 ? e.max.y : e.min.y, Ru.z = i.normal.z > 0 ? e.max.z : e.min.z, i.distanceToPoint(Ru) < 0) return !1 } return !0 } }, { key: "containsPoint", value: function (e) { for (var t = this.planes, n = 0; n < 6; n++)if (t[n].distanceToPoint(e) < 0) return !1; return !0 } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }]), e }(); function Wu() { var e = null, t = !1, n = null, i = null; function r(t, a) { n(t, a), i = e.requestAnimationFrame(r) } return { start: function () { !0 !== t && null !== n && (i = e.requestAnimationFrame(r), t = !0) }, stop: function () { e.cancelAnimationFrame(i), t = !1 }, setAnimationLoop: function (e) { n = e }, setContext: function (t) { e = t } } } function Vu(e, t) { var n = t.isWebGL2, i = new WeakMap; return { get: function (e) { return e.isInterleavedBufferAttribute && (e = e.data), i.get(e) }, remove: function (t) { t.isInterleavedBufferAttribute && (t = t.data); var n = i.get(t); n && (e.deleteBuffer(n.buffer), i.delete(t)) }, update: function (t, r) { if (t.isGLBufferAttribute) { var a = i.get(t); (!a || a.version < t.version) && i.set(t, { buffer: t.buffer, type: t.type, bytesPerElement: t.elementSize, version: t.version }) } else { t.isInterleavedBufferAttribute && (t = t.data); var o = i.get(t); void 0 === o ? i.set(t, function (t, i) { var r, a = t.array, o = t.usage, s = e.createBuffer(); if (e.bindBuffer(i, s), e.bufferData(i, a, o), t.onUploadCallback(), a instanceof Float32Array) r = e.FLOAT; else if (a instanceof Uint16Array) if (t.isFloat16BufferAttribute) { if (!n) throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."); r = e.HALF_FLOAT } else r = e.UNSIGNED_SHORT; else if (a instanceof Int16Array) r = e.SHORT; else if (a instanceof Uint32Array) r = e.UNSIGNED_INT; else if (a instanceof Int32Array) r = e.INT; else if (a instanceof Int8Array) r = e.BYTE; else if (a instanceof Uint8Array) r = e.UNSIGNED_BYTE; else { if (!(a instanceof Uint8ClampedArray)) throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: " + a); r = e.UNSIGNED_BYTE } return { buffer: s, type: r, bytesPerElement: a.BYTES_PER_ELEMENT, version: t.version } }(t, r)) : o.version < t.version && (!function (t, i, r) { var a = i.array, o = i.updateRange; e.bindBuffer(r, t), -1 === o.count ? e.bufferSubData(r, 0, a) : (n ? e.bufferSubData(r, o.offset * a.BYTES_PER_ELEMENT, a, o.offset, o.count) : e.bufferSubData(r, o.offset * a.BYTES_PER_ELEMENT, a.subarray(o.offset, o.offset + o.count)), o.count = -1), i.onUploadCallback() }(o.buffer, t, r), o.version = t.version) } } } } var ku = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1; cr(this, n), (e = t.call(this)).type = "PlaneGeometry", e.parameters = { width: i, height: r, widthSegments: a, heightSegments: o }; for (var s = i / 2, l = r / 2, g = Math.floor(a), c = Math.floor(o), u = g + 1, C = c + 1, d = i / g, I = r / c, h = [], A = [], p = [], f = [], m = 0; m < C; m++)for (var v = m * I - l, b = 0; b < u; b++) { var y = b * d - s; A.push(y, -v, 0), p.push(0, 0, 1), f.push(b / g), f.push(1 - m / c) } for (var G = 0; G < c; G++)for (var B = 0; B < g; B++) { var Z = B + u * G, w = B + u * (G + 1), S = B + 1 + u * (G + 1), R = B + 1 + u * G; h.push(Z, w, R), h.push(w, S, R) } return e.setIndex(h), e.setAttribute("position", new Nc(A, 3)), e.setAttribute("normal", new Nc(p, 3)), e.setAttribute("uv", new Nc(f, 2)), e } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.parameters = Object.assign({}, e.parameters), this } }], [{ key: "fromJSON", value: function (e) { return new n(e.width, e.height, e.widthSegments, e.heightSegments) } }]), n }(Uc), Hu = { alphahash_fragment: "#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif", alphahash_pars_fragment: "#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif", alphamap_fragment: "#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif", alphamap_pars_fragment: "#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif", alphatest_fragment: "#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif", alphatest_pars_fragment: "#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif", aomap_fragment: "#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif", aomap_pars_fragment: "#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif", begin_vertex: "vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif", beginnormal_vertex: "vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif", bsdfs: "float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated", iridescence_fragment: "#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif", bumpmap_pars_fragment: "#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif", clipping_planes_fragment: "#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif", clipping_planes_pars_fragment: "#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif", clipping_planes_pars_vertex: "#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif", clipping_planes_vertex: "#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif", color_fragment: "#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif", color_pars_fragment: "#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif", color_pars_vertex: "#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif", color_vertex: "#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif", common: "#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated", cube_uv_reflection_fragment: "#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif", defaultnormal_vertex: "vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif", displacementmap_pars_vertex: "#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif", displacementmap_vertex: "#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif", emissivemap_fragment: "#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif", emissivemap_pars_fragment: "#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif", colorspace_fragment: "gl_FragColor = linearToOutputTexel( gl_FragColor );", colorspace_pars_fragment: "\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}", envmap_fragment: "#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif", envmap_common_pars_fragment: "#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif", envmap_pars_fragment: "#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif", envmap_pars_vertex: "#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif", envmap_physical_pars_fragment: "#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif", envmap_vertex: "#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif", fog_vertex: "#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif", fog_pars_vertex: "#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif", fog_fragment: "#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif", fog_pars_fragment: "#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif", gradientmap_pars_fragment: "#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}", lightmap_fragment: "#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif", lightmap_pars_fragment: "#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif", lights_lambert_fragment: "LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;", lights_lambert_pars_fragment: "varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert", lights_pars_begin: "uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif", lights_toon_fragment: "ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;", lights_toon_pars_fragment: "varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon", lights_phong_fragment: "BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;", lights_phong_pars_fragment: "varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong", lights_physical_fragment: "PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif", lights_physical_pars_fragment: "struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}", lights_fragment_begin: "\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal;\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif", lights_fragment_maps: "#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif", lights_fragment_end: "#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif", logdepthbuf_fragment: "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif", logdepthbuf_pars_fragment: "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif", logdepthbuf_pars_vertex: "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif", logdepthbuf_vertex: "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif", map_fragment: "#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif", map_pars_fragment: "#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif", map_particle_fragment: "#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif", map_particle_pars_fragment: "#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif", metalnessmap_fragment: "float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif", metalnessmap_pars_fragment: "#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif", morphcolor_vertex: "#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif", morphnormal_vertex: "#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif", morphtarget_pars_vertex: "#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif", morphtarget_vertex: "#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif", normal_fragment_begin: "float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;", normal_fragment_maps: "#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif", normal_pars_fragment: "#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif", normal_pars_vertex: "#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif", normal_vertex: "#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif", normalmap_pars_fragment: "#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif", clearcoat_normal_fragment_begin: "#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif", clearcoat_normal_fragment_maps: "#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif", clearcoat_pars_fragment: "#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif", iridescence_pars_fragment: "#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif", opaque_fragment: "#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );", packing: "vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}", premultiplied_alpha_fragment: "#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif", project_vertex: "vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;", dithering_fragment: "#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif", dithering_pars_fragment: "#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif", roughnessmap_fragment: "float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif", roughnessmap_pars_fragment: "#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif", shadowmap_pars_fragment: "#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif", shadowmap_pars_vertex: "#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif", shadowmap_vertex: "#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif", shadowmask_pars_fragment: "float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}", skinbase_vertex: "#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif", skinning_pars_vertex: "#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif", skinning_vertex: "#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif", skinnormal_vertex: "#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif", specularmap_fragment: "float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif", specularmap_pars_fragment: "#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif", tonemapping_fragment: "#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif", tonemapping_pars_fragment: "#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }", transmission_fragment: "#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif", transmission_pars_fragment: "#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif", uv_pars_fragment: "#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif", uv_pars_vertex: "#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif", uv_vertex: "#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif", worldpos_vertex: "#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif", background_vert: "varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}", background_frag: "uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}", backgroundCube_vert: "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}", backgroundCube_frag: "#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}", cube_vert: "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}", cube_frag: "uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}", depth_vert: "#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}", depth_frag: "#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}", distanceRGBA_vert: "#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}", distanceRGBA_frag: "#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}", equirect_vert: "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}", equirect_frag: "uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}", linedashed_vert: "uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}", linedashed_frag: "uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}", meshbasic_vert: "#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}", meshbasic_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}", meshlambert_vert: "#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}", meshlambert_frag: "#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}", meshmatcap_vert: "#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}", meshmatcap_frag: "#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}", meshnormal_vert: "#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}", meshnormal_frag: "#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}", meshphong_vert: "#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}", meshphong_frag: "#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}", meshphysical_vert: "#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}", meshphysical_frag: "#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}", meshtoon_vert: "#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}", meshtoon_frag: "#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}", points_vert: "uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}", points_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}", shadow_vert: "#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}", shadow_frag: "uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}", sprite_vert: "uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}", sprite_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}" }, Mu = { common: { diffuse: { value: new pc(16777215) }, opacity: { value: 1 }, map: { value: null }, mapTransform: { value: new ml }, alphaMap: { value: null }, alphaMapTransform: { value: new ml }, alphaTest: { value: 0 } }, specularmap: { specularMap: { value: null }, specularMapTransform: { value: new ml } }, envmap: { envMap: { value: null }, flipEnvMap: { value: -1 }, reflectivity: { value: 1 }, ior: { value: 1.5 }, refractionRatio: { value: .98 } }, aomap: { aoMap: { value: null }, aoMapIntensity: { value: 1 }, aoMapTransform: { value: new ml } }, lightmap: { lightMap: { value: null }, lightMapIntensity: { value: 1 }, lightMapTransform: { value: new ml } }, bumpmap: { bumpMap: { value: null }, bumpMapTransform: { value: new ml }, bumpScale: { value: 1 } }, normalmap: { normalMap: { value: null }, normalMapTransform: { value: new ml }, normalScale: { value: new fl(1, 1) } }, displacementmap: { displacementMap: { value: null }, displacementMapTransform: { value: new ml }, displacementScale: { value: 1 }, displacementBias: { value: 0 } }, emissivemap: { emissiveMap: { value: null }, emissiveMapTransform: { value: new ml } }, metalnessmap: { metalnessMap: { value: null }, metalnessMapTransform: { value: new ml } }, roughnessmap: { roughnessMap: { value: null }, roughnessMapTransform: { value: new ml } }, gradientmap: { gradientMap: { value: null } }, fog: { fogDensity: { value: 25e-5 }, fogNear: { value: 1 }, fogFar: { value: 2e3 }, fogColor: { value: new pc(16777215) } }, lights: { ambientLightColor: { value: [] }, lightProbe: { value: [] }, directionalLights: { value: [], properties: { direction: {}, color: {} } }, directionalLightShadows: { value: [], properties: { shadowBias: {}, shadowNormalBias: {}, shadowRadius: {}, shadowMapSize: {} } }, directionalShadowMap: { value: [] }, directionalShadowMatrix: { value: [] }, spotLights: { value: [], properties: { color: {}, position: {}, direction: {}, distance: {}, coneCos: {}, penumbraCos: {}, decay: {} } }, spotLightShadows: { value: [], properties: { shadowBias: {}, shadowNormalBias: {}, shadowRadius: {}, shadowMapSize: {} } }, spotLightMap: { value: [] }, spotShadowMap: { value: [] }, spotLightMatrix: { value: [] }, pointLights: { value: [], properties: { color: {}, position: {}, decay: {}, distance: {} } }, pointLightShadows: { value: [], properties: { shadowBias: {}, shadowNormalBias: {}, shadowRadius: {}, shadowMapSize: {}, shadowCameraNear: {}, shadowCameraFar: {} } }, pointShadowMap: { value: [] }, pointShadowMatrix: { value: [] }, hemisphereLights: { value: [], properties: { direction: {}, skyColor: {}, groundColor: {} } }, rectAreaLights: { value: [], properties: { color: {}, position: {}, width: {}, height: {} } }, ltc_1: { value: null }, ltc_2: { value: null } }, points: { diffuse: { value: new pc(16777215) }, opacity: { value: 1 }, size: { value: 1 }, scale: { value: 1 }, map: { value: null }, alphaMap: { value: null }, alphaMapTransform: { value: new ml }, alphaTest: { value: 0 }, uvTransform: { value: new ml } }, sprite: { diffuse: { value: new pc(16777215) }, opacity: { value: 1 }, center: { value: new fl(.5, .5) }, rotation: { value: 0 }, map: { value: null }, mapTransform: { value: new ml }, alphaMap: { value: null }, alphaMapTransform: { value: new ml }, alphaTest: { value: 0 } } }, Fu = { basic: { uniforms: du([Mu.common, Mu.specularmap, Mu.envmap, Mu.aomap, Mu.lightmap, Mu.fog]), vertexShader: Hu.meshbasic_vert, fragmentShader: Hu.meshbasic_frag }, lambert: { uniforms: du([Mu.common, Mu.specularmap, Mu.envmap, Mu.aomap, Mu.lightmap, Mu.emissivemap, Mu.bumpmap, Mu.normalmap, Mu.displacementmap, Mu.fog, Mu.lights, { emissive: { value: new pc(0) } }]), vertexShader: Hu.meshlambert_vert, fragmentShader: Hu.meshlambert_frag }, phong: { uniforms: du([Mu.common, Mu.specularmap, Mu.envmap, Mu.aomap, Mu.lightmap, Mu.emissivemap, Mu.bumpmap, Mu.normalmap, Mu.displacementmap, Mu.fog, Mu.lights, { emissive: { value: new pc(0) }, specular: { value: new pc(1118481) }, shininess: { value: 30 } }]), vertexShader: Hu.meshphong_vert, fragmentShader: Hu.meshphong_frag }, standard: { uniforms: du([Mu.common, Mu.envmap, Mu.aomap, Mu.lightmap, Mu.emissivemap, Mu.bumpmap, Mu.normalmap, Mu.displacementmap, Mu.roughnessmap, Mu.metalnessmap, Mu.fog, Mu.lights, { emissive: { value: new pc(0) }, roughness: { value: 1 }, metalness: { value: 0 }, envMapIntensity: { value: 1 } }]), vertexShader: Hu.meshphysical_vert, fragmentShader: Hu.meshphysical_frag }, toon: { uniforms: du([Mu.common, Mu.aomap, Mu.lightmap, Mu.emissivemap, Mu.bumpmap, Mu.normalmap, Mu.displacementmap, Mu.gradientmap, Mu.fog, Mu.lights, { emissive: { value: new pc(0) } }]), vertexShader: Hu.meshtoon_vert, fragmentShader: Hu.meshtoon_frag }, matcap: { uniforms: du([Mu.common, Mu.bumpmap, Mu.normalmap, Mu.displacementmap, Mu.fog, { matcap: { value: null } }]), vertexShader: Hu.meshmatcap_vert, fragmentShader: Hu.meshmatcap_frag }, points: { uniforms: du([Mu.points, Mu.fog]), vertexShader: Hu.points_vert, fragmentShader: Hu.points_frag }, dashed: { uniforms: du([Mu.common, Mu.fog, { scale: { value: 1 }, dashSize: { value: 1 }, totalSize: { value: 2 } }]), vertexShader: Hu.linedashed_vert, fragmentShader: Hu.linedashed_frag }, depth: { uniforms: du([Mu.common, Mu.displacementmap]), vertexShader: Hu.depth_vert, fragmentShader: Hu.depth_frag }, normal: { uniforms: du([Mu.common, Mu.bumpmap, Mu.normalmap, Mu.displacementmap, { opacity: { value: 1 } }]), vertexShader: Hu.meshnormal_vert, fragmentShader: Hu.meshnormal_frag }, sprite: { uniforms: du([Mu.sprite, Mu.fog]), vertexShader: Hu.sprite_vert, fragmentShader: Hu.sprite_frag }, background: { uniforms: { uvTransform: { value: new ml }, t2D: { value: null }, backgroundIntensity: { value: 1 } }, vertexShader: Hu.background_vert, fragmentShader: Hu.background_frag }, backgroundCube: { uniforms: { envMap: { value: null }, flipEnvMap: { value: -1 }, backgroundBlurriness: { value: 0 }, backgroundIntensity: { value: 1 } }, vertexShader: Hu.backgroundCube_vert, fragmentShader: Hu.backgroundCube_frag }, cube: { uniforms: { tCube: { value: null }, tFlip: { value: -1 }, opacity: { value: 1 } }, vertexShader: Hu.cube_vert, fragmentShader: Hu.cube_frag }, equirect: { uniforms: { tEquirect: { value: null } }, vertexShader: Hu.equirect_vert, fragmentShader: Hu.equirect_frag }, distanceRGBA: { uniforms: du([Mu.common, Mu.displacementmap, { referencePosition: { value: new Ql }, nearDistance: { value: 1 }, farDistance: { value: 1e3 } }]), vertexShader: Hu.distanceRGBA_vert, fragmentShader: Hu.distanceRGBA_frag }, shadow: { uniforms: du([Mu.lights, Mu.fog, { color: { value: new pc(0) }, opacity: { value: 1 } }]), vertexShader: Hu.shadow_vert, fragmentShader: Hu.shadow_frag } }; Fu.physical = { uniforms: du([Fu.standard.uniforms, { clearcoat: { value: 0 }, clearcoatMap: { value: null }, clearcoatMapTransform: { value: new ml }, clearcoatNormalMap: { value: null }, clearcoatNormalMapTransform: { value: new ml }, clearcoatNormalScale: { value: new fl(1, 1) }, clearcoatRoughness: { value: 0 }, clearcoatRoughnessMap: { value: null }, clearcoatRoughnessMapTransform: { value: new ml }, iridescence: { value: 0 }, iridescenceMap: { value: null }, iridescenceMapTransform: { value: new ml }, iridescenceIOR: { value: 1.3 }, iridescenceThicknessMinimum: { value: 100 }, iridescenceThicknessMaximum: { value: 400 }, iridescenceThicknessMap: { value: null }, iridescenceThicknessMapTransform: { value: new ml }, sheen: { value: 0 }, sheenColor: { value: new pc(0) }, sheenColorMap: { value: null }, sheenColorMapTransform: { value: new ml }, sheenRoughness: { value: 1 }, sheenRoughnessMap: { value: null }, sheenRoughnessMapTransform: { value: new ml }, transmission: { value: 0 }, transmissionMap: { value: null }, transmissionMapTransform: { value: new ml }, transmissionSamplerSize: { value: new fl }, transmissionSamplerMap: { value: null }, thickness: { value: 0 }, thicknessMap: { value: null }, thicknessMapTransform: { value: new ml }, attenuationDistance: { value: 0 }, attenuationColor: { value: new pc(0) }, specularColor: { value: new pc(1, 1, 1) }, specularColorMap: { value: null }, specularColorMapTransform: { value: new ml }, specularIntensity: { value: 1 }, specularIntensityMap: { value: null }, specularIntensityMapTransform: { value: new ml }, anisotropyVector: { value: new fl }, anisotropyMap: { value: null }, anisotropyMapTransform: { value: new ml } }]), vertexShader: Hu.meshphysical_vert, fragmentShader: Hu.meshphysical_frag }; var Nu = { r: 0, b: 0, g: 0 }; function Xu(e, t, n, i, r, a, o) { var s, l, g = new pc(0), c = !0 === a ? 0 : 1, u = null, C = 0, d = null; function I(t, n) { t.getRGB(Nu, Iu(e)), i.buffers.color.setClear(Nu.r, Nu.g, Nu.b, n, o) } return { getClearColor: function () { return g }, setClearColor: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; g.set(e), I(g, c = t) }, getClearAlpha: function () { return c }, setClearAlpha: function (e) { I(g, c = e) }, render: function (a, h) { var A = !1, p = !0 === h.isScene ? h.background : null; p && p.isTexture && (p = (h.backgroundBlurriness > 0 ? n : t).get(p)), null === p ? I(g, c) : p && p.isColor && (I(p, 1), A = !0); var f = e.xr.getEnvironmentBlendMode(); "additive" === f ? i.buffers.color.setClear(0, 0, 0, 1, o) : "alpha-blend" === f && i.buffers.color.setClear(0, 0, 0, 0, o), (e.autoClear || A) && e.clear(e.autoClearColor, e.autoClearDepth, e.autoClearStencil), p && (p.isCubeTexture || p.mapping === xa) ? (void 0 === l && ((l = new gu(new uu(1, 1, 1), new Au({ name: "BackgroundCubeMaterial", uniforms: Cu(Fu.backgroundCube.uniforms), vertexShader: Fu.backgroundCube.vertexShader, fragmentShader: Fu.backgroundCube.fragmentShader, side: Nr, depthTest: !1, depthWrite: !1, fog: !1 }))).geometry.deleteAttribute("normal"), l.geometry.deleteAttribute("uv"), l.onBeforeRender = function (e, t, n) { this.matrixWorld.copyPosition(n.matrixWorld) }, Object.defineProperty(l.material, "envMap", { get: function () { return this.uniforms.envMap.value } }), r.update(l)), l.material.uniforms.envMap.value = p, l.material.uniforms.flipEnvMap.value = p.isCubeTexture && !1 === p.isRenderTargetTexture ? -1 : 1, l.material.uniforms.backgroundBlurriness.value = h.backgroundBlurriness, l.material.uniforms.backgroundIntensity.value = h.backgroundIntensity, l.material.toneMapped = Hl.getTransfer(p.colorSpace) !== As, u === p && C === p.version && d === e.toneMapping || (l.material.needsUpdate = !0, u = p, C = p.version, d = e.toneMapping), l.layers.enableAll(), a.unshift(l, l.geometry, l.material, 0, 0, null)) : p && p.isTexture && (void 0 === s && ((s = new gu(new ku(2, 2), new Au({ name: "BackgroundMaterial", uniforms: Cu(Fu.background.uniforms), vertexShader: Fu.background.vertexShader, fragmentShader: Fu.background.fragmentShader, side: Fr, depthTest: !1, depthWrite: !1, fog: !1 }))).geometry.deleteAttribute("normal"), Object.defineProperty(s.material, "map", { get: function () { return this.uniforms.t2D.value } }), r.update(s)), s.material.uniforms.t2D.value = p, s.material.uniforms.backgroundIntensity.value = h.backgroundIntensity, s.material.toneMapped = Hl.getTransfer(p.colorSpace) !== As, !0 === p.matrixAutoUpdate && p.updateMatrix(), s.material.uniforms.uvTransform.value.copy(p.matrix), u === p && C === p.version && d === e.toneMapping || (s.material.needsUpdate = !0, u = p, C = p.version, d = e.toneMapping), s.layers.enableAll(), a.unshift(s, s.geometry, s.material, 0, 0, null)) } } } function Yu(e, t, n, i) { var r = e.getParameter(e.MAX_VERTEX_ATTRIBS), a = i.isWebGL2 ? null : t.get("OES_vertex_array_object"), o = i.isWebGL2 || null !== a, s = {}, l = d(null), g = l, c = !1; function u(t) { return i.isWebGL2 ? e.bindVertexArray(t) : a.bindVertexArrayOES(t) } function C(t) { return i.isWebGL2 ? e.deleteVertexArray(t) : a.deleteVertexArrayOES(t) } function d(e) { for (var t = [], n = [], i = [], a = 0; a < r; a++)t[a] = 0, n[a] = 0, i[a] = 0; return { geometry: null, program: null, wireframe: !1, newAttributes: t, enabledAttributes: n, attributeDivisors: i, object: e, attributes: {}, index: null } } function I() { for (var e = g.newAttributes, t = 0, n = e.length; t < n; t++)e[t] = 0 } function h(e) { A(e, 0) } function A(n, r) { var a = g.newAttributes, o = g.enabledAttributes, s = g.attributeDivisors; (a[n] = 1, 0 === o[n] && (e.enableVertexAttribArray(n), o[n] = 1), s[n] !== r) && ((i.isWebGL2 ? e : t.get("ANGLE_instanced_arrays"))[i.isWebGL2 ? "vertexAttribDivisor" : "vertexAttribDivisorANGLE"](n, r), s[n] = r) } function p() { for (var t = g.newAttributes, n = g.enabledAttributes, i = 0, r = n.length; i < r; i++)n[i] !== t[i] && (e.disableVertexAttribArray(i), n[i] = 0) } function f(t, n, i, r, a, o, s) { !0 === s ? e.vertexAttribIPointer(t, n, i, a, o) : e.vertexAttribPointer(t, n, i, r, a, o) } function m() { v(), c = !0, g !== l && u((g = l).object) } function v() { l.geometry = null, l.program = null, l.wireframe = !1 } return { setup: function (r, l, C, m, v) { var b = !1; if (o) { var y = function (t, n, r) { var o = !0 === r.wireframe, l = s[t.id]; void 0 === l && (l = {}, s[t.id] = l); var g = l[n.id]; void 0 === g && (g = {}, l[n.id] = g); var c = g[o]; void 0 === c && (c = d(i.isWebGL2 ? e.createVertexArray() : a.createVertexArrayOES()), g[o] = c); return c }(m, C, l); g !== y && u((g = y).object), b = function (e, t, n, i) { var r = g.attributes, a = t.attributes, o = 0, s = n.getAttributes(); for (var l in s) { if (s[l].location >= 0) { var c = r[l], u = a[l]; if (void 0 === u && ("instanceMatrix" === l && e.instanceMatrix && (u = e.instanceMatrix), "instanceColor" === l && e.instanceColor && (u = e.instanceColor)), void 0 === c) return !0; if (c.attribute !== u) return !0; if (u && c.data !== u.data) return !0; o++ } } return g.attributesNum !== o || g.index !== i }(r, m, C, v), b && function (e, t, n, i) { var r = {}, a = t.attributes, o = 0, s = n.getAttributes(); for (var l in s) { if (s[l].location >= 0) { var c = a[l]; void 0 === c && ("instanceMatrix" === l && e.instanceMatrix && (c = e.instanceMatrix), "instanceColor" === l && e.instanceColor && (c = e.instanceColor)); var u = {}; u.attribute = c, c && c.data && (u.data = c.data), r[l] = u, o++ } } g.attributes = r, g.attributesNum = o, g.index = i }(r, m, C, v) } else { var G = !0 === l.wireframe; g.geometry === m.id && g.program === C.id && g.wireframe === G || (g.geometry = m.id, g.program = C.id, g.wireframe = G, b = !0) } null !== v && n.update(v, e.ELEMENT_ARRAY_BUFFER), (b || c) && (c = !1, function (r, a, o, s) { if (!1 === i.isWebGL2 && (r.isInstancedMesh || s.isInstancedBufferGeometry) && null === t.get("ANGLE_instanced_arrays")) return; I(); var l = s.attributes, g = o.getAttributes(), c = a.defaultAttributeValues; for (var u in g) { var C = g[u]; if (C.location >= 0) { var d = l[u]; if (void 0 === d && ("instanceMatrix" === u && r.instanceMatrix && (d = r.instanceMatrix), "instanceColor" === u && r.instanceColor && (d = r.instanceColor)), void 0 !== d) { var m = d.normalized, v = d.itemSize, b = n.get(d); if (void 0 === b) continue; var y = b.buffer, G = b.type, B = b.bytesPerElement, Z = !0 === i.isWebGL2 && (G === e.INT || G === e.UNSIGNED_INT || d.gpuType === Pa); if (d.isInterleavedBufferAttribute) { var w = d.data, S = w.stride, R = d.offset; if (w.isInstancedInterleavedBuffer) { for (var x = 0; x < C.locationSize; x++)A(C.location + x, w.meshPerAttribute); !0 !== r.isInstancedMesh && void 0 === s._maxInstanceCount && (s._maxInstanceCount = w.meshPerAttribute * w.count) } else for (var W = 0; W < C.locationSize; W++)h(C.location + W); e.bindBuffer(e.ARRAY_BUFFER, y); for (var V = 0; V < C.locationSize; V++)f(C.location + V, v / C.locationSize, G, m, S * B, (R + v / C.locationSize * V) * B, Z) } else { if (d.isInstancedBufferAttribute) { for (var k = 0; k < C.locationSize; k++)A(C.location + k, d.meshPerAttribute); !0 !== r.isInstancedMesh && void 0 === s._maxInstanceCount && (s._maxInstanceCount = d.meshPerAttribute * d.count) } else for (var H = 0; H < C.locationSize; H++)h(C.location + H); e.bindBuffer(e.ARRAY_BUFFER, y); for (var M = 0; M < C.locationSize; M++)f(C.location + M, v / C.locationSize, G, m, v * B, v / C.locationSize * M * B, Z) } } else if (void 0 !== c) { var F = c[u]; if (void 0 !== F) switch (F.length) { case 2: e.vertexAttrib2fv(C.location, F); break; case 3: e.vertexAttrib3fv(C.location, F); break; case 4: e.vertexAttrib4fv(C.location, F); break; default: e.vertexAttrib1fv(C.location, F) } } } } p() }(r, l, C, m), null !== v && e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, n.get(v).buffer)) }, reset: m, resetDefaultState: v, dispose: function () { for (var e in m(), s) { var t = s[e]; for (var n in t) { var i = t[n]; for (var r in i) C(i[r].object), delete i[r]; delete t[n] } delete s[e] } }, releaseStatesOfGeometry: function (e) { if (void 0 !== s[e.id]) { var t = s[e.id]; for (var n in t) { var i = t[n]; for (var r in i) C(i[r].object), delete i[r]; delete t[n] } delete s[e.id] } }, releaseStatesOfProgram: function (e) { for (var t in s) { var n = s[t]; if (void 0 !== n[e.id]) { var i = n[e.id]; for (var r in i) C(i[r].object), delete i[r]; delete n[e.id] } } }, initAttributes: I, enableAttribute: h, disableUnusedAttributes: p } } function Ku(e, t, n, i) { var r, a = i.isWebGL2; this.setMode = function (e) { r = e }, this.render = function (t, i) { e.drawArrays(r, t, i), n.update(i, r, 1) }, this.renderInstances = function (i, o, s) { if (0 !== s) { var l, g; if (a) l = e, g = "drawArraysInstanced"; else if (g = "drawArraysInstancedANGLE", null === (l = t.get("ANGLE_instanced_arrays"))) return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."); l[g](r, i, o, s), n.update(o, r, s) } } } function Lu(e, t, n) { var i; function r(t) { if ("highp" === t) { if (e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.HIGH_FLOAT).precision > 0 && e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.HIGH_FLOAT).precision > 0) return "highp"; t = "mediump" } return "mediump" === t && e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.MEDIUM_FLOAT).precision > 0 && e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.MEDIUM_FLOAT).precision > 0 ? "mediump" : "lowp" } var a = "undefined" !== typeof WebGL2RenderingContext && "WebGL2RenderingContext" === e.constructor.name, o = void 0 !== n.precision ? n.precision : "highp", s = r(o); s !== o && (console.warn("THREE.WebGLRenderer:", o, "not supported, using", s, "instead."), o = s); var l = a || t.has("WEBGL_draw_buffers"), g = !0 === n.logarithmicDepthBuffer, c = e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS), u = e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS), C = e.getParameter(e.MAX_TEXTURE_SIZE), d = e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE), I = e.getParameter(e.MAX_VERTEX_ATTRIBS), h = e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS), A = e.getParameter(e.MAX_VARYING_VECTORS), p = e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS), f = u > 0, m = a || t.has("OES_texture_float"); return { isWebGL2: a, drawBuffers: l, getMaxAnisotropy: function () { if (void 0 !== i) return i; if (!0 === t.has("EXT_texture_filter_anisotropic")) { var n = t.get("EXT_texture_filter_anisotropic"); i = e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT) } else i = 0; return i }, getMaxPrecision: r, precision: o, logarithmicDepthBuffer: g, maxTextures: c, maxVertexTextures: u, maxTextureSize: C, maxCubemapSize: d, maxAttributes: I, maxVertexUniforms: h, maxVaryings: A, maxFragmentUniforms: p, vertexTextures: f, floatFragmentTextures: m, floatVertexTextures: f && m, maxSamples: a ? e.getParameter(e.MAX_SAMPLES) : 0 } } function zu(e) { var t = this, n = null, i = 0, r = !1, a = !1, o = new wu, s = new ml, l = { value: null, needsUpdate: !1 }; function g(e, n, i, r) { var a = null !== e ? e.length : 0, g = null; if (0 !== a) { if (g = l.value, !0 !== r || null === g) { var c = i + 4 * a, u = n.matrixWorldInverse; s.getNormalMatrix(u), (null === g || g.length < c) && (g = new Float32Array(c)); for (var C = 0, d = i; C !== a; ++C, d += 4)o.copy(e[C]).applyMatrix4(u, s), o.normal.toArray(g, d), g[d + 3] = o.constant } l.value = g, l.needsUpdate = !0 } return t.numPlanes = a, t.numIntersection = 0, g } this.uniform = l, this.numPlanes = 0, this.numIntersection = 0, this.init = function (e, t) { var n = 0 !== e.length || t || 0 !== i || r; return r = t, i = e.length, n }, this.beginShadows = function () { a = !0, g(null) }, this.endShadows = function () { a = !1 }, this.setGlobalState = function (e, t) { n = g(e, t, 0) }, this.setState = function (o, s, c) { var u = o.clippingPlanes, C = o.clipIntersection, d = o.clipShadows, I = e.get(o); if (!r || null === u || 0 === u.length || a && !d) a ? g(null) : function () { l.value !== n && (l.value = n, l.needsUpdate = i > 0); t.numPlanes = i, t.numIntersection = 0 }(); else { var h = a ? 0 : i, A = 4 * h, p = I.clippingState || null; l.value = p, p = g(u, s, A, c); for (var f = 0; f !== A; ++f)p[f] = n[f]; I.clippingState = p, this.numIntersection = C ? this.numPlanes : 0, this.numPlanes += h } } } function Eu(e) { var t = new WeakMap; function n(e, t) { return t === Sa ? e.mapping = Za : t === Ra && (e.mapping = wa), e } function i(e) { var n = e.target; n.removeEventListener("dispose", i); var r = t.get(n); void 0 !== r && (t.delete(n), r.dispose()) } return { get: function (r) { if (r && r.isTexture && !1 === r.isRenderTargetTexture) { var a = r.mapping; if (a === Sa || a === Ra) { if (t.has(r)) return n(t.get(r).texture, r.mapping); var o = r.image; if (o && o.height > 0) { var s = new yu(o.height / 2); return s.fromEquirectangularTexture(e, r), t.set(r, s), r.addEventListener("dispose", i), n(s.texture, r.mapping) } return null } } return r }, dispose: function () { t = new WeakMap } } } var Tu = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : -1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : -1, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : .1, l = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 2e3; return cr(this, n), (e = t.call(this)).isOrthographicCamera = !0, e.type = "OrthographicCamera", e.zoom = 1, e.view = null, e.left = i, e.right = r, e.top = a, e.bottom = o, e.near = s, e.far = l, e.updateProjectionMatrix(), e } return dr(n, [{ key: "copy", value: function (e, t) { return yr(hr(n.prototype), "copy", this).call(this, e, t), this.left = e.left, this.right = e.right, this.top = e.top, this.bottom = e.bottom, this.near = e.near, this.far = e.far, this.zoom = e.zoom, this.view = null === e.view ? null : Object.assign({}, e.view), this } }, { key: "setViewOffset", value: function (e, t, n, i, r, a) { null === this.view && (this.view = { enabled: !0, fullWidth: 1, fullHeight: 1, offsetX: 0, offsetY: 0, width: 1, height: 1 }), this.view.enabled = !0, this.view.fullWidth = e, this.view.fullHeight = t, this.view.offsetX = n, this.view.offsetY = i, this.view.width = r, this.view.height = a, this.updateProjectionMatrix() } }, { key: "clearViewOffset", value: function () { null !== this.view && (this.view.enabled = !1), this.updateProjectionMatrix() } }, { key: "updateProjectionMatrix", value: function () { var e = (this.right - this.left) / (2 * this.zoom), t = (this.top - this.bottom) / (2 * this.zoom), n = (this.right + this.left) / 2, i = (this.top + this.bottom) / 2, r = n - e, a = n + e, o = i + t, s = i - t; if (null !== this.view && this.view.enabled) { var l = (this.right - this.left) / this.view.fullWidth / this.zoom, g = (this.top - this.bottom) / this.view.fullHeight / this.zoom; a = (r += l * this.view.offsetX) + l * this.view.width, s = (o -= g * this.view.offsetY) - g * this.view.height } this.projectionMatrix.makeOrthographic(r, a, o, s, this.near, this.far, this.coordinateSystem), this.projectionMatrixInverse.copy(this.projectionMatrix).invert() } }, { key: "toJSON", value: function (e) { var t = yr(hr(n.prototype), "toJSON", this).call(this, e); return t.object.zoom = this.zoom, t.object.left = this.left, t.object.right = this.right, t.object.top = this.top, t.object.bottom = this.bottom, t.object.near = this.near, t.object.far = this.far, null !== this.view && (t.object.view = Object.assign({}, this.view)), t } }]), n }(pu), _u = [.125, .215, .35, .446, .526, .582], Uu = 20, Du = new Tu, Pu = new pc, Ju = null, Ou = (1 + Math.sqrt(5)) / 2, ju = 1 / Ou, Qu = [new Ql(1, 1, 1), new Ql(-1, 1, 1), new Ql(1, 1, -1), new Ql(-1, 1, -1), new Ql(0, Ou, ju), new Ql(0, Ou, -ju), new Ql(ju, 0, Ou), new Ql(-ju, 0, Ou), new Ql(Ou, ju, 0), new Ql(-Ou, ju, 0)], qu = function () { function e(t) { cr(this, e), this._renderer = t, this._pingPongRenderTarget = null, this._lodMax = 0, this._cubeSize = 0, this._lodPlanes = [], this._sizeLods = [], this._sigmas = [], this._blurMaterial = null, this._cubemapMaterial = null, this._equirectMaterial = null, this._compileMaterial(this._blurMaterial) } return dr(e, [{ key: "fromScene", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : .1, i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 100; Ju = this._renderer.getRenderTarget(), this._setSize(256); var r = this._allocateTargets(); return r.depthBuffer = !0, this._sceneToCubeUV(e, n, i, r), t > 0 && this._blur(r, 0, 0, t), this._applyPMREM(r), this._cleanup(r), r } }, { key: "fromEquirectangular", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; return this._fromTexture(e, t) } }, { key: "fromCubemap", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; return this._fromTexture(e, t) } }, { key: "compileCubemapShader", value: function () { null === this._cubemapMaterial && (this._cubemapMaterial = nC(), this._compileMaterial(this._cubemapMaterial)) } }, { key: "compileEquirectangularShader", value: function () { null === this._equirectMaterial && (this._equirectMaterial = tC(), this._compileMaterial(this._equirectMaterial)) } }, { key: "dispose", value: function () { this._dispose(), null !== this._cubemapMaterial && this._cubemapMaterial.dispose(), null !== this._equirectMaterial && this._equirectMaterial.dispose() } }, { key: "_setSize", value: function (e) { this._lodMax = Math.floor(Math.log2(e)), this._cubeSize = Math.pow(2, this._lodMax) } }, { key: "_dispose", value: function () { null !== this._blurMaterial && this._blurMaterial.dispose(), null !== this._pingPongRenderTarget && this._pingPongRenderTarget.dispose(); for (var e = 0; e < this._lodPlanes.length; e++)this._lodPlanes[e].dispose() } }, { key: "_cleanup", value: function (e) { this._renderer.setRenderTarget(Ju), e.scissorTest = !1, eC(e, 0, 0, e.width, e.height) } }, { key: "_fromTexture", value: function (e, t) { e.mapping === Za || e.mapping === wa ? this._setSize(0 === e.image.length ? 16 : e.image[0].width || e.image[0].image.width) : this._setSize(e.image.width / 4), Ju = this._renderer.getRenderTarget(); var n = t || this._allocateTargets(); return this._textureToCubeUV(e, n), this._applyPMREM(n), this._cleanup(n), n } }, { key: "_allocateTargets", value: function () { var e = 3 * Math.max(this._cubeSize, 112), t = 4 * this._cubeSize, n = { magFilter: Ya, minFilter: Ya, generateMipmaps: !1, type: ja, format: to, colorSpace: Cs, depthBuffer: !1 }, i = $u(e, t, n); if (null === this._pingPongRenderTarget || this._pingPongRenderTarget.width !== e || this._pingPongRenderTarget.height !== t) { null !== this._pingPongRenderTarget && this._dispose(), this._pingPongRenderTarget = $u(e, t, n); var r = this._lodMax, a = function (e) { for (var t = [], n = [], i = [], r = e, a = e - 4 + 1 + _u.length, o = 0; o < a; o++) { var s = Math.pow(2, r); n.push(s); var l = 1 / s; o > e - 4 ? l = _u[o - e + 4 - 1] : 0 === o && (l = 0), i.push(l); for (var g = 1 / (s - 2), c = -g, u = 1 + g, C = [c, c, u, c, u, u, c, c, u, u, c, u], d = 6, I = 6, h = 3, A = 2, p = 1, f = new Float32Array(h * I * d), m = new Float32Array(A * I * d), v = new Float32Array(p * I * d), b = 0; b < d; b++) { var y = b % 3 * 2 / 3 - 1, G = b > 2 ? 0 : -1, B = [y, G, 0, y + 2 / 3, G, 0, y + 2 / 3, G + 1, 0, y, G, 0, y + 2 / 3, G + 1, 0, y, G + 1, 0]; f.set(B, h * I * b), m.set(C, A * I * b); var Z = [b, b, b, b, b, b]; v.set(Z, p * I * b) } var w = new Uc; w.setAttribute("position", new Sc(f, h)), w.setAttribute("uv", new Sc(m, A)), w.setAttribute("faceIndex", new Sc(v, p)), t.push(w), r > 4 && r-- } return { lodPlanes: t, sizeLods: n, sigmas: i } }(r); this._sizeLods = a.sizeLods, this._lodPlanes = a.lodPlanes, this._sigmas = a.sigmas, this._blurMaterial = function (e, t, n) { var i = new Float32Array(Uu), r = new Ql(0, 1, 0), a = new Au({ name: "SphericalGaussianBlur", defines: { n: Uu, CUBEUV_TEXEL_WIDTH: 1 / t, CUBEUV_TEXEL_HEIGHT: 1 / n, CUBEUV_MAX_MIP: "".concat(e, ".0") }, uniforms: { envMap: { value: null }, samples: { value: 1 }, weights: { value: i }, latitudinal: { value: !1 }, dTheta: { value: 0 }, mipInt: { value: 0 }, poleAxis: { value: r } }, vertexShader: "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t", fragmentShader: "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t", blending: Kr, depthTest: !1, depthWrite: !1 }); return a }(r, e, t) } return i } }, { key: "_compileMaterial", value: function (e) { var t = new gu(this._lodPlanes[0], e); this._renderer.compile(t, Du) } }, { key: "_sceneToCubeUV", value: function (e, t, n, i) { var r = new fu(90, 1, t, n), a = [1, -1, 1, 1, 1, 1], o = [1, 1, 1, -1, -1, -1], s = this._renderer, l = s.autoClear, g = s.toneMapping; s.getClearColor(Pu), s.toneMapping = fa, s.autoClear = !1; var c = new mc({ name: "PMREM.Background", side: Nr, depthWrite: !1, depthTest: !1 }), u = new gu(new uu, c), C = !1, d = e.background; d ? d.isColor && (c.color.copy(d), e.background = null, C = !0) : (c.color.copy(Pu), C = !0); for (var I = 0; I < 6; I++) { var h = I % 3; 0 === h ? (r.up.set(0, a[I], 0), r.lookAt(o[I], 0, 0)) : 1 === h ? (r.up.set(0, 0, a[I]), r.lookAt(0, o[I], 0)) : (r.up.set(0, a[I], 0), r.lookAt(0, 0, o[I])); var A = this._cubeSize; eC(i, h * A, I > 2 ? A : 0, A, A), s.setRenderTarget(i), C && s.render(u, r), s.render(e, r) } u.geometry.dispose(), u.material.dispose(), s.toneMapping = g, s.autoClear = l, e.background = d } }, { key: "_textureToCubeUV", value: function (e, t) { var n = this._renderer, i = e.mapping === Za || e.mapping === wa; i ? (null === this._cubemapMaterial && (this._cubemapMaterial = nC()), this._cubemapMaterial.uniforms.flipEnvMap.value = !1 === e.isRenderTargetTexture ? -1 : 1) : null === this._equirectMaterial && (this._equirectMaterial = tC()); var r = i ? this._cubemapMaterial : this._equirectMaterial, a = new gu(this._lodPlanes[0], r); r.uniforms.envMap.value = e; var o = this._cubeSize; eC(t, 0, 0, 3 * o, 2 * o), n.setRenderTarget(t), n.render(a, Du) } }, { key: "_applyPMREM", value: function (e) { var t = this._renderer, n = t.autoClear; t.autoClear = !1; for (var i = 1; i < this._lodPlanes.length; i++) { var r = Math.sqrt(this._sigmas[i] * this._sigmas[i] - this._sigmas[i - 1] * this._sigmas[i - 1]), a = Qu[(i - 1) % Qu.length]; this._blur(e, i - 1, i, r, a) } t.autoClear = n } }, { key: "_blur", value: function (e, t, n, i, r) { var a = this._pingPongRenderTarget; this._halfBlur(e, a, t, n, i, "latitudinal", r), this._halfBlur(a, e, n, n, i, "longitudinal", r) } }, { key: "_halfBlur", value: function (e, t, n, i, r, a, o) { var s = this._renderer, l = this._blurMaterial; "latitudinal" !== a && "longitudinal" !== a && console.error("blur direction must be either latitudinal or longitudinal!"); var g = new gu(this._lodPlanes[i], l), c = l.uniforms, u = this._sizeLods[n] - 1, C = isFinite(r) ? Math.PI / (2 * u) : 2 * Math.PI / 39, d = r / C, I = isFinite(r) ? 1 + Math.floor(3 * d) : Uu; I > Uu && console.warn("sigmaRadians, ".concat(r, ", is too large and will clip, as it requested ").concat(I, " samples when the maximum is set to ").concat(Uu)); for (var h = [], A = 0, p = 0; p < Uu; ++p) { var f = p / d, m = Math.exp(-f * f / 2); h.push(m), 0 === p ? A += m : p < I && (A += 2 * m) } for (var v = 0; v < h.length; v++)h[v] = h[v] / A; c.envMap.value = e.texture, c.samples.value = I, c.weights.value = h, c.latitudinal.value = "latitudinal" === a, o && (c.poleAxis.value = o); var b = this._lodMax; c.dTheta.value = C, c.mipInt.value = b - n; var y = this._sizeLods[i]; eC(t, 3 * y * (i > b - 4 ? i - b + 4 : 0), 4 * (this._cubeSize - y), 3 * y, 2 * y), s.setRenderTarget(t), s.render(g, Du) } }]), e }(); function $u(e, t, n) { var i = new _l(e, t, n); return i.texture.mapping = xa, i.texture.name = "PMREM.cubeUv", i.scissorTest = !0, i } function eC(e, t, n, i, r) { e.viewport.set(t, n, i, r), e.scissor.set(t, n, i, r) } function tC() { return new Au({ name: "EquirectangularToCubeUV", uniforms: { envMap: { value: null } }, vertexShader: "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t", fragmentShader: "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t", blending: Kr, depthTest: !1, depthWrite: !1 }) } function nC() { return new Au({ name: "CubemapToCubeUV", uniforms: { envMap: { value: null }, flipEnvMap: { value: -1 } }, vertexShader: "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t", fragmentShader: "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t", blending: Kr, depthTest: !1, depthWrite: !1 }) } function iC(e) { var t = new WeakMap, n = null; function i(e) { var n = e.target; n.removeEventListener("dispose", i); var r = t.get(n); void 0 !== r && (t.delete(n), r.dispose()) } return { get: function (r) { if (r && r.isTexture) { var a = r.mapping, o = a === Sa || a === Ra, s = a === Za || a === wa; if (o || s) { if (r.isRenderTargetTexture && !0 === r.needsPMREMUpdate) { r.needsPMREMUpdate = !1; var l = t.get(r); return null === n && (n = new qu(e)), l = o ? n.fromEquirectangular(r, l) : n.fromCubemap(r, l), t.set(r, l), l.texture } if (t.has(r)) return t.get(r).texture; var g = r.image; if (o && g && g.height > 0 || s && g && function (e) { for (var t = 0, n = 6, i = 0; i < n; i++)void 0 !== e[i] && t++; return t === n }(g)) { null === n && (n = new qu(e)); var c = o ? n.fromEquirectangular(r) : n.fromCubemap(r); return t.set(r, c), r.addEventListener("dispose", i), c.texture } return null } } return r }, dispose: function () { t = new WeakMap, null !== n && (n.dispose(), n = null) } } } function rC(e) { var t = {}; function n(n) { if (void 0 !== t[n]) return t[n]; var i; switch (n) { case "WEBGL_depth_texture": i = e.getExtension("WEBGL_depth_texture") || e.getExtension("MOZ_WEBGL_depth_texture") || e.getExtension("WEBKIT_WEBGL_depth_texture"); break; case "EXT_texture_filter_anisotropic": i = e.getExtension("EXT_texture_filter_anisotropic") || e.getExtension("MOZ_EXT_texture_filter_anisotropic") || e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"); break; case "WEBGL_compressed_texture_s3tc": i = e.getExtension("WEBGL_compressed_texture_s3tc") || e.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"); break; case "WEBGL_compressed_texture_pvrtc": i = e.getExtension("WEBGL_compressed_texture_pvrtc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"); break; default: i = e.getExtension(n) }return t[n] = i, i } return { has: function (e) { return null !== n(e) }, init: function (e) { e.isWebGL2 ? n("EXT_color_buffer_float") : (n("WEBGL_depth_texture"), n("OES_texture_float"), n("OES_texture_half_float"), n("OES_texture_half_float_linear"), n("OES_standard_derivatives"), n("OES_element_index_uint"), n("OES_vertex_array_object"), n("ANGLE_instanced_arrays")), n("OES_texture_float_linear"), n("EXT_color_buffer_half_float"), n("WEBGL_multisampled_render_to_texture") }, get: function (e) { var t = n(e); return null === t && console.warn("THREE.WebGLRenderer: " + e + " extension not supported."), t } } } function aC(e, t, n, i) { var r = {}, a = new WeakMap; function o(e) { var s = e.target; for (var l in null !== s.index && t.remove(s.index), s.attributes) t.remove(s.attributes[l]); for (var g in s.morphAttributes) for (var c = s.morphAttributes[g], u = 0, C = c.length; u < C; u++)t.remove(c[u]); s.removeEventListener("dispose", o), delete r[s.id]; var d = a.get(s); d && (t.remove(d), a.delete(s)), i.releaseStatesOfGeometry(s), !0 === s.isInstancedBufferGeometry && delete s._maxInstanceCount, n.memory.geometries-- } function s(e) { var n = [], i = e.index, r = e.attributes.position, o = 0; if (null !== i) { var s = i.array; o = i.version; for (var l = 0, g = s.length; l < g; l += 3) { var c = s[l + 0], u = s[l + 1], C = s[l + 2]; n.push(c, u, u, C, C, c) } } else { if (void 0 === r) return; var d = r.array; o = r.version; for (var I = 0, h = d.length / 3 - 1; I < h; I += 3) { var A = I + 0, p = I + 1, f = I + 2; n.push(A, p, p, f, f, A) } } var m = new (bl(n) ? Mc : kc)(n, 1); m.version = o; var v = a.get(e); v && t.remove(v), a.set(e, m) } return { get: function (e, t) { return !0 === r[t.id] || (t.addEventListener("dispose", o), r[t.id] = !0, n.memory.geometries++), t }, update: function (n) { var i = n.attributes; for (var r in i) t.update(i[r], e.ARRAY_BUFFER); var a = n.morphAttributes; for (var o in a) for (var s = a[o], l = 0, g = s.length; l < g; l++)t.update(s[l], e.ARRAY_BUFFER) }, getWireframeAttribute: function (e) { var t = a.get(e); if (t) { var n = e.index; null !== n && t.version < n.version && s(e) } else s(e); return a.get(e) } } } function oC(e, t, n, i) { var r, a, o, s = i.isWebGL2; this.setMode = function (e) { r = e }, this.setIndex = function (e) { a = e.type, o = e.bytesPerElement }, this.render = function (t, i) { e.drawElements(r, i, a, t * o), n.update(i, r, 1) }, this.renderInstances = function (i, l, g) { if (0 !== g) { var c, u; if (s) c = e, u = "drawElementsInstanced"; else if (u = "drawElementsInstancedANGLE", null === (c = t.get("ANGLE_instanced_arrays"))) return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."); c[u](r, l, a, i * o, g), n.update(l, r, g) } } } function sC(e) { var t = { frame: 0, calls: 0, triangles: 0, points: 0, lines: 0 }; return { memory: { geometries: 0, textures: 0 }, render: t, programs: null, autoReset: !0, reset: function () { t.calls = 0, t.triangles = 0, t.points = 0, t.lines = 0 }, update: function (n, i, r) { switch (t.calls++, i) { case e.TRIANGLES: t.triangles += r * (n / 3); break; case e.LINES: t.lines += r * (n / 2); break; case e.LINE_STRIP: t.lines += r * (n - 1); break; case e.LINE_LOOP: t.lines += r * n; break; case e.POINTS: t.points += r * n; break; default: console.error("THREE.WebGLInfo: Unknown draw mode:", i) } } } } function lC(e, t) { return e[0] - t[0] } function gC(e, t) { return Math.abs(t[1]) - Math.abs(e[1]) } function cC(e, t, n) { for (var i = {}, r = new Float32Array(8), a = new WeakMap, o = new El, s = [], l = 0; l < 8; l++)s[l] = [l, 0]; return { update: function (l, g, c) { var u = l.morphTargetInfluences; if (!0 === t.isWebGL2) { var C = g.morphAttributes.position || g.morphAttributes.normal || g.morphAttributes.color, d = void 0 !== C ? C.length : 0, I = a.get(g); if (void 0 === I || I.count !== d) { void 0 !== I && I.texture.dispose(); var h = void 0 !== g.morphAttributes.position, A = void 0 !== g.morphAttributes.normal, p = void 0 !== g.morphAttributes.color, f = g.morphAttributes.position || [], m = g.morphAttributes.normal || [], v = g.morphAttributes.color || [], b = 0; !0 === h && (b = 1), !0 === A && (b = 2), !0 === p && (b = 3); var y = g.attributes.position.count * b, G = 1; y > t.maxTextureSize && (G = Math.ceil(y / t.maxTextureSize), y = t.maxTextureSize); var B = new Float32Array(y * G * 4 * d), Z = new Ul(B, y, G, d); Z.type = Oa, Z.needsUpdate = !0; for (var w = 4 * b, S = 0; S < d; S++)for (var R = f[S], x = m[S], W = v[S], V = y * G * 4 * S, k = 0; k < R.count; k++) { var H = k * w; !0 === h && (o.fromBufferAttribute(R, k), B[V + H + 0] = o.x, B[V + H + 1] = o.y, B[V + H + 2] = o.z, B[V + H + 3] = 0), !0 === A && (o.fromBufferAttribute(x, k), B[V + H + 4] = o.x, B[V + H + 5] = o.y, B[V + H + 6] = o.z, B[V + H + 7] = 0), !0 === p && (o.fromBufferAttribute(W, k), B[V + H + 8] = o.x, B[V + H + 9] = o.y, B[V + H + 10] = o.z, B[V + H + 11] = 4 === W.itemSize ? o.w : 1) } I = { count: d, texture: Z, size: new fl(y, G) }, a.set(g, I), g.addEventListener("dispose", (function e() { Z.dispose(), a.delete(g), g.removeEventListener("dispose", e) })) } for (var M = 0, F = 0; F < u.length; F++)M += u[F]; var N = g.morphTargetsRelative ? 1 : 1 - M; c.getUniforms().setValue(e, "morphTargetBaseInfluence", N), c.getUniforms().setValue(e, "morphTargetInfluences", u), c.getUniforms().setValue(e, "morphTargetsTexture", I.texture, n), c.getUniforms().setValue(e, "morphTargetsTextureSize", I.size) } else { var X = void 0 === u ? 0 : u.length, Y = i[g.id]; if (void 0 === Y || Y.length !== X) { Y = []; for (var K = 0; K < X; K++)Y[K] = [K, 0]; i[g.id] = Y } for (var L = 0; L < X; L++) { var z = Y[L]; z[0] = L, z[1] = u[L] } Y.sort(gC); for (var E = 0; E < 8; E++)E < X && Y[E][1] ? (s[E][0] = Y[E][0], s[E][1] = Y[E][1]) : (s[E][0] = Number.MAX_SAFE_INTEGER, s[E][1] = 0); s.sort(lC); for (var T = g.morphAttributes.position, _ = g.morphAttributes.normal, U = 0, D = 0; D < 8; D++) { var P = s[D], J = P[0], O = P[1]; J !== Number.MAX_SAFE_INTEGER && O ? (T && g.getAttribute("morphTarget" + D) !== T[J] && g.setAttribute("morphTarget" + D, T[J]), _ && g.getAttribute("morphNormal" + D) !== _[J] && g.setAttribute("morphNormal" + D, _[J]), r[D] = O, U += O) : (T && !0 === g.hasAttribute("morphTarget" + D) && g.deleteAttribute("morphTarget" + D), _ && !0 === g.hasAttribute("morphNormal" + D) && g.deleteAttribute("morphNormal" + D), r[D] = 0) } var j = g.morphTargetsRelative ? 1 : 1 - U; c.getUniforms().setValue(e, "morphTargetBaseInfluence", j), c.getUniforms().setValue(e, "morphTargetInfluences", r) } } } } function uC(e, t, n, i) { var r = new WeakMap; function a(e) { var t = e.target; t.removeEventListener("dispose", a), n.remove(t.instanceMatrix), null !== t.instanceColor && n.remove(t.instanceColor) } return { update: function (o) { var s = i.render.frame, l = o.geometry, g = t.get(o, l); if (r.get(g) !== s && (t.update(g), r.set(g, s)), o.isInstancedMesh && (!1 === o.hasEventListener("dispose", a) && o.addEventListener("dispose", a), r.get(o) !== s && (n.update(o.instanceMatrix, e.ARRAY_BUFFER), null !== o.instanceColor && n.update(o.instanceColor, e.ARRAY_BUFFER), r.set(o, s))), o.isSkinnedMesh) { var c = o.skeleton; r.get(c) !== s && (c.update(), r.set(c, s)) } return g }, dispose: function () { r = new WeakMap } } } var CC = new zl, dC = new Ul, IC = new Pl, hC = new bu, AC = [], pC = [], fC = new Float32Array(16), mC = new Float32Array(9), vC = new Float32Array(4); function bC(e, t, n) { var i = e[0]; if (i <= 0 || i > 0) return e; var r = t * n, a = AC[r]; if (void 0 === a && (a = new Float32Array(r), AC[r] = a), 0 !== t) { i.toArray(a, 0); for (var o = 1, s = 0; o !== t; ++o)s += n, e[o].toArray(a, s) } return a } function yC(e, t) { if (e.length !== t.length) return !1; for (var n = 0, i = e.length; n < i; n++)if (e[n] !== t[n]) return !1; return !0 } function GC(e, t) { for (var n = 0, i = t.length; n < i; n++)e[n] = t[n] } function BC(e, t) { var n = pC[t]; void 0 === n && (n = new Int32Array(t), pC[t] = n); for (var i = 0; i !== t; ++i)n[i] = e.allocateTextureUnit(); return n } function ZC(e, t) { var n = this.cache; n[0] !== t && (e.uniform1f(this.addr, t), n[0] = t) } function wC(e, t) { var n = this.cache; if (void 0 !== t.x) n[0] === t.x && n[1] === t.y || (e.uniform2f(this.addr, t.x, t.y), n[0] = t.x, n[1] = t.y); else { if (yC(n, t)) return; e.uniform2fv(this.addr, t), GC(n, t) } } function SC(e, t) { var n = this.cache; if (void 0 !== t.x) n[0] === t.x && n[1] === t.y && n[2] === t.z || (e.uniform3f(this.addr, t.x, t.y, t.z), n[0] = t.x, n[1] = t.y, n[2] = t.z); else if (void 0 !== t.r) n[0] === t.r && n[1] === t.g && n[2] === t.b || (e.uniform3f(this.addr, t.r, t.g, t.b), n[0] = t.r, n[1] = t.g, n[2] = t.b); else { if (yC(n, t)) return; e.uniform3fv(this.addr, t), GC(n, t) } } function RC(e, t) { var n = this.cache; if (void 0 !== t.x) n[0] === t.x && n[1] === t.y && n[2] === t.z && n[3] === t.w || (e.uniform4f(this.addr, t.x, t.y, t.z, t.w), n[0] = t.x, n[1] = t.y, n[2] = t.z, n[3] = t.w); else { if (yC(n, t)) return; e.uniform4fv(this.addr, t), GC(n, t) } } function xC(e, t) { var n = this.cache, i = t.elements; if (void 0 === i) { if (yC(n, t)) return; e.uniformMatrix2fv(this.addr, !1, t), GC(n, t) } else { if (yC(n, i)) return; vC.set(i), e.uniformMatrix2fv(this.addr, !1, vC), GC(n, i) } } function WC(e, t) { var n = this.cache, i = t.elements; if (void 0 === i) { if (yC(n, t)) return; e.uniformMatrix3fv(this.addr, !1, t), GC(n, t) } else { if (yC(n, i)) return; mC.set(i), e.uniformMatrix3fv(this.addr, !1, mC), GC(n, i) } } function VC(e, t) { var n = this.cache, i = t.elements; if (void 0 === i) { if (yC(n, t)) return; e.uniformMatrix4fv(this.addr, !1, t), GC(n, t) } else { if (yC(n, i)) return; fC.set(i), e.uniformMatrix4fv(this.addr, !1, fC), GC(n, i) } } function kC(e, t) { var n = this.cache; n[0] !== t && (e.uniform1i(this.addr, t), n[0] = t) } function HC(e, t) { var n = this.cache; if (void 0 !== t.x) n[0] === t.x && n[1] === t.y || (e.uniform2i(this.addr, t.x, t.y), n[0] = t.x, n[1] = t.y); else { if (yC(n, t)) return; e.uniform2iv(this.addr, t), GC(n, t) } } function MC(e, t) { var n = this.cache; if (void 0 !== t.x) n[0] === t.x && n[1] === t.y && n[2] === t.z || (e.uniform3i(this.addr, t.x, t.y, t.z), n[0] = t.x, n[1] = t.y, n[2] = t.z); else { if (yC(n, t)) return; e.uniform3iv(this.addr, t), GC(n, t) } } function FC(e, t) { var n = this.cache; if (void 0 !== t.x) n[0] === t.x && n[1] === t.y && n[2] === t.z && n[3] === t.w || (e.uniform4i(this.addr, t.x, t.y, t.z, t.w), n[0] = t.x, n[1] = t.y, n[2] = t.z, n[3] = t.w); else { if (yC(n, t)) return; e.uniform4iv(this.addr, t), GC(n, t) } } function NC(e, t) { var n = this.cache; n[0] !== t && (e.uniform1ui(this.addr, t), n[0] = t) } function XC(e, t) { var n = this.cache; if (void 0 !== t.x) n[0] === t.x && n[1] === t.y || (e.uniform2ui(this.addr, t.x, t.y), n[0] = t.x, n[1] = t.y); else { if (yC(n, t)) return; e.uniform2uiv(this.addr, t), GC(n, t) } } function YC(e, t) { var n = this.cache; if (void 0 !== t.x) n[0] === t.x && n[1] === t.y && n[2] === t.z || (e.uniform3ui(this.addr, t.x, t.y, t.z), n[0] = t.x, n[1] = t.y, n[2] = t.z); else { if (yC(n, t)) return; e.uniform3uiv(this.addr, t), GC(n, t) } } function KC(e, t) { var n = this.cache; if (void 0 !== t.x) n[0] === t.x && n[1] === t.y && n[2] === t.z && n[3] === t.w || (e.uniform4ui(this.addr, t.x, t.y, t.z, t.w), n[0] = t.x, n[1] = t.y, n[2] = t.z, n[3] = t.w); else { if (yC(n, t)) return; e.uniform4uiv(this.addr, t), GC(n, t) } } function LC(e, t, n) { var i = this.cache, r = n.allocateTextureUnit(); i[0] !== r && (e.uniform1i(this.addr, r), i[0] = r), n.setTexture2D(t || CC, r) } function zC(e, t, n) { var i = this.cache, r = n.allocateTextureUnit(); i[0] !== r && (e.uniform1i(this.addr, r), i[0] = r), n.setTexture3D(t || IC, r) } function EC(e, t, n) { var i = this.cache, r = n.allocateTextureUnit(); i[0] !== r && (e.uniform1i(this.addr, r), i[0] = r), n.setTextureCube(t || hC, r) } function TC(e, t, n) { var i = this.cache, r = n.allocateTextureUnit(); i[0] !== r && (e.uniform1i(this.addr, r), i[0] = r), n.setTexture2DArray(t || dC, r) } function _C(e, t) { e.uniform1fv(this.addr, t) } function UC(e, t) { var n = bC(t, this.size, 2); e.uniform2fv(this.addr, n) } function DC(e, t) { var n = bC(t, this.size, 3); e.uniform3fv(this.addr, n) } function PC(e, t) { var n = bC(t, this.size, 4); e.uniform4fv(this.addr, n) } function JC(e, t) { var n = bC(t, this.size, 4); e.uniformMatrix2fv(this.addr, !1, n) } function OC(e, t) { var n = bC(t, this.size, 9); e.uniformMatrix3fv(this.addr, !1, n) } function jC(e, t) { var n = bC(t, this.size, 16); e.uniformMatrix4fv(this.addr, !1, n) } function QC(e, t) { e.uniform1iv(this.addr, t) } function qC(e, t) { e.uniform2iv(this.addr, t) } function $C(e, t) { e.uniform3iv(this.addr, t) } function ed(e, t) { e.uniform4iv(this.addr, t) } function td(e, t) { e.uniform1uiv(this.addr, t) } function nd(e, t) { e.uniform2uiv(this.addr, t) } function id(e, t) { e.uniform3uiv(this.addr, t) } function rd(e, t) { e.uniform4uiv(this.addr, t) } function ad(e, t, n) { var i = this.cache, r = t.length, a = BC(n, r); yC(i, a) || (e.uniform1iv(this.addr, a), GC(i, a)); for (var o = 0; o !== r; ++o)n.setTexture2D(t[o] || CC, a[o]) } function od(e, t, n) { var i = this.cache, r = t.length, a = BC(n, r); yC(i, a) || (e.uniform1iv(this.addr, a), GC(i, a)); for (var o = 0; o !== r; ++o)n.setTexture3D(t[o] || IC, a[o]) } function sd(e, t, n) { var i = this.cache, r = t.length, a = BC(n, r); yC(i, a) || (e.uniform1iv(this.addr, a), GC(i, a)); for (var o = 0; o !== r; ++o)n.setTextureCube(t[o] || hC, a[o]) } function ld(e, t, n) { var i = this.cache, r = t.length, a = BC(n, r); yC(i, a) || (e.uniform1iv(this.addr, a), GC(i, a)); for (var o = 0; o !== r; ++o)n.setTexture2DArray(t[o] || dC, a[o]) } var gd = dr((function e(t, n, i) { cr(this, e), this.id = t, this.addr = i, this.cache = [], this.setValue = function (e) { switch (e) { case 5126: return ZC; case 35664: return wC; case 35665: return SC; case 35666: return RC; case 35674: return xC; case 35675: return WC; case 35676: return VC; case 5124: case 35670: return kC; case 35667: case 35671: return HC; case 35668: case 35672: return MC; case 35669: case 35673: return FC; case 5125: return NC; case 36294: return XC; case 36295: return YC; case 36296: return KC; case 35678: case 36198: case 36298: case 36306: case 35682: return LC; case 35679: case 36299: case 36307: return zC; case 35680: case 36300: case 36308: case 36293: return EC; case 36289: case 36303: case 36311: case 36292: return TC } }(n.type) })), cd = dr((function e(t, n, i) { cr(this, e), this.id = t, this.addr = i, this.cache = [], this.size = n.size, this.setValue = function (e) { switch (e) { case 5126: return _C; case 35664: return UC; case 35665: return DC; case 35666: return PC; case 35674: return JC; case 35675: return OC; case 35676: return jC; case 5124: case 35670: return QC; case 35667: case 35671: return qC; case 35668: case 35672: return $C; case 35669: case 35673: return ed; case 5125: return td; case 36294: return nd; case 36295: return id; case 36296: return rd; case 35678: case 36198: case 36298: case 36306: case 35682: return ad; case 35679: case 36299: case 36307: return od; case 35680: case 36300: case 36308: case 36293: return sd; case 36289: case 36303: case 36311: case 36292: return ld } }(n.type) })), ud = function () { function e(t) { cr(this, e), this.id = t, this.seq = [], this.map = {} } return dr(e, [{ key: "setValue", value: function (e, t, n) { for (var i = this.seq, r = 0, a = i.length; r !== a; ++r) { var o = i[r]; o.setValue(e, t[o.id], n) } } }]), e }(), Cd = /(\w+)(\])?(\[|\.)?/g; function dd(e, t) { e.seq.push(t), e.map[t.id] = t } function Id(e, t, n) { var i = e.name, r = i.length; for (Cd.lastIndex = 0; ;) { var a = Cd.exec(i), o = Cd.lastIndex, s = a[1], l = "]" === a[2], g = a[3]; if (l && (s |= 0), void 0 === g || "[" === g && o + 2 === r) { dd(n, void 0 === g ? new gd(s, e, t) : new cd(s, e, t)); break } var c = n.map[s]; void 0 === c && dd(n, c = new ud(s)), n = c } } var hd = function () { function e(t, n) { cr(this, e), this.seq = [], this.map = {}; for (var i = t.getProgramParameter(n, t.ACTIVE_UNIFORMS), r = 0; r < i; ++r) { var a = t.getActiveUniform(n, r); Id(a, t.getUniformLocation(n, a.name), this) } } return dr(e, [{ key: "setValue", value: function (e, t, n, i) { var r = this.map[t]; void 0 !== r && r.setValue(e, n, i) } }, { key: "setOptional", value: function (e, t, n) { var i = t[n]; void 0 !== i && this.setValue(e, n, i) } }], [{ key: "upload", value: function (e, t, n, i) { for (var r = 0, a = t.length; r !== a; ++r) { var o = t[r], s = n[o.id]; !1 !== s.needsUpdate && o.setValue(e, s.value, i) } } }, { key: "seqWithValue", value: function (e, t) { for (var n = [], i = 0, r = e.length; i !== r; ++i) { var a = e[i]; a.id in t && n.push(a) } return n } }]), e }(); function Ad(e, t, n) { var i = e.createShader(t); return e.shaderSource(i, n), e.compileShader(i), i } var pd = 0; function fd(e, t, n) { var i = e.getShaderParameter(t, e.COMPILE_STATUS), r = e.getShaderInfoLog(t).trim(); if (i && "" === r) return ""; var a = /ERROR: 0:(\d+)/.exec(r); if (a) { var o = parseInt(a[1]); return n.toUpperCase() + "\n\n" + r + "\n\n" + function (e, t) { for (var n = e.split("\n"), i = [], r = Math.max(t - 6, 0), a = Math.min(t + 6, n.length), o = r; o < a; o++) { var s = o + 1; i.push("".concat(s === t ? ">" : " ", " ").concat(s, ": ").concat(n[o])) } return i.join("\n") }(e.getShaderSource(t), o) } return r } function md(e, t) { var n = function (e) { var t, n = Hl.getPrimaries(Hl.workingColorSpace), i = Hl.getPrimaries(e); switch (n === i ? t = "" : n === fs && i === ps ? t = "LinearDisplayP3ToLinearSRGB" : n === ps && i === fs && (t = "LinearSRGBToLinearDisplayP3"), e) { case Cs: case Is: return [t, "LinearTransferOETF"]; case us: case ds: return [t, "sRGBTransferOETF"]; default: return console.warn("THREE.WebGLProgram: Unsupported color space:", e), [t, "LinearTransferOETF"] } }(t); return "vec4 ".concat(e, "( vec4 value ) { return ").concat(n[0], "( ").concat(n[1], "( value ) ); }") } function vd(e, t) { var n; switch (t) { case ma: n = "Linear"; break; case va: n = "Reinhard"; break; case ba: n = "OptimizedCineon"; break; case ya: n = "ACESFilmic"; break; case Ga: n = "Custom"; break; default: console.warn("THREE.WebGLProgram: Unsupported toneMapping:", t), n = "Linear" }return "vec3 " + e + "( vec3 color ) { return " + n + "ToneMapping( color ); }" } function bd(e) { return "" !== e } function yd(e, t) { var n = t.numSpotLightShadows + t.numSpotLightMaps - t.numSpotLightShadowsWithMaps; return e.replace(/NUM_DIR_LIGHTS/g, t.numDirLights).replace(/NUM_SPOT_LIGHTS/g, t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g, t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g, n).replace(/NUM_RECT_AREA_LIGHTS/g, t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g, t.numPointLights).replace(/NUM_HEMI_LIGHTS/g, t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g, t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g, t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g, t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g, t.numPointLightShadows) } function Gd(e, t) { return e.replace(/NUM_CLIPPING_PLANES/g, t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g, t.numClippingPlanes - t.numClipIntersection) } var Bd = /^[ \t]*#include +<([\w\d./]+)>/gm; function Zd(e) { return e.replace(Bd, Sd) } var wd = new Map([["encodings_fragment", "colorspace_fragment"], ["encodings_pars_fragment", "colorspace_pars_fragment"], ["output_fragment", "opaque_fragment"]]); function Sd(e, t) { var n = Hu[t]; if (void 0 === n) { var i = wd.get(t); if (void 0 === i) throw new Error("Can not resolve #include <" + t + ">"); n = Hu[i], console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.', t, i) } return Zd(n) } var Rd = /#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g; function xd(e) { return e.replace(Rd, Wd) } function Wd(e, t, n, i) { for (var r = "", a = parseInt(t); a < parseInt(n); a++)r += i.replace(/\[\s*i\s*\]/g, "[ " + a + " ]").replace(/UNROLLED_LOOP_INDEX/g, a); return r } function Vd(e) { var t = "precision " + e.precision + " float;\nprecision " + e.precision + " int;"; return "highp" === e.precision ? t += "\n#define HIGH_PRECISION" : "mediump" === e.precision ? t += "\n#define MEDIUM_PRECISION" : "lowp" === e.precision && (t += "\n#define LOW_PRECISION"), t } function kd(e, t, n, i) { var r, a, o = e.getContext(), s = n.defines, l = n.vertexShader, g = n.fragmentShader, c = function (e) { var t = "SHADOWMAP_TYPE_BASIC"; return e.shadowMapType === kr ? t = "SHADOWMAP_TYPE_PCF" : e.shadowMapType === Hr ? t = "SHADOWMAP_TYPE_PCF_SOFT" : e.shadowMapType === Mr && (t = "SHADOWMAP_TYPE_VSM"), t }(n), u = function (e) { var t = "ENVMAP_TYPE_CUBE"; if (e.envMap) switch (e.envMapMode) { case Za: case wa: t = "ENVMAP_TYPE_CUBE"; break; case xa: t = "ENVMAP_TYPE_CUBE_UV" }return t }(n), C = function (e) { var t = "ENVMAP_MODE_REFLECTION"; e.envMap && e.envMapMode === wa && (t = "ENVMAP_MODE_REFRACTION"); return t }(n), d = function (e) { var t = "ENVMAP_BLENDING_NONE"; if (e.envMap) switch (e.combine) { case ha: t = "ENVMAP_BLENDING_MULTIPLY"; break; case Aa: t = "ENVMAP_BLENDING_MIX"; break; case pa: t = "ENVMAP_BLENDING_ADD" }return t }(n), I = function (e) { var t = e.envMapCubeUVHeight; if (null === t) return null; var n = Math.log2(t) - 2, i = 1 / t; return { texelWidth: 1 / (3 * Math.max(Math.pow(2, n), 112)), texelHeight: i, maxMip: n } }(n), h = n.isWebGL2 ? "" : function (e) { return [e.extensionDerivatives || e.envMapCubeUVHeight || e.bumpMap || e.normalMapTangentSpace || e.clearcoatNormalMap || e.flatShading || "physical" === e.shaderID ? "#extension GL_OES_standard_derivatives : enable" : "", (e.extensionFragDepth || e.logarithmicDepthBuffer) && e.rendererExtensionFragDepth ? "#extension GL_EXT_frag_depth : enable" : "", e.extensionDrawBuffers && e.rendererExtensionDrawBuffers ? "#extension GL_EXT_draw_buffers : require" : "", (e.extensionShaderTextureLOD || e.envMap || e.transmission) && e.rendererExtensionShaderTextureLod ? "#extension GL_EXT_shader_texture_lod : enable" : ""].filter(bd).join("\n") }(n), A = function (e) { var t = []; for (var n in e) { var i = e[n]; !1 !== i && t.push("#define " + n + " " + i) } return t.join("\n") }(s), p = o.createProgram(), f = n.glslVersion ? "#version " + n.glslVersion + "\n" : ""; n.isRawShaderMaterial ? ((r = ["#define SHADER_TYPE " + n.shaderType, "#define SHADER_NAME " + n.shaderName, A].filter(bd).join("\n")).length > 0 && (r += "\n"), (a = [h, "#define SHADER_TYPE " + n.shaderType, "#define SHADER_NAME " + n.shaderName, A].filter(bd).join("\n")).length > 0 && (a += "\n")) : (r = [Vd(n), "#define SHADER_TYPE " + n.shaderType, "#define SHADER_NAME " + n.shaderName, A, n.instancing ? "#define USE_INSTANCING" : "", n.instancingColor ? "#define USE_INSTANCING_COLOR" : "", n.useFog && n.fog ? "#define USE_FOG" : "", n.useFog && n.fogExp2 ? "#define FOG_EXP2" : "", n.map ? "#define USE_MAP" : "", n.envMap ? "#define USE_ENVMAP" : "", n.envMap ? "#define " + C : "", n.lightMap ? "#define USE_LIGHTMAP" : "", n.aoMap ? "#define USE_AOMAP" : "", n.bumpMap ? "#define USE_BUMPMAP" : "", n.normalMap ? "#define USE_NORMALMAP" : "", n.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "", n.normalMapTangentSpace ? "#define USE_NORMALMAP_TANGENTSPACE" : "", n.displacementMap ? "#define USE_DISPLACEMENTMAP" : "", n.emissiveMap ? "#define USE_EMISSIVEMAP" : "", n.anisotropy ? "#define USE_ANISOTROPY" : "", n.anisotropyMap ? "#define USE_ANISOTROPYMAP" : "", n.clearcoatMap ? "#define USE_CLEARCOATMAP" : "", n.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "", n.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "", n.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "", n.iridescenceThicknessMap ? "#define USE_IRIDESCENCE_THICKNESSMAP" : "", n.specularMap ? "#define USE_SPECULARMAP" : "", n.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "", n.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "", n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", n.metalnessMap ? "#define USE_METALNESSMAP" : "", n.alphaMap ? "#define USE_ALPHAMAP" : "", n.alphaHash ? "#define USE_ALPHAHASH" : "", n.transmission ? "#define USE_TRANSMISSION" : "", n.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "", n.thicknessMap ? "#define USE_THICKNESSMAP" : "", n.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "", n.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "", n.mapUv ? "#define MAP_UV " + n.mapUv : "", n.alphaMapUv ? "#define ALPHAMAP_UV " + n.alphaMapUv : "", n.lightMapUv ? "#define LIGHTMAP_UV " + n.lightMapUv : "", n.aoMapUv ? "#define AOMAP_UV " + n.aoMapUv : "", n.emissiveMapUv ? "#define EMISSIVEMAP_UV " + n.emissiveMapUv : "", n.bumpMapUv ? "#define BUMPMAP_UV " + n.bumpMapUv : "", n.normalMapUv ? "#define NORMALMAP_UV " + n.normalMapUv : "", n.displacementMapUv ? "#define DISPLACEMENTMAP_UV " + n.displacementMapUv : "", n.metalnessMapUv ? "#define METALNESSMAP_UV " + n.metalnessMapUv : "", n.roughnessMapUv ? "#define ROUGHNESSMAP_UV " + n.roughnessMapUv : "", n.anisotropyMapUv ? "#define ANISOTROPYMAP_UV " + n.anisotropyMapUv : "", n.clearcoatMapUv ? "#define CLEARCOATMAP_UV " + n.clearcoatMapUv : "", n.clearcoatNormalMapUv ? "#define CLEARCOAT_NORMALMAP_UV " + n.clearcoatNormalMapUv : "", n.clearcoatRoughnessMapUv ? "#define CLEARCOAT_ROUGHNESSMAP_UV " + n.clearcoatRoughnessMapUv : "", n.iridescenceMapUv ? "#define IRIDESCENCEMAP_UV " + n.iridescenceMapUv : "", n.iridescenceThicknessMapUv ? "#define IRIDESCENCE_THICKNESSMAP_UV " + n.iridescenceThicknessMapUv : "", n.sheenColorMapUv ? "#define SHEEN_COLORMAP_UV " + n.sheenColorMapUv : "", n.sheenRoughnessMapUv ? "#define SHEEN_ROUGHNESSMAP_UV " + n.sheenRoughnessMapUv : "", n.specularMapUv ? "#define SPECULARMAP_UV " + n.specularMapUv : "", n.specularColorMapUv ? "#define SPECULAR_COLORMAP_UV " + n.specularColorMapUv : "", n.specularIntensityMapUv ? "#define SPECULAR_INTENSITYMAP_UV " + n.specularIntensityMapUv : "", n.transmissionMapUv ? "#define TRANSMISSIONMAP_UV " + n.transmissionMapUv : "", n.thicknessMapUv ? "#define THICKNESSMAP_UV " + n.thicknessMapUv : "", n.vertexTangents && !1 === n.flatShading ? "#define USE_TANGENT" : "", n.vertexColors ? "#define USE_COLOR" : "", n.vertexAlphas ? "#define USE_COLOR_ALPHA" : "", n.vertexUv1s ? "#define USE_UV1" : "", n.vertexUv2s ? "#define USE_UV2" : "", n.vertexUv3s ? "#define USE_UV3" : "", n.pointsUvs ? "#define USE_POINTS_UV" : "", n.flatShading ? "#define FLAT_SHADED" : "", n.skinning ? "#define USE_SKINNING" : "", n.morphTargets ? "#define USE_MORPHTARGETS" : "", n.morphNormals && !1 === n.flatShading ? "#define USE_MORPHNORMALS" : "", n.morphColors && n.isWebGL2 ? "#define USE_MORPHCOLORS" : "", n.morphTargetsCount > 0 && n.isWebGL2 ? "#define MORPHTARGETS_TEXTURE" : "", n.morphTargetsCount > 0 && n.isWebGL2 ? "#define MORPHTARGETS_TEXTURE_STRIDE " + n.morphTextureStride : "", n.morphTargetsCount > 0 && n.isWebGL2 ? "#define MORPHTARGETS_COUNT " + n.morphTargetsCount : "", n.doubleSided ? "#define DOUBLE_SIDED" : "", n.flipSided ? "#define FLIP_SIDED" : "", n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", n.shadowMapEnabled ? "#define " + c : "", n.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", n.numLightProbes > 0 ? "#define USE_LIGHT_PROBES" : "", n.useLegacyLights ? "#define LEGACY_LIGHTS" : "", n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", n.logarithmicDepthBuffer && n.rendererExtensionFragDepth ? "#define USE_LOGDEPTHBUF_EXT" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "uniform bool isOrthographic;", "#ifdef USE_INSTANCING", "\tattribute mat4 instanceMatrix;", "#endif", "#ifdef USE_INSTANCING_COLOR", "\tattribute vec3 instanceColor;", "#endif", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "#ifdef USE_UV1", "\tattribute vec2 uv1;", "#endif", "#ifdef USE_UV2", "\tattribute vec2 uv2;", "#endif", "#ifdef USE_UV3", "\tattribute vec2 uv3;", "#endif", "#ifdef USE_TANGENT", "\tattribute vec4 tangent;", "#endif", "#if defined( USE_COLOR_ALPHA )", "\tattribute vec4 color;", "#elif defined( USE_COLOR )", "\tattribute vec3 color;", "#endif", "#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )", "\tattribute vec3 morphTarget0;", "\tattribute vec3 morphTarget1;", "\tattribute vec3 morphTarget2;", "\tattribute vec3 morphTarget3;", "\t#ifdef USE_MORPHNORMALS", "\t\tattribute vec3 morphNormal0;", "\t\tattribute vec3 morphNormal1;", "\t\tattribute vec3 morphNormal2;", "\t\tattribute vec3 morphNormal3;", "\t#else", "\t\tattribute vec3 morphTarget4;", "\t\tattribute vec3 morphTarget5;", "\t\tattribute vec3 morphTarget6;", "\t\tattribute vec3 morphTarget7;", "\t#endif", "#endif", "#ifdef USE_SKINNING", "\tattribute vec4 skinIndex;", "\tattribute vec4 skinWeight;", "#endif", "\n"].filter(bd).join("\n"), a = [h, Vd(n), "#define SHADER_TYPE " + n.shaderType, "#define SHADER_NAME " + n.shaderName, A, n.useFog && n.fog ? "#define USE_FOG" : "", n.useFog && n.fogExp2 ? "#define FOG_EXP2" : "", n.map ? "#define USE_MAP" : "", n.matcap ? "#define USE_MATCAP" : "", n.envMap ? "#define USE_ENVMAP" : "", n.envMap ? "#define " + u : "", n.envMap ? "#define " + C : "", n.envMap ? "#define " + d : "", I ? "#define CUBEUV_TEXEL_WIDTH " + I.texelWidth : "", I ? "#define CUBEUV_TEXEL_HEIGHT " + I.texelHeight : "", I ? "#define CUBEUV_MAX_MIP " + I.maxMip + ".0" : "", n.lightMap ? "#define USE_LIGHTMAP" : "", n.aoMap ? "#define USE_AOMAP" : "", n.bumpMap ? "#define USE_BUMPMAP" : "", n.normalMap ? "#define USE_NORMALMAP" : "", n.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "", n.normalMapTangentSpace ? "#define USE_NORMALMAP_TANGENTSPACE" : "", n.emissiveMap ? "#define USE_EMISSIVEMAP" : "", n.anisotropy ? "#define USE_ANISOTROPY" : "", n.anisotropyMap ? "#define USE_ANISOTROPYMAP" : "", n.clearcoat ? "#define USE_CLEARCOAT" : "", n.clearcoatMap ? "#define USE_CLEARCOATMAP" : "", n.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "", n.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "", n.iridescence ? "#define USE_IRIDESCENCE" : "", n.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "", n.iridescenceThicknessMap ? "#define USE_IRIDESCENCE_THICKNESSMAP" : "", n.specularMap ? "#define USE_SPECULARMAP" : "", n.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "", n.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "", n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", n.metalnessMap ? "#define USE_METALNESSMAP" : "", n.alphaMap ? "#define USE_ALPHAMAP" : "", n.alphaTest ? "#define USE_ALPHATEST" : "", n.alphaHash ? "#define USE_ALPHAHASH" : "", n.sheen ? "#define USE_SHEEN" : "", n.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "", n.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "", n.transmission ? "#define USE_TRANSMISSION" : "", n.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "", n.thicknessMap ? "#define USE_THICKNESSMAP" : "", n.vertexTangents && !1 === n.flatShading ? "#define USE_TANGENT" : "", n.vertexColors || n.instancingColor ? "#define USE_COLOR" : "", n.vertexAlphas ? "#define USE_COLOR_ALPHA" : "", n.vertexUv1s ? "#define USE_UV1" : "", n.vertexUv2s ? "#define USE_UV2" : "", n.vertexUv3s ? "#define USE_UV3" : "", n.pointsUvs ? "#define USE_POINTS_UV" : "", n.gradientMap ? "#define USE_GRADIENTMAP" : "", n.flatShading ? "#define FLAT_SHADED" : "", n.doubleSided ? "#define DOUBLE_SIDED" : "", n.flipSided ? "#define FLIP_SIDED" : "", n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", n.shadowMapEnabled ? "#define " + c : "", n.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "", n.numLightProbes > 0 ? "#define USE_LIGHT_PROBES" : "", n.useLegacyLights ? "#define LEGACY_LIGHTS" : "", n.decodeVideoTexture ? "#define DECODE_VIDEO_TEXTURE" : "", n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", n.logarithmicDepthBuffer && n.rendererExtensionFragDepth ? "#define USE_LOGDEPTHBUF_EXT" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", "uniform bool isOrthographic;", n.toneMapping !== fa ? "#define TONE_MAPPING" : "", n.toneMapping !== fa ? Hu.tonemapping_pars_fragment : "", n.toneMapping !== fa ? vd("toneMapping", n.toneMapping) : "", n.dithering ? "#define DITHERING" : "", n.opaque ? "#define OPAQUE" : "", Hu.colorspace_pars_fragment, md("linearToOutputTexel", n.outputColorSpace), n.useDepthPacking ? "#define DEPTH_PACKING " + n.depthPacking : "", "\n"].filter(bd).join("\n")), l = Gd(l = yd(l = Zd(l), n), n), g = Gd(g = yd(g = Zd(g), n), n), l = xd(l), g = xd(g), n.isWebGL2 && !0 !== n.isRawShaderMaterial && (f = "#version 300 es\n", r = ["precision mediump sampler2DArray;", "#define attribute in", "#define varying out", "#define texture2D texture"].join("\n") + "\n" + r, a = ["#define varying in", n.glslVersion === $s ? "" : "layout(location = 0) out highp vec4 pc_fragColor;", n.glslVersion === $s ? "" : "#define gl_FragColor pc_fragColor", "#define gl_FragDepthEXT gl_FragDepth", "#define texture2D texture", "#define textureCube texture", "#define texture2DProj textureProj", "#define texture2DLodEXT textureLod", "#define texture2DProjLodEXT textureProjLod", "#define textureCubeLodEXT textureLod", "#define texture2DGradEXT textureGrad", "#define texture2DProjGradEXT textureProjGrad", "#define textureCubeGradEXT textureGrad"].join("\n") + "\n" + a); var m, v, b = f + r + l, y = f + a + g, G = Ad(o, o.VERTEX_SHADER, b), B = Ad(o, o.FRAGMENT_SHADER, y); if (o.attachShader(p, G), o.attachShader(p, B), void 0 !== n.index0AttributeName ? o.bindAttribLocation(p, 0, n.index0AttributeName) : !0 === n.morphTargets && o.bindAttribLocation(p, 0, "position"), o.linkProgram(p), e.debug.checkShaderErrors) { var Z = o.getProgramInfoLog(p).trim(), w = o.getShaderInfoLog(G).trim(), S = o.getShaderInfoLog(B).trim(), R = !0, x = !0; if (!1 === o.getProgramParameter(p, o.LINK_STATUS)) if (R = !1, "function" === typeof e.debug.onShaderError) e.debug.onShaderError(o, p, G, B); else { var W = fd(o, G, "vertex"), V = fd(o, B, "fragment"); console.error("THREE.WebGLProgram: Shader Error " + o.getError() + " - VALIDATE_STATUS " + o.getProgramParameter(p, o.VALIDATE_STATUS) + "\n\nProgram Info Log: " + Z + "\n" + W + "\n" + V) } else "" !== Z ? console.warn("THREE.WebGLProgram: Program Info Log:", Z) : "" !== w && "" !== S || (x = !1); x && (this.diagnostics = { runnable: R, programLog: Z, vertexShader: { log: w, prefix: r }, fragmentShader: { log: S, prefix: a } }) } return o.deleteShader(G), o.deleteShader(B), this.getUniforms = function () { return void 0 === m && (m = new hd(o, p)), m }, this.getAttributes = function () { return void 0 === v && (v = function (e, t) { for (var n = {}, i = e.getProgramParameter(t, e.ACTIVE_ATTRIBUTES), r = 0; r < i; r++) { var a = e.getActiveAttrib(t, r), o = a.name, s = 1; a.type === e.FLOAT_MAT2 && (s = 2), a.type === e.FLOAT_MAT3 && (s = 3), a.type === e.FLOAT_MAT4 && (s = 4), n[o] = { type: a.type, location: e.getAttribLocation(t, o), locationSize: s } } return n }(o, p)), v }, this.destroy = function () { i.releaseStatesOfProgram(this), o.deleteProgram(p), this.program = void 0 }, this.type = n.shaderType, this.name = n.shaderName, this.id = pd++, this.cacheKey = t, this.usedTimes = 1, this.program = p, this.vertexShader = G, this.fragmentShader = B, this } var Hd = 0, Md = function () { function e() { cr(this, e), this.shaderCache = new Map, this.materialCache = new Map } return dr(e, [{ key: "update", value: function (e) { var t = e.vertexShader, n = e.fragmentShader, i = this._getShaderStage(t), r = this._getShaderStage(n), a = this._getShaderCacheForMaterial(e); return !1 === a.has(i) && (a.add(i), i.usedTimes++), !1 === a.has(r) && (a.add(r), r.usedTimes++), this } }, { key: "remove", value: function (e) { var t, n = gr(this.materialCache.get(e)); try { for (n.s(); !(t = n.n()).done;) { var i = t.value; i.usedTimes--, 0 === i.usedTimes && this.shaderCache.delete(i.code) } } catch (r) { n.e(r) } finally { n.f() } return this.materialCache.delete(e), this } }, { key: "getVertexShaderID", value: function (e) { return this._getShaderStage(e.vertexShader).id } }, { key: "getFragmentShaderID", value: function (e) { return this._getShaderStage(e.fragmentShader).id } }, { key: "dispose", value: function () { this.shaderCache.clear(), this.materialCache.clear() } }, { key: "_getShaderCacheForMaterial", value: function (e) { var t = this.materialCache, n = t.get(e); return void 0 === n && (n = new Set, t.set(e, n)), n } }, { key: "_getShaderStage", value: function (e) { var t = this.shaderCache, n = t.get(e); return void 0 === n && (n = new Fd(e), t.set(e, n)), n } }]), e }(), Fd = dr((function e(t) { cr(this, e), this.id = Hd++, this.code = t, this.usedTimes = 0 })); function Nd(e, t, n, i, r, a, o) { var s = new Yg, l = new Md, g = [], c = r.isWebGL2, u = r.logarithmicDepthBuffer, C = r.vertexTextures, d = r.precision, I = { MeshDepthMaterial: "depth", MeshDistanceMaterial: "distanceRGBA", MeshNormalMaterial: "normal", MeshBasicMaterial: "basic", MeshLambertMaterial: "lambert", MeshPhongMaterial: "phong", MeshToonMaterial: "toon", MeshStandardMaterial: "physical", MeshPhysicalMaterial: "physical", MeshMatcapMaterial: "matcap", LineBasicMaterial: "basic", LineDashedMaterial: "dashed", PointsMaterial: "points", ShadowMaterial: "shadow", SpriteMaterial: "sprite" }; function h(e) { return 0 === e ? "uv" : "uv".concat(e) } return { getParameters: function (a, s, g, A, p) { var f = A.fog, m = p.geometry, v = a.isMeshStandardMaterial ? A.environment : null, b = (a.isMeshStandardMaterial ? n : t).get(a.envMap || v), y = b && b.mapping === xa ? b.image.height : null, G = I[a.type]; null !== a.precision && (d = r.getMaxPrecision(a.precision)) !== a.precision && console.warn("THREE.WebGLProgram.getParameters:", a.precision, "not supported, using", d, "instead."); var B, Z, w, S, R = m.morphAttributes.position || m.morphAttributes.normal || m.morphAttributes.color, x = void 0 !== R ? R.length : 0, W = 0; if (void 0 !== m.morphAttributes.position && (W = 1), void 0 !== m.morphAttributes.normal && (W = 2), void 0 !== m.morphAttributes.color && (W = 3), G) { var V = Fu[G]; B = V.vertexShader, Z = V.fragmentShader } else B = a.vertexShader, Z = a.fragmentShader, l.update(a), w = l.getVertexShaderID(a), S = l.getFragmentShaderID(a); var k = e.getRenderTarget(), H = !0 === p.isInstancedMesh, M = !!a.map, F = !!a.matcap, N = !!b, X = !!a.aoMap, Y = !!a.lightMap, K = !!a.bumpMap, L = !!a.normalMap, z = !!a.displacementMap, E = !!a.emissiveMap, T = !!a.metalnessMap, _ = !!a.roughnessMap, U = a.anisotropy > 0, D = a.clearcoat > 0, P = a.iridescence > 0, J = a.sheen > 0, O = a.transmission > 0, j = U && !!a.anisotropyMap, Q = D && !!a.clearcoatMap, q = D && !!a.clearcoatNormalMap, $ = D && !!a.clearcoatRoughnessMap, ee = P && !!a.iridescenceMap, te = P && !!a.iridescenceThicknessMap, ne = J && !!a.sheenColorMap, ie = J && !!a.sheenRoughnessMap, re = !!a.specularMap, ae = !!a.specularColorMap, oe = !!a.specularIntensityMap, se = O && !!a.transmissionMap, le = O && !!a.thicknessMap, ge = !!a.gradientMap, ce = !!a.alphaMap, ue = a.alphaTest > 0, Ce = !!a.alphaHash, de = !!a.extensions, Ie = !!m.attributes.uv1, he = !!m.attributes.uv2, Ae = !!m.attributes.uv3, pe = fa; return a.toneMapped && (null !== k && !0 !== k.isXRRenderTarget || (pe = e.toneMapping)), { isWebGL2: c, shaderID: G, shaderType: a.type, shaderName: a.name, vertexShader: B, fragmentShader: Z, defines: a.defines, customVertexShaderID: w, customFragmentShaderID: S, isRawShaderMaterial: !0 === a.isRawShaderMaterial, glslVersion: a.glslVersion, precision: d, instancing: H, instancingColor: H && null !== p.instanceColor, supportsVertexTextures: C, outputColorSpace: null === k ? e.outputColorSpace : !0 === k.isXRRenderTarget ? k.texture.colorSpace : Cs, map: M, matcap: F, envMap: N, envMapMode: N && b.mapping, envMapCubeUVHeight: y, aoMap: X, lightMap: Y, bumpMap: K, normalMap: L, displacementMap: C && z, emissiveMap: E, normalMapObjectSpace: L && a.normalMapType === gs, normalMapTangentSpace: L && a.normalMapType === ls, metalnessMap: T, roughnessMap: _, anisotropy: U, anisotropyMap: j, clearcoat: D, clearcoatMap: Q, clearcoatNormalMap: q, clearcoatRoughnessMap: $, iridescence: P, iridescenceMap: ee, iridescenceThicknessMap: te, sheen: J, sheenColorMap: ne, sheenRoughnessMap: ie, specularMap: re, specularColorMap: ae, specularIntensityMap: oe, transmission: O, transmissionMap: se, thicknessMap: le, gradientMap: ge, opaque: !1 === a.transparent && a.blending === Lr, alphaMap: ce, alphaTest: ue, alphaHash: Ce, combine: a.combine, mapUv: M && h(a.map.channel), aoMapUv: X && h(a.aoMap.channel), lightMapUv: Y && h(a.lightMap.channel), bumpMapUv: K && h(a.bumpMap.channel), normalMapUv: L && h(a.normalMap.channel), displacementMapUv: z && h(a.displacementMap.channel), emissiveMapUv: E && h(a.emissiveMap.channel), metalnessMapUv: T && h(a.metalnessMap.channel), roughnessMapUv: _ && h(a.roughnessMap.channel), anisotropyMapUv: j && h(a.anisotropyMap.channel), clearcoatMapUv: Q && h(a.clearcoatMap.channel), clearcoatNormalMapUv: q && h(a.clearcoatNormalMap.channel), clearcoatRoughnessMapUv: $ && h(a.clearcoatRoughnessMap.channel), iridescenceMapUv: ee && h(a.iridescenceMap.channel), iridescenceThicknessMapUv: te && h(a.iridescenceThicknessMap.channel), sheenColorMapUv: ne && h(a.sheenColorMap.channel), sheenRoughnessMapUv: ie && h(a.sheenRoughnessMap.channel), specularMapUv: re && h(a.specularMap.channel), specularColorMapUv: ae && h(a.specularColorMap.channel), specularIntensityMapUv: oe && h(a.specularIntensityMap.channel), transmissionMapUv: se && h(a.transmissionMap.channel), thicknessMapUv: le && h(a.thicknessMap.channel), alphaMapUv: ce && h(a.alphaMap.channel), vertexTangents: !!m.attributes.tangent && (L || U), vertexColors: a.vertexColors, vertexAlphas: !0 === a.vertexColors && !!m.attributes.color && 4 === m.attributes.color.itemSize, vertexUv1s: Ie, vertexUv2s: he, vertexUv3s: Ae, pointsUvs: !0 === p.isPoints && !!m.attributes.uv && (M || ce), fog: !!f, useFog: !0 === a.fog, fogExp2: f && f.isFogExp2, flatShading: !0 === a.flatShading, sizeAttenuation: !0 === a.sizeAttenuation, logarithmicDepthBuffer: u, skinning: !0 === p.isSkinnedMesh, morphTargets: void 0 !== m.morphAttributes.position, morphNormals: void 0 !== m.morphAttributes.normal, morphColors: void 0 !== m.morphAttributes.color, morphTargetsCount: x, morphTextureStride: W, numDirLights: s.directional.length, numPointLights: s.point.length, numSpotLights: s.spot.length, numSpotLightMaps: s.spotLightMap.length, numRectAreaLights: s.rectArea.length, numHemiLights: s.hemi.length, numDirLightShadows: s.directionalShadowMap.length, numPointLightShadows: s.pointShadowMap.length, numSpotLightShadows: s.spotShadowMap.length, numSpotLightShadowsWithMaps: s.numSpotLightShadowsWithMaps, numLightProbes: s.numLightProbes, numClippingPlanes: o.numPlanes, numClipIntersection: o.numIntersection, dithering: a.dithering, shadowMapEnabled: e.shadowMap.enabled && g.length > 0, shadowMapType: e.shadowMap.type, toneMapping: pe, useLegacyLights: e._useLegacyLights, decodeVideoTexture: M && !0 === a.map.isVideoTexture && Hl.getTransfer(a.map.colorSpace) === As, premultipliedAlpha: a.premultipliedAlpha, doubleSided: a.side === Xr, flipSided: a.side === Nr, useDepthPacking: a.depthPacking >= 0, depthPacking: a.depthPacking || 0, index0AttributeName: a.index0AttributeName, extensionDerivatives: de && !0 === a.extensions.derivatives, extensionFragDepth: de && !0 === a.extensions.fragDepth, extensionDrawBuffers: de && !0 === a.extensions.drawBuffers, extensionShaderTextureLOD: de && !0 === a.extensions.shaderTextureLOD, rendererExtensionFragDepth: c || i.has("EXT_frag_depth"), rendererExtensionDrawBuffers: c || i.has("WEBGL_draw_buffers"), rendererExtensionShaderTextureLod: c || i.has("EXT_shader_texture_lod"), customProgramCacheKey: a.customProgramCacheKey() } }, getProgramCacheKey: function (t) { var n = []; if (t.shaderID ? n.push(t.shaderID) : (n.push(t.customVertexShaderID), n.push(t.customFragmentShaderID)), void 0 !== t.defines) for (var i in t.defines) n.push(i), n.push(t.defines[i]); return !1 === t.isRawShaderMaterial && (!function (e, t) { e.push(t.precision), e.push(t.outputColorSpace), e.push(t.envMapMode), e.push(t.envMapCubeUVHeight), e.push(t.mapUv), e.push(t.alphaMapUv), e.push(t.lightMapUv), e.push(t.aoMapUv), e.push(t.bumpMapUv), e.push(t.normalMapUv), e.push(t.displacementMapUv), e.push(t.emissiveMapUv), e.push(t.metalnessMapUv), e.push(t.roughnessMapUv), e.push(t.anisotropyMapUv), e.push(t.clearcoatMapUv), e.push(t.clearcoatNormalMapUv), e.push(t.clearcoatRoughnessMapUv), e.push(t.iridescenceMapUv), e.push(t.iridescenceThicknessMapUv), e.push(t.sheenColorMapUv), e.push(t.sheenRoughnessMapUv), e.push(t.specularMapUv), e.push(t.specularColorMapUv), e.push(t.specularIntensityMapUv), e.push(t.transmissionMapUv), e.push(t.thicknessMapUv), e.push(t.combine), e.push(t.fogExp2), e.push(t.sizeAttenuation), e.push(t.morphTargetsCount), e.push(t.morphAttributeCount), e.push(t.numDirLights), e.push(t.numPointLights), e.push(t.numSpotLights), e.push(t.numSpotLightMaps), e.push(t.numHemiLights), e.push(t.numRectAreaLights), e.push(t.numDirLightShadows), e.push(t.numPointLightShadows), e.push(t.numSpotLightShadows), e.push(t.numSpotLightShadowsWithMaps), e.push(t.numLightProbes), e.push(t.shadowMapType), e.push(t.toneMapping), e.push(t.numClippingPlanes), e.push(t.numClipIntersection), e.push(t.depthPacking) }(n, t), function (e, t) { s.disableAll(), t.isWebGL2 && s.enable(0); t.supportsVertexTextures && s.enable(1); t.instancing && s.enable(2); t.instancingColor && s.enable(3); t.matcap && s.enable(4); t.envMap && s.enable(5); t.normalMapObjectSpace && s.enable(6); t.normalMapTangentSpace && s.enable(7); t.clearcoat && s.enable(8); t.iridescence && s.enable(9); t.alphaTest && s.enable(10); t.vertexColors && s.enable(11); t.vertexAlphas && s.enable(12); t.vertexUv1s && s.enable(13); t.vertexUv2s && s.enable(14); t.vertexUv3s && s.enable(15); t.vertexTangents && s.enable(16); t.anisotropy && s.enable(17); e.push(s.mask), s.disableAll(), t.fog && s.enable(0); t.useFog && s.enable(1); t.flatShading && s.enable(2); t.logarithmicDepthBuffer && s.enable(3); t.skinning && s.enable(4); t.morphTargets && s.enable(5); t.morphNormals && s.enable(6); t.morphColors && s.enable(7); t.premultipliedAlpha && s.enable(8); t.shadowMapEnabled && s.enable(9); t.useLegacyLights && s.enable(10); t.doubleSided && s.enable(11); t.flipSided && s.enable(12); t.useDepthPacking && s.enable(13); t.dithering && s.enable(14); t.transmission && s.enable(15); t.sheen && s.enable(16); t.opaque && s.enable(17); t.pointsUvs && s.enable(18); t.decodeVideoTexture && s.enable(19); e.push(s.mask) }(n, t), n.push(e.outputColorSpace)), n.push(t.customProgramCacheKey), n.join() }, getUniforms: function (e) { var t, n = I[e.type]; if (n) { var i = Fu[n]; t = hu.clone(i.uniforms) } else t = e.uniforms; return t }, acquireProgram: function (t, n) { for (var i, r = 0, o = g.length; r < o; r++) { var s = g[r]; if (s.cacheKey === n) { ++(i = s).usedTimes; break } } return void 0 === i && (i = new kd(e, n, t, a), g.push(i)), i }, releaseProgram: function (e) { if (0 === --e.usedTimes) { var t = g.indexOf(e); g[t] = g[g.length - 1], g.pop(), e.destroy() } }, releaseShaderCache: function (e) { l.remove(e) }, programs: g, dispose: function () { l.dispose() } } } function Xd() { var e = new WeakMap; return { get: function (t) { var n = e.get(t); return void 0 === n && (n = {}, e.set(t, n)), n }, remove: function (t) { e.delete(t) }, update: function (t, n, i) { e.get(t)[n] = i }, dispose: function () { e = new WeakMap } } } function Yd(e, t) { return e.groupOrder !== t.groupOrder ? e.groupOrder - t.groupOrder : e.renderOrder !== t.renderOrder ? e.renderOrder - t.renderOrder : e.material.id !== t.material.id ? e.material.id - t.material.id : e.z !== t.z ? e.z - t.z : e.id - t.id } function Kd(e, t) { return e.groupOrder !== t.groupOrder ? e.groupOrder - t.groupOrder : e.renderOrder !== t.renderOrder ? e.renderOrder - t.renderOrder : e.z !== t.z ? t.z - e.z : e.id - t.id } function Ld() { var e = [], t = 0, n = [], i = [], r = []; function a(n, i, r, a, o, s) { var l = e[t]; return void 0 === l ? (l = { id: n.id, object: n, geometry: i, material: r, groupOrder: a, renderOrder: n.renderOrder, z: o, group: s }, e[t] = l) : (l.id = n.id, l.object = n, l.geometry = i, l.material = r, l.groupOrder = a, l.renderOrder = n.renderOrder, l.z = o, l.group = s), t++, l } return { opaque: n, transmissive: i, transparent: r, init: function () { t = 0, n.length = 0, i.length = 0, r.length = 0 }, push: function (e, t, o, s, l, g) { var c = a(e, t, o, s, l, g); o.transmission > 0 ? i.push(c) : !0 === o.transparent ? r.push(c) : n.push(c) }, unshift: function (e, t, o, s, l, g) { var c = a(e, t, o, s, l, g); o.transmission > 0 ? i.unshift(c) : !0 === o.transparent ? r.unshift(c) : n.unshift(c) }, finish: function () { for (var n = t, i = e.length; n < i; n++) { var r = e[n]; if (null === r.id) break; r.id = null, r.object = null, r.geometry = null, r.material = null, r.group = null } }, sort: function (e, t) { n.length > 1 && n.sort(e || Yd), i.length > 1 && i.sort(t || Kd), r.length > 1 && r.sort(t || Kd) } } } function zd() { var e = new WeakMap; return { get: function (t, n) { var i, r = e.get(t); return void 0 === r ? (i = new Ld, e.set(t, [i])) : n >= r.length ? (i = new Ld, r.push(i)) : i = r[n], i }, dispose: function () { e = new WeakMap } } } function Ed() { var e = {}; return { get: function (t) { if (void 0 !== e[t.id]) return e[t.id]; var n; switch (t.type) { case "DirectionalLight": n = { direction: new Ql, color: new pc }; break; case "SpotLight": n = { position: new Ql, direction: new Ql, color: new pc, distance: 0, coneCos: 0, penumbraCos: 0, decay: 0 }; break; case "PointLight": n = { position: new Ql, color: new pc, distance: 0, decay: 0 }; break; case "HemisphereLight": n = { direction: new Ql, skyColor: new pc, groundColor: new pc }; break; case "RectAreaLight": n = { color: new pc, position: new Ql, halfWidth: new Ql, halfHeight: new Ql } }return e[t.id] = n, n } } } var Td = 0; function _d(e, t) { return (t.castShadow ? 2 : 0) - (e.castShadow ? 2 : 0) + (t.map ? 1 : 0) - (e.map ? 1 : 0) } function Ud(e, t) { for (var n = new Ed, i = function () { var e = {}; return { get: function (t) { if (void 0 !== e[t.id]) return e[t.id]; var n; switch (t.type) { case "DirectionalLight": case "SpotLight": n = { shadowBias: 0, shadowNormalBias: 0, shadowRadius: 1, shadowMapSize: new fl }; break; case "PointLight": n = { shadowBias: 0, shadowNormalBias: 0, shadowRadius: 1, shadowMapSize: new fl, shadowCameraNear: 1, shadowCameraFar: 1e3 } }return e[t.id] = n, n } } }(), r = { version: 0, hash: { directionalLength: -1, pointLength: -1, spotLength: -1, rectAreaLength: -1, hemiLength: -1, numDirectionalShadows: -1, numPointShadows: -1, numSpotShadows: -1, numSpotMaps: -1, numLightProbes: -1 }, ambient: [0, 0, 0], probe: [], directional: [], directionalShadow: [], directionalShadowMap: [], directionalShadowMatrix: [], spot: [], spotLightMap: [], spotShadow: [], spotShadowMap: [], spotLightMatrix: [], rectArea: [], rectAreaLTC1: null, rectAreaLTC2: null, point: [], pointShadow: [], pointShadowMap: [], pointShadowMatrix: [], hemi: [], numSpotLightShadowsWithMaps: 0, numLightProbes: 0 }, a = 0; a < 9; a++)r.probe.push(new Ql); var o = new Ql, s = new Sg, l = new Sg; return { setup: function (a, o) { for (var s = 0, l = 0, g = 0, c = 0; c < 9; c++)r.probe[c].set(0, 0, 0); var u = 0, C = 0, d = 0, I = 0, h = 0, A = 0, p = 0, f = 0, m = 0, v = 0, b = 0; a.sort(_d); for (var y = !0 === o ? Math.PI : 1, G = 0, B = a.length; G < B; G++) { var Z = a[G], w = Z.color, S = Z.intensity, R = Z.distance, x = Z.shadow && Z.shadow.map ? Z.shadow.map.texture : null; if (Z.isAmbientLight) s += w.r * S * y, l += w.g * S * y, g += w.b * S * y; else if (Z.isLightProbe) { for (var W = 0; W < 9; W++)r.probe[W].addScaledVector(Z.sh.coefficients[W], S); b++ } else if (Z.isDirectionalLight) { var V = n.get(Z); if (V.color.copy(Z.color).multiplyScalar(Z.intensity * y), Z.castShadow) { var k = Z.shadow, H = i.get(Z); H.shadowBias = k.bias, H.shadowNormalBias = k.normalBias, H.shadowRadius = k.radius, H.shadowMapSize = k.mapSize, r.directionalShadow[u] = H, r.directionalShadowMap[u] = x, r.directionalShadowMatrix[u] = Z.shadow.matrix, A++ } r.directional[u] = V, u++ } else if (Z.isSpotLight) { var M = n.get(Z); M.position.setFromMatrixPosition(Z.matrixWorld), M.color.copy(w).multiplyScalar(S * y), M.distance = R, M.coneCos = Math.cos(Z.angle), M.penumbraCos = Math.cos(Z.angle * (1 - Z.penumbra)), M.decay = Z.decay, r.spot[d] = M; var F = Z.shadow; if (Z.map && (r.spotLightMap[m] = Z.map, m++, F.updateMatrices(Z), Z.castShadow && v++), r.spotLightMatrix[d] = F.matrix, Z.castShadow) { var N = i.get(Z); N.shadowBias = F.bias, N.shadowNormalBias = F.normalBias, N.shadowRadius = F.radius, N.shadowMapSize = F.mapSize, r.spotShadow[d] = N, r.spotShadowMap[d] = x, f++ } d++ } else if (Z.isRectAreaLight) { var X = n.get(Z); X.color.copy(w).multiplyScalar(S), X.halfWidth.set(.5 * Z.width, 0, 0), X.halfHeight.set(0, .5 * Z.height, 0), r.rectArea[I] = X, I++ } else if (Z.isPointLight) { var Y = n.get(Z); if (Y.color.copy(Z.color).multiplyScalar(Z.intensity * y), Y.distance = Z.distance, Y.decay = Z.decay, Z.castShadow) { var K = Z.shadow, L = i.get(Z); L.shadowBias = K.bias, L.shadowNormalBias = K.normalBias, L.shadowRadius = K.radius, L.shadowMapSize = K.mapSize, L.shadowCameraNear = K.camera.near, L.shadowCameraFar = K.camera.far, r.pointShadow[C] = L, r.pointShadowMap[C] = x, r.pointShadowMatrix[C] = Z.shadow.matrix, p++ } r.point[C] = Y, C++ } else if (Z.isHemisphereLight) { var z = n.get(Z); z.skyColor.copy(Z.color).multiplyScalar(S * y), z.groundColor.copy(Z.groundColor).multiplyScalar(S * y), r.hemi[h] = z, h++ } } I > 0 && (t.isWebGL2 || !0 === e.has("OES_texture_float_linear") ? (r.rectAreaLTC1 = Mu.LTC_FLOAT_1, r.rectAreaLTC2 = Mu.LTC_FLOAT_2) : !0 === e.has("OES_texture_half_float_linear") ? (r.rectAreaLTC1 = Mu.LTC_HALF_1, r.rectAreaLTC2 = Mu.LTC_HALF_2) : console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")), r.ambient[0] = s, r.ambient[1] = l, r.ambient[2] = g; var E = r.hash; E.directionalLength === u && E.pointLength === C && E.spotLength === d && E.rectAreaLength === I && E.hemiLength === h && E.numDirectionalShadows === A && E.numPointShadows === p && E.numSpotShadows === f && E.numSpotMaps === m && E.numLightProbes === b || (r.directional.length = u, r.spot.length = d, r.rectArea.length = I, r.point.length = C, r.hemi.length = h, r.directionalShadow.length = A, r.directionalShadowMap.length = A, r.pointShadow.length = p, r.pointShadowMap.length = p, r.spotShadow.length = f, r.spotShadowMap.length = f, r.directionalShadowMatrix.length = A, r.pointShadowMatrix.length = p, r.spotLightMatrix.length = f + m - v, r.spotLightMap.length = m, r.numSpotLightShadowsWithMaps = v, r.numLightProbes = b, E.directionalLength = u, E.pointLength = C, E.spotLength = d, E.rectAreaLength = I, E.hemiLength = h, E.numDirectionalShadows = A, E.numPointShadows = p, E.numSpotShadows = f, E.numSpotMaps = m, E.numLightProbes = b, r.version = Td++) }, setupView: function (e, t) { for (var n = 0, i = 0, a = 0, g = 0, c = 0, u = t.matrixWorldInverse, C = 0, d = e.length; C < d; C++) { var I = e[C]; if (I.isDirectionalLight) { var h = r.directional[n]; h.direction.setFromMatrixPosition(I.matrixWorld), o.setFromMatrixPosition(I.target.matrixWorld), h.direction.sub(o), h.direction.transformDirection(u), n++ } else if (I.isSpotLight) { var A = r.spot[a]; A.position.setFromMatrixPosition(I.matrixWorld), A.position.applyMatrix4(u), A.direction.setFromMatrixPosition(I.matrixWorld), o.setFromMatrixPosition(I.target.matrixWorld), A.direction.sub(o), A.direction.transformDirection(u), a++ } else if (I.isRectAreaLight) { var p = r.rectArea[g]; p.position.setFromMatrixPosition(I.matrixWorld), p.position.applyMatrix4(u), l.identity(), s.copy(I.matrixWorld), s.premultiply(u), l.extractRotation(s), p.halfWidth.set(.5 * I.width, 0, 0), p.halfHeight.set(0, .5 * I.height, 0), p.halfWidth.applyMatrix4(l), p.halfHeight.applyMatrix4(l), g++ } else if (I.isPointLight) { var f = r.point[i]; f.position.setFromMatrixPosition(I.matrixWorld), f.position.applyMatrix4(u), i++ } else if (I.isHemisphereLight) { var m = r.hemi[c]; m.direction.setFromMatrixPosition(I.matrixWorld), m.direction.transformDirection(u), c++ } } }, state: r } } function Dd(e, t) { var n = new Ud(e, t), i = [], r = []; return { init: function () { i.length = 0, r.length = 0 }, state: { lightsArray: i, shadowsArray: r, lights: n }, setupLights: function (e) { n.setup(i, e) }, setupLightsView: function (e) { n.setupView(i, e) }, pushLight: function (e) { i.push(e) }, pushShadow: function (e) { r.push(e) } } } function Pd(e, t) { var n = new WeakMap; return { get: function (i) { var r, a = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, o = n.get(i); return void 0 === o ? (r = new Dd(e, t), n.set(i, [r])) : a >= o.length ? (r = new Dd(e, t), o.push(r)) : r = o[a], r }, dispose: function () { n = new WeakMap } } } var Jd = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).isMeshDepthMaterial = !0, i.type = "MeshDepthMaterial", i.depthPacking = os, i.map = null, i.alphaMap = null, i.displacementMap = null, i.displacementScale = 1, i.displacementBias = 0, i.wireframe = !1, i.wireframeLinewidth = 1, i.setValues(e), i } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.depthPacking = e.depthPacking, this.map = e.map, this.alphaMap = e.alphaMap, this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this } }]), n }(Cc), Od = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).isMeshDistanceMaterial = !0, i.type = "MeshDistanceMaterial", i.map = null, i.alphaMap = null, i.displacementMap = null, i.displacementScale = 1, i.displacementBias = 0, i.setValues(e), i } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.map = e.map, this.alphaMap = e.alphaMap, this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this } }]), n }(Cc); function jd(e, t, n) { var i, r = new xu, a = new fl, o = new fl, s = new El, g = new Jd({ depthPacking: ss }), c = new Od, u = {}, C = n.maxTextureSize, d = (i = {}, (0, l.Z)(i, Fr, Nr), (0, l.Z)(i, Nr, Fr), (0, l.Z)(i, Xr, Xr), i), I = new Au({ defines: { VSM_SAMPLES: 8 }, uniforms: { shadow_pass: { value: null }, resolution: { value: new fl }, radius: { value: 4 } }, vertexShader: "void main() {\n\tgl_Position = vec4( position, 1.0 );\n}", fragmentShader: "uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}" }), h = I.clone(); h.defines.HORIZONTAL_PASS = 1; var A = new Uc; A.setAttribute("position", new Sc(new Float32Array([-1, -1, .5, 3, -1, .5, -1, 3, .5]), 3)); var p = new gu(A, I), f = this; this.enabled = !1, this.autoUpdate = !0, this.needsUpdate = !1, this.type = kr; var m = this.type; function v(n, i) { var r = t.update(p); I.defines.VSM_SAMPLES !== n.blurSamples && (I.defines.VSM_SAMPLES = n.blurSamples, h.defines.VSM_SAMPLES = n.blurSamples, I.needsUpdate = !0, h.needsUpdate = !0), null === n.mapPass && (n.mapPass = new _l(a.x, a.y)), I.uniforms.shadow_pass.value = n.map.texture, I.uniforms.resolution.value = n.mapSize, I.uniforms.radius.value = n.radius, e.setRenderTarget(n.mapPass), e.clear(), e.renderBufferDirect(i, null, r, I, p, null), h.uniforms.shadow_pass.value = n.mapPass.texture, h.uniforms.resolution.value = n.mapSize, h.uniforms.radius.value = n.radius, e.setRenderTarget(n.map), e.clear(), e.renderBufferDirect(i, null, r, h, p, null) } function b(t, n, i, r) { var a = null, o = !0 === i.isPointLight ? t.customDistanceMaterial : t.customDepthMaterial; if (void 0 !== o) a = o; else if (a = !0 === i.isPointLight ? c : g, e.localClippingEnabled && !0 === n.clipShadows && Array.isArray(n.clippingPlanes) && 0 !== n.clippingPlanes.length || n.displacementMap && 0 !== n.displacementScale || n.alphaMap && n.alphaTest > 0 || n.map && n.alphaTest > 0) { var s = a.uuid, l = n.uuid, C = u[s]; void 0 === C && (C = {}, u[s] = C); var I = C[l]; void 0 === I && (I = a.clone(), C[l] = I), a = I } (a.visible = n.visible, a.wireframe = n.wireframe, a.side = r === Mr ? null !== n.shadowSide ? n.shadowSide : n.side : null !== n.shadowSide ? n.shadowSide : d[n.side], a.alphaMap = n.alphaMap, a.alphaTest = n.alphaTest, a.map = n.map, a.clipShadows = n.clipShadows, a.clippingPlanes = n.clippingPlanes, a.clipIntersection = n.clipIntersection, a.displacementMap = n.displacementMap, a.displacementScale = n.displacementScale, a.displacementBias = n.displacementBias, a.wireframeLinewidth = n.wireframeLinewidth, a.linewidth = n.linewidth, !0 === i.isPointLight && !0 === a.isMeshDistanceMaterial) && (e.properties.get(a).light = i); return a } function y(n, i, a, o, s) { if (!1 !== n.visible) { if (n.layers.test(i.layers) && (n.isMesh || n.isLine || n.isPoints) && (n.castShadow || n.receiveShadow && s === Mr) && (!n.frustumCulled || r.intersectsObject(n))) { n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse, n.matrixWorld); var l = t.update(n), g = n.material; if (Array.isArray(g)) for (var c = l.groups, u = 0, C = c.length; u < C; u++) { var d = c[u], I = g[d.materialIndex]; if (I && I.visible) { var h = b(n, I, o, s); e.renderBufferDirect(a, null, l, h, n, d) } } else if (g.visible) { var A = b(n, g, o, s); e.renderBufferDirect(a, null, l, A, n, null) } } for (var p = n.children, f = 0, m = p.length; f < m; f++)y(p[f], i, a, o, s) } } this.render = function (t, n, i) { if (!1 !== f.enabled && (!1 !== f.autoUpdate || !1 !== f.needsUpdate) && 0 !== t.length) { var l = e.getRenderTarget(), g = e.getActiveCubeFace(), c = e.getActiveMipmapLevel(), u = e.state; u.setBlending(Kr), u.buffers.color.setClear(1, 1, 1, 1), u.buffers.depth.setTest(!0), u.setScissorTest(!1); for (var d = m !== Mr && this.type === Mr, I = m === Mr && this.type !== Mr, h = 0, A = t.length; h < A; h++) { var p = t[h], b = p.shadow; if (void 0 !== b) { if (!1 !== b.autoUpdate || !1 !== b.needsUpdate) { a.copy(b.mapSize); var G = b.getFrameExtents(); if (a.multiply(G), o.copy(b.mapSize), (a.x > C || a.y > C) && (a.x > C && (o.x = Math.floor(C / G.x), a.x = o.x * G.x, b.mapSize.x = o.x), a.y > C && (o.y = Math.floor(C / G.y), a.y = o.y * G.y, b.mapSize.y = o.y)), null === b.map || !0 === d || !0 === I) { var B = this.type !== Mr ? { minFilter: Ha, magFilter: Ha } : {}; null !== b.map && b.map.dispose(), b.map = new _l(a.x, a.y, B), b.map.texture.name = p.name + ".shadowMap", b.camera.updateProjectionMatrix() } e.setRenderTarget(b.map), e.clear(); for (var Z = b.getViewportCount(), w = 0; w < Z; w++) { var S = b.getViewport(w); s.set(o.x * S.x, o.y * S.y, o.x * S.z, o.y * S.w), u.viewport(s), b.updateMatrices(p, w), r = b.getFrustum(), y(n, i, b.camera, p, this.type) } !0 !== b.isPointLightShadow && this.type === Mr && v(b, i), b.needsUpdate = !1 } } else console.warn("THREE.WebGLShadowMap:", p, "has no shadow.") } m = this.type, f.needsUpdate = !1, e.setRenderTarget(l, g, c) } } } function Qd(e, t, n) { var i, r, a = n.isWebGL2; var o = new function () { var t = !1, n = new El, i = null, r = new El(0, 0, 0, 0); return { setMask: function (n) { i === n || t || (e.colorMask(n, n, n, n), i = n) }, setLocked: function (e) { t = e }, setClear: function (t, i, a, o, s) { !0 === s && (t *= o, i *= o, a *= o), n.set(t, i, a, o), !1 === r.equals(n) && (e.clearColor(t, i, a, o), r.copy(n)) }, reset: function () { t = !1, i = null, r.set(-1, 0, 0, 0) } } }, s = new function () { var t = !1, n = null, i = null, r = null; return { setTest: function (t) { t ? T(e.DEPTH_TEST) : _(e.DEPTH_TEST) }, setMask: function (i) { n === i || t || (e.depthMask(i), n = i) }, setFunc: function (t) { if (i !== t) { switch (t) { case sa: e.depthFunc(e.NEVER); break; case la: e.depthFunc(e.ALWAYS); break; case ga: e.depthFunc(e.LESS); break; case ca: e.depthFunc(e.LEQUAL); break; case ua: e.depthFunc(e.EQUAL); break; case Ca: e.depthFunc(e.GEQUAL); break; case da: e.depthFunc(e.GREATER); break; case Ia: e.depthFunc(e.NOTEQUAL); break; default: e.depthFunc(e.LEQUAL) }i = t } }, setLocked: function (e) { t = e }, setClear: function (t) { r !== t && (e.clearDepth(t), r = t) }, reset: function () { t = !1, n = null, i = null, r = null } } }, g = new function () { var t = !1, n = null, i = null, r = null, a = null, o = null, s = null, l = null, g = null; return { setTest: function (n) { t || (n ? T(e.STENCIL_TEST) : _(e.STENCIL_TEST)) }, setMask: function (i) { n === i || t || (e.stencilMask(i), n = i) }, setFunc: function (t, n, o) { i === t && r === n && a === o || (e.stencilFunc(t, n, o), i = t, r = n, a = o) }, setOp: function (t, n, i) { o === t && s === n && l === i || (e.stencilOp(t, n, i), o = t, s = n, l = i) }, setLocked: function (e) { t = e }, setClear: function (t) { g !== t && (e.clearStencil(t), g = t) }, reset: function () { t = !1, n = null, i = null, r = null, a = null, o = null, s = null, l = null, g = null } } }, c = new WeakMap, u = new WeakMap, C = {}, d = {}, I = new WeakMap, h = [], A = null, p = !1, f = null, m = null, v = null, b = null, y = null, G = null, B = null, Z = !1, w = null, S = null, R = null, x = null, W = null, V = e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS), k = !1, H = 0, M = e.getParameter(e.VERSION); -1 !== M.indexOf("WebGL") ? (H = parseFloat(/^WebGL (\d)/.exec(M)[1]), k = H >= 1) : -1 !== M.indexOf("OpenGL ES") && (H = parseFloat(/^OpenGL ES (\d)/.exec(M)[1]), k = H >= 2); var F = null, N = {}, X = e.getParameter(e.SCISSOR_BOX), Y = e.getParameter(e.VIEWPORT), K = (new El).fromArray(X), L = (new El).fromArray(Y); function z(t, n, i, r) { var o = new Uint8Array(4), s = e.createTexture(); e.bindTexture(t, s), e.texParameteri(t, e.TEXTURE_MIN_FILTER, e.NEAREST), e.texParameteri(t, e.TEXTURE_MAG_FILTER, e.NEAREST); for (var l = 0; l < i; l++)!a || t !== e.TEXTURE_3D && t !== e.TEXTURE_2D_ARRAY ? e.texImage2D(n + l, 0, e.RGBA, 1, 1, 0, e.RGBA, e.UNSIGNED_BYTE, o) : e.texImage3D(n, 0, e.RGBA, 1, 1, r, 0, e.RGBA, e.UNSIGNED_BYTE, o); return s } var E = {}; function T(t) { !0 !== C[t] && (e.enable(t), C[t] = !0) } function _(t) { !1 !== C[t] && (e.disable(t), C[t] = !1) } E[e.TEXTURE_2D] = z(e.TEXTURE_2D, e.TEXTURE_2D, 1), E[e.TEXTURE_CUBE_MAP] = z(e.TEXTURE_CUBE_MAP, e.TEXTURE_CUBE_MAP_POSITIVE_X, 6), a && (E[e.TEXTURE_2D_ARRAY] = z(e.TEXTURE_2D_ARRAY, e.TEXTURE_2D_ARRAY, 1, 1), E[e.TEXTURE_3D] = z(e.TEXTURE_3D, e.TEXTURE_3D, 1, 1)), o.setClear(0, 0, 0, 1), s.setClear(1), g.setClear(0), T(e.DEPTH_TEST), s.setFunc(ca), O(!1), j(Rr), T(e.CULL_FACE), J(Kr); var U = (i = {}, (0, l.Z)(i, Ur, e.FUNC_ADD), (0, l.Z)(i, Dr, e.FUNC_SUBTRACT), (0, l.Z)(i, Pr, e.FUNC_REVERSE_SUBTRACT), i); if (a) U[Jr] = e.MIN, U[Or] = e.MAX; else { var D = t.get("EXT_blend_minmax"); null !== D && (U[Jr] = D.MIN_EXT, U[Or] = D.MAX_EXT) } var P = (r = {}, (0, l.Z)(r, jr, e.ZERO), (0, l.Z)(r, Qr, e.ONE), (0, l.Z)(r, qr, e.SRC_COLOR), (0, l.Z)(r, ea, e.SRC_ALPHA), (0, l.Z)(r, oa, e.SRC_ALPHA_SATURATE), (0, l.Z)(r, ra, e.DST_COLOR), (0, l.Z)(r, na, e.DST_ALPHA), (0, l.Z)(r, $r, e.ONE_MINUS_SRC_COLOR), (0, l.Z)(r, ta, e.ONE_MINUS_SRC_ALPHA), (0, l.Z)(r, aa, e.ONE_MINUS_DST_COLOR), (0, l.Z)(r, ia, e.ONE_MINUS_DST_ALPHA), r); function J(t, n, i, r, a, o, s, l) { if (t !== Kr) { if (!1 === p && (T(e.BLEND), p = !0), t === _r) a = a || n, o = o || i, s = s || r, n === m && a === y || (e.blendEquationSeparate(U[n], U[a]), m = n, y = a), i === v && r === b && o === G && s === B || (e.blendFuncSeparate(P[i], P[r], P[o], P[s]), v = i, b = r, G = o, B = s), f = t, Z = !1; else if (t !== f || l !== Z) { if (m === Ur && y === Ur || (e.blendEquation(e.FUNC_ADD), m = Ur, y = Ur), l) switch (t) { case Lr: e.blendFuncSeparate(e.ONE, e.ONE_MINUS_SRC_ALPHA, e.ONE, e.ONE_MINUS_SRC_ALPHA); break; case zr: e.blendFunc(e.ONE, e.ONE); break; case Er: e.blendFuncSeparate(e.ZERO, e.ONE_MINUS_SRC_COLOR, e.ZERO, e.ONE); break; case Tr: e.blendFuncSeparate(e.ZERO, e.SRC_COLOR, e.ZERO, e.SRC_ALPHA); break; default: console.error("THREE.WebGLState: Invalid blending: ", t) } else switch (t) { case Lr: e.blendFuncSeparate(e.SRC_ALPHA, e.ONE_MINUS_SRC_ALPHA, e.ONE, e.ONE_MINUS_SRC_ALPHA); break; case zr: e.blendFunc(e.SRC_ALPHA, e.ONE); break; case Er: e.blendFuncSeparate(e.ZERO, e.ONE_MINUS_SRC_COLOR, e.ZERO, e.ONE); break; case Tr: e.blendFunc(e.ZERO, e.SRC_COLOR); break; default: console.error("THREE.WebGLState: Invalid blending: ", t) }v = null, b = null, G = null, B = null, f = t, Z = l } } else !0 === p && (_(e.BLEND), p = !1) } function O(t) { w !== t && (t ? e.frontFace(e.CW) : e.frontFace(e.CCW), w = t) } function j(t) { t !== Sr ? (T(e.CULL_FACE), t !== S && (t === Rr ? e.cullFace(e.BACK) : t === xr ? e.cullFace(e.FRONT) : e.cullFace(e.FRONT_AND_BACK))) : _(e.CULL_FACE), S = t } function Q(t, n, i) { t ? (T(e.POLYGON_OFFSET_FILL), x === n && W === i || (e.polygonOffset(n, i), x = n, W = i)) : _(e.POLYGON_OFFSET_FILL) } return { buffers: { color: o, depth: s, stencil: g }, enable: T, disable: _, bindFramebuffer: function (t, n) { return d[t] !== n && (e.bindFramebuffer(t, n), d[t] = n, a && (t === e.DRAW_FRAMEBUFFER && (d[e.FRAMEBUFFER] = n), t === e.FRAMEBUFFER && (d[e.DRAW_FRAMEBUFFER] = n)), !0) }, drawBuffers: function (i, r) { var a = h, o = !1; if (i) if (void 0 === (a = I.get(r)) && (a = [], I.set(r, a)), i.isWebGLMultipleRenderTargets) { var s = i.texture; if (a.length !== s.length || a[0] !== e.COLOR_ATTACHMENT0) { for (var l = 0, g = s.length; l < g; l++)a[l] = e.COLOR_ATTACHMENT0 + l; a.length = s.length, o = !0 } } else a[0] !== e.COLOR_ATTACHMENT0 && (a[0] = e.COLOR_ATTACHMENT0, o = !0); else a[0] !== e.BACK && (a[0] = e.BACK, o = !0); o && (n.isWebGL2 ? e.drawBuffers(a) : t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a)) }, useProgram: function (t) { return A !== t && (e.useProgram(t), A = t, !0) }, setBlending: J, setMaterial: function (t, n) { t.side === Xr ? _(e.CULL_FACE) : T(e.CULL_FACE); var i = t.side === Nr; n && (i = !i), O(i), t.blending === Lr && !1 === t.transparent ? J(Kr) : J(t.blending, t.blendEquation, t.blendSrc, t.blendDst, t.blendEquationAlpha, t.blendSrcAlpha, t.blendDstAlpha, t.premultipliedAlpha), s.setFunc(t.depthFunc), s.setTest(t.depthTest), s.setMask(t.depthWrite), o.setMask(t.colorWrite); var r = t.stencilWrite; g.setTest(r), r && (g.setMask(t.stencilWriteMask), g.setFunc(t.stencilFunc, t.stencilRef, t.stencilFuncMask), g.setOp(t.stencilFail, t.stencilZFail, t.stencilZPass)), Q(t.polygonOffset, t.polygonOffsetFactor, t.polygonOffsetUnits), !0 === t.alphaToCoverage ? T(e.SAMPLE_ALPHA_TO_COVERAGE) : _(e.SAMPLE_ALPHA_TO_COVERAGE) }, setFlipSided: O, setCullFace: j, setLineWidth: function (t) { t !== R && (k && e.lineWidth(t), R = t) }, setPolygonOffset: Q, setScissorTest: function (t) { t ? T(e.SCISSOR_TEST) : _(e.SCISSOR_TEST) }, activeTexture: function (t) { void 0 === t && (t = e.TEXTURE0 + V - 1), F !== t && (e.activeTexture(t), F = t) }, bindTexture: function (t, n, i) { void 0 === i && (i = null === F ? e.TEXTURE0 + V - 1 : F); var r = N[i]; void 0 === r && (r = { type: void 0, texture: void 0 }, N[i] = r), r.type === t && r.texture === n || (F !== i && (e.activeTexture(i), F = i), e.bindTexture(t, n || E[t]), r.type = t, r.texture = n) }, unbindTexture: function () { var t = N[F]; void 0 !== t && void 0 !== t.type && (e.bindTexture(t.type, null), t.type = void 0, t.texture = void 0) }, compressedTexImage2D: function () { try { e.compressedTexImage2D.apply(e, arguments) } catch (t) { console.error("THREE.WebGLState:", t) } }, compressedTexImage3D: function () { try { e.compressedTexImage3D.apply(e, arguments) } catch (t) { console.error("THREE.WebGLState:", t) } }, texImage2D: function () { try { e.texImage2D.apply(e, arguments) } catch (t) { console.error("THREE.WebGLState:", t) } }, texImage3D: function () { try { e.texImage3D.apply(e, arguments) } catch (t) { console.error("THREE.WebGLState:", t) } }, updateUBOMapping: function (t, n) { var i = u.get(n); void 0 === i && (i = new WeakMap, u.set(n, i)); var r = i.get(t); void 0 === r && (r = e.getUniformBlockIndex(n, t.name), i.set(t, r)) }, uniformBlockBinding: function (t, n) { var i = u.get(n).get(t); c.get(n) !== i && (e.uniformBlockBinding(n, i, t.__bindingPointIndex), c.set(n, i)) }, texStorage2D: function () { try { e.texStorage2D.apply(e, arguments) } catch (t) { console.error("THREE.WebGLState:", t) } }, texStorage3D: function () { try { e.texStorage3D.apply(e, arguments) } catch (t) { console.error("THREE.WebGLState:", t) } }, texSubImage2D: function () { try { e.texSubImage2D.apply(e, arguments) } catch (t) { console.error("THREE.WebGLState:", t) } }, texSubImage3D: function () { try { e.texSubImage3D.apply(e, arguments) } catch (t) { console.error("THREE.WebGLState:", t) } }, compressedTexSubImage2D: function () { try { e.compressedTexSubImage2D.apply(e, arguments) } catch (t) { console.error("THREE.WebGLState:", t) } }, compressedTexSubImage3D: function () { try { e.compressedTexSubImage3D.apply(e, arguments) } catch (t) { console.error("THREE.WebGLState:", t) } }, scissor: function (t) { !1 === K.equals(t) && (e.scissor(t.x, t.y, t.z, t.w), K.copy(t)) }, viewport: function (t) { !1 === L.equals(t) && (e.viewport(t.x, t.y, t.z, t.w), L.copy(t)) }, reset: function () { e.disable(e.BLEND), e.disable(e.CULL_FACE), e.disable(e.DEPTH_TEST), e.disable(e.POLYGON_OFFSET_FILL), e.disable(e.SCISSOR_TEST), e.disable(e.STENCIL_TEST), e.disable(e.SAMPLE_ALPHA_TO_COVERAGE), e.blendEquation(e.FUNC_ADD), e.blendFunc(e.ONE, e.ZERO), e.blendFuncSeparate(e.ONE, e.ZERO, e.ONE, e.ZERO), e.colorMask(!0, !0, !0, !0), e.clearColor(0, 0, 0, 0), e.depthMask(!0), e.depthFunc(e.LESS), e.clearDepth(1), e.stencilMask(4294967295), e.stencilFunc(e.ALWAYS, 0, 4294967295), e.stencilOp(e.KEEP, e.KEEP, e.KEEP), e.clearStencil(0), e.cullFace(e.BACK), e.frontFace(e.CCW), e.polygonOffset(0, 0), e.activeTexture(e.TEXTURE0), e.bindFramebuffer(e.FRAMEBUFFER, null), !0 === a && (e.bindFramebuffer(e.DRAW_FRAMEBUFFER, null), e.bindFramebuffer(e.READ_FRAMEBUFFER, null)), e.useProgram(null), e.lineWidth(1), e.scissor(0, 0, e.canvas.width, e.canvas.height), e.viewport(0, 0, e.canvas.width, e.canvas.height), C = {}, F = null, N = {}, d = {}, I = new WeakMap, h = [], A = null, p = !1, f = null, m = null, v = null, b = null, y = null, G = null, B = null, Z = !1, w = null, S = null, R = null, x = null, W = null, K.set(0, 0, e.canvas.width, e.canvas.height), L.set(0, 0, e.canvas.width, e.canvas.height), o.reset(), s.reset(), g.reset() } } } function qd(e, t, n, i, r, a, o) { var s, g, c, u, C = r.isWebGL2, d = r.maxTextures, I = r.maxCubemapSize, h = r.maxTextureSize, A = r.maxSamples, p = t.has("WEBGL_multisampled_render_to_texture") ? t.get("WEBGL_multisampled_render_to_texture") : null, f = "undefined" !== typeof navigator && /OculusBrowser/g.test(navigator.userAgent), m = new WeakMap, v = new WeakMap, b = !1; try { b = "undefined" !== typeof OffscreenCanvas && null !== new OffscreenCanvas(1, 1).getContext("2d") } catch (P) { } function y(e, t) { return b ? new OffscreenCanvas(e, t) : Bl("canvas") } function G(e, t, n, i) { var r = 1; if ((e.width > i || e.height > i) && (r = i / Math.max(e.width, e.height)), r < 1 || !0 === t) { if ("undefined" !== typeof HTMLImageElement && e instanceof HTMLImageElement || "undefined" !== typeof HTMLCanvasElement && e instanceof HTMLCanvasElement || "undefined" !== typeof ImageBitmap && e instanceof ImageBitmap) { var a = t ? Il : Math.floor, o = a(r * e.width), s = a(r * e.height); void 0 === u && (u = y(o, s)); var l = n ? y(o, s) : u; return l.width = o, l.height = s, l.getContext("2d").drawImage(e, 0, 0, o, s), console.warn("THREE.WebGLRenderer: Texture has been resized from (" + e.width + "x" + e.height + ") to (" + o + "x" + s + ")."), l } return "data" in e && console.warn("THREE.WebGLRenderer: Image in DataTexture is too big (" + e.width + "x" + e.height + ")."), e } return e } function B(e) { return Cl(e.width) && Cl(e.height) } function Z(e, t) { return e.generateMipmaps && t && e.minFilter !== Ha && e.minFilter !== Ya } function w(t) { e.generateMipmap(t) } function S(n, i, r, a) { var o = arguments.length > 4 && void 0 !== arguments[4] && arguments[4]; if (!1 === C) return i; if (null !== n) { if (void 0 !== e[n]) return e[n]; console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '" + n + "'") } var s = i; if (i === e.RED && (r === e.FLOAT && (s = e.R32F), r === e.HALF_FLOAT && (s = e.R16F), r === e.UNSIGNED_BYTE && (s = e.R8)), i === e.RED_INTEGER && (r === e.UNSIGNED_BYTE && (s = e.R8UI), r === e.UNSIGNED_SHORT && (s = e.R16UI), r === e.UNSIGNED_INT && (s = e.R32UI), r === e.BYTE && (s = e.R8I), r === e.SHORT && (s = e.R16I), r === e.INT && (s = e.R32I)), i === e.RG && (r === e.FLOAT && (s = e.RG32F), r === e.HALF_FLOAT && (s = e.RG16F), r === e.UNSIGNED_BYTE && (s = e.RG8)), i === e.RGBA) { var l = o ? hs : Hl.getTransfer(a); r === e.FLOAT && (s = e.RGBA32F), r === e.HALF_FLOAT && (s = e.RGBA16F), r === e.UNSIGNED_BYTE && (s = l === As ? e.SRGB8_ALPHA8 : e.RGBA8), r === e.UNSIGNED_SHORT_4_4_4_4 && (s = e.RGBA4), r === e.UNSIGNED_SHORT_5_5_5_1 && (s = e.RGB5_A1) } return s !== e.R16F && s !== e.R32F && s !== e.RG16F && s !== e.RG32F && s !== e.RGBA16F && s !== e.RGBA32F || t.get("EXT_color_buffer_float"), s } function R(e, t, n) { return !0 === Z(e, n) || e.isFramebufferTexture && e.minFilter !== Ha && e.minFilter !== Ya ? Math.log2(Math.max(t.width, t.height)) + 1 : void 0 !== e.mipmaps && e.mipmaps.length > 0 ? e.mipmaps.length : e.isCompressedTexture && Array.isArray(e.image) ? t.mipmaps.length : 1 } function x(t) { return t === Ha || t === Ma || t === Na ? e.NEAREST : e.LINEAR } function W(e) { var t = e.target; t.removeEventListener("dispose", W), function (e) { var t = i.get(e); if (void 0 === t.__webglInit) return; var n = e.source, r = v.get(n); if (r) { var a = r[t.__cacheKey]; a.usedTimes--, 0 === a.usedTimes && k(e), 0 === Object.keys(r).length && v.delete(n) } i.remove(e) }(t), t.isVideoTexture && m.delete(t) } function V(t) { var n = t.target; n.removeEventListener("dispose", V), function (t) { var n = t.texture, r = i.get(t), a = i.get(n); void 0 !== a.__webglTexture && (e.deleteTexture(a.__webglTexture), o.memory.textures--); t.depthTexture && t.depthTexture.dispose(); if (t.isWebGLCubeRenderTarget) for (var s = 0; s < 6; s++) { if (Array.isArray(r.__webglFramebuffer[s])) for (var l = 0; l < r.__webglFramebuffer[s].length; l++)e.deleteFramebuffer(r.__webglFramebuffer[s][l]); else e.deleteFramebuffer(r.__webglFramebuffer[s]); r.__webglDepthbuffer && e.deleteRenderbuffer(r.__webglDepthbuffer[s]) } else { if (Array.isArray(r.__webglFramebuffer)) for (var g = 0; g < r.__webglFramebuffer.length; g++)e.deleteFramebuffer(r.__webglFramebuffer[g]); else e.deleteFramebuffer(r.__webglFramebuffer); if (r.__webglDepthbuffer && e.deleteRenderbuffer(r.__webglDepthbuffer), r.__webglMultisampledFramebuffer && e.deleteFramebuffer(r.__webglMultisampledFramebuffer), r.__webglColorRenderbuffer) for (var c = 0; c < r.__webglColorRenderbuffer.length; c++)r.__webglColorRenderbuffer[c] && e.deleteRenderbuffer(r.__webglColorRenderbuffer[c]); r.__webglDepthRenderbuffer && e.deleteRenderbuffer(r.__webglDepthRenderbuffer) } if (t.isWebGLMultipleRenderTargets) for (var u = 0, C = n.length; u < C; u++) { var d = i.get(n[u]); d.__webglTexture && (e.deleteTexture(d.__webglTexture), o.memory.textures--), i.remove(n[u]) } i.remove(n), i.remove(t) }(n) } function k(t) { var n = i.get(t); e.deleteTexture(n.__webglTexture); var r = t.source; delete v.get(r)[n.__cacheKey], o.memory.textures-- } var H = 0; function M(t, r) { var a = i.get(t); if (t.isVideoTexture && function (e) { var t = o.render.frame; m.get(e) !== t && (m.set(e, t), e.update()) }(t), !1 === t.isRenderTargetTexture && t.version > 0 && a.__version !== t.version) { var s = t.image; if (null === s) console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found."); else { if (!1 !== s.complete) return void L(a, t, r); console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete") } } n.bindTexture(e.TEXTURE_2D, a.__webglTexture, e.TEXTURE0 + r) } var F = (s = {}, (0, l.Z)(s, Wa, e.REPEAT), (0, l.Z)(s, Va, e.CLAMP_TO_EDGE), (0, l.Z)(s, ka, e.MIRRORED_REPEAT), s), N = (g = {}, (0, l.Z)(g, Ha, e.NEAREST), (0, l.Z)(g, Ma, e.NEAREST_MIPMAP_NEAREST), (0, l.Z)(g, Na, e.NEAREST_MIPMAP_LINEAR), (0, l.Z)(g, Ya, e.LINEAR), (0, l.Z)(g, Ka, e.LINEAR_MIPMAP_NEAREST), (0, l.Z)(g, za, e.LINEAR_MIPMAP_LINEAR), g), X = (c = {}, (0, l.Z)(c, Fs, e.NEVER), (0, l.Z)(c, Es, e.ALWAYS), (0, l.Z)(c, Ns, e.LESS), (0, l.Z)(c, Ys, e.LEQUAL), (0, l.Z)(c, Xs, e.EQUAL), (0, l.Z)(c, zs, e.GEQUAL), (0, l.Z)(c, Ks, e.GREATER), (0, l.Z)(c, Ls, e.NOTEQUAL), c); function Y(n, a, o) { if (o ? (e.texParameteri(n, e.TEXTURE_WRAP_S, F[a.wrapS]), e.texParameteri(n, e.TEXTURE_WRAP_T, F[a.wrapT]), n !== e.TEXTURE_3D && n !== e.TEXTURE_2D_ARRAY || e.texParameteri(n, e.TEXTURE_WRAP_R, F[a.wrapR]), e.texParameteri(n, e.TEXTURE_MAG_FILTER, N[a.magFilter]), e.texParameteri(n, e.TEXTURE_MIN_FILTER, N[a.minFilter])) : (e.texParameteri(n, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE), e.texParameteri(n, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE), n !== e.TEXTURE_3D && n !== e.TEXTURE_2D_ARRAY || e.texParameteri(n, e.TEXTURE_WRAP_R, e.CLAMP_TO_EDGE), a.wrapS === Va && a.wrapT === Va || console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."), e.texParameteri(n, e.TEXTURE_MAG_FILTER, x(a.magFilter)), e.texParameteri(n, e.TEXTURE_MIN_FILTER, x(a.minFilter)), a.minFilter !== Ha && a.minFilter !== Ya && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")), a.compareFunction && (e.texParameteri(n, e.TEXTURE_COMPARE_MODE, e.COMPARE_REF_TO_TEXTURE), e.texParameteri(n, e.TEXTURE_COMPARE_FUNC, X[a.compareFunction])), !0 === t.has("EXT_texture_filter_anisotropic")) { var s = t.get("EXT_texture_filter_anisotropic"); if (a.magFilter === Ha) return; if (a.minFilter !== Na && a.minFilter !== za) return; if (a.type === Oa && !1 === t.has("OES_texture_float_linear")) return; if (!1 === C && a.type === ja && !1 === t.has("OES_texture_half_float_linear")) return; (a.anisotropy > 1 || i.get(a).__currentAnisotropy) && (e.texParameterf(n, s.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(a.anisotropy, r.getMaxAnisotropy())), i.get(a).__currentAnisotropy = a.anisotropy) } } function K(t, n) { var i = !1; void 0 === t.__webglInit && (t.__webglInit = !0, n.addEventListener("dispose", W)); var r = n.source, a = v.get(r); void 0 === a && (a = {}, v.set(r, a)); var s = function (e) { var t = []; return t.push(e.wrapS), t.push(e.wrapT), t.push(e.wrapR || 0), t.push(e.magFilter), t.push(e.minFilter), t.push(e.anisotropy), t.push(e.internalFormat), t.push(e.format), t.push(e.type), t.push(e.generateMipmaps), t.push(e.premultiplyAlpha), t.push(e.flipY), t.push(e.unpackAlignment), t.push(e.colorSpace), t.join() }(n); if (s !== t.__cacheKey) { void 0 === a[s] && (a[s] = { texture: e.createTexture(), usedTimes: 0 }, o.memory.textures++, i = !0), a[s].usedTimes++; var l = a[t.__cacheKey]; void 0 !== l && (a[t.__cacheKey].usedTimes--, 0 === l.usedTimes && k(n)), t.__cacheKey = s, t.__webglTexture = a[s].texture } return i } function L(t, r, o) { var s = e.TEXTURE_2D; (r.isDataArrayTexture || r.isCompressedArrayTexture) && (s = e.TEXTURE_2D_ARRAY), r.isData3DTexture && (s = e.TEXTURE_3D); var l = K(t, r), g = r.source; n.bindTexture(s, t.__webglTexture, e.TEXTURE0 + o); var c = i.get(g); if (g.version !== c.__version || !0 === l) { n.activeTexture(e.TEXTURE0 + o); var u = Hl.getPrimaries(Hl.workingColorSpace), d = r.colorSpace === cs ? null : Hl.getPrimaries(r.colorSpace), I = r.colorSpace === cs || u === d ? e.NONE : e.BROWSER_DEFAULT_WEBGL; e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, r.flipY), e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, r.premultiplyAlpha), e.pixelStorei(e.UNPACK_ALIGNMENT, r.unpackAlignment), e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL, I); var A, p = function (e) { return !C && (e.wrapS !== Va || e.wrapT !== Va || e.minFilter !== Ha && e.minFilter !== Ya) }(r) && !1 === B(r.image), f = G(r.image, p, !1, h), m = B(f = D(r, f)) || C, v = a.convert(r.format, r.colorSpace), b = a.convert(r.type), y = S(r.internalFormat, v, b, r.colorSpace, r.isVideoTexture); Y(s, r, m); var x = r.mipmaps, W = C && !0 !== r.isVideoTexture, V = void 0 === c.__version || !0 === l, k = R(r, f, m); if (r.isDepthTexture) y = e.DEPTH_COMPONENT, C ? y = r.type === Oa ? e.DEPTH_COMPONENT32F : r.type === Ja ? e.DEPTH_COMPONENT24 : r.type === $a ? e.DEPTH24_STENCIL8 : e.DEPTH_COMPONENT16 : r.type === Oa && console.error("WebGLRenderer: Floating point depth texture requires WebGL2."), r.format === ro && y === e.DEPTH_COMPONENT && r.type !== Da && r.type !== Ja && (console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."), r.type = Ja, b = a.convert(r.type)), r.format === ao && y === e.DEPTH_COMPONENT && (y = e.DEPTH_STENCIL, r.type !== $a && (console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."), r.type = $a, b = a.convert(r.type))), V && (W ? n.texStorage2D(e.TEXTURE_2D, 1, y, f.width, f.height) : n.texImage2D(e.TEXTURE_2D, 0, y, f.width, f.height, 0, v, b, null)); else if (r.isDataTexture) if (x.length > 0 && m) { W && V && n.texStorage2D(e.TEXTURE_2D, k, y, x[0].width, x[0].height); for (var H = 0, M = x.length; H < M; H++)A = x[H], W ? n.texSubImage2D(e.TEXTURE_2D, H, 0, 0, A.width, A.height, v, b, A.data) : n.texImage2D(e.TEXTURE_2D, H, y, A.width, A.height, 0, v, b, A.data); r.generateMipmaps = !1 } else W ? (V && n.texStorage2D(e.TEXTURE_2D, k, y, f.width, f.height), n.texSubImage2D(e.TEXTURE_2D, 0, 0, 0, f.width, f.height, v, b, f.data)) : n.texImage2D(e.TEXTURE_2D, 0, y, f.width, f.height, 0, v, b, f.data); else if (r.isCompressedTexture) if (r.isCompressedArrayTexture) { W && V && n.texStorage3D(e.TEXTURE_2D_ARRAY, k, y, x[0].width, x[0].height, f.depth); for (var F = 0, N = x.length; F < N; F++)A = x[F], r.format !== to ? null !== v ? W ? n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY, F, 0, 0, 0, A.width, A.height, f.depth, v, A.data, 0, 0) : n.compressedTexImage3D(e.TEXTURE_2D_ARRAY, F, y, A.width, A.height, f.depth, 0, A.data, 0, 0) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : W ? n.texSubImage3D(e.TEXTURE_2D_ARRAY, F, 0, 0, 0, A.width, A.height, f.depth, v, b, A.data) : n.texImage3D(e.TEXTURE_2D_ARRAY, F, y, A.width, A.height, f.depth, 0, v, b, A.data) } else { W && V && n.texStorage2D(e.TEXTURE_2D, k, y, x[0].width, x[0].height); for (var X = 0, L = x.length; X < L; X++)A = x[X], r.format !== to ? null !== v ? W ? n.compressedTexSubImage2D(e.TEXTURE_2D, X, 0, 0, A.width, A.height, v, A.data) : n.compressedTexImage2D(e.TEXTURE_2D, X, y, A.width, A.height, 0, A.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : W ? n.texSubImage2D(e.TEXTURE_2D, X, 0, 0, A.width, A.height, v, b, A.data) : n.texImage2D(e.TEXTURE_2D, X, y, A.width, A.height, 0, v, b, A.data) } else if (r.isDataArrayTexture) W ? (V && n.texStorage3D(e.TEXTURE_2D_ARRAY, k, y, f.width, f.height, f.depth), n.texSubImage3D(e.TEXTURE_2D_ARRAY, 0, 0, 0, 0, f.width, f.height, f.depth, v, b, f.data)) : n.texImage3D(e.TEXTURE_2D_ARRAY, 0, y, f.width, f.height, f.depth, 0, v, b, f.data); else if (r.isData3DTexture) W ? (V && n.texStorage3D(e.TEXTURE_3D, k, y, f.width, f.height, f.depth), n.texSubImage3D(e.TEXTURE_3D, 0, 0, 0, 0, f.width, f.height, f.depth, v, b, f.data)) : n.texImage3D(e.TEXTURE_3D, 0, y, f.width, f.height, f.depth, 0, v, b, f.data); else if (r.isFramebufferTexture) { if (V) if (W) n.texStorage2D(e.TEXTURE_2D, k, y, f.width, f.height); else for (var z = f.width, E = f.height, T = 0; T < k; T++)n.texImage2D(e.TEXTURE_2D, T, y, z, E, 0, v, b, null), z >>= 1, E >>= 1 } else if (x.length > 0 && m) { W && V && n.texStorage2D(e.TEXTURE_2D, k, y, x[0].width, x[0].height); for (var _ = 0, U = x.length; _ < U; _++)A = x[_], W ? n.texSubImage2D(e.TEXTURE_2D, _, 0, 0, v, b, A) : n.texImage2D(e.TEXTURE_2D, _, y, v, b, A); r.generateMipmaps = !1 } else W ? (V && n.texStorage2D(e.TEXTURE_2D, k, y, f.width, f.height), n.texSubImage2D(e.TEXTURE_2D, 0, 0, 0, v, b, f)) : n.texImage2D(e.TEXTURE_2D, 0, y, v, b, f); Z(r, m) && w(s), c.__version = g.version, r.onUpdate && r.onUpdate(r) } t.__version = r.version } function z(t, r, o, s, l, g) { var c = a.convert(o.format, o.colorSpace), u = a.convert(o.type), C = S(o.internalFormat, c, u, o.colorSpace); if (!i.get(r).__hasExternalTextures) { var d = Math.max(1, r.width >> g), I = Math.max(1, r.height >> g); l === e.TEXTURE_3D || l === e.TEXTURE_2D_ARRAY ? n.texImage3D(l, g, C, d, I, r.depth, 0, c, u, null) : n.texImage2D(l, g, C, d, I, 0, c, u, null) } n.bindFramebuffer(e.FRAMEBUFFER, t), U(r) ? p.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER, s, l, i.get(o).__webglTexture, 0, _(r)) : (l === e.TEXTURE_2D || l >= e.TEXTURE_CUBE_MAP_POSITIVE_X && l <= e.TEXTURE_CUBE_MAP_NEGATIVE_Z) && e.framebufferTexture2D(e.FRAMEBUFFER, s, l, i.get(o).__webglTexture, g), n.bindFramebuffer(e.FRAMEBUFFER, null) } function E(t, n, i) { if (e.bindRenderbuffer(e.RENDERBUFFER, t), n.depthBuffer && !n.stencilBuffer) { var r = !0 === C ? e.DEPTH_COMPONENT24 : e.DEPTH_COMPONENT16; if (i || U(n)) { var o = n.depthTexture; o && o.isDepthTexture && (o.type === Oa ? r = e.DEPTH_COMPONENT32F : o.type === Ja && (r = e.DEPTH_COMPONENT24)); var s = _(n); U(n) ? p.renderbufferStorageMultisampleEXT(e.RENDERBUFFER, s, r, n.width, n.height) : e.renderbufferStorageMultisample(e.RENDERBUFFER, s, r, n.width, n.height) } else e.renderbufferStorage(e.RENDERBUFFER, r, n.width, n.height); e.framebufferRenderbuffer(e.FRAMEBUFFER, e.DEPTH_ATTACHMENT, e.RENDERBUFFER, t) } else if (n.depthBuffer && n.stencilBuffer) { var l = _(n); i && !1 === U(n) ? e.renderbufferStorageMultisample(e.RENDERBUFFER, l, e.DEPTH24_STENCIL8, n.width, n.height) : U(n) ? p.renderbufferStorageMultisampleEXT(e.RENDERBUFFER, l, e.DEPTH24_STENCIL8, n.width, n.height) : e.renderbufferStorage(e.RENDERBUFFER, e.DEPTH_STENCIL, n.width, n.height), e.framebufferRenderbuffer(e.FRAMEBUFFER, e.DEPTH_STENCIL_ATTACHMENT, e.RENDERBUFFER, t) } else for (var g = !0 === n.isWebGLMultipleRenderTargets ? n.texture : [n.texture], c = 0; c < g.length; c++) { var u = g[c], d = a.convert(u.format, u.colorSpace), I = a.convert(u.type), h = S(u.internalFormat, d, I, u.colorSpace), A = _(n); i && !1 === U(n) ? e.renderbufferStorageMultisample(e.RENDERBUFFER, A, h, n.width, n.height) : U(n) ? p.renderbufferStorageMultisampleEXT(e.RENDERBUFFER, A, h, n.width, n.height) : e.renderbufferStorage(e.RENDERBUFFER, h, n.width, n.height) } e.bindRenderbuffer(e.RENDERBUFFER, null) } function T(t) { var r = i.get(t), a = !0 === t.isWebGLCubeRenderTarget; if (t.depthTexture && !r.__autoAllocateDepthBuffer) { if (a) throw new Error("target.depthTexture not supported in Cube render targets"); !function (t, r) { if (r && r.isWebGLCubeRenderTarget) throw new Error("Depth Texture with cube render targets is not supported"); if (n.bindFramebuffer(e.FRAMEBUFFER, t), !r.depthTexture || !r.depthTexture.isDepthTexture) throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture"); i.get(r.depthTexture).__webglTexture && r.depthTexture.image.width === r.width && r.depthTexture.image.height === r.height || (r.depthTexture.image.width = r.width, r.depthTexture.image.height = r.height, r.depthTexture.needsUpdate = !0), M(r.depthTexture, 0); var a = i.get(r.depthTexture).__webglTexture, o = _(r); if (r.depthTexture.format === ro) U(r) ? p.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER, e.DEPTH_ATTACHMENT, e.TEXTURE_2D, a, 0, o) : e.framebufferTexture2D(e.FRAMEBUFFER, e.DEPTH_ATTACHMENT, e.TEXTURE_2D, a, 0); else { if (r.depthTexture.format !== ao) throw new Error("Unknown depthTexture format"); U(r) ? p.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER, e.DEPTH_STENCIL_ATTACHMENT, e.TEXTURE_2D, a, 0, o) : e.framebufferTexture2D(e.FRAMEBUFFER, e.DEPTH_STENCIL_ATTACHMENT, e.TEXTURE_2D, a, 0) } }(r.__webglFramebuffer, t) } else if (a) { r.__webglDepthbuffer = []; for (var o = 0; o < 6; o++)n.bindFramebuffer(e.FRAMEBUFFER, r.__webglFramebuffer[o]), r.__webglDepthbuffer[o] = e.createRenderbuffer(), E(r.__webglDepthbuffer[o], t, !1) } else n.bindFramebuffer(e.FRAMEBUFFER, r.__webglFramebuffer), r.__webglDepthbuffer = e.createRenderbuffer(), E(r.__webglDepthbuffer, t, !1); n.bindFramebuffer(e.FRAMEBUFFER, null) } function _(e) { return Math.min(A, e.samples) } function U(e) { var n = i.get(e); return C && e.samples > 0 && !0 === t.has("WEBGL_multisampled_render_to_texture") && !1 !== n.__useRenderToTexture } function D(e, n) { var i = e.colorSpace, r = e.format, a = e.type; return !0 === e.isCompressedTexture || !0 === e.isVideoTexture || e.format === el || i !== Cs && i !== cs && (Hl.getTransfer(i) === As ? !1 === C ? !0 === t.has("EXT_sRGB") && r === to ? (e.format = el, e.minFilter = Ya, e.generateMipmaps = !1) : n = Nl.sRGBToLinear(n) : r === to && a === Ta || console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.") : console.error("THREE.WebGLTextures: Unsupported texture color space:", i)), n } this.allocateTextureUnit = function () { var e = H; return e >= d && console.warn("THREE.WebGLTextures: Trying to use " + e + " texture units while this GPU supports only " + d), H += 1, e }, this.resetTextureUnits = function () { H = 0 }, this.setTexture2D = M, this.setTexture2DArray = function (t, r) { var a = i.get(t); t.version > 0 && a.__version !== t.version ? L(a, t, r) : n.bindTexture(e.TEXTURE_2D_ARRAY, a.__webglTexture, e.TEXTURE0 + r) }, this.setTexture3D = function (t, r) { var a = i.get(t); t.version > 0 && a.__version !== t.version ? L(a, t, r) : n.bindTexture(e.TEXTURE_3D, a.__webglTexture, e.TEXTURE0 + r) }, this.setTextureCube = function (t, r) { var o = i.get(t); t.version > 0 && o.__version !== t.version ? function (t, r, o) { if (6 !== r.image.length) return; var s = K(t, r), l = r.source; n.bindTexture(e.TEXTURE_CUBE_MAP, t.__webglTexture, e.TEXTURE0 + o); var g = i.get(l); if (l.version !== g.__version || !0 === s) { n.activeTexture(e.TEXTURE0 + o); var c = Hl.getPrimaries(Hl.workingColorSpace), u = r.colorSpace === cs ? null : Hl.getPrimaries(r.colorSpace), d = r.colorSpace === cs || c === u ? e.NONE : e.BROWSER_DEFAULT_WEBGL; e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, r.flipY), e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, r.premultiplyAlpha), e.pixelStorei(e.UNPACK_ALIGNMENT, r.unpackAlignment), e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL, d); for (var h = r.isCompressedTexture || r.image[0].isCompressedTexture, A = r.image[0] && r.image[0].isDataTexture, p = [], f = 0; f < 6; f++)p[f] = h || A ? A ? r.image[f].image : r.image[f] : G(r.image[f], !1, !0, I), p[f] = D(r, p[f]); var m, v = p[0], b = B(v) || C, y = a.convert(r.format, r.colorSpace), x = a.convert(r.type), W = S(r.internalFormat, y, x, r.colorSpace), V = C && !0 !== r.isVideoTexture, k = void 0 === g.__version || !0 === s, H = R(r, v, b); if (Y(e.TEXTURE_CUBE_MAP, r, b), h) { V && k && n.texStorage2D(e.TEXTURE_CUBE_MAP, H, W, v.width, v.height); for (var M = 0; M < 6; M++) { m = p[M].mipmaps; for (var F = 0; F < m.length; F++) { var N = m[F]; r.format !== to ? null !== y ? V ? n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + M, F, 0, 0, N.width, N.height, y, N.data) : n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + M, F, W, N.width, N.height, 0, N.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()") : V ? n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + M, F, 0, 0, N.width, N.height, y, x, N.data) : n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + M, F, W, N.width, N.height, 0, y, x, N.data) } } } else { m = r.mipmaps, V && k && (m.length > 0 && H++, n.texStorage2D(e.TEXTURE_CUBE_MAP, H, W, p[0].width, p[0].height)); for (var X = 0; X < 6; X++)if (A) { V ? n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + X, 0, 0, 0, p[X].width, p[X].height, y, x, p[X].data) : n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + X, 0, W, p[X].width, p[X].height, 0, y, x, p[X].data); for (var L = 0; L < m.length; L++) { var z = m[L].image[X].image; V ? n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + X, L + 1, 0, 0, z.width, z.height, y, x, z.data) : n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + X, L + 1, W, z.width, z.height, 0, y, x, z.data) } } else { V ? n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + X, 0, 0, 0, y, x, p[X]) : n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + X, 0, W, y, x, p[X]); for (var E = 0; E < m.length; E++) { var T = m[E]; V ? n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + X, E + 1, 0, 0, y, x, T.image[X]) : n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + X, E + 1, W, y, x, T.image[X]) } } } Z(r, b) && w(e.TEXTURE_CUBE_MAP), g.__version = l.version, r.onUpdate && r.onUpdate(r) } t.__version = r.version }(o, t, r) : n.bindTexture(e.TEXTURE_CUBE_MAP, o.__webglTexture, e.TEXTURE0 + r) }, this.rebindTextures = function (t, n, r) { var a = i.get(t); void 0 !== n && z(a.__webglFramebuffer, t, t.texture, e.COLOR_ATTACHMENT0, e.TEXTURE_2D, 0), void 0 !== r && T(t) }, this.setupRenderTarget = function (t) { var s = t.texture, l = i.get(t), g = i.get(s); t.addEventListener("dispose", V), !0 !== t.isWebGLMultipleRenderTargets && (void 0 === g.__webglTexture && (g.__webglTexture = e.createTexture()), g.__version = s.version, o.memory.textures++); var c = !0 === t.isWebGLCubeRenderTarget, u = !0 === t.isWebGLMultipleRenderTargets, d = B(t) || C; if (c) { l.__webglFramebuffer = []; for (var I = 0; I < 6; I++)if (C && s.mipmaps && s.mipmaps.length > 0) { l.__webglFramebuffer[I] = []; for (var h = 0; h < s.mipmaps.length; h++)l.__webglFramebuffer[I][h] = e.createFramebuffer() } else l.__webglFramebuffer[I] = e.createFramebuffer() } else { if (C && s.mipmaps && s.mipmaps.length > 0) { l.__webglFramebuffer = []; for (var A = 0; A < s.mipmaps.length; A++)l.__webglFramebuffer[A] = e.createFramebuffer() } else l.__webglFramebuffer = e.createFramebuffer(); if (u) if (r.drawBuffers) for (var p = t.texture, f = 0, m = p.length; f < m; f++) { var v = i.get(p[f]); void 0 === v.__webglTexture && (v.__webglTexture = e.createTexture(), o.memory.textures++) } else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension."); if (C && t.samples > 0 && !1 === U(t)) { var b = u ? s : [s]; l.__webglMultisampledFramebuffer = e.createFramebuffer(), l.__webglColorRenderbuffer = [], n.bindFramebuffer(e.FRAMEBUFFER, l.__webglMultisampledFramebuffer); for (var y = 0; y < b.length; y++) { var G = b[y]; l.__webglColorRenderbuffer[y] = e.createRenderbuffer(), e.bindRenderbuffer(e.RENDERBUFFER, l.__webglColorRenderbuffer[y]); var R = a.convert(G.format, G.colorSpace), x = a.convert(G.type), W = S(G.internalFormat, R, x, G.colorSpace, !0 === t.isXRRenderTarget), k = _(t); e.renderbufferStorageMultisample(e.RENDERBUFFER, k, W, t.width, t.height), e.framebufferRenderbuffer(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0 + y, e.RENDERBUFFER, l.__webglColorRenderbuffer[y]) } e.bindRenderbuffer(e.RENDERBUFFER, null), t.depthBuffer && (l.__webglDepthRenderbuffer = e.createRenderbuffer(), E(l.__webglDepthRenderbuffer, t, !0)), n.bindFramebuffer(e.FRAMEBUFFER, null) } } if (c) { n.bindTexture(e.TEXTURE_CUBE_MAP, g.__webglTexture), Y(e.TEXTURE_CUBE_MAP, s, d); for (var H = 0; H < 6; H++)if (C && s.mipmaps && s.mipmaps.length > 0) for (var M = 0; M < s.mipmaps.length; M++)z(l.__webglFramebuffer[H][M], t, s, e.COLOR_ATTACHMENT0, e.TEXTURE_CUBE_MAP_POSITIVE_X + H, M); else z(l.__webglFramebuffer[H], t, s, e.COLOR_ATTACHMENT0, e.TEXTURE_CUBE_MAP_POSITIVE_X + H, 0); Z(s, d) && w(e.TEXTURE_CUBE_MAP), n.unbindTexture() } else if (u) { for (var F = t.texture, N = 0, X = F.length; N < X; N++) { var K = F[N], L = i.get(K); n.bindTexture(e.TEXTURE_2D, L.__webglTexture), Y(e.TEXTURE_2D, K, d), z(l.__webglFramebuffer, t, K, e.COLOR_ATTACHMENT0 + N, e.TEXTURE_2D, 0), Z(K, d) && w(e.TEXTURE_2D) } n.unbindTexture() } else { var D = e.TEXTURE_2D; if ((t.isWebGL3DRenderTarget || t.isWebGLArrayRenderTarget) && (C ? D = t.isWebGL3DRenderTarget ? e.TEXTURE_3D : e.TEXTURE_2D_ARRAY : console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")), n.bindTexture(D, g.__webglTexture), Y(D, s, d), C && s.mipmaps && s.mipmaps.length > 0) for (var P = 0; P < s.mipmaps.length; P++)z(l.__webglFramebuffer[P], t, s, e.COLOR_ATTACHMENT0, D, P); else z(l.__webglFramebuffer, t, s, e.COLOR_ATTACHMENT0, D, 0); Z(s, d) && w(D), n.unbindTexture() } t.depthBuffer && T(t) }, this.updateRenderTargetMipmap = function (t) { for (var r = B(t) || C, a = !0 === t.isWebGLMultipleRenderTargets ? t.texture : [t.texture], o = 0, s = a.length; o < s; o++) { var l = a[o]; if (Z(l, r)) { var g = t.isWebGLCubeRenderTarget ? e.TEXTURE_CUBE_MAP : e.TEXTURE_2D, c = i.get(l).__webglTexture; n.bindTexture(g, c), w(g), n.unbindTexture() } } }, this.updateMultisampleRenderTarget = function (t) { if (C && t.samples > 0 && !1 === U(t)) { var r = t.isWebGLMultipleRenderTargets ? t.texture : [t.texture], a = t.width, o = t.height, s = e.COLOR_BUFFER_BIT, l = [], g = t.stencilBuffer ? e.DEPTH_STENCIL_ATTACHMENT : e.DEPTH_ATTACHMENT, c = i.get(t), u = !0 === t.isWebGLMultipleRenderTargets; if (u) for (var d = 0; d < r.length; d++)n.bindFramebuffer(e.FRAMEBUFFER, c.__webglMultisampledFramebuffer), e.framebufferRenderbuffer(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0 + d, e.RENDERBUFFER, null), n.bindFramebuffer(e.FRAMEBUFFER, c.__webglFramebuffer), e.framebufferTexture2D(e.DRAW_FRAMEBUFFER, e.COLOR_ATTACHMENT0 + d, e.TEXTURE_2D, null, 0); n.bindFramebuffer(e.READ_FRAMEBUFFER, c.__webglMultisampledFramebuffer), n.bindFramebuffer(e.DRAW_FRAMEBUFFER, c.__webglFramebuffer); for (var I = 0; I < r.length; I++) { l.push(e.COLOR_ATTACHMENT0 + I), t.depthBuffer && l.push(g); var h = void 0 !== c.__ignoreDepthValues && c.__ignoreDepthValues; if (!1 === h && (t.depthBuffer && (s |= e.DEPTH_BUFFER_BIT), t.stencilBuffer && (s |= e.STENCIL_BUFFER_BIT)), u && e.framebufferRenderbuffer(e.READ_FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.RENDERBUFFER, c.__webglColorRenderbuffer[I]), !0 === h && (e.invalidateFramebuffer(e.READ_FRAMEBUFFER, [g]), e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER, [g])), u) { var A = i.get(r[I]).__webglTexture; e.framebufferTexture2D(e.DRAW_FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.TEXTURE_2D, A, 0) } e.blitFramebuffer(0, 0, a, o, 0, 0, a, o, s, e.NEAREST), f && e.invalidateFramebuffer(e.READ_FRAMEBUFFER, l) } if (n.bindFramebuffer(e.READ_FRAMEBUFFER, null), n.bindFramebuffer(e.DRAW_FRAMEBUFFER, null), u) for (var p = 0; p < r.length; p++) { n.bindFramebuffer(e.FRAMEBUFFER, c.__webglMultisampledFramebuffer), e.framebufferRenderbuffer(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0 + p, e.RENDERBUFFER, c.__webglColorRenderbuffer[p]); var m = i.get(r[p]).__webglTexture; n.bindFramebuffer(e.FRAMEBUFFER, c.__webglFramebuffer), e.framebufferTexture2D(e.DRAW_FRAMEBUFFER, e.COLOR_ATTACHMENT0 + p, e.TEXTURE_2D, m, 0) } n.bindFramebuffer(e.DRAW_FRAMEBUFFER, c.__webglMultisampledFramebuffer) } }, this.setupDepthRenderbuffer = T, this.setupFrameBufferTexture = z, this.useMultisampledRTT = U } function $d(e, t, n) { var i = n.isWebGL2; return { convert: function (n) { var r, a = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : cs, o = Hl.getTransfer(a); if (n === Ta) return e.UNSIGNED_BYTE; if (n === Qa) return e.UNSIGNED_SHORT_4_4_4_4; if (n === qa) return e.UNSIGNED_SHORT_5_5_5_1; if (n === _a) return e.BYTE; if (n === Ua) return e.SHORT; if (n === Da) return e.UNSIGNED_SHORT; if (n === Pa) return e.INT; if (n === Ja) return e.UNSIGNED_INT; if (n === Oa) return e.FLOAT; if (n === ja) return i ? e.HALF_FLOAT : null !== (r = t.get("OES_texture_half_float")) ? r.HALF_FLOAT_OES : null; if (n === eo) return e.ALPHA; if (n === to) return e.RGBA; if (n === no) return e.LUMINANCE; if (n === io) return e.LUMINANCE_ALPHA; if (n === ro) return e.DEPTH_COMPONENT; if (n === ao) return e.DEPTH_STENCIL; if (n === el) return null !== (r = t.get("EXT_sRGB")) ? r.SRGB_ALPHA_EXT : null; if (n === oo) return e.RED; if (n === so) return e.RED_INTEGER; if (n === lo) return e.RG; if (n === go) return e.RG_INTEGER; if (n === co) return e.RGBA_INTEGER; if (n === uo || n === Co || n === Io || n === ho) if (o === As) { if (null === (r = t.get("WEBGL_compressed_texture_s3tc_srgb"))) return null; if (n === uo) return r.COMPRESSED_SRGB_S3TC_DXT1_EXT; if (n === Co) return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT; if (n === Io) return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT; if (n === ho) return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT } else { if (null === (r = t.get("WEBGL_compressed_texture_s3tc"))) return null; if (n === uo) return r.COMPRESSED_RGB_S3TC_DXT1_EXT; if (n === Co) return r.COMPRESSED_RGBA_S3TC_DXT1_EXT; if (n === Io) return r.COMPRESSED_RGBA_S3TC_DXT3_EXT; if (n === ho) return r.COMPRESSED_RGBA_S3TC_DXT5_EXT } if (n === Ao || n === po || n === fo || n === mo) { if (null === (r = t.get("WEBGL_compressed_texture_pvrtc"))) return null; if (n === Ao) return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG; if (n === po) return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG; if (n === fo) return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG; if (n === mo) return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG } if (n === vo) return null !== (r = t.get("WEBGL_compressed_texture_etc1")) ? r.COMPRESSED_RGB_ETC1_WEBGL : null; if (n === bo || n === yo) { if (null === (r = t.get("WEBGL_compressed_texture_etc"))) return null; if (n === bo) return o === As ? r.COMPRESSED_SRGB8_ETC2 : r.COMPRESSED_RGB8_ETC2; if (n === yo) return o === As ? r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC : r.COMPRESSED_RGBA8_ETC2_EAC } if (n === Go || n === Bo || n === Zo || n === wo || n === So || n === Ro || n === xo || n === Wo || n === Vo || n === ko || n === Ho || n === Mo || n === Fo || n === No) { if (null === (r = t.get("WEBGL_compressed_texture_astc"))) return null; if (n === Go) return o === As ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR : r.COMPRESSED_RGBA_ASTC_4x4_KHR; if (n === Bo) return o === As ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR : r.COMPRESSED_RGBA_ASTC_5x4_KHR; if (n === Zo) return o === As ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR : r.COMPRESSED_RGBA_ASTC_5x5_KHR; if (n === wo) return o === As ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR : r.COMPRESSED_RGBA_ASTC_6x5_KHR; if (n === So) return o === As ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR : r.COMPRESSED_RGBA_ASTC_6x6_KHR; if (n === Ro) return o === As ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR : r.COMPRESSED_RGBA_ASTC_8x5_KHR; if (n === xo) return o === As ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR : r.COMPRESSED_RGBA_ASTC_8x6_KHR; if (n === Wo) return o === As ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR : r.COMPRESSED_RGBA_ASTC_8x8_KHR; if (n === Vo) return o === As ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR : r.COMPRESSED_RGBA_ASTC_10x5_KHR; if (n === ko) return o === As ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR : r.COMPRESSED_RGBA_ASTC_10x6_KHR; if (n === Ho) return o === As ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR : r.COMPRESSED_RGBA_ASTC_10x8_KHR; if (n === Mo) return o === As ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR : r.COMPRESSED_RGBA_ASTC_10x10_KHR; if (n === Fo) return o === As ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR : r.COMPRESSED_RGBA_ASTC_12x10_KHR; if (n === No) return o === As ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR : r.COMPRESSED_RGBA_ASTC_12x12_KHR } if (n === Xo || n === Yo || n === Ko) { if (null === (r = t.get("EXT_texture_compression_bptc"))) return null; if (n === Xo) return o === As ? r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT : r.COMPRESSED_RGBA_BPTC_UNORM_EXT; if (n === Yo) return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT; if (n === Ko) return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT } if (n === Lo || n === zo || n === Eo || n === To) { if (null === (r = t.get("EXT_texture_compression_rgtc"))) return null; if (n === Xo) return r.COMPRESSED_RED_RGTC1_EXT; if (n === zo) return r.COMPRESSED_SIGNED_RED_RGTC1_EXT; if (n === Eo) return r.COMPRESSED_RED_GREEN_RGTC2_EXT; if (n === To) return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT } return n === $a ? i ? e.UNSIGNED_INT_24_8 : null !== (r = t.get("WEBGL_depth_texture")) ? r.UNSIGNED_INT_24_8_WEBGL : null : void 0 !== e[n] ? e[n] : null } } } var eI = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : []; return cr(this, n), (e = t.call(this)).isArrayCamera = !0, e.cameras = i, e } return dr(n) }(fu), tI = function (e) { Ir(n, e); var t = fr(n); function n() { var e; return cr(this, n), (e = t.call(this)).isGroup = !0, e.type = "Group", e } return dr(n) }(qg), nI = { type: "move" }, iI = function () { function e() { cr(this, e), this._targetRay = null, this._grip = null, this._hand = null } return dr(e, [{ key: "getHandSpace", value: function () { return null === this._hand && (this._hand = new tI, this._hand.matrixAutoUpdate = !1, this._hand.visible = !1, this._hand.joints = {}, this._hand.inputState = { pinching: !1 }), this._hand } }, { key: "getTargetRaySpace", value: function () { return null === this._targetRay && (this._targetRay = new tI, this._targetRay.matrixAutoUpdate = !1, this._targetRay.visible = !1, this._targetRay.hasLinearVelocity = !1, this._targetRay.linearVelocity = new Ql, this._targetRay.hasAngularVelocity = !1, this._targetRay.angularVelocity = new Ql), this._targetRay } }, { key: "getGripSpace", value: function () { return null === this._grip && (this._grip = new tI, this._grip.matrixAutoUpdate = !1, this._grip.visible = !1, this._grip.hasLinearVelocity = !1, this._grip.linearVelocity = new Ql, this._grip.hasAngularVelocity = !1, this._grip.angularVelocity = new Ql), this._grip } }, { key: "dispatchEvent", value: function (e) { return null !== this._targetRay && this._targetRay.dispatchEvent(e), null !== this._grip && this._grip.dispatchEvent(e), null !== this._hand && this._hand.dispatchEvent(e), this } }, { key: "connect", value: function (e) { if (e && e.hand) { var t = this._hand; if (t) { var n, i = gr(e.hand.values()); try { for (i.s(); !(n = i.n()).done;) { var r = n.value; this._getHandJoint(t, r) } } catch (a) { i.e(a) } finally { i.f() } } } return this.dispatchEvent({ type: "connected", data: e }), this } }, { key: "disconnect", value: function (e) { return this.dispatchEvent({ type: "disconnected", data: e }), null !== this._targetRay && (this._targetRay.visible = !1), null !== this._grip && (this._grip.visible = !1), null !== this._hand && (this._hand.visible = !1), this } }, { key: "update", value: function (e, t, n) { var i = null, r = null, a = null, o = this._targetRay, s = this._grip, l = this._hand; if (e && "visible-blurred" !== t.session.visibilityState) { if (l && e.hand) { a = !0; var g, c = gr(e.hand.values()); try { for (c.s(); !(g = c.n()).done;) { var u = g.value, C = t.getJointPose(u, n), d = this._getHandJoint(l, u); null !== C && (d.matrix.fromArray(C.transform.matrix), d.matrix.decompose(d.position, d.rotation, d.scale), d.matrixWorldNeedsUpdate = !0, d.jointRadius = C.radius), d.visible = null !== C } } catch (p) { c.e(p) } finally { c.f() } var I = l.joints["index-finger-tip"], h = l.joints["thumb-tip"], A = I.position.distanceTo(h.position); l.inputState.pinching && A > .025 ? (l.inputState.pinching = !1, this.dispatchEvent({ type: "pinchend", handedness: e.handedness, target: this })) : !l.inputState.pinching && A <= .015 && (l.inputState.pinching = !0, this.dispatchEvent({ type: "pinchstart", handedness: e.handedness, target: this })) } else null !== s && e.gripSpace && null !== (r = t.getPose(e.gripSpace, n)) && (s.matrix.fromArray(r.transform.matrix), s.matrix.decompose(s.position, s.rotation, s.scale), s.matrixWorldNeedsUpdate = !0, r.linearVelocity ? (s.hasLinearVelocity = !0, s.linearVelocity.copy(r.linearVelocity)) : s.hasLinearVelocity = !1, r.angularVelocity ? (s.hasAngularVelocity = !0, s.angularVelocity.copy(r.angularVelocity)) : s.hasAngularVelocity = !1); null !== o && (null === (i = t.getPose(e.targetRaySpace, n)) && null !== r && (i = r), null !== i && (o.matrix.fromArray(i.transform.matrix), o.matrix.decompose(o.position, o.rotation, o.scale), o.matrixWorldNeedsUpdate = !0, i.linearVelocity ? (o.hasLinearVelocity = !0, o.linearVelocity.copy(i.linearVelocity)) : o.hasLinearVelocity = !1, i.angularVelocity ? (o.hasAngularVelocity = !0, o.angularVelocity.copy(i.angularVelocity)) : o.hasAngularVelocity = !1, this.dispatchEvent(nI))) } return null !== o && (o.visible = null !== i), null !== s && (s.visible = null !== r), null !== l && (l.visible = null !== a), this } }, { key: "_getHandJoint", value: function (e, t) { if (void 0 === e.joints[t.jointName]) { var n = new tI; n.matrixAutoUpdate = !1, n.visible = !1, e.joints[t.jointName] = n, e.add(n) } return e.joints[t.jointName] } }]), e }(), rI = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r, a, o, s, l, g, c, u) { var C; if (cr(this, n), (u = void 0 !== u ? u : ro) !== ro && u !== ao) throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat"); return void 0 === r && u === ro && (r = Ja), void 0 === r && u === ao && (r = $a), (C = t.call(this, null, a, o, s, l, g, u, r, c)).isDepthTexture = !0, C.image = { width: e, height: i }, C.magFilter = void 0 !== l ? l : Ha, C.minFilter = void 0 !== g ? g : Ha, C.flipY = !1, C.generateMipmaps = !1, C.compareFunction = null, C } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.compareFunction = e.compareFunction, this } }, { key: "toJSON", value: function (e) { var t = yr(hr(n.prototype), "toJSON", this).call(this, e); return null !== this.compareFunction && (t.compareFunction = this.compareFunction), t } }]), n }(zl), aI = function (e) { Ir(n, e); var t = fr(n); function n(e, i) { var r; cr(this, n); var a = y(r = t.call(this)), o = null, s = 1, l = null, g = "local-floor", c = 1, u = null, C = null, d = null, I = null, h = null, A = null, p = i.getContextAttributes(), f = null, m = null, v = [], b = [], G = new fu; G.layers.enable(1), G.viewport = new El; var B = new fu; B.layers.enable(2), B.viewport = new El; var Z = [G, B], w = new eI; w.layers.enable(1), w.layers.enable(2); var S = null, R = null; function x(e) { var t = b.indexOf(e.inputSource); if (-1 !== t) { var n = v[t]; void 0 !== n && (n.update(e.inputSource, e.frame, u || l), n.dispatchEvent({ type: e.type, data: e.inputSource })) } } function W() { o.removeEventListener("select", x), o.removeEventListener("selectstart", x), o.removeEventListener("selectend", x), o.removeEventListener("squeeze", x), o.removeEventListener("squeezestart", x), o.removeEventListener("squeezeend", x), o.removeEventListener("end", W), o.removeEventListener("inputsourceschange", V); for (var t = 0; t < v.length; t++) { var n = b[t]; null !== n && (b[t] = null, v[t].disconnect(n)) } S = null, R = null, e.setRenderTarget(f), h = null, I = null, d = null, o = null, m = null, N.stop(), a.isPresenting = !1, a.dispatchEvent({ type: "sessionend" }) } function V(e) { for (var t = 0; t < e.removed.length; t++) { var n = e.removed[t], i = b.indexOf(n); i >= 0 && (b[i] = null, v[i].disconnect(n)) } for (var r = 0; r < e.added.length; r++) { var a = e.added[r], o = b.indexOf(a); if (-1 === o) { for (var s = 0; s < v.length; s++) { if (s >= b.length) { b.push(a), o = s; break } if (null === b[s]) { b[s] = a, o = s; break } } if (-1 === o) break } var l = v[o]; l && l.connect(a) } } r.cameraAutoUpdate = !0, r.enabled = !1, r.isPresenting = !1, r.getController = function (e) { var t = v[e]; return void 0 === t && (t = new iI, v[e] = t), t.getTargetRaySpace() }, r.getControllerGrip = function (e) { var t = v[e]; return void 0 === t && (t = new iI, v[e] = t), t.getGripSpace() }, r.getHand = function (e) { var t = v[e]; return void 0 === t && (t = new iI, v[e] = t), t.getHandSpace() }, r.setFramebufferScaleFactor = function (e) { s = e, !0 === a.isPresenting && console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.") }, r.setReferenceSpaceType = function (e) { g = e, !0 === a.isPresenting && console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.") }, r.getReferenceSpace = function () { return u || l }, r.setReferenceSpace = function (e) { u = e }, r.getBaseLayer = function () { return null !== I ? I : h }, r.getBinding = function () { return d }, r.getFrame = function () { return A }, r.getSession = function () { return o }, r.setSession = function () { var t = br(Gr().mark((function t(n) { var r, C, A, v, b; return Gr().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (null === (o = n)) { t.next = 25; break } if (f = e.getRenderTarget(), o.addEventListener("select", x), o.addEventListener("selectstart", x), o.addEventListener("selectend", x), o.addEventListener("squeeze", x), o.addEventListener("squeezestart", x), o.addEventListener("squeezeend", x), o.addEventListener("end", W), o.addEventListener("inputsourceschange", V), !0 === p.xrCompatible) { t.next = 14; break } return t.next = 14, i.makeXRCompatible(); case 14: return void 0 === o.renderState.layers || !1 === e.capabilities.isWebGL2 ? (r = { antialias: void 0 !== o.renderState.layers || p.antialias, alpha: !0, depth: p.depth, stencil: p.stencil, framebufferScaleFactor: s }, h = new XRWebGLLayer(o, i, r), o.updateRenderState({ baseLayer: h }), m = new _l(h.framebufferWidth, h.framebufferHeight, { format: to, type: Ta, colorSpace: e.outputColorSpace, stencilBuffer: p.stencil })) : (C = null, A = null, v = null, p.depth && (v = p.stencil ? i.DEPTH24_STENCIL8 : i.DEPTH_COMPONENT24, C = p.stencil ? ao : ro, A = p.stencil ? $a : Ja), b = { colorFormat: i.RGBA8, depthFormat: v, scaleFactor: s }, d = new XRWebGLBinding(o, i), I = d.createProjectionLayer(b), o.updateRenderState({ layers: [I] }), m = new _l(I.textureWidth, I.textureHeight, { format: to, type: Ta, depthTexture: new rI(I.textureWidth, I.textureHeight, A, void 0, void 0, void 0, void 0, void 0, void 0, C), stencilBuffer: p.stencil, colorSpace: e.outputColorSpace, samples: p.antialias ? 4 : 0 }), e.properties.get(m).__ignoreDepthValues = I.ignoreDepthValues), m.isXRRenderTarget = !0, this.setFoveation(c), u = null, t.next = 20, o.requestReferenceSpace(g); case 20: l = t.sent, N.setContext(o), N.start(), a.isPresenting = !0, a.dispatchEvent({ type: "sessionstart" }); case 25: case "end": return t.stop() } }), t, this) }))); return function (e) { return t.apply(this, arguments) } }(), r.getEnvironmentBlendMode = function () { if (null !== o) return o.environmentBlendMode }; var k = new Ql, H = new Ql; function M(e, t) { null === t ? e.matrixWorld.copy(e.matrix) : e.matrixWorld.multiplyMatrices(t.matrixWorld, e.matrix), e.matrixWorldInverse.copy(e.matrixWorld).invert() } r.updateCamera = function (e) { if (null !== o) { w.near = B.near = G.near = e.near, w.far = B.far = G.far = e.far, S === w.near && R === w.far || (o.updateRenderState({ depthNear: w.near, depthFar: w.far }), S = w.near, R = w.far); var t = e.parent, n = w.cameras; M(w, t); for (var i = 0; i < n.length; i++)M(n[i], t); 2 === n.length ? function (e, t, n) { k.setFromMatrixPosition(t.matrixWorld), H.setFromMatrixPosition(n.matrixWorld); var i = k.distanceTo(H), r = t.projectionMatrix.elements, a = n.projectionMatrix.elements, o = r[14] / (r[10] - 1), s = r[14] / (r[10] + 1), l = (r[9] + 1) / r[5], g = (r[9] - 1) / r[5], c = (r[8] - 1) / r[0], u = (a[8] + 1) / a[0], C = o * c, d = o * u, I = i / (-c + u), h = I * -c; t.matrixWorld.decompose(e.position, e.quaternion, e.scale), e.translateX(h), e.translateZ(I), e.matrixWorld.compose(e.position, e.quaternion, e.scale), e.matrixWorldInverse.copy(e.matrixWorld).invert(); var A = o + I, p = s + I, f = C - h, m = d + (i - h), v = l * s / p * A, b = g * s / p * A; e.projectionMatrix.makePerspective(f, m, v, b, A, p), e.projectionMatrixInverse.copy(e.projectionMatrix).invert() }(w, G, B) : w.projectionMatrix.copy(G.projectionMatrix), function (e, t, n) { null === n ? e.matrix.copy(t.matrixWorld) : (e.matrix.copy(n.matrixWorld), e.matrix.invert(), e.matrix.multiply(t.matrixWorld)); e.matrix.decompose(e.position, e.quaternion, e.scale), e.updateMatrixWorld(!0), e.projectionMatrix.copy(t.projectionMatrix), e.projectionMatrixInverse.copy(t.projectionMatrixInverse), e.isPerspectiveCamera && (e.fov = 2 * sl * Math.atan(1 / e.projectionMatrix.elements[5]), e.zoom = 1) }(e, w, t) } }, r.getCamera = function () { return w }, r.getFoveation = function () { if (null !== I || null !== h) return c }, r.setFoveation = function (e) { c = e, null !== I && (I.fixedFoveation = e), null !== h && void 0 !== h.fixedFoveation && (h.fixedFoveation = e) }; var F = null; var N = new Wu; return N.setAnimationLoop((function (t, n) { if (C = n.getViewerPose(u || l), A = n, null !== C) { var i = C.views; null !== h && (e.setRenderTargetFramebuffer(m, h.framebuffer), e.setRenderTarget(m)); var r = !1; i.length !== w.cameras.length && (w.cameras.length = 0, r = !0); for (var o = 0; o < i.length; o++) { var s = i[o], g = null; if (null !== h) g = h.getViewport(s); else { var c = d.getViewSubImage(I, s); g = c.viewport, 0 === o && (e.setRenderTargetTextures(m, c.colorTexture, I.ignoreDepthValues ? void 0 : c.depthStencilTexture), e.setRenderTarget(m)) } var p = Z[o]; void 0 === p && ((p = new fu).layers.enable(o), p.viewport = new El, Z[o] = p), p.matrix.fromArray(s.transform.matrix), p.matrix.decompose(p.position, p.quaternion, p.scale), p.projectionMatrix.fromArray(s.projectionMatrix), p.projectionMatrixInverse.copy(p.projectionMatrix).invert(), p.viewport.set(g.x, g.y, g.width, g.height), 0 === o && (w.matrix.copy(p.matrix), w.matrix.decompose(w.position, w.quaternion, w.scale)), !0 === r && w.cameras.push(p) } } for (var f = 0; f < v.length; f++) { var y = b[f], G = v[f]; null !== y && void 0 !== G && G.update(y, n, u || l) } F && F(t, n), n.detectedPlanes && a.dispatchEvent({ type: "planesdetected", data: n }), A = null })), r.setAnimationLoop = function (e) { F = e }, r.dispose = function () { }, r } return dr(n) }(il); function oI(e, t) { function n(e, t) { !0 === e.matrixAutoUpdate && e.updateMatrix(), t.value.copy(e.matrix) } function i(i, r) { i.opacity.value = r.opacity, r.color && i.diffuse.value.copy(r.color), r.emissive && i.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity), r.map && (i.map.value = r.map, n(r.map, i.mapTransform)), r.alphaMap && (i.alphaMap.value = r.alphaMap, n(r.alphaMap, i.alphaMapTransform)), r.bumpMap && (i.bumpMap.value = r.bumpMap, n(r.bumpMap, i.bumpMapTransform), i.bumpScale.value = r.bumpScale, r.side === Nr && (i.bumpScale.value *= -1)), r.normalMap && (i.normalMap.value = r.normalMap, n(r.normalMap, i.normalMapTransform), i.normalScale.value.copy(r.normalScale), r.side === Nr && i.normalScale.value.negate()), r.displacementMap && (i.displacementMap.value = r.displacementMap, n(r.displacementMap, i.displacementMapTransform), i.displacementScale.value = r.displacementScale, i.displacementBias.value = r.displacementBias), r.emissiveMap && (i.emissiveMap.value = r.emissiveMap, n(r.emissiveMap, i.emissiveMapTransform)), r.specularMap && (i.specularMap.value = r.specularMap, n(r.specularMap, i.specularMapTransform)), r.alphaTest > 0 && (i.alphaTest.value = r.alphaTest); var a = t.get(r).envMap; if (a && (i.envMap.value = a, i.flipEnvMap.value = a.isCubeTexture && !1 === a.isRenderTargetTexture ? -1 : 1, i.reflectivity.value = r.reflectivity, i.ior.value = r.ior, i.refractionRatio.value = r.refractionRatio), r.lightMap) { i.lightMap.value = r.lightMap; var o = !0 === e._useLegacyLights ? Math.PI : 1; i.lightMapIntensity.value = r.lightMapIntensity * o, n(r.lightMap, i.lightMapTransform) } r.aoMap && (i.aoMap.value = r.aoMap, i.aoMapIntensity.value = r.aoMapIntensity, n(r.aoMap, i.aoMapTransform)) } return { refreshFogUniforms: function (t, n) { n.color.getRGB(t.fogColor.value, Iu(e)), n.isFog ? (t.fogNear.value = n.near, t.fogFar.value = n.far) : n.isFogExp2 && (t.fogDensity.value = n.density) }, refreshMaterialUniforms: function (e, r, a, o, s) { r.isMeshBasicMaterial || r.isMeshLambertMaterial ? i(e, r) : r.isMeshToonMaterial ? (i(e, r), function (e, t) { t.gradientMap && (e.gradientMap.value = t.gradientMap) }(e, r)) : r.isMeshPhongMaterial ? (i(e, r), function (e, t) { e.specular.value.copy(t.specular), e.shininess.value = Math.max(t.shininess, 1e-4) }(e, r)) : r.isMeshStandardMaterial ? (i(e, r), function (e, i) { e.metalness.value = i.metalness, i.metalnessMap && (e.metalnessMap.value = i.metalnessMap, n(i.metalnessMap, e.metalnessMapTransform)); e.roughness.value = i.roughness, i.roughnessMap && (e.roughnessMap.value = i.roughnessMap, n(i.roughnessMap, e.roughnessMapTransform)); var r = t.get(i).envMap; r && (e.envMapIntensity.value = i.envMapIntensity) }(e, r), r.isMeshPhysicalMaterial && function (e, t, i) { e.ior.value = t.ior, t.sheen > 0 && (e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen), e.sheenRoughness.value = t.sheenRoughness, t.sheenColorMap && (e.sheenColorMap.value = t.sheenColorMap, n(t.sheenColorMap, e.sheenColorMapTransform)), t.sheenRoughnessMap && (e.sheenRoughnessMap.value = t.sheenRoughnessMap, n(t.sheenRoughnessMap, e.sheenRoughnessMapTransform))); t.clearcoat > 0 && (e.clearcoat.value = t.clearcoat, e.clearcoatRoughness.value = t.clearcoatRoughness, t.clearcoatMap && (e.clearcoatMap.value = t.clearcoatMap, n(t.clearcoatMap, e.clearcoatMapTransform)), t.clearcoatRoughnessMap && (e.clearcoatRoughnessMap.value = t.clearcoatRoughnessMap, n(t.clearcoatRoughnessMap, e.clearcoatRoughnessMapTransform)), t.clearcoatNormalMap && (e.clearcoatNormalMap.value = t.clearcoatNormalMap, n(t.clearcoatNormalMap, e.clearcoatNormalMapTransform), e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale), t.side === Nr && e.clearcoatNormalScale.value.negate())); t.iridescence > 0 && (e.iridescence.value = t.iridescence, e.iridescenceIOR.value = t.iridescenceIOR, e.iridescenceThicknessMinimum.value = t.iridescenceThicknessRange[0], e.iridescenceThicknessMaximum.value = t.iridescenceThicknessRange[1], t.iridescenceMap && (e.iridescenceMap.value = t.iridescenceMap, n(t.iridescenceMap, e.iridescenceMapTransform)), t.iridescenceThicknessMap && (e.iridescenceThicknessMap.value = t.iridescenceThicknessMap, n(t.iridescenceThicknessMap, e.iridescenceThicknessMapTransform))); t.transmission > 0 && (e.transmission.value = t.transmission, e.transmissionSamplerMap.value = i.texture, e.transmissionSamplerSize.value.set(i.width, i.height), t.transmissionMap && (e.transmissionMap.value = t.transmissionMap, n(t.transmissionMap, e.transmissionMapTransform)), e.thickness.value = t.thickness, t.thicknessMap && (e.thicknessMap.value = t.thicknessMap, n(t.thicknessMap, e.thicknessMapTransform)), e.attenuationDistance.value = t.attenuationDistance, e.attenuationColor.value.copy(t.attenuationColor)); t.anisotropy > 0 && (e.anisotropyVector.value.set(t.anisotropy * Math.cos(t.anisotropyRotation), t.anisotropy * Math.sin(t.anisotropyRotation)), t.anisotropyMap && (e.anisotropyMap.value = t.anisotropyMap, n(t.anisotropyMap, e.anisotropyMapTransform))); e.specularIntensity.value = t.specularIntensity, e.specularColor.value.copy(t.specularColor), t.specularColorMap && (e.specularColorMap.value = t.specularColorMap, n(t.specularColorMap, e.specularColorMapTransform)); t.specularIntensityMap && (e.specularIntensityMap.value = t.specularIntensityMap, n(t.specularIntensityMap, e.specularIntensityMapTransform)) }(e, r, s)) : r.isMeshMatcapMaterial ? (i(e, r), function (e, t) { t.matcap && (e.matcap.value = t.matcap) }(e, r)) : r.isMeshDepthMaterial ? i(e, r) : r.isMeshDistanceMaterial ? (i(e, r), function (e, n) { var i = t.get(n).light; e.referencePosition.value.setFromMatrixPosition(i.matrixWorld), e.nearDistance.value = i.shadow.camera.near, e.farDistance.value = i.shadow.camera.far }(e, r)) : r.isMeshNormalMaterial ? i(e, r) : r.isLineBasicMaterial ? (function (e, t) { e.diffuse.value.copy(t.color), e.opacity.value = t.opacity, t.map && (e.map.value = t.map, n(t.map, e.mapTransform)) }(e, r), r.isLineDashedMaterial && function (e, t) { e.dashSize.value = t.dashSize, e.totalSize.value = t.dashSize + t.gapSize, e.scale.value = t.scale }(e, r)) : r.isPointsMaterial ? function (e, t, i, r) { e.diffuse.value.copy(t.color), e.opacity.value = t.opacity, e.size.value = t.size * i, e.scale.value = .5 * r, t.map && (e.map.value = t.map, n(t.map, e.uvTransform)); t.alphaMap && (e.alphaMap.value = t.alphaMap, n(t.alphaMap, e.alphaMapTransform)); t.alphaTest > 0 && (e.alphaTest.value = t.alphaTest) }(e, r, a, o) : r.isSpriteMaterial ? function (e, t) { e.diffuse.value.copy(t.color), e.opacity.value = t.opacity, e.rotation.value = t.rotation, t.map && (e.map.value = t.map, n(t.map, e.mapTransform)); t.alphaMap && (e.alphaMap.value = t.alphaMap, n(t.alphaMap, e.alphaMapTransform)); t.alphaTest > 0 && (e.alphaTest.value = t.alphaTest) }(e, r) : r.isShadowMaterial ? (e.color.value.copy(r.color), e.opacity.value = r.opacity) : r.isShaderMaterial && (r.uniformsNeedUpdate = !1) } } } function sI(e, t, n, i) { var r = {}, a = {}, o = [], s = n.isWebGL2 ? e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS) : 0; function l(e, t, n) { var i = e.value; if (void 0 === n[t]) { if ("number" === typeof i) n[t] = i; else { for (var r = Array.isArray(i) ? i : [i], a = [], o = 0; o < r.length; o++)a.push(r[o].clone()); n[t] = a } return !0 } if ("number" === typeof i) { if (n[t] !== i) return n[t] = i, !0 } else for (var s = Array.isArray(n[t]) ? n[t] : [n[t]], l = Array.isArray(i) ? i : [i], g = 0; g < s.length; g++) { var c = s[g]; if (!1 === c.equals(l[g])) return c.copy(l[g]), !0 } return !1 } function g(e) { var t = { boundary: 0, storage: 0 }; return "number" === typeof e ? (t.boundary = 4, t.storage = 4) : e.isVector2 ? (t.boundary = 8, t.storage = 8) : e.isVector3 || e.isColor ? (t.boundary = 16, t.storage = 12) : e.isVector4 ? (t.boundary = 16, t.storage = 16) : e.isMatrix3 ? (t.boundary = 48, t.storage = 48) : e.isMatrix4 ? (t.boundary = 64, t.storage = 64) : e.isTexture ? console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.") : console.warn("THREE.WebGLRenderer: Unsupported uniform value type.", e), t } function c(t) { var n = t.target; n.removeEventListener("dispose", c); var i = o.indexOf(n.__bindingPointIndex); o.splice(i, 1), e.deleteBuffer(r[n.id]), delete r[n.id], delete a[n.id] } return { bind: function (e, t) { var n = t.program; i.uniformBlockBinding(e, n) }, update: function (n, u) { var C = r[n.id]; void 0 === C && (!function (e) { for (var t = e.uniforms, n = 0, i = 16, r = 0, a = 0, o = t.length; a < o; a++) { for (var s = t[a], l = { boundary: 0, storage: 0 }, c = Array.isArray(s.value) ? s.value : [s.value], u = 0, C = c.length; u < C; u++) { var d = g(c[u]); l.boundary += d.boundary, l.storage += d.storage } if (s.__data = new Float32Array(l.storage / Float32Array.BYTES_PER_ELEMENT), s.__offset = n, a > 0) 0 !== (r = n % i) && i - r - l.boundary < 0 && (n += i - r, s.__offset = n); n += l.storage } (r = n % i) > 0 && (n += i - r); e.__size = n, e.__cache = {} }(n), C = function (t) { var n = function () { for (var e = 0; e < s; e++)if (-1 === o.indexOf(e)) return o.push(e), e; return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."), 0 }(); t.__bindingPointIndex = n; var i = e.createBuffer(), r = t.__size, a = t.usage; return e.bindBuffer(e.UNIFORM_BUFFER, i), e.bufferData(e.UNIFORM_BUFFER, r, a), e.bindBuffer(e.UNIFORM_BUFFER, null), e.bindBufferBase(e.UNIFORM_BUFFER, n, i), i }(n), r[n.id] = C, n.addEventListener("dispose", c)); var d = u.program; i.updateUBOMapping(n, d); var I = t.render.frame; a[n.id] !== I && (!function (t) { var n = r[t.id], i = t.uniforms, a = t.__cache; e.bindBuffer(e.UNIFORM_BUFFER, n); for (var o = 0, s = i.length; o < s; o++) { var c = i[o]; if (!0 === l(c, o, a)) { for (var u = c.__offset, C = Array.isArray(c.value) ? c.value : [c.value], d = 0, I = 0; I < C.length; I++) { var h = C[I], A = g(h); "number" === typeof h ? (c.__data[0] = h, e.bufferSubData(e.UNIFORM_BUFFER, u + d, c.__data)) : h.isMatrix3 ? (c.__data[0] = h.elements[0], c.__data[1] = h.elements[1], c.__data[2] = h.elements[2], c.__data[3] = h.elements[0], c.__data[4] = h.elements[3], c.__data[5] = h.elements[4], c.__data[6] = h.elements[5], c.__data[7] = h.elements[0], c.__data[8] = h.elements[6], c.__data[9] = h.elements[7], c.__data[10] = h.elements[8], c.__data[11] = h.elements[0]) : (h.toArray(c.__data, d), d += A.storage / Float32Array.BYTES_PER_ELEMENT) } e.bufferSubData(e.UNIFORM_BUFFER, u, c.__data) } } e.bindBuffer(e.UNIFORM_BUFFER, null) }(n), a[n.id] = I) }, dispose: function () { for (var t in r) e.deleteBuffer(r[t]); o = [], r = {}, a = {} } } } var lI = function () { function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; cr(this, e); var n, i = t.canvas, r = void 0 === i ? Zl() : i, a = t.context, o = void 0 === a ? null : a, s = t.depth, l = void 0 === s || s, g = t.stencil, c = void 0 === g || g, u = t.alpha, C = void 0 !== u && u, d = t.antialias, I = void 0 !== d && d, h = t.premultipliedAlpha, A = void 0 === h || h, p = t.preserveDrawingBuffer, f = void 0 !== p && p, m = t.powerPreference, v = void 0 === m ? "default" : m, b = t.failIfMajorPerformanceCaveat, y = void 0 !== b && b; this.isWebGLRenderer = !0, n = null !== o ? o.getContextAttributes().alpha : C; var G = new Uint32Array(4), B = new Int32Array(4), Z = null, w = null, S = [], R = []; this.domElement = r, this.debug = { checkShaderErrors: !0, onShaderError: null }, this.autoClear = !0, this.autoClearColor = !0, this.autoClearDepth = !0, this.autoClearStencil = !0, this.sortObjects = !0, this.clippingPlanes = [], this.localClippingEnabled = !1, this._outputColorSpace = us, this._useLegacyLights = !1, this.toneMapping = fa, this.toneMappingExposure = 1; var x = this, W = !1, V = 0, k = 0, H = null, M = -1, F = null, N = new El, X = new El, Y = null, K = new pc(0), L = 0, z = r.width, E = r.height, T = 1, _ = null, U = null, D = new El(0, 0, z, E), P = new El(0, 0, z, E), J = !1, O = new xu, j = !1, Q = !1, q = null, $ = new Sg, ee = new fl, te = new Ql, ne = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: !0 }; function ie() { return null === H ? T : 1 } var re, ae, oe, se, le, ge, ce, ue, Ce, de, Ie, he, Ae, pe, fe, me, ve, be, ye, Ge, Be, Ze, we, Se, Re = o; function xe(e, t) { for (var n = 0; n < e.length; n++) { var i = e[n], a = r.getContext(i, t); if (null !== a) return a } return null } try { var We = { alpha: !0, depth: l, stencil: c, antialias: I, premultipliedAlpha: A, preserveDrawingBuffer: f, powerPreference: v, failIfMajorPerformanceCaveat: y }; if ("setAttribute" in r && r.setAttribute("data-engine", "three.js r".concat(Br)), r.addEventListener("webglcontextlost", Me, !1), r.addEventListener("webglcontextrestored", Fe, !1), r.addEventListener("webglcontextcreationerror", Ne, !1), null === Re) { var Ve = ["webgl2", "webgl", "experimental-webgl"]; if (!0 === x.isWebGL1Renderer && Ve.shift(), null === (Re = xe(Ve, We))) throw xe(Ve) ? new Error("Error creating WebGL context with your selected attributes.") : new Error("Error creating WebGL context.") } "undefined" !== typeof WebGLRenderingContext && Re instanceof WebGLRenderingContext && console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."), void 0 === Re.getShaderPrecisionFormat && (Re.getShaderPrecisionFormat = function () { return { rangeMin: 1, rangeMax: 1, precision: 1 } }) } catch (Je) { throw console.error("THREE.WebGLRenderer: " + Je.message), Je } function ke() { re = new rC(Re), ae = new Lu(Re, re, t), re.init(ae), Ze = new $d(Re, re, ae), oe = new Qd(Re, re, ae), se = new sC(Re), le = new Xd, ge = new qd(Re, re, oe, le, ae, Ze, se), ce = new Eu(x), ue = new iC(x), Ce = new Vu(Re, ae), we = new Yu(Re, re, Ce, ae), de = new aC(Re, Ce, se, we), Ie = new uC(Re, de, Ce, se), ye = new cC(Re, ae, ge), me = new zu(le), he = new Nd(x, ce, ue, re, ae, we, me), Ae = new oI(x, le), pe = new zd, fe = new Pd(re, ae), be = new Xu(x, ce, ue, oe, Ie, n, A), ve = new jd(x, Ie, ae), Se = new sI(Re, se, ae, oe), Ge = new Ku(Re, re, se, ae), Be = new oC(Re, re, se, ae), se.programs = he.programs, x.capabilities = ae, x.extensions = re, x.properties = le, x.renderLists = pe, x.shadowMap = ve, x.state = oe, x.info = se } ke(); var He = new aI(x, Re); function Me(e) { e.preventDefault(), console.log("THREE.WebGLRenderer: Context Lost."), W = !0 } function Fe() { console.log("THREE.WebGLRenderer: Context Restored."), W = !1; var e = se.autoReset, t = ve.enabled, n = ve.autoUpdate, i = ve.needsUpdate, r = ve.type; ke(), se.autoReset = e, ve.enabled = t, ve.autoUpdate = n, ve.needsUpdate = i, ve.type = r } function Ne(e) { console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ", e.statusMessage) } function Xe(e) { var t = e.target; t.removeEventListener("dispose", Xe), function (e) { (function (e) { var t = le.get(e).programs; void 0 !== t && (t.forEach((function (e) { he.releaseProgram(e) })), e.isShaderMaterial && he.releaseShaderCache(e)) })(e), le.remove(e) }(t) } this.xr = He, this.getContext = function () { return Re }, this.getContextAttributes = function () { return Re.getContextAttributes() }, this.forceContextLoss = function () { var e = re.get("WEBGL_lose_context"); e && e.loseContext() }, this.forceContextRestore = function () { var e = re.get("WEBGL_lose_context"); e && e.restoreContext() }, this.getPixelRatio = function () { return T }, this.setPixelRatio = function (e) { void 0 !== e && (T = e, this.setSize(z, E, !1)) }, this.getSize = function (e) { return e.set(z, E) }, this.setSize = function (e, t) { var n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2]; He.isPresenting ? console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.") : (z = e, E = t, r.width = Math.floor(e * T), r.height = Math.floor(t * T), !0 === n && (r.style.width = e + "px", r.style.height = t + "px"), this.setViewport(0, 0, e, t)) }, this.getDrawingBufferSize = function (e) { return e.set(z * T, E * T).floor() }, this.setDrawingBufferSize = function (e, t, n) { z = e, E = t, T = n, r.width = Math.floor(e * n), r.height = Math.floor(t * n), this.setViewport(0, 0, e, t) }, this.getCurrentViewport = function (e) { return e.copy(N) }, this.getViewport = function (e) { return e.copy(D) }, this.setViewport = function (e, t, n, i) { e.isVector4 ? D.set(e.x, e.y, e.z, e.w) : D.set(e, t, n, i), oe.viewport(N.copy(D).multiplyScalar(T).floor()) }, this.getScissor = function (e) { return e.copy(P) }, this.setScissor = function (e, t, n, i) { e.isVector4 ? P.set(e.x, e.y, e.z, e.w) : P.set(e, t, n, i), oe.scissor(X.copy(P).multiplyScalar(T).floor()) }, this.getScissorTest = function () { return J }, this.setScissorTest = function (e) { oe.setScissorTest(J = e) }, this.setOpaqueSort = function (e) { _ = e }, this.setTransparentSort = function (e) { U = e }, this.getClearColor = function (e) { return e.copy(be.getClearColor()) }, this.setClearColor = function () { be.setClearColor.apply(be, arguments) }, this.getClearAlpha = function () { return be.getClearAlpha() }, this.setClearAlpha = function () { be.setClearAlpha.apply(be, arguments) }, this.clear = function () { var e = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], t = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], n = 0; if (!(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0]) { var i = !1; if (null !== H) { var r = H.texture.format; i = r === co || r === go || r === so } if (i) { var a = H.texture.type, o = a === Ta || a === Ja || a === Da || a === $a || a === Qa || a === qa, s = be.getClearColor(), l = be.getClearAlpha(), g = s.r, c = s.g, u = s.b; o ? (G[0] = g, G[1] = c, G[2] = u, G[3] = l, Re.clearBufferuiv(Re.COLOR, 0, G)) : (B[0] = g, B[1] = c, B[2] = u, B[3] = l, Re.clearBufferiv(Re.COLOR, 0, B)) } else n |= Re.COLOR_BUFFER_BIT } e && (n |= Re.DEPTH_BUFFER_BIT), t && (n |= Re.STENCIL_BUFFER_BIT), Re.clear(n) }, this.clearColor = function () { this.clear(!0, !1, !1) }, this.clearDepth = function () { this.clear(!1, !0, !1) }, this.clearStencil = function () { this.clear(!1, !1, !0) }, this.dispose = function () { r.removeEventListener("webglcontextlost", Me, !1), r.removeEventListener("webglcontextrestored", Fe, !1), r.removeEventListener("webglcontextcreationerror", Ne, !1), pe.dispose(), fe.dispose(), le.dispose(), ce.dispose(), ue.dispose(), Ie.dispose(), we.dispose(), Se.dispose(), he.dispose(), He.dispose(), He.removeEventListener("sessionstart", Ke), He.removeEventListener("sessionend", Le), q && (q.dispose(), q = null), ze.stop() }, this.renderBufferDirect = function (e, t, n, i, r, a) { null === t && (t = ne); var o = r.isMesh && r.matrixWorld.determinant() < 0, s = function (e, t, n, i, r) { !0 !== t.isScene && (t = ne); ge.resetTextureUnits(); var a = t.fog, o = i.isMeshStandardMaterial ? t.environment : null, s = null === H ? x.outputColorSpace : !0 === H.isXRRenderTarget ? H.texture.colorSpace : Cs, l = (i.isMeshStandardMaterial ? ue : ce).get(i.envMap || o), g = !0 === i.vertexColors && !!n.attributes.color && 4 === n.attributes.color.itemSize, c = !!n.attributes.tangent && (!!i.normalMap || i.anisotropy > 0), u = !!n.morphAttributes.position, C = !!n.morphAttributes.normal, d = !!n.morphAttributes.color, I = fa; i.toneMapped && (null !== H && !0 !== H.isXRRenderTarget || (I = x.toneMapping)); var h = n.morphAttributes.position || n.morphAttributes.normal || n.morphAttributes.color, A = void 0 !== h ? h.length : 0, p = le.get(i), f = w.state.lights; if (!0 === j && (!0 === Q || e !== F)) { var m = e === F && i.id === M; me.setState(i, e, m) } var v = !1; i.version === p.__version ? p.needsLights && p.lightsStateVersion !== f.state.version || p.outputColorSpace !== s || r.isInstancedMesh && !1 === p.instancing ? v = !0 : r.isInstancedMesh || !0 !== p.instancing ? r.isSkinnedMesh && !1 === p.skinning ? v = !0 : r.isSkinnedMesh || !0 !== p.skinning ? r.isInstancedMesh && !0 === p.instancingColor && null === r.instanceColor || r.isInstancedMesh && !1 === p.instancingColor && null !== r.instanceColor || p.envMap !== l || !0 === i.fog && p.fog !== a ? v = !0 : void 0 === p.numClippingPlanes || p.numClippingPlanes === me.numPlanes && p.numIntersection === me.numIntersection ? (p.vertexAlphas !== g || p.vertexTangents !== c || p.morphTargets !== u || p.morphNormals !== C || p.morphColors !== d || p.toneMapping !== I || !0 === ae.isWebGL2 && p.morphTargetsCount !== A) && (v = !0) : v = !0 : v = !0 : v = !0 : (v = !0, p.__version = i.version); var b = p.currentProgram; !0 === v && (b = De(i, t, r)); var y = !1, G = !1, B = !1, Z = b.getUniforms(), S = p.uniforms; oe.useProgram(b.program) && (y = !0, G = !0, B = !0); i.id !== M && (M = i.id, G = !0); if (y || F !== e) { Z.setValue(Re, "projectionMatrix", e.projectionMatrix), Z.setValue(Re, "viewMatrix", e.matrixWorldInverse); var R = Z.map.cameraPosition; void 0 !== R && R.setValue(Re, te.setFromMatrixPosition(e.matrixWorld)), ae.logarithmicDepthBuffer && Z.setValue(Re, "logDepthBufFC", 2 / (Math.log(e.far + 1) / Math.LN2)), (i.isMeshPhongMaterial || i.isMeshToonMaterial || i.isMeshLambertMaterial || i.isMeshBasicMaterial || i.isMeshStandardMaterial || i.isShaderMaterial) && Z.setValue(Re, "isOrthographic", !0 === e.isOrthographicCamera), F !== e && (F = e, G = !0, B = !0) } if (r.isSkinnedMesh) { Z.setOptional(Re, r, "bindMatrix"), Z.setOptional(Re, r, "bindMatrixInverse"); var W = r.skeleton; W && (ae.floatVertexTextures ? (null === W.boneTexture && W.computeBoneTexture(), Z.setValue(Re, "boneTexture", W.boneTexture, ge), Z.setValue(Re, "boneTextureSize", W.boneTextureSize)) : console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required.")) } var V = n.morphAttributes; (void 0 !== V.position || void 0 !== V.normal || void 0 !== V.color && !0 === ae.isWebGL2) && ye.update(r, n, b); (G || p.receiveShadow !== r.receiveShadow) && (p.receiveShadow = r.receiveShadow, Z.setValue(Re, "receiveShadow", r.receiveShadow)); i.isMeshGouraudMaterial && null !== i.envMap && (S.envMap.value = l, S.flipEnvMap.value = l.isCubeTexture && !1 === l.isRenderTargetTexture ? -1 : 1); G && (Z.setValue(Re, "toneMappingExposure", x.toneMappingExposure), p.needsLights && (N = B, (k = S).ambientLightColor.needsUpdate = N, k.lightProbe.needsUpdate = N, k.directionalLights.needsUpdate = N, k.directionalLightShadows.needsUpdate = N, k.pointLights.needsUpdate = N, k.pointLightShadows.needsUpdate = N, k.spotLights.needsUpdate = N, k.spotLightShadows.needsUpdate = N, k.rectAreaLights.needsUpdate = N, k.hemisphereLights.needsUpdate = N), a && !0 === i.fog && Ae.refreshFogUniforms(S, a), Ae.refreshMaterialUniforms(S, i, T, E, q), hd.upload(Re, p.uniformsList, S, ge)); var k, N; i.isShaderMaterial && !0 === i.uniformsNeedUpdate && (hd.upload(Re, p.uniformsList, S, ge), i.uniformsNeedUpdate = !1); i.isSpriteMaterial && Z.setValue(Re, "center", r.center); if (Z.setValue(Re, "modelViewMatrix", r.modelViewMatrix), Z.setValue(Re, "normalMatrix", r.normalMatrix), Z.setValue(Re, "modelMatrix", r.matrixWorld), i.isShaderMaterial || i.isRawShaderMaterial) for (var X = i.uniformsGroups, Y = 0, K = X.length; Y < K; Y++)if (ae.isWebGL2) { var L = X[Y]; Se.update(L, b), Se.bind(L, b) } else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2."); return b }(e, t, n, i, r); oe.setMaterial(i, o); var l = n.index, g = 1; if (!0 === i.wireframe) { if (void 0 === (l = de.getWireframeAttribute(n))) return; g = 2 } var c = n.drawRange, u = n.attributes.position, C = c.start * g, d = (c.start + c.count) * g; null !== a && (C = Math.max(C, a.start * g), d = Math.min(d, (a.start + a.count) * g)), null !== l ? (C = Math.max(C, 0), d = Math.min(d, l.count)) : void 0 !== u && null !== u && (C = Math.max(C, 0), d = Math.min(d, u.count)); var I = d - C; if (!(I < 0 || I === 1 / 0)) { var h; we.setup(r, i, s, n, l); var A = Ge; if (null !== l && (h = Ce.get(l), (A = Be).setIndex(h)), r.isMesh) !0 === i.wireframe ? (oe.setLineWidth(i.wireframeLinewidth * ie()), A.setMode(Re.LINES)) : A.setMode(Re.TRIANGLES); else if (r.isLine) { var p = i.linewidth; void 0 === p && (p = 1), oe.setLineWidth(p * ie()), r.isLineSegments ? A.setMode(Re.LINES) : r.isLineLoop ? A.setMode(Re.LINE_LOOP) : A.setMode(Re.LINE_STRIP) } else r.isPoints ? A.setMode(Re.POINTS) : r.isSprite && A.setMode(Re.TRIANGLES); if (r.isInstancedMesh) A.renderInstances(C, I, r.count); else if (n.isInstancedBufferGeometry) { var f = void 0 !== n._maxInstanceCount ? n._maxInstanceCount : 1 / 0, m = Math.min(n.instanceCount, f); A.renderInstances(C, I, m) } else A.render(C, I) } }, this.compile = function (e, t) { function n(e, t, n) { !0 === e.transparent && e.side === Xr && !1 === e.forceSinglePass ? (e.side = Nr, e.needsUpdate = !0, De(e, t, n), e.side = Fr, e.needsUpdate = !0, De(e, t, n), e.side = Xr) : De(e, t, n) } (w = fe.get(e)).init(), R.push(w), e.traverseVisible((function (e) { e.isLight && e.layers.test(t.layers) && (w.pushLight(e), e.castShadow && w.pushShadow(e)) })), w.setupLights(x._useLegacyLights), e.traverse((function (t) { var i = t.material; if (i) if (Array.isArray(i)) for (var r = 0; r < i.length; r++) { n(i[r], e, t) } else n(i, e, t) })), R.pop(), w = null }; var Ye = null; function Ke() { ze.stop() } function Le() { ze.start() } var ze = new Wu; function Ee(e, t, n, i) { if (!1 !== e.visible) { if (e.layers.test(t.layers)) if (e.isGroup) n = e.renderOrder; else if (e.isLOD) !0 === e.autoUpdate && e.update(t); else if (e.isLight) w.pushLight(e), e.castShadow && w.pushShadow(e); else if (e.isSprite) { if (!e.frustumCulled || O.intersectsSprite(e)) { i && te.setFromMatrixPosition(e.matrixWorld).applyMatrix4($); var r = Ie.update(e), a = e.material; a.visible && Z.push(e, r, a, n, te.z, null) } } else if ((e.isMesh || e.isLine || e.isPoints) && (!e.frustumCulled || O.intersectsObject(e))) { var o = Ie.update(e), s = e.material; if (i && (void 0 !== e.boundingSphere ? (null === e.boundingSphere && e.computeBoundingSphere(), te.copy(e.boundingSphere.center)) : (null === o.boundingSphere && o.computeBoundingSphere(), te.copy(o.boundingSphere.center)), te.applyMatrix4(e.matrixWorld).applyMatrix4($)), Array.isArray(s)) for (var l = o.groups, g = 0, c = l.length; g < c; g++) { var u = l[g], C = s[u.materialIndex]; C && C.visible && Z.push(e, o, C, n, te.z, u) } else s.visible && Z.push(e, o, s, n, te.z, null) } for (var d = e.children, I = 0, h = d.length; I < h; I++)Ee(d[I], t, n, i) } } function Te(e, t, n, i) { var r = e.opaque, a = e.transmissive, o = e.transparent; w.setupLightsView(n), !0 === j && me.setGlobalState(x.clippingPlanes, n), a.length > 0 && function (e, t, n, i) { var r = ae.isWebGL2; null === q && (q = new _l(1, 1, { generateMipmaps: !0, type: re.has("EXT_color_buffer_half_float") ? ja : Ta, minFilter: za, samples: r ? 4 : 0 })); x.getDrawingBufferSize(ee), r ? q.setSize(ee.x, ee.y) : q.setSize(Il(ee.x), Il(ee.y)); var a = x.getRenderTarget(); x.setRenderTarget(q), x.getClearColor(K), (L = x.getClearAlpha()) < 1 && x.setClearColor(16777215, .5); x.clear(); var o = x.toneMapping; x.toneMapping = fa, _e(e, n, i), ge.updateMultisampleRenderTarget(q), ge.updateRenderTargetMipmap(q); for (var s = !1, l = 0, g = t.length; l < g; l++) { var c = t[l], u = c.object, C = c.geometry, d = c.material, I = c.group; if (d.side === Xr && u.layers.test(i.layers)) { var h = d.side; d.side = Nr, d.needsUpdate = !0, Ue(u, n, i, C, d, I), d.side = h, d.needsUpdate = !0, s = !0 } } !0 === s && (ge.updateMultisampleRenderTarget(q), ge.updateRenderTargetMipmap(q)); x.setRenderTarget(a), x.setClearColor(K, L), x.toneMapping = o }(r, a, t, n), i && oe.viewport(N.copy(i)), r.length > 0 && _e(r, t, n), a.length > 0 && _e(a, t, n), o.length > 0 && _e(o, t, n), oe.buffers.depth.setTest(!0), oe.buffers.depth.setMask(!0), oe.buffers.color.setMask(!0), oe.setPolygonOffset(!1) } function _e(e, t, n) { for (var i = !0 === t.isScene ? t.overrideMaterial : null, r = 0, a = e.length; r < a; r++) { var o = e[r], s = o.object, l = o.geometry, g = null === i ? o.material : i, c = o.group; s.layers.test(n.layers) && Ue(s, t, n, l, g, c) } } function Ue(e, t, n, i, r, a) { e.onBeforeRender(x, t, n, i, r, a), e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse, e.matrixWorld), e.normalMatrix.getNormalMatrix(e.modelViewMatrix), r.onBeforeRender(x, t, n, i, e, a), !0 === r.transparent && r.side === Xr && !1 === r.forceSinglePass ? (r.side = Nr, r.needsUpdate = !0, x.renderBufferDirect(n, t, i, r, e, a), r.side = Fr, r.needsUpdate = !0, x.renderBufferDirect(n, t, i, r, e, a), r.side = Xr) : x.renderBufferDirect(n, t, i, r, e, a), e.onAfterRender(x, t, n, i, r, a) } function De(e, t, n) { !0 !== t.isScene && (t = ne); var i = le.get(e), r = w.state.lights, a = w.state.shadowsArray, o = r.state.version, s = he.getParameters(e, r.state, a, t, n), l = he.getProgramCacheKey(s), g = i.programs; i.environment = e.isMeshStandardMaterial ? t.environment : null, i.fog = t.fog, i.envMap = (e.isMeshStandardMaterial ? ue : ce).get(e.envMap || i.environment), void 0 === g && (e.addEventListener("dispose", Xe), g = new Map, i.programs = g); var c = g.get(l); if (void 0 !== c) { if (i.currentProgram === c && i.lightsStateVersion === o) return Pe(e, s), c } else s.uniforms = he.getUniforms(e), e.onBuild(n, s, x), e.onBeforeCompile(s, x), c = he.acquireProgram(s, l), g.set(l, c), i.uniforms = s.uniforms; var u = i.uniforms; (e.isShaderMaterial || e.isRawShaderMaterial) && !0 !== e.clipping || (u.clippingPlanes = me.uniform), Pe(e, s), i.needsLights = function (e) { return e.isMeshLambertMaterial || e.isMeshToonMaterial || e.isMeshPhongMaterial || e.isMeshStandardMaterial || e.isShadowMaterial || e.isShaderMaterial && !0 === e.lights }(e), i.lightsStateVersion = o, i.needsLights && (u.ambientLightColor.value = r.state.ambient, u.lightProbe.value = r.state.probe, u.directionalLights.value = r.state.directional, u.directionalLightShadows.value = r.state.directionalShadow, u.spotLights.value = r.state.spot, u.spotLightShadows.value = r.state.spotShadow, u.rectAreaLights.value = r.state.rectArea, u.ltc_1.value = r.state.rectAreaLTC1, u.ltc_2.value = r.state.rectAreaLTC2, u.pointLights.value = r.state.point, u.pointLightShadows.value = r.state.pointShadow, u.hemisphereLights.value = r.state.hemi, u.directionalShadowMap.value = r.state.directionalShadowMap, u.directionalShadowMatrix.value = r.state.directionalShadowMatrix, u.spotShadowMap.value = r.state.spotShadowMap, u.spotLightMatrix.value = r.state.spotLightMatrix, u.spotLightMap.value = r.state.spotLightMap, u.pointShadowMap.value = r.state.pointShadowMap, u.pointShadowMatrix.value = r.state.pointShadowMatrix); var C = c.getUniforms(), d = hd.seqWithValue(C.seq, u); return i.currentProgram = c, i.uniformsList = d, c } function Pe(e, t) { var n = le.get(e); n.outputColorSpace = t.outputColorSpace, n.instancing = t.instancing, n.instancingColor = t.instancingColor, n.skinning = t.skinning, n.morphTargets = t.morphTargets, n.morphNormals = t.morphNormals, n.morphColors = t.morphColors, n.morphTargetsCount = t.morphTargetsCount, n.numClippingPlanes = t.numClippingPlanes, n.numIntersection = t.numClipIntersection, n.vertexAlphas = t.vertexAlphas, n.vertexTangents = t.vertexTangents, n.toneMapping = t.toneMapping } ze.setAnimationLoop((function (e) { Ye && Ye(e) })), "undefined" !== typeof self && ze.setContext(self), this.setAnimationLoop = function (e) { Ye = e, He.setAnimationLoop(e), null === e ? ze.stop() : ze.start() }, He.addEventListener("sessionstart", Ke), He.addEventListener("sessionend", Le), this.render = function (e, t) { if (void 0 === t || !0 === t.isCamera) { if (!0 !== W) { !0 === e.matrixWorldAutoUpdate && e.updateMatrixWorld(), null === t.parent && !0 === t.matrixWorldAutoUpdate && t.updateMatrixWorld(), !0 === He.enabled && !0 === He.isPresenting && (!0 === He.cameraAutoUpdate && He.updateCamera(t), t = He.getCamera()), !0 === e.isScene && e.onBeforeRender(x, e, t, H), (w = fe.get(e, R.length)).init(), R.push(w), $.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse), O.setFromProjectionMatrix($), Q = this.localClippingEnabled, j = me.init(this.clippingPlanes, Q), (Z = pe.get(e, S.length)).init(), S.push(Z), Ee(e, t, 0, x.sortObjects), Z.finish(), !0 === x.sortObjects && Z.sort(_, U), this.info.render.frame++, !0 === j && me.beginShadows(); var n = w.state.shadowsArray; if (ve.render(n, e, t), !0 === j && me.endShadows(), !0 === this.info.autoReset && this.info.reset(), be.render(Z, e), w.setupLights(x._useLegacyLights), t.isArrayCamera) for (var i = t.cameras, r = 0, a = i.length; r < a; r++) { var o = i[r]; Te(Z, e, o, o.viewport) } else Te(Z, e, t); null !== H && (ge.updateMultisampleRenderTarget(H), ge.updateRenderTargetMipmap(H)), !0 === e.isScene && e.onAfterRender(x, e, t), we.resetDefaultState(), M = -1, F = null, R.pop(), w = R.length > 0 ? R[R.length - 1] : null, S.pop(), Z = S.length > 0 ? S[S.length - 1] : null } } else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.") }, this.getActiveCubeFace = function () { return V }, this.getActiveMipmapLevel = function () { return k }, this.getRenderTarget = function () { return H }, this.setRenderTargetTextures = function (e, t, n) { le.get(e.texture).__webglTexture = t, le.get(e.depthTexture).__webglTexture = n; var i = le.get(e); i.__hasExternalTextures = !0, i.__hasExternalTextures && (i.__autoAllocateDepthBuffer = void 0 === n, i.__autoAllocateDepthBuffer || !0 === re.has("WEBGL_multisampled_render_to_texture") && (console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"), i.__useRenderToTexture = !1)) }, this.setRenderTargetFramebuffer = function (e, t) { var n = le.get(e); n.__webglFramebuffer = t, n.__useDefaultFramebuffer = void 0 === t }, this.setRenderTarget = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; H = e, V = t, k = n; var i = !0, r = null, a = !1, o = !1; if (e) { var s = le.get(e); void 0 !== s.__useDefaultFramebuffer ? (oe.bindFramebuffer(Re.FRAMEBUFFER, null), i = !1) : void 0 === s.__webglFramebuffer ? ge.setupRenderTarget(e) : s.__hasExternalTextures && ge.rebindTextures(e, le.get(e.texture).__webglTexture, le.get(e.depthTexture).__webglTexture); var l = e.texture; (l.isData3DTexture || l.isDataArrayTexture || l.isCompressedArrayTexture) && (o = !0); var g = le.get(e).__webglFramebuffer; e.isWebGLCubeRenderTarget ? (r = Array.isArray(g[t]) ? g[t][n] : g[t], a = !0) : r = ae.isWebGL2 && e.samples > 0 && !1 === ge.useMultisampledRTT(e) ? le.get(e).__webglMultisampledFramebuffer : Array.isArray(g) ? g[n] : g, N.copy(e.viewport), X.copy(e.scissor), Y = e.scissorTest } else N.copy(D).multiplyScalar(T).floor(), X.copy(P).multiplyScalar(T).floor(), Y = J; if (oe.bindFramebuffer(Re.FRAMEBUFFER, r) && ae.drawBuffers && i && oe.drawBuffers(e, r), oe.viewport(N), oe.scissor(X), oe.setScissorTest(Y), a) { var c = le.get(e.texture); Re.framebufferTexture2D(Re.FRAMEBUFFER, Re.COLOR_ATTACHMENT0, Re.TEXTURE_CUBE_MAP_POSITIVE_X + t, c.__webglTexture, n) } else if (o) { var u = le.get(e.texture), C = t || 0; Re.framebufferTextureLayer(Re.FRAMEBUFFER, Re.COLOR_ATTACHMENT0, u.__webglTexture, n || 0, C) } M = -1 }, this.readRenderTargetPixels = function (e, t, n, i, r, a, o) { if (e && e.isWebGLRenderTarget) { var s = le.get(e).__webglFramebuffer; if (e.isWebGLCubeRenderTarget && void 0 !== o && (s = s[o]), s) { oe.bindFramebuffer(Re.FRAMEBUFFER, s); try { var l = e.texture, g = l.format, c = l.type; if (g !== to && Ze.convert(g) !== Re.getParameter(Re.IMPLEMENTATION_COLOR_READ_FORMAT)) return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."); var u = c === ja && (re.has("EXT_color_buffer_half_float") || ae.isWebGL2 && re.has("EXT_color_buffer_float")); if (c !== Ta && Ze.convert(c) !== Re.getParameter(Re.IMPLEMENTATION_COLOR_READ_TYPE) && (c !== Oa || !(ae.isWebGL2 || re.has("OES_texture_float") || re.has("WEBGL_color_buffer_float"))) && !u) return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type."); t >= 0 && t <= e.width - i && n >= 0 && n <= e.height - r && Re.readPixels(t, n, i, r, Ze.convert(g), Ze.convert(c), a) } finally { var C = null !== H ? le.get(H).__webglFramebuffer : null; oe.bindFramebuffer(Re.FRAMEBUFFER, C) } } } else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.") }, this.copyFramebufferToTexture = function (e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, i = Math.pow(2, -n), r = Math.floor(t.image.width * i), a = Math.floor(t.image.height * i); ge.setTexture2D(t, 0), Re.copyTexSubImage2D(Re.TEXTURE_2D, n, 0, 0, e.x, e.y, r, a), oe.unbindTexture() }, this.copyTextureToTexture = function (e, t, n) { var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0, r = t.image.width, a = t.image.height, o = Ze.convert(n.format), s = Ze.convert(n.type); ge.setTexture2D(n, 0), Re.pixelStorei(Re.UNPACK_FLIP_Y_WEBGL, n.flipY), Re.pixelStorei(Re.UNPACK_PREMULTIPLY_ALPHA_WEBGL, n.premultiplyAlpha), Re.pixelStorei(Re.UNPACK_ALIGNMENT, n.unpackAlignment), t.isDataTexture ? Re.texSubImage2D(Re.TEXTURE_2D, i, e.x, e.y, r, a, o, s, t.image.data) : t.isCompressedTexture ? Re.compressedTexSubImage2D(Re.TEXTURE_2D, i, e.x, e.y, t.mipmaps[0].width, t.mipmaps[0].height, o, t.mipmaps[0].data) : Re.texSubImage2D(Re.TEXTURE_2D, i, e.x, e.y, o, s, t.image), 0 === i && n.generateMipmaps && Re.generateMipmap(Re.TEXTURE_2D), oe.unbindTexture() }, this.copyTextureToTexture3D = function (e, t, n, i) { var r = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0; if (x.isWebGL1Renderer) console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2."); else { var a, o = e.max.x - e.min.x + 1, s = e.max.y - e.min.y + 1, l = e.max.z - e.min.z + 1, g = Ze.convert(i.format), c = Ze.convert(i.type); if (i.isData3DTexture) ge.setTexture3D(i, 0), a = Re.TEXTURE_3D; else { if (!i.isDataArrayTexture) return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray."); ge.setTexture2DArray(i, 0), a = Re.TEXTURE_2D_ARRAY } Re.pixelStorei(Re.UNPACK_FLIP_Y_WEBGL, i.flipY), Re.pixelStorei(Re.UNPACK_PREMULTIPLY_ALPHA_WEBGL, i.premultiplyAlpha), Re.pixelStorei(Re.UNPACK_ALIGNMENT, i.unpackAlignment); var u = Re.getParameter(Re.UNPACK_ROW_LENGTH), C = Re.getParameter(Re.UNPACK_IMAGE_HEIGHT), d = Re.getParameter(Re.UNPACK_SKIP_PIXELS), I = Re.getParameter(Re.UNPACK_SKIP_ROWS), h = Re.getParameter(Re.UNPACK_SKIP_IMAGES), A = n.isCompressedTexture ? n.mipmaps[0] : n.image; Re.pixelStorei(Re.UNPACK_ROW_LENGTH, A.width), Re.pixelStorei(Re.UNPACK_IMAGE_HEIGHT, A.height), Re.pixelStorei(Re.UNPACK_SKIP_PIXELS, e.min.x), Re.pixelStorei(Re.UNPACK_SKIP_ROWS, e.min.y), Re.pixelStorei(Re.UNPACK_SKIP_IMAGES, e.min.z), n.isDataTexture || n.isData3DTexture ? Re.texSubImage3D(a, r, t.x, t.y, t.z, o, s, l, g, c, A.data) : n.isCompressedArrayTexture ? (console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."), Re.compressedTexSubImage3D(a, r, t.x, t.y, t.z, o, s, l, g, A.data)) : Re.texSubImage3D(a, r, t.x, t.y, t.z, o, s, l, g, c, A), Re.pixelStorei(Re.UNPACK_ROW_LENGTH, u), Re.pixelStorei(Re.UNPACK_IMAGE_HEIGHT, C), Re.pixelStorei(Re.UNPACK_SKIP_PIXELS, d), Re.pixelStorei(Re.UNPACK_SKIP_ROWS, I), Re.pixelStorei(Re.UNPACK_SKIP_IMAGES, h), 0 === r && i.generateMipmaps && Re.generateMipmap(a), oe.unbindTexture() } }, this.initTexture = function (e) { e.isCubeTexture ? ge.setTextureCube(e, 0) : e.isData3DTexture ? ge.setTexture3D(e, 0) : e.isDataArrayTexture || e.isCompressedArrayTexture ? ge.setTexture2DArray(e, 0) : ge.setTexture2D(e, 0), oe.unbindTexture() }, this.resetState = function () { V = 0, k = 0, H = null, oe.reset(), we.reset() }, "undefined" !== typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", { detail: this })) } return dr(e, [{ key: "coordinateSystem", get: function () { return tl } }, { key: "outputColorSpace", get: function () { return this._outputColorSpace }, set: function (e) { this._outputColorSpace = e; var t = this.getContext(); t.drawingBufferColorSpace = e === ds ? "display-p3" : "srgb", t.unpackColorSpace = Hl.workingColorSpace === Is ? "display-p3" : "srgb" } }, { key: "physicallyCorrectLights", get: function () { return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."), !this.useLegacyLights }, set: function (e) { console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."), this.useLegacyLights = !e } }, { key: "outputEncoding", get: function () { return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."), this.outputColorSpace === us ? as : rs }, set: function (e) { console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."), this.outputColorSpace = e === as ? us : Cs } }, { key: "useLegacyLights", get: function () { return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."), this._useLegacyLights }, set: function (e) { console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."), this._useLegacyLights = e } }]), e }(), gI = function (e) { Ir(n, e); var t = fr(n); function n() { return cr(this, n), t.apply(this, arguments) } return dr(n) }(lI); gI.prototype.isWebGL1Renderer = !0; var cI, uI = function () { function e(t) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 25e-5; cr(this, e), this.isFogExp2 = !0, this.name = "", this.color = new pc(t), this.density = n } return dr(e, [{ key: "clone", value: function () { return new e(this.color, this.density) } }, { key: "toJSON", value: function () { return { type: "FogExp2", name: this.name, color: this.color.getHex(), density: this.density } } }]), e }(), CI = function () { function e(t) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1e3; cr(this, e), this.isFog = !0, this.name = "", this.color = new pc(t), this.near = n, this.far = i } return dr(e, [{ key: "clone", value: function () { return new e(this.color, this.near, this.far) } }, { key: "toJSON", value: function () { return { type: "Fog", name: this.name, color: this.color.getHex(), near: this.near, far: this.far } } }]), e }(), dI = function (e) { Ir(n, e); var t = fr(n); function n() { var e; return cr(this, n), (e = t.call(this)).isScene = !0, e.type = "Scene", e.background = null, e.environment = null, e.fog = null, e.backgroundBlurriness = 0, e.backgroundIntensity = 1, e.overrideMaterial = null, "undefined" !== typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", { detail: y(e) })), e } return dr(n, [{ key: "copy", value: function (e, t) { return yr(hr(n.prototype), "copy", this).call(this, e, t), null !== e.background && (this.background = e.background.clone()), null !== e.environment && (this.environment = e.environment.clone()), null !== e.fog && (this.fog = e.fog.clone()), this.backgroundBlurriness = e.backgroundBlurriness, this.backgroundIntensity = e.backgroundIntensity, null !== e.overrideMaterial && (this.overrideMaterial = e.overrideMaterial.clone()), this.matrixAutoUpdate = e.matrixAutoUpdate, this } }, { key: "toJSON", value: function (e) { var t = yr(hr(n.prototype), "toJSON", this).call(this, e); return null !== this.fog && (t.object.fog = this.fog.toJSON()), this.backgroundBlurriness > 0 && (t.object.backgroundBlurriness = this.backgroundBlurriness), 1 !== this.backgroundIntensity && (t.object.backgroundIntensity = this.backgroundIntensity), t } }]), n }(qg), II = function () { function e(t, n) { cr(this, e), this.isInterleavedBuffer = !0, this.array = t, this.stride = n, this.count = void 0 !== t ? t.length / n : 0, this.usage = Ts, this.updateRange = { offset: 0, count: -1 }, this.version = 0, this.uuid = ll() } return dr(e, [{ key: "onUploadCallback", value: function () { } }, { key: "needsUpdate", set: function (e) { !0 === e && this.version++ } }, { key: "setUsage", value: function (e) { return this.usage = e, this } }, { key: "copy", value: function (e) { return this.array = new e.array.constructor(e.array), this.count = e.count, this.stride = e.stride, this.usage = e.usage, this } }, { key: "copyAt", value: function (e, t, n) { e *= this.stride, n *= t.stride; for (var i = 0, r = this.stride; i < r; i++)this.array[e + i] = t.array[n + i]; return this } }, { key: "set", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; return this.array.set(e, t), this } }, { key: "clone", value: function (e) { void 0 === e.arrayBuffers && (e.arrayBuffers = {}), void 0 === this.array.buffer._uuid && (this.array.buffer._uuid = ll()), void 0 === e.arrayBuffers[this.array.buffer._uuid] && (e.arrayBuffers[this.array.buffer._uuid] = this.array.slice(0).buffer); var t = new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]), n = new this.constructor(t, this.stride); return n.setUsage(this.usage), n } }, { key: "onUpload", value: function (e) { return this.onUploadCallback = e, this } }, { key: "toJSON", value: function (e) { return void 0 === e.arrayBuffers && (e.arrayBuffers = {}), void 0 === this.array.buffer._uuid && (this.array.buffer._uuid = ll()), void 0 === e.arrayBuffers[this.array.buffer._uuid] && (e.arrayBuffers[this.array.buffer._uuid] = Array.from(new Uint32Array(this.array.buffer))), { uuid: this.uuid, buffer: this.array.buffer._uuid, type: this.array.constructor.name, stride: this.stride } } }]), e }(), hI = new Ql, AI = function () { function e(t, n, i) { var r = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]; cr(this, e), this.isInterleavedBufferAttribute = !0, this.name = "", this.data = t, this.itemSize = n, this.offset = i, this.normalized = r } return dr(e, [{ key: "count", get: function () { return this.data.count } }, { key: "array", get: function () { return this.data.array } }, { key: "needsUpdate", set: function (e) { this.data.needsUpdate = e } }, { key: "applyMatrix4", value: function (e) { for (var t = 0, n = this.data.count; t < n; t++)hI.fromBufferAttribute(this, t), hI.applyMatrix4(e), this.setXYZ(t, hI.x, hI.y, hI.z); return this } }, { key: "applyNormalMatrix", value: function (e) { for (var t = 0, n = this.count; t < n; t++)hI.fromBufferAttribute(this, t), hI.applyNormalMatrix(e), this.setXYZ(t, hI.x, hI.y, hI.z); return this } }, { key: "transformDirection", value: function (e) { for (var t = 0, n = this.count; t < n; t++)hI.fromBufferAttribute(this, t), hI.transformDirection(e), this.setXYZ(t, hI.x, hI.y, hI.z); return this } }, { key: "setX", value: function (e, t) { return this.normalized && (t = Al(t, this.array)), this.data.array[e * this.data.stride + this.offset] = t, this } }, { key: "setY", value: function (e, t) { return this.normalized && (t = Al(t, this.array)), this.data.array[e * this.data.stride + this.offset + 1] = t, this } }, { key: "setZ", value: function (e, t) { return this.normalized && (t = Al(t, this.array)), this.data.array[e * this.data.stride + this.offset + 2] = t, this } }, { key: "setW", value: function (e, t) { return this.normalized && (t = Al(t, this.array)), this.data.array[e * this.data.stride + this.offset + 3] = t, this } }, { key: "getX", value: function (e) { var t = this.data.array[e * this.data.stride + this.offset]; return this.normalized && (t = hl(t, this.array)), t } }, { key: "getY", value: function (e) { var t = this.data.array[e * this.data.stride + this.offset + 1]; return this.normalized && (t = hl(t, this.array)), t } }, { key: "getZ", value: function (e) { var t = this.data.array[e * this.data.stride + this.offset + 2]; return this.normalized && (t = hl(t, this.array)), t } }, { key: "getW", value: function (e) { var t = this.data.array[e * this.data.stride + this.offset + 3]; return this.normalized && (t = hl(t, this.array)), t } }, { key: "setXY", value: function (e, t, n) { return e = e * this.data.stride + this.offset, this.normalized && (t = Al(t, this.array), n = Al(n, this.array)), this.data.array[e + 0] = t, this.data.array[e + 1] = n, this } }, { key: "setXYZ", value: function (e, t, n, i) { return e = e * this.data.stride + this.offset, this.normalized && (t = Al(t, this.array), n = Al(n, this.array), i = Al(i, this.array)), this.data.array[e + 0] = t, this.data.array[e + 1] = n, this.data.array[e + 2] = i, this } }, { key: "setXYZW", value: function (e, t, n, i, r) { return e = e * this.data.stride + this.offset, this.normalized && (t = Al(t, this.array), n = Al(n, this.array), i = Al(i, this.array), r = Al(r, this.array)), this.data.array[e + 0] = t, this.data.array[e + 1] = n, this.data.array[e + 2] = i, this.data.array[e + 3] = r, this } }, { key: "clone", value: function (t) { if (void 0 === t) { console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data."); for (var n = [], i = 0; i < this.count; i++)for (var r = i * this.data.stride + this.offset, a = 0; a < this.itemSize; a++)n.push(this.data.array[r + a]); return new Sc(new this.array.constructor(n), this.itemSize, this.normalized) } return void 0 === t.interleavedBuffers && (t.interleavedBuffers = {}), void 0 === t.interleavedBuffers[this.data.uuid] && (t.interleavedBuffers[this.data.uuid] = this.data.clone(t)), new e(t.interleavedBuffers[this.data.uuid], this.itemSize, this.offset, this.normalized) } }, { key: "toJSON", value: function (e) { if (void 0 === e) { console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data."); for (var t = [], n = 0; n < this.count; n++)for (var i = n * this.data.stride + this.offset, r = 0; r < this.itemSize; r++)t.push(this.data.array[i + r]); return { itemSize: this.itemSize, type: this.array.constructor.name, array: t, normalized: this.normalized } } return void 0 === e.interleavedBuffers && (e.interleavedBuffers = {}), void 0 === e.interleavedBuffers[this.data.uuid] && (e.interleavedBuffers[this.data.uuid] = this.data.toJSON(e)), { isInterleavedBufferAttribute: !0, itemSize: this.itemSize, data: this.data.uuid, offset: this.offset, normalized: this.normalized } } }]), e }(), pI = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).isSpriteMaterial = !0, i.type = "SpriteMaterial", i.color = new pc(16777215), i.map = null, i.alphaMap = null, i.rotation = 0, i.sizeAttenuation = !0, i.transparent = !0, i.fog = !0, i.setValues(e), i } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.color.copy(e.color), this.map = e.map, this.alphaMap = e.alphaMap, this.rotation = e.rotation, this.sizeAttenuation = e.sizeAttenuation, this.fog = e.fog, this } }]), n }(Cc), fI = new Ql, mI = new Ql, vI = new Ql, bI = new fl, yI = new fl, GI = new Sg, BI = new Ql, ZI = new Ql, wI = new Ql, SI = new fl, RI = new fl, xI = new fl, WI = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new pI; if (cr(this, n), (e = t.call(this)).isSprite = !0, e.type = "Sprite", void 0 === cI) { cI = new Uc; var r = new Float32Array([-.5, -.5, 0, 0, 0, .5, -.5, 0, 1, 0, .5, .5, 0, 1, 1, -.5, .5, 0, 0, 1]), a = new II(r, 5); cI.setIndex([0, 1, 2, 0, 2, 3]), cI.setAttribute("position", new AI(a, 3, 0, !1)), cI.setAttribute("uv", new AI(a, 2, 3, !1)) } return e.geometry = cI, e.material = i, e.center = new fl(.5, .5), e } return dr(n, [{ key: "raycast", value: function (e, t) { null === e.camera && console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'), mI.setFromMatrixScale(this.matrixWorld), GI.copy(e.camera.matrixWorld), this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse, this.matrixWorld), vI.setFromMatrixPosition(this.modelViewMatrix), e.camera.isPerspectiveCamera && !1 === this.material.sizeAttenuation && mI.multiplyScalar(-vI.z); var n, i, r = this.material.rotation; 0 !== r && (i = Math.cos(r), n = Math.sin(r)); var a = this.center; VI(BI.set(-.5, -.5, 0), vI, a, mI, n, i), VI(ZI.set(.5, -.5, 0), vI, a, mI, n, i), VI(wI.set(.5, .5, 0), vI, a, mI, n, i), SI.set(0, 0), RI.set(1, 0), xI.set(1, 1); var o = e.ray.intersectTriangle(BI, ZI, wI, !1, fI); if (null !== o || (VI(ZI.set(-.5, .5, 0), vI, a, mI, n, i), RI.set(0, 1), null !== (o = e.ray.intersectTriangle(BI, wI, ZI, !1, fI)))) { var s = e.ray.origin.distanceTo(fI); s < e.near || s > e.far || t.push({ distance: s, point: fI.clone(), uv: cc.getInterpolation(fI, BI, ZI, wI, SI, RI, xI, new fl), face: null, object: this }) } } }, { key: "copy", value: function (e, t) { return yr(hr(n.prototype), "copy", this).call(this, e, t), void 0 !== e.center && this.center.copy(e.center), this.material = e.material, this } }]), n }(qg); function VI(e, t, n, i, r, a) { bI.subVectors(e, n).addScalar(.5).multiply(i), void 0 !== r ? (yI.x = a * bI.x - r * bI.y, yI.y = r * bI.x + a * bI.y) : yI.copy(bI), e.copy(t), e.x += yI.x, e.y += yI.y, e.applyMatrix4(GI) } var kI = new Ql, HI = new Ql, MI = function (e) { Ir(n, e); var t = fr(n); function n() { var e; return cr(this, n), (e = t.call(this))._currentLevel = 0, e.type = "LOD", Object.defineProperties(y(e), { levels: { enumerable: !0, value: [] }, isLOD: { value: !0 } }), e.autoUpdate = !0, e } return dr(n, [{ key: "copy", value: function (e) { yr(hr(n.prototype), "copy", this).call(this, e, !1); for (var t = e.levels, i = 0, r = t.length; i < r; i++) { var a = t[i]; this.addLevel(a.object.clone(), a.distance, a.hysteresis) } return this.autoUpdate = e.autoUpdate, this } }, { key: "addLevel", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; t = Math.abs(t); var i, r = this.levels; for (i = 0; i < r.length && !(t < r[i].distance); i++); return r.splice(i, 0, { distance: t, hysteresis: n, object: e }), this.add(e), this } }, { key: "getCurrentLevel", value: function () { return this._currentLevel } }, { key: "getObjectForDistance", value: function (e) { var t = this.levels; if (t.length > 0) { var n, i; for (n = 1, i = t.length; n < i; n++) { var r = t[n].distance; if (t[n].object.visible && (r -= r * t[n].hysteresis), e < r) break } return t[n - 1].object } return null } }, { key: "raycast", value: function (e, t) { if (this.levels.length > 0) { kI.setFromMatrixPosition(this.matrixWorld); var n = e.ray.origin.distanceTo(kI); this.getObjectForDistance(n).raycast(e, t) } } }, { key: "update", value: function (e) { var t = this.levels; if (t.length > 1) { kI.setFromMatrixPosition(e.matrixWorld), HI.setFromMatrixPosition(this.matrixWorld); var n, i, r = kI.distanceTo(HI) / e.zoom; for (t[0].object.visible = !0, n = 1, i = t.length; n < i; n++) { var a = t[n].distance; if (t[n].object.visible && (a -= a * t[n].hysteresis), !(r >= a)) break; t[n - 1].object.visible = !1, t[n].object.visible = !0 } for (this._currentLevel = n - 1; n < i; n++)t[n].object.visible = !1 } } }, { key: "toJSON", value: function (e) { var t = yr(hr(n.prototype), "toJSON", this).call(this, e); !1 === this.autoUpdate && (t.object.autoUpdate = !1), t.object.levels = []; for (var i = this.levels, r = 0, a = i.length; r < a; r++) { var o = i[r]; t.object.levels.push({ object: o.object.uuid, distance: o.distance, hysteresis: o.hysteresis }) } return t } }]), n }(qg), FI = new Ql, NI = new El, XI = new El, YI = new Ql, KI = new Sg, LI = new Ql, zI = new fg, EI = new Sg, TI = new wg, _I = function (e) { Ir(n, e); var t = fr(n); function n(e, i) { var r; return cr(this, n), (r = t.call(this, e, i)).isSkinnedMesh = !0, r.type = "SkinnedMesh", r.bindMode = "attached", r.bindMatrix = new Sg, r.bindMatrixInverse = new Sg, r.boundingBox = null, r.boundingSphere = null, r } return dr(n, [{ key: "computeBoundingBox", value: function () { var e = this.geometry; null === this.boundingBox && (this.boundingBox = new eg), this.boundingBox.makeEmpty(); for (var t = e.getAttribute("position"), n = 0; n < t.count; n++)LI.fromBufferAttribute(t, n), this.applyBoneTransform(n, LI), this.boundingBox.expandByPoint(LI) } }, { key: "computeBoundingSphere", value: function () { var e = this.geometry; null === this.boundingSphere && (this.boundingSphere = new fg), this.boundingSphere.makeEmpty(); for (var t = e.getAttribute("position"), n = 0; n < t.count; n++)LI.fromBufferAttribute(t, n), this.applyBoneTransform(n, LI), this.boundingSphere.expandByPoint(LI) } }, { key: "copy", value: function (e, t) { return yr(hr(n.prototype), "copy", this).call(this, e, t), this.bindMode = e.bindMode, this.bindMatrix.copy(e.bindMatrix), this.bindMatrixInverse.copy(e.bindMatrixInverse), this.skeleton = e.skeleton, null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()), null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()), this } }, { key: "raycast", value: function (e, t) { var n = this.material, i = this.matrixWorld; void 0 !== n && (null === this.boundingSphere && this.computeBoundingSphere(), zI.copy(this.boundingSphere), zI.applyMatrix4(i), !1 !== e.ray.intersectsSphere(zI) && (EI.copy(i).invert(), TI.copy(e.ray).applyMatrix4(EI), null !== this.boundingBox && !1 === TI.intersectsBox(this.boundingBox) || this._computeIntersections(e, t, TI))) } }, { key: "getVertexPosition", value: function (e, t) { return yr(hr(n.prototype), "getVertexPosition", this).call(this, e, t), this.applyBoneTransform(e, t), t } }, { key: "bind", value: function (e, t) { this.skeleton = e, void 0 === t && (this.updateMatrixWorld(!0), this.skeleton.calculateInverses(), t = this.matrixWorld), this.bindMatrix.copy(t), this.bindMatrixInverse.copy(t).invert() } }, { key: "pose", value: function () { this.skeleton.pose() } }, { key: "normalizeSkinWeights", value: function () { for (var e = new El, t = this.geometry.attributes.skinWeight, n = 0, i = t.count; n < i; n++) { e.fromBufferAttribute(t, n); var r = 1 / e.manhattanLength(); r !== 1 / 0 ? e.multiplyScalar(r) : e.set(1, 0, 0, 0), t.setXYZW(n, e.x, e.y, e.z, e.w) } } }, { key: "updateMatrixWorld", value: function (e) { yr(hr(n.prototype), "updateMatrixWorld", this).call(this, e), "attached" === this.bindMode ? this.bindMatrixInverse.copy(this.matrixWorld).invert() : "detached" === this.bindMode ? this.bindMatrixInverse.copy(this.bindMatrix).invert() : console.warn("THREE.SkinnedMesh: Unrecognized bindMode: " + this.bindMode) } }, { key: "applyBoneTransform", value: function (e, t) { var n = this.skeleton, i = this.geometry; NI.fromBufferAttribute(i.attributes.skinIndex, e), XI.fromBufferAttribute(i.attributes.skinWeight, e), FI.copy(t).applyMatrix4(this.bindMatrix), t.set(0, 0, 0); for (var r = 0; r < 4; r++) { var a = XI.getComponent(r); if (0 !== a) { var o = NI.getComponent(r); KI.multiplyMatrices(n.bones[o].matrixWorld, n.boneInverses[o]), t.addScaledVector(YI.copy(FI).applyMatrix4(KI), a) } } return t.applyMatrix4(this.bindMatrixInverse) } }, { key: "boneTransform", value: function (e, t) { return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."), this.applyBoneTransform(e, t) } }]), n }(gu), UI = function (e) { Ir(n, e); var t = fr(n); function n() { var e; return cr(this, n), (e = t.call(this)).isBone = !0, e.type = "Bone", e } return dr(n) }(qg), DI = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, o = arguments.length > 3 ? arguments[3] : void 0, s = arguments.length > 4 ? arguments[4] : void 0, l = arguments.length > 5 ? arguments[5] : void 0, g = arguments.length > 6 ? arguments[6] : void 0, c = arguments.length > 7 ? arguments[7] : void 0, u = arguments.length > 8 && void 0 !== arguments[8] ? arguments[8] : Ha, C = arguments.length > 9 && void 0 !== arguments[9] ? arguments[9] : Ha, d = arguments.length > 10 ? arguments[10] : void 0, I = arguments.length > 11 ? arguments[11] : void 0; return cr(this, n), (e = t.call(this, null, l, g, c, u, C, o, s, d, I)).isDataTexture = !0, e.image = { data: i, width: r, height: a }, e.generateMipmaps = !1, e.flipY = !1, e.unpackAlignment = 1, e } return dr(n) }(zl), PI = new Sg, JI = new Sg, OI = function () { function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : []; cr(this, e), this.uuid = ll(), this.bones = t.slice(0), this.boneInverses = n, this.boneMatrices = null, this.boneTexture = null, this.boneTextureSize = 0, this.init() } return dr(e, [{ key: "init", value: function () { var e = this.bones, t = this.boneInverses; if (this.boneMatrices = new Float32Array(16 * e.length), 0 === t.length) this.calculateInverses(); else if (e.length !== t.length) { console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."), this.boneInverses = []; for (var n = 0, i = this.bones.length; n < i; n++)this.boneInverses.push(new Sg) } } }, { key: "calculateInverses", value: function () { this.boneInverses.length = 0; for (var e = 0, t = this.bones.length; e < t; e++) { var n = new Sg; this.bones[e] && n.copy(this.bones[e].matrixWorld).invert(), this.boneInverses.push(n) } } }, { key: "pose", value: function () { for (var e = 0, t = this.bones.length; e < t; e++) { var n = this.bones[e]; n && n.matrixWorld.copy(this.boneInverses[e]).invert() } for (var i = 0, r = this.bones.length; i < r; i++) { var a = this.bones[i]; a && (a.parent && a.parent.isBone ? (a.matrix.copy(a.parent.matrixWorld).invert(), a.matrix.multiply(a.matrixWorld)) : a.matrix.copy(a.matrixWorld), a.matrix.decompose(a.position, a.quaternion, a.scale)) } } }, { key: "update", value: function () { for (var e = this.bones, t = this.boneInverses, n = this.boneMatrices, i = this.boneTexture, r = 0, a = e.length; r < a; r++) { var o = e[r] ? e[r].matrixWorld : JI; PI.multiplyMatrices(o, t[r]), PI.toArray(n, 16 * r) } null !== i && (i.needsUpdate = !0) } }, { key: "clone", value: function () { return new e(this.bones, this.boneInverses) } }, { key: "computeBoneTexture", value: function () { var e = Math.sqrt(4 * this.bones.length); e = dl(e), e = Math.max(e, 4); var t = new Float32Array(e * e * 4); t.set(this.boneMatrices); var n = new DI(t, e, e, to, Oa); return n.needsUpdate = !0, this.boneMatrices = t, this.boneTexture = n, this.boneTextureSize = e, this } }, { key: "getBoneByName", value: function (e) { for (var t = 0, n = this.bones.length; t < n; t++) { var i = this.bones[t]; if (i.name === e) return i } } }, { key: "dispose", value: function () { null !== this.boneTexture && (this.boneTexture.dispose(), this.boneTexture = null) } }, { key: "fromJSON", value: function (e, t) { this.uuid = e.uuid; for (var n = 0, i = e.bones.length; n < i; n++) { var r = e.bones[n], a = t[r]; void 0 === a && (console.warn("THREE.Skeleton: No bone found with UUID:", r), a = new UI), this.bones.push(a), this.boneInverses.push((new Sg).fromArray(e.boneInverses[n])) } return this.init(), this } }, { key: "toJSON", value: function () { var e = { metadata: { version: 4.6, type: "Skeleton", generator: "Skeleton.toJSON" }, bones: [], boneInverses: [] }; e.uuid = this.uuid; for (var t = this.bones, n = this.boneInverses, i = 0, r = t.length; i < r; i++) { var a = t[i]; e.bones.push(a.uuid); var o = n[i]; e.boneInverses.push(o.toArray()) } return e } }]), e }(), jI = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { var a, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1; return cr(this, n), (a = t.call(this, e, i, r)).isInstancedBufferAttribute = !0, a.meshPerAttribute = o, a } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.meshPerAttribute = e.meshPerAttribute, this } }, { key: "toJSON", value: function () { var e = yr(hr(n.prototype), "toJSON", this).call(this); return e.meshPerAttribute = this.meshPerAttribute, e.isInstancedBufferAttribute = !0, e } }]), n }(Sc), QI = new Sg, qI = new Sg, $I = [], eh = new eg, th = new Sg, nh = new gu, ih = new fg, rh = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { var a; cr(this, n), (a = t.call(this, e, i)).isInstancedMesh = !0, a.instanceMatrix = new jI(new Float32Array(16 * r), 16), a.instanceColor = null, a.count = r, a.boundingBox = null, a.boundingSphere = null; for (var o = 0; o < r; o++)a.setMatrixAt(o, th); return a } return dr(n, [{ key: "computeBoundingBox", value: function () { var e = this.geometry, t = this.count; null === this.boundingBox && (this.boundingBox = new eg), null === e.boundingBox && e.computeBoundingBox(), this.boundingBox.makeEmpty(); for (var n = 0; n < t; n++)this.getMatrixAt(n, QI), eh.copy(e.boundingBox).applyMatrix4(QI), this.boundingBox.union(eh) } }, { key: "computeBoundingSphere", value: function () { var e = this.geometry, t = this.count; null === this.boundingSphere && (this.boundingSphere = new fg), null === e.boundingSphere && e.computeBoundingSphere(), this.boundingSphere.makeEmpty(); for (var n = 0; n < t; n++)this.getMatrixAt(n, QI), ih.copy(e.boundingSphere).applyMatrix4(QI), this.boundingSphere.union(ih) } }, { key: "copy", value: function (e, t) { return yr(hr(n.prototype), "copy", this).call(this, e, t), this.instanceMatrix.copy(e.instanceMatrix), null !== e.instanceColor && (this.instanceColor = e.instanceColor.clone()), this.count = e.count, null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()), null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()), this } }, { key: "getColorAt", value: function (e, t) { t.fromArray(this.instanceColor.array, 3 * e) } }, { key: "getMatrixAt", value: function (e, t) { t.fromArray(this.instanceMatrix.array, 16 * e) } }, { key: "raycast", value: function (e, t) { var n = this.matrixWorld, i = this.count; if (nh.geometry = this.geometry, nh.material = this.material, void 0 !== nh.material && (null === this.boundingSphere && this.computeBoundingSphere(), ih.copy(this.boundingSphere), ih.applyMatrix4(n), !1 !== e.ray.intersectsSphere(ih))) for (var r = 0; r < i; r++) { this.getMatrixAt(r, QI), qI.multiplyMatrices(n, QI), nh.matrixWorld = qI, nh.raycast(e, $I); for (var a = 0, o = $I.length; a < o; a++) { var s = $I[a]; s.instanceId = r, s.object = this, t.push(s) } $I.length = 0 } } }, { key: "setColorAt", value: function (e, t) { null === this.instanceColor && (this.instanceColor = new jI(new Float32Array(3 * this.instanceMatrix.count), 3)), t.toArray(this.instanceColor.array, 3 * e) } }, { key: "setMatrixAt", value: function (e, t) { t.toArray(this.instanceMatrix.array, 16 * e) } }, { key: "updateMorphTargets", value: function () { } }, { key: "dispose", value: function () { this.dispatchEvent({ type: "dispose" }) } }]), n }(gu), ah = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).isLineBasicMaterial = !0, i.type = "LineBasicMaterial", i.color = new pc(16777215), i.map = null, i.linewidth = 1, i.linecap = "round", i.linejoin = "round", i.fog = !0, i.setValues(e), i } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.color.copy(e.color), this.map = e.map, this.linewidth = e.linewidth, this.linecap = e.linecap, this.linejoin = e.linejoin, this.fog = e.fog, this } }]), n }(Cc), oh = new Ql, sh = new Ql, lh = new Sg, gh = new wg, ch = new fg, uh = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new Uc, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new ah; return cr(this, n), (e = t.call(this)).isLine = !0, e.type = "Line", e.geometry = i, e.material = r, e.updateMorphTargets(), e } return dr(n, [{ key: "copy", value: function (e, t) { return yr(hr(n.prototype), "copy", this).call(this, e, t), this.material = Array.isArray(e.material) ? e.material.slice() : e.material, this.geometry = e.geometry, this } }, { key: "computeLineDistances", value: function () { var e = this.geometry; if (null === e.index) { for (var t = e.attributes.position, n = [0], i = 1, r = t.count; i < r; i++)oh.fromBufferAttribute(t, i - 1), sh.fromBufferAttribute(t, i), n[i] = n[i - 1], n[i] += oh.distanceTo(sh); e.setAttribute("lineDistance", new Nc(n, 1)) } else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry."); return this } }, { key: "raycast", value: function (e, t) { var n = this.geometry, i = this.matrixWorld, r = e.params.Line.threshold, a = n.drawRange; if (null === n.boundingSphere && n.computeBoundingSphere(), ch.copy(n.boundingSphere), ch.applyMatrix4(i), ch.radius += r, !1 !== e.ray.intersectsSphere(ch)) { lh.copy(i).invert(), gh.copy(e.ray).applyMatrix4(lh); var o = r / ((this.scale.x + this.scale.y + this.scale.z) / 3), s = o * o, l = new Ql, g = new Ql, c = new Ql, u = new Ql, C = this.isLineSegments ? 2 : 1, d = n.index, I = n.attributes.position; if (null !== d) for (var h = Math.max(0, a.start), A = Math.min(d.count, a.start + a.count) - 1; h < A; h += C) { var p = d.getX(h), f = d.getX(h + 1); if (l.fromBufferAttribute(I, p), g.fromBufferAttribute(I, f), !(gh.distanceSqToSegment(l, g, u, c) > s)) { u.applyMatrix4(this.matrixWorld); var m = e.ray.origin.distanceTo(u); m < e.near || m > e.far || t.push({ distance: m, point: c.clone().applyMatrix4(this.matrixWorld), index: h, face: null, faceIndex: null, object: this }) } } else for (var v = Math.max(0, a.start), b = Math.min(I.count, a.start + a.count) - 1; v < b; v += C) { if (l.fromBufferAttribute(I, v), g.fromBufferAttribute(I, v + 1), !(gh.distanceSqToSegment(l, g, u, c) > s)) { u.applyMatrix4(this.matrixWorld); var y = e.ray.origin.distanceTo(u); y < e.near || y > e.far || t.push({ distance: y, point: c.clone().applyMatrix4(this.matrixWorld), index: v, face: null, faceIndex: null, object: this }) } } } } }, { key: "updateMorphTargets", value: function () { var e = this.geometry.morphAttributes, t = Object.keys(e); if (t.length > 0) { var n = e[t[0]]; if (void 0 !== n) { this.morphTargetInfluences = [], this.morphTargetDictionary = {}; for (var i = 0, r = n.length; i < r; i++) { var a = n[i].name || String(i); this.morphTargetInfluences.push(0), this.morphTargetDictionary[a] = i } } } } }]), n }(qg), Ch = new Ql, dh = new Ql, Ih = function (e) { Ir(n, e); var t = fr(n); function n(e, i) { var r; return cr(this, n), (r = t.call(this, e, i)).isLineSegments = !0, r.type = "LineSegments", r } return dr(n, [{ key: "computeLineDistances", value: function () { var e = this.geometry; if (null === e.index) { for (var t = e.attributes.position, n = [], i = 0, r = t.count; i < r; i += 2)Ch.fromBufferAttribute(t, i), dh.fromBufferAttribute(t, i + 1), n[i] = 0 === i ? 0 : n[i - 1], n[i + 1] = n[i] + Ch.distanceTo(dh); e.setAttribute("lineDistance", new Nc(n, 1)) } else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry."); return this } }]), n }(uh), hh = function (e) { Ir(n, e); var t = fr(n); function n(e, i) { var r; return cr(this, n), (r = t.call(this, e, i)).isLineLoop = !0, r.type = "LineLoop", r } return dr(n) }(uh), Ah = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).isPointsMaterial = !0, i.type = "PointsMaterial", i.color = new pc(16777215), i.map = null, i.alphaMap = null, i.size = 1, i.sizeAttenuation = !0, i.fog = !0, i.setValues(e), i } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.color.copy(e.color), this.map = e.map, this.alphaMap = e.alphaMap, this.size = e.size, this.sizeAttenuation = e.sizeAttenuation, this.fog = e.fog, this } }]), n }(Cc), ph = new Sg, fh = new wg, mh = new fg, vh = new Ql, bh = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new Uc, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new Ah; return cr(this, n), (e = t.call(this)).isPoints = !0, e.type = "Points", e.geometry = i, e.material = r, e.updateMorphTargets(), e } return dr(n, [{ key: "copy", value: function (e, t) { return yr(hr(n.prototype), "copy", this).call(this, e, t), this.material = Array.isArray(e.material) ? e.material.slice() : e.material, this.geometry = e.geometry, this } }, { key: "raycast", value: function (e, t) { var n = this.geometry, i = this.matrixWorld, r = e.params.Points.threshold, a = n.drawRange; if (null === n.boundingSphere && n.computeBoundingSphere(), mh.copy(n.boundingSphere), mh.applyMatrix4(i), mh.radius += r, !1 !== e.ray.intersectsSphere(mh)) { ph.copy(i).invert(), fh.copy(e.ray).applyMatrix4(ph); var o = r / ((this.scale.x + this.scale.y + this.scale.z) / 3), s = o * o, l = n.index, g = n.attributes.position; if (null !== l) for (var c = Math.max(0, a.start), u = Math.min(l.count, a.start + a.count); c < u; c++) { var C = l.getX(c); vh.fromBufferAttribute(g, C), yh(vh, C, s, i, e, t, this) } else for (var d = Math.max(0, a.start), I = Math.min(g.count, a.start + a.count); d < I; d++)vh.fromBufferAttribute(g, d), yh(vh, d, s, i, e, t, this) } } }, { key: "updateMorphTargets", value: function () { var e = this.geometry.morphAttributes, t = Object.keys(e); if (t.length > 0) { var n = e[t[0]]; if (void 0 !== n) { this.morphTargetInfluences = [], this.morphTargetDictionary = {}; for (var i = 0, r = n.length; i < r; i++) { var a = n[i].name || String(i); this.morphTargetInfluences.push(0), this.morphTargetDictionary[a] = i } } } } }]), n }(qg); function yh(e, t, n, i, r, a, o) { var s = fh.distanceSqToPoint(e); if (s < n) { var l = new Ql; fh.closestPointToPoint(e, l), l.applyMatrix4(i); var g = r.ray.origin.distanceTo(l); if (g < r.near || g > r.far) return; a.push({ distance: g, distanceToRay: Math.sqrt(s), point: l, index: t, face: null, object: o }) } } var Gh = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r, a, o, s, l, g, c) { var u; cr(this, n), (u = t.call(this, e, i, r, a, o, s, l, g, c)).isVideoTexture = !0, u.minFilter = void 0 !== s ? s : Ya, u.magFilter = void 0 !== o ? o : Ya, u.generateMipmaps = !1; var C = y(u); return "requestVideoFrameCallback" in e && e.requestVideoFrameCallback((function t() { C.needsUpdate = !0, e.requestVideoFrameCallback(t) })), u } return dr(n, [{ key: "clone", value: function () { return new this.constructor(this.image).copy(this) } }, { key: "update", value: function () { var e = this.image; !1 === "requestVideoFrameCallback" in e && e.readyState >= e.HAVE_CURRENT_DATA && (this.needsUpdate = !0) } }]), n }(zl), Bh = function (e) { Ir(n, e); var t = fr(n); function n(e, i) { var r; return cr(this, n), (r = t.call(this, { width: e, height: i })).isFramebufferTexture = !0, r.magFilter = Ha, r.minFilter = Ha, r.generateMipmaps = !1, r.needsUpdate = !0, r } return dr(n) }(zl), Zh = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r, a, o, s, l, g, c, u, C, d) { var I; return cr(this, n), (I = t.call(this, null, s, l, g, c, u, a, o, C, d)).isCompressedTexture = !0, I.image = { width: i, height: r }, I.mipmaps = e, I.flipY = !1, I.generateMipmaps = !1, I } return dr(n) }(zl), wh = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r, a, o, s) { var l; return cr(this, n), (l = t.call(this, e, i, r, o, s)).isCompressedArrayTexture = !0, l.image.depth = a, l.wrapR = Va, l } return dr(n) }(Zh), Sh = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { var a; return cr(this, n), (a = t.call(this, void 0, e[0].width, e[0].height, i, r, Za)).isCompressedCubeTexture = !0, a.isCubeTexture = !0, a.image = e, a } return dr(n) }(Zh), Rh = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r, a, o, s, l, g, c) { var u; return cr(this, n), (u = t.call(this, e, i, r, a, o, s, l, g, c)).isCanvasTexture = !0, u.needsUpdate = !0, u } return dr(n) }(zl), xh = function () { function e() { cr(this, e), this.type = "Curve", this.arcLengthDivisions = 200 } return dr(e, [{ key: "getPoint", value: function () { return console.warn("THREE.Curve: .getPoint() not implemented."), null } }, { key: "getPointAt", value: function (e, t) { var n = this.getUtoTmapping(e); return this.getPoint(n, t) } }, { key: "getPoints", value: function () { for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 5, t = [], n = 0; n <= e; n++)t.push(this.getPoint(n / e)); return t } }, { key: "getSpacedPoints", value: function () { for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 5, t = [], n = 0; n <= e; n++)t.push(this.getPointAt(n / e)); return t } }, { key: "getLength", value: function () { var e = this.getLengths(); return e[e.length - 1] } }, { key: "getLengths", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.arcLengthDivisions; if (this.cacheArcLengths && this.cacheArcLengths.length === e + 1 && !this.needsUpdate) return this.cacheArcLengths; this.needsUpdate = !1; var t, n = [], i = this.getPoint(0), r = 0; n.push(0); for (var a = 1; a <= e; a++)r += (t = this.getPoint(a / e)).distanceTo(i), n.push(r), i = t; return this.cacheArcLengths = n, n } }, { key: "updateArcLengths", value: function () { this.needsUpdate = !0, this.getLengths() } }, { key: "getUtoTmapping", value: function (e, t) { var n, i = this.getLengths(), r = 0, a = i.length; n = t || e * i[a - 1]; for (var o, s = 0, l = a - 1; s <= l;)if ((o = i[r = Math.floor(s + (l - s) / 2)] - n) < 0) s = r + 1; else { if (!(o > 0)) { l = r; break } l = r - 1 } if (i[r = l] === n) return r / (a - 1); var g = i[r]; return (r + (n - g) / (i[r + 1] - g)) / (a - 1) } }, { key: "getTangent", value: function (e, t) { var n = 1e-4, i = e - n, r = e + n; i < 0 && (i = 0), r > 1 && (r = 1); var a = this.getPoint(i), o = this.getPoint(r), s = t || (a.isVector2 ? new fl : new Ql); return s.copy(o).sub(a).normalize(), s } }, { key: "getTangentAt", value: function (e, t) { var n = this.getUtoTmapping(e); return this.getTangent(n, t) } }, { key: "computeFrenetFrames", value: function (e, t) { for (var n = new Ql, i = [], r = [], a = [], o = new Ql, s = new Sg, l = 0; l <= e; l++) { var g = l / e; i[l] = this.getTangentAt(g, new Ql) } r[0] = new Ql, a[0] = new Ql; var c = Number.MAX_VALUE, u = Math.abs(i[0].x), C = Math.abs(i[0].y), d = Math.abs(i[0].z); u <= c && (c = u, n.set(1, 0, 0)), C <= c && (c = C, n.set(0, 1, 0)), d <= c && n.set(0, 0, 1), o.crossVectors(i[0], n).normalize(), r[0].crossVectors(i[0], o), a[0].crossVectors(i[0], r[0]); for (var I = 1; I <= e; I++) { if (r[I] = r[I - 1].clone(), a[I] = a[I - 1].clone(), o.crossVectors(i[I - 1], i[I]), o.length() > Number.EPSILON) { o.normalize(); var h = Math.acos(gl(i[I - 1].dot(i[I]), -1, 1)); r[I].applyMatrix4(s.makeRotationAxis(o, h)) } a[I].crossVectors(i[I], r[I]) } if (!0 === t) { var A = Math.acos(gl(r[0].dot(r[e]), -1, 1)); A /= e, i[0].dot(o.crossVectors(r[0], r[e])) > 0 && (A = -A); for (var p = 1; p <= e; p++)r[p].applyMatrix4(s.makeRotationAxis(i[p], A * p)), a[p].crossVectors(i[p], r[p]) } return { tangents: i, normals: r, binormals: a } } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }, { key: "copy", value: function (e) { return this.arcLengthDivisions = e.arcLengthDivisions, this } }, { key: "toJSON", value: function () { var e = { metadata: { version: 4.6, type: "Curve", generator: "Curve.toJSON" } }; return e.arcLengthDivisions = this.arcLengthDivisions, e.type = this.type, e } }, { key: "fromJSON", value: function (e) { return this.arcLengthDivisions = e.arcLengthDivisions, this } }]), e }(), Wh = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0, l = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 2 * Math.PI, g = arguments.length > 6 && void 0 !== arguments[6] && arguments[6], c = arguments.length > 7 && void 0 !== arguments[7] ? arguments[7] : 0; return cr(this, n), (e = t.call(this)).isEllipseCurve = !0, e.type = "EllipseCurve", e.aX = i, e.aY = r, e.xRadius = a, e.yRadius = o, e.aStartAngle = s, e.aEndAngle = l, e.aClockwise = g, e.aRotation = c, e } return dr(n, [{ key: "getPoint", value: function (e, t) { for (var n = t || new fl, i = 2 * Math.PI, r = this.aEndAngle - this.aStartAngle, a = Math.abs(r) < Number.EPSILON; r < 0;)r += i; for (; r > i;)r -= i; r < Number.EPSILON && (r = a ? 0 : i), !0 !== this.aClockwise || a || (r === i ? r = -i : r -= i); var o = this.aStartAngle + e * r, s = this.aX + this.xRadius * Math.cos(o), l = this.aY + this.yRadius * Math.sin(o); if (0 !== this.aRotation) { var g = Math.cos(this.aRotation), c = Math.sin(this.aRotation), u = s - this.aX, C = l - this.aY; s = u * g - C * c + this.aX, l = u * c + C * g + this.aY } return n.set(s, l) } }, { key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.aX = e.aX, this.aY = e.aY, this.xRadius = e.xRadius, this.yRadius = e.yRadius, this.aStartAngle = e.aStartAngle, this.aEndAngle = e.aEndAngle, this.aClockwise = e.aClockwise, this.aRotation = e.aRotation, this } }, { key: "toJSON", value: function () { var e = yr(hr(n.prototype), "toJSON", this).call(this); return e.aX = this.aX, e.aY = this.aY, e.xRadius = this.xRadius, e.yRadius = this.yRadius, e.aStartAngle = this.aStartAngle, e.aEndAngle = this.aEndAngle, e.aClockwise = this.aClockwise, e.aRotation = this.aRotation, e } }, { key: "fromJSON", value: function (e) { return yr(hr(n.prototype), "fromJSON", this).call(this, e), this.aX = e.aX, this.aY = e.aY, this.xRadius = e.xRadius, this.yRadius = e.yRadius, this.aStartAngle = e.aStartAngle, this.aEndAngle = e.aEndAngle, this.aClockwise = e.aClockwise, this.aRotation = e.aRotation, this } }]), n }(xh), Vh = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r, a, o, s) { var l; return cr(this, n), (l = t.call(this, e, i, r, r, a, o, s)).isArcCurve = !0, l.type = "ArcCurve", l } return dr(n) }(Wh); function kh() { var e = 0, t = 0, n = 0, i = 0; function r(r, a, o, s) { e = r, t = o, n = -3 * r + 3 * a - 2 * o - s, i = 2 * r - 2 * a + o + s } return { initCatmullRom: function (e, t, n, i, a) { r(t, n, a * (n - e), a * (i - t)) }, initNonuniformCatmullRom: function (e, t, n, i, a, o, s) { var l = (t - e) / a - (n - e) / (a + o) + (n - t) / o, g = (n - t) / o - (i - t) / (o + s) + (i - n) / s; r(t, n, l *= o, g *= o) }, calc: function (r) { var a = r * r; return e + t * r + n * a + i * (a * r) } } } var Hh = new Ql, Mh = new kh, Fh = new kh, Nh = new kh, Xh = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], r = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "centripetal", o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : .5; return cr(this, n), (e = t.call(this)).isCatmullRomCurve3 = !0, e.type = "CatmullRomCurve3", e.points = i, e.closed = r, e.curveType = a, e.tension = o, e } return dr(n, [{ key: "getPoint", value: function (e) { var t, n, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new Ql, r = this.points, a = r.length, o = (a - (this.closed ? 0 : 1)) * e, s = Math.floor(o), l = o - s; this.closed ? s += s > 0 ? 0 : (Math.floor(Math.abs(s) / a) + 1) * a : 0 === l && s === a - 1 && (s = a - 2, l = 1), this.closed || s > 0 ? t = r[(s - 1) % a] : (Hh.subVectors(r[0], r[1]).add(r[0]), t = Hh); var g = r[s % a], c = r[(s + 1) % a]; if (this.closed || s + 2 < a ? n = r[(s + 2) % a] : (Hh.subVectors(r[a - 1], r[a - 2]).add(r[a - 1]), n = Hh), "centripetal" === this.curveType || "chordal" === this.curveType) { var u = "chordal" === this.curveType ? .5 : .25, C = Math.pow(t.distanceToSquared(g), u), d = Math.pow(g.distanceToSquared(c), u), I = Math.pow(c.distanceToSquared(n), u); d < 1e-4 && (d = 1), C < 1e-4 && (C = d), I < 1e-4 && (I = d), Mh.initNonuniformCatmullRom(t.x, g.x, c.x, n.x, C, d, I), Fh.initNonuniformCatmullRom(t.y, g.y, c.y, n.y, C, d, I), Nh.initNonuniformCatmullRom(t.z, g.z, c.z, n.z, C, d, I) } else "catmullrom" === this.curveType && (Mh.initCatmullRom(t.x, g.x, c.x, n.x, this.tension), Fh.initCatmullRom(t.y, g.y, c.y, n.y, this.tension), Nh.initCatmullRom(t.z, g.z, c.z, n.z, this.tension)); return i.set(Mh.calc(l), Fh.calc(l), Nh.calc(l)), i } }, { key: "copy", value: function (e) { yr(hr(n.prototype), "copy", this).call(this, e), this.points = []; for (var t = 0, i = e.points.length; t < i; t++) { var r = e.points[t]; this.points.push(r.clone()) } return this.closed = e.closed, this.curveType = e.curveType, this.tension = e.tension, this } }, { key: "toJSON", value: function () { var e = yr(hr(n.prototype), "toJSON", this).call(this); e.points = []; for (var t = 0, i = this.points.length; t < i; t++) { var r = this.points[t]; e.points.push(r.toArray()) } return e.closed = this.closed, e.curveType = this.curveType, e.tension = this.tension, e } }, { key: "fromJSON", value: function (e) { yr(hr(n.prototype), "fromJSON", this).call(this, e), this.points = []; for (var t = 0, i = e.points.length; t < i; t++) { var r = e.points[t]; this.points.push((new Ql).fromArray(r)) } return this.closed = e.closed, this.curveType = e.curveType, this.tension = e.tension, this } }]), n }(xh); function Yh(e, t, n, i, r) { var a = .5 * (i - t), o = .5 * (r - n), s = e * e; return (2 * n - 2 * i + a + o) * (e * s) + (-3 * n + 3 * i - 2 * a - o) * s + a * e + n } function Kh(e, t, n, i) { return function (e, t) { var n = 1 - e; return n * n * t }(e, t) + function (e, t) { return 2 * (1 - e) * e * t }(e, n) + function (e, t) { return e * e * t }(e, i) } function Lh(e, t, n, i, r) { return function (e, t) { var n = 1 - e; return n * n * n * t }(e, t) + function (e, t) { var n = 1 - e; return 3 * n * n * e * t }(e, n) + function (e, t) { return 3 * (1 - e) * e * e * t }(e, i) + function (e, t) { return e * e * e * t }(e, r) } var zh = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new fl, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new fl, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : new fl, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : new fl; return cr(this, n), (e = t.call(this)).isCubicBezierCurve = !0, e.type = "CubicBezierCurve", e.v0 = i, e.v1 = r, e.v2 = a, e.v3 = o, e } return dr(n, [{ key: "getPoint", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new fl, n = this.v0, i = this.v1, r = this.v2, a = this.v3; return t.set(Lh(e, n.x, i.x, r.x, a.x), Lh(e, n.y, i.y, r.y, a.y)), t } }, { key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.v0.copy(e.v0), this.v1.copy(e.v1), this.v2.copy(e.v2), this.v3.copy(e.v3), this } }, { key: "toJSON", value: function () { var e = yr(hr(n.prototype), "toJSON", this).call(this); return e.v0 = this.v0.toArray(), e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e.v3 = this.v3.toArray(), e } }, { key: "fromJSON", value: function (e) { return yr(hr(n.prototype), "fromJSON", this).call(this, e), this.v0.fromArray(e.v0), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this.v3.fromArray(e.v3), this } }]), n }(xh), Eh = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new Ql, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new Ql, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : new Ql, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : new Ql; return cr(this, n), (e = t.call(this)).isCubicBezierCurve3 = !0, e.type = "CubicBezierCurve3", e.v0 = i, e.v1 = r, e.v2 = a, e.v3 = o, e } return dr(n, [{ key: "getPoint", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new Ql, n = this.v0, i = this.v1, r = this.v2, a = this.v3; return t.set(Lh(e, n.x, i.x, r.x, a.x), Lh(e, n.y, i.y, r.y, a.y), Lh(e, n.z, i.z, r.z, a.z)), t } }, { key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.v0.copy(e.v0), this.v1.copy(e.v1), this.v2.copy(e.v2), this.v3.copy(e.v3), this } }, { key: "toJSON", value: function () { var e = yr(hr(n.prototype), "toJSON", this).call(this); return e.v0 = this.v0.toArray(), e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e.v3 = this.v3.toArray(), e } }, { key: "fromJSON", value: function (e) { return yr(hr(n.prototype), "fromJSON", this).call(this, e), this.v0.fromArray(e.v0), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this.v3.fromArray(e.v3), this } }]), n }(xh), Th = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new fl, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new fl; return cr(this, n), (e = t.call(this)).isLineCurve = !0, e.type = "LineCurve", e.v1 = i, e.v2 = r, e } return dr(n, [{ key: "getPoint", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new fl; return 1 === e ? t.copy(this.v2) : (t.copy(this.v2).sub(this.v1), t.multiplyScalar(e).add(this.v1)), t } }, { key: "getPointAt", value: function (e, t) { return this.getPoint(e, t) } }, { key: "getTangent", value: function (e) { return (arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new fl).subVectors(this.v2, this.v1).normalize() } }, { key: "getTangentAt", value: function (e, t) { return this.getTangent(e, t) } }, { key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.v1.copy(e.v1), this.v2.copy(e.v2), this } }, { key: "toJSON", value: function () { var e = yr(hr(n.prototype), "toJSON", this).call(this); return e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e } }, { key: "fromJSON", value: function (e) { return yr(hr(n.prototype), "fromJSON", this).call(this, e), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this } }]), n }(xh), _h = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new Ql, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new Ql; return cr(this, n), (e = t.call(this)).isLineCurve3 = !0, e.type = "LineCurve3", e.v1 = i, e.v2 = r, e } return dr(n, [{ key: "getPoint", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new Ql; return 1 === e ? t.copy(this.v2) : (t.copy(this.v2).sub(this.v1), t.multiplyScalar(e).add(this.v1)), t } }, { key: "getPointAt", value: function (e, t) { return this.getPoint(e, t) } }, { key: "getTangent", value: function (e) { return (arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new Ql).subVectors(this.v2, this.v1).normalize() } }, { key: "getTangentAt", value: function (e, t) { return this.getTangent(e, t) } }, { key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.v1.copy(e.v1), this.v2.copy(e.v2), this } }, { key: "toJSON", value: function () { var e = yr(hr(n.prototype), "toJSON", this).call(this); return e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e } }, { key: "fromJSON", value: function (e) { return yr(hr(n.prototype), "fromJSON", this).call(this, e), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this } }]), n }(xh), Uh = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new fl, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new fl, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : new fl; return cr(this, n), (e = t.call(this)).isQuadraticBezierCurve = !0, e.type = "QuadraticBezierCurve", e.v0 = i, e.v1 = r, e.v2 = a, e } return dr(n, [{ key: "getPoint", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new fl, n = this.v0, i = this.v1, r = this.v2; return t.set(Kh(e, n.x, i.x, r.x), Kh(e, n.y, i.y, r.y)), t } }, { key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.v0.copy(e.v0), this.v1.copy(e.v1), this.v2.copy(e.v2), this } }, { key: "toJSON", value: function () { var e = yr(hr(n.prototype), "toJSON", this).call(this); return e.v0 = this.v0.toArray(), e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e } }, { key: "fromJSON", value: function (e) { return yr(hr(n.prototype), "fromJSON", this).call(this, e), this.v0.fromArray(e.v0), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this } }]), n }(xh), Dh = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new Ql, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new Ql, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : new Ql; return cr(this, n), (e = t.call(this)).isQuadraticBezierCurve3 = !0, e.type = "QuadraticBezierCurve3", e.v0 = i, e.v1 = r, e.v2 = a, e } return dr(n, [{ key: "getPoint", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new Ql, n = this.v0, i = this.v1, r = this.v2; return t.set(Kh(e, n.x, i.x, r.x), Kh(e, n.y, i.y, r.y), Kh(e, n.z, i.z, r.z)), t } }, { key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.v0.copy(e.v0), this.v1.copy(e.v1), this.v2.copy(e.v2), this } }, { key: "toJSON", value: function () { var e = yr(hr(n.prototype), "toJSON", this).call(this); return e.v0 = this.v0.toArray(), e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e } }, { key: "fromJSON", value: function (e) { return yr(hr(n.prototype), "fromJSON", this).call(this, e), this.v0.fromArray(e.v0), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this } }]), n }(xh), Ph = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : []; return cr(this, n), (e = t.call(this)).isSplineCurve = !0, e.type = "SplineCurve", e.points = i, e } return dr(n, [{ key: "getPoint", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new fl, n = this.points, i = (n.length - 1) * e, r = Math.floor(i), a = i - r, o = n[0 === r ? r : r - 1], s = n[r], l = n[r > n.length - 2 ? n.length - 1 : r + 1], g = n[r > n.length - 3 ? n.length - 1 : r + 2]; return t.set(Yh(a, o.x, s.x, l.x, g.x), Yh(a, o.y, s.y, l.y, g.y)), t } }, { key: "copy", value: function (e) { yr(hr(n.prototype), "copy", this).call(this, e), this.points = []; for (var t = 0, i = e.points.length; t < i; t++) { var r = e.points[t]; this.points.push(r.clone()) } return this } }, { key: "toJSON", value: function () { var e = yr(hr(n.prototype), "toJSON", this).call(this); e.points = []; for (var t = 0, i = this.points.length; t < i; t++) { var r = this.points[t]; e.points.push(r.toArray()) } return e } }, { key: "fromJSON", value: function (e) { yr(hr(n.prototype), "fromJSON", this).call(this, e), this.points = []; for (var t = 0, i = e.points.length; t < i; t++) { var r = e.points[t]; this.points.push((new fl).fromArray(r)) } return this } }]), n }(xh), Jh = Object.freeze({ __proto__: null, ArcCurve: Vh, CatmullRomCurve3: Xh, CubicBezierCurve: zh, CubicBezierCurve3: Eh, EllipseCurve: Wh, LineCurve: Th, LineCurve3: _h, QuadraticBezierCurve: Uh, QuadraticBezierCurve3: Dh, SplineCurve: Ph }), Oh = function (e) { Ir(n, e); var t = fr(n); function n() { var e; return cr(this, n), (e = t.call(this)).type = "CurvePath", e.curves = [], e.autoClose = !1, e } return dr(n, [{ key: "add", value: function (e) { this.curves.push(e) } }, { key: "closePath", value: function () { var e = this.curves[0].getPoint(0), t = this.curves[this.curves.length - 1].getPoint(1); if (!e.equals(t)) { var n = !0 === e.isVector2 ? "LineCurve" : "LineCurve3"; this.curves.push(new Jh[n](t, e)) } return this } }, { key: "getPoint", value: function (e, t) { for (var n = e * this.getLength(), i = this.getCurveLengths(), r = 0; r < i.length;) { if (i[r] >= n) { var a = i[r] - n, o = this.curves[r], s = o.getLength(), l = 0 === s ? 0 : 1 - a / s; return o.getPointAt(l, t) } r++ } return null } }, { key: "getLength", value: function () { var e = this.getCurveLengths(); return e[e.length - 1] } }, { key: "updateArcLengths", value: function () { this.needsUpdate = !0, this.cacheLengths = null, this.getCurveLengths() } }, { key: "getCurveLengths", value: function () { if (this.cacheLengths && this.cacheLengths.length === this.curves.length) return this.cacheLengths; for (var e = [], t = 0, n = 0, i = this.curves.length; n < i; n++)t += this.curves[n].getLength(), e.push(t); return this.cacheLengths = e, e } }, { key: "getSpacedPoints", value: function () { for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 40, t = [], n = 0; n <= e; n++)t.push(this.getPoint(n / e)); return this.autoClose && t.push(t[0]), t } }, { key: "getPoints", value: function () { for (var e, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 12, n = [], i = 0, r = this.curves; i < r.length; i++)for (var a = r[i], o = a.isEllipseCurve ? 2 * t : a.isLineCurve || a.isLineCurve3 ? 1 : a.isSplineCurve ? t * a.points.length : t, s = a.getPoints(o), l = 0; l < s.length; l++) { var g = s[l]; e && e.equals(g) || (n.push(g), e = g) } return this.autoClose && n.length > 1 && !n[n.length - 1].equals(n[0]) && n.push(n[0]), n } }, { key: "copy", value: function (e) { yr(hr(n.prototype), "copy", this).call(this, e), this.curves = []; for (var t = 0, i = e.curves.length; t < i; t++) { var r = e.curves[t]; this.curves.push(r.clone()) } return this.autoClose = e.autoClose, this } }, { key: "toJSON", value: function () { var e = yr(hr(n.prototype), "toJSON", this).call(this); e.autoClose = this.autoClose, e.curves = []; for (var t = 0, i = this.curves.length; t < i; t++) { var r = this.curves[t]; e.curves.push(r.toJSON()) } return e } }, { key: "fromJSON", value: function (e) { yr(hr(n.prototype), "fromJSON", this).call(this, e), this.autoClose = e.autoClose, this.curves = []; for (var t = 0, i = e.curves.length; t < i; t++) { var r = e.curves[t]; this.curves.push((new Jh[r.type]).fromJSON(r)) } return this } }]), n }(xh), jh = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).type = "Path", i.currentPoint = new fl, e && i.setFromPoints(e), i } return dr(n, [{ key: "setFromPoints", value: function (e) { this.moveTo(e[0].x, e[0].y); for (var t = 1, n = e.length; t < n; t++)this.lineTo(e[t].x, e[t].y); return this } }, { key: "moveTo", value: function (e, t) { return this.currentPoint.set(e, t), this } }, { key: "lineTo", value: function (e, t) { var n = new Th(this.currentPoint.clone(), new fl(e, t)); return this.curves.push(n), this.currentPoint.set(e, t), this } }, { key: "quadraticCurveTo", value: function (e, t, n, i) { var r = new Uh(this.currentPoint.clone(), new fl(e, t), new fl(n, i)); return this.curves.push(r), this.currentPoint.set(n, i), this } }, { key: "bezierCurveTo", value: function (e, t, n, i, r, a) { var o = new zh(this.currentPoint.clone(), new fl(e, t), new fl(n, i), new fl(r, a)); return this.curves.push(o), this.currentPoint.set(r, a), this } }, { key: "splineThru", value: function (e) { var t = [this.currentPoint.clone()].concat(e), n = new Ph(t); return this.curves.push(n), this.currentPoint.copy(e[e.length - 1]), this } }, { key: "arc", value: function (e, t, n, i, r, a) { var o = this.currentPoint.x, s = this.currentPoint.y; return this.absarc(e + o, t + s, n, i, r, a), this } }, { key: "absarc", value: function (e, t, n, i, r, a) { return this.absellipse(e, t, n, n, i, r, a), this } }, { key: "ellipse", value: function (e, t, n, i, r, a, o, s) { var l = this.currentPoint.x, g = this.currentPoint.y; return this.absellipse(e + l, t + g, n, i, r, a, o, s), this } }, { key: "absellipse", value: function (e, t, n, i, r, a, o, s) { var l = new Wh(e, t, n, i, r, a, o, s); if (this.curves.length > 0) { var g = l.getPoint(0); g.equals(this.currentPoint) || this.lineTo(g.x, g.y) } this.curves.push(l); var c = l.getPoint(1); return this.currentPoint.copy(c), this } }, { key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.currentPoint.copy(e.currentPoint), this } }, { key: "toJSON", value: function () { var e = yr(hr(n.prototype), "toJSON", this).call(this); return e.currentPoint = this.currentPoint.toArray(), e } }, { key: "fromJSON", value: function (e) { return yr(hr(n.prototype), "fromJSON", this).call(this, e), this.currentPoint.fromArray(e.currentPoint), this } }]), n }(Oh), Qh = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [new fl(0, -.5), new fl(.5, 0), new fl(0, .5)], r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 12, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 2 * Math.PI; cr(this, n), (e = t.call(this)).type = "LatheGeometry", e.parameters = { points: i, segments: r, phiStart: a, phiLength: o }, r = Math.floor(r), o = gl(o, 0, 2 * Math.PI); for (var s = [], l = [], g = [], c = [], u = [], C = 1 / r, d = new Ql, I = new fl, h = new Ql, A = new Ql, p = new Ql, f = 0, m = 0, v = 0; v <= i.length - 1; v++)switch (v) { case 0: f = i[v + 1].x - i[v].x, m = i[v + 1].y - i[v].y, h.x = 1 * m, h.y = -f, h.z = 0 * m, p.copy(h), h.normalize(), c.push(h.x, h.y, h.z); break; case i.length - 1: c.push(p.x, p.y, p.z); break; default: f = i[v + 1].x - i[v].x, m = i[v + 1].y - i[v].y, h.x = 1 * m, h.y = -f, h.z = 0 * m, A.copy(h), h.x += p.x, h.y += p.y, h.z += p.z, h.normalize(), c.push(h.x, h.y, h.z), p.copy(A) }for (var b = 0; b <= r; b++)for (var y = a + b * C * o, G = Math.sin(y), B = Math.cos(y), Z = 0; Z <= i.length - 1; Z++) { d.x = i[Z].x * G, d.y = i[Z].y, d.z = i[Z].x * B, l.push(d.x, d.y, d.z), I.x = b / r, I.y = Z / (i.length - 1), g.push(I.x, I.y); var w = c[3 * Z + 0] * G, S = c[3 * Z + 1], R = c[3 * Z + 0] * B; u.push(w, S, R) } for (var x = 0; x < r; x++)for (var W = 0; W < i.length - 1; W++) { var V = W + x * i.length, k = V, H = V + i.length, M = V + i.length + 1, F = V + 1; s.push(k, H, F), s.push(M, F, H) } return e.setIndex(s), e.setAttribute("position", new Nc(l, 3)), e.setAttribute("uv", new Nc(g, 2)), e.setAttribute("normal", new Nc(u, 3)), e } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.parameters = Object.assign({}, e.parameters), this } }], [{ key: "fromJSON", value: function (e) { return new n(e.points, e.segments, e.phiStart, e.phiLength) } }]), n }(Uc), qh = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 4, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 8; cr(this, n); var s = new jh; return s.absarc(0, -r / 2, i, 1.5 * Math.PI, 0), s.absarc(0, r / 2, i, 0, .5 * Math.PI), (e = t.call(this, s.getPoints(a), o)).type = "CapsuleGeometry", e.parameters = { radius: i, length: r, capSegments: a, radialSegments: o }, e } return dr(n, null, [{ key: "fromJSON", value: function (e) { return new n(e.radius, e.length, e.capSegments, e.radialSegments) } }]), n }(Qh), $h = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 32, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 2 * Math.PI; cr(this, n), (e = t.call(this)).type = "CircleGeometry", e.parameters = { radius: i, segments: r, thetaStart: a, thetaLength: o }, r = Math.max(3, r); var s = [], l = [], g = [], c = [], u = new Ql, C = new fl; l.push(0, 0, 0), g.push(0, 0, 1), c.push(.5, .5); for (var d = 0, I = 3; d <= r; d++, I += 3) { var h = a + d / r * o; u.x = i * Math.cos(h), u.y = i * Math.sin(h), l.push(u.x, u.y, u.z), g.push(0, 0, 1), C.x = (l[I] / i + 1) / 2, C.y = (l[I + 1] / i + 1) / 2, c.push(C.x, C.y) } for (var A = 1; A <= r; A++)s.push(A, A + 1, 0); return e.setIndex(s), e.setAttribute("position", new Nc(l, 3)), e.setAttribute("normal", new Nc(g, 3)), e.setAttribute("uv", new Nc(c, 2)), e } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.parameters = Object.assign({}, e.parameters), this } }], [{ key: "fromJSON", value: function (e) { return new n(e.radius, e.segments, e.thetaStart, e.thetaLength) } }]), n }(Uc), eA = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 32, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 1, l = arguments.length > 5 && void 0 !== arguments[5] && arguments[5], g = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : 0, c = arguments.length > 7 && void 0 !== arguments[7] ? arguments[7] : 2 * Math.PI; cr(this, n), (e = t.call(this)).type = "CylinderGeometry", e.parameters = { radiusTop: i, radiusBottom: r, height: a, radialSegments: o, heightSegments: s, openEnded: l, thetaStart: g, thetaLength: c }; var u = y(e); o = Math.floor(o), s = Math.floor(s); var C = [], d = [], I = [], h = [], A = 0, p = [], f = a / 2, m = 0; function v(e) { for (var t = A, n = new fl, a = new Ql, s = 0, l = !0 === e ? i : r, p = !0 === e ? 1 : -1, v = 1; v <= o; v++)d.push(0, f * p, 0), I.push(0, p, 0), h.push(.5, .5), A++; for (var b = A, y = 0; y <= o; y++) { var G = y / o * c + g, B = Math.cos(G), Z = Math.sin(G); a.x = l * Z, a.y = f * p, a.z = l * B, d.push(a.x, a.y, a.z), I.push(0, p, 0), n.x = .5 * B + .5, n.y = .5 * Z * p + .5, h.push(n.x, n.y), A++ } for (var w = 0; w < o; w++) { var S = t + w, R = b + w; !0 === e ? C.push(R, R + 1, S) : C.push(R + 1, R, S), s += 3 } u.addGroup(m, s, !0 === e ? 1 : 2), m += s } return function () { for (var e = new Ql, t = new Ql, n = 0, l = (r - i) / a, v = 0; v <= s; v++) { for (var b = [], y = v / s, G = y * (r - i) + i, B = 0; B <= o; B++) { var Z = B / o, w = Z * c + g, S = Math.sin(w), R = Math.cos(w); t.x = G * S, t.y = -y * a + f, t.z = G * R, d.push(t.x, t.y, t.z), e.set(S, l, R).normalize(), I.push(e.x, e.y, e.z), h.push(Z, 1 - y), b.push(A++) } p.push(b) } for (var x = 0; x < o; x++)for (var W = 0; W < s; W++) { var V = p[W][x], k = p[W + 1][x], H = p[W + 1][x + 1], M = p[W][x + 1]; C.push(V, k, M), C.push(k, H, M), n += 6 } u.addGroup(m, n, 0), m += n }(), !1 === l && (i > 0 && v(!0), r > 0 && v(!1)), e.setIndex(C), e.setAttribute("position", new Nc(d, 3)), e.setAttribute("normal", new Nc(I, 3)), e.setAttribute("uv", new Nc(h, 2)), e } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.parameters = Object.assign({}, e.parameters), this } }], [{ key: "fromJSON", value: function (e) { return new n(e.radiusTop, e.radiusBottom, e.height, e.radialSegments, e.heightSegments, e.openEnded, e.thetaStart, e.thetaLength) } }]), n }(Uc), tA = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 32, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1, s = arguments.length > 4 && void 0 !== arguments[4] && arguments[4], l = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 0, g = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : 2 * Math.PI; return cr(this, n), (e = t.call(this, 0, i, r, a, o, s, l, g)).type = "ConeGeometry", e.parameters = { radius: i, height: r, radialSegments: a, heightSegments: o, openEnded: s, thetaStart: l, thetaLength: g }, e } return dr(n, null, [{ key: "fromJSON", value: function (e) { return new n(e.radius, e.height, e.radialSegments, e.heightSegments, e.openEnded, e.thetaStart, e.thetaLength) } }]), n }(eA), nA = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [], a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0; cr(this, n), (e = t.call(this)).type = "PolyhedronGeometry", e.parameters = { vertices: i, indices: r, radius: a, detail: o }; var s = [], l = []; function g(e, t, n, i) { for (var r = i + 1, a = [], o = 0; o <= r; o++) { a[o] = []; for (var s = e.clone().lerp(n, o / r), l = t.clone().lerp(n, o / r), g = r - o, u = 0; u <= g; u++)a[o][u] = 0 === u && o === r ? s : s.clone().lerp(l, u / g) } for (var C = 0; C < r; C++)for (var d = 0; d < 2 * (r - C) - 1; d++) { var I = Math.floor(d / 2); d % 2 === 0 ? (c(a[C][I + 1]), c(a[C + 1][I]), c(a[C][I])) : (c(a[C][I + 1]), c(a[C + 1][I + 1]), c(a[C + 1][I])) } } function c(e) { s.push(e.x, e.y, e.z) } function u(e, t) { var n = 3 * e; t.x = i[n + 0], t.y = i[n + 1], t.z = i[n + 2] } function C(e, t, n, i) { i < 0 && 1 === e.x && (l[t] = e.x - 1), 0 === n.x && 0 === n.z && (l[t] = i / 2 / Math.PI + .5) } function d(e) { return Math.atan2(e.z, -e.x) } return function (e) { for (var t = new Ql, n = new Ql, i = new Ql, a = 0; a < r.length; a += 3)u(r[a + 0], t), u(r[a + 1], n), u(r[a + 2], i), g(t, n, i, e) }(o), function (e) { for (var t = new Ql, n = 0; n < s.length; n += 3)t.x = s[n + 0], t.y = s[n + 1], t.z = s[n + 2], t.normalize().multiplyScalar(e), s[n + 0] = t.x, s[n + 1] = t.y, s[n + 2] = t.z }(a), function () { for (var e = new Ql, t = 0; t < s.length; t += 3) { e.x = s[t + 0], e.y = s[t + 1], e.z = s[t + 2]; var n = d(e) / 2 / Math.PI + .5, i = (r = e, Math.atan2(-r.y, Math.sqrt(r.x * r.x + r.z * r.z)) / Math.PI + .5); l.push(n, 1 - i) } var r; (function () { for (var e = new Ql, t = new Ql, n = new Ql, i = new Ql, r = new fl, a = new fl, o = new fl, g = 0, c = 0; g < s.length; g += 9, c += 6) { e.set(s[g + 0], s[g + 1], s[g + 2]), t.set(s[g + 3], s[g + 4], s[g + 5]), n.set(s[g + 6], s[g + 7], s[g + 8]), r.set(l[c + 0], l[c + 1]), a.set(l[c + 2], l[c + 3]), o.set(l[c + 4], l[c + 5]), i.copy(e).add(t).add(n).divideScalar(3); var u = d(i); C(r, c + 0, e, u), C(a, c + 2, t, u), C(o, c + 4, n, u) } })(), function () { for (var e = 0; e < l.length; e += 6) { var t = l[e + 0], n = l[e + 2], i = l[e + 4], r = Math.max(t, n, i), a = Math.min(t, n, i); r > .9 && a < .1 && (t < .2 && (l[e + 0] += 1), n < .2 && (l[e + 2] += 1), i < .2 && (l[e + 4] += 1)) } }() }(), e.setAttribute("position", new Nc(s, 3)), e.setAttribute("normal", new Nc(s.slice(), 3)), e.setAttribute("uv", new Nc(l, 2)), 0 === o ? e.computeVertexNormals() : e.normalizeNormals(), e } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.parameters = Object.assign({}, e.parameters), this } }], [{ key: "fromJSON", value: function (e) { return new n(e.vertices, e.indices, e.radius, e.details) } }]), n }(Uc), iA = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; cr(this, n); var a = (1 + Math.sqrt(5)) / 2, o = 1 / a, s = [-1, -1, -1, -1, -1, 1, -1, 1, -1, -1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1, -1, 1, 1, 1, 0, -o, -a, 0, -o, a, 0, o, -a, 0, o, a, -o, -a, 0, -o, a, 0, o, -a, 0, o, a, 0, -a, 0, -o, a, 0, -o, -a, 0, o, a, 0, o]; return (e = t.call(this, s, [3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4, 8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0, 1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18, 3, 2, 3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5, 11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1, 12, 14, 1, 14, 5, 1, 5, 9], i, r)).type = "DodecahedronGeometry", e.parameters = { radius: i, detail: r }, e } return dr(n, null, [{ key: "fromJSON", value: function (e) { return new n(e.radius, e.detail) } }]), n }(nA), rA = new Ql, aA = new Ql, oA = new Ql, sA = new cc, lA = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; if (cr(this, n), (e = t.call(this)).type = "EdgesGeometry", e.parameters = { geometry: i, thresholdAngle: r }, null !== i) { for (var a = Math.pow(10, 4), o = Math.cos(ol * r), s = i.getIndex(), l = i.getAttribute("position"), g = s ? s.count : l.count, c = [0, 0, 0], u = ["a", "b", "c"], C = new Array(3), d = {}, I = [], h = 0; h < g; h += 3) { s ? (c[0] = s.getX(h), c[1] = s.getX(h + 1), c[2] = s.getX(h + 2)) : (c[0] = h, c[1] = h + 1, c[2] = h + 2); var A = sA.a, p = sA.b, f = sA.c; if (A.fromBufferAttribute(l, c[0]), p.fromBufferAttribute(l, c[1]), f.fromBufferAttribute(l, c[2]), sA.getNormal(oA), C[0] = "".concat(Math.round(A.x * a), ",").concat(Math.round(A.y * a), ",").concat(Math.round(A.z * a)), C[1] = "".concat(Math.round(p.x * a), ",").concat(Math.round(p.y * a), ",").concat(Math.round(p.z * a)), C[2] = "".concat(Math.round(f.x * a), ",").concat(Math.round(f.y * a), ",").concat(Math.round(f.z * a)), C[0] !== C[1] && C[1] !== C[2] && C[2] !== C[0]) for (var m = 0; m < 3; m++) { var v = (m + 1) % 3, b = C[m], y = C[v], G = sA[u[m]], B = sA[u[v]], Z = "".concat(b, "_").concat(y), w = "".concat(y, "_").concat(b); w in d && d[w] ? (oA.dot(d[w].normal) <= o && (I.push(G.x, G.y, G.z), I.push(B.x, B.y, B.z)), d[w] = null) : Z in d || (d[Z] = { index0: c[m], index1: c[v], normal: oA.clone() }) } } for (var S in d) if (d[S]) { var R = d[S], x = R.index0, W = R.index1; rA.fromBufferAttribute(l, x), aA.fromBufferAttribute(l, W), I.push(rA.x, rA.y, rA.z), I.push(aA.x, aA.y, aA.z) } e.setAttribute("position", new Nc(I, 3)) } return e } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.parameters = Object.assign({}, e.parameters), this } }]), n }(Uc), gA = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this, e)).uuid = ll(), i.type = "Shape", i.holes = [], i } return dr(n, [{ key: "getPointsHoles", value: function (e) { for (var t = [], n = 0, i = this.holes.length; n < i; n++)t[n] = this.holes[n].getPoints(e); return t } }, { key: "extractPoints", value: function (e) { return { shape: this.getPoints(e), holes: this.getPointsHoles(e) } } }, { key: "copy", value: function (e) { yr(hr(n.prototype), "copy", this).call(this, e), this.holes = []; for (var t = 0, i = e.holes.length; t < i; t++) { var r = e.holes[t]; this.holes.push(r.clone()) } return this } }, { key: "toJSON", value: function () { var e = yr(hr(n.prototype), "toJSON", this).call(this); e.uuid = this.uuid, e.holes = []; for (var t = 0, i = this.holes.length; t < i; t++) { var r = this.holes[t]; e.holes.push(r.toJSON()) } return e } }, { key: "fromJSON", value: function (e) { yr(hr(n.prototype), "fromJSON", this).call(this, e), this.uuid = e.uuid, this.holes = []; for (var t = 0, i = e.holes.length; t < i; t++) { var r = e.holes[t]; this.holes.push((new jh).fromJSON(r)) } return this } }]), n }(jh), cA = function (e, t) { var n, i, r, a, o, s, l, g = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 2, c = t && t.length, u = c ? t[0] * g : e.length, C = uA(e, 0, u, g, !0), d = []; if (!C || C.next === C.prev) return d; if (c && (C = function (e, t, n, i) { var r, a, o, s = []; for (r = 0, a = t.length; r < a; r++)(o = uA(e, t[r] * i, r < a - 1 ? t[r + 1] * i : e.length, i, !1)) === o.next && (o.steiner = !0), s.push(yA(o)); for (s.sort(fA), r = 0; r < s.length; r++)n = mA(s[r], n); return n }(e, t, C, g)), e.length > 80 * g) { n = r = e[0], i = a = e[1]; for (var I = g; I < u; I += g)(o = e[I]) < n && (n = o), (s = e[I + 1]) < i && (i = s), o > r && (r = o), s > a && (a = s); l = 0 !== (l = Math.max(r - n, a - i)) ? 32767 / l : 0 } return dA(C, d, g, n, i, l, 0), d }; function uA(e, t, n, i, r) { var a, o; if (r === function (e, t, n, i) { for (var r = 0, a = t, o = n - i; a < n; a += i)r += (e[o] - e[a]) * (e[a + 1] + e[o + 1]), o = a; return r }(e, t, n, i) > 0) for (a = t; a < n; a += i)o = kA(a, e[a], e[a + 1], o); else for (a = n - i; a >= t; a -= i)o = kA(a, e[a], e[a + 1], o); return o && wA(o, o.next) && (HA(o), o = o.next), o } function CA(e, t) { if (!e) return e; t || (t = e); var n, i = e; do { if (n = !1, i.steiner || !wA(i, i.next) && 0 !== ZA(i.prev, i, i.next)) i = i.next; else { if (HA(i), (i = t = i.prev) === i.next) break; n = !0 } } while (n || i !== t); return t } function dA(e, t, n, i, r, a, o) { if (e) { !o && a && function (e, t, n, i) { var r = e; do { 0 === r.z && (r.z = bA(r.x, r.y, t, n, i)), r.prevZ = r.prev, r.nextZ = r.next, r = r.next } while (r !== e); r.prevZ.nextZ = null, r.prevZ = null, function (e) { var t, n, i, r, a, o, s, l, g = 1; do { for (n = e, e = null, a = null, o = 0; n;) { for (o++, i = n, s = 0, t = 0; t < g && (s++, i = i.nextZ); t++); for (l = g; s > 0 || l > 0 && i;)0 !== s && (0 === l || !i || n.z <= i.z) ? (r = n, n = n.nextZ, s--) : (r = i, i = i.nextZ, l--), a ? a.nextZ = r : e = r, r.prevZ = a, a = r; n = i } a.nextZ = null, g *= 2 } while (o > 1) }(r) }(e, i, r, a); for (var s, l, g = e; e.prev !== e.next;)if (s = e.prev, l = e.next, a ? hA(e, i, r, a) : IA(e)) t.push(s.i / n | 0), t.push(e.i / n | 0), t.push(l.i / n | 0), HA(e), e = l.next, g = l.next; else if ((e = l) === g) { o ? 1 === o ? dA(e = AA(CA(e), t, n), t, n, i, r, a, 2) : 2 === o && pA(e, t, n, i, r, a) : dA(CA(e), t, n, i, r, a, 1); break } } } function IA(e) { var t = e.prev, n = e, i = e.next; if (ZA(t, n, i) >= 0) return !1; for (var r = t.x, a = n.x, o = i.x, s = t.y, l = n.y, g = i.y, c = r < a ? r < o ? r : o : a < o ? a : o, u = s < l ? s < g ? s : g : l < g ? l : g, C = r > a ? r > o ? r : o : a > o ? a : o, d = s > l ? s > g ? s : g : l > g ? l : g, I = i.next; I !== t;) { if (I.x >= c && I.x <= C && I.y >= u && I.y <= d && GA(r, s, a, l, o, g, I.x, I.y) && ZA(I.prev, I, I.next) >= 0) return !1; I = I.next } return !0 } function hA(e, t, n, i) { var r = e.prev, a = e, o = e.next; if (ZA(r, a, o) >= 0) return !1; for (var s = r.x, l = a.x, g = o.x, c = r.y, u = a.y, C = o.y, d = s < l ? s < g ? s : g : l < g ? l : g, I = c < u ? c < C ? c : C : u < C ? u : C, h = s > l ? s > g ? s : g : l > g ? l : g, A = c > u ? c > C ? c : C : u > C ? u : C, p = bA(d, I, t, n, i), f = bA(h, A, t, n, i), m = e.prevZ, v = e.nextZ; m && m.z >= p && v && v.z <= f;) { if (m.x >= d && m.x <= h && m.y >= I && m.y <= A && m !== r && m !== o && GA(s, c, l, u, g, C, m.x, m.y) && ZA(m.prev, m, m.next) >= 0) return !1; if (m = m.prevZ, v.x >= d && v.x <= h && v.y >= I && v.y <= A && v !== r && v !== o && GA(s, c, l, u, g, C, v.x, v.y) && ZA(v.prev, v, v.next) >= 0) return !1; v = v.nextZ } for (; m && m.z >= p;) { if (m.x >= d && m.x <= h && m.y >= I && m.y <= A && m !== r && m !== o && GA(s, c, l, u, g, C, m.x, m.y) && ZA(m.prev, m, m.next) >= 0) return !1; m = m.prevZ } for (; v && v.z <= f;) { if (v.x >= d && v.x <= h && v.y >= I && v.y <= A && v !== r && v !== o && GA(s, c, l, u, g, C, v.x, v.y) && ZA(v.prev, v, v.next) >= 0) return !1; v = v.nextZ } return !0 } function AA(e, t, n) { var i = e; do { var r = i.prev, a = i.next.next; !wA(r, a) && SA(r, i, i.next, a) && WA(r, a) && WA(a, r) && (t.push(r.i / n | 0), t.push(i.i / n | 0), t.push(a.i / n | 0), HA(i), HA(i.next), i = e = a), i = i.next } while (i !== e); return CA(i) } function pA(e, t, n, i, r, a) { var o = e; do { for (var s = o.next.next; s !== o.prev;) { if (o.i !== s.i && BA(o, s)) { var l = VA(o, s); return o = CA(o, o.next), l = CA(l, l.next), dA(o, t, n, i, r, a, 0), void dA(l, t, n, i, r, a, 0) } s = s.next } o = o.next } while (o !== e) } function fA(e, t) { return e.x - t.x } function mA(e, t) { var n = function (e, t) { var n, i = t, r = -1 / 0, a = e.x, o = e.y; do { if (o <= i.y && o >= i.next.y && i.next.y !== i.y) { var s = i.x + (o - i.y) * (i.next.x - i.x) / (i.next.y - i.y); if (s <= a && s > r && (r = s, n = i.x < i.next.x ? i : i.next, s === a)) return n } i = i.next } while (i !== t); if (!n) return null; var l, g = n, c = n.x, u = n.y, C = 1 / 0; i = n; do { a >= i.x && i.x >= c && a !== i.x && GA(o < u ? a : r, o, c, u, o < u ? r : a, o, i.x, i.y) && (l = Math.abs(o - i.y) / (a - i.x), WA(i, e) && (l < C || l === C && (i.x > n.x || i.x === n.x && vA(n, i))) && (n = i, C = l)), i = i.next } while (i !== g); return n }(e, t); if (!n) return t; var i = VA(n, e); return CA(i, i.next), CA(n, n.next) } function vA(e, t) { return ZA(e.prev, e, t.prev) < 0 && ZA(t.next, e, e.next) < 0 } function bA(e, t, n, i, r) { return (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = (e - n) * r | 0) | e << 8)) | e << 4)) | e << 2)) | e << 1)) | (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = (t - i) * r | 0) | t << 8)) | t << 4)) | t << 2)) | t << 1)) << 1 } function yA(e) { var t = e, n = e; do { (t.x < n.x || t.x === n.x && t.y < n.y) && (n = t), t = t.next } while (t !== e); return n } function GA(e, t, n, i, r, a, o, s) { return (r - o) * (t - s) >= (e - o) * (a - s) && (e - o) * (i - s) >= (n - o) * (t - s) && (n - o) * (a - s) >= (r - o) * (i - s) } function BA(e, t) { return e.next.i !== t.i && e.prev.i !== t.i && !function (e, t) { var n = e; do { if (n.i !== e.i && n.next.i !== e.i && n.i !== t.i && n.next.i !== t.i && SA(n, n.next, e, t)) return !0; n = n.next } while (n !== e); return !1 }(e, t) && (WA(e, t) && WA(t, e) && function (e, t) { var n = e, i = !1, r = (e.x + t.x) / 2, a = (e.y + t.y) / 2; do { n.y > a !== n.next.y > a && n.next.y !== n.y && r < (n.next.x - n.x) * (a - n.y) / (n.next.y - n.y) + n.x && (i = !i), n = n.next } while (n !== e); return i }(e, t) && (ZA(e.prev, e, t.prev) || ZA(e, t.prev, t)) || wA(e, t) && ZA(e.prev, e, e.next) > 0 && ZA(t.prev, t, t.next) > 0) } function ZA(e, t, n) { return (t.y - e.y) * (n.x - t.x) - (t.x - e.x) * (n.y - t.y) } function wA(e, t) { return e.x === t.x && e.y === t.y } function SA(e, t, n, i) { var r = xA(ZA(e, t, n)), a = xA(ZA(e, t, i)), o = xA(ZA(n, i, e)), s = xA(ZA(n, i, t)); return r !== a && o !== s || (!(0 !== r || !RA(e, n, t)) || (!(0 !== a || !RA(e, i, t)) || (!(0 !== o || !RA(n, e, i)) || !(0 !== s || !RA(n, t, i))))) } function RA(e, t, n) { return t.x <= Math.max(e.x, n.x) && t.x >= Math.min(e.x, n.x) && t.y <= Math.max(e.y, n.y) && t.y >= Math.min(e.y, n.y) } function xA(e) { return e > 0 ? 1 : e < 0 ? -1 : 0 } function WA(e, t) { return ZA(e.prev, e, e.next) < 0 ? ZA(e, t, e.next) >= 0 && ZA(e, e.prev, t) >= 0 : ZA(e, t, e.prev) < 0 || ZA(e, e.next, t) < 0 } function VA(e, t) { var n = new MA(e.i, e.x, e.y), i = new MA(t.i, t.x, t.y), r = e.next, a = t.prev; return e.next = t, t.prev = e, n.next = r, r.prev = n, i.next = n, n.prev = i, a.next = i, i.prev = a, i } function kA(e, t, n, i) { var r = new MA(e, t, n); return i ? (r.next = i.next, r.prev = i, i.next.prev = r, i.next = r) : (r.prev = r, r.next = r), r } function HA(e) { e.next.prev = e.prev, e.prev.next = e.next, e.prevZ && (e.prevZ.nextZ = e.nextZ), e.nextZ && (e.nextZ.prevZ = e.prevZ) } function MA(e, t, n) { this.i = e, this.x = t, this.y = n, this.prev = null, this.next = null, this.z = 0, this.prevZ = null, this.nextZ = null, this.steiner = !1 } var FA = function () { function e() { cr(this, e) } return dr(e, null, [{ key: "area", value: function (e) { for (var t = e.length, n = 0, i = t - 1, r = 0; r < t; i = r++)n += e[i].x * e[r].y - e[r].x * e[i].y; return .5 * n } }, { key: "isClockWise", value: function (t) { return e.area(t) < 0 } }, { key: "triangulateShape", value: function (e, t) { var n = [], i = [], r = []; NA(e), XA(n, e); var a = e.length; t.forEach(NA); for (var o = 0; o < t.length; o++)i.push(a), a += t[o].length, XA(n, t[o]); for (var s = cA(n, i), l = 0; l < s.length; l += 3)r.push(s.slice(l, l + 3)); return r } }]), e }(); function NA(e) { var t = e.length; t > 2 && e[t - 1].equals(e[0]) && e.pop() } function XA(e, t) { for (var n = 0; n < t.length; n++)e.push(t[n].x), e.push(t[n].y) } var YA = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new gA([new fl(.5, .5), new fl(-.5, .5), new fl(-.5, -.5), new fl(.5, -.5)]), r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; cr(this, n), (e = t.call(this)).type = "ExtrudeGeometry", e.parameters = { shapes: i, options: r }, i = Array.isArray(i) ? i : [i]; for (var a = y(e), o = [], s = [], l = 0, g = i.length; l < g; l++) { c(i[l]) } function c(e) { var t, n, i, l, g, c = [], u = void 0 !== r.curveSegments ? r.curveSegments : 12, C = void 0 !== r.steps ? r.steps : 1, d = void 0 !== r.depth ? r.depth : 1, I = void 0 === r.bevelEnabled || r.bevelEnabled, h = void 0 !== r.bevelThickness ? r.bevelThickness : .2, A = void 0 !== r.bevelSize ? r.bevelSize : h - .1, p = void 0 !== r.bevelOffset ? r.bevelOffset : 0, f = void 0 !== r.bevelSegments ? r.bevelSegments : 3, m = r.extrudePath, v = void 0 !== r.UVGenerator ? r.UVGenerator : KA, b = !1; m && (t = m.getSpacedPoints(C), b = !0, I = !1, n = m.computeFrenetFrames(C, !1), i = new Ql, l = new Ql, g = new Ql), I || (f = 0, h = 0, A = 0, p = 0); var y = e.extractPoints(u), G = y.shape, B = y.holes; if (!FA.isClockWise(G)) { G = G.reverse(); for (var Z = 0, w = B.length; Z < w; Z++) { var S = B[Z]; FA.isClockWise(S) && (B[Z] = S.reverse()) } } for (var R = FA.triangulateShape(G, B), x = G, W = 0, V = B.length; W < V; W++) { var k = B[W]; G = G.concat(k) } function H(e, t, n) { return t || console.error("THREE.ExtrudeGeometry: vec does not exist"), e.clone().addScaledVector(t, n) } var M = G.length, F = R.length; function N(e, t, n) { var i, r, a, o = e.x - t.x, s = e.y - t.y, l = n.x - e.x, g = n.y - e.y, c = o * o + s * s, u = o * g - s * l; if (Math.abs(u) > Number.EPSILON) { var C = Math.sqrt(c), d = Math.sqrt(l * l + g * g), I = t.x - s / C, h = t.y + o / C, A = ((n.x - g / d - I) * g - (n.y + l / d - h) * l) / (o * g - s * l), p = (i = I + o * A - e.x) * i + (r = h + s * A - e.y) * r; if (p <= 2) return new fl(i, r); a = Math.sqrt(p / 2) } else { var f = !1; o > Number.EPSILON ? l > Number.EPSILON && (f = !0) : o < -Number.EPSILON ? l < -Number.EPSILON && (f = !0) : Math.sign(s) === Math.sign(g) && (f = !0), f ? (i = -s, r = o, a = Math.sqrt(c)) : (i = o, r = s, a = Math.sqrt(c / 2)) } return new fl(i / a, r / a) } for (var X = [], Y = 0, K = x.length, L = K - 1, z = Y + 1; Y < K; Y++, L++, z++)L === K && (L = 0), z === K && (z = 0), X[Y] = N(x[Y], x[L], x[z]); for (var E, T = [], _ = X.concat(), U = 0, D = B.length; U < D; U++) { var P = B[U]; E = []; for (var J = 0, O = P.length, j = O - 1, Q = J + 1; J < O; J++, j++, Q++)j === O && (j = 0), Q === O && (Q = 0), E[J] = N(P[J], P[j], P[Q]); T.push(E), _ = _.concat(E) } for (var q = 0; q < f; q++) { for (var $ = q / f, ee = h * Math.cos($ * Math.PI / 2), te = A * Math.sin($ * Math.PI / 2) + p, ne = 0, ie = x.length; ne < ie; ne++) { var re = H(x[ne], X[ne], te); Ve(re.x, re.y, -ee) } for (var ae = 0, oe = B.length; ae < oe; ae++) { var se = B[ae]; E = T[ae]; for (var le = 0, ge = se.length; le < ge; le++) { var ce = H(se[le], E[le], te); Ve(ce.x, ce.y, -ee) } } } for (var ue = A + p, Ce = 0; Ce < M; Ce++) { var de = I ? H(G[Ce], _[Ce], ue) : G[Ce]; b ? (l.copy(n.normals[0]).multiplyScalar(de.x), i.copy(n.binormals[0]).multiplyScalar(de.y), g.copy(t[0]).add(l).add(i), Ve(g.x, g.y, g.z)) : Ve(de.x, de.y, 0) } for (var Ie = 1; Ie <= C; Ie++)for (var he = 0; he < M; he++) { var Ae = I ? H(G[he], _[he], ue) : G[he]; b ? (l.copy(n.normals[Ie]).multiplyScalar(Ae.x), i.copy(n.binormals[Ie]).multiplyScalar(Ae.y), g.copy(t[Ie]).add(l).add(i), Ve(g.x, g.y, g.z)) : Ve(Ae.x, Ae.y, d / C * Ie) } for (var pe = f - 1; pe >= 0; pe--) { for (var fe = pe / f, me = h * Math.cos(fe * Math.PI / 2), ve = A * Math.sin(fe * Math.PI / 2) + p, be = 0, ye = x.length; be < ye; be++) { var Ge = H(x[be], X[be], ve); Ve(Ge.x, Ge.y, d + me) } for (var Be = 0, Ze = B.length; Be < Ze; Be++) { var we = B[Be]; E = T[Be]; for (var Se = 0, Re = we.length; Se < Re; Se++) { var xe = H(we[Se], E[Se], ve); b ? Ve(xe.x, xe.y + t[C - 1].y, t[C - 1].x + me) : Ve(xe.x, xe.y, d + me) } } } function We(e, t) { for (var n = e.length; --n >= 0;) { var i = n, r = n - 1; r < 0 && (r = e.length - 1); for (var a = 0, o = C + 2 * f; a < o; a++) { var s = M * a, l = M * (a + 1); He(t + i + s, t + r + s, t + r + l, t + i + l) } } } function Ve(e, t, n) { c.push(e), c.push(t), c.push(n) } function ke(e, t, n) { Me(e), Me(t), Me(n); var i = o.length / 3, r = v.generateTopUV(a, o, i - 3, i - 2, i - 1); Fe(r[0]), Fe(r[1]), Fe(r[2]) } function He(e, t, n, i) { Me(e), Me(t), Me(i), Me(t), Me(n), Me(i); var r = o.length / 3, s = v.generateSideWallUV(a, o, r - 6, r - 3, r - 2, r - 1); Fe(s[0]), Fe(s[1]), Fe(s[3]), Fe(s[1]), Fe(s[2]), Fe(s[3]) } function Me(e) { o.push(c[3 * e + 0]), o.push(c[3 * e + 1]), o.push(c[3 * e + 2]) } function Fe(e) { s.push(e.x), s.push(e.y) } !function () { var e = o.length / 3; if (I) { for (var t = 0, n = M * t, i = 0; i < F; i++) { var r = R[i]; ke(r[2] + n, r[1] + n, r[0] + n) } n = M * (t = C + 2 * f); for (var s = 0; s < F; s++) { var l = R[s]; ke(l[0] + n, l[1] + n, l[2] + n) } } else { for (var g = 0; g < F; g++) { var c = R[g]; ke(c[2], c[1], c[0]) } for (var u = 0; u < F; u++) { var d = R[u]; ke(d[0] + M * C, d[1] + M * C, d[2] + M * C) } } a.addGroup(e, o.length / 3 - e, 0) }(), function () { var e = o.length / 3, t = 0; We(x, t), t += x.length; for (var n = 0, i = B.length; n < i; n++) { var r = B[n]; We(r, t), t += r.length } a.addGroup(e, o.length / 3 - e, 1) }() } return e.setAttribute("position", new Nc(o, 3)), e.setAttribute("uv", new Nc(s, 2)), e.computeVertexNormals(), e } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.parameters = Object.assign({}, e.parameters), this } }, { key: "toJSON", value: function () { var e = yr(hr(n.prototype), "toJSON", this).call(this); return function (e, t, n) { if (n.shapes = [], Array.isArray(e)) for (var i = 0, r = e.length; i < r; i++) { var a = e[i]; n.shapes.push(a.uuid) } else n.shapes.push(e.uuid); n.options = Object.assign({}, t), void 0 !== t.extrudePath && (n.options.extrudePath = t.extrudePath.toJSON()); return n }(this.parameters.shapes, this.parameters.options, e) } }], [{ key: "fromJSON", value: function (e, t) { for (var i = [], r = 0, a = e.shapes.length; r < a; r++) { var o = t[e.shapes[r]]; i.push(o) } var s = e.options.extrudePath; return void 0 !== s && (e.options.extrudePath = (new Jh[s.type]).fromJSON(s)), new n(i, e.options) } }]), n }(Uc), KA = { generateTopUV: function (e, t, n, i, r) { var a = t[3 * n], o = t[3 * n + 1], s = t[3 * i], l = t[3 * i + 1], g = t[3 * r], c = t[3 * r + 1]; return [new fl(a, o), new fl(s, l), new fl(g, c)] }, generateSideWallUV: function (e, t, n, i, r, a) { var o = t[3 * n], s = t[3 * n + 1], l = t[3 * n + 2], g = t[3 * i], c = t[3 * i + 1], u = t[3 * i + 2], C = t[3 * r], d = t[3 * r + 1], I = t[3 * r + 2], h = t[3 * a], A = t[3 * a + 1], p = t[3 * a + 2]; return Math.abs(s - c) < Math.abs(o - g) ? [new fl(o, 1 - l), new fl(g, 1 - u), new fl(C, 1 - I), new fl(h, 1 - p)] : [new fl(s, 1 - l), new fl(c, 1 - u), new fl(d, 1 - I), new fl(A, 1 - p)] } }; var LA = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; cr(this, n); var a = (1 + Math.sqrt(5)) / 2, o = [-1, a, 0, 1, a, 0, -1, -a, 0, 1, -a, 0, 0, -1, a, 0, 1, a, 0, -1, -a, 0, 1, -a, a, 0, -1, a, 0, 1, -a, 0, -1, -a, 0, 1]; return (e = t.call(this, o, [0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1], i, r)).type = "IcosahedronGeometry", e.parameters = { radius: i, detail: r }, e } return dr(n, null, [{ key: "fromJSON", value: function (e) { return new n(e.radius, e.detail) } }]), n }(nA), zA = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; cr(this, n); return (e = t.call(this, [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1], [0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4, 2], i, r)).type = "OctahedronGeometry", e.parameters = { radius: i, detail: r }, e } return dr(n, null, [{ key: "fromJSON", value: function (e) { return new n(e.radius, e.detail) } }]), n }(nA), EA = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : .5, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 32, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0, l = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 2 * Math.PI; cr(this, n), (e = t.call(this)).type = "RingGeometry", e.parameters = { innerRadius: i, outerRadius: r, thetaSegments: a, phiSegments: o, thetaStart: s, thetaLength: l }, a = Math.max(3, a); for (var g = [], c = [], u = [], C = [], d = i, I = (r - i) / (o = Math.max(1, o)), h = new Ql, A = new fl, p = 0; p <= o; p++) { for (var f = 0; f <= a; f++) { var m = s + f / a * l; h.x = d * Math.cos(m), h.y = d * Math.sin(m), c.push(h.x, h.y, h.z), u.push(0, 0, 1), A.x = (h.x / r + 1) / 2, A.y = (h.y / r + 1) / 2, C.push(A.x, A.y) } d += I } for (var v = 0; v < o; v++)for (var b = v * (a + 1), y = 0; y < a; y++) { var G = y + b, B = G, Z = G + a + 1, w = G + a + 2, S = G + 1; g.push(B, Z, S), g.push(Z, w, S) } return e.setIndex(g), e.setAttribute("position", new Nc(c, 3)), e.setAttribute("normal", new Nc(u, 3)), e.setAttribute("uv", new Nc(C, 2)), e } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.parameters = Object.assign({}, e.parameters), this } }], [{ key: "fromJSON", value: function (e) { return new n(e.innerRadius, e.outerRadius, e.thetaSegments, e.phiSegments, e.thetaStart, e.thetaLength) } }]), n }(Uc), TA = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new gA([new fl(0, .5), new fl(-.5, -.5), new fl(.5, -.5)]), r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 12; cr(this, n), (e = t.call(this)).type = "ShapeGeometry", e.parameters = { shapes: i, curveSegments: r }; var a = [], o = [], s = [], l = [], g = 0, c = 0; if (!1 === Array.isArray(i)) C(i); else for (var u = 0; u < i.length; u++)C(i[u]), e.addGroup(g, c, u), g += c, c = 0; function C(e) { var t = o.length / 3, n = e.extractPoints(r), i = n.shape, g = n.holes; !1 === FA.isClockWise(i) && (i = i.reverse()); for (var u = 0, C = g.length; u < C; u++) { var d = g[u]; !0 === FA.isClockWise(d) && (g[u] = d.reverse()) } for (var I = FA.triangulateShape(i, g), h = 0, A = g.length; h < A; h++) { var p = g[h]; i = i.concat(p) } for (var f = 0, m = i.length; f < m; f++) { var v = i[f]; o.push(v.x, v.y, 0), s.push(0, 0, 1), l.push(v.x, v.y) } for (var b = 0, y = I.length; b < y; b++) { var G = I[b], B = G[0] + t, Z = G[1] + t, w = G[2] + t; a.push(B, Z, w), c += 3 } } return e.setIndex(a), e.setAttribute("position", new Nc(o, 3)), e.setAttribute("normal", new Nc(s, 3)), e.setAttribute("uv", new Nc(l, 2)), e } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.parameters = Object.assign({}, e.parameters), this } }, { key: "toJSON", value: function () { var e = yr(hr(n.prototype), "toJSON", this).call(this); return function (e, t) { if (t.shapes = [], Array.isArray(e)) for (var n = 0, i = e.length; n < i; n++) { var r = e[n]; t.shapes.push(r.uuid) } else t.shapes.push(e.uuid); return t }(this.parameters.shapes, e) } }], [{ key: "fromJSON", value: function (e, t) { for (var i = [], r = 0, a = e.shapes.length; r < a; r++) { var o = t[e.shapes[r]]; i.push(o) } return new n(i, e.curveSegments) } }]), n }(Uc); var _A = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 32, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 16, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 2 * Math.PI, l = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 0, g = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : Math.PI; cr(this, n), (e = t.call(this)).type = "SphereGeometry", e.parameters = { radius: i, widthSegments: r, heightSegments: a, phiStart: o, phiLength: s, thetaStart: l, thetaLength: g }, r = Math.max(3, Math.floor(r)), a = Math.max(2, Math.floor(a)); for (var c = Math.min(l + g, Math.PI), u = 0, C = [], d = new Ql, I = new Ql, h = [], A = [], p = [], f = [], m = 0; m <= a; m++) { var v = [], b = m / a, y = 0; 0 === m && 0 === l ? y = .5 / r : m === a && c === Math.PI && (y = -.5 / r); for (var G = 0; G <= r; G++) { var B = G / r; d.x = -i * Math.cos(o + B * s) * Math.sin(l + b * g), d.y = i * Math.cos(l + b * g), d.z = i * Math.sin(o + B * s) * Math.sin(l + b * g), A.push(d.x, d.y, d.z), I.copy(d).normalize(), p.push(I.x, I.y, I.z), f.push(B + y, 1 - b), v.push(u++) } C.push(v) } for (var Z = 0; Z < a; Z++)for (var w = 0; w < r; w++) { var S = C[Z][w + 1], R = C[Z][w], x = C[Z + 1][w], W = C[Z + 1][w + 1]; (0 !== Z || l > 0) && h.push(S, R, W), (Z !== a - 1 || c < Math.PI) && h.push(R, x, W) } return e.setIndex(h), e.setAttribute("position", new Nc(A, 3)), e.setAttribute("normal", new Nc(p, 3)), e.setAttribute("uv", new Nc(f, 2)), e } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.parameters = Object.assign({}, e.parameters), this } }], [{ key: "fromJSON", value: function (e) { return new n(e.radius, e.widthSegments, e.heightSegments, e.phiStart, e.phiLength, e.thetaStart, e.thetaLength) } }]), n }(Uc), UA = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; cr(this, n); return (e = t.call(this, [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1], [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1], i, r)).type = "TetrahedronGeometry", e.parameters = { radius: i, detail: r }, e } return dr(n, null, [{ key: "fromJSON", value: function (e) { return new n(e.radius, e.detail) } }]), n }(nA), DA = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : .4, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 12, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 48, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 2 * Math.PI; cr(this, n), (e = t.call(this)).type = "TorusGeometry", e.parameters = { radius: i, tube: r, radialSegments: a, tubularSegments: o, arc: s }, a = Math.floor(a), o = Math.floor(o); for (var l = [], g = [], c = [], u = [], C = new Ql, d = new Ql, I = new Ql, h = 0; h <= a; h++)for (var A = 0; A <= o; A++) { var p = A / o * s, f = h / a * Math.PI * 2; d.x = (i + r * Math.cos(f)) * Math.cos(p), d.y = (i + r * Math.cos(f)) * Math.sin(p), d.z = r * Math.sin(f), g.push(d.x, d.y, d.z), C.x = i * Math.cos(p), C.y = i * Math.sin(p), I.subVectors(d, C).normalize(), c.push(I.x, I.y, I.z), u.push(A / o), u.push(h / a) } for (var m = 1; m <= a; m++)for (var v = 1; v <= o; v++) { var b = (o + 1) * m + v - 1, y = (o + 1) * (m - 1) + v - 1, G = (o + 1) * (m - 1) + v, B = (o + 1) * m + v; l.push(b, y, B), l.push(y, G, B) } return e.setIndex(l), e.setAttribute("position", new Nc(g, 3)), e.setAttribute("normal", new Nc(c, 3)), e.setAttribute("uv", new Nc(u, 2)), e } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.parameters = Object.assign({}, e.parameters), this } }], [{ key: "fromJSON", value: function (e) { return new n(e.radius, e.tube, e.radialSegments, e.tubularSegments, e.arc) } }]), n }(Uc), PA = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : .4, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 64, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 8, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 2, l = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 3; cr(this, n), (e = t.call(this)).type = "TorusKnotGeometry", e.parameters = { radius: i, tube: r, tubularSegments: a, radialSegments: o, p: s, q: l }, a = Math.floor(a), o = Math.floor(o); for (var g = [], c = [], u = [], C = [], d = new Ql, I = new Ql, h = new Ql, A = new Ql, p = new Ql, f = new Ql, m = new Ql, v = 0; v <= a; ++v) { var b = v / a * s * Math.PI * 2; k(b, s, l, i, h), k(b + .01, s, l, i, A), f.subVectors(A, h), m.addVectors(A, h), p.crossVectors(f, m), m.crossVectors(p, f), p.normalize(), m.normalize(); for (var y = 0; y <= o; ++y) { var G = y / o * Math.PI * 2, B = -r * Math.cos(G), Z = r * Math.sin(G); d.x = h.x + (B * m.x + Z * p.x), d.y = h.y + (B * m.y + Z * p.y), d.z = h.z + (B * m.z + Z * p.z), c.push(d.x, d.y, d.z), I.subVectors(d, h).normalize(), u.push(I.x, I.y, I.z), C.push(v / a), C.push(y / o) } } for (var w = 1; w <= a; w++)for (var S = 1; S <= o; S++) { var R = (o + 1) * (w - 1) + (S - 1), x = (o + 1) * w + (S - 1), W = (o + 1) * w + S, V = (o + 1) * (w - 1) + S; g.push(R, x, V), g.push(x, W, V) } function k(e, t, n, i, r) { var a = Math.cos(e), o = Math.sin(e), s = n / t * e, l = Math.cos(s); r.x = i * (2 + l) * .5 * a, r.y = i * (2 + l) * o * .5, r.z = i * Math.sin(s) * .5 } return e.setIndex(g), e.setAttribute("position", new Nc(c, 3)), e.setAttribute("normal", new Nc(u, 3)), e.setAttribute("uv", new Nc(C, 2)), e } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.parameters = Object.assign({}, e.parameters), this } }], [{ key: "fromJSON", value: function (e) { return new n(e.radius, e.tube, e.tubularSegments, e.radialSegments, e.p, e.q) } }]), n }(Uc), JA = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new Dh(new Ql(-1, -1, 0), new Ql(-1, 1, 0), new Ql(1, 1, 0)), r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 64, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 8, s = arguments.length > 4 && void 0 !== arguments[4] && arguments[4]; cr(this, n), (e = t.call(this)).type = "TubeGeometry", e.parameters = { path: i, tubularSegments: r, radius: a, radialSegments: o, closed: s }; var l = i.computeFrenetFrames(r, s); e.tangents = l.tangents, e.normals = l.normals, e.binormals = l.binormals; var g = new Ql, c = new Ql, u = new fl, C = new Ql, d = [], I = [], h = [], A = []; function p(e) { C = i.getPointAt(e / r, C); for (var t = l.normals[e], n = l.binormals[e], s = 0; s <= o; s++) { var u = s / o * Math.PI * 2, h = Math.sin(u), A = -Math.cos(u); c.x = A * t.x + h * n.x, c.y = A * t.y + h * n.y, c.z = A * t.z + h * n.z, c.normalize(), I.push(c.x, c.y, c.z), g.x = C.x + a * c.x, g.y = C.y + a * c.y, g.z = C.z + a * c.z, d.push(g.x, g.y, g.z) } } return function () { for (var e = 0; e < r; e++)p(e); p(!1 === s ? r : 0), function () { for (var e = 0; e <= r; e++)for (var t = 0; t <= o; t++)u.x = e / r, u.y = t / o, h.push(u.x, u.y) }(), function () { for (var e = 1; e <= r; e++)for (var t = 1; t <= o; t++) { var n = (o + 1) * (e - 1) + (t - 1), i = (o + 1) * e + (t - 1), a = (o + 1) * e + t, s = (o + 1) * (e - 1) + t; A.push(n, i, s), A.push(i, a, s) } }() }(), e.setIndex(A), e.setAttribute("position", new Nc(d, 3)), e.setAttribute("normal", new Nc(I, 3)), e.setAttribute("uv", new Nc(h, 2)), e } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.parameters = Object.assign({}, e.parameters), this } }, { key: "toJSON", value: function () { var e = yr(hr(n.prototype), "toJSON", this).call(this); return e.path = this.parameters.path.toJSON(), e } }], [{ key: "fromJSON", value: function (e) { return new n((new Jh[e.path.type]).fromJSON(e.path), e.tubularSegments, e.radius, e.radialSegments, e.closed) } }]), n }(Uc), OA = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; if (cr(this, n), (e = t.call(this)).type = "WireframeGeometry", e.parameters = { geometry: i }, null !== i) { var r = [], a = new Set, o = new Ql, s = new Ql; if (null !== i.index) { var l = i.attributes.position, g = i.index, c = i.groups; 0 === c.length && (c = [{ start: 0, count: g.count, materialIndex: 0 }]); for (var u = 0, C = c.length; u < C; ++u)for (var d = c[u], I = d.start, h = I, A = I + d.count; h < A; h += 3)for (var p = 0; p < 3; p++) { var f = g.getX(h + p), m = g.getX(h + (p + 1) % 3); o.fromBufferAttribute(l, f), s.fromBufferAttribute(l, m), !0 === jA(o, s, a) && (r.push(o.x, o.y, o.z), r.push(s.x, s.y, s.z)) } } else for (var v = i.attributes.position, b = 0, y = v.count / 3; b < y; b++)for (var G = 0; G < 3; G++) { var B = 3 * b + G, Z = 3 * b + (G + 1) % 3; o.fromBufferAttribute(v, B), s.fromBufferAttribute(v, Z), !0 === jA(o, s, a) && (r.push(o.x, o.y, o.z), r.push(s.x, s.y, s.z)) } e.setAttribute("position", new Nc(r, 3)) } return e } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.parameters = Object.assign({}, e.parameters), this } }]), n }(Uc); function jA(e, t, n) { var i = "".concat(e.x, ",").concat(e.y, ",").concat(e.z, "-").concat(t.x, ",").concat(t.y, ",").concat(t.z), r = "".concat(t.x, ",").concat(t.y, ",").concat(t.z, "-").concat(e.x, ",").concat(e.y, ",").concat(e.z); return !0 !== n.has(i) && !0 !== n.has(r) && (n.add(i), n.add(r), !0) } var QA = Object.freeze({ __proto__: null, BoxGeometry: uu, CapsuleGeometry: qh, CircleGeometry: $h, ConeGeometry: tA, CylinderGeometry: eA, DodecahedronGeometry: iA, EdgesGeometry: lA, ExtrudeGeometry: YA, IcosahedronGeometry: LA, LatheGeometry: Qh, OctahedronGeometry: zA, PlaneGeometry: ku, PolyhedronGeometry: nA, RingGeometry: EA, ShapeGeometry: TA, SphereGeometry: _A, TetrahedronGeometry: UA, TorusGeometry: DA, TorusKnotGeometry: PA, TubeGeometry: JA, WireframeGeometry: OA }), qA = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).isShadowMaterial = !0, i.type = "ShadowMaterial", i.color = new pc(0), i.transparent = !0, i.fog = !0, i.setValues(e), i } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.color.copy(e.color), this.fog = e.fog, this } }]), n }(Cc), $A = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this, e)).isRawShaderMaterial = !0, i.type = "RawShaderMaterial", i } return dr(n) }(Au), ep = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).isMeshStandardMaterial = !0, i.defines = { STANDARD: "" }, i.type = "MeshStandardMaterial", i.color = new pc(16777215), i.roughness = 1, i.metalness = 0, i.map = null, i.lightMap = null, i.lightMapIntensity = 1, i.aoMap = null, i.aoMapIntensity = 1, i.emissive = new pc(0), i.emissiveIntensity = 1, i.emissiveMap = null, i.bumpMap = null, i.bumpScale = 1, i.normalMap = null, i.normalMapType = ls, i.normalScale = new fl(1, 1), i.displacementMap = null, i.displacementScale = 1, i.displacementBias = 0, i.roughnessMap = null, i.metalnessMap = null, i.alphaMap = null, i.envMap = null, i.envMapIntensity = 1, i.wireframe = !1, i.wireframeLinewidth = 1, i.wireframeLinecap = "round", i.wireframeLinejoin = "round", i.flatShading = !1, i.fog = !0, i.setValues(e), i } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.defines = { STANDARD: "" }, this.color.copy(e.color), this.roughness = e.roughness, this.metalness = e.metalness, this.map = e.map, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.emissive.copy(e.emissive), this.emissiveMap = e.emissiveMap, this.emissiveIntensity = e.emissiveIntensity, this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalMapType = e.normalMapType, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.roughnessMap = e.roughnessMap, this.metalnessMap = e.metalnessMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.envMapIntensity = e.envMapIntensity, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.flatShading = e.flatShading, this.fog = e.fog, this } }]), n }(Cc), tp = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).isMeshPhysicalMaterial = !0, i.defines = { STANDARD: "", PHYSICAL: "" }, i.type = "MeshPhysicalMaterial", i.anisotropyRotation = 0, i.anisotropyMap = null, i.clearcoatMap = null, i.clearcoatRoughness = 0, i.clearcoatRoughnessMap = null, i.clearcoatNormalScale = new fl(1, 1), i.clearcoatNormalMap = null, i.ior = 1.5, Object.defineProperty(y(i), "reflectivity", { get: function () { return gl(2.5 * (this.ior - 1) / (this.ior + 1), 0, 1) }, set: function (e) { this.ior = (1 + .4 * e) / (1 - .4 * e) } }), i.iridescenceMap = null, i.iridescenceIOR = 1.3, i.iridescenceThicknessRange = [100, 400], i.iridescenceThicknessMap = null, i.sheenColor = new pc(0), i.sheenColorMap = null, i.sheenRoughness = 1, i.sheenRoughnessMap = null, i.transmissionMap = null, i.thickness = 0, i.thicknessMap = null, i.attenuationDistance = 1 / 0, i.attenuationColor = new pc(1, 1, 1), i.specularIntensity = 1, i.specularIntensityMap = null, i.specularColor = new pc(1, 1, 1), i.specularColorMap = null, i._anisotropy = 0, i._clearcoat = 0, i._iridescence = 0, i._sheen = 0, i._transmission = 0, i.setValues(e), i } return dr(n, [{ key: "anisotropy", get: function () { return this._anisotropy }, set: function (e) { this._anisotropy > 0 !== e > 0 && this.version++, this._anisotropy = e } }, { key: "clearcoat", get: function () { return this._clearcoat }, set: function (e) { this._clearcoat > 0 !== e > 0 && this.version++, this._clearcoat = e } }, { key: "iridescence", get: function () { return this._iridescence }, set: function (e) { this._iridescence > 0 !== e > 0 && this.version++, this._iridescence = e } }, { key: "sheen", get: function () { return this._sheen }, set: function (e) { this._sheen > 0 !== e > 0 && this.version++, this._sheen = e } }, { key: "transmission", get: function () { return this._transmission }, set: function (e) { this._transmission > 0 !== e > 0 && this.version++, this._transmission = e } }, { key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.defines = { STANDARD: "", PHYSICAL: "" }, this.anisotropy = e.anisotropy, this.anisotropyRotation = e.anisotropyRotation, this.anisotropyMap = e.anisotropyMap, this.clearcoat = e.clearcoat, this.clearcoatMap = e.clearcoatMap, this.clearcoatRoughness = e.clearcoatRoughness, this.clearcoatRoughnessMap = e.clearcoatRoughnessMap, this.clearcoatNormalMap = e.clearcoatNormalMap, this.clearcoatNormalScale.copy(e.clearcoatNormalScale), this.ior = e.ior, this.iridescence = e.iridescence, this.iridescenceMap = e.iridescenceMap, this.iridescenceIOR = e.iridescenceIOR, this.iridescenceThicknessRange = (0, v.Z)(e.iridescenceThicknessRange), this.iridescenceThicknessMap = e.iridescenceThicknessMap, this.sheen = e.sheen, this.sheenColor.copy(e.sheenColor), this.sheenColorMap = e.sheenColorMap, this.sheenRoughness = e.sheenRoughness, this.sheenRoughnessMap = e.sheenRoughnessMap, this.transmission = e.transmission, this.transmissionMap = e.transmissionMap, this.thickness = e.thickness, this.thicknessMap = e.thicknessMap, this.attenuationDistance = e.attenuationDistance, this.attenuationColor.copy(e.attenuationColor), this.specularIntensity = e.specularIntensity, this.specularIntensityMap = e.specularIntensityMap, this.specularColor.copy(e.specularColor), this.specularColorMap = e.specularColorMap, this } }]), n }(ep), np = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).isMeshPhongMaterial = !0, i.type = "MeshPhongMaterial", i.color = new pc(16777215), i.specular = new pc(1118481), i.shininess = 30, i.map = null, i.lightMap = null, i.lightMapIntensity = 1, i.aoMap = null, i.aoMapIntensity = 1, i.emissive = new pc(0), i.emissiveIntensity = 1, i.emissiveMap = null, i.bumpMap = null, i.bumpScale = 1, i.normalMap = null, i.normalMapType = ls, i.normalScale = new fl(1, 1), i.displacementMap = null, i.displacementScale = 1, i.displacementBias = 0, i.specularMap = null, i.alphaMap = null, i.envMap = null, i.combine = ha, i.reflectivity = 1, i.refractionRatio = .98, i.wireframe = !1, i.wireframeLinewidth = 1, i.wireframeLinecap = "round", i.wireframeLinejoin = "round", i.flatShading = !1, i.fog = !0, i.setValues(e), i } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.color.copy(e.color), this.specular.copy(e.specular), this.shininess = e.shininess, this.map = e.map, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.emissive.copy(e.emissive), this.emissiveMap = e.emissiveMap, this.emissiveIntensity = e.emissiveIntensity, this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalMapType = e.normalMapType, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.specularMap = e.specularMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.combine = e.combine, this.reflectivity = e.reflectivity, this.refractionRatio = e.refractionRatio, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.flatShading = e.flatShading, this.fog = e.fog, this } }]), n }(Cc), ip = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).isMeshToonMaterial = !0, i.defines = { TOON: "" }, i.type = "MeshToonMaterial", i.color = new pc(16777215), i.map = null, i.gradientMap = null, i.lightMap = null, i.lightMapIntensity = 1, i.aoMap = null, i.aoMapIntensity = 1, i.emissive = new pc(0), i.emissiveIntensity = 1, i.emissiveMap = null, i.bumpMap = null, i.bumpScale = 1, i.normalMap = null, i.normalMapType = ls, i.normalScale = new fl(1, 1), i.displacementMap = null, i.displacementScale = 1, i.displacementBias = 0, i.alphaMap = null, i.wireframe = !1, i.wireframeLinewidth = 1, i.wireframeLinecap = "round", i.wireframeLinejoin = "round", i.fog = !0, i.setValues(e), i } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.color.copy(e.color), this.map = e.map, this.gradientMap = e.gradientMap, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.emissive.copy(e.emissive), this.emissiveMap = e.emissiveMap, this.emissiveIntensity = e.emissiveIntensity, this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalMapType = e.normalMapType, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.alphaMap = e.alphaMap, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.fog = e.fog, this } }]), n }(Cc), rp = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).isMeshNormalMaterial = !0, i.type = "MeshNormalMaterial", i.bumpMap = null, i.bumpScale = 1, i.normalMap = null, i.normalMapType = ls, i.normalScale = new fl(1, 1), i.displacementMap = null, i.displacementScale = 1, i.displacementBias = 0, i.wireframe = !1, i.wireframeLinewidth = 1, i.flatShading = !1, i.setValues(e), i } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalMapType = e.normalMapType, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.flatShading = e.flatShading, this } }]), n }(Cc), ap = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).isMeshLambertMaterial = !0, i.type = "MeshLambertMaterial", i.color = new pc(16777215), i.map = null, i.lightMap = null, i.lightMapIntensity = 1, i.aoMap = null, i.aoMapIntensity = 1, i.emissive = new pc(0), i.emissiveIntensity = 1, i.emissiveMap = null, i.bumpMap = null, i.bumpScale = 1, i.normalMap = null, i.normalMapType = ls, i.normalScale = new fl(1, 1), i.displacementMap = null, i.displacementScale = 1, i.displacementBias = 0, i.specularMap = null, i.alphaMap = null, i.envMap = null, i.combine = ha, i.reflectivity = 1, i.refractionRatio = .98, i.wireframe = !1, i.wireframeLinewidth = 1, i.wireframeLinecap = "round", i.wireframeLinejoin = "round", i.flatShading = !1, i.fog = !0, i.setValues(e), i } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.color.copy(e.color), this.map = e.map, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.emissive.copy(e.emissive), this.emissiveMap = e.emissiveMap, this.emissiveIntensity = e.emissiveIntensity, this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalMapType = e.normalMapType, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.specularMap = e.specularMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.combine = e.combine, this.reflectivity = e.reflectivity, this.refractionRatio = e.refractionRatio, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.flatShading = e.flatShading, this.fog = e.fog, this } }]), n }(Cc), op = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).isMeshMatcapMaterial = !0, i.defines = { MATCAP: "" }, i.type = "MeshMatcapMaterial", i.color = new pc(16777215), i.matcap = null, i.map = null, i.bumpMap = null, i.bumpScale = 1, i.normalMap = null, i.normalMapType = ls, i.normalScale = new fl(1, 1), i.displacementMap = null, i.displacementScale = 1, i.displacementBias = 0, i.alphaMap = null, i.flatShading = !1, i.fog = !0, i.setValues(e), i } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.defines = { MATCAP: "" }, this.color.copy(e.color), this.matcap = e.matcap, this.map = e.map, this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalMapType = e.normalMapType, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.alphaMap = e.alphaMap, this.flatShading = e.flatShading, this.fog = e.fog, this } }]), n }(Cc), sp = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).isLineDashedMaterial = !0, i.type = "LineDashedMaterial", i.scale = 1, i.dashSize = 3, i.gapSize = 1, i.setValues(e), i } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.scale = e.scale, this.dashSize = e.dashSize, this.gapSize = e.gapSize, this } }]), n }(ah); function lp(e, t, n) { return !e || !n && e.constructor === t ? e : "number" === typeof t.BYTES_PER_ELEMENT ? new t(e) : Array.prototype.slice.call(e) } function gp(e) { return ArrayBuffer.isView(e) && !(e instanceof DataView) } function cp(e) { for (var t = e.length, n = new Array(t), i = 0; i !== t; ++i)n[i] = i; return n.sort((function (t, n) { return e[t] - e[n] })), n } function up(e, t, n) { for (var i = e.length, r = new e.constructor(i), a = 0, o = 0; o !== i; ++a)for (var s = n[a] * t, l = 0; l !== t; ++l)r[o++] = e[s + l]; return r } function Cp(e, t, n, i) { for (var r = 1, a = e[0]; void 0 !== a && void 0 === a[i];)a = e[r++]; if (void 0 !== a) { var o = a[i]; if (void 0 !== o) if (Array.isArray(o)) do { void 0 !== (o = a[i]) && (t.push(a.time), n.push.apply(n, o)), a = e[r++] } while (void 0 !== a); else if (void 0 !== o.toArray) do { void 0 !== (o = a[i]) && (t.push(a.time), o.toArray(n, n.length)), a = e[r++] } while (void 0 !== a); else do { void 0 !== (o = a[i]) && (t.push(a.time), n.push(o)), a = e[r++] } while (void 0 !== a) } } var dp = { convertArray: lp, isTypedArray: gp, getKeyframeOrder: cp, sortedArray: up, flattenJSON: Cp, subclip: function (e, t, n, i) { var r = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 30, a = e.clone(); a.name = t; for (var o = [], s = 0; s < a.tracks.length; ++s) { for (var l = a.tracks[s], g = l.getValueSize(), c = [], u = [], C = 0; C < l.times.length; ++C) { var d = l.times[C] * r; if (!(d < n || d >= i)) { c.push(l.times[C]); for (var I = 0; I < g; ++I)u.push(l.values[C * g + I]) } } 0 !== c.length && (l.times = lp(c, l.times.constructor), l.values = lp(u, l.values.constructor), o.push(l)) } a.tracks = o; for (var h = 1 / 0, A = 0; A < a.tracks.length; ++A)h > a.tracks[A].times[0] && (h = a.tracks[A].times[0]); for (var p = 0; p < a.tracks.length; ++p)a.tracks[p].shift(-1 * h); return a.resetDuration(), a }, makeClipAdditive: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : e, i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 30; i <= 0 && (i = 30); for (var r = n.tracks.length, a = t / i, o = function () { var t = n.tracks[s], i = t.ValueTypeName; if ("bool" === i || "string" === i) return 0; var r = e.tracks.find((function (e) { return e.name === t.name && e.ValueTypeName === i })); if (void 0 === r) return 0; var o = 0, l = t.getValueSize(); t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline && (o = l / 3); var g = 0, c = r.getValueSize(); r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline && (g = c / 3); var u, C = t.times.length - 1; if (a <= t.times[0]) { var d = o, I = l - o; u = t.values.slice(d, I) } else if (a >= t.times[C]) { var h = C * l + o, A = h + l - o; u = t.values.slice(h, A) } else { var p = t.createInterpolant(), f = o, m = l - o; p.evaluate(a), u = p.resultBuffer.slice(f, m) } "quaternion" === i && (new jl).fromArray(u).normalize().conjugate().toArray(u); for (var v = r.times.length, b = 0; b < v; ++b) { var y = b * c + g; if ("quaternion" === i) jl.multiplyQuaternionsFlat(r.values, y, u, 0, r.values, y); else for (var G = c - 2 * g, B = 0; B < G; ++B)r.values[y + B] -= u[B] } }, s = 0; s < r; ++s)o(); return e.blendMode = es, e } }, Ip = function () { function e(t, n, i, r) { cr(this, e), this.parameterPositions = t, this._cachedIndex = 0, this.resultBuffer = void 0 !== r ? r : new n.constructor(i), this.sampleValues = n, this.valueSize = i, this.settings = null, this.DefaultSettings_ = {} } return dr(e, [{ key: "evaluate", value: function (e) { var t = this.parameterPositions, n = this._cachedIndex, i = t[n], r = t[n - 1]; e: { t: { var a; n: { i: if (!(e < i)) { for (var o = n + 2; ;) { if (void 0 === i) { if (e < r) break i; return n = t.length, this._cachedIndex = n, this.copySampleValue_(n - 1) } if (n === o) break; if (r = i, e < (i = t[++n])) break t } a = t.length; break n } if (e >= r) break e; var s = t[1]; e < s && (n = 2, r = s); for (var l = n - 2; ;) { if (void 0 === r) return this._cachedIndex = 0, this.copySampleValue_(0); if (n === l) break; if (i = r, e >= (r = t[--n - 1])) break t } a = n, n = 0 } for (; n < a;) { var g = n + a >>> 1; e < t[g] ? a = g : n = g + 1 } if (i = t[n], void 0 === (r = t[n - 1])) return this._cachedIndex = 0, this.copySampleValue_(0); if (void 0 === i) return n = t.length, this._cachedIndex = n, this.copySampleValue_(n - 1) } this._cachedIndex = n, this.intervalChanged_(n, r, i) } return this.interpolate_(n, r, e, i) } }, { key: "getSettings_", value: function () { return this.settings || this.DefaultSettings_ } }, { key: "copySampleValue_", value: function (e) { for (var t = this.resultBuffer, n = this.sampleValues, i = this.valueSize, r = e * i, a = 0; a !== i; ++a)t[a] = n[r + a]; return t } }, { key: "interpolate_", value: function () { throw new Error("call to abstract method") } }, { key: "intervalChanged_", value: function () { } }]), e }(), hp = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r, a) { var o; return cr(this, n), (o = t.call(this, e, i, r, a))._weightPrev = -0, o._offsetPrev = -0, o._weightNext = -0, o._offsetNext = -0, o.DefaultSettings_ = { endingStart: jo, endingEnd: jo }, o } return dr(n, [{ key: "intervalChanged_", value: function (e, t, n) { var i = this.parameterPositions, r = e - 2, a = e + 1, o = i[r], s = i[a]; if (void 0 === o) switch (this.getSettings_().endingStart) { case Qo: r = e, o = 2 * t - n; break; case qo: o = t + i[r = i.length - 2] - i[r + 1]; break; default: r = e, o = n }if (void 0 === s) switch (this.getSettings_().endingEnd) { case Qo: a = e, s = 2 * n - t; break; case qo: a = 1, s = n + i[1] - i[0]; break; default: a = e - 1, s = t }var l = .5 * (n - t), g = this.valueSize; this._weightPrev = l / (t - o), this._weightNext = l / (s - n), this._offsetPrev = r * g, this._offsetNext = a * g } }, { key: "interpolate_", value: function (e, t, n, i) { for (var r = this.resultBuffer, a = this.sampleValues, o = this.valueSize, s = e * o, l = s - o, g = this._offsetPrev, c = this._offsetNext, u = this._weightPrev, C = this._weightNext, d = (n - t) / (i - t), I = d * d, h = I * d, A = -u * h + 2 * u * I - u * d, p = (1 + u) * h + (-1.5 - 2 * u) * I + (-.5 + u) * d + 1, f = (-1 - C) * h + (1.5 + C) * I + .5 * d, m = C * h - C * I, v = 0; v !== o; ++v)r[v] = A * a[g + v] + p * a[l + v] + f * a[s + v] + m * a[c + v]; return r } }]), n }(Ip), Ap = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r, a) { return cr(this, n), t.call(this, e, i, r, a) } return dr(n, [{ key: "interpolate_", value: function (e, t, n, i) { for (var r = this.resultBuffer, a = this.sampleValues, o = this.valueSize, s = e * o, l = s - o, g = (n - t) / (i - t), c = 1 - g, u = 0; u !== o; ++u)r[u] = a[l + u] * c + a[s + u] * g; return r } }]), n }(Ip), pp = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r, a) { return cr(this, n), t.call(this, e, i, r, a) } return dr(n, [{ key: "interpolate_", value: function (e) { return this.copySampleValue_(e - 1) } }]), n }(Ip), fp = function () { function e(t, n, i, r) { if (cr(this, e), void 0 === t) throw new Error("THREE.KeyframeTrack: track name is undefined"); if (void 0 === n || 0 === n.length) throw new Error("THREE.KeyframeTrack: no keyframes in track named " + t); this.name = t, this.times = lp(n, this.TimeBufferType), this.values = lp(i, this.ValueBufferType), this.setInterpolation(r || this.DefaultInterpolation) } return dr(e, [{ key: "InterpolantFactoryMethodDiscrete", value: function (e) { return new pp(this.times, this.values, this.getValueSize(), e) } }, { key: "InterpolantFactoryMethodLinear", value: function (e) { return new Ap(this.times, this.values, this.getValueSize(), e) } }, { key: "InterpolantFactoryMethodSmooth", value: function (e) { return new hp(this.times, this.values, this.getValueSize(), e) } }, { key: "setInterpolation", value: function (e) { var t; switch (e) { case Po: t = this.InterpolantFactoryMethodDiscrete; break; case Jo: t = this.InterpolantFactoryMethodLinear; break; case Oo: t = this.InterpolantFactoryMethodSmooth }if (void 0 === t) { var n = "unsupported interpolation for " + this.ValueTypeName + " keyframe track named " + this.name; if (void 0 === this.createInterpolant) { if (e === this.DefaultInterpolation) throw new Error(n); this.setInterpolation(this.DefaultInterpolation) } return console.warn("THREE.KeyframeTrack:", n), this } return this.createInterpolant = t, this } }, { key: "getInterpolation", value: function () { switch (this.createInterpolant) { case this.InterpolantFactoryMethodDiscrete: return Po; case this.InterpolantFactoryMethodLinear: return Jo; case this.InterpolantFactoryMethodSmooth: return Oo } } }, { key: "getValueSize", value: function () { return this.values.length / this.times.length } }, { key: "shift", value: function (e) { if (0 !== e) for (var t = this.times, n = 0, i = t.length; n !== i; ++n)t[n] += e; return this } }, { key: "scale", value: function (e) { if (1 !== e) for (var t = this.times, n = 0, i = t.length; n !== i; ++n)t[n] *= e; return this } }, { key: "trim", value: function (e, t) { for (var n = this.times, i = n.length, r = 0, a = i - 1; r !== i && n[r] < e;)++r; for (; -1 !== a && n[a] > t;)--a; if (++a, 0 !== r || a !== i) { r >= a && (r = (a = Math.max(a, 1)) - 1); var o = this.getValueSize(); this.times = n.slice(r, a), this.values = this.values.slice(r * o, a * o) } return this } }, { key: "validate", value: function () { var e = !0, t = this.getValueSize(); t - Math.floor(t) !== 0 && (console.error("THREE.KeyframeTrack: Invalid value size in track.", this), e = !1); var n = this.times, i = this.values, r = n.length; 0 === r && (console.error("THREE.KeyframeTrack: Track is empty.", this), e = !1); for (var a = null, o = 0; o !== r; o++) { var s = n[o]; if ("number" === typeof s && isNaN(s)) { console.error("THREE.KeyframeTrack: Time is not a valid number.", this, o, s), e = !1; break } if (null !== a && a > s) { console.error("THREE.KeyframeTrack: Out of order keys.", this, o, s, a), e = !1; break } a = s } if (void 0 !== i && gp(i)) for (var l = 0, g = i.length; l !== g; ++l) { var c = i[l]; if (isNaN(c)) { console.error("THREE.KeyframeTrack: Value is not a valid number.", this, l, c), e = !1; break } } return e } }, { key: "optimize", value: function () { for (var e = this.times.slice(), t = this.values.slice(), n = this.getValueSize(), i = this.getInterpolation() === Oo, r = e.length - 1, a = 1, o = 1; o < r; ++o) { var s = !1, l = e[o]; if (l !== e[o + 1] && (1 !== o || l !== e[0])) if (i) s = !0; else for (var g = o * n, c = g - n, u = g + n, C = 0; C !== n; ++C) { var d = t[g + C]; if (d !== t[c + C] || d !== t[u + C]) { s = !0; break } } if (s) { if (o !== a) { e[a] = e[o]; for (var I = o * n, h = a * n, A = 0; A !== n; ++A)t[h + A] = t[I + A] } ++a } } if (r > 0) { e[a] = e[r]; for (var p = r * n, f = a * n, m = 0; m !== n; ++m)t[f + m] = t[p + m]; ++a } return a !== e.length ? (this.times = e.slice(0, a), this.values = t.slice(0, a * n)) : (this.times = e, this.values = t), this } }, { key: "clone", value: function () { var e = this.times.slice(), t = this.values.slice(), n = new (0, this.constructor)(this.name, e, t); return n.createInterpolant = this.createInterpolant, n } }], [{ key: "toJSON", value: function (e) { var t, n = e.constructor; if (n.toJSON !== this.toJSON) t = n.toJSON(e); else { t = { name: e.name, times: lp(e.times, Array), values: lp(e.values, Array) }; var i = e.getInterpolation(); i !== e.DefaultInterpolation && (t.interpolation = i) } return t.type = e.ValueTypeName, t } }]), e }(); fp.prototype.TimeBufferType = Float32Array, fp.prototype.ValueBufferType = Float32Array, fp.prototype.DefaultInterpolation = Jo; var mp = function (e) { Ir(n, e); var t = fr(n); function n() { return cr(this, n), t.apply(this, arguments) } return dr(n) }(fp); mp.prototype.ValueTypeName = "bool", mp.prototype.ValueBufferType = Array, mp.prototype.DefaultInterpolation = Po, mp.prototype.InterpolantFactoryMethodLinear = void 0, mp.prototype.InterpolantFactoryMethodSmooth = void 0; var vp = function (e) { Ir(n, e); var t = fr(n); function n() { return cr(this, n), t.apply(this, arguments) } return dr(n) }(fp); vp.prototype.ValueTypeName = "color"; var bp = function (e) { Ir(n, e); var t = fr(n); function n() { return cr(this, n), t.apply(this, arguments) } return dr(n) }(fp); bp.prototype.ValueTypeName = "number"; var yp = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r, a) { return cr(this, n), t.call(this, e, i, r, a) } return dr(n, [{ key: "interpolate_", value: function (e, t, n, i) { for (var r = this.resultBuffer, a = this.sampleValues, o = this.valueSize, s = (n - t) / (i - t), l = e * o, g = l + o; l !== g; l += 4)jl.slerpFlat(r, 0, a, l - o, a, l, s); return r } }]), n }(Ip), Gp = function (e) { Ir(n, e); var t = fr(n); function n() { return cr(this, n), t.apply(this, arguments) } return dr(n, [{ key: "InterpolantFactoryMethodLinear", value: function (e) { return new yp(this.times, this.values, this.getValueSize(), e) } }]), n }(fp); Gp.prototype.ValueTypeName = "quaternion", Gp.prototype.DefaultInterpolation = Jo, Gp.prototype.InterpolantFactoryMethodSmooth = void 0; var Bp = function (e) { Ir(n, e); var t = fr(n); function n() { return cr(this, n), t.apply(this, arguments) } return dr(n) }(fp); Bp.prototype.ValueTypeName = "string", Bp.prototype.ValueBufferType = Array, Bp.prototype.DefaultInterpolation = Po, Bp.prototype.InterpolantFactoryMethodLinear = void 0, Bp.prototype.InterpolantFactoryMethodSmooth = void 0; var Zp = function (e) { Ir(n, e); var t = fr(n); function n() { return cr(this, n), t.apply(this, arguments) } return dr(n) }(fp); Zp.prototype.ValueTypeName = "vector"; var wp = function () { function e(t) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : -1, i = arguments.length > 2 ? arguments[2] : void 0, r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : $o; cr(this, e), this.name = t, this.tracks = i, this.duration = n, this.blendMode = r, this.uuid = ll(), this.duration < 0 && this.resetDuration() } return dr(e, [{ key: "resetDuration", value: function () { for (var e = 0, t = 0, n = this.tracks.length; t !== n; ++t) { var i = this.tracks[t]; e = Math.max(e, i.times[i.times.length - 1]) } return this.duration = e, this } }, { key: "trim", value: function () { for (var e = 0; e < this.tracks.length; e++)this.tracks[e].trim(0, this.duration); return this } }, { key: "validate", value: function () { for (var e = !0, t = 0; t < this.tracks.length; t++)e = e && this.tracks[t].validate(); return e } }, { key: "optimize", value: function () { for (var e = 0; e < this.tracks.length; e++)this.tracks[e].optimize(); return this } }, { key: "clone", value: function () { for (var e = [], t = 0; t < this.tracks.length; t++)e.push(this.tracks[t].clone()); return new this.constructor(this.name, this.duration, e, this.blendMode) } }, { key: "toJSON", value: function () { return this.constructor.toJSON(this) } }], [{ key: "parse", value: function (e) { for (var t = [], n = e.tracks, i = 1 / (e.fps || 1), r = 0, a = n.length; r !== a; ++r)t.push(Sp(n[r]).scale(i)); var o = new this(e.name, e.duration, t, e.blendMode); return o.uuid = e.uuid, o } }, { key: "toJSON", value: function (e) { for (var t = [], n = e.tracks, i = { name: e.name, duration: e.duration, tracks: t, uuid: e.uuid, blendMode: e.blendMode }, r = 0, a = n.length; r !== a; ++r)t.push(fp.toJSON(n[r])); return i } }, { key: "CreateFromMorphTargetSequence", value: function (e, t, n, i) { for (var r = t.length, a = [], o = 0; o < r; o++) { var s = [], l = []; s.push((o + r - 1) % r, o, (o + 1) % r), l.push(0, 1, 0); var g = cp(s); s = up(s, 1, g), l = up(l, 1, g), i || 0 !== s[0] || (s.push(r), l.push(l[0])), a.push(new bp(".morphTargetInfluences[" + t[o].name + "]", s, l).scale(1 / n)) } return new this(e, -1, a) } }, { key: "findByName", value: function (e, t) { var n = e; if (!Array.isArray(e)) { var i = e; n = i.geometry && i.geometry.animations || i.animations } for (var r = 0; r < n.length; r++)if (n[r].name === t) return n[r]; return null } }, { key: "CreateClipsFromMorphTargetSequences", value: function (e, t, n) { for (var i = {}, r = /^([\w-]*?)([\d]+)$/, a = 0, o = e.length; a < o; a++) { var s = e[a], l = s.name.match(r); if (l && l.length > 1) { var g = l[1], c = i[g]; c || (i[g] = c = []), c.push(s) } } var u = []; for (var C in i) u.push(this.CreateFromMorphTargetSequence(C, i[C], t, n)); return u } }, { key: "parseAnimation", value: function (e, t) { if (!e) return console.error("THREE.AnimationClip: No animation in JSONLoader data."), null; for (var n = function (e, t, n, i, r) { if (0 !== n.length) { var a = [], o = []; Cp(n, a, o, i), 0 !== a.length && r.push(new e(t, a, o)) } }, i = [], r = e.name || "default", a = e.fps || 30, o = e.blendMode, s = e.length || -1, l = e.hierarchy || [], g = 0; g < l.length; g++) { var c = l[g].keys; if (c && 0 !== c.length) if (c[0].morphTargets) { var u = {}, C = void 0; for (C = 0; C < c.length; C++)if (c[C].morphTargets) for (var d = 0; d < c[C].morphTargets.length; d++)u[c[C].morphTargets[d]] = -1; for (var I in u) { for (var h = [], A = [], p = 0; p !== c[C].morphTargets.length; ++p) { var f = c[C]; h.push(f.time), A.push(f.morphTarget === I ? 1 : 0) } i.push(new bp(".morphTargetInfluence[" + I + "]", h, A)) } s = u.length * a } else { var m = ".bones[" + t[g].name + "]"; n(Zp, m + ".position", c, "pos", i), n(Gp, m + ".quaternion", c, "rot", i), n(Zp, m + ".scale", c, "scl", i) } } return 0 === i.length ? null : new this(r, s, i, o) } }]), e }(); function Sp(e) { if (void 0 === e.type) throw new Error("THREE.KeyframeTrack: track type undefined, can not parse"); var t = function (e) { switch (e.toLowerCase()) { case "scalar": case "double": case "float": case "number": case "integer": return bp; case "vector": case "vector2": case "vector3": case "vector4": return Zp; case "color": return vp; case "quaternion": return Gp; case "bool": case "boolean": return mp; case "string": return Bp }throw new Error("THREE.KeyframeTrack: Unsupported typeName: " + e) }(e.type); if (void 0 === e.times) { var n = [], i = []; Cp(e.keys, n, i, "value"), e.times = n, e.values = i } return void 0 !== t.parse ? t.parse(e) : new t(e.name, e.times, e.values, e.interpolation) } var Rp = { enabled: !1, files: {}, add: function (e, t) { !1 !== this.enabled && (this.files[e] = t) }, get: function (e) { if (!1 !== this.enabled) return this.files[e] }, remove: function (e) { delete this.files[e] }, clear: function () { this.files = {} } }, xp = dr((function e(t, n, i) { cr(this, e); var r = this, a = !1, o = 0, s = 0, l = void 0, g = []; this.onStart = void 0, this.onLoad = t, this.onProgress = n, this.onError = i, this.itemStart = function (e) { s++, !1 === a && void 0 !== r.onStart && r.onStart(e, o, s), a = !0 }, this.itemEnd = function (e) { o++, void 0 !== r.onProgress && r.onProgress(e, o, s), o === s && (a = !1, void 0 !== r.onLoad && r.onLoad()) }, this.itemError = function (e) { void 0 !== r.onError && r.onError(e) }, this.resolveURL = function (e) { return l ? l(e) : e }, this.setURLModifier = function (e) { return l = e, this }, this.addHandler = function (e, t) { return g.push(e, t), this }, this.removeHandler = function (e) { var t = g.indexOf(e); return -1 !== t && g.splice(t, 2), this }, this.getHandler = function (e) { for (var t = 0, n = g.length; t < n; t += 2) { var i = g[t], r = g[t + 1]; if (i.global && (i.lastIndex = 0), i.test(e)) return r } return null } })), Wp = new xp, Vp = function () { function e(t) { cr(this, e), this.manager = void 0 !== t ? t : Wp, this.crossOrigin = "anonymous", this.withCredentials = !1, this.path = "", this.resourcePath = "", this.requestHeader = {} } return dr(e, [{ key: "load", value: function () { } }, { key: "loadAsync", value: function (e, t) { var n = this; return new Promise((function (i, r) { n.load(e, i, t, r) })) } }, { key: "parse", value: function () { } }, { key: "setCrossOrigin", value: function (e) { return this.crossOrigin = e, this } }, { key: "setWithCredentials", value: function (e) { return this.withCredentials = e, this } }, { key: "setPath", value: function (e) { return this.path = e, this } }, { key: "setResourcePath", value: function (e) { return this.resourcePath = e, this } }, { key: "setRequestHeader", value: function (e) { return this.requestHeader = e, this } }]), e }(); Vp.DEFAULT_MATERIAL_NAME = "__DEFAULT"; var kp, Hp = {}, Mp = function (e) { Ir(n, e); var t = fr(n); function n(e, i) { var r; return cr(this, n), (r = t.call(this, e)).response = i, r } return dr(n) }(mr(Error)), Fp = function (e) { Ir(n, e); var t = fr(n); function n(e) { return cr(this, n), t.call(this, e) } return dr(n, [{ key: "load", value: function (e, t, n, i) { var r = this; void 0 === e && (e = ""), void 0 !== this.path && (e = this.path + e), e = this.manager.resolveURL(e); var a = Rp.get(e); if (void 0 !== a) return this.manager.itemStart(e), setTimeout((function () { t && t(a), r.manager.itemEnd(e) }), 0), a; if (void 0 === Hp[e]) { Hp[e] = [], Hp[e].push({ onLoad: t, onProgress: n, onError: i }); var o = new Request(e, { headers: new Headers(this.requestHeader), credentials: this.withCredentials ? "include" : "same-origin" }), s = this.mimeType, l = this.responseType; fetch(o).then((function (t) { if (200 === t.status || 0 === t.status) { if (0 === t.status && console.warn("THREE.FileLoader: HTTP Status 0 received."), "undefined" === typeof ReadableStream || void 0 === t.body || void 0 === t.body.getReader) return t; var n = Hp[e], i = t.body.getReader(), r = t.headers.get("Content-Length") || t.headers.get("X-File-Size"), a = r ? parseInt(r) : 0, o = 0 !== a, s = 0, l = new ReadableStream({ start: function (e) { !function t() { i.read().then((function (i) { var r = i.done, l = i.value; if (r) e.close(); else { s += l.byteLength; for (var g = new ProgressEvent("progress", { lengthComputable: o, loaded: s, total: a }), c = 0, u = n.length; c < u; c++) { var C = n[c]; C.onProgress && C.onProgress(g) } e.enqueue(l), t() } })) }() } }); return new Response(l) } throw new Mp('fetch for "'.concat(t.url, '" responded with ').concat(t.status, ": ").concat(t.statusText), t) })).then((function (e) { switch (l) { case "arraybuffer": return e.arrayBuffer(); case "blob": return e.blob(); case "document": return e.text().then((function (e) { return (new DOMParser).parseFromString(e, s) })); case "json": return e.json(); default: if (void 0 === s) return e.text(); var t = /charset="?([^;"\s]*)"?/i.exec(s), n = t && t[1] ? t[1].toLowerCase() : void 0, i = new TextDecoder(n); return e.arrayBuffer().then((function (e) { return i.decode(e) })) } })).then((function (t) { Rp.add(e, t); var n = Hp[e]; delete Hp[e]; for (var i = 0, r = n.length; i < r; i++) { var a = n[i]; a.onLoad && a.onLoad(t) } })).catch((function (t) { var n = Hp[e]; if (void 0 === n) throw r.manager.itemError(e), t; delete Hp[e]; for (var i = 0, a = n.length; i < a; i++) { var o = n[i]; o.onError && o.onError(t) } r.manager.itemError(e) })).finally((function () { r.manager.itemEnd(e) })), this.manager.itemStart(e) } else Hp[e].push({ onLoad: t, onProgress: n, onError: i }) } }, { key: "setResponseType", value: function (e) { return this.responseType = e, this } }, { key: "setMimeType", value: function (e) { return this.mimeType = e, this } }]), n }(Vp), Np = function (e) { Ir(n, e); var t = fr(n); function n(e) { return cr(this, n), t.call(this, e) } return dr(n, [{ key: "load", value: function (e, t, n, i) { var r = this, a = new Fp(this.manager); a.setPath(this.path), a.setRequestHeader(this.requestHeader), a.setWithCredentials(this.withCredentials), a.load(e, (function (n) { try { t(r.parse(JSON.parse(n))) } catch (a) { i ? i(a) : console.error(a), r.manager.itemError(e) } }), n, i) } }, { key: "parse", value: function (e) { for (var t = [], n = 0; n < e.length; n++) { var i = wp.parse(e[n]); t.push(i) } return t } }]), n }(Vp), Xp = function (e) { Ir(n, e); var t = fr(n); function n(e) { return cr(this, n), t.call(this, e) } return dr(n, [{ key: "load", value: function (e, t, n, i) { var r = this, a = [], o = new Zh, s = new Fp(this.manager); s.setPath(this.path), s.setResponseType("arraybuffer"), s.setRequestHeader(this.requestHeader), s.setWithCredentials(r.withCredentials); var l = 0; function g(g) { s.load(e[g], (function (e) { var n = r.parse(e, !0); a[g] = { width: n.width, height: n.height, format: n.format, mipmaps: n.mipmaps }, 6 === (l += 1) && (1 === n.mipmapCount && (o.minFilter = Ya), o.image = a, o.format = n.format, o.needsUpdate = !0, t && t(o)) }), n, i) } if (Array.isArray(e)) for (var c = 0, u = e.length; c < u; ++c)g(c); else s.load(e, (function (e) { var n = r.parse(e, !0); if (n.isCubemap) { for (var i = n.mipmaps.length / n.mipmapCount, s = 0; s < i; s++) { a[s] = { mipmaps: [] }; for (var l = 0; l < n.mipmapCount; l++)a[s].mipmaps.push(n.mipmaps[s * n.mipmapCount + l]), a[s].format = n.format, a[s].width = n.width, a[s].height = n.height } o.image = a } else o.image.width = n.width, o.image.height = n.height, o.mipmaps = n.mipmaps; 1 === n.mipmapCount && (o.minFilter = Ya), o.format = n.format, o.needsUpdate = !0, t && t(o) }), n, i); return o } }]), n }(Vp), Yp = function (e) { Ir(n, e); var t = fr(n); function n(e) { return cr(this, n), t.call(this, e) } return dr(n, [{ key: "load", value: function (e, t, n, i) { void 0 !== this.path && (e = this.path + e), e = this.manager.resolveURL(e); var r = this, a = Rp.get(e); if (void 0 !== a) return r.manager.itemStart(e), setTimeout((function () { t && t(a), r.manager.itemEnd(e) }), 0), a; var o = Bl("img"); function s() { g(), Rp.add(e, this), t && t(this), r.manager.itemEnd(e) } function l(t) { g(), i && i(t), r.manager.itemError(e), r.manager.itemEnd(e) } function g() { o.removeEventListener("load", s, !1), o.removeEventListener("error", l, !1) } return o.addEventListener("load", s, !1), o.addEventListener("error", l, !1), "data:" !== e.slice(0, 5) && void 0 !== this.crossOrigin && (o.crossOrigin = this.crossOrigin), r.manager.itemStart(e), o.src = e, o } }]), n }(Vp), Kp = function (e) { Ir(n, e); var t = fr(n); function n(e) { return cr(this, n), t.call(this, e) } return dr(n, [{ key: "load", value: function (e, t, n, i) { var r = new bu; r.colorSpace = us; var a = new Yp(this.manager); a.setCrossOrigin(this.crossOrigin), a.setPath(this.path); var o = 0; function s(n) { a.load(e[n], (function (e) { r.images[n] = e, 6 === ++o && (r.needsUpdate = !0, t && t(r)) }), void 0, i) } for (var l = 0; l < e.length; ++l)s(l); return r } }]), n }(Vp), Lp = function (e) { Ir(n, e); var t = fr(n); function n(e) { return cr(this, n), t.call(this, e) } return dr(n, [{ key: "load", value: function (e, t, n, i) { var r = this, a = new DI, o = new Fp(this.manager); return o.setResponseType("arraybuffer"), o.setRequestHeader(this.requestHeader), o.setPath(this.path), o.setWithCredentials(r.withCredentials), o.load(e, (function (e) { var n; try { n = r.parse(e) } catch (o) { if (void 0 === i) return void console.error(o); i(o) } void 0 !== n.image ? a.image = n.image : void 0 !== n.data && (a.image.width = n.width, a.image.height = n.height, a.image.data = n.data), a.wrapS = void 0 !== n.wrapS ? n.wrapS : Va, a.wrapT = void 0 !== n.wrapT ? n.wrapT : Va, a.magFilter = void 0 !== n.magFilter ? n.magFilter : Ya, a.minFilter = void 0 !== n.minFilter ? n.minFilter : Ya, a.anisotropy = void 0 !== n.anisotropy ? n.anisotropy : 1, void 0 !== n.colorSpace ? a.colorSpace = n.colorSpace : void 0 !== n.encoding && (a.encoding = n.encoding), void 0 !== n.flipY && (a.flipY = n.flipY), void 0 !== n.format && (a.format = n.format), void 0 !== n.type && (a.type = n.type), void 0 !== n.mipmaps && (a.mipmaps = n.mipmaps, a.minFilter = za), 1 === n.mipmapCount && (a.minFilter = Ya), void 0 !== n.generateMipmaps && (a.generateMipmaps = n.generateMipmaps), a.needsUpdate = !0, t && t(a, n) }), n, i), a } }]), n }(Vp), zp = function (e) { Ir(n, e); var t = fr(n); function n(e) { return cr(this, n), t.call(this, e) } return dr(n, [{ key: "load", value: function (e, t, n, i) { var r = new zl, a = new Yp(this.manager); return a.setCrossOrigin(this.crossOrigin), a.setPath(this.path), a.load(e, (function (e) { r.image = e, r.needsUpdate = !0, void 0 !== t && t(r) }), n, i), r } }]), n }(Vp), Ep = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; return cr(this, n), (i = t.call(this)).isLight = !0, i.type = "Light", i.color = new pc(e), i.intensity = r, i } return dr(n, [{ key: "dispose", value: function () { } }, { key: "copy", value: function (e, t) { return yr(hr(n.prototype), "copy", this).call(this, e, t), this.color.copy(e.color), this.intensity = e.intensity, this } }, { key: "toJSON", value: function (e) { var t = yr(hr(n.prototype), "toJSON", this).call(this, e); return t.object.color = this.color.getHex(), t.object.intensity = this.intensity, void 0 !== this.groundColor && (t.object.groundColor = this.groundColor.getHex()), void 0 !== this.distance && (t.object.distance = this.distance), void 0 !== this.angle && (t.object.angle = this.angle), void 0 !== this.decay && (t.object.decay = this.decay), void 0 !== this.penumbra && (t.object.penumbra = this.penumbra), void 0 !== this.shadow && (t.object.shadow = this.shadow.toJSON()), t } }]), n }(qg), Tp = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { var a; return cr(this, n), (a = t.call(this, e, r)).isHemisphereLight = !0, a.type = "HemisphereLight", a.position.copy(qg.DEFAULT_UP), a.updateMatrix(), a.groundColor = new pc(i), a } return dr(n, [{ key: "copy", value: function (e, t) { return yr(hr(n.prototype), "copy", this).call(this, e, t), this.groundColor.copy(e.groundColor), this } }]), n }(Ep), _p = new Sg, Up = new Ql, Dp = new Ql, Pp = function () { function e(t) { cr(this, e), this.camera = t, this.bias = 0, this.normalBias = 0, this.radius = 1, this.blurSamples = 8, this.mapSize = new fl(512, 512), this.map = null, this.mapPass = null, this.matrix = new Sg, this.autoUpdate = !0, this.needsUpdate = !1, this._frustum = new xu, this._frameExtents = new fl(1, 1), this._viewportCount = 1, this._viewports = [new El(0, 0, 1, 1)] } return dr(e, [{ key: "getViewportCount", value: function () { return this._viewportCount } }, { key: "getFrustum", value: function () { return this._frustum } }, { key: "updateMatrices", value: function (e) { var t = this.camera, n = this.matrix; Up.setFromMatrixPosition(e.matrixWorld), t.position.copy(Up), Dp.setFromMatrixPosition(e.target.matrixWorld), t.lookAt(Dp), t.updateMatrixWorld(), _p.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse), this._frustum.setFromProjectionMatrix(_p), n.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1), n.multiply(_p) } }, { key: "getViewport", value: function (e) { return this._viewports[e] } }, { key: "getFrameExtents", value: function () { return this._frameExtents } }, { key: "dispose", value: function () { this.map && this.map.dispose(), this.mapPass && this.mapPass.dispose() } }, { key: "copy", value: function (e) { return this.camera = e.camera.clone(), this.bias = e.bias, this.radius = e.radius, this.mapSize.copy(e.mapSize), this } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }, { key: "toJSON", value: function () { var e = {}; return 0 !== this.bias && (e.bias = this.bias), 0 !== this.normalBias && (e.normalBias = this.normalBias), 1 !== this.radius && (e.radius = this.radius), 512 === this.mapSize.x && 512 === this.mapSize.y || (e.mapSize = this.mapSize.toArray()), e.camera = this.camera.toJSON(!1).object, delete e.camera.matrix, e } }]), e }(), Jp = function (e) { Ir(n, e); var t = fr(n); function n() { var e; return cr(this, n), (e = t.call(this, new fu(50, 1, .5, 500))).isSpotLightShadow = !0, e.focus = 1, e } return dr(n, [{ key: "updateMatrices", value: function (e) { var t = this.camera, i = 2 * sl * e.angle * this.focus, r = this.mapSize.width / this.mapSize.height, a = e.distance || t.far; i === t.fov && r === t.aspect && a === t.far || (t.fov = i, t.aspect = r, t.far = a, t.updateProjectionMatrix()), yr(hr(n.prototype), "updateMatrices", this).call(this, e) } }, { key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.focus = e.focus, this } }]), n }(Pp), Op = function (e) { Ir(n, e); var t = fr(n); function n(e, i) { var r, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : Math.PI / 3, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0, l = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 2; return cr(this, n), (r = t.call(this, e, i)).isSpotLight = !0, r.type = "SpotLight", r.position.copy(qg.DEFAULT_UP), r.updateMatrix(), r.target = new qg, r.distance = a, r.angle = o, r.penumbra = s, r.decay = l, r.map = null, r.shadow = new Jp, r } return dr(n, [{ key: "power", get: function () { return this.intensity * Math.PI }, set: function (e) { this.intensity = e / Math.PI } }, { key: "dispose", value: function () { this.shadow.dispose() } }, { key: "copy", value: function (e, t) { return yr(hr(n.prototype), "copy", this).call(this, e, t), this.distance = e.distance, this.angle = e.angle, this.penumbra = e.penumbra, this.decay = e.decay, this.target = e.target.clone(), this.shadow = e.shadow.clone(), this } }]), n }(Ep), jp = new Sg, Qp = new Ql, qp = new Ql, $p = function (e) { Ir(n, e); var t = fr(n); function n() { var e; return cr(this, n), (e = t.call(this, new fu(90, 1, .5, 500))).isPointLightShadow = !0, e._frameExtents = new fl(4, 2), e._viewportCount = 6, e._viewports = [new El(2, 1, 1, 1), new El(0, 1, 1, 1), new El(3, 1, 1, 1), new El(1, 1, 1, 1), new El(3, 0, 1, 1), new El(1, 0, 1, 1)], e._cubeDirections = [new Ql(1, 0, 0), new Ql(-1, 0, 0), new Ql(0, 0, 1), new Ql(0, 0, -1), new Ql(0, 1, 0), new Ql(0, -1, 0)], e._cubeUps = [new Ql(0, 1, 0), new Ql(0, 1, 0), new Ql(0, 1, 0), new Ql(0, 1, 0), new Ql(0, 0, 1), new Ql(0, 0, -1)], e } return dr(n, [{ key: "updateMatrices", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = this.camera, i = this.matrix, r = e.distance || n.far; r !== n.far && (n.far = r, n.updateProjectionMatrix()), Qp.setFromMatrixPosition(e.matrixWorld), n.position.copy(Qp), qp.copy(n.position), qp.add(this._cubeDirections[t]), n.up.copy(this._cubeUps[t]), n.lookAt(qp), n.updateMatrixWorld(), i.makeTranslation(-Qp.x, -Qp.y, -Qp.z), jp.multiplyMatrices(n.projectionMatrix, n.matrixWorldInverse), this._frustum.setFromProjectionMatrix(jp) } }]), n }(Pp), ef = function (e) { Ir(n, e); var t = fr(n); function n(e, i) { var r, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 2; return cr(this, n), (r = t.call(this, e, i)).isPointLight = !0, r.type = "PointLight", r.distance = a, r.decay = o, r.shadow = new $p, r } return dr(n, [{ key: "power", get: function () { return 4 * this.intensity * Math.PI }, set: function (e) { this.intensity = e / (4 * Math.PI) } }, { key: "dispose", value: function () { this.shadow.dispose() } }, { key: "copy", value: function (e, t) { return yr(hr(n.prototype), "copy", this).call(this, e, t), this.distance = e.distance, this.decay = e.decay, this.shadow = e.shadow.clone(), this } }]), n }(Ep), tf = function (e) { Ir(n, e); var t = fr(n); function n() { var e; return cr(this, n), (e = t.call(this, new Tu(-5, 5, 5, -5, .5, 500))).isDirectionalLightShadow = !0, e } return dr(n) }(Pp), nf = function (e) { Ir(n, e); var t = fr(n); function n(e, i) { var r; return cr(this, n), (r = t.call(this, e, i)).isDirectionalLight = !0, r.type = "DirectionalLight", r.position.copy(qg.DEFAULT_UP), r.updateMatrix(), r.target = new qg, r.shadow = new tf, r } return dr(n, [{ key: "dispose", value: function () { this.shadow.dispose() } }, { key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.target = e.target.clone(), this.shadow = e.shadow.clone(), this } }]), n }(Ep), rf = function (e) { Ir(n, e); var t = fr(n); function n(e, i) { var r; return cr(this, n), (r = t.call(this, e, i)).isAmbientLight = !0, r.type = "AmbientLight", r } return dr(n) }(Ep), af = function (e) { Ir(n, e); var t = fr(n); function n(e, i) { var r, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 10, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 10; return cr(this, n), (r = t.call(this, e, i)).isRectAreaLight = !0, r.type = "RectAreaLight", r.width = a, r.height = o, r } return dr(n, [{ key: "power", get: function () { return this.intensity * this.width * this.height * Math.PI }, set: function (e) { this.intensity = e / (this.width * this.height * Math.PI) } }, { key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.width = e.width, this.height = e.height, this } }, { key: "toJSON", value: function (e) { var t = yr(hr(n.prototype), "toJSON", this).call(this, e); return t.object.width = this.width, t.object.height = this.height, t } }]), n }(Ep), of = function () { function e() { cr(this, e), this.isSphericalHarmonics3 = !0, this.coefficients = []; for (var t = 0; t < 9; t++)this.coefficients.push(new Ql) } return dr(e, [{ key: "set", value: function (e) { for (var t = 0; t < 9; t++)this.coefficients[t].copy(e[t]); return this } }, { key: "zero", value: function () { for (var e = 0; e < 9; e++)this.coefficients[e].set(0, 0, 0); return this } }, { key: "getAt", value: function (e, t) { var n = e.x, i = e.y, r = e.z, a = this.coefficients; return t.copy(a[0]).multiplyScalar(.282095), t.addScaledVector(a[1], .488603 * i), t.addScaledVector(a[2], .488603 * r), t.addScaledVector(a[3], .488603 * n), t.addScaledVector(a[4], n * i * 1.092548), t.addScaledVector(a[5], i * r * 1.092548), t.addScaledVector(a[6], .315392 * (3 * r * r - 1)), t.addScaledVector(a[7], n * r * 1.092548), t.addScaledVector(a[8], .546274 * (n * n - i * i)), t } }, { key: "getIrradianceAt", value: function (e, t) { var n = e.x, i = e.y, r = e.z, a = this.coefficients; return t.copy(a[0]).multiplyScalar(.886227), t.addScaledVector(a[1], 1.023328 * i), t.addScaledVector(a[2], 1.023328 * r), t.addScaledVector(a[3], 1.023328 * n), t.addScaledVector(a[4], .858086 * n * i), t.addScaledVector(a[5], .858086 * i * r), t.addScaledVector(a[6], .743125 * r * r - .247708), t.addScaledVector(a[7], .858086 * n * r), t.addScaledVector(a[8], .429043 * (n * n - i * i)), t } }, { key: "add", value: function (e) { for (var t = 0; t < 9; t++)this.coefficients[t].add(e.coefficients[t]); return this } }, { key: "addScaledSH", value: function (e, t) { for (var n = 0; n < 9; n++)this.coefficients[n].addScaledVector(e.coefficients[n], t); return this } }, { key: "scale", value: function (e) { for (var t = 0; t < 9; t++)this.coefficients[t].multiplyScalar(e); return this } }, { key: "lerp", value: function (e, t) { for (var n = 0; n < 9; n++)this.coefficients[n].lerp(e.coefficients[n], t); return this } }, { key: "equals", value: function (e) { for (var t = 0; t < 9; t++)if (!this.coefficients[t].equals(e.coefficients[t])) return !1; return !0 } }, { key: "copy", value: function (e) { return this.set(e.coefficients) } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }, { key: "fromArray", value: function (e) { for (var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = this.coefficients, i = 0; i < 9; i++)n[i].fromArray(e, t + 3 * i); return this } }, { key: "toArray", value: function () { for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = this.coefficients, i = 0; i < 9; i++)n[i].toArray(e, t + 3 * i); return e } }], [{ key: "getBasisAt", value: function (e, t) { var n = e.x, i = e.y, r = e.z; t[0] = .282095, t[1] = .488603 * i, t[2] = .488603 * r, t[3] = .488603 * n, t[4] = 1.092548 * n * i, t[5] = 1.092548 * i * r, t[6] = .315392 * (3 * r * r - 1), t[7] = 1.092548 * n * r, t[8] = .546274 * (n * n - i * i) } }]), e }(), sf = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new of, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; return cr(this, n), (e = t.call(this, void 0, r)).isLightProbe = !0, e.sh = i, e } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.sh.copy(e.sh), this } }, { key: "fromJSON", value: function (e) { return this.intensity = e.intensity, this.sh.fromArray(e.sh), this } }, { key: "toJSON", value: function (e) { var t = yr(hr(n.prototype), "toJSON", this).call(this, e); return t.object.sh = this.sh.toArray(), t } }]), n }(Ep), lf = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this, e)).textures = {}, i } return dr(n, [{ key: "load", value: function (e, t, n, i) { var r = this, a = new Fp(r.manager); a.setPath(r.path), a.setRequestHeader(r.requestHeader), a.setWithCredentials(r.withCredentials), a.load(e, (function (n) { try { t(r.parse(JSON.parse(n))) } catch (a) { i ? i(a) : console.error(a), r.manager.itemError(e) } }), n, i) } }, { key: "parse", value: function (e) { var t = this.textures; function i(e) { return void 0 === t[e] && console.warn("THREE.MaterialLoader: Undefined texture", e), t[e] } var r = n.createMaterialFromType(e.type); if (void 0 !== e.uuid && (r.uuid = e.uuid), void 0 !== e.name && (r.name = e.name), void 0 !== e.color && void 0 !== r.color && r.color.setHex(e.color), void 0 !== e.roughness && (r.roughness = e.roughness), void 0 !== e.metalness && (r.metalness = e.metalness), void 0 !== e.sheen && (r.sheen = e.sheen), void 0 !== e.sheenColor && (r.sheenColor = (new pc).setHex(e.sheenColor)), void 0 !== e.sheenRoughness && (r.sheenRoughness = e.sheenRoughness), void 0 !== e.emissive && void 0 !== r.emissive && r.emissive.setHex(e.emissive), void 0 !== e.specular && void 0 !== r.specular && r.specular.setHex(e.specular), void 0 !== e.specularIntensity && (r.specularIntensity = e.specularIntensity), void 0 !== e.specularColor && void 0 !== r.specularColor && r.specularColor.setHex(e.specularColor), void 0 !== e.shininess && (r.shininess = e.shininess), void 0 !== e.clearcoat && (r.clearcoat = e.clearcoat), void 0 !== e.clearcoatRoughness && (r.clearcoatRoughness = e.clearcoatRoughness), void 0 !== e.iridescence && (r.iridescence = e.iridescence), void 0 !== e.iridescenceIOR && (r.iridescenceIOR = e.iridescenceIOR), void 0 !== e.iridescenceThicknessRange && (r.iridescenceThicknessRange = e.iridescenceThicknessRange), void 0 !== e.transmission && (r.transmission = e.transmission), void 0 !== e.thickness && (r.thickness = e.thickness), void 0 !== e.attenuationDistance && (r.attenuationDistance = e.attenuationDistance), void 0 !== e.attenuationColor && void 0 !== r.attenuationColor && r.attenuationColor.setHex(e.attenuationColor), void 0 !== e.anisotropy && (r.anisotropy = e.anisotropy), void 0 !== e.anisotropyRotation && (r.anisotropyRotation = e.anisotropyRotation), void 0 !== e.fog && (r.fog = e.fog), void 0 !== e.flatShading && (r.flatShading = e.flatShading), void 0 !== e.blending && (r.blending = e.blending), void 0 !== e.combine && (r.combine = e.combine), void 0 !== e.side && (r.side = e.side), void 0 !== e.shadowSide && (r.shadowSide = e.shadowSide), void 0 !== e.opacity && (r.opacity = e.opacity), void 0 !== e.transparent && (r.transparent = e.transparent), void 0 !== e.alphaTest && (r.alphaTest = e.alphaTest), void 0 !== e.alphaHash && (r.alphaHash = e.alphaHash), void 0 !== e.depthTest && (r.depthTest = e.depthTest), void 0 !== e.depthWrite && (r.depthWrite = e.depthWrite), void 0 !== e.colorWrite && (r.colorWrite = e.colorWrite), void 0 !== e.stencilWrite && (r.stencilWrite = e.stencilWrite), void 0 !== e.stencilWriteMask && (r.stencilWriteMask = e.stencilWriteMask), void 0 !== e.stencilFunc && (r.stencilFunc = e.stencilFunc), void 0 !== e.stencilRef && (r.stencilRef = e.stencilRef), void 0 !== e.stencilFuncMask && (r.stencilFuncMask = e.stencilFuncMask), void 0 !== e.stencilFail && (r.stencilFail = e.stencilFail), void 0 !== e.stencilZFail && (r.stencilZFail = e.stencilZFail), void 0 !== e.stencilZPass && (r.stencilZPass = e.stencilZPass), void 0 !== e.wireframe && (r.wireframe = e.wireframe), void 0 !== e.wireframeLinewidth && (r.wireframeLinewidth = e.wireframeLinewidth), void 0 !== e.wireframeLinecap && (r.wireframeLinecap = e.wireframeLinecap), void 0 !== e.wireframeLinejoin && (r.wireframeLinejoin = e.wireframeLinejoin), void 0 !== e.rotation && (r.rotation = e.rotation), void 0 !== e.linewidth && (r.linewidth = e.linewidth), void 0 !== e.dashSize && (r.dashSize = e.dashSize), void 0 !== e.gapSize && (r.gapSize = e.gapSize), void 0 !== e.scale && (r.scale = e.scale), void 0 !== e.polygonOffset && (r.polygonOffset = e.polygonOffset), void 0 !== e.polygonOffsetFactor && (r.polygonOffsetFactor = e.polygonOffsetFactor), void 0 !== e.polygonOffsetUnits && (r.polygonOffsetUnits = e.polygonOffsetUnits), void 0 !== e.dithering && (r.dithering = e.dithering), void 0 !== e.alphaToCoverage && (r.alphaToCoverage = e.alphaToCoverage), void 0 !== e.premultipliedAlpha && (r.premultipliedAlpha = e.premultipliedAlpha), void 0 !== e.forceSinglePass && (r.forceSinglePass = e.forceSinglePass), void 0 !== e.visible && (r.visible = e.visible), void 0 !== e.toneMapped && (r.toneMapped = e.toneMapped), void 0 !== e.userData && (r.userData = e.userData), void 0 !== e.vertexColors && ("number" === typeof e.vertexColors ? r.vertexColors = e.vertexColors > 0 : r.vertexColors = e.vertexColors), void 0 !== e.uniforms) for (var a in e.uniforms) { var o = e.uniforms[a]; switch (r.uniforms[a] = {}, o.type) { case "t": r.uniforms[a].value = i(o.value); break; case "c": r.uniforms[a].value = (new pc).setHex(o.value); break; case "v2": r.uniforms[a].value = (new fl).fromArray(o.value); break; case "v3": r.uniforms[a].value = (new Ql).fromArray(o.value); break; case "v4": r.uniforms[a].value = (new El).fromArray(o.value); break; case "m3": r.uniforms[a].value = (new ml).fromArray(o.value); break; case "m4": r.uniforms[a].value = (new Sg).fromArray(o.value); break; default: r.uniforms[a].value = o.value } } if (void 0 !== e.defines && (r.defines = e.defines), void 0 !== e.vertexShader && (r.vertexShader = e.vertexShader), void 0 !== e.fragmentShader && (r.fragmentShader = e.fragmentShader), void 0 !== e.glslVersion && (r.glslVersion = e.glslVersion), void 0 !== e.extensions) for (var s in e.extensions) r.extensions[s] = e.extensions[s]; if (void 0 !== e.lights && (r.lights = e.lights), void 0 !== e.clipping && (r.clipping = e.clipping), void 0 !== e.size && (r.size = e.size), void 0 !== e.sizeAttenuation && (r.sizeAttenuation = e.sizeAttenuation), void 0 !== e.map && (r.map = i(e.map)), void 0 !== e.matcap && (r.matcap = i(e.matcap)), void 0 !== e.alphaMap && (r.alphaMap = i(e.alphaMap)), void 0 !== e.bumpMap && (r.bumpMap = i(e.bumpMap)), void 0 !== e.bumpScale && (r.bumpScale = e.bumpScale), void 0 !== e.normalMap && (r.normalMap = i(e.normalMap)), void 0 !== e.normalMapType && (r.normalMapType = e.normalMapType), void 0 !== e.normalScale) { var l = e.normalScale; !1 === Array.isArray(l) && (l = [l, l]), r.normalScale = (new fl).fromArray(l) } return void 0 !== e.displacementMap && (r.displacementMap = i(e.displacementMap)), void 0 !== e.displacementScale && (r.displacementScale = e.displacementScale), void 0 !== e.displacementBias && (r.displacementBias = e.displacementBias), void 0 !== e.roughnessMap && (r.roughnessMap = i(e.roughnessMap)), void 0 !== e.metalnessMap && (r.metalnessMap = i(e.metalnessMap)), void 0 !== e.emissiveMap && (r.emissiveMap = i(e.emissiveMap)), void 0 !== e.emissiveIntensity && (r.emissiveIntensity = e.emissiveIntensity), void 0 !== e.specularMap && (r.specularMap = i(e.specularMap)), void 0 !== e.specularIntensityMap && (r.specularIntensityMap = i(e.specularIntensityMap)), void 0 !== e.specularColorMap && (r.specularColorMap = i(e.specularColorMap)), void 0 !== e.envMap && (r.envMap = i(e.envMap)), void 0 !== e.envMapIntensity && (r.envMapIntensity = e.envMapIntensity), void 0 !== e.reflectivity && (r.reflectivity = e.reflectivity), void 0 !== e.refractionRatio && (r.refractionRatio = e.refractionRatio), void 0 !== e.lightMap && (r.lightMap = i(e.lightMap)), void 0 !== e.lightMapIntensity && (r.lightMapIntensity = e.lightMapIntensity), void 0 !== e.aoMap && (r.aoMap = i(e.aoMap)), void 0 !== e.aoMapIntensity && (r.aoMapIntensity = e.aoMapIntensity), void 0 !== e.gradientMap && (r.gradientMap = i(e.gradientMap)), void 0 !== e.clearcoatMap && (r.clearcoatMap = i(e.clearcoatMap)), void 0 !== e.clearcoatRoughnessMap && (r.clearcoatRoughnessMap = i(e.clearcoatRoughnessMap)), void 0 !== e.clearcoatNormalMap && (r.clearcoatNormalMap = i(e.clearcoatNormalMap)), void 0 !== e.clearcoatNormalScale && (r.clearcoatNormalScale = (new fl).fromArray(e.clearcoatNormalScale)), void 0 !== e.iridescenceMap && (r.iridescenceMap = i(e.iridescenceMap)), void 0 !== e.iridescenceThicknessMap && (r.iridescenceThicknessMap = i(e.iridescenceThicknessMap)), void 0 !== e.transmissionMap && (r.transmissionMap = i(e.transmissionMap)), void 0 !== e.thicknessMap && (r.thicknessMap = i(e.thicknessMap)), void 0 !== e.anisotropyMap && (r.anisotropyMap = i(e.anisotropyMap)), void 0 !== e.sheenColorMap && (r.sheenColorMap = i(e.sheenColorMap)), void 0 !== e.sheenRoughnessMap && (r.sheenRoughnessMap = i(e.sheenRoughnessMap)), r } }, { key: "setTextures", value: function (e) { return this.textures = e, this } }], [{ key: "createMaterialFromType", value: function (e) { return new { ShadowMaterial: qA, SpriteMaterial: pI, RawShaderMaterial: $A, ShaderMaterial: Au, PointsMaterial: Ah, MeshPhysicalMaterial: tp, MeshStandardMaterial: ep, MeshPhongMaterial: np, MeshToonMaterial: ip, MeshNormalMaterial: rp, MeshLambertMaterial: ap, MeshDepthMaterial: Jd, MeshDistanceMaterial: Od, MeshBasicMaterial: mc, MeshMatcapMaterial: op, LineDashedMaterial: sp, LineBasicMaterial: ah, Material: Cc }[e] } }]), n }(Vp), gf = function () { function e() { cr(this, e) } return dr(e, null, [{ key: "decodeText", value: function (e) { if ("undefined" !== typeof TextDecoder) return (new TextDecoder).decode(e); for (var t = "", n = 0, i = e.length; n < i; n++)t += String.fromCharCode(e[n]); try { return decodeURIComponent(escape(t)) } catch (r) { return t } } }, { key: "extractUrlBase", value: function (e) { var t = e.lastIndexOf("/"); return -1 === t ? "./" : e.slice(0, t + 1) } }, { key: "resolveURL", value: function (e, t) { return "string" !== typeof e || "" === e ? "" : (/^https?:\/\//i.test(t) && /^\//.test(e) && (t = t.replace(/(^https?:\/\/[^\/]+).*/i, "$1")), /^(https?:)?\/\//i.test(e) || /^data:.*,.*$/i.test(e) || /^blob:.*$/i.test(e) ? e : t + e) } }]), e }(), cf = function (e) { Ir(n, e); var t = fr(n); function n() { var e; return cr(this, n), (e = t.call(this)).isInstancedBufferGeometry = !0, e.type = "InstancedBufferGeometry", e.instanceCount = 1 / 0, e } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.instanceCount = e.instanceCount, this } }, { key: "toJSON", value: function () { var e = yr(hr(n.prototype), "toJSON", this).call(this); return e.instanceCount = this.instanceCount, e.isInstancedBufferGeometry = !0, e } }]), n }(Uc), uf = function (e) { Ir(n, e); var t = fr(n); function n(e) { return cr(this, n), t.call(this, e) } return dr(n, [{ key: "load", value: function (e, t, n, i) { var r = this, a = new Fp(r.manager); a.setPath(r.path), a.setRequestHeader(r.requestHeader), a.setWithCredentials(r.withCredentials), a.load(e, (function (n) { try { t(r.parse(JSON.parse(n))) } catch (a) { i ? i(a) : console.error(a), r.manager.itemError(e) } }), n, i) } }, { key: "parse", value: function (e) { var t = {}, n = {}; function i(e, i) { if (void 0 !== t[i]) return t[i]; var r = e.interleavedBuffers[i], a = function (e, t) { if (void 0 !== n[t]) return n[t]; var i = e.arrayBuffers, r = i[t], a = new Uint32Array(r).buffer; return n[t] = a, a }(e, r.buffer), o = Gl(r.type, a), s = new II(o, r.stride); return s.uuid = r.uuid, t[i] = s, s } var r = e.isInstancedBufferGeometry ? new cf : new Uc, a = e.data.index; if (void 0 !== a) { var o = Gl(a.type, a.array); r.setIndex(new Sc(o, 1)) } var s = e.data.attributes; for (var l in s) { var g = s[l], c = void 0; if (g.isInterleavedBufferAttribute) { var u = i(e.data, g.data); c = new AI(u, g.itemSize, g.offset, g.normalized) } else { var C = Gl(g.type, g.array); c = new (g.isInstancedBufferAttribute ? jI : Sc)(C, g.itemSize, g.normalized) } void 0 !== g.name && (c.name = g.name), void 0 !== g.usage && c.setUsage(g.usage), void 0 !== g.updateRange && (c.updateRange.offset = g.updateRange.offset, c.updateRange.count = g.updateRange.count), r.setAttribute(l, c) } var d = e.data.morphAttributes; if (d) for (var I in d) { for (var h = d[I], A = [], p = 0, f = h.length; p < f; p++) { var m = h[p], v = void 0; if (m.isInterleavedBufferAttribute) { var b = i(e.data, m.data); v = new AI(b, m.itemSize, m.offset, m.normalized) } else { var y = Gl(m.type, m.array); v = new Sc(y, m.itemSize, m.normalized) } void 0 !== m.name && (v.name = m.name), A.push(v) } r.morphAttributes[I] = A } e.data.morphTargetsRelative && (r.morphTargetsRelative = !0); var G = e.data.groups || e.data.drawcalls || e.data.offsets; if (void 0 !== G) for (var B = 0, Z = G.length; B !== Z; ++B) { var w = G[B]; r.addGroup(w.start, w.count, w.materialIndex) } var S = e.data.boundingSphere; if (void 0 !== S) { var R = new Ql; void 0 !== S.center && R.fromArray(S.center), r.boundingSphere = new fg(R, S.radius) } return e.name && (r.name = e.name), e.userData && (r.userData = e.userData), r } }]), n }(Vp), Cf = function (e) { Ir(n, e); var t = fr(n); function n(e) { return cr(this, n), t.call(this, e) } return dr(n, [{ key: "load", value: function (e, t, n, i) { var r = this, a = "" === this.path ? gf.extractUrlBase(e) : this.path; this.resourcePath = this.resourcePath || a; var o = new Fp(this.manager); o.setPath(this.path), o.setRequestHeader(this.requestHeader), o.setWithCredentials(this.withCredentials), o.load(e, (function (n) { var a = null; try { a = JSON.parse(n) } catch (s) { return void 0 !== i && i(s), void console.error("THREE:ObjectLoader: Can't parse " + e + ".", s.message) } var o = a.metadata; if (void 0 === o || void 0 === o.type || "geometry" === o.type.toLowerCase()) return void 0 !== i && i(new Error("THREE.ObjectLoader: Can't load " + e)), void console.error("THREE.ObjectLoader: Can't load " + e); r.parse(a, t) }), n, i) } }, { key: "loadAsync", value: function () { var e = br(Gr().mark((function e(t, n) { var i, r, a, o, s, l; return Gr().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return i = this, r = "" === this.path ? gf.extractUrlBase(t) : this.path, this.resourcePath = this.resourcePath || r, (a = new Fp(this.manager)).setPath(this.path), a.setRequestHeader(this.requestHeader), a.setWithCredentials(this.withCredentials), e.next = 9, a.loadAsync(t, n); case 9: if (o = e.sent, s = JSON.parse(o), void 0 !== (l = s.metadata) && void 0 !== l.type && "geometry" !== l.type.toLowerCase()) { e.next = 14; break } throw new Error("THREE.ObjectLoader: Can't load " + t); case 14: return e.next = 16, i.parseAsync(s); case 16: return e.abrupt("return", e.sent); case 17: case "end": return e.stop() } }), e, this) }))); return function (t, n) { return e.apply(this, arguments) } }() }, { key: "parse", value: function (e, t) { var n = this.parseAnimations(e.animations), i = this.parseShapes(e.shapes), r = this.parseGeometries(e.geometries, i), a = this.parseImages(e.images, (function () { void 0 !== t && t(l) })), o = this.parseTextures(e.textures, a), s = this.parseMaterials(e.materials, o), l = this.parseObject(e.object, r, s, o, n), g = this.parseSkeletons(e.skeletons, l); if (this.bindSkeletons(l, g), void 0 !== t) { var c = !1; for (var u in a) if (a[u].data instanceof HTMLImageElement) { c = !0; break } !1 === c && t(l) } return l } }, { key: "parseAsync", value: function () { var e = br(Gr().mark((function e(t) { var n, i, r, a, o, s, l, g; return Gr().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return n = this.parseAnimations(t.animations), i = this.parseShapes(t.shapes), r = this.parseGeometries(t.geometries, i), e.next = 5, this.parseImagesAsync(t.images); case 5: return a = e.sent, o = this.parseTextures(t.textures, a), s = this.parseMaterials(t.materials, o), l = this.parseObject(t.object, r, s, o, n), g = this.parseSkeletons(t.skeletons, l), this.bindSkeletons(l, g), e.abrupt("return", l); case 12: case "end": return e.stop() } }), e, this) }))); return function (t) { return e.apply(this, arguments) } }() }, { key: "parseShapes", value: function (e) { var t = {}; if (void 0 !== e) for (var n = 0, i = e.length; n < i; n++) { var r = (new gA).fromJSON(e[n]); t[r.uuid] = r } return t } }, { key: "parseSkeletons", value: function (e, t) { var n = {}, i = {}; if (t.traverse((function (e) { e.isBone && (i[e.uuid] = e) })), void 0 !== e) for (var r = 0, a = e.length; r < a; r++) { var o = (new OI).fromJSON(e[r], i); n[o.uuid] = o } return n } }, { key: "parseGeometries", value: function (e, t) { var n = {}; if (void 0 !== e) for (var i = new uf, r = 0, a = e.length; r < a; r++) { var o = void 0, s = e[r]; switch (s.type) { case "BufferGeometry": case "InstancedBufferGeometry": o = i.parse(s); break; default: s.type in QA ? o = QA[s.type].fromJSON(s, t) : console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type, '"')) }o.uuid = s.uuid, void 0 !== s.name && (o.name = s.name), void 0 !== s.userData && (o.userData = s.userData), n[s.uuid] = o } return n } }, { key: "parseMaterials", value: function (e, t) { var n = {}, i = {}; if (void 0 !== e) { var r = new lf; r.setTextures(t); for (var a = 0, o = e.length; a < o; a++) { var s = e[a]; void 0 === n[s.uuid] && (n[s.uuid] = r.parse(s)), i[s.uuid] = n[s.uuid] } } return i } }, { key: "parseAnimations", value: function (e) { var t = {}; if (void 0 !== e) for (var n = 0; n < e.length; n++) { var i = e[n], r = wp.parse(i); t[r.uuid] = r } return t } }, { key: "parseImages", value: function (e, t) { var n, i = this, r = {}; function a(e) { if ("string" === typeof e) { var t = e; return function (e) { return i.manager.itemStart(e), n.load(e, (function () { i.manager.itemEnd(e) }), void 0, (function () { i.manager.itemError(e), i.manager.itemEnd(e) })) }(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t) ? t : i.resourcePath + t) } return e.data ? { data: Gl(e.type, e.data), width: e.width, height: e.height } : null } if (void 0 !== e && e.length > 0) { var o = new xp(t); (n = new Yp(o)).setCrossOrigin(this.crossOrigin); for (var s = 0, l = e.length; s < l; s++) { var g = e[s], c = g.url; if (Array.isArray(c)) { for (var u = [], C = 0, d = c.length; C < d; C++) { var I = a(c[C]); null !== I && (I instanceof HTMLImageElement ? u.push(I) : u.push(new DI(I.data, I.width, I.height))) } r[g.uuid] = new Yl(u) } else { var h = a(g.url); r[g.uuid] = new Yl(h) } } } return r } }, { key: "parseImagesAsync", value: function () { var e = br(Gr().mark((function e(t) { var n, i, r, a, o, s, l, g, c, u, C, d, I, h, A; return Gr().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (o = function () { return o = br(Gr().mark((function e(t) { var i, a; return Gr().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if ("string" !== typeof t) { e.next = 8; break } return a = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(i = t) ? i : n.resourcePath + i, e.next = 5, r.loadAsync(a); case 5: return e.abrupt("return", e.sent); case 8: if (!t.data) { e.next = 12; break } return e.abrupt("return", { data: Gl(t.type, t.data), width: t.width, height: t.height }); case 12: return e.abrupt("return", null); case 13: case "end": return e.stop() } }), e) }))), o.apply(this, arguments) }, a = function (e) { return o.apply(this, arguments) }, n = this, i = {}, !(void 0 !== t && t.length > 0)) { e.next = 33; break } (r = new Yp(this.manager)).setCrossOrigin(this.crossOrigin), s = 0, l = t.length; case 8: if (!(s < l)) { e.next = 33; break } if (g = t[s], c = g.url, !Array.isArray(c)) { e.next = 26; break } u = [], C = 0, d = c.length; case 14: if (!(C < d)) { e.next = 23; break } return I = c[C], e.next = 18, a(I); case 18: null !== (h = e.sent) && (h instanceof HTMLImageElement ? u.push(h) : u.push(new DI(h.data, h.width, h.height))); case 20: C++, e.next = 14; break; case 23: i[g.uuid] = new Yl(u), e.next = 30; break; case 26: return e.next = 28, a(g.url); case 28: A = e.sent, i[g.uuid] = new Yl(A); case 30: s++, e.next = 8; break; case 33: return e.abrupt("return", i); case 34: case "end": return e.stop() } }), e, this) }))); return function (t) { return e.apply(this, arguments) } }() }, { key: "parseTextures", value: function (e, t) { function n(e, t) { return "number" === typeof e ? e : (console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.", e), t[e]) } var i = {}; if (void 0 !== e) for (var r = 0, a = e.length; r < a; r++) { var o = e[r]; void 0 === o.image && console.warn('THREE.ObjectLoader: No "image" specified for', o.uuid), void 0 === t[o.image] && console.warn("THREE.ObjectLoader: Undefined image", o.image); var s = t[o.image], l = s.data, g = void 0; Array.isArray(l) ? (g = new bu, 6 === l.length && (g.needsUpdate = !0)) : (g = l && l.data ? new DI : new zl, l && (g.needsUpdate = !0)), g.source = s, g.uuid = o.uuid, void 0 !== o.name && (g.name = o.name), void 0 !== o.mapping && (g.mapping = n(o.mapping, df)), void 0 !== o.channel && (g.channel = o.channel), void 0 !== o.offset && g.offset.fromArray(o.offset), void 0 !== o.repeat && g.repeat.fromArray(o.repeat), void 0 !== o.center && g.center.fromArray(o.center), void 0 !== o.rotation && (g.rotation = o.rotation), void 0 !== o.wrap && (g.wrapS = n(o.wrap[0], If), g.wrapT = n(o.wrap[1], If)), void 0 !== o.format && (g.format = o.format), void 0 !== o.internalFormat && (g.internalFormat = o.internalFormat), void 0 !== o.type && (g.type = o.type), void 0 !== o.colorSpace && (g.colorSpace = o.colorSpace), void 0 !== o.encoding && (g.encoding = o.encoding), void 0 !== o.minFilter && (g.minFilter = n(o.minFilter, hf)), void 0 !== o.magFilter && (g.magFilter = n(o.magFilter, hf)), void 0 !== o.anisotropy && (g.anisotropy = o.anisotropy), void 0 !== o.flipY && (g.flipY = o.flipY), void 0 !== o.generateMipmaps && (g.generateMipmaps = o.generateMipmaps), void 0 !== o.premultiplyAlpha && (g.premultiplyAlpha = o.premultiplyAlpha), void 0 !== o.unpackAlignment && (g.unpackAlignment = o.unpackAlignment), void 0 !== o.compareFunction && (g.compareFunction = o.compareFunction), void 0 !== o.userData && (g.userData = o.userData), i[o.uuid] = g } return i } }, { key: "parseObject", value: function (e, t, n, i, r) { var a, o, s; function l(e) { return void 0 === t[e] && console.warn("THREE.ObjectLoader: Undefined geometry", e), t[e] } function g(e) { if (void 0 !== e) { if (Array.isArray(e)) { for (var t = [], i = 0, r = e.length; i < r; i++) { var a = e[i]; void 0 === n[a] && console.warn("THREE.ObjectLoader: Undefined material", a), t.push(n[a]) } return t } return void 0 === n[e] && console.warn("THREE.ObjectLoader: Undefined material", e), n[e] } } function c(e) { return void 0 === i[e] && console.warn("THREE.ObjectLoader: Undefined texture", e), i[e] } switch (e.type) { case "Scene": a = new dI, void 0 !== e.background && (Number.isInteger(e.background) ? a.background = new pc(e.background) : a.background = c(e.background)), void 0 !== e.environment && (a.environment = c(e.environment)), void 0 !== e.fog && ("Fog" === e.fog.type ? a.fog = new CI(e.fog.color, e.fog.near, e.fog.far) : "FogExp2" === e.fog.type && (a.fog = new uI(e.fog.color, e.fog.density)), "" !== e.fog.name && (a.fog.name = e.fog.name)), void 0 !== e.backgroundBlurriness && (a.backgroundBlurriness = e.backgroundBlurriness), void 0 !== e.backgroundIntensity && (a.backgroundIntensity = e.backgroundIntensity); break; case "PerspectiveCamera": a = new fu(e.fov, e.aspect, e.near, e.far), void 0 !== e.focus && (a.focus = e.focus), void 0 !== e.zoom && (a.zoom = e.zoom), void 0 !== e.filmGauge && (a.filmGauge = e.filmGauge), void 0 !== e.filmOffset && (a.filmOffset = e.filmOffset), void 0 !== e.view && (a.view = Object.assign({}, e.view)); break; case "OrthographicCamera": a = new Tu(e.left, e.right, e.top, e.bottom, e.near, e.far), void 0 !== e.zoom && (a.zoom = e.zoom), void 0 !== e.view && (a.view = Object.assign({}, e.view)); break; case "AmbientLight": a = new rf(e.color, e.intensity); break; case "DirectionalLight": a = new nf(e.color, e.intensity); break; case "PointLight": a = new ef(e.color, e.intensity, e.distance, e.decay); break; case "RectAreaLight": a = new af(e.color, e.intensity, e.width, e.height); break; case "SpotLight": a = new Op(e.color, e.intensity, e.distance, e.angle, e.penumbra, e.decay); break; case "HemisphereLight": a = new Tp(e.color, e.groundColor, e.intensity); break; case "LightProbe": a = (new sf).fromJSON(e); break; case "SkinnedMesh": o = l(e.geometry), s = g(e.material), a = new _I(o, s), void 0 !== e.bindMode && (a.bindMode = e.bindMode), void 0 !== e.bindMatrix && a.bindMatrix.fromArray(e.bindMatrix), void 0 !== e.skeleton && (a.skeleton = e.skeleton); break; case "Mesh": o = l(e.geometry), s = g(e.material), a = new gu(o, s); break; case "InstancedMesh": o = l(e.geometry), s = g(e.material); var u = e.count, C = e.instanceMatrix, d = e.instanceColor; (a = new rh(o, s, u)).instanceMatrix = new jI(new Float32Array(C.array), 16), void 0 !== d && (a.instanceColor = new jI(new Float32Array(d.array), d.itemSize)); break; case "LOD": a = new MI; break; case "Line": a = new uh(l(e.geometry), g(e.material)); break; case "LineLoop": a = new hh(l(e.geometry), g(e.material)); break; case "LineSegments": a = new Ih(l(e.geometry), g(e.material)); break; case "PointCloud": case "Points": a = new bh(l(e.geometry), g(e.material)); break; case "Sprite": a = new WI(g(e.material)); break; case "Group": a = new tI; break; case "Bone": a = new UI; break; default: a = new qg }if (a.uuid = e.uuid, void 0 !== e.name && (a.name = e.name), void 0 !== e.matrix ? (a.matrix.fromArray(e.matrix), void 0 !== e.matrixAutoUpdate && (a.matrixAutoUpdate = e.matrixAutoUpdate), a.matrixAutoUpdate && a.matrix.decompose(a.position, a.quaternion, a.scale)) : (void 0 !== e.position && a.position.fromArray(e.position), void 0 !== e.rotation && a.rotation.fromArray(e.rotation), void 0 !== e.quaternion && a.quaternion.fromArray(e.quaternion), void 0 !== e.scale && a.scale.fromArray(e.scale)), void 0 !== e.up && a.up.fromArray(e.up), void 0 !== e.castShadow && (a.castShadow = e.castShadow), void 0 !== e.receiveShadow && (a.receiveShadow = e.receiveShadow), e.shadow && (void 0 !== e.shadow.bias && (a.shadow.bias = e.shadow.bias), void 0 !== e.shadow.normalBias && (a.shadow.normalBias = e.shadow.normalBias), void 0 !== e.shadow.radius && (a.shadow.radius = e.shadow.radius), void 0 !== e.shadow.mapSize && a.shadow.mapSize.fromArray(e.shadow.mapSize), void 0 !== e.shadow.camera && (a.shadow.camera = this.parseObject(e.shadow.camera))), void 0 !== e.visible && (a.visible = e.visible), void 0 !== e.frustumCulled && (a.frustumCulled = e.frustumCulled), void 0 !== e.renderOrder && (a.renderOrder = e.renderOrder), void 0 !== e.userData && (a.userData = e.userData), void 0 !== e.layers && (a.layers.mask = e.layers), void 0 !== e.children) for (var I = e.children, h = 0; h < I.length; h++)a.add(this.parseObject(I[h], t, n, i, r)); if (void 0 !== e.animations) for (var A = e.animations, p = 0; p < A.length; p++) { var f = A[p]; a.animations.push(r[f]) } if ("LOD" === e.type) { void 0 !== e.autoUpdate && (a.autoUpdate = e.autoUpdate); for (var m = e.levels, v = 0; v < m.length; v++) { var b = m[v], y = a.getObjectByProperty("uuid", b.object); void 0 !== y && a.addLevel(y, b.distance, b.hysteresis) } } return a } }, { key: "bindSkeletons", value: function (e, t) { 0 !== Object.keys(t).length && e.traverse((function (e) { if (!0 === e.isSkinnedMesh && void 0 !== e.skeleton) { var n = t[e.skeleton]; void 0 === n ? console.warn("THREE.ObjectLoader: No skeleton found with UUID:", e.skeleton) : e.bind(n, e.bindMatrix) } })) } }]), n }(Vp), df = { UVMapping: Ba, CubeReflectionMapping: Za, CubeRefractionMapping: wa, EquirectangularReflectionMapping: Sa, EquirectangularRefractionMapping: Ra, CubeUVReflectionMapping: xa }, If = { RepeatWrapping: Wa, ClampToEdgeWrapping: Va, MirroredRepeatWrapping: ka }, hf = { NearestFilter: Ha, NearestMipmapNearestFilter: Ma, NearestMipmapLinearFilter: Na, LinearFilter: Ya, LinearMipmapNearestFilter: Ka, LinearMipmapLinearFilter: za }, Af = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this, e)).isImageBitmapLoader = !0, "undefined" === typeof createImageBitmap && console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."), "undefined" === typeof fetch && console.warn("THREE.ImageBitmapLoader: fetch() not supported."), i.options = { premultiplyAlpha: "none" }, i } return dr(n, [{ key: "setOptions", value: function (e) { return this.options = e, this } }, { key: "load", value: function (e, t, n, i) { void 0 === e && (e = ""), void 0 !== this.path && (e = this.path + e), e = this.manager.resolveURL(e); var r = this, a = Rp.get(e); if (void 0 !== a) return r.manager.itemStart(e), setTimeout((function () { t && t(a), r.manager.itemEnd(e) }), 0), a; var o = {}; o.credentials = "anonymous" === this.crossOrigin ? "same-origin" : "include", o.headers = this.requestHeader, fetch(e, o).then((function (e) { return e.blob() })).then((function (e) { return createImageBitmap(e, Object.assign(r.options, { colorSpaceConversion: "none" })) })).then((function (n) { Rp.add(e, n), t && t(n), r.manager.itemEnd(e) })).catch((function (t) { i && i(t), r.manager.itemError(e), r.manager.itemEnd(e) })), r.manager.itemStart(e) } }]), n }(Vp), pf = function () { function e() { cr(this, e) } return dr(e, null, [{ key: "getContext", value: function () { return void 0 === kp && (kp = new (window.AudioContext || window.webkitAudioContext)), kp } }, { key: "setContext", value: function (e) { kp = e } }]), e }(), ff = function (e) { Ir(n, e); var t = fr(n); function n(e) { return cr(this, n), t.call(this, e) } return dr(n, [{ key: "load", value: function (e, t, n, i) { var r = this, a = new Fp(this.manager); function o(t) { i ? i(t) : console.error(t), r.manager.itemError(e) } a.setResponseType("arraybuffer"), a.setPath(this.path), a.setRequestHeader(this.requestHeader), a.setWithCredentials(this.withCredentials), a.load(e, (function (e) { try { var n = e.slice(0); pf.getContext().decodeAudioData(n, (function (e) { t(e) }), o) } catch (i) { o(i) } }), n, i) } }]), n }(Vp), mf = new Sg, vf = new Sg, bf = new Sg, yf = function () { function e() { cr(this, e), this.type = "StereoCamera", this.aspect = 1, this.eyeSep = .064, this.cameraL = new fu, this.cameraL.layers.enable(1), this.cameraL.matrixAutoUpdate = !1, this.cameraR = new fu, this.cameraR.layers.enable(2), this.cameraR.matrixAutoUpdate = !1, this._cache = { focus: null, fov: null, aspect: null, near: null, far: null, zoom: null, eyeSep: null } } return dr(e, [{ key: "update", value: function (e) { var t = this._cache; if (t.focus !== e.focus || t.fov !== e.fov || t.aspect !== e.aspect * this.aspect || t.near !== e.near || t.far !== e.far || t.zoom !== e.zoom || t.eyeSep !== this.eyeSep) { t.focus = e.focus, t.fov = e.fov, t.aspect = e.aspect * this.aspect, t.near = e.near, t.far = e.far, t.zoom = e.zoom, t.eyeSep = this.eyeSep, bf.copy(e.projectionMatrix); var n, i, r = t.eyeSep / 2, a = r * t.near / t.focus, o = t.near * Math.tan(ol * t.fov * .5) / t.zoom; vf.elements[12] = -r, mf.elements[12] = r, n = -o * t.aspect + a, i = o * t.aspect + a, bf.elements[0] = 2 * t.near / (i - n), bf.elements[8] = (i + n) / (i - n), this.cameraL.projectionMatrix.copy(bf), n = -o * t.aspect - a, i = o * t.aspect - a, bf.elements[0] = 2 * t.near / (i - n), bf.elements[8] = (i + n) / (i - n), this.cameraR.projectionMatrix.copy(bf) } this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(vf), this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(mf) } }]), e }(), Gf = function () { function e() { var t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0]; cr(this, e), this.autoStart = t, this.startTime = 0, this.oldTime = 0, this.elapsedTime = 0, this.running = !1 } return dr(e, [{ key: "start", value: function () { this.startTime = Bf(), this.oldTime = this.startTime, this.elapsedTime = 0, this.running = !0 } }, { key: "stop", value: function () { this.getElapsedTime(), this.running = !1, this.autoStart = !1 } }, { key: "getElapsedTime", value: function () { return this.getDelta(), this.elapsedTime } }, { key: "getDelta", value: function () { var e = 0; if (this.autoStart && !this.running) return this.start(), 0; if (this.running) { var t = Bf(); e = (t - this.oldTime) / 1e3, this.oldTime = t, this.elapsedTime += e } return e } }]), e }(); function Bf() { return ("undefined" === typeof performance ? Date : performance).now() } var Zf = new Ql, wf = new jl, Sf = new Ql, Rf = new Ql, xf = function (e) { Ir(n, e); var t = fr(n); function n() { var e; return cr(this, n), (e = t.call(this)).type = "AudioListener", e.context = pf.getContext(), e.gain = e.context.createGain(), e.gain.connect(e.context.destination), e.filter = null, e.timeDelta = 0, e._clock = new Gf, e } return dr(n, [{ key: "getInput", value: function () { return this.gain } }, { key: "removeFilter", value: function () { return null !== this.filter && (this.gain.disconnect(this.filter), this.filter.disconnect(this.context.destination), this.gain.connect(this.context.destination), this.filter = null), this } }, { key: "getFilter", value: function () { return this.filter } }, { key: "setFilter", value: function (e) { return null !== this.filter ? (this.gain.disconnect(this.filter), this.filter.disconnect(this.context.destination)) : this.gain.disconnect(this.context.destination), this.filter = e, this.gain.connect(this.filter), this.filter.connect(this.context.destination), this } }, { key: "getMasterVolume", value: function () { return this.gain.gain.value } }, { key: "setMasterVolume", value: function (e) { return this.gain.gain.setTargetAtTime(e, this.context.currentTime, .01), this } }, { key: "updateMatrixWorld", value: function (e) { yr(hr(n.prototype), "updateMatrixWorld", this).call(this, e); var t = this.context.listener, i = this.up; if (this.timeDelta = this._clock.getDelta(), this.matrixWorld.decompose(Zf, wf, Sf), Rf.set(0, 0, -1).applyQuaternion(wf), t.positionX) { var r = this.context.currentTime + this.timeDelta; t.positionX.linearRampToValueAtTime(Zf.x, r), t.positionY.linearRampToValueAtTime(Zf.y, r), t.positionZ.linearRampToValueAtTime(Zf.z, r), t.forwardX.linearRampToValueAtTime(Rf.x, r), t.forwardY.linearRampToValueAtTime(Rf.y, r), t.forwardZ.linearRampToValueAtTime(Rf.z, r), t.upX.linearRampToValueAtTime(i.x, r), t.upY.linearRampToValueAtTime(i.y, r), t.upZ.linearRampToValueAtTime(i.z, r) } else t.setPosition(Zf.x, Zf.y, Zf.z), t.setOrientation(Rf.x, Rf.y, Rf.z, i.x, i.y, i.z) } }]), n }(qg), Wf = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this)).type = "Audio", i.listener = e, i.context = e.context, i.gain = i.context.createGain(), i.gain.connect(e.getInput()), i.autoplay = !1, i.buffer = null, i.detune = 0, i.loop = !1, i.loopStart = 0, i.loopEnd = 0, i.offset = 0, i.duration = void 0, i.playbackRate = 1, i.isPlaying = !1, i.hasPlaybackControl = !0, i.source = null, i.sourceType = "empty", i._startedAt = 0, i._progress = 0, i._connected = !1, i.filters = [], i } return dr(n, [{ key: "getOutput", value: function () { return this.gain } }, { key: "setNodeSource", value: function (e) { return this.hasPlaybackControl = !1, this.sourceType = "audioNode", this.source = e, this.connect(), this } }, { key: "setMediaElementSource", value: function (e) { return this.hasPlaybackControl = !1, this.sourceType = "mediaNode", this.source = this.context.createMediaElementSource(e), this.connect(), this } }, { key: "setMediaStreamSource", value: function (e) { return this.hasPlaybackControl = !1, this.sourceType = "mediaStreamNode", this.source = this.context.createMediaStreamSource(e), this.connect(), this } }, { key: "setBuffer", value: function (e) { return this.buffer = e, this.sourceType = "buffer", this.autoplay && this.play(), this } }, { key: "play", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; if (!0 !== this.isPlaying) { if (!1 !== this.hasPlaybackControl) { this._startedAt = this.context.currentTime + e; var t = this.context.createBufferSource(); return t.buffer = this.buffer, t.loop = this.loop, t.loopStart = this.loopStart, t.loopEnd = this.loopEnd, t.onended = this.onEnded.bind(this), t.start(this._startedAt, this._progress + this.offset, this.duration), this.isPlaying = !0, this.source = t, this.setDetune(this.detune), this.setPlaybackRate(this.playbackRate), this.connect() } console.warn("THREE.Audio: this Audio has no playback control.") } else console.warn("THREE.Audio: Audio is already playing.") } }, { key: "pause", value: function () { if (!1 !== this.hasPlaybackControl) return !0 === this.isPlaying && (this._progress += Math.max(this.context.currentTime - this._startedAt, 0) * this.playbackRate, !0 === this.loop && (this._progress = this._progress % (this.duration || this.buffer.duration)), this.source.stop(), this.source.onended = null, this.isPlaying = !1), this; console.warn("THREE.Audio: this Audio has no playback control.") } }, { key: "stop", value: function () { if (!1 !== this.hasPlaybackControl) return this._progress = 0, null !== this.source && (this.source.stop(), this.source.onended = null), this.isPlaying = !1, this; console.warn("THREE.Audio: this Audio has no playback control.") } }, { key: "connect", value: function () { if (this.filters.length > 0) { this.source.connect(this.filters[0]); for (var e = 1, t = this.filters.length; e < t; e++)this.filters[e - 1].connect(this.filters[e]); this.filters[this.filters.length - 1].connect(this.getOutput()) } else this.source.connect(this.getOutput()); return this._connected = !0, this } }, { key: "disconnect", value: function () { if (!1 !== this._connected) { if (this.filters.length > 0) { this.source.disconnect(this.filters[0]); for (var e = 1, t = this.filters.length; e < t; e++)this.filters[e - 1].disconnect(this.filters[e]); this.filters[this.filters.length - 1].disconnect(this.getOutput()) } else this.source.disconnect(this.getOutput()); return this._connected = !1, this } } }, { key: "getFilters", value: function () { return this.filters } }, { key: "setFilters", value: function (e) { return e || (e = []), !0 === this._connected ? (this.disconnect(), this.filters = e.slice(), this.connect()) : this.filters = e.slice(), this } }, { key: "setDetune", value: function (e) { if (this.detune = e, void 0 !== this.source.detune) return !0 === this.isPlaying && this.source.detune.setTargetAtTime(this.detune, this.context.currentTime, .01), this } }, { key: "getDetune", value: function () { return this.detune } }, { key: "getFilter", value: function () { return this.getFilters()[0] } }, { key: "setFilter", value: function (e) { return this.setFilters(e ? [e] : []) } }, { key: "setPlaybackRate", value: function (e) { if (!1 !== this.hasPlaybackControl) return this.playbackRate = e, !0 === this.isPlaying && this.source.playbackRate.setTargetAtTime(this.playbackRate, this.context.currentTime, .01), this; console.warn("THREE.Audio: this Audio has no playback control.") } }, { key: "getPlaybackRate", value: function () { return this.playbackRate } }, { key: "onEnded", value: function () { this.isPlaying = !1 } }, { key: "getLoop", value: function () { return !1 === this.hasPlaybackControl ? (console.warn("THREE.Audio: this Audio has no playback control."), !1) : this.loop } }, { key: "setLoop", value: function (e) { if (!1 !== this.hasPlaybackControl) return this.loop = e, !0 === this.isPlaying && (this.source.loop = this.loop), this; console.warn("THREE.Audio: this Audio has no playback control.") } }, { key: "setLoopStart", value: function (e) { return this.loopStart = e, this } }, { key: "setLoopEnd", value: function (e) { return this.loopEnd = e, this } }, { key: "getVolume", value: function () { return this.gain.gain.value } }, { key: "setVolume", value: function (e) { return this.gain.gain.setTargetAtTime(e, this.context.currentTime, .01), this } }]), n }(qg), Vf = new Ql, kf = new jl, Hf = new Ql, Mf = new Ql, Ff = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this, e)).panner = i.context.createPanner(), i.panner.panningModel = "HRTF", i.panner.connect(i.gain), i } return dr(n, [{ key: "connect", value: function () { yr(hr(n.prototype), "connect", this).call(this), this.panner.connect(this.gain) } }, { key: "disconnect", value: function () { yr(hr(n.prototype), "disconnect", this).call(this), this.panner.disconnect(this.gain) } }, { key: "getOutput", value: function () { return this.panner } }, { key: "getRefDistance", value: function () { return this.panner.refDistance } }, { key: "setRefDistance", value: function (e) { return this.panner.refDistance = e, this } }, { key: "getRolloffFactor", value: function () { return this.panner.rolloffFactor } }, { key: "setRolloffFactor", value: function (e) { return this.panner.rolloffFactor = e, this } }, { key: "getDistanceModel", value: function () { return this.panner.distanceModel } }, { key: "setDistanceModel", value: function (e) { return this.panner.distanceModel = e, this } }, { key: "getMaxDistance", value: function () { return this.panner.maxDistance } }, { key: "setMaxDistance", value: function (e) { return this.panner.maxDistance = e, this } }, { key: "setDirectionalCone", value: function (e, t, n) { return this.panner.coneInnerAngle = e, this.panner.coneOuterAngle = t, this.panner.coneOuterGain = n, this } }, { key: "updateMatrixWorld", value: function (e) { if (yr(hr(n.prototype), "updateMatrixWorld", this).call(this, e), !0 !== this.hasPlaybackControl || !1 !== this.isPlaying) { this.matrixWorld.decompose(Vf, kf, Hf), Mf.set(0, 0, 1).applyQuaternion(kf); var t = this.panner; if (t.positionX) { var i = this.context.currentTime + this.listener.timeDelta; t.positionX.linearRampToValueAtTime(Vf.x, i), t.positionY.linearRampToValueAtTime(Vf.y, i), t.positionZ.linearRampToValueAtTime(Vf.z, i), t.orientationX.linearRampToValueAtTime(Mf.x, i), t.orientationY.linearRampToValueAtTime(Mf.y, i), t.orientationZ.linearRampToValueAtTime(Mf.z, i) } else t.setPosition(Vf.x, Vf.y, Vf.z), t.setOrientation(Mf.x, Mf.y, Mf.z) } } }]), n }(Wf), Nf = function () { function e(t) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 2048; cr(this, e), this.analyser = t.context.createAnalyser(), this.analyser.fftSize = n, this.data = new Uint8Array(this.analyser.frequencyBinCount), t.getOutput().connect(this.analyser) } return dr(e, [{ key: "getFrequencyData", value: function () { return this.analyser.getByteFrequencyData(this.data), this.data } }, { key: "getAverageFrequency", value: function () { for (var e = 0, t = this.getFrequencyData(), n = 0; n < t.length; n++)e += t[n]; return e / t.length } }]), e }(), Xf = function () { function e(t, n, i) { var r, a, o; switch (cr(this, e), this.binding = t, this.valueSize = i, n) { case "quaternion": r = this._slerp, a = this._slerpAdditive, o = this._setAdditiveIdentityQuaternion, this.buffer = new Float64Array(6 * i), this._workIndex = 5; break; case "string": case "bool": r = this._select, a = this._select, o = this._setAdditiveIdentityOther, this.buffer = new Array(5 * i); break; default: r = this._lerp, a = this._lerpAdditive, o = this._setAdditiveIdentityNumeric, this.buffer = new Float64Array(5 * i) }this._mixBufferRegion = r, this._mixBufferRegionAdditive = a, this._setIdentity = o, this._origIndex = 3, this._addIndex = 4, this.cumulativeWeight = 0, this.cumulativeWeightAdditive = 0, this.useCount = 0, this.referenceCount = 0 } return dr(e, [{ key: "accumulate", value: function (e, t) { var n = this.buffer, i = this.valueSize, r = e * i + i, a = this.cumulativeWeight; if (0 === a) { for (var o = 0; o !== i; ++o)n[r + o] = n[o]; a = t } else { var s = t / (a += t); this._mixBufferRegion(n, r, 0, s, i) } this.cumulativeWeight = a } }, { key: "accumulateAdditive", value: function (e) { var t = this.buffer, n = this.valueSize, i = n * this._addIndex; 0 === this.cumulativeWeightAdditive && this._setIdentity(), this._mixBufferRegionAdditive(t, i, 0, e, n), this.cumulativeWeightAdditive += e } }, { key: "apply", value: function (e) { var t = this.valueSize, n = this.buffer, i = e * t + t, r = this.cumulativeWeight, a = this.cumulativeWeightAdditive, o = this.binding; if (this.cumulativeWeight = 0, this.cumulativeWeightAdditive = 0, r < 1) { var s = t * this._origIndex; this._mixBufferRegion(n, i, s, 1 - r, t) } a > 0 && this._mixBufferRegionAdditive(n, i, this._addIndex * t, 1, t); for (var l = t, g = t + t; l !== g; ++l)if (n[l] !== n[l + t]) { o.setValue(n, i); break } } }, { key: "saveOriginalState", value: function () { var e = this.binding, t = this.buffer, n = this.valueSize, i = n * this._origIndex; e.getValue(t, i); for (var r = n, a = i; r !== a; ++r)t[r] = t[i + r % n]; this._setIdentity(), this.cumulativeWeight = 0, this.cumulativeWeightAdditive = 0 } }, { key: "restoreOriginalState", value: function () { var e = 3 * this.valueSize; this.binding.setValue(this.buffer, e) } }, { key: "_setAdditiveIdentityNumeric", value: function () { for (var e = this._addIndex * this.valueSize, t = e + this.valueSize, n = e; n < t; n++)this.buffer[n] = 0 } }, { key: "_setAdditiveIdentityQuaternion", value: function () { this._setAdditiveIdentityNumeric(), this.buffer[this._addIndex * this.valueSize + 3] = 1 } }, { key: "_setAdditiveIdentityOther", value: function () { for (var e = this._origIndex * this.valueSize, t = this._addIndex * this.valueSize, n = 0; n < this.valueSize; n++)this.buffer[t + n] = this.buffer[e + n] } }, { key: "_select", value: function (e, t, n, i, r) { if (i >= .5) for (var a = 0; a !== r; ++a)e[t + a] = e[n + a] } }, { key: "_slerp", value: function (e, t, n, i) { jl.slerpFlat(e, t, e, t, e, n, i) } }, { key: "_slerpAdditive", value: function (e, t, n, i, r) { var a = this._workIndex * r; jl.multiplyQuaternionsFlat(e, a, e, t, e, n), jl.slerpFlat(e, t, e, t, e, a, i) } }, { key: "_lerp", value: function (e, t, n, i, r) { for (var a = 1 - i, o = 0; o !== r; ++o) { var s = t + o; e[s] = e[s] * a + e[n + o] * i } } }, { key: "_lerpAdditive", value: function (e, t, n, i, r) { for (var a = 0; a !== r; ++a) { var o = t + a; e[o] = e[o] + e[n + a] * i } } }]), e }(), Yf = "\\[\\]\\.:\\/", Kf = new RegExp("[" + Yf + "]", "g"), Lf = "[^" + Yf + "]", zf = "[^" + Yf.replace("\\.", "") + "]", Ef = new RegExp("^" + /((?:WC+[\/:])*)/.source.replace("WC", Lf) + /(WCOD+)?/.source.replace("WCOD", zf) + /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC", Lf) + /\.(WC+)(?:\[(.+)\])?/.source.replace("WC", Lf) + "$"), Tf = ["material", "materials", "bones", "map"], _f = function () { function e(t, n, i) { cr(this, e); var r = i || Uf.parseTrackName(n); this._targetGroup = t, this._bindings = t.subscribe_(n, r) } return dr(e, [{ key: "getValue", value: function (e, t) { this.bind(); var n = this._targetGroup.nCachedObjects_, i = this._bindings[n]; void 0 !== i && i.getValue(e, t) } }, { key: "setValue", value: function (e, t) { for (var n = this._bindings, i = this._targetGroup.nCachedObjects_, r = n.length; i !== r; ++i)n[i].setValue(e, t) } }, { key: "bind", value: function () { for (var e = this._bindings, t = this._targetGroup.nCachedObjects_, n = e.length; t !== n; ++t)e[t].bind() } }, { key: "unbind", value: function () { for (var e = this._bindings, t = this._targetGroup.nCachedObjects_, n = e.length; t !== n; ++t)e[t].unbind() } }]), e }(), Uf = function () { function e(t, n, i) { cr(this, e), this.path = n, this.parsedPath = i || e.parseTrackName(n), this.node = e.findNode(t, this.parsedPath.nodeName), this.rootNode = t, this.getValue = this._getValue_unbound, this.setValue = this._setValue_unbound } return dr(e, [{ key: "_getValue_unavailable", value: function () { } }, { key: "_setValue_unavailable", value: function () { } }, { key: "_getValue_direct", value: function (e, t) { e[t] = this.targetObject[this.propertyName] } }, { key: "_getValue_array", value: function (e, t) { for (var n = this.resolvedProperty, i = 0, r = n.length; i !== r; ++i)e[t++] = n[i] } }, { key: "_getValue_arrayElement", value: function (e, t) { e[t] = this.resolvedProperty[this.propertyIndex] } }, { key: "_getValue_toArray", value: function (e, t) { this.resolvedProperty.toArray(e, t) } }, { key: "_setValue_direct", value: function (e, t) { this.targetObject[this.propertyName] = e[t] } }, { key: "_setValue_direct_setNeedsUpdate", value: function (e, t) { this.targetObject[this.propertyName] = e[t], this.targetObject.needsUpdate = !0 } }, { key: "_setValue_direct_setMatrixWorldNeedsUpdate", value: function (e, t) { this.targetObject[this.propertyName] = e[t], this.targetObject.matrixWorldNeedsUpdate = !0 } }, { key: "_setValue_array", value: function (e, t) { for (var n = this.resolvedProperty, i = 0, r = n.length; i !== r; ++i)n[i] = e[t++] } }, { key: "_setValue_array_setNeedsUpdate", value: function (e, t) { for (var n = this.resolvedProperty, i = 0, r = n.length; i !== r; ++i)n[i] = e[t++]; this.targetObject.needsUpdate = !0 } }, { key: "_setValue_array_setMatrixWorldNeedsUpdate", value: function (e, t) { for (var n = this.resolvedProperty, i = 0, r = n.length; i !== r; ++i)n[i] = e[t++]; this.targetObject.matrixWorldNeedsUpdate = !0 } }, { key: "_setValue_arrayElement", value: function (e, t) { this.resolvedProperty[this.propertyIndex] = e[t] } }, { key: "_setValue_arrayElement_setNeedsUpdate", value: function (e, t) { this.resolvedProperty[this.propertyIndex] = e[t], this.targetObject.needsUpdate = !0 } }, { key: "_setValue_arrayElement_setMatrixWorldNeedsUpdate", value: function (e, t) { this.resolvedProperty[this.propertyIndex] = e[t], this.targetObject.matrixWorldNeedsUpdate = !0 } }, { key: "_setValue_fromArray", value: function (e, t) { this.resolvedProperty.fromArray(e, t) } }, { key: "_setValue_fromArray_setNeedsUpdate", value: function (e, t) { this.resolvedProperty.fromArray(e, t), this.targetObject.needsUpdate = !0 } }, { key: "_setValue_fromArray_setMatrixWorldNeedsUpdate", value: function (e, t) { this.resolvedProperty.fromArray(e, t), this.targetObject.matrixWorldNeedsUpdate = !0 } }, { key: "_getValue_unbound", value: function (e, t) { this.bind(), this.getValue(e, t) } }, { key: "_setValue_unbound", value: function (e, t) { this.bind(), this.setValue(e, t) } }, { key: "bind", value: function () { var t = this.node, n = this.parsedPath, i = n.objectName, r = n.propertyName, a = n.propertyIndex; if (t || (t = e.findNode(this.rootNode, n.nodeName), this.node = t), this.getValue = this._getValue_unavailable, this.setValue = this._setValue_unavailable, t) { if (i) { var o = n.objectIndex; switch (i) { case "materials": if (!t.material) return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.", this); if (!t.material.materials) return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.", this); t = t.material.materials; break; case "bones": if (!t.skeleton) return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.", this); t = t.skeleton.bones; for (var s = 0; s < t.length; s++)if (t[s].name === o) { o = s; break } break; case "map": if ("map" in t) { t = t.map; break } if (!t.material) return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.", this); if (!t.material.map) return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.", this); t = t.material.map; break; default: if (void 0 === t[i]) return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.", this); t = t[i] }if (void 0 !== o) { if (void 0 === t[o]) return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.", this, t); t = t[o] } } var l = t[r]; if (void 0 !== l) { var g = this.Versioning.None; this.targetObject = t, void 0 !== t.needsUpdate ? g = this.Versioning.NeedsUpdate : void 0 !== t.matrixWorldNeedsUpdate && (g = this.Versioning.MatrixWorldNeedsUpdate); var c = this.BindingType.Direct; if (void 0 !== a) { if ("morphTargetInfluences" === r) { if (!t.geometry) return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.", this); if (!t.geometry.morphAttributes) return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.", this); void 0 !== t.morphTargetDictionary[a] && (a = t.morphTargetDictionary[a]) } c = this.BindingType.ArrayElement, this.resolvedProperty = l, this.propertyIndex = a } else void 0 !== l.fromArray && void 0 !== l.toArray ? (c = this.BindingType.HasFromToArray, this.resolvedProperty = l) : Array.isArray(l) ? (c = this.BindingType.EntireArray, this.resolvedProperty = l) : this.propertyName = r; this.getValue = this.GetterByBindingType[c], this.setValue = this.SetterByBindingTypeAndVersioning[c][g] } else { var u = n.nodeName; console.error("THREE.PropertyBinding: Trying to update property for track: " + u + "." + r + " but it wasn't found.", t) } } else console.warn("THREE.PropertyBinding: No target node found for track: " + this.path + ".") } }, { key: "unbind", value: function () { this.node = null, this.getValue = this._getValue_unbound, this.setValue = this._setValue_unbound } }], [{ key: "create", value: function (t, n, i) { return t && t.isAnimationObjectGroup ? new e.Composite(t, n, i) : new e(t, n, i) } }, { key: "sanitizeNodeName", value: function (e) { return e.replace(/\s/g, "_").replace(Kf, "") } }, { key: "parseTrackName", value: function (e) { var t = Ef.exec(e); if (null === t) throw new Error("PropertyBinding: Cannot parse trackName: " + e); var n = { nodeName: t[2], objectName: t[3], objectIndex: t[4], propertyName: t[5], propertyIndex: t[6] }, i = n.nodeName && n.nodeName.lastIndexOf("."); if (void 0 !== i && -1 !== i) { var r = n.nodeName.substring(i + 1); -1 !== Tf.indexOf(r) && (n.nodeName = n.nodeName.substring(0, i), n.objectName = r) } if (null === n.propertyName || 0 === n.propertyName.length) throw new Error("PropertyBinding: can not parse propertyName from trackName: " + e); return n } }, { key: "findNode", value: function (e, t) { if (void 0 === t || "" === t || "." === t || -1 === t || t === e.name || t === e.uuid) return e; if (e.skeleton) { var n = e.skeleton.getBoneByName(t); if (void 0 !== n) return n } if (e.children) { var i = function e(n) { for (var i = 0; i < n.length; i++) { var r = n[i]; if (r.name === t || r.uuid === t) return r; var a = e(r.children); if (a) return a } return null }(e.children); if (i) return i } return null } }]), e }(); Uf.Composite = _f, Uf.prototype.BindingType = { Direct: 0, EntireArray: 1, ArrayElement: 2, HasFromToArray: 3 }, Uf.prototype.Versioning = { None: 0, NeedsUpdate: 1, MatrixWorldNeedsUpdate: 2 }, Uf.prototype.GetterByBindingType = [Uf.prototype._getValue_direct, Uf.prototype._getValue_array, Uf.prototype._getValue_arrayElement, Uf.prototype._getValue_toArray], Uf.prototype.SetterByBindingTypeAndVersioning = [[Uf.prototype._setValue_direct, Uf.prototype._setValue_direct_setNeedsUpdate, Uf.prototype._setValue_direct_setMatrixWorldNeedsUpdate], [Uf.prototype._setValue_array, Uf.prototype._setValue_array_setNeedsUpdate, Uf.prototype._setValue_array_setMatrixWorldNeedsUpdate], [Uf.prototype._setValue_arrayElement, Uf.prototype._setValue_arrayElement_setNeedsUpdate, Uf.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate], [Uf.prototype._setValue_fromArray, Uf.prototype._setValue_fromArray_setNeedsUpdate, Uf.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]]; var Df = function () { function e() { cr(this, e), this.isAnimationObjectGroup = !0, this.uuid = ll(), this._objects = Array.prototype.slice.call(arguments), this.nCachedObjects_ = 0; var t = {}; this._indicesByUUID = t; for (var n = 0, i = arguments.length; n !== i; ++n)t[arguments[n].uuid] = n; this._paths = [], this._parsedPaths = [], this._bindings = [], this._bindingsIndicesByPath = {}; var r = this; this.stats = { objects: { get total() { return r._objects.length }, get inUse() { return this.total - r.nCachedObjects_ } }, get bindingsPerObject() { return r._bindings.length } } } return dr(e, [{ key: "add", value: function () { for (var e = this._objects, t = this._indicesByUUID, n = this._paths, i = this._parsedPaths, r = this._bindings, a = r.length, o = void 0, s = e.length, l = this.nCachedObjects_, g = 0, c = arguments.length; g !== c; ++g) { var u = arguments[g], C = u.uuid, d = t[C]; if (void 0 === d) { d = s++, t[C] = d, e.push(u); for (var I = 0, h = a; I !== h; ++I)r[I].push(new Uf(u, n[I], i[I])) } else if (d < l) { o = e[d]; var A = --l, p = e[A]; t[p.uuid] = d, e[d] = p, t[C] = A, e[A] = u; for (var f = 0, m = a; f !== m; ++f) { var v = r[f], b = v[A], y = v[d]; v[d] = b, void 0 === y && (y = new Uf(u, n[f], i[f])), v[A] = y } } else e[d] !== o && console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.") } this.nCachedObjects_ = l } }, { key: "remove", value: function () { for (var e = this._objects, t = this._indicesByUUID, n = this._bindings, i = n.length, r = this.nCachedObjects_, a = 0, o = arguments.length; a !== o; ++a) { var s = arguments[a], l = s.uuid, g = t[l]; if (void 0 !== g && g >= r) { var c = r++, u = e[c]; t[u.uuid] = g, e[g] = u, t[l] = c, e[c] = s; for (var C = 0, d = i; C !== d; ++C) { var I = n[C], h = I[c], A = I[g]; I[g] = h, I[c] = A } } } this.nCachedObjects_ = r } }, { key: "uncache", value: function () { for (var e = this._objects, t = this._indicesByUUID, n = this._bindings, i = n.length, r = this.nCachedObjects_, a = e.length, o = 0, s = arguments.length; o !== s; ++o) { var l = arguments[o].uuid, g = t[l]; if (void 0 !== g) if (delete t[l], g < r) { var c = --r, u = e[c], C = --a, d = e[C]; t[u.uuid] = g, e[g] = u, t[d.uuid] = c, e[c] = d, e.pop(); for (var I = 0, h = i; I !== h; ++I) { var A = n[I], p = A[c], f = A[C]; A[g] = p, A[c] = f, A.pop() } } else { var m = --a, v = e[m]; m > 0 && (t[v.uuid] = g), e[g] = v, e.pop(); for (var b = 0, y = i; b !== y; ++b) { var G = n[b]; G[g] = G[m], G.pop() } } } this.nCachedObjects_ = r } }, { key: "subscribe_", value: function (e, t) { var n = this._bindingsIndicesByPath, i = n[e], r = this._bindings; if (void 0 !== i) return r[i]; var a = this._paths, o = this._parsedPaths, s = this._objects, l = s.length, g = this.nCachedObjects_, c = new Array(l); i = r.length, n[e] = i, a.push(e), o.push(t), r.push(c); for (var u = g, C = s.length; u !== C; ++u) { var d = s[u]; c[u] = new Uf(d, e, t) } return c } }, { key: "unsubscribe_", value: function (e) { var t = this._bindingsIndicesByPath, n = t[e]; if (void 0 !== n) { var i = this._paths, r = this._parsedPaths, a = this._bindings, o = a.length - 1, s = a[o]; t[e[o]] = n, a[n] = s, a.pop(), r[n] = r[o], r.pop(), i[n] = i[o], i.pop() } } }]), e }(), Pf = function () { function e(t, n) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : n.blendMode; cr(this, e), this._mixer = t, this._clip = n, this._localRoot = i, this.blendMode = r; for (var a = n.tracks, o = a.length, s = new Array(o), l = { endingStart: jo, endingEnd: jo }, g = 0; g !== o; ++g) { var c = a[g].createInterpolant(null); s[g] = c, c.settings = l } this._interpolantSettings = l, this._interpolants = s, this._propertyBindings = new Array(o), this._cacheIndex = null, this._byClipCacheIndex = null, this._timeScaleInterpolant = null, this._weightInterpolant = null, this.loop = Uo, this._loopCount = -1, this._startTime = null, this.time = 0, this.timeScale = 1, this._effectiveTimeScale = 1, this.weight = 1, this._effectiveWeight = 1, this.repetitions = 1 / 0, this.paused = !1, this.enabled = !0, this.clampWhenFinished = !1, this.zeroSlopeAtStart = !0, this.zeroSlopeAtEnd = !0 } return dr(e, [{ key: "play", value: function () { return this._mixer._activateAction(this), this } }, { key: "stop", value: function () { return this._mixer._deactivateAction(this), this.reset() } }, { key: "reset", value: function () { return this.paused = !1, this.enabled = !0, this.time = 0, this._loopCount = -1, this._startTime = null, this.stopFading().stopWarping() } }, { key: "isRunning", value: function () { return this.enabled && !this.paused && 0 !== this.timeScale && null === this._startTime && this._mixer._isActiveAction(this) } }, { key: "isScheduled", value: function () { return this._mixer._isActiveAction(this) } }, { key: "startAt", value: function (e) { return this._startTime = e, this } }, { key: "setLoop", value: function (e, t) { return this.loop = e, this.repetitions = t, this } }, { key: "setEffectiveWeight", value: function (e) { return this.weight = e, this._effectiveWeight = this.enabled ? e : 0, this.stopFading() } }, { key: "getEffectiveWeight", value: function () { return this._effectiveWeight } }, { key: "fadeIn", value: function (e) { return this._scheduleFading(e, 0, 1) } }, { key: "fadeOut", value: function (e) { return this._scheduleFading(e, 1, 0) } }, { key: "crossFadeFrom", value: function (e, t, n) { if (e.fadeOut(t), this.fadeIn(t), n) { var i = this._clip.duration, r = e._clip.duration, a = r / i, o = i / r; e.warp(1, a, t), this.warp(o, 1, t) } return this } }, { key: "crossFadeTo", value: function (e, t, n) { return e.crossFadeFrom(this, t, n) } }, { key: "stopFading", value: function () { var e = this._weightInterpolant; return null !== e && (this._weightInterpolant = null, this._mixer._takeBackControlInterpolant(e)), this } }, { key: "setEffectiveTimeScale", value: function (e) { return this.timeScale = e, this._effectiveTimeScale = this.paused ? 0 : e, this.stopWarping() } }, { key: "getEffectiveTimeScale", value: function () { return this._effectiveTimeScale } }, { key: "setDuration", value: function (e) { return this.timeScale = this._clip.duration / e, this.stopWarping() } }, { key: "syncWith", value: function (e) { return this.time = e.time, this.timeScale = e.timeScale, this.stopWarping() } }, { key: "halt", value: function (e) { return this.warp(this._effectiveTimeScale, 0, e) } }, { key: "warp", value: function (e, t, n) { var i = this._mixer, r = i.time, a = this.timeScale, o = this._timeScaleInterpolant; null === o && (o = i._lendControlInterpolant(), this._timeScaleInterpolant = o); var s = o.parameterPositions, l = o.sampleValues; return s[0] = r, s[1] = r + n, l[0] = e / a, l[1] = t / a, this } }, { key: "stopWarping", value: function () { var e = this._timeScaleInterpolant; return null !== e && (this._timeScaleInterpolant = null, this._mixer._takeBackControlInterpolant(e)), this } }, { key: "getMixer", value: function () { return this._mixer } }, { key: "getClip", value: function () { return this._clip } }, { key: "getRoot", value: function () { return this._localRoot || this._mixer._root } }, { key: "_update", value: function (e, t, n, i) { if (this.enabled) { var r = this._startTime; if (null !== r) { var a = (e - r) * n; a < 0 || 0 === n ? t = 0 : (this._startTime = null, t = n * a) } t *= this._updateTimeScale(e); var o = this._updateTime(t), s = this._updateWeight(e); if (s > 0) { var l = this._interpolants, g = this._propertyBindings; if (this.blendMode === es) for (var c = 0, u = l.length; c !== u; ++c)l[c].evaluate(o), g[c].accumulateAdditive(s); else for (var C = 0, d = l.length; C !== d; ++C)l[C].evaluate(o), g[C].accumulate(i, s) } } else this._updateWeight(e) } }, { key: "_updateWeight", value: function (e) { var t = 0; if (this.enabled) { t = this.weight; var n = this._weightInterpolant; if (null !== n) { var i = n.evaluate(e)[0]; t *= i, e > n.parameterPositions[1] && (this.stopFading(), 0 === i && (this.enabled = !1)) } } return this._effectiveWeight = t, t } }, { key: "_updateTimeScale", value: function (e) { var t = 0; if (!this.paused) { t = this.timeScale; var n = this._timeScaleInterpolant; if (null !== n) t *= n.evaluate(e)[0], e > n.parameterPositions[1] && (this.stopWarping(), 0 === t ? this.paused = !0 : this.timeScale = t) } return this._effectiveTimeScale = t, t } }, { key: "_updateTime", value: function (e) { var t = this._clip.duration, n = this.loop, i = this.time + e, r = this._loopCount, a = n === Do; if (0 === e) return -1 === r ? i : a && 1 === (1 & r) ? t - i : i; if (n === _o) { -1 === r && (this._loopCount = 0, this._setEndings(!0, !0, !1)); e: { if (i >= t) i = t; else { if (!(i < 0)) { this.time = i; break e } i = 0 } this.clampWhenFinished ? this.paused = !0 : this.enabled = !1, this.time = i, this._mixer.dispatchEvent({ type: "finished", action: this, direction: e < 0 ? -1 : 1 }) } } else { if (-1 === r && (e >= 0 ? (r = 0, this._setEndings(!0, 0 === this.repetitions, a)) : this._setEndings(0 === this.repetitions, !0, a)), i >= t || i < 0) { var o = Math.floor(i / t); i -= t * o, r += Math.abs(o); var s = this.repetitions - r; if (s <= 0) this.clampWhenFinished ? this.paused = !0 : this.enabled = !1, i = e > 0 ? t : 0, this.time = i, this._mixer.dispatchEvent({ type: "finished", action: this, direction: e > 0 ? 1 : -1 }); else { if (1 === s) { var l = e < 0; this._setEndings(l, !l, a) } else this._setEndings(!1, !1, a); this._loopCount = r, this.time = i, this._mixer.dispatchEvent({ type: "loop", action: this, loopDelta: o }) } } else this.time = i; if (a && 1 === (1 & r)) return t - i } return i } }, { key: "_setEndings", value: function (e, t, n) { var i = this._interpolantSettings; n ? (i.endingStart = Qo, i.endingEnd = Qo) : (i.endingStart = e ? this.zeroSlopeAtStart ? Qo : jo : qo, i.endingEnd = t ? this.zeroSlopeAtEnd ? Qo : jo : qo) } }, { key: "_scheduleFading", value: function (e, t, n) { var i = this._mixer, r = i.time, a = this._weightInterpolant; null === a && (a = i._lendControlInterpolant(), this._weightInterpolant = a); var o = a.parameterPositions, s = a.sampleValues; return o[0] = r, s[0] = t, o[1] = r + e, s[1] = n, this } }]), e }(), Jf = new Float32Array(1), Of = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this))._root = e, i._initMemoryManager(), i._accuIndex = 0, i.time = 0, i.timeScale = 1, i } return dr(n, [{ key: "_bindAction", value: function (e, t) { var n = e._localRoot || this._root, i = e._clip.tracks, r = i.length, a = e._propertyBindings, o = e._interpolants, s = n.uuid, l = this._bindingsByRootAndName, g = l[s]; void 0 === g && (g = {}, l[s] = g); for (var c = 0; c !== r; ++c) { var u = i[c], C = u.name, d = g[C]; if (void 0 !== d) ++d.referenceCount, a[c] = d; else { if (void 0 !== (d = a[c])) { null === d._cacheIndex && (++d.referenceCount, this._addInactiveBinding(d, s, C)); continue } var I = t && t._propertyBindings[c].binding.parsedPath; ++(d = new Xf(Uf.create(n, C, I), u.ValueTypeName, u.getValueSize())).referenceCount, this._addInactiveBinding(d, s, C), a[c] = d } o[c].resultBuffer = d.buffer } } }, { key: "_activateAction", value: function (e) { if (!this._isActiveAction(e)) { if (null === e._cacheIndex) { var t = (e._localRoot || this._root).uuid, n = e._clip.uuid, i = this._actionsByClip[n]; this._bindAction(e, i && i.knownActions[0]), this._addInactiveAction(e, n, t) } for (var r = e._propertyBindings, a = 0, o = r.length; a !== o; ++a) { var s = r[a]; 0 === s.useCount++ && (this._lendBinding(s), s.saveOriginalState()) } this._lendAction(e) } } }, { key: "_deactivateAction", value: function (e) { if (this._isActiveAction(e)) { for (var t = e._propertyBindings, n = 0, i = t.length; n !== i; ++n) { var r = t[n]; 0 === --r.useCount && (r.restoreOriginalState(), this._takeBackBinding(r)) } this._takeBackAction(e) } } }, { key: "_initMemoryManager", value: function () { this._actions = [], this._nActiveActions = 0, this._actionsByClip = {}, this._bindings = [], this._nActiveBindings = 0, this._bindingsByRootAndName = {}, this._controlInterpolants = [], this._nActiveControlInterpolants = 0; var e = this; this.stats = { actions: { get total() { return e._actions.length }, get inUse() { return e._nActiveActions } }, bindings: { get total() { return e._bindings.length }, get inUse() { return e._nActiveBindings } }, controlInterpolants: { get total() { return e._controlInterpolants.length }, get inUse() { return e._nActiveControlInterpolants } } } } }, { key: "_isActiveAction", value: function (e) { var t = e._cacheIndex; return null !== t && t < this._nActiveActions } }, { key: "_addInactiveAction", value: function (e, t, n) { var i = this._actions, r = this._actionsByClip, a = r[t]; if (void 0 === a) a = { knownActions: [e], actionByRoot: {} }, e._byClipCacheIndex = 0, r[t] = a; else { var o = a.knownActions; e._byClipCacheIndex = o.length, o.push(e) } e._cacheIndex = i.length, i.push(e), a.actionByRoot[n] = e } }, { key: "_removeInactiveAction", value: function (e) { var t = this._actions, n = t[t.length - 1], i = e._cacheIndex; n._cacheIndex = i, t[i] = n, t.pop(), e._cacheIndex = null; var r = e._clip.uuid, a = this._actionsByClip, o = a[r], s = o.knownActions, l = s[s.length - 1], g = e._byClipCacheIndex; l._byClipCacheIndex = g, s[g] = l, s.pop(), e._byClipCacheIndex = null, delete o.actionByRoot[(e._localRoot || this._root).uuid], 0 === s.length && delete a[r], this._removeInactiveBindingsForAction(e) } }, { key: "_removeInactiveBindingsForAction", value: function (e) { for (var t = e._propertyBindings, n = 0, i = t.length; n !== i; ++n) { var r = t[n]; 0 === --r.referenceCount && this._removeInactiveBinding(r) } } }, { key: "_lendAction", value: function (e) { var t = this._actions, n = e._cacheIndex, i = this._nActiveActions++, r = t[i]; e._cacheIndex = i, t[i] = e, r._cacheIndex = n, t[n] = r } }, { key: "_takeBackAction", value: function (e) { var t = this._actions, n = e._cacheIndex, i = --this._nActiveActions, r = t[i]; e._cacheIndex = i, t[i] = e, r._cacheIndex = n, t[n] = r } }, { key: "_addInactiveBinding", value: function (e, t, n) { var i = this._bindingsByRootAndName, r = this._bindings, a = i[t]; void 0 === a && (a = {}, i[t] = a), a[n] = e, e._cacheIndex = r.length, r.push(e) } }, { key: "_removeInactiveBinding", value: function (e) { var t = this._bindings, n = e.binding, i = n.rootNode.uuid, r = n.path, a = this._bindingsByRootAndName, o = a[i], s = t[t.length - 1], l = e._cacheIndex; s._cacheIndex = l, t[l] = s, t.pop(), delete o[r], 0 === Object.keys(o).length && delete a[i] } }, { key: "_lendBinding", value: function (e) { var t = this._bindings, n = e._cacheIndex, i = this._nActiveBindings++, r = t[i]; e._cacheIndex = i, t[i] = e, r._cacheIndex = n, t[n] = r } }, { key: "_takeBackBinding", value: function (e) { var t = this._bindings, n = e._cacheIndex, i = --this._nActiveBindings, r = t[i]; e._cacheIndex = i, t[i] = e, r._cacheIndex = n, t[n] = r } }, { key: "_lendControlInterpolant", value: function () { var e = this._controlInterpolants, t = this._nActiveControlInterpolants++, n = e[t]; return void 0 === n && ((n = new Ap(new Float32Array(2), new Float32Array(2), 1, Jf)).__cacheIndex = t, e[t] = n), n } }, { key: "_takeBackControlInterpolant", value: function (e) { var t = this._controlInterpolants, n = e.__cacheIndex, i = --this._nActiveControlInterpolants, r = t[i]; e.__cacheIndex = i, t[i] = e, r.__cacheIndex = n, t[n] = r } }, { key: "clipAction", value: function (e, t, n) { var i = t || this._root, r = i.uuid, a = "string" === typeof e ? wp.findByName(i, e) : e, o = null !== a ? a.uuid : e, s = this._actionsByClip[o], l = null; if (void 0 === n && (n = null !== a ? a.blendMode : $o), void 0 !== s) { var g = s.actionByRoot[r]; if (void 0 !== g && g.blendMode === n) return g; l = s.knownActions[0], null === a && (a = l._clip) } if (null === a) return null; var c = new Pf(this, a, t, n); return this._bindAction(c, l), this._addInactiveAction(c, o, r), c } }, { key: "existingAction", value: function (e, t) { var n = t || this._root, i = n.uuid, r = "string" === typeof e ? wp.findByName(n, e) : e, a = r ? r.uuid : e, o = this._actionsByClip[a]; return void 0 !== o && o.actionByRoot[i] || null } }, { key: "stopAllAction", value: function () { for (var e = this._actions, t = this._nActiveActions - 1; t >= 0; --t)e[t].stop(); return this } }, { key: "update", value: function (e) { e *= this.timeScale; for (var t = this._actions, n = this._nActiveActions, i = this.time += e, r = Math.sign(e), a = this._accuIndex ^= 1, o = 0; o !== n; ++o) { t[o]._update(i, e, r, a) } for (var s = this._bindings, l = this._nActiveBindings, g = 0; g !== l; ++g)s[g].apply(a); return this } }, { key: "setTime", value: function (e) { this.time = 0; for (var t = 0; t < this._actions.length; t++)this._actions[t].time = 0; return this.update(e) } }, { key: "getRoot", value: function () { return this._root } }, { key: "uncacheClip", value: function (e) { var t = this._actions, n = e.uuid, i = this._actionsByClip, r = i[n]; if (void 0 !== r) { for (var a = r.knownActions, o = 0, s = a.length; o !== s; ++o) { var l = a[o]; this._deactivateAction(l); var g = l._cacheIndex, c = t[t.length - 1]; l._cacheIndex = null, l._byClipCacheIndex = null, c._cacheIndex = g, t[g] = c, t.pop(), this._removeInactiveBindingsForAction(l) } delete i[n] } } }, { key: "uncacheRoot", value: function (e) { var t = e.uuid, n = this._actionsByClip; for (var i in n) { var r = n[i].actionByRoot[t]; void 0 !== r && (this._deactivateAction(r), this._removeInactiveAction(r)) } var a = this._bindingsByRootAndName[t]; if (void 0 !== a) for (var o in a) { var s = a[o]; s.restoreOriginalState(), this._removeInactiveBinding(s) } } }, { key: "uncacheAction", value: function (e, t) { var n = this.existingAction(e, t); null !== n && (this._deactivateAction(n), this._removeInactiveAction(n)) } }]), n }(il), jf = function () { function e(t) { cr(this, e), this.value = t } return dr(e, [{ key: "clone", value: function () { return new e(void 0 === this.value.clone ? this.value : this.value.clone()) } }]), e }(), Qf = 0, qf = function (e) { Ir(n, e); var t = fr(n); function n() { var e; return cr(this, n), (e = t.call(this)).isUniformsGroup = !0, Object.defineProperty(y(e), "id", { value: Qf++ }), e.name = "", e.usage = Ts, e.uniforms = [], e } return dr(n, [{ key: "add", value: function (e) { return this.uniforms.push(e), this } }, { key: "remove", value: function (e) { var t = this.uniforms.indexOf(e); return -1 !== t && this.uniforms.splice(t, 1), this } }, { key: "setName", value: function (e) { return this.name = e, this } }, { key: "setUsage", value: function (e) { return this.usage = e, this } }, { key: "dispose", value: function () { return this.dispatchEvent({ type: "dispose" }), this } }, { key: "copy", value: function (e) { this.name = e.name, this.usage = e.usage; var t = e.uniforms; this.uniforms.length = 0; for (var n = 0, i = t.length; n < i; n++)this.uniforms.push(t[n].clone()); return this } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }]), n }(il), $f = function (e) { Ir(n, e); var t = fr(n); function n(e, i) { var r, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1; return cr(this, n), (r = t.call(this, e, i)).isInstancedInterleavedBuffer = !0, r.meshPerAttribute = a, r } return dr(n, [{ key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e), this.meshPerAttribute = e.meshPerAttribute, this } }, { key: "clone", value: function (e) { var t = yr(hr(n.prototype), "clone", this).call(this, e); return t.meshPerAttribute = this.meshPerAttribute, t } }, { key: "toJSON", value: function (e) { var t = yr(hr(n.prototype), "toJSON", this).call(this, e); return t.isInstancedInterleavedBuffer = !0, t.meshPerAttribute = this.meshPerAttribute, t } }]), n }(II), em = function () { function e(t, n, i, r, a) { cr(this, e), this.isGLBufferAttribute = !0, this.name = "", this.buffer = t, this.type = n, this.itemSize = i, this.elementSize = r, this.count = a, this.version = 0 } return dr(e, [{ key: "needsUpdate", set: function (e) { !0 === e && this.version++ } }, { key: "setBuffer", value: function (e) { return this.buffer = e, this } }, { key: "setType", value: function (e, t) { return this.type = e, this.elementSize = t, this } }, { key: "setItemSize", value: function (e) { return this.itemSize = e, this } }, { key: "setCount", value: function (e) { return this.count = e, this } }]), e }(), tm = function () { function e(t, n) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1 / 0; cr(this, e), this.ray = new wg(t, n), this.near = i, this.far = r, this.camera = null, this.layers = new Yg, this.params = { Mesh: {}, Line: { threshold: 1 }, LOD: {}, Points: { threshold: 1 }, Sprite: {} } } return dr(e, [{ key: "set", value: function (e, t) { this.ray.set(e, t) } }, { key: "setFromCamera", value: function (e, t) { t.isPerspectiveCamera ? (this.ray.origin.setFromMatrixPosition(t.matrixWorld), this.ray.direction.set(e.x, e.y, .5).unproject(t).sub(this.ray.origin).normalize(), this.camera = t) : t.isOrthographicCamera ? (this.ray.origin.set(e.x, e.y, (t.near + t.far) / (t.near - t.far)).unproject(t), this.ray.direction.set(0, 0, -1).transformDirection(t.matrixWorld), this.camera = t) : console.error("THREE.Raycaster: Unsupported camera type: " + t.type) } }, { key: "intersectObject", value: function (e) { var t = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : []; return im(e, this, t, !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1]), t.sort(nm), t } }, { key: "intersectObjects", value: function (e) { for (var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : [], i = 0, r = e.length; i < r; i++)im(e[i], this, n, t); return n.sort(nm), n } }]), e }(); function nm(e, t) { return e.distance - t.distance } function im(e, t, n, i) { if (e.layers.test(t.layers) && e.raycast(t, n), !0 === i) for (var r = e.children, a = 0, o = r.length; a < o; a++)im(r[a], t, n, !0) } var rm = function () { function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; return cr(this, e), this.radius = t, this.phi = n, this.theta = i, this } return dr(e, [{ key: "set", value: function (e, t, n) { return this.radius = e, this.phi = t, this.theta = n, this } }, { key: "copy", value: function (e) { return this.radius = e.radius, this.phi = e.phi, this.theta = e.theta, this } }, { key: "makeSafe", value: function () { var e = 1e-6; return this.phi = Math.max(e, Math.min(Math.PI - e, this.phi)), this } }, { key: "setFromVector3", value: function (e) { return this.setFromCartesianCoords(e.x, e.y, e.z) } }, { key: "setFromCartesianCoords", value: function (e, t, n) { return this.radius = Math.sqrt(e * e + t * t + n * n), 0 === this.radius ? (this.theta = 0, this.phi = 0) : (this.theta = Math.atan2(e, n), this.phi = Math.acos(gl(t / this.radius, -1, 1))), this } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }]), e }(), am = function () { function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; return cr(this, e), this.radius = t, this.theta = n, this.y = i, this } return dr(e, [{ key: "set", value: function (e, t, n) { return this.radius = e, this.theta = t, this.y = n, this } }, { key: "copy", value: function (e) { return this.radius = e.radius, this.theta = e.theta, this.y = e.y, this } }, { key: "setFromVector3", value: function (e) { return this.setFromCartesianCoords(e.x, e.y, e.z) } }, { key: "setFromCartesianCoords", value: function (e, t, n) { return this.radius = Math.sqrt(e * e + n * n), this.theta = Math.atan2(e, n), this.y = t, this } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }]), e }(), om = new fl, sm = function () { function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new fl(1 / 0, 1 / 0), n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new fl(-1 / 0, -1 / 0); cr(this, e), this.isBox2 = !0, this.min = t, this.max = n } return dr(e, [{ key: "set", value: function (e, t) { return this.min.copy(e), this.max.copy(t), this } }, { key: "setFromPoints", value: function (e) { this.makeEmpty(); for (var t = 0, n = e.length; t < n; t++)this.expandByPoint(e[t]); return this } }, { key: "setFromCenterAndSize", value: function (e, t) { var n = om.copy(t).multiplyScalar(.5); return this.min.copy(e).sub(n), this.max.copy(e).add(n), this } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }, { key: "copy", value: function (e) { return this.min.copy(e.min), this.max.copy(e.max), this } }, { key: "makeEmpty", value: function () { return this.min.x = this.min.y = 1 / 0, this.max.x = this.max.y = -1 / 0, this } }, { key: "isEmpty", value: function () { return this.max.x < this.min.x || this.max.y < this.min.y } }, { key: "getCenter", value: function (e) { return this.isEmpty() ? e.set(0, 0) : e.addVectors(this.min, this.max).multiplyScalar(.5) } }, { key: "getSize", value: function (e) { return this.isEmpty() ? e.set(0, 0) : e.subVectors(this.max, this.min) } }, { key: "expandByPoint", value: function (e) { return this.min.min(e), this.max.max(e), this } }, { key: "expandByVector", value: function (e) { return this.min.sub(e), this.max.add(e), this } }, { key: "expandByScalar", value: function (e) { return this.min.addScalar(-e), this.max.addScalar(e), this } }, { key: "containsPoint", value: function (e) { return !(e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y) } }, { key: "containsBox", value: function (e) { return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y } }, { key: "getParameter", value: function (e, t) { return t.set((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y)) } }, { key: "intersectsBox", value: function (e) { return !(e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y) } }, { key: "clampPoint", value: function (e, t) { return t.copy(e).clamp(this.min, this.max) } }, { key: "distanceToPoint", value: function (e) { return this.clampPoint(e, om).distanceTo(e) } }, { key: "intersect", value: function (e) { return this.min.max(e.min), this.max.min(e.max), this.isEmpty() && this.makeEmpty(), this } }, { key: "union", value: function (e) { return this.min.min(e.min), this.max.max(e.max), this } }, { key: "translate", value: function (e) { return this.min.add(e), this.max.add(e), this } }, { key: "equals", value: function (e) { return e.min.equals(this.min) && e.max.equals(this.max) } }]), e }(), lm = new Ql, gm = new Ql, cm = function () { function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new Ql, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new Ql; cr(this, e), this.start = t, this.end = n } return dr(e, [{ key: "set", value: function (e, t) { return this.start.copy(e), this.end.copy(t), this } }, { key: "copy", value: function (e) { return this.start.copy(e.start), this.end.copy(e.end), this } }, { key: "getCenter", value: function (e) { return e.addVectors(this.start, this.end).multiplyScalar(.5) } }, { key: "delta", value: function (e) { return e.subVectors(this.end, this.start) } }, { key: "distanceSq", value: function () { return this.start.distanceToSquared(this.end) } }, { key: "distance", value: function () { return this.start.distanceTo(this.end) } }, { key: "at", value: function (e, t) { return this.delta(t).multiplyScalar(e).add(this.start) } }, { key: "closestPointToPointParameter", value: function (e, t) { lm.subVectors(e, this.start), gm.subVectors(this.end, this.start); var n = gm.dot(gm), i = gm.dot(lm) / n; return t && (i = gl(i, 0, 1)), i } }, { key: "closestPointToPoint", value: function (e, t, n) { var i = this.closestPointToPointParameter(e, t); return this.delta(n).multiplyScalar(i).add(this.start) } }, { key: "applyMatrix4", value: function (e) { return this.start.applyMatrix4(e), this.end.applyMatrix4(e), this } }, { key: "equals", value: function (e) { return e.start.equals(this.start) && e.end.equals(this.end) } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }]), e }(), um = new Ql, Cm = function (e) { Ir(n, e); var t = fr(n); function n(e, i) { var r; cr(this, n), (r = t.call(this)).light = e, r.matrix = e.matrixWorld, r.matrixAutoUpdate = !1, r.color = i, r.type = "SpotLightHelper"; for (var a = new Uc, o = [0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, -1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, -1, 1], s = 0, l = 1; s < 32; s++, l++) { var g = s / 32 * Math.PI * 2, c = l / 32 * Math.PI * 2; o.push(Math.cos(g), Math.sin(g), 1, Math.cos(c), Math.sin(c), 1) } a.setAttribute("position", new Nc(o, 3)); var u = new ah({ fog: !1, toneMapped: !1 }); return r.cone = new Ih(a, u), r.add(r.cone), r.update(), r } return dr(n, [{ key: "dispose", value: function () { this.cone.geometry.dispose(), this.cone.material.dispose() } }, { key: "update", value: function () { this.light.updateWorldMatrix(!0, !1), this.light.target.updateWorldMatrix(!0, !1); var e = this.light.distance ? this.light.distance : 1e3, t = e * Math.tan(this.light.angle); this.cone.scale.set(t, t, e), um.setFromMatrixPosition(this.light.target.matrixWorld), this.cone.lookAt(um), void 0 !== this.color ? this.cone.material.color.set(this.color) : this.cone.material.color.copy(this.light.color) } }]), n }(qg), dm = new Ql, Im = new Sg, hm = new Sg, Am = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; cr(this, n); for (var r = pm(e), a = new Uc, o = [], s = [], l = new pc(0, 0, 1), g = new pc(0, 1, 0), c = 0; c < r.length; c++) { var u = r[c]; u.parent && u.parent.isBone && (o.push(0, 0, 0), o.push(0, 0, 0), s.push(l.r, l.g, l.b), s.push(g.r, g.g, g.b)) } a.setAttribute("position", new Nc(o, 3)), a.setAttribute("color", new Nc(s, 3)); var C = new ah({ vertexColors: !0, depthTest: !1, depthWrite: !1, toneMapped: !1, transparent: !0 }); return (i = t.call(this, a, C)).isSkeletonHelper = !0, i.type = "SkeletonHelper", i.root = e, i.bones = r, i.matrix = e.matrixWorld, i.matrixAutoUpdate = !1, i } return dr(n, [{ key: "updateMatrixWorld", value: function (e) { var t = this.bones, i = this.geometry, r = i.getAttribute("position"); hm.copy(this.root.matrixWorld).invert(); for (var a = 0, o = 0; a < t.length; a++) { var s = t[a]; s.parent && s.parent.isBone && (Im.multiplyMatrices(hm, s.matrixWorld), dm.setFromMatrixPosition(Im), r.setXYZ(o, dm.x, dm.y, dm.z), Im.multiplyMatrices(hm, s.parent.matrixWorld), dm.setFromMatrixPosition(Im), r.setXYZ(o + 1, dm.x, dm.y, dm.z), o += 2) } i.getAttribute("position").needsUpdate = !0, yr(hr(n.prototype), "updateMatrixWorld", this).call(this, e) } }, { key: "dispose", value: function () { this.geometry.dispose(), this.material.dispose() } }]), n }(Ih); function pm(e) { var t = []; !0 === e.isBone && t.push(e); for (var n = 0; n < e.children.length; n++)t.push.apply(t, pm(e.children[n])); return t } var fm = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { var a; cr(this, n); var o = new _A(i, 4, 2), s = new mc({ wireframe: !0, fog: !1, toneMapped: !1 }); return (a = t.call(this, o, s)).light = e, a.color = r, a.type = "PointLightHelper", a.matrix = a.light.matrixWorld, a.matrixAutoUpdate = !1, a.update(), a } return dr(n, [{ key: "dispose", value: function () { this.geometry.dispose(), this.material.dispose() } }, { key: "update", value: function () { this.light.updateWorldMatrix(!0, !1), void 0 !== this.color ? this.material.color.set(this.color) : this.material.color.copy(this.light.color) } }]), n }(gu), mm = new Ql, vm = new pc, bm = new pc, ym = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { var a; cr(this, n), (a = t.call(this)).light = e, a.matrix = e.matrixWorld, a.matrixAutoUpdate = !1, a.color = r, a.type = "HemisphereLightHelper"; var o = new zA(i); o.rotateY(.5 * Math.PI), a.material = new mc({ wireframe: !0, fog: !1, toneMapped: !1 }), void 0 === a.color && (a.material.vertexColors = !0); var s = o.getAttribute("position"), l = new Float32Array(3 * s.count); return o.setAttribute("color", new Sc(l, 3)), a.add(new gu(o, a.material)), a.update(), a } return dr(n, [{ key: "dispose", value: function () { this.children[0].geometry.dispose(), this.children[0].material.dispose() } }, { key: "update", value: function () { var e = this.children[0]; if (void 0 !== this.color) this.material.color.set(this.color); else { var t = e.geometry.getAttribute("color"); vm.copy(this.light.color), bm.copy(this.light.groundColor); for (var n = 0, i = t.count; n < i; n++) { var r = n < i / 2 ? vm : bm; t.setXYZ(n, r.r, r.g, r.b) } t.needsUpdate = !0 } this.light.updateWorldMatrix(!0, !1), e.lookAt(mm.setFromMatrixPosition(this.light.matrixWorld).negate()) } }]), n }(qg), Gm = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 10, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 10, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 4473924, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 8947848; cr(this, n), a = new pc(a), o = new pc(o); for (var s = r / 2, l = i / r, g = i / 2, c = [], u = [], C = 0, d = 0, I = -g; C <= r; C++, I += l) { c.push(-g, 0, I, g, 0, I), c.push(I, 0, -g, I, 0, g); var h = C === s ? a : o; h.toArray(u, d), d += 3, h.toArray(u, d), d += 3, h.toArray(u, d), d += 3, h.toArray(u, d), d += 3 } var A = new Uc; A.setAttribute("position", new Nc(c, 3)), A.setAttribute("color", new Nc(u, 3)); var p = new ah({ vertexColors: !0, toneMapped: !1 }); return (e = t.call(this, A, p)).type = "GridHelper", e } return dr(n, [{ key: "dispose", value: function () { this.geometry.dispose(), this.material.dispose() } }]), n }(Ih), Bm = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 10, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 16, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 8, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 64, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 4473924, l = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 8947848; cr(this, n), s = new pc(s), l = new pc(l); var g = [], c = []; if (r > 1) for (var u = 0; u < r; u++) { var C = u / r * (2 * Math.PI), d = Math.sin(C) * i, I = Math.cos(C) * i; g.push(0, 0, 0), g.push(d, 0, I); var h = 1 & u ? s : l; c.push(h.r, h.g, h.b), c.push(h.r, h.g, h.b) } for (var A = 0; A < a; A++)for (var p = 1 & A ? s : l, f = i - i / a * A, m = 0; m < o; m++) { var v = m / o * (2 * Math.PI), b = Math.sin(v) * f, y = Math.cos(v) * f; g.push(b, 0, y), c.push(p.r, p.g, p.b), v = (m + 1) / o * (2 * Math.PI), b = Math.sin(v) * f, y = Math.cos(v) * f, g.push(b, 0, y), c.push(p.r, p.g, p.b) } var G = new Uc; G.setAttribute("position", new Nc(g, 3)), G.setAttribute("color", new Nc(c, 3)); var B = new ah({ vertexColors: !0, toneMapped: !1 }); return (e = t.call(this, G, B)).type = "PolarGridHelper", e } return dr(n, [{ key: "dispose", value: function () { this.geometry.dispose(), this.material.dispose() } }]), n }(Ih), Zm = new Ql, wm = new Ql, Sm = new Ql, Rm = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r) { var a; cr(this, n), (a = t.call(this)).light = e, a.matrix = e.matrixWorld, a.matrixAutoUpdate = !1, a.color = r, a.type = "DirectionalLightHelper", void 0 === i && (i = 1); var o = new Uc; o.setAttribute("position", new Nc([-i, i, 0, i, i, 0, i, -i, 0, -i, -i, 0, -i, i, 0], 3)); var s = new ah({ fog: !1, toneMapped: !1 }); return a.lightPlane = new uh(o, s), a.add(a.lightPlane), (o = new Uc).setAttribute("position", new Nc([0, 0, 0, 0, 0, 1], 3)), a.targetLine = new uh(o, s), a.add(a.targetLine), a.update(), a } return dr(n, [{ key: "dispose", value: function () { this.lightPlane.geometry.dispose(), this.lightPlane.material.dispose(), this.targetLine.geometry.dispose(), this.targetLine.material.dispose() } }, { key: "update", value: function () { this.light.updateWorldMatrix(!0, !1), this.light.target.updateWorldMatrix(!0, !1), Zm.setFromMatrixPosition(this.light.matrixWorld), wm.setFromMatrixPosition(this.light.target.matrixWorld), Sm.subVectors(wm, Zm), this.lightPlane.lookAt(wm), void 0 !== this.color ? (this.lightPlane.material.color.set(this.color), this.targetLine.material.color.set(this.color)) : (this.lightPlane.material.color.copy(this.light.color), this.targetLine.material.color.copy(this.light.color)), this.targetLine.lookAt(wm), this.targetLine.scale.z = Sm.length() } }]), n }(qg), xm = new Ql, Wm = new pu, Vm = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; cr(this, n); var r = new Uc, a = new ah({ color: 16777215, vertexColors: !0, toneMapped: !1 }), o = [], s = [], l = {}; function g(e, t) { c(e), c(t) } function c(e) { o.push(0, 0, 0), s.push(0, 0, 0), void 0 === l[e] && (l[e] = []), l[e].push(o.length / 3 - 1) } g("n1", "n2"), g("n2", "n4"), g("n4", "n3"), g("n3", "n1"), g("f1", "f2"), g("f2", "f4"), g("f4", "f3"), g("f3", "f1"), g("n1", "f1"), g("n2", "f2"), g("n3", "f3"), g("n4", "f4"), g("p", "n1"), g("p", "n2"), g("p", "n3"), g("p", "n4"), g("u1", "u2"), g("u2", "u3"), g("u3", "u1"), g("c", "t"), g("p", "c"), g("cn1", "cn2"), g("cn3", "cn4"), g("cf1", "cf2"), g("cf3", "cf4"), r.setAttribute("position", new Nc(o, 3)), r.setAttribute("color", new Nc(s, 3)), (i = t.call(this, r, a)).type = "CameraHelper", i.camera = e, i.camera.updateProjectionMatrix && i.camera.updateProjectionMatrix(), i.matrix = e.matrixWorld, i.matrixAutoUpdate = !1, i.pointMap = l, i.update(); var u = new pc(16755200), C = new pc(16711680), d = new pc(43775), I = new pc(16777215), h = new pc(3355443); return i.setColors(u, C, d, I, h), i } return dr(n, [{ key: "setColors", value: function (e, t, n, i, r) { var a = this.geometry.getAttribute("color"); a.setXYZ(0, e.r, e.g, e.b), a.setXYZ(1, e.r, e.g, e.b), a.setXYZ(2, e.r, e.g, e.b), a.setXYZ(3, e.r, e.g, e.b), a.setXYZ(4, e.r, e.g, e.b), a.setXYZ(5, e.r, e.g, e.b), a.setXYZ(6, e.r, e.g, e.b), a.setXYZ(7, e.r, e.g, e.b), a.setXYZ(8, e.r, e.g, e.b), a.setXYZ(9, e.r, e.g, e.b), a.setXYZ(10, e.r, e.g, e.b), a.setXYZ(11, e.r, e.g, e.b), a.setXYZ(12, e.r, e.g, e.b), a.setXYZ(13, e.r, e.g, e.b), a.setXYZ(14, e.r, e.g, e.b), a.setXYZ(15, e.r, e.g, e.b), a.setXYZ(16, e.r, e.g, e.b), a.setXYZ(17, e.r, e.g, e.b), a.setXYZ(18, e.r, e.g, e.b), a.setXYZ(19, e.r, e.g, e.b), a.setXYZ(20, e.r, e.g, e.b), a.setXYZ(21, e.r, e.g, e.b), a.setXYZ(22, e.r, e.g, e.b), a.setXYZ(23, e.r, e.g, e.b), a.setXYZ(24, t.r, t.g, t.b), a.setXYZ(25, t.r, t.g, t.b), a.setXYZ(26, t.r, t.g, t.b), a.setXYZ(27, t.r, t.g, t.b), a.setXYZ(28, t.r, t.g, t.b), a.setXYZ(29, t.r, t.g, t.b), a.setXYZ(30, t.r, t.g, t.b), a.setXYZ(31, t.r, t.g, t.b), a.setXYZ(32, n.r, n.g, n.b), a.setXYZ(33, n.r, n.g, n.b), a.setXYZ(34, n.r, n.g, n.b), a.setXYZ(35, n.r, n.g, n.b), a.setXYZ(36, n.r, n.g, n.b), a.setXYZ(37, n.r, n.g, n.b), a.setXYZ(38, i.r, i.g, i.b), a.setXYZ(39, i.r, i.g, i.b), a.setXYZ(40, r.r, r.g, r.b), a.setXYZ(41, r.r, r.g, r.b), a.setXYZ(42, r.r, r.g, r.b), a.setXYZ(43, r.r, r.g, r.b), a.setXYZ(44, r.r, r.g, r.b), a.setXYZ(45, r.r, r.g, r.b), a.setXYZ(46, r.r, r.g, r.b), a.setXYZ(47, r.r, r.g, r.b), a.setXYZ(48, r.r, r.g, r.b), a.setXYZ(49, r.r, r.g, r.b), a.needsUpdate = !0 } }, { key: "update", value: function () { var e = this.geometry, t = this.pointMap; Wm.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse), km("c", t, e, Wm, 0, 0, -1), km("t", t, e, Wm, 0, 0, 1), km("n1", t, e, Wm, -1, -1, -1), km("n2", t, e, Wm, 1, -1, -1), km("n3", t, e, Wm, -1, 1, -1), km("n4", t, e, Wm, 1, 1, -1), km("f1", t, e, Wm, -1, -1, 1), km("f2", t, e, Wm, 1, -1, 1), km("f3", t, e, Wm, -1, 1, 1), km("f4", t, e, Wm, 1, 1, 1), km("u1", t, e, Wm, .7, 1.1, -1), km("u2", t, e, Wm, -.7, 1.1, -1), km("u3", t, e, Wm, 0, 2, -1), km("cf1", t, e, Wm, -1, 0, 1), km("cf2", t, e, Wm, 1, 0, 1), km("cf3", t, e, Wm, 0, -1, 1), km("cf4", t, e, Wm, 0, 1, 1), km("cn1", t, e, Wm, -1, 0, -1), km("cn2", t, e, Wm, 1, 0, -1), km("cn3", t, e, Wm, 0, -1, -1), km("cn4", t, e, Wm, 0, 1, -1), e.getAttribute("position").needsUpdate = !0 } }, { key: "dispose", value: function () { this.geometry.dispose(), this.material.dispose() } }]), n }(Ih); function km(e, t, n, i, r, a, o) { xm.set(r, a, o).unproject(i); var s = t[e]; if (void 0 !== s) for (var l = n.getAttribute("position"), g = 0, c = s.length; g < c; g++)l.setXYZ(s[g], xm.x, xm.y, xm.z) } var Hm, Mm, Fm = new eg, Nm = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 16776960; cr(this, n); var a = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7]), o = new Float32Array(24), s = new Uc; return s.setIndex(new Sc(a, 1)), s.setAttribute("position", new Sc(o, 3)), (i = t.call(this, s, new ah({ color: r, toneMapped: !1 }))).object = e, i.type = "BoxHelper", i.matrixAutoUpdate = !1, i.update(), i } return dr(n, [{ key: "update", value: function (e) { if (void 0 !== e && console.warn("THREE.BoxHelper: .update() has no longer arguments."), void 0 !== this.object && Fm.setFromObject(this.object), !Fm.isEmpty()) { var t = Fm.min, n = Fm.max, i = this.geometry.attributes.position, r = i.array; r[0] = n.x, r[1] = n.y, r[2] = n.z, r[3] = t.x, r[4] = n.y, r[5] = n.z, r[6] = t.x, r[7] = t.y, r[8] = n.z, r[9] = n.x, r[10] = t.y, r[11] = n.z, r[12] = n.x, r[13] = n.y, r[14] = t.z, r[15] = t.x, r[16] = n.y, r[17] = t.z, r[18] = t.x, r[19] = t.y, r[20] = t.z, r[21] = n.x, r[22] = t.y, r[23] = t.z, i.needsUpdate = !0, this.geometry.computeBoundingSphere() } } }, { key: "setFromObject", value: function (e) { return this.object = e, this.update(), this } }, { key: "copy", value: function (e, t) { return yr(hr(n.prototype), "copy", this).call(this, e, t), this.object = e.object, this } }, { key: "dispose", value: function () { this.geometry.dispose(), this.material.dispose() } }]), n }(Ih), Xm = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 16776960; cr(this, n); var a = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7]), o = new Uc; return o.setIndex(new Sc(a, 1)), o.setAttribute("position", new Nc([1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, -1, -1, 1, -1, -1, -1, -1, 1, -1, -1], 3)), (i = t.call(this, o, new ah({ color: r, toneMapped: !1 }))).box = e, i.type = "Box3Helper", i.geometry.computeBoundingSphere(), i } return dr(n, [{ key: "updateMatrixWorld", value: function (e) { var t = this.box; t.isEmpty() || (t.getCenter(this.position), t.getSize(this.scale), this.scale.multiplyScalar(.5), yr(hr(n.prototype), "updateMatrixWorld", this).call(this, e)) } }, { key: "dispose", value: function () { this.geometry.dispose(), this.material.dispose() } }]), n }(Ih), Ym = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 16776960; cr(this, n); var o = a, s = new Uc; s.setAttribute("position", new Nc([1, -1, 0, -1, 1, 0, -1, -1, 0, 1, 1, 0, -1, 1, 0, -1, -1, 0, 1, -1, 0, 1, 1, 0], 3)), s.computeBoundingSphere(), (i = t.call(this, s, new ah({ color: o, toneMapped: !1 }))).type = "PlaneHelper", i.plane = e, i.size = r; var l = new Uc; return l.setAttribute("position", new Nc([1, 1, 0, -1, 1, 0, -1, -1, 0, 1, 1, 0, -1, -1, 0, 1, -1, 0], 3)), l.computeBoundingSphere(), i.add(new gu(l, new mc({ color: o, opacity: .2, transparent: !0, depthWrite: !1, toneMapped: !1 }))), i } return dr(n, [{ key: "updateMatrixWorld", value: function (e) { this.position.set(0, 0, 0), this.scale.set(.5 * this.size, .5 * this.size, 1), this.lookAt(this.plane.normal), this.translateZ(-this.plane.constant), yr(hr(n.prototype), "updateMatrixWorld", this).call(this, e) } }, { key: "dispose", value: function () { this.geometry.dispose(), this.material.dispose(), this.children[0].geometry.dispose(), this.children[0].material.dispose() } }]), n }(uh), Km = new Ql, Lm = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : new Ql(0, 0, 1), r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new Ql(0, 0, 0), a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 16776960, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : .2 * a, l = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : .2 * s; return cr(this, n), (e = t.call(this)).type = "ArrowHelper", void 0 === Hm && ((Hm = new Uc).setAttribute("position", new Nc([0, 0, 0, 0, 1, 0], 3)), (Mm = new eA(0, .5, 1, 5, 1)).translate(0, -.5, 0)), e.position.copy(r), e.line = new uh(Hm, new ah({ color: o, toneMapped: !1 })), e.line.matrixAutoUpdate = !1, e.add(e.line), e.cone = new gu(Mm, new mc({ color: o, toneMapped: !1 })), e.cone.matrixAutoUpdate = !1, e.add(e.cone), e.setDirection(i), e.setLength(a, s, l), e } return dr(n, [{ key: "setDirection", value: function (e) { if (e.y > .99999) this.quaternion.set(0, 0, 0, 1); else if (e.y < -.99999) this.quaternion.set(1, 0, 0, 0); else { Km.set(e.z, 0, -e.x).normalize(); var t = Math.acos(e.y); this.quaternion.setFromAxisAngle(Km, t) } } }, { key: "setLength", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : .2 * e, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : .2 * t; this.line.scale.set(1, Math.max(1e-4, e - t), 1), this.line.updateMatrix(), this.cone.scale.set(n, t, n), this.cone.position.y = e, this.cone.updateMatrix() } }, { key: "setColor", value: function (e) { this.line.material.color.set(e), this.cone.material.color.set(e) } }, { key: "copy", value: function (e) { return yr(hr(n.prototype), "copy", this).call(this, e, !1), this.line.copy(e.line), this.cone.copy(e.cone), this } }, { key: "dispose", value: function () { this.line.geometry.dispose(), this.line.material.dispose(), this.cone.geometry.dispose(), this.cone.material.dispose() } }]), n }(qg), zm = function (e) { Ir(n, e); var t = fr(n); function n() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1; cr(this, n); var r = [0, 0, 0, i, 0, 0, 0, 0, 0, 0, i, 0, 0, 0, 0, 0, 0, i], a = new Uc; a.setAttribute("position", new Nc(r, 3)), a.setAttribute("color", new Nc([1, 0, 0, 1, .6, 0, 0, 1, 0, .6, 1, 0, 0, 0, 1, 0, .6, 1], 3)); var o = new ah({ vertexColors: !0, toneMapped: !1 }); return (e = t.call(this, a, o)).type = "AxesHelper", e } return dr(n, [{ key: "setColors", value: function (e, t, n) { var i = new pc, r = this.geometry.attributes.color.array; return i.set(e), i.toArray(r, 0), i.toArray(r, 3), i.set(t), i.toArray(r, 6), i.toArray(r, 9), i.set(n), i.toArray(r, 12), i.toArray(r, 15), this.geometry.attributes.color.needsUpdate = !0, this } }, { key: "dispose", value: function () { this.geometry.dispose(), this.material.dispose() } }]), n }(Ih), Em = function () { function e() { cr(this, e), this.type = "ShapePath", this.color = new pc, this.subPaths = [], this.currentPath = null } return dr(e, [{ key: "moveTo", value: function (e, t) { return this.currentPath = new jh, this.subPaths.push(this.currentPath), this.currentPath.moveTo(e, t), this } }, { key: "lineTo", value: function (e, t) { return this.currentPath.lineTo(e, t), this } }, { key: "quadraticCurveTo", value: function (e, t, n, i) { return this.currentPath.quadraticCurveTo(e, t, n, i), this } }, { key: "bezierCurveTo", value: function (e, t, n, i, r, a) { return this.currentPath.bezierCurveTo(e, t, n, i, r, a), this } }, { key: "splineThru", value: function (e) { return this.currentPath.splineThru(e), this } }, { key: "toShapes", value: function (e) { function t(e, t) { for (var n = t.length, i = !1, r = n - 1, a = 0; a < n; r = a++) { var o = t[r], s = t[a], l = s.x - o.x, g = s.y - o.y; if (Math.abs(g) > Number.EPSILON) { if (g < 0 && (o = t[a], l = -l, s = t[r], g = -g), e.y < o.y || e.y > s.y) continue; if (e.y === o.y) { if (e.x === o.x) return !0 } else { var c = g * (e.x - o.x) - l * (e.y - o.y); if (0 === c) return !0; if (c < 0) continue; i = !i } } else { if (e.y !== o.y) continue; if (s.x <= e.x && e.x <= o.x || o.x <= e.x && e.x <= s.x) return !0 } } return i } var n, i, r, a = FA.isClockWise, o = this.subPaths; if (0 === o.length) return []; var s = []; if (1 === o.length) return i = o[0], (r = new gA).curves = i.curves, s.push(r), s; var l = !a(o[0].getPoints()); l = e ? !l : l; var g, c, u = [], C = [], d = [], I = 0; C[I] = void 0, d[I] = []; for (var h = 0, A = o.length; h < A; h++)n = a(g = (i = o[h]).getPoints()), (n = e ? !n : n) ? (!l && C[I] && I++, C[I] = { s: new gA, p: g }, C[I].s.curves = i.curves, l && I++, d[I] = []) : d[I].push({ h: i, p: g[0] }); if (!C[0]) return function (e) { for (var t = [], n = 0, i = e.length; n < i; n++) { var r = e[n], a = new gA; a.curves = r.curves, t.push(a) } return t }(o); if (C.length > 1) { for (var p = !1, f = 0, m = 0, v = C.length; m < v; m++)u[m] = []; for (var b = 0, y = C.length; b < y; b++)for (var G = d[b], B = 0; B < G.length; B++) { for (var Z = G[B], w = !0, S = 0; S < C.length; S++)t(Z.p, C[S].p) && (b !== S && f++, w ? (w = !1, u[S].push(Z)) : p = !0); w && u[b].push(Z) } f > 0 && !1 === p && (d = u) } for (var R = 0, x = C.length; R < x; R++) { r = C[R].s, s.push(r); for (var W = 0, V = (c = d[R]).length; W < V; W++)r.holes.push(c[W].h) } return s } }]), e }(); "undefined" !== typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register", { detail: { revision: Br } })), "undefined" !== typeof window && (window.__THREE__ ? console.warn("WARNING: Multiple instances of Three.js being imported.") : window.__THREE__ = Br); var Tm = n(4585); function _m(e) { var t, n = new Set, i = function (e, i) { var r = "function" === typeof e ? e(t) : e; if (r !== t) { var a = t; t = i ? r : Object.assign({}, t, r), n.forEach((function (e) { return e(t, a) })) } }, r = function () { return t }, a = { setState: i, getState: r, subscribe: function (e, i, a) { return i || a ? function (e) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : r, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : Object.is; console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware"); var o = i(t); function s() { var n = i(t); if (!a(o, n)) { var r = o; e(o = n, r) } } return n.add(s), function () { return n.delete(s) } }(e, i, a) : (n.add(e), function () { return n.delete(e) }) }, destroy: function () { return n.clear() } }; return t = e(i, r, a), a } var Um = "undefined" === typeof window || !window.navigator || /ServerSideRendering|^Deno\//.test(window.navigator.userAgent) ? t.useEffect : t.useLayoutEffect; var Dm = n(258), Pm = n.n(Dm), Jm = n(5296), Om = function (e) { return "object" === typeof e && "function" === typeof e.then }, jm = []; function Qm(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : function (e, t) { return e === t }; if (e === t) return !0; if (!e || !t) return !1; var i = e.length; if (t.length !== i) return !1; for (var r = 0; r < i; r++)if (!n(e[r], t[r])) return !1; return !0 } function qm(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2], i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}; null === t && (t = [e]); for (var r = 0, a = jm; r < a.length; r++) { var o = a[r]; if (Qm(t, o.keys, o.equal)) { if (n) return; if (Object.prototype.hasOwnProperty.call(o, "error")) throw o.error; if (Object.prototype.hasOwnProperty.call(o, "response")) return i.lifespan && i.lifespan > 0 && (o.timeout && clearTimeout(o.timeout), o.timeout = setTimeout(o.remove, i.lifespan)), o.response; if (!n) throw o.promise } } var s = { keys: t, equal: i.equal, remove: function () { var e = jm.indexOf(s); -1 !== e && jm.splice(e, 1) }, promise: (Om(e) ? e : e.apply(void 0, (0, v.Z)(t))).then((function (e) { s.response = e, i.lifespan && i.lifespan > 0 && (s.timeout = setTimeout(s.remove, i.lifespan)) })).catch((function (e) { return s.error = e })) }; if (jm.push(s), !n) throw s.promise } var $m, ev, tv = function (e, t, n) { return qm(e, t, !1, n) }, nv = ["args", "attach"], iv = ["args", "children"], rv = ["args", "children"], av = ["children", "key", "ref"], ov = ["children", "key", "ref"], sv = ["params"], lv = {}; var gv = function (e) { return "colorSpace" in e || "outputColorSpace" in e }, cv = function () { var e; return null != (e = lv.ColorManagement) ? e : null }, uv = function (e) { return e && e.isOrthographicCamera }, Cv = "undefined" !== typeof window && (null != ($m = window.document) && $m.createElement || "ReactNative" === (null == (ev = window.navigator) ? void 0 : ev.product)) ? t.useLayoutEffect : t.useEffect; function dv(e) { var n = t.useRef(e); return Cv((function () { n.current = e }), [e]), n } function Iv(e) { var t = e.set; return Cv((function () { return t(new Promise((function () { return null }))), function () { return t(!1) } }), [t]), null } var hv = function (e) { Ir(n, e); var t = fr(n); function n() { var e; cr(this, n); for (var i = arguments.length, r = new Array(i), a = 0; a < i; a++)r[a] = arguments[a]; return (e = t.call.apply(t, [this].concat(r))).state = { error: !1 }, e } return dr(n, [{ key: "componentDidCatch", value: function (e) { this.props.set(e) } }, { key: "render", value: function () { return this.state.error ? null : this.props.children } }]), n }(t.Component); hv.getDerivedStateFromError = function () { return { error: !0 } }; var Av = "__default", pv = new Map, fv = function (e) { return e && !!e.memoized && !!e.changes }; function mv(e) { var t, n = "undefined" !== typeof window ? null != (t = window.devicePixelRatio) ? t : 2 : 1; return Array.isArray(e) ? Math.min(Math.max(e[0], n), e[1]) : e } var vv = function (e) { var t; return null == (t = e.__r3f) ? void 0 : t.root.getState() }, bv = { obj: function (e) { return e === Object(e) && !bv.arr(e) && "function" !== typeof e }, fun: function (e) { return "function" === typeof e }, str: function (e) { return "string" === typeof e }, num: function (e) { return "number" === typeof e }, boo: function (e) { return "boolean" === typeof e }, und: function (e) { return void 0 === e }, arr: function (e) { return Array.isArray(e) }, equ: function (e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, i = n.arrays, r = void 0 === i ? "shallow" : i, a = n.objects, o = void 0 === a ? "reference" : a, s = n.strict, l = void 0 === s || s; if (typeof e !== typeof t || !!e !== !!t) return !1; if (bv.str(e) || bv.num(e)) return e === t; var g = bv.obj(e); if (g && "reference" === o) return e === t; var c, u = bv.arr(e); if (u && "reference" === r) return e === t; if ((u || g) && e === t) return !0; for (c in e) if (!(c in t)) return !1; if (g && "shallow" === r && "shallow" === o) { for (c in l ? t : e) if (!bv.equ(e[c], t[c], { strict: l, objects: "reference" })) return !1 } else for (c in l ? t : e) if (e[c] !== t[c]) return !1; if (bv.und(c)) { if (u && 0 === e.length && 0 === t.length) return !0; if (g && 0 === Object.keys(e).length && 0 === Object.keys(t).length) return !0; if (e !== t) return !1 } return !0 } }; function yv(e) { var t = { nodes: {}, materials: {} }; return e && e.traverse((function (e) { e.name && (t.nodes[e.name] = e), e.material && !t.materials[e.material.name] && (t.materials[e.material.name] = e.material) })), t } function Gv(e, t) { return e.__r3f = ln({ type: "", root: null, previousAttach: null, memoizedProps: {}, eventCount: 0, handlers: {}, objects: [], parent: null }, t), e } function Bv(e, t) { var n = e; if (t.includes("-")) { var i = t.split("-"), r = i.pop(); return n = i.reduce((function (e, t) { return e[t] }), e), { target: n, key: r } } return { target: n, key: t } } var Zv = /-\d+$/; function wv(e, t, n) { if (bv.str(n)) { if (Zv.test(n)) { var i = Bv(e, n.replace(Zv, "")), r = i.target, a = i.key; Array.isArray(r[a]) || (r[a] = []) } var o = Bv(e, n), s = o.target, l = o.key; t.__r3f.previousAttach = s[l], s[l] = t } else t.__r3f.previousAttach = n(e, t) } function Sv(e, t, n) { var i, r; if (bv.str(n)) { var a = Bv(e, n), o = a.target, s = a.key, l = t.__r3f.previousAttach; void 0 === l ? delete o[s] : o[s] = l } else null == (i = t.__r3f) || null == i.previousAttach || i.previousAttach(e, t); null == (r = t.__r3f) || delete r.previousAttach } function Rv(e, t) { t.children, t.key, t.ref; var n, i = or(t, av), a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, o = (a.children, a.key, a.ref, or(a, ov)), s = arguments.length > 3 && void 0 !== arguments[3] && arguments[3], l = null != (n = null == e ? void 0 : e.__r3f) ? n : {}, g = Object.entries(i), c = []; if (s) for (var u = Object.keys(o), C = 0; C < u.length; C++)i.hasOwnProperty(u[C]) || g.unshift([u[C], Av + "remove"]); g.forEach((function (t) { var n, a = (0, r.Z)(t, 2), s = a[0], l = a[1]; if ((null == (n = e.__r3f) || !n.primitive || "object" !== s) && !bv.equ(l, o[s])) { if (/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(s)) return c.push([s, l, !0, []]); var g = []; for (var u in s.includes("-") && (g = s.split("-")), c.push([s, l, !1, g]), i) { var C = i[u]; u.startsWith("".concat(s, "-")) && c.push([u, C, !1, u.split("-")]) } } })); var d = ln({}, i); return l.memoizedProps && l.memoizedProps.args && (d.args = l.memoizedProps.args), l.memoizedProps && l.memoizedProps.attach && (d.attach = l.memoizedProps.attach), { memoized: d, changes: c } } var xv = "undefined" !== typeof process && !1; function Wv(e, t) { var n, i, a, o = null != (n = e.__r3f) ? n : {}, s = o.root, l = null != (i = null == s || null == s.getState ? void 0 : s.getState()) ? i : {}, g = fv(t) ? t : Rv(e, t), c = g.memoized, u = g.changes, C = o.eventCount; e.__r3f && (e.__r3f.memoizedProps = c); for (var d = 0; d < u.length; d++) { var I = (0, r.Z)(u[d], 4), h = I[0], A = I[1], p = I[2], f = I[3]; if (gv(e)) { var m = "srgb", b = "srgb-linear"; "encoding" === h ? (h = "colorSpace", A = 3001 === A ? m : b) : "outputEncoding" === h && (h = "outputColorSpace", A = 3001 === A ? m : b) } var y = e, G = y[h]; if (f.length && (G = f.reduce((function (e, t) { return e[t] }), e), !G || !G.set)) { var B = Ci(f.reverse()), Z = B[0]; y = B.slice(1).reverse().reduce((function (e, t) { return e[t] }), e), h = Z } if (A === Av + "remove") if (y.constructor) { var w = pv.get(y.constructor); w || (w = new y.constructor, pv.set(y.constructor, w)), A = w[h] } else A = 0; if (p) A ? o.handlers[h] = A : delete o.handlers[h], o.eventCount = Object.keys(o.handlers).length; else if (G && G.set && (G.copy || G instanceof Yg)) { var S; if (Array.isArray(A)) G.fromArray ? G.fromArray(A) : (S = G).set.apply(S, (0, v.Z)(A)); else if (G.copy && A && A.constructor && (xv ? G.constructor.name === A.constructor.name : G.constructor === A.constructor)) G.copy(A); else if (void 0 !== A) { var R = G instanceof pc; !R && G.setScalar ? G.setScalar(A) : G instanceof Yg && A instanceof Yg ? G.mask = A.mask : G.set(A), cv() || l.linear || !R || G.convertSRGBToLinear() } } else if (y[h] = A, y[h] instanceof zl && y[h].format === to && y[h].type === Ta) { var x = y[h]; gv(x) && gv(l.gl) ? x.colorSpace = l.gl.outputColorSpace : x.encoding = l.gl.outputEncoding } Vv(e) } if (o.parent && l.internal && e.raycast && C !== o.eventCount) { var W = l.internal.interaction.indexOf(e); W > -1 && l.internal.interaction.splice(W, 1), o.eventCount && l.internal.interaction.push(e) } return !(1 === u.length && "onUpdate" === u[0][0]) && u.length && null != (a = e.__r3f) && a.parent && kv(e), e } function Vv(e) { var t, n, i = null == (t = e.__r3f) || null == (n = t.root) || null == n.getState ? void 0 : n.getState(); i && 0 === i.internal.frames && i.invalidate() } function kv(e) { null == e.onUpdate || e.onUpdate(e) } function Hv(e, t) { e.manual || (uv(e) ? (e.left = t.width / -2, e.right = t.width / 2, e.top = t.height / 2, e.bottom = t.height / -2) : e.aspect = t.width / t.height, e.updateProjectionMatrix(), e.updateMatrixWorld()) } function Mv(e) { return (e.eventObject || e.object).uuid + "/" + e.index + e.instanceId } function Fv(e, t, n, i) { var r = n.get(t); r && (n.delete(t), 0 === n.size && (e.delete(i), r.target.releasePointerCapture(i))) } function Nv(e) { function t(e) { return e.filter((function (e) { return ["Move", "Over", "Enter", "Out", "Leave"].some((function (t) { var n; return null == (n = e.__r3f) ? void 0 : n.handlers["onPointer" + t] })) })) } function n(t) { var n, i = e.getState().internal, r = gr(i.hovered.values()); try { var a = function () { var e = n.value; if (!t.length || !t.find((function (t) { return t.object === e.object && t.index === e.index && t.instanceId === e.instanceId }))) { var r = e.eventObject.__r3f, a = null == r ? void 0 : r.handlers; if (i.hovered.delete(Mv(e)), null != r && r.eventCount) { var o = ln(ln({}, e), {}, { intersections: t }); null == a.onPointerOut || a.onPointerOut(o), null == a.onPointerLeave || a.onPointerLeave(o) } } }; for (r.s(); !(n = r.n()).done;)a() } catch (o) { r.e(o) } finally { r.f() } } function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n].__r3f; null == i || null == i.handlers.onPointerMissed || i.handlers.onPointerMissed(e) } } return { handlePointer: function (r) { switch (r) { case "onPointerLeave": case "onPointerCancel": return function () { return n([]) }; case "onLostPointerCapture": return function (t) { var i = e.getState().internal; "pointerId" in t && i.capturedMap.has(t.pointerId) && requestAnimationFrame((function () { i.capturedMap.has(t.pointerId) && (i.capturedMap.delete(t.pointerId), n([])) })) } }return function (a) { var o = e.getState(), s = o.onPointerMissed, l = o.internal; l.lastEvent.current = a; var g = "onPointerMove" === r, c = "onClick" === r || "onContextMenu" === r || "onDoubleClick" === r, u = function (t, n) { for (var i = e.getState(), r = new Set, a = [], o = n ? n(i.internal.interaction) : i.internal.interaction, s = 0; s < o.length; s++) { var l = vv(o[s]); l && (l.raycaster.camera = void 0) } i.previousRoot || null == i.events.compute || i.events.compute(t, i); var g = o.flatMap((function (e) { var n, i = vv(e); return i && i.events.enabled && null !== i.raycaster.camera ? (void 0 === i.raycaster.camera && (null == i.events.compute || i.events.compute(t, i, null == (n = i.previousRoot) ? void 0 : n.getState()), void 0 === i.raycaster.camera && (i.raycaster.camera = null)), i.raycaster.camera ? i.raycaster.intersectObject(e, !0) : []) : [] })).sort((function (e, t) { var n = vv(e.object), i = vv(t.object); return n && i && i.events.priority - n.events.priority || e.distance - t.distance })).filter((function (e) { var t = Mv(e); return !r.has(t) && (r.add(t), !0) })); i.events.filter && (g = i.events.filter(g, i)); var c, u = gr(g); try { for (u.s(); !(c = u.n()).done;)for (var C = c.value, d = C.object; d;) { var I; null != (I = d.__r3f) && I.eventCount && a.push(ln(ln({}, C), {}, { eventObject: d })), d = d.parent } } catch (f) { u.e(f) } finally { u.f() } if ("pointerId" in t && i.internal.capturedMap.has(t.pointerId)) { var h, A = gr(i.internal.capturedMap.get(t.pointerId).values()); try { for (A.s(); !(h = A.n()).done;) { var p = h.value; r.has(Mv(p.intersection)) || a.push(p.intersection) } } catch (f) { A.e(f) } finally { A.f() } } return a }(a, g ? t : void 0), C = c ? function (t) { var n = e.getState().internal, i = t.offsetX - n.initialClick[0], r = t.offsetY - n.initialClick[1]; return Math.round(Math.sqrt(i * i + r * r)) }(a) : 0; "onPointerDown" === r && (l.initialClick = [a.offsetX, a.offsetY], l.initialHits = u.map((function (e) { return e.eventObject }))), c && !u.length && C <= 2 && (i(a, l.interaction), s && s(a)), g && n(u), function (t, i, r, a) { var o = e.getState(); if (t.length) { var s, l = { stopped: !1 }, g = gr(t); try { var c = function () { var e = s.value, g = vv(e.object) || o, c = g.raycaster, u = g.pointer, C = g.camera, d = g.internal, I = new Ql(u.x, u.y, 0).unproject(C), h = function (t) { var n, i; return null != (n = null == (i = d.capturedMap.get(t)) ? void 0 : i.has(e.eventObject)) && n }, A = function (t) { var n = { intersection: e, target: i.target }; d.capturedMap.has(t) ? d.capturedMap.get(t).set(e.eventObject, n) : d.capturedMap.set(t, new Map([[e.eventObject, n]])), i.target.setPointerCapture(t) }, p = function (t) { var n = d.capturedMap.get(t); n && Fv(d.capturedMap, e.eventObject, n, t) }, f = {}; for (var m in i) { var b = i[m]; "function" !== typeof b && (f[m] = b) } var y = ln(ln(ln({}, e), f), {}, { pointer: u, intersections: t, stopped: l.stopped, delta: r, unprojectedPoint: I, ray: c.ray, camera: C, stopPropagation: function () { var r = "pointerId" in i && d.capturedMap.get(i.pointerId); if ((!r || r.has(e.eventObject)) && (y.stopped = l.stopped = !0, d.hovered.size && Array.from(d.hovered.values()).find((function (t) { return t.eventObject === e.eventObject })))) { var a = t.slice(0, t.indexOf(e)); n([].concat((0, v.Z)(a), [e])) } }, target: { hasPointerCapture: h, setPointerCapture: A, releasePointerCapture: p }, currentTarget: { hasPointerCapture: h, setPointerCapture: A, releasePointerCapture: p }, nativeEvent: i }); if (a(y), !0 === l.stopped) return 1 }; for (g.s(); !(s = g.n()).done && !c();); } catch (u) { g.e(u) } finally { g.f() } } }(u, a, C, (function (e) { var t = e.eventObject, n = t.__r3f, o = null == n ? void 0 : n.handlers; if (null != n && n.eventCount) if (g) { if (o.onPointerOver || o.onPointerEnter || o.onPointerOut || o.onPointerLeave) { var s = Mv(e), u = l.hovered.get(s); u ? u.stopped && e.stopPropagation() : (l.hovered.set(s, e), null == o.onPointerOver || o.onPointerOver(e), null == o.onPointerEnter || o.onPointerEnter(e)) } null == o.onPointerMove || o.onPointerMove(e) } else { var C = o[r]; C ? c && !l.initialHits.includes(t) || (i(a, l.interaction.filter((function (e) { return !l.initialHits.includes(e) }))), C(e)) : c && l.initialHits.includes(t) && i(a, l.interaction.filter((function (e) { return !l.initialHits.includes(e) }))) } })) } } } } var Xv, Yv = function (e) { return !(null == e || !e.render) }, Kv = t.createContext(null), Lv = function (e, n) { var i = function (e) { var n = "function" === typeof e ? _m(e) : e, i = function () { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : n.getState, a = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Object.is, o = (0, t.useReducer)((function (e) { return e + 1 }), 0), s = (0, r.Z)(o, 2)[1], l = n.getState(), g = (0, t.useRef)(l), c = (0, t.useRef)(i), u = (0, t.useRef)(a), C = (0, t.useRef)(!1), d = (0, t.useRef)(); void 0 === d.current && (d.current = i(l)); var I = !1; (g.current !== l || c.current !== i || u.current !== a || C.current) && (e = i(l), I = !a(d.current, e)), Um((function () { I && (d.current = e), g.current = l, c.current = i, u.current = a, C.current = !1 })); var h = (0, t.useRef)(l); Um((function () { var e = function () { try { var e = n.getState(), t = c.current(e); u.current(d.current, t) || (g.current = e, d.current = t, s()) } catch (i) { C.current = !0, s() } }, t = n.subscribe(e); return n.getState() !== h.current && e(), t }), []); var A = I ? e : d.current; return (0, t.useDebugValue)(A), A }; return Object.assign(i, n), i[Symbol.iterator] = function () { console.warn("[useStore, api] = create() is deprecated and will be removed in v4"); var e = [i, n]; return { next: function () { var t = e.length <= 0; return { value: e.shift(), done: t } } } }, i }((function (i, r) { var a = new Ql, o = new Ql, s = new Ql; function l() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : r().camera, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : o, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : r().size, i = n.width, l = n.height, g = n.top, c = n.left, u = i / l; t instanceof Ql ? s.copy(t) : s.set.apply(s, (0, v.Z)(t)); var C = e.getWorldPosition(a).distanceTo(s); if (uv(e)) return { width: i / e.zoom, height: l / e.zoom, top: g, left: c, factor: 1, distance: C, aspect: u }; var d = e.fov * Math.PI / 180, I = 2 * Math.tan(d / 2) * C, h = I * (i / l); return { width: h, height: I, top: g, left: c, factor: i / h, distance: C, aspect: u } } var g = void 0, c = function (e) { return i((function (t) { return { performance: ln(ln({}, t.performance), {}, { current: e }) } })) }, u = new fl, C = { set: i, get: r, gl: null, camera: null, raycaster: null, events: { priority: 1, enabled: !0, connected: !1 }, xr: null, scene: null, invalidate: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1; return e(r(), t) }, advance: function (e, t) { return n(e, t, r()) }, legacy: !1, linear: !1, flat: !1, controls: null, clock: new Gf, pointer: u, mouse: u, frameloop: "always", onPointerMissed: void 0, performance: { current: 1, min: .5, max: 1, debounce: 200, regress: function () { var e = r(); g && clearTimeout(g), e.performance.current !== e.performance.min && c(e.performance.min), g = setTimeout((function () { return c(r().performance.max) }), e.performance.debounce) } }, size: { width: 0, height: 0, top: 0, left: 0, updateStyle: !1 }, viewport: { initialDpr: 0, dpr: 0, width: 0, height: 0, top: 0, left: 0, aspect: 0, distance: 0, factor: 0, getCurrentViewport: l }, setEvents: function (e) { return i((function (t) { return ln(ln({}, t), {}, { events: ln(ln({}, t.events), e) }) })) }, setSize: function (e, t, n, a, s) { var g = r().camera, c = { width: e, height: t, top: a || 0, left: s || 0, updateStyle: n }; i((function (e) { return { size: c, viewport: ln(ln({}, e.viewport), l(g, o, c)) } })) }, setDpr: function (e) { return i((function (t) { var n = mv(e); return { viewport: ln(ln({}, t.viewport), {}, { dpr: n, initialDpr: t.viewport.initialDpr || n }) } })) }, setFrameloop: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "always", t = r().clock; t.stop(), t.elapsedTime = 0, "never" !== e && (t.start(), t.elapsedTime = 0), i((function () { return { frameloop: e } })) }, previousRoot: void 0, internal: { active: !1, priority: 0, frames: 0, lastEvent: t.createRef(), interaction: [], hovered: new Map, subscribers: [], initialClick: [0, 0], initialHits: [], capturedMap: new Map, subscribe: function (e, t, n) { var i = r().internal; return i.priority = i.priority + (t > 0 ? 1 : 0), i.subscribers.push({ ref: e, priority: t, store: n }), i.subscribers = i.subscribers.sort((function (e, t) { return e.priority - t.priority })), function () { var n = r().internal; null != n && n.subscribers && (n.priority = n.priority - (t > 0 ? 1 : 0), n.subscribers = n.subscribers.filter((function (t) { return t.ref !== e }))) } } } }; return C })), a = i.getState(), o = a.size, s = a.viewport.dpr, l = a.camera; return i.subscribe((function () { var e = i.getState(), t = e.camera, n = e.size, r = e.viewport, a = e.gl, g = e.set; if (n.width !== o.width || n.height !== o.height || r.dpr !== s) { var c; o = n, s = r.dpr, Hv(t, n), a.setPixelRatio(r.dpr); var u = null != (c = n.updateStyle) ? c : "undefined" !== typeof HTMLCanvasElement && a.domElement instanceof HTMLCanvasElement; a.setSize(n.width, n.height, u) } t !== l && (l = t, g((function (e) { return { viewport: ln(ln({}, e.viewport), e.viewport.getCurrentViewport(t)) } }))) })), i.subscribe((function (t) { return e(t) })), i }; var zv, Ev, Tv = new Set, _v = new Set, Uv = new Set; function Dv(e, t) { if (e.size) { var n, i = gr(e.values()); try { for (i.s(); !(n = i.n()).done;) { (0, n.value.callback)(t) } } catch (r) { i.e(r) } finally { i.f() } } } function Pv(e, t) { switch (e) { case "before": return Dv(Tv, t); case "after": return Dv(_v, t); case "tail": return Dv(Uv, t) } } function Jv(e, t, n) { var i = t.clock.getDelta(); for ("never" === t.frameloop && "number" === typeof e && (i = e - t.clock.elapsedTime, t.clock.oldTime = t.clock.elapsedTime, t.clock.elapsedTime = e), zv = t.internal.subscribers, Xv = 0; Xv < zv.length; Xv++)(Ev = zv[Xv]).ref.current(Ev.store.getState(), i, n); return !t.internal.priority && t.gl.render && t.gl.render(t.scene, t.camera), t.internal.frames = Math.max(0, t.internal.frames - 1), "always" === t.frameloop ? 1 : t.internal.frames } function Ov() { var e = t.useContext(Kv); if (!e) throw new Error("R3F: Hooks can only be used within the Canvas component!"); return e } function jv() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : function (e) { return e }, t = arguments.length > 1 ? arguments[1] : void 0; return Ov()(e, t) } function Qv(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = Ov(), i = n.getState().internal.subscribe, r = dv(e); return Cv((function () { return i(r, t, n) }), [t, i, n]), null } var qv = new WeakMap; function $v(e, t) { return function (n) { var i = qv.get(n); i || (i = new n, qv.set(n, i)), e && e(i); for (var r = arguments.length, a = new Array(r > 1 ? r - 1 : 0), o = 1; o < r; o++)a[o - 1] = arguments[o]; return Promise.all(a.map((function (e) { return new Promise((function (n, r) { return i.load(e, (function (e) { e.scene && Object.assign(e, yv(e.scene)), n(e) }), t, (function (t) { return r(new Error("Could not load ".concat(e, ": ").concat(null == t ? void 0 : t.message))) })) })) }))).finally((function () { return null == i.dispose ? void 0 : i.dispose() })) } } function eb(e, t, n, i) { var r = Array.isArray(t) ? t : [t], a = tv($v(n, i), [e].concat((0, v.Z)(r)), { equal: bv.equ }); return Array.isArray(t) ? a : a[0] } eb.preload = function (e, t, n) { var i = Array.isArray(t) ? t : [t]; return function (e, t, n) { qm(e, t, !0, n) }($v(n), [e].concat((0, v.Z)(i))) }, eb.clear = function (e, t) { var n = Array.isArray(t) ? t : [t]; return function (e) { if (void 0 === e || 0 === e.length) jm.splice(0, jm.length); else { var t = jm.find((function (t) { return Qm(e, t.keys, t.equal) })); t && t.remove() } }([e].concat((0, v.Z)(n))) }; var tb = new Map, nb = function (e) { var t, n, i, r = !1; function a(o) { n = requestAnimationFrame(a), r = !0, t = 0, Pv("before", o); var s, l = gr(e.values()); try { for (l.s(); !(s = l.n()).done;) { var g, c = s.value; !(i = c.store.getState()).internal.active || !("always" === i.frameloop || i.internal.frames > 0) || null != (g = i.gl.xr) && g.isPresenting || (t += Jv(o, i)) } } catch (u) { l.e(u) } finally { l.f() } if (Pv("after", o), 0 === t) return Pv("tail", o), r = !1, cancelAnimationFrame(n) } return { loop: a, invalidate: function t(n) { var i, o = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; if (!n) return e.forEach((function (e) { return t(e.store.getState()) }), o); null != (i = n.gl.xr) && i.isPresenting || !n.internal.active || "never" === n.frameloop || (n.internal.frames = Math.min(60, n.internal.frames + o), r || (r = !0, requestAnimationFrame(a))) }, advance: function (t) { var n = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], i = arguments.length > 2 ? arguments[2] : void 0, r = arguments.length > 3 ? arguments[3] : void 0; if (n && Pv("before", t), i) Jv(t, i, r); else { var a, o = gr(e.values()); try { for (o.s(); !(a = o.n()).done;) { Jv(t, a.value.store.getState()) } } catch (s) { o.e(s) } finally { o.f() } } n && Pv("after", t) } } }(tb), ib = nb.invalidate, rb = nb.advance, ab = function (e, t) { function n(e, t, n) { var i, r = t.args, a = void 0 === r ? [] : r, o = t.attach, s = or(t, nv), l = "".concat(e[0].toUpperCase()).concat(e.slice(1)); if ("primitive" === e) { if (void 0 === s.object) throw new Error("R3F: Primitives without 'object' are invalid!"); i = Gv(s.object, { type: e, root: n, attach: o, primitive: !0 }) } else { var g = lv[l]; if (!g) throw new Error("R3F: ".concat(l, " is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively")); if (!Array.isArray(a)) throw new Error("R3F: The args prop must be an array!"); i = Gv(lr(g, (0, v.Z)(a)), { type: e, root: n, attach: o, memoizedProps: { args: a } }) } return void 0 === i.__r3f.attach && (i instanceof Uc ? i.__r3f.attach = "geometry" : i instanceof Cc && (i.__r3f.attach = "material")), "inject" !== l && Wv(i, s), i } function i(e, t) { var n, i, r = !1; t && (null != (n = t.__r3f) && n.attach ? wv(e, t, t.__r3f.attach) : t.isObject3D && e.isObject3D && (e.add(t), r = !0), r || null == (i = e.__r3f) || i.objects.push(t), t.__r3f || Gv(t, {}), t.__r3f.parent = e, kv(t), Vv(t)) } function a(e, t, n) { var i = !1; if (t) { var r, a; if (null != (r = t.__r3f) && r.attach) wv(e, t, t.__r3f.attach); else if (t.isObject3D && e.isObject3D) { t.parent = e, t.dispatchEvent({ type: "added" }); var o = e.children.filter((function (e) { return e !== t })), s = o.indexOf(n); e.children = [].concat((0, v.Z)(o.slice(0, s)), [t], (0, v.Z)(o.slice(s))), i = !0 } i || null == (a = e.__r3f) || a.objects.push(t), t.__r3f || Gv(t, {}), t.__r3f.parent = e, kv(t), Vv(t) } } function o(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]; e && (0, v.Z)(e).forEach((function (e) { return s(t, e, n) })) } function s(e, t, n) { if (t) { var i, r, a; if (t.__r3f && (t.__r3f.parent = null), null != (i = e.__r3f) && i.objects && (e.__r3f.objects = e.__r3f.objects.filter((function (e) { return e !== t }))), null != (r = t.__r3f) && r.attach) Sv(e, t, t.__r3f.attach); else if (t.isObject3D && e.isObject3D) { var s; e.remove(t), null != (s = t.__r3f) && s.root && function (e, t) { var n = e.getState(), i = n.internal; i.interaction = i.interaction.filter((function (e) { return e !== t })), i.initialHits = i.initialHits.filter((function (e) { return e !== t })), i.hovered.forEach((function (e, n) { e.eventObject !== t && e.object !== t || i.hovered.delete(n) })), i.capturedMap.forEach((function (e, n) { Fv(i.capturedMap, t, e, n) })) }(t.__r3f.root, t) } var l, g = null == (a = t.__r3f) ? void 0 : a.primitive, c = void 0 === n ? null !== t.dispose && !g : n; if (!g) o(null == (l = t.__r3f) ? void 0 : l.objects, t, c), o(t.children, t, c); delete t.__r3f, c && t.dispose && "Scene" !== t.type && (0, Jm.unstable_scheduleCallback)(Jm.unstable_IdlePriority, (function () { try { t.dispose() } catch (e) { } })), Vv(e) } } var l = function () { return console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.") }, g = Pm()({ createInstance: n, removeChild: s, appendChild: i, appendInitialChild: i, insertBefore: a, supportsMutation: !0, isPrimaryRenderer: !1, supportsPersistence: !1, supportsHydration: !1, noTimeout: -1, appendChildToContainer: function (e, t) { if (t) { var n = e.getState().scene; n.__r3f && (n.__r3f.root = e, i(n, t)) } }, removeChildFromContainer: function (e, t) { t && s(e.getState().scene, t) }, insertInContainerBefore: function (e, t, n) { if (t && n) { var i = e.getState().scene; i.__r3f && a(i, t, n) } }, getRootHostContext: function () { return null }, getChildHostContext: function (e) { return e }, finalizeInitialChildren: function (e) { var t, n = null != (t = null == e ? void 0 : e.__r3f) ? t : {}; return Boolean(n.handlers) }, prepareUpdate: function (e, t, n, i) { var r; if ((null != (r = null == e ? void 0 : e.__r3f) ? r : {}).primitive && i.object && i.object !== e) return [!0]; var a = i.args, o = void 0 === a ? [] : a, s = (i.children, or(i, iv)), l = n.args, g = void 0 === l ? [] : l, c = (n.children, or(n, rv)); if (!Array.isArray(o)) throw new Error("R3F: the args prop must be an array!"); if (o.some((function (e, t) { return e !== g[t] }))) return [!0]; var u = Rv(e, s, c, !0); return u.changes.length ? [!1, u] : null }, commitUpdate: function (e, t, a, o, l, g) { var c = (0, r.Z)(t, 2), u = c[0], C = c[1]; u ? function (e, t, r, a) { var o, l = null == (o = e.__r3f) ? void 0 : o.parent; if (l) { var g = n(t, r, e.__r3f.root); if (e.children) { var c, u = gr(e.children); try { for (u.s(); !(c = u.n()).done;) { var C = c.value; C.__r3f && i(g, C) } } catch (d) { u.e(d) } finally { u.f() } e.children = e.children.filter((function (e) { return !e.__r3f })) } e.__r3f.objects.forEach((function (e) { return i(g, e) })), e.__r3f.objects = [], e.__r3f.autoRemovedBeforeAppend || s(l, e), g.parent && (g.__r3f.autoRemovedBeforeAppend = !0), i(l, g), g.raycast && g.__r3f.eventCount && g.__r3f.root.getState().internal.interaction.push(g), [a, a.alternate].forEach((function (e) { null !== e && (e.stateNode = g, e.ref && ("function" === typeof e.ref ? e.ref(g) : e.ref.current = g)) })) } }(e, a, l, g) : Wv(e, C) }, commitMount: function (e, t, n, i) { var r, a = null != (r = e.__r3f) ? r : {}; e.raycast && a.handlers && a.eventCount && e.__r3f.root.getState().internal.interaction.push(e) }, getPublicInstance: function (e) { return e }, prepareForCommit: function () { return null }, preparePortalMount: function (e) { return Gv(e.getState().scene) }, resetAfterCommit: function () { }, shouldSetTextContent: function () { return !1 }, clearContainer: function () { return !1 }, hideInstance: function (e) { var t, n = null != (t = e.__r3f) ? t : {}, i = n.attach, r = n.parent; i && r && Sv(r, e, i), e.isObject3D && (e.visible = !1), Vv(e) }, unhideInstance: function (e, t) { var n, i = null != (n = e.__r3f) ? n : {}, r = i.attach, a = i.parent; r && a && wv(a, e, r), (e.isObject3D && null == t.visible || t.visible) && (e.visible = !0), Vv(e) }, createTextInstance: l, hideTextInstance: l, unhideTextInstance: l, getCurrentEventPriority: function () { return t ? t() : Tm.DefaultEventPriority }, beforeActiveInstanceBlur: function () { }, afterActiveInstanceBlur: function () { }, detachDeletedInstance: function () { }, now: "undefined" !== typeof performance && bv.fun(performance.now) ? performance.now : bv.fun(Date.now) ? Date.now : function () { return 0 }, scheduleTimeout: bv.fun(setTimeout) ? setTimeout : void 0, cancelTimeout: bv.fun(clearTimeout) ? clearTimeout : void 0 }); return { reconciler: g, applyProps: Wv } }(0, (function () { var e, t = "undefined" !== typeof self && self || "undefined" !== typeof window && window; if (!t) return Tm.DefaultEventPriority; switch (null == (e = t.event) ? void 0 : e.type) { case "click": case "contextmenu": case "dblclick": case "pointercancel": case "pointerdown": case "pointerup": return Tm.DiscreteEventPriority; case "pointermove": case "pointerout": case "pointerover": case "pointerenter": case "pointerleave": case "wheel": return Tm.ContinuousEventPriority; default: return Tm.DefaultEventPriority } })), ob = ab.reconciler, sb = ab.applyProps, lb = { objects: "shallow", strict: !1 }, gb = function (e, t) { var n = "function" === typeof e ? e(t) : e; return Yv(n) ? n : new lI(ln({ powerPreference: "high-performance", canvas: t, antialias: !0, alpha: !0 }, e)) }; function cb(e) { var n = tb.get(e), i = null == n ? void 0 : n.fiber, r = null == n ? void 0 : n.store; n && console.warn("R3F.createRoot should only be called once!"); var a, o = "function" === typeof reportError ? reportError : console.error, s = r || Lv(ib, rb), l = i || ob.createContainer(s, Tm.ConcurrentRoot, null, !1, null, "", o, null); n || tb.set(e, { fiber: l, store: s }); var g, c = !1; return { configure: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = t.gl, i = t.size, r = t.scene, o = t.events, l = t.onCreated, u = t.shadows, C = void 0 !== u && u, d = t.linear, I = void 0 !== d && d, h = t.flat, A = void 0 !== h && h, p = t.legacy, f = void 0 !== p && p, m = t.orthographic, v = void 0 !== m && m, b = t.frameloop, y = void 0 === b ? "always" : b, G = t.dpr, B = void 0 === G ? [1, 2] : G, Z = t.performance, w = t.raycaster, S = t.camera, R = t.onPointerMissed, x = s.getState(), W = x.gl; x.gl || x.set({ gl: W = gb(n, e) }); var V = x.raycaster; V || x.set({ raycaster: V = new tm }); var k, H = w || {}, M = H.params, F = or(H, sv); if (bv.equ(F, V, lb) || sb(V, ln({}, F)), bv.equ(M, V.params, lb) || sb(V, { params: ln(ln({}, V.params), M) }), !x.camera || x.camera === g && !bv.equ(g, S, lb)) { g = S; var N = S instanceof pu, X = N ? S : v ? new Tu(0, 0, 0, 0, .1, 1e3) : new fu(75, 0, .1, 1e3); N || (X.position.z = 5, S && sb(X, S), x.camera || null != S && S.rotation || X.lookAt(0, 0, 0)), x.set({ camera: X }), V.camera = X } x.scene || (r instanceof dI ? k = r : (k = new dI, r && sb(k, r)), x.set({ scene: Gv(k) })); if (!x.xr) { var Y, K = function (e, t) { var n = s.getState(); "never" !== n.frameloop && rb(e, !0, n, t) }, L = function () { var e = s.getState(); e.gl.xr.enabled = e.gl.xr.isPresenting, e.gl.xr.setAnimationLoop(e.gl.xr.isPresenting ? K : null), e.gl.xr.isPresenting || ib(e) }, z = { connect: function () { var e = s.getState().gl; e.xr.addEventListener("sessionstart", L), e.xr.addEventListener("sessionend", L) }, disconnect: function () { var e = s.getState().gl; e.xr.removeEventListener("sessionstart", L), e.xr.removeEventListener("sessionend", L) } }; "function" === typeof (null == (Y = W.xr) ? void 0 : Y.addEventListener) && z.connect(), x.set({ xr: z }) } if (W.shadowMap) { var E = W.shadowMap.enabled, T = W.shadowMap.type; if (W.shadowMap.enabled = !!C, bv.boo(C)) W.shadowMap.type = Hr; else if (bv.str(C)) { var _, U = { basic: Vr, percentage: kr, soft: Hr, variance: Mr }; W.shadowMap.type = null != (_ = U[C]) ? _ : Hr } else bv.obj(C) && Object.assign(W.shadowMap, C); E === W.shadowMap.enabled && T === W.shadowMap.type || (W.shadowMap.needsUpdate = !0) } var D = cv(); D && ("enabled" in D ? D.enabled = !f : "legacyMode" in D && (D.legacyMode = f)); sb(W, { outputEncoding: I ? 3e3 : 3001, toneMapping: A ? fa : ya }), x.legacy !== f && x.set((function () { return { legacy: f } })), x.linear !== I && x.set((function () { return { linear: I } })), x.flat !== A && x.set((function () { return { flat: A } })), !n || bv.fun(n) || Yv(n) || bv.equ(n, W, lb) || sb(W, n), o && !x.events.handlers && x.set({ events: o(s) }); var P = function (e, t) { var n = "undefined" !== typeof HTMLCanvasElement && e instanceof HTMLCanvasElement; if (t) { var i = t.width, r = t.height, a = t.top, o = t.left, s = t.updateStyle; return { width: i, height: r, top: a, left: o, updateStyle: void 0 === s ? n : s } } if ("undefined" !== typeof HTMLCanvasElement && e instanceof HTMLCanvasElement && e.parentElement) { var l = e.parentElement.getBoundingClientRect(); return { width: l.width, height: l.height, top: l.top, left: l.left, updateStyle: n } } return "undefined" !== typeof OffscreenCanvas && e instanceof OffscreenCanvas ? { width: e.width, height: e.height, top: 0, left: 0, updateStyle: n } : { width: 0, height: 0, top: 0, left: 0 } }(e, i); return bv.equ(P, x.size, lb) || x.setSize(P.width, P.height, P.updateStyle, P.top, P.left), B && x.viewport.dpr !== mv(B) && x.setDpr(B), x.frameloop !== y && x.setFrameloop(y), x.onPointerMissed || x.set({ onPointerMissed: R }), Z && !bv.equ(Z, x.performance, lb) && x.set((function (e) { return { performance: ln(ln({}, e.performance), Z) } })), a = l, c = !0, this }, render: function (n) { return c || this.configure(), ob.updateContainer(t.createElement(ub, { store: s, children: n, onCreated: a, rootElement: e }), l, null, (function () { })), s }, unmount: function () { Cb(e) } } } function ub(e) { var n = e.store, i = e.children, r = e.onCreated, a = e.rootElement; return Cv((function () { var e = n.getState(); e.set((function (e) { return { internal: ln(ln({}, e.internal), {}, { active: !0 }) } })), r && r(e), n.getState().events.connected || null == e.events.connect || e.events.connect(a) }), []), t.createElement(Kv.Provider, { value: n }, i) } function Cb(e, t) { var n = tb.get(e), i = null == n ? void 0 : n.fiber; if (i) { var r = null == n ? void 0 : n.store.getState(); r && (r.internal.active = !1), ob.updateContainer(null, i, null, (function () { r && setTimeout((function () { try { var n, i, a, o; null == r.events.disconnect || r.events.disconnect(), null == (n = r.gl) || null == (i = n.renderLists) || null == i.dispose || i.dispose(), null == (a = r.gl) || null == a.forceContextLoss || a.forceContextLoss(), null != (o = r.gl) && o.xr && r.xr.disconnect(), function (e) { for (var t in e.dispose && "Scene" !== e.type && e.dispose(), e) null == t.dispose || t.dispose(), delete e[t] }(r), tb.delete(e), t && t(e) } catch (s) { } }), 500) })) } } ob.injectIntoDevTools({ bundleType: 0, rendererPackageName: "@react-three/fiber", version: t.version }); t.unstable_act; var db, Ib = ["onCollide", "onCollideBegin", "onCollideEnd"], hb = ["bi", "bj"], Ab = ["body", "contact", "target"], pb = ["uuid"], fb = ["body", "ray"], mb = { exports: {} }, vb = "object" === typeof Reflect ? Reflect : null, bb = vb && "function" === typeof vb.apply ? vb.apply : function (e, t, n) { return Function.prototype.apply.call(e, t, n) }; db = vb && "function" === typeof vb.ownKeys ? vb.ownKeys : Object.getOwnPropertySymbols ? function (e) { return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)) } : function (e) { return Object.getOwnPropertyNames(e) }; var yb = Number.isNaN || function (e) { return e !== e }; function Gb() { Gb.init.call(this) } mb.exports = Gb, mb.exports.once = function (e, t) { return new Promise((function (n, i) { function r(n) { e.removeListener(t, a), i(n) } function a() { "function" === typeof e.removeListener && e.removeListener("error", r), n([].slice.call(arguments)) } Hb(e, t, a, { once: !0 }), "error" !== t && function (e, t, n) { "function" === typeof e.on && Hb(e, "error", t, n) }(e, r, { once: !0 }) })) }, Gb.EventEmitter = Gb, Gb.prototype._events = void 0, Gb.prototype._eventsCount = 0, Gb.prototype._maxListeners = void 0; var Bb = 10; function Zb(e) { if ("function" !== typeof e) throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof e) } function wb(e) { return void 0 === e._maxListeners ? Gb.defaultMaxListeners : e._maxListeners } function Sb(e, t, n, i) { var r, a, o; if (Zb(n), void 0 === (a = e._events) ? (a = e._events = Object.create(null), e._eventsCount = 0) : (void 0 !== a.newListener && (e.emit("newListener", t, n.listener ? n.listener : n), a = e._events), o = a[t]), void 0 === o) o = a[t] = n, ++e._eventsCount; else if ("function" === typeof o ? o = a[t] = i ? [n, o] : [o, n] : i ? o.unshift(n) : o.push(n), (r = wb(e)) > 0 && o.length > r && !o.warned) { o.warned = !0; var s = new Error("Possible EventEmitter memory leak detected. " + o.length + " " + String(t) + " listeners added. Use emitter.setMaxListeners() to increase limit"); s.name = "MaxListenersExceededWarning", s.emitter = e, s.type = t, s.count = o.length, function (e) { console && console.warn && console.warn(e) }(s) } return e } function Rb() { if (!this.fired) return this.target.removeListener(this.type, this.wrapFn), this.fired = !0, 0 === arguments.length ? this.listener.call(this.target) : this.listener.apply(this.target, arguments) } function xb(e, t, n) { var i = { fired: !1, wrapFn: void 0, target: e, type: t, listener: n }, r = Rb.bind(i); return r.listener = n, i.wrapFn = r, r } function Wb(e, t, n) { var i = e._events; if (void 0 === i) return []; var r = i[t]; return void 0 === r ? [] : "function" === typeof r ? n ? [r.listener || r] : [r] : n ? function (e) { for (var t = new Array(e.length), n = 0; n < t.length; ++n)t[n] = e[n].listener || e[n]; return t }(r) : kb(r, r.length) } function Vb(e) { var t = this._events; if (void 0 !== t) { var n = t[e]; if ("function" === typeof n) return 1; if (void 0 !== n) return n.length } return 0 } function kb(e, t) { for (var n = new Array(t), i = 0; i < t; ++i)n[i] = e[i]; return n } function Hb(e, t, n, i) { if ("function" === typeof e.on) i.once ? e.once(t, n) : e.on(t, n); else { if ("function" !== typeof e.addEventListener) throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof e); e.addEventListener(t, (function r(a) { i.once && e.removeEventListener(t, r), n(a) })) } } Object.defineProperty(Gb, "defaultMaxListeners", { enumerable: !0, get: function () { return Bb }, set: function (e) { if ("number" !== typeof e || e < 0 || yb(e)) throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + e + "."); Bb = e } }), Gb.init = function () { void 0 !== this._events && this._events !== Object.getPrototypeOf(this)._events || (this._events = Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0 }, Gb.prototype.setMaxListeners = function (e) { if ("number" !== typeof e || e < 0 || yb(e)) throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + e + "."); return this._maxListeners = e, this }, Gb.prototype.getMaxListeners = function () { return wb(this) }, Gb.prototype.emit = function (e) { for (var t = [], n = 1; n < arguments.length; n++)t.push(arguments[n]); var i = "error" === e, r = this._events; if (void 0 !== r) i = i && void 0 === r.error; else if (!i) return !1; if (i) { var a; if (t.length > 0 && (a = t[0]), a instanceof Error) throw a; var o = new Error("Unhandled error." + (a ? " (" + a.message + ")" : "")); throw o.context = a, o } var s = r[e]; if (void 0 === s) return !1; if ("function" === typeof s) bb(s, this, t); else { var l = s.length, g = kb(s, l); for (n = 0; n < l; ++n)bb(g[n], this, t) } return !0 }, Gb.prototype.addListener = function (e, t) { return Sb(this, e, t, !1) }, Gb.prototype.on = Gb.prototype.addListener, Gb.prototype.prependListener = function (e, t) { return Sb(this, e, t, !0) }, Gb.prototype.once = function (e, t) { return Zb(t), this.on(e, xb(this, e, t)), this }, Gb.prototype.prependOnceListener = function (e, t) { return Zb(t), this.prependListener(e, xb(this, e, t)), this }, Gb.prototype.removeListener = function (e, t) { var n, i, r, a, o; if (Zb(t), void 0 === (i = this._events)) return this; if (void 0 === (n = i[e])) return this; if (n === t || n.listener === t) 0 === --this._eventsCount ? this._events = Object.create(null) : (delete i[e], i.removeListener && this.emit("removeListener", e, n.listener || t)); else if ("function" !== typeof n) { for (r = -1, a = n.length - 1; a >= 0; a--)if (n[a] === t || n[a].listener === t) { o = n[a].listener, r = a; break } if (r < 0) return this; 0 === r ? n.shift() : function (e, t) { for (; t + 1 < e.length; t++)e[t] = e[t + 1]; e.pop() }(n, r), 1 === n.length && (i[e] = n[0]), void 0 !== i.removeListener && this.emit("removeListener", e, o || t) } return this }, Gb.prototype.off = Gb.prototype.removeListener, Gb.prototype.removeAllListeners = function (e) { var t, n, i; if (void 0 === (n = this._events)) return this; if (void 0 === n.removeListener) return 0 === arguments.length ? (this._events = Object.create(null), this._eventsCount = 0) : void 0 !== n[e] && (0 === --this._eventsCount ? this._events = Object.create(null) : delete n[e]), this; if (0 === arguments.length) { var r, a = Object.keys(n); for (i = 0; i < a.length; ++i)"removeListener" !== (r = a[i]) && this.removeAllListeners(r); return this.removeAllListeners("removeListener"), this._events = Object.create(null), this._eventsCount = 0, this } if ("function" === typeof (t = n[e])) this.removeListener(e, t); else if (void 0 !== t) for (i = t.length - 1; i >= 0; i--)this.removeListener(e, t[i]); return this }, Gb.prototype.listeners = function (e) { return Wb(this, e, !0) }, Gb.prototype.rawListeners = function (e) { return Wb(this, e, !1) }, Gb.listenerCount = function (e, t) { return "function" === typeof e.listenerCount ? e.listenerCount(t) : Vb.call(e, t) }, Gb.prototype.listenerCount = Vb, Gb.prototype.eventNames = function () { return this._eventsCount > 0 ? db(this._events) : [] }; var Mb = mb.exports; function Fb(e, t, n) { var i = void 0 === t ? null : t, r = function (e, t) { var n = atob(e); if (t) { for (var i = new Uint8Array(n.length), r = 0, a = n.length; r < a; ++r)i[r] = n.charCodeAt(r); return String.fromCharCode.apply(null, new Uint16Array(i.buffer)) } return n }(e, void 0 !== n && n), a = r.indexOf("\n", 10) + 1, o = r.substring(a) + (i ? "//# sourceMappingURL=" + i : ""), s = new Blob([o], { type: "application/javascript" }); return URL.createObjectURL(s) } var Nb = function (e, t, n) { var i; return function (r) { return i = i || Fb(e, t, n), new Worker(i, r) } }("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogUmVjb3JkcyB3aGF0IG9iamVjdHMgYXJlIGNvbGxpZGluZyB3aXRoIGVhY2ggb3RoZXIKICAgKi8KCiAgLyoqCiAgICogQSAzeDMgbWF0cml4LgogICAqIEF1dGhvcmVkIGJ5IHtAbGluayBodHRwOi8vZ2l0aHViLmNvbS9zY2h0ZXBwZS8gc2NodGVwcGV9CiAgICovCiAgY2xhc3MgTWF0MyB7CiAgICAvKioKICAgICAqIEEgdmVjdG9yIG9mIGxlbmd0aCA5LCBjb250YWluaW5nIGFsbCBtYXRyaXggZWxlbWVudHMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBlbGVtZW50cyBBIHZlY3RvciBvZiBsZW5ndGggOSwgY29udGFpbmluZyBhbGwgbWF0cml4IGVsZW1lbnRzLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihlbGVtZW50cykgewogICAgICBpZiAoZWxlbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIGVsZW1lbnRzID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdOwogICAgICB9CgogICAgICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHM7CiAgICB9CiAgICAvKioKICAgICAqIFNldHMgdGhlIG1hdHJpeCB0byBpZGVudGl0eQogICAgICogQHRvZG8gU2hvdWxkIHBlcmhhcHMgYmUgcmVuYW1lZCB0byBgc2V0SWRlbnRpdHkoKWAgdG8gYmUgbW9yZSBjbGVhci4KICAgICAqIEB0b2RvIENyZWF0ZSBhbm90aGVyIGZ1bmN0aW9uIHRoYXQgaW1tZWRpYXRlbHkgY3JlYXRlcyBhbiBpZGVudGl0eSBtYXRyaXggZWcuIGBleWUoKWAKICAgICAqLwoKCiAgICBpZGVudGl0eSgpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGVbMF0gPSAxOwogICAgICBlWzFdID0gMDsKICAgICAgZVsyXSA9IDA7CiAgICAgIGVbM10gPSAwOwogICAgICBlWzRdID0gMTsKICAgICAgZVs1XSA9IDA7CiAgICAgIGVbNl0gPSAwOwogICAgICBlWzddID0gMDsKICAgICAgZVs4XSA9IDE7CiAgICB9CiAgICAvKioKICAgICAqIFNldCBhbGwgZWxlbWVudHMgdG8gemVybwogICAgICovCgoKICAgIHNldFplcm8oKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBlWzBdID0gMDsKICAgICAgZVsxXSA9IDA7CiAgICAgIGVbMl0gPSAwOwogICAgICBlWzNdID0gMDsKICAgICAgZVs0XSA9IDA7CiAgICAgIGVbNV0gPSAwOwogICAgICBlWzZdID0gMDsKICAgICAgZVs3XSA9IDA7CiAgICAgIGVbOF0gPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBtYXRyaXggZGlhZ29uYWwgZWxlbWVudHMgZnJvbSBhIFZlYzMKICAgICAqLwoKCiAgICBzZXRUcmFjZSh2ZWN0b3IpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGVbMF0gPSB2ZWN0b3IueDsKICAgICAgZVs0XSA9IHZlY3Rvci55OwogICAgICBlWzhdID0gdmVjdG9yLno7CiAgICB9CiAgICAvKioKICAgICAqIEdldHMgdGhlIG1hdHJpeCBkaWFnb25hbCBlbGVtZW50cwogICAgICovCgoKICAgIGdldFRyYWNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgdGFyZ2V0LnggPSBlWzBdOwogICAgICB0YXJnZXQueSA9IGVbNF07CiAgICAgIHRhcmdldC56ID0gZVs4XTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LVZlY3RvciBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIHYgVGhlIHZlY3RvciB0byBtdWx0aXBseSB3aXRoCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLCB0YXJnZXQgdG8gc2F2ZSB0aGUgcmVzdWx0IGluLgogICAgICovCgoKICAgIHZtdWx0KHYsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgeCA9IHYueDsKICAgICAgY29uc3QgeSA9IHYueTsKICAgICAgY29uc3QgeiA9IHYuejsKICAgICAgdGFyZ2V0LnggPSBlWzBdICogeCArIGVbMV0gKiB5ICsgZVsyXSAqIHo7CiAgICAgIHRhcmdldC55ID0gZVszXSAqIHggKyBlWzRdICogeSArIGVbNV0gKiB6OwogICAgICB0YXJnZXQueiA9IGVbNl0gKiB4ICsgZVs3XSAqIHkgKyBlWzhdICogejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LXNjYWxhciBtdWx0aXBsaWNhdGlvbgogICAgICovCgoKICAgIHNtdWx0KHMpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSAqPSBzOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIE1hdHJpeCBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIG1hdHJpeCBNYXRyaXggdG8gbXVsdGlwbHkgd2l0aCBmcm9tIGxlZnQgc2lkZS4KICAgICAqLwoKCiAgICBtbXVsdChtYXRyaXgsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgTWF0MygpOwogICAgICB9CgogICAgICBjb25zdCBBID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgQiA9IG1hdHJpeC5lbGVtZW50czsKICAgICAgY29uc3QgVCA9IHRhcmdldC5lbGVtZW50czsKICAgICAgY29uc3QgYTExID0gQVswXSwKICAgICAgICAgICAgYTEyID0gQVsxXSwKICAgICAgICAgICAgYTEzID0gQVsyXSwKICAgICAgICAgICAgYTIxID0gQVszXSwKICAgICAgICAgICAgYTIyID0gQVs0XSwKICAgICAgICAgICAgYTIzID0gQVs1XSwKICAgICAgICAgICAgYTMxID0gQVs2XSwKICAgICAgICAgICAgYTMyID0gQVs3XSwKICAgICAgICAgICAgYTMzID0gQVs4XTsKICAgICAgY29uc3QgYjExID0gQlswXSwKICAgICAgICAgICAgYjEyID0gQlsxXSwKICAgICAgICAgICAgYjEzID0gQlsyXSwKICAgICAgICAgICAgYjIxID0gQlszXSwKICAgICAgICAgICAgYjIyID0gQls0XSwKICAgICAgICAgICAgYjIzID0gQls1XSwKICAgICAgICAgICAgYjMxID0gQls2XSwKICAgICAgICAgICAgYjMyID0gQls3XSwKICAgICAgICAgICAgYjMzID0gQls4XTsKICAgICAgVFswXSA9IGExMSAqIGIxMSArIGExMiAqIGIyMSArIGExMyAqIGIzMTsKICAgICAgVFsxXSA9IGExMSAqIGIxMiArIGExMiAqIGIyMiArIGExMyAqIGIzMjsKICAgICAgVFsyXSA9IGExMSAqIGIxMyArIGExMiAqIGIyMyArIGExMyAqIGIzMzsKICAgICAgVFszXSA9IGEyMSAqIGIxMSArIGEyMiAqIGIyMSArIGEyMyAqIGIzMTsKICAgICAgVFs0XSA9IGEyMSAqIGIxMiArIGEyMiAqIGIyMiArIGEyMyAqIGIzMjsKICAgICAgVFs1XSA9IGEyMSAqIGIxMyArIGEyMiAqIGIyMyArIGEyMyAqIGIzMzsKICAgICAgVFs2XSA9IGEzMSAqIGIxMSArIGEzMiAqIGIyMSArIGEzMyAqIGIzMTsKICAgICAgVFs3XSA9IGEzMSAqIGIxMiArIGEzMiAqIGIyMiArIGEzMyAqIGIzMjsKICAgICAgVFs4XSA9IGEzMSAqIGIxMyArIGEzMiAqIGIyMyArIGEzMyAqIGIzMzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2NhbGUgZWFjaCBjb2x1bW4gb2YgdGhlIG1hdHJpeAogICAgICovCgoKICAgIHNjYWxlKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBNYXQzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBjb25zdCB0ID0gdGFyZ2V0LmVsZW1lbnRzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDM7IGkrKykgewogICAgICAgIHRbMyAqIGkgKyAwXSA9IHZlY3Rvci54ICogZVszICogaSArIDBdOwogICAgICAgIHRbMyAqIGkgKyAxXSA9IHZlY3Rvci55ICogZVszICogaSArIDFdOwogICAgICAgIHRbMyAqIGkgKyAyXSA9IHZlY3Rvci56ICogZVszICogaSArIDJdOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTb2x2ZSBBeD1iCiAgICAgKiBAcGFyYW0gYiBUaGUgcmlnaHQgaGFuZCBzaWRlCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBUYXJnZXQgdmVjdG9yIHRvIHNhdmUgaW4uCiAgICAgKiBAcmV0dXJuIFRoZSBzb2x1dGlvbiB4CiAgICAgKiBAdG9kbyBzaG91bGQgcmV1c2UgYXJyYXlzCiAgICAgKi8KCgogICAgc29sdmUoYiwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA0OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IFtdOwogICAgICBsZXQgaTsKICAgICAgbGV0IGo7CgogICAgICBmb3IgKGkgPSAwOyBpIDwgbnIgKiBuYzsgaSsrKSB7CiAgICAgICAgZXFucy5wdXNoKDApOwogICAgICB9CgogICAgICBmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7CiAgICAgICAgZm9yIChqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgZXFuc1tpICsgbmMgKiBqXSA9IHRoaXMuZWxlbWVudHNbaSArIDMgKiBqXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGVxbnNbMyArIDQgKiAwXSA9IGIueDsKICAgICAgZXFuc1szICsgNCAqIDFdID0gYi55OwogICAgICBlcW5zWzMgKyA0ICogMl0gPSBiLno7IC8vIENvbXB1dGUgcmlnaHQgdXBwZXIgdHJpYW5ndWxhciB2ZXJzaW9uIG9mIHRoZSBtYXRyaXggLSBHYXVzcyBlbGltaW5hdGlvbgoKICAgICAgbGV0IG4gPSAzOwogICAgICBjb25zdCBrID0gbjsKICAgICAgbGV0IG5wOwogICAgICBjb25zdCBrcCA9IDQ7IC8vIG51bSByb3dzCgogICAgICBsZXQgcDsKCiAgICAgIGRvIHsKICAgICAgICBpID0gayAtIG47CgogICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7CiAgICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lcwogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHsKICAgICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAvLyBkbyBsaWduZSggaSApID0gbGlnbmUoIGkgKSArIGxpZ25lKCBrICkKICAgICAgICAgICAgICAgIHAgPSBrcCAtIG5wOwogICAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdOwogICAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gIT09IDApIHsKICAgICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgICAgbnAgPSBrcDsKCiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAvLyBkbyBsaWduZSggayApID0gbGlnbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaWduZSggaSApCiAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IHAgPD0gaSA/IDAgOiBlcW5zW3AgKyBuYyAqIGpdIC0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSB3aGlsZSAoLS1uKTsgLy8gR2V0IHRoZSBzb2x1dGlvbgoKCiAgICAgIHRhcmdldC56ID0gZXFuc1syICogbmMgKyAzXSAvIGVxbnNbMiAqIG5jICsgMl07CiAgICAgIHRhcmdldC55ID0gKGVxbnNbMSAqIG5jICsgM10gLSBlcW5zWzEgKiBuYyArIDJdICogdGFyZ2V0LnopIC8gZXFuc1sxICogbmMgKyAxXTsKICAgICAgdGFyZ2V0LnggPSAoZXFuc1swICogbmMgKyAzXSAtIGVxbnNbMCAqIG5jICsgMl0gKiB0YXJnZXQueiAtIGVxbnNbMCAqIG5jICsgMV0gKiB0YXJnZXQueSkgLyBlcW5zWzAgKiBuYyArIDBdOwoKICAgICAgaWYgKGlzTmFOKHRhcmdldC54KSB8fCBpc05hTih0YXJnZXQueSkgfHwgaXNOYU4odGFyZ2V0LnopIHx8IHRhcmdldC54ID09PSBJbmZpbml0eSB8fCB0YXJnZXQueSA9PT0gSW5maW5pdHkgfHwgdGFyZ2V0LnogPT09IEluZmluaXR5KSB7CiAgICAgICAgdGhyb3cgYENvdWxkIG5vdCBzb2x2ZSBlcXVhdGlvbiEgR290IHg9WyR7dGFyZ2V0LnRvU3RyaW5nKCl9XSwgYj1bJHtiLnRvU3RyaW5nKCl9XSwgQT1bJHt0aGlzLnRvU3RyaW5nKCl9XWA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBlbGVtZW50IGluIHRoZSBtYXRyaXggYnkgaW5kZXguIEluZGV4IHN0YXJ0cyBhdCAwLCBub3QgMSEhIQogICAgICogQHBhcmFtIHZhbHVlIElmIHByb3ZpZGVkLCB0aGUgbWF0cml4IGVsZW1lbnQgd2lsbCBiZSBzZXQgdG8gdGhpcyB2YWx1ZS4KICAgICAqLwoKCiAgICBlKHJvdywgY29sdW1uLCB2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzW2NvbHVtbiArIDMgKiByb3ddOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFNldCB2YWx1ZQogICAgICAgIHRoaXMuZWxlbWVudHNbY29sdW1uICsgMyAqIHJvd10gPSB2YWx1ZTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGFub3RoZXIgbWF0cml4IGludG8gdGhpcyBtYXRyaXggb2JqZWN0LgogICAgICovCgoKICAgIGNvcHkobWF0cml4KSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0cml4LmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSA9IG1hdHJpeC5lbGVtZW50c1tpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeC4KICAgICAqLwoKCiAgICB0b1N0cmluZygpIHsKICAgICAgbGV0IHIgPSAnJzsKICAgICAgY29uc3Qgc2VwID0gJywnOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHsKICAgICAgICByICs9IHRoaXMuZWxlbWVudHNbaV0gKyBzZXA7CiAgICAgIH0KCiAgICAgIHJldHVybiByOwogICAgfQogICAgLyoqCiAgICAgKiByZXZlcnNlIHRoZSBtYXRyaXgKICAgICAqIEBwYXJhbSB0YXJnZXQgVGFyZ2V0IG1hdHJpeCB0byBzYXZlIGluLgogICAgICogQHJldHVybiBUaGUgc29sdXRpb24geAogICAgICovCgoKICAgIHJldmVyc2UodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBNYXQzKCk7CiAgICAgIH0KCiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA2OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IHJldmVyc2VfZXFuczsKICAgICAgbGV0IGk7CiAgICAgIGxldCBqOwoKICAgICAgZm9yIChpID0gMDsgaSA8IDM7IGkrKykgewogICAgICAgIGZvciAoaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIGVxbnNbaSArIG5jICogal0gPSB0aGlzLmVsZW1lbnRzW2kgKyAzICogal07CiAgICAgICAgfQogICAgICB9CgogICAgICBlcW5zWzMgKyA2ICogMF0gPSAxOwogICAgICBlcW5zWzMgKyA2ICogMV0gPSAwOwogICAgICBlcW5zWzMgKyA2ICogMl0gPSAwOwogICAgICBlcW5zWzQgKyA2ICogMF0gPSAwOwogICAgICBlcW5zWzQgKyA2ICogMV0gPSAxOwogICAgICBlcW5zWzQgKyA2ICogMl0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMF0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMV0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMl0gPSAxOyAvLyBDb21wdXRlIHJpZ2h0IHVwcGVyIHRyaWFuZ3VsYXIgdmVyc2lvbiBvZiB0aGUgbWF0cml4IC0gR2F1c3MgZWxpbWluYXRpb24KCiAgICAgIGxldCBuID0gMzsKICAgICAgY29uc3QgayA9IG47CiAgICAgIGxldCBucDsKICAgICAgY29uc3Qga3AgPSBuYzsgLy8gbnVtIHJvd3MKCiAgICAgIGxldCBwOwoKICAgICAgZG8gewogICAgICAgIGkgPSBrIC0gbjsKCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gPT09IDApIHsKICAgICAgICAgIC8vIHRoZSBwaXZvdCBpcyBudWxsLCBzd2FwIGxpbmVzCiAgICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykgewogICAgICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBqXSAhPT0gMCkgewogICAgICAgICAgICAgIG5wID0ga3A7CgogICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgIC8vIGRvIGxpbmUoIGkgKSA9IGxpbmUoIGkgKSArIGxpbmUoIGsgKQogICAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldICs9IGVxbnNbcCArIG5jICogal07CiAgICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSAhPT0gMCkgewogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgIC8vIGRvIGxpbmUoIGsgKSA9IGxpbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaW5lKCBpICkKICAgICAgICAgICAgICBwID0ga3AgLSBucDsKICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gcCA8PSBpID8gMCA6IGVxbnNbcCArIG5jICogal0gLSBlcW5zW3AgKyBuYyAqIGldICogbXVsdGlwbGllcjsKICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IHdoaWxlICgtLW4pOyAvLyBlbGltaW5hdGUgdGhlIHVwcGVyIGxlZnQgdHJpYW5nbGUgb2YgdGhlIG1hdHJpeAoKCiAgICAgIGkgPSAyOwoKICAgICAgZG8gewogICAgICAgIGogPSBpIC0gMTsKCiAgICAgICAgZG8gewogICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgICAgbnAgPSBuYzsKCiAgICAgICAgICBkbyB7CiAgICAgICAgICAgIHAgPSBuYyAtIG5wOwogICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyOwogICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgICAgfSB3aGlsZSAoai0tKTsKICAgICAgfSB3aGlsZSAoLS1pKTsgLy8gb3BlcmF0aW9ucyBvbiB0aGUgZGlhZ29uYWwKCgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBjb25zdCBtdWx0aXBsaWVyID0gMSAvIGVxbnNbaSArIG5jICogaV07CiAgICAgICAgbnAgPSBuYzsKCiAgICAgICAgZG8gewogICAgICAgICAgcCA9IG5jIC0gbnA7CiAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldID0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgIH0gd2hpbGUgKGktLSk7CgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBqID0gMjsKCiAgICAgICAgZG8gewogICAgICAgICAgcCA9IGVxbnNbbnIgKyBqICsgbmMgKiBpXTsKCiAgICAgICAgICBpZiAoaXNOYU4ocCkgfHwgcCA9PT0gSW5maW5pdHkpIHsKICAgICAgICAgICAgdGhyb3cgYENvdWxkIG5vdCByZXZlcnNlISBBPVske3RoaXMudG9TdHJpbmcoKX1dYDsKICAgICAgICAgIH0KCiAgICAgICAgICB0YXJnZXQuZShpLCBqLCBwKTsKICAgICAgICB9IHdoaWxlIChqLS0pOwogICAgICB9IHdoaWxlIChpLS0pOwoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBtYXRyaXggZnJvbSBhIHF1YXRlcmlvbgogICAgICovCgoKICAgIHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSkgewogICAgICBjb25zdCB4ID0gcS54OwogICAgICBjb25zdCB5ID0gcS55OwogICAgICBjb25zdCB6ID0gcS56OwogICAgICBjb25zdCB3ID0gcS53OwogICAgICBjb25zdCB4MiA9IHggKyB4OwogICAgICBjb25zdCB5MiA9IHkgKyB5OwogICAgICBjb25zdCB6MiA9IHogKyB6OwogICAgICBjb25zdCB4eCA9IHggKiB4MjsKICAgICAgY29uc3QgeHkgPSB4ICogeTI7CiAgICAgIGNvbnN0IHh6ID0geCAqIHoyOwogICAgICBjb25zdCB5eSA9IHkgKiB5MjsKICAgICAgY29uc3QgeXogPSB5ICogejI7CiAgICAgIGNvbnN0IHp6ID0geiAqIHoyOwogICAgICBjb25zdCB3eCA9IHcgKiB4MjsKICAgICAgY29uc3Qgd3kgPSB3ICogeTI7CiAgICAgIGNvbnN0IHd6ID0gdyAqIHoyOwogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgZVszICogMCArIDBdID0gMSAtICh5eSArIHp6KTsKICAgICAgZVszICogMCArIDFdID0geHkgLSB3ejsKICAgICAgZVszICogMCArIDJdID0geHogKyB3eTsKICAgICAgZVszICogMSArIDBdID0geHkgKyB3ejsKICAgICAgZVszICogMSArIDFdID0gMSAtICh4eCArIHp6KTsKICAgICAgZVszICogMSArIDJdID0geXogLSB3eDsKICAgICAgZVszICogMiArIDBdID0geHogLSB3eTsKICAgICAgZVszICogMiArIDFdID0geXogKyB3eDsKICAgICAgZVszICogMiArIDJdID0gMSAtICh4eCArIHl5KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zcG9zZSB0aGUgbWF0cml4CiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0LgogICAgICogQHJldHVybiBUaGUgdGFyZ2V0IE1hdDMsIG9yIGEgbmV3IE1hdDMgaWYgdGFyZ2V0IHdhcyBvbWl0dGVkLgogICAgICovCgoKICAgIHRyYW5zcG9zZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IE1hdDMoKTsKICAgICAgfQoKICAgICAgY29uc3QgTSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IFQgPSB0YXJnZXQuZWxlbWVudHM7CiAgICAgIGxldCB0bXA7IC8vU2V0IGRpYWdvbmFscwoKICAgICAgVFswXSA9IE1bMF07CiAgICAgIFRbNF0gPSBNWzRdOwogICAgICBUWzhdID0gTVs4XTsKICAgICAgdG1wID0gTVsxXTsKICAgICAgVFsxXSA9IE1bM107CiAgICAgIFRbM10gPSB0bXA7CiAgICAgIHRtcCA9IE1bMl07CiAgICAgIFRbMl0gPSBNWzZdOwogICAgICBUWzZdID0gdG1wOwogICAgICB0bXAgPSBNWzVdOwogICAgICBUWzVdID0gTVs3XTsKICAgICAgVFs3XSA9IHRtcDsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgfQogIGNvbnN0IHJldmVyc2VfZXFucyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTsKCiAgLyoqCiAgICogMy1kaW1lbnNpb25hbCB2ZWN0b3IKICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCB2ID0gbmV3IFZlYzMoMSwgMiwgMykKICAgKiAgICAgY29uc29sZS5sb2coJ3g9JyArIHYueCkgLy8geD0xCiAgICovCgogIGNsYXNzIFZlYzMgewogICAgY29uc3RydWN0b3IoeCwgeSwgeikgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDAuMDsKICAgICAgfQoKICAgICAgaWYgKHkgPT09IHZvaWQgMCkgewogICAgICAgIHkgPSAwLjA7CiAgICAgIH0KCiAgICAgIGlmICh6ID09PSB2b2lkIDApIHsKICAgICAgICB6ID0gMC4wOwogICAgICB9CgogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgY3Jvc3MgcHJvZHVjdAogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbi4KICAgICAqLwoKCiAgICBjcm9zcyh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB2eCA9IHZlY3Rvci54OwogICAgICBjb25zdCB2eSA9IHZlY3Rvci55OwogICAgICBjb25zdCB2eiA9IHZlY3Rvci56OwogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHkgKiB2eiAtIHogKiB2eTsKICAgICAgdGFyZ2V0LnkgPSB6ICogdnggLSB4ICogdno7CiAgICAgIHRhcmdldC56ID0geCAqIHZ5IC0geSAqIHZ4OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHZlY3RvcnMnIDMgZWxlbWVudHMKICAgICAqLwoKCiAgICBzZXQoeCwgeSwgeikgewogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogU2V0IGFsbCBjb21wb25lbnRzIG9mIHRoZSB2ZWN0b3IgdG8gemVyby4KICAgICAqLwoKCiAgICBzZXRaZXJvKCkgewogICAgICB0aGlzLnggPSB0aGlzLnkgPSB0aGlzLnogPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgYWRkaXRpb24KICAgICAqLwoKCiAgICB2YWRkKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICsgdGhpcy54OwogICAgICAgIHRhcmdldC55ID0gdmVjdG9yLnkgKyB0aGlzLnk7CiAgICAgICAgdGFyZ2V0LnogPSB2ZWN0b3IueiArIHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54ICsgdmVjdG9yLngsIHRoaXMueSArIHZlY3Rvci55LCB0aGlzLnogKyB2ZWN0b3Iueik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVmVjdG9yIHN1YnRyYWN0aW9uCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluLgogICAgICovCgoKICAgIHZzdWIodmVjdG9yLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIHRhcmdldC54ID0gdGhpcy54IC0gdmVjdG9yLng7CiAgICAgICAgdGFyZ2V0LnkgPSB0aGlzLnkgLSB2ZWN0b3IueTsKICAgICAgICB0YXJnZXQueiA9IHRoaXMueiAtIHZlY3Rvci56OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLnggLSB2ZWN0b3IueCwgdGhpcy55IC0gdmVjdG9yLnksIHRoaXMueiAtIHZlY3Rvci56KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGNyb3NzIHByb2R1Y3QgbWF0cml4IGFfY3Jvc3MgZnJvbSBhIHZlY3Rvciwgc3VjaCB0aGF0IGEgeCBiID0gYV9jcm9zcyAqIGIgPSBjCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci9UREJEMjQvVlQwNi9sZWN0dXJlcy9MZWN0dXJlNi5wZGYgVW1lw6UgVW5pdmVyc2l0eSBMZWN0dXJlfQogICAgICovCgoKICAgIGNyb3NzbWF0KCkgewogICAgICByZXR1cm4gbmV3IE1hdDMoWzAsIC10aGlzLnosIHRoaXMueSwgdGhpcy56LCAwLCAtdGhpcy54LCAtdGhpcy55LCB0aGlzLngsIDBdKTsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSB2ZWN0b3IuIE5vdGUgdGhhdCB0aGlzIGNoYW5nZXMgdGhlIHZhbHVlcyBpbiB0aGUgdmVjdG9yLgogICAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgbm9ybSBvZiB0aGUgdmVjdG9yCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBuID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7CgogICAgICBpZiAobiA+IDAuMCkgewogICAgICAgIGNvbnN0IGludk4gPSAxIC8gbjsKICAgICAgICB0aGlzLnggKj0gaW52TjsKICAgICAgICB0aGlzLnkgKj0gaW52TjsKICAgICAgICB0aGlzLnogKj0gaW52TjsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBNYWtlIHNvbWV0aGluZyB1cAogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSB2ZXJzaW9uIG9mIHRoaXMgdmVjdG9yIHRoYXQgaXMgb2YgbGVuZ3RoIDEuCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluCiAgICAgKiBAcmV0dXJuIFJldHVybnMgdGhlIHVuaXQgdmVjdG9yCiAgICAgKi8KCgogICAgdW5pdCh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgbGV0IG5pbnYgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKCiAgICAgIGlmIChuaW52ID4gMC4wKSB7CiAgICAgICAgbmludiA9IDEuMCAvIG5pbnY7CiAgICAgICAgdGFyZ2V0LnggPSB4ICogbmludjsKICAgICAgICB0YXJnZXQueSA9IHkgKiBuaW52OwogICAgICAgIHRhcmdldC56ID0geiAqIG5pbnY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGFyZ2V0LnggPSAxOwogICAgICAgIHRhcmdldC55ID0gMDsKICAgICAgICB0YXJnZXQueiA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgbGVuZ3RoIG9mIHRoZSB2ZWN0b3IKICAgICAqLwoKCiAgICBsZW5ndGgoKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBzcXVhcmVkIGxlbmd0aCBvZiB0aGUgdmVjdG9yLgogICAgICovCgoKICAgIGxlbmd0aFNxdWFyZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50CiAgICAgKi8KCgogICAgZGlzdGFuY2VUbyhwKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIGNvbnN0IHB4ID0gcC54OwogICAgICBjb25zdCBweSA9IHAueTsKICAgICAgY29uc3QgcHogPSBwLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHNxdWFyZWQgZGlzdGFuY2UgZnJvbSB0aGlzIHBvaW50IHRvIGFub3RoZXIgcG9pbnQKICAgICAqLwoKCiAgICBkaXN0YW5jZVNxdWFyZWQocCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBweCA9IHAueDsKICAgICAgY29uc3QgcHkgPSBwLnk7CiAgICAgIGNvbnN0IHB6ID0gcC56OwogICAgICByZXR1cm4gKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSBhbGwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB3aXRoIGEgc2NhbGFyLgogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBzY2FsZShzY2FsYXIsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHNjYWxhciAqIHg7CiAgICAgIHRhcmdldC55ID0gc2NhbGFyICogeTsKICAgICAgdGFyZ2V0LnogPSBzY2FsYXIgKiB6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgdmVjdG9yIHdpdGggYW4gb3RoZXIgdmVjdG9yLCBjb21wb25lbnQtd2lzZS4KICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHZlY3RvciB0byBzYXZlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgdm11bCh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICogdGhpcy54OwogICAgICB0YXJnZXQueSA9IHZlY3Rvci55ICogdGhpcy55OwogICAgICB0YXJnZXQueiA9IHZlY3Rvci56ICogdGhpcy56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTY2FsZSBhIHZlY3RvciBhbmQgYWRkIGl0IHRvIHRoaXMgdmVjdG9yLiBTYXZlIHRoZSByZXN1bHQgaW4gInRhcmdldCIuICh0YXJnZXQgPSB0aGlzICsgdmVjdG9yICogc2NhbGFyKQogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBhZGRTY2FsZWRWZWN0b3Ioc2NhbGFyLCB2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHRoaXMueCArIHNjYWxhciAqIHZlY3Rvci54OwogICAgICB0YXJnZXQueSA9IHRoaXMueSArIHNjYWxhciAqIHZlY3Rvci55OwogICAgICB0YXJnZXQueiA9IHRoaXMueiArIHNjYWxhciAqIHZlY3Rvci56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgZG90IHByb2R1Y3QKICAgICAqIEBwYXJhbSB2ZWN0b3IKICAgICAqLwoKCiAgICBkb3QodmVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLnggKiB2ZWN0b3IueCArIHRoaXMueSAqIHZlY3Rvci55ICsgdGhpcy56ICogdmVjdG9yLno7CiAgICB9CgogICAgaXNaZXJvKCkgewogICAgICByZXR1cm4gdGhpcy54ID09PSAwICYmIHRoaXMueSA9PT0gMCAmJiB0aGlzLnogPT09IDA7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgdGhlIHZlY3RvciBwb2ludCBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLgogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbgogICAgICovCgoKICAgIG5lZ2F0ZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnggPSAtdGhpcy54OwogICAgICB0YXJnZXQueSA9IC10aGlzLnk7CiAgICAgIHRhcmdldC56ID0gLXRoaXMuejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0d28gYXJ0aWZpY2lhbCB0YW5nZW50cyB0byB0aGUgdmVjdG9yCiAgICAgKiBAcGFyYW0gdDEgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBmaXJzdCB0YW5nZW50IGluCiAgICAgKiBAcGFyYW0gdDIgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBzZWNvbmQgdGFuZ2VudCBpbgogICAgICovCgoKICAgIHRhbmdlbnRzKHQxLCB0MikgewogICAgICBjb25zdCBub3JtID0gdGhpcy5sZW5ndGgoKTsKCiAgICAgIGlmIChub3JtID4gMC4wKSB7CiAgICAgICAgY29uc3QgbiA9IFZlYzNfdGFuZ2VudHNfbjsKICAgICAgICBjb25zdCBpbm9ybSA9IDEgLyBub3JtOwogICAgICAgIG4uc2V0KHRoaXMueCAqIGlub3JtLCB0aGlzLnkgKiBpbm9ybSwgdGhpcy56ICogaW5vcm0pOwogICAgICAgIGNvbnN0IHJhbmRWZWMgPSBWZWMzX3RhbmdlbnRzX3JhbmRWZWM7CgogICAgICAgIGlmIChNYXRoLmFicyhuLngpIDwgMC45KSB7CiAgICAgICAgICByYW5kVmVjLnNldCgxLCAwLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByYW5kVmVjLnNldCgwLCAxLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0KCiAgICAgICAgbi5jcm9zcyh0MSwgdDIpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRoZSBub3JtYWwgbGVuZ3RoIGlzIHplcm8sIG1ha2Ugc29tZXRoaW5nIHVwCiAgICAgICAgdDEuc2V0KDEsIDAsIDApOwogICAgICAgIHQyLnNldCgwLCAxLCAwKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhIG1vcmUgcmVhZGFibGUgZm9ybWF0CiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnh9LCR7dGhpcy55fSwke3RoaXMuen1gOwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhbiBhcnJheQogICAgICovCgoKICAgIHRvQXJyYXkoKSB7CiAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnksIHRoaXMuel07CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyB2ZWN0b3IuCiAgICAgKi8KCgogICAgY29weSh2ZWN0b3IpIHsKICAgICAgdGhpcy54ID0gdmVjdG9yLng7CiAgICAgIHRoaXMueSA9IHZlY3Rvci55OwogICAgICB0aGlzLnogPSB2ZWN0b3IuejsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIERvIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjdG9ycwogICAgICogQHBhcmFtIHQgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLiAwIHdpbGwgbWFrZSB0aGlzIGZ1bmN0aW9uIHJldHVybiB1LCBhbmQgMSB3aWxsIG1ha2UgaXQgcmV0dXJuIHYuIE51bWJlcnMgaW4gYmV0d2VlbiB3aWxsIGdlbmVyYXRlIGEgdmVjdG9yIGluIGJldHdlZW4gdGhlbS4KICAgICAqLwoKCiAgICBsZXJwKHZlY3RvciwgdCwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHRhcmdldC54ID0geCArICh2ZWN0b3IueCAtIHgpICogdDsKICAgICAgdGFyZ2V0LnkgPSB5ICsgKHZlY3Rvci55IC0geSkgKiB0OwogICAgICB0YXJnZXQueiA9IHogKyAodmVjdG9yLnogLSB6KSAqIHQ7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGVxdWFscyBpcyBhbG1vc3QgZXF1YWwgdG8gYW5vdGhlciBvbmUuCiAgICAgKi8KCgogICAgYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uKSB7CiAgICAgIGlmIChwcmVjaXNpb24gPT09IHZvaWQgMCkgewogICAgICAgIHByZWNpc2lvbiA9IDFlLTY7CiAgICAgIH0KCiAgICAgIGlmIChNYXRoLmFicyh0aGlzLnggLSB2ZWN0b3IueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55IC0gdmVjdG9yLnkpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueiAtIHZlY3Rvci56KSA+IHByZWNpc2lvbikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGlzIGFsbW9zdCB6ZXJvCiAgICAgKi8KCgogICAgYWxtb3N0WmVybyhwcmVjaXNpb24pIHsKICAgICAgaWYgKHByZWNpc2lvbiA9PT0gdm9pZCAwKSB7CiAgICAgICAgcHJlY2lzaW9uID0gMWUtNjsKICAgICAgfQoKICAgICAgaWYgKE1hdGguYWJzKHRoaXMueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55KSA+IHByZWNpc2lvbiB8fCBNYXRoLmFicyh0aGlzLnopID4gcHJlY2lzaW9uKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIHZlY3RvciBpcyBhbnRpLXBhcmFsbGVsIHRvIGFub3RoZXIgdmVjdG9yLgogICAgICogQHBhcmFtIHByZWNpc2lvbiBTZXQgdG8gemVybyBmb3IgZXhhY3QgY29tcGFyaXNvbnMKICAgICAqLwoKCiAgICBpc0FudGlwYXJhbGxlbFRvKHZlY3RvciwgcHJlY2lzaW9uKSB7CiAgICAgIHRoaXMubmVnYXRlKGFudGlwX25lZyk7CiAgICAgIHJldHVybiBhbnRpcF9uZWcuYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uKTsKICAgIH0KICAgIC8qKgogICAgICogQ2xvbmUgdGhlIHZlY3RvcgogICAgICovCgoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54LCB0aGlzLnksIHRoaXMueik7CiAgICB9CgogIH0KICBWZWMzLlpFUk8gPSBuZXcgVmVjMygwLCAwLCAwKTsKICBWZWMzLlVOSVRfWCA9IG5ldyBWZWMzKDEsIDAsIDApOwogIFZlYzMuVU5JVF9ZID0gbmV3IFZlYzMoMCwgMSwgMCk7CiAgVmVjMy5VTklUX1ogPSBuZXcgVmVjMygwLCAwLCAxKTsKICBjb25zdCBWZWMzX3RhbmdlbnRzX24gPSBuZXcgVmVjMygpOwogIGNvbnN0IFZlYzNfdGFuZ2VudHNfcmFuZFZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYW50aXBfbmVnID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQXhpcyBhbGlnbmVkIGJvdW5kaW5nIGJveCBjbGFzcy4KICAgKi8KICBjbGFzcyBBQUJCIHsKICAgIC8qKgogICAgICogVGhlIGxvd2VyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3gKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHVwcGVyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3gKICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLmxvd2VyQm91bmQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnVwcGVyQm91bmQgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMubG93ZXJCb3VuZCkgewogICAgICAgIHRoaXMubG93ZXJCb3VuZC5jb3B5KG9wdGlvbnMubG93ZXJCb3VuZCk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnVwcGVyQm91bmQpIHsKICAgICAgICB0aGlzLnVwcGVyQm91bmQuY29weShvcHRpb25zLnVwcGVyQm91bmQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgQUFCQiBib3VuZHMgZnJvbSBhIHNldCBvZiBwb2ludHMuCiAgICAgKiBAcGFyYW0gcG9pbnRzIEFuIGFycmF5IG9mIFZlYzMncy4KICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0CiAgICAgKi8KCgogICAgc2V0RnJvbVBvaW50cyhwb2ludHMsIHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCBza2luU2l6ZSkgewogICAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kOwogICAgICBjb25zdCB1ID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBxID0gcXVhdGVybmlvbjsgLy8gU2V0IHRvIHRoZSBmaXJzdCBwb2ludAoKICAgICAgbC5jb3B5KHBvaW50c1swXSk7CgogICAgICBpZiAocSkgewogICAgICAgIHEudm11bHQobCwgbCk7CiAgICAgIH0KCiAgICAgIHUuY29weShsKTsKCiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IHAgPSBwb2ludHNbaV07CgogICAgICAgIGlmIChxKSB7CiAgICAgICAgICBxLnZtdWx0KHAsIHRtcCQxKTsKICAgICAgICAgIHAgPSB0bXAkMTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnggPiB1LngpIHsKICAgICAgICAgIHUueCA9IHAueDsKICAgICAgICB9CgogICAgICAgIGlmIChwLnggPCBsLngpIHsKICAgICAgICAgIGwueCA9IHAueDsKICAgICAgICB9CgogICAgICAgIGlmIChwLnkgPiB1LnkpIHsKICAgICAgICAgIHUueSA9IHAueTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnkgPCBsLnkpIHsKICAgICAgICAgIGwueSA9IHAueTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnogPiB1LnopIHsKICAgICAgICAgIHUueiA9IHAuejsKICAgICAgICB9CgogICAgICAgIGlmIChwLnogPCBsLnopIHsKICAgICAgICAgIGwueiA9IHAuejsKICAgICAgICB9CiAgICAgIH0gLy8gQWRkIG9mZnNldAoKCiAgICAgIGlmIChwb3NpdGlvbikgewogICAgICAgIHBvc2l0aW9uLnZhZGQobCwgbCk7CiAgICAgICAgcG9zaXRpb24udmFkZCh1LCB1KTsKICAgICAgfQoKICAgICAgaWYgKHNraW5TaXplKSB7CiAgICAgICAgbC54IC09IHNraW5TaXplOwogICAgICAgIGwueSAtPSBza2luU2l6ZTsKICAgICAgICBsLnogLT0gc2tpblNpemU7CiAgICAgICAgdS54ICs9IHNraW5TaXplOwogICAgICAgIHUueSArPSBza2luU2l6ZTsKICAgICAgICB1LnogKz0gc2tpblNpemU7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGJvdW5kcyBmcm9tIGFuIEFBQkIgdG8gdGhpcyBBQUJCCiAgICAgKiBAcGFyYW0gYWFiYiBTb3VyY2UgdG8gY29weSBmcm9tCiAgICAgKiBAcmV0dXJuIFRoZSB0aGlzIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eQogICAgICovCgoKICAgIGNvcHkoYWFiYikgewogICAgICB0aGlzLmxvd2VyQm91bmQuY29weShhYWJiLmxvd2VyQm91bmQpOwogICAgICB0aGlzLnVwcGVyQm91bmQuY29weShhYWJiLnVwcGVyQm91bmQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ2xvbmUgYW4gQUFCQgogICAgICovCgoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IEFBQkIoKS5jb3B5KHRoaXMpOwogICAgfQogICAgLyoqCiAgICAgKiBFeHRlbmQgdGhpcyBBQUJCIHNvIHRoYXQgaXQgY292ZXJzIHRoZSBnaXZlbiBBQUJCIHRvby4KICAgICAqLwoKCiAgICBleHRlbmQoYWFiYikgewogICAgICB0aGlzLmxvd2VyQm91bmQueCA9IE1hdGgubWluKHRoaXMubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueCk7CiAgICAgIHRoaXMudXBwZXJCb3VuZC54ID0gTWF0aC5tYXgodGhpcy51cHBlckJvdW5kLngsIGFhYmIudXBwZXJCb3VuZC54KTsKICAgICAgdGhpcy5sb3dlckJvdW5kLnkgPSBNYXRoLm1pbih0aGlzLmxvd2VyQm91bmQueSwgYWFiYi5sb3dlckJvdW5kLnkpOwogICAgICB0aGlzLnVwcGVyQm91bmQueSA9IE1hdGgubWF4KHRoaXMudXBwZXJCb3VuZC55LCBhYWJiLnVwcGVyQm91bmQueSk7CiAgICAgIHRoaXMubG93ZXJCb3VuZC56ID0gTWF0aC5taW4odGhpcy5sb3dlckJvdW5kLnosIGFhYmIubG93ZXJCb3VuZC56KTsKICAgICAgdGhpcy51cHBlckJvdW5kLnogPSBNYXRoLm1heCh0aGlzLnVwcGVyQm91bmQueiwgYWFiYi51cHBlckJvdW5kLnopOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIEFBQkIgb3ZlcmxhcHMgdGhpcyBBQUJCLgogICAgICovCgoKICAgIG92ZXJsYXBzKGFhYmIpIHsKICAgICAgY29uc3QgbDEgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTIgPSBhYWJiLnVwcGVyQm91bmQ7IC8vICAgICAgbDIgICAgICAgIHUyCiAgICAgIC8vICAgICAgfC0tLS0tLS0tLXwKICAgICAgLy8gfC0tLS0tLS0tfAogICAgICAvLyBsMSAgICAgICB1MQoKICAgICAgY29uc3Qgb3ZlcmxhcHNYID0gbDIueCA8PSB1MS54ICYmIHUxLnggPD0gdTIueCB8fCBsMS54IDw9IHUyLnggJiYgdTIueCA8PSB1MS54OwogICAgICBjb25zdCBvdmVybGFwc1kgPSBsMi55IDw9IHUxLnkgJiYgdTEueSA8PSB1Mi55IHx8IGwxLnkgPD0gdTIueSAmJiB1Mi55IDw9IHUxLnk7CiAgICAgIGNvbnN0IG92ZXJsYXBzWiA9IGwyLnogPD0gdTEueiAmJiB1MS56IDw9IHUyLnogfHwgbDEueiA8PSB1Mi56ICYmIHUyLnogPD0gdTEuejsKICAgICAgcmV0dXJuIG92ZXJsYXBzWCAmJiBvdmVybGFwc1kgJiYgb3ZlcmxhcHNaOwogICAgfSAvLyBNb3N0bHkgZm9yIGRlYnVnZ2luZwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIHJldHVybiAodS54IC0gbC54KSAqICh1LnkgLSBsLnkpICogKHUueiAtIGwueik7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gQUFCQiBpcyBmdWxseSBjb250YWluZWQgaW4gdGhpcyBBQUJCLgogICAgICovCgoKICAgIGNvbnRhaW5zKGFhYmIpIHsKICAgICAgY29uc3QgbDEgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTIgPSBhYWJiLnVwcGVyQm91bmQ7IC8vICAgICAgbDIgICAgICAgIHUyCiAgICAgIC8vICAgICAgfC0tLS0tLS0tLXwKICAgICAgLy8gfC0tLS0tLS0tLS0tLS0tLXwKICAgICAgLy8gbDEgICAgICAgICAgICAgIHUxCgogICAgICByZXR1cm4gbDEueCA8PSBsMi54ICYmIHUxLnggPj0gdTIueCAmJiBsMS55IDw9IGwyLnkgJiYgdTEueSA+PSB1Mi55ICYmIGwxLnogPD0gbDIueiAmJiB1MS56ID49IHUyLno7CiAgICB9CgogICAgZ2V0Q29ybmVycyhhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIGEuY29weShsKTsKICAgICAgYi5zZXQodS54LCBsLnksIGwueik7CiAgICAgIGMuc2V0KHUueCwgdS55LCBsLnopOwogICAgICBkLnNldChsLngsIHUueSwgdS56KTsKICAgICAgZS5zZXQodS54LCBsLnksIHUueik7CiAgICAgIGYuc2V0KGwueCwgdS55LCBsLnopOwogICAgICBnLnNldChsLngsIGwueSwgdS56KTsKICAgICAgaC5jb3B5KHUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gYW5vdGhlciBmcmFtZS4KICAgICAqIEByZXR1cm4gVGhlICJ0YXJnZXQiIEFBQkIgb2JqZWN0LgogICAgICovCgoKICAgIHRvTG9jYWxGcmFtZShmcmFtZSwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVyczsKICAgICAgY29uc3QgYSA9IGNvcm5lcnNbMF07CiAgICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdOwogICAgICBjb25zdCBjID0gY29ybmVyc1syXTsKICAgICAgY29uc3QgZCA9IGNvcm5lcnNbM107CiAgICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdOwogICAgICBjb25zdCBmID0gY29ybmVyc1s1XTsKICAgICAgY29uc3QgZyA9IGNvcm5lcnNbNl07CiAgICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lCgogICAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07CiAgICAgICAgZnJhbWUucG9pbnRUb0xvY2FsKGNvcm5lciwgY29ybmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gdGhlIGdsb2JhbCBmcmFtZS4KICAgICAqIEByZXR1cm4gVGhlICJ0YXJnZXQiIEFBQkIgb2JqZWN0LgogICAgICovCgoKICAgIHRvV29ybGRGcmFtZShmcmFtZSwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVyczsKICAgICAgY29uc3QgYSA9IGNvcm5lcnNbMF07CiAgICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdOwogICAgICBjb25zdCBjID0gY29ybmVyc1syXTsKICAgICAgY29uc3QgZCA9IGNvcm5lcnNbM107CiAgICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdOwogICAgICBjb25zdCBmID0gY29ybmVyc1s1XTsKICAgICAgY29uc3QgZyA9IGNvcm5lcnNbNl07CiAgICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lCgogICAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07CiAgICAgICAgZnJhbWUucG9pbnRUb1dvcmxkKGNvcm5lciwgY29ybmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgQUFCQiBpcyBoaXQgYnkgYSByYXkuCiAgICAgKi8KCgogICAgb3ZlcmxhcHNSYXkocmF5KSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBkaXJlY3Rpb24sCiAgICAgICAgZnJvbQogICAgICB9ID0gcmF5OyAvLyBjb25zdCB0ID0gMAogICAgICAvLyByYXkuZGlyZWN0aW9uIGlzIHVuaXQgZGlyZWN0aW9uIHZlY3RvciBvZiByYXkKCiAgICAgIGNvbnN0IGRpckZyYWNYID0gMSAvIGRpcmVjdGlvbi54OwogICAgICBjb25zdCBkaXJGcmFjWSA9IDEgLyBkaXJlY3Rpb24ueTsKICAgICAgY29uc3QgZGlyRnJhY1ogPSAxIC8gZGlyZWN0aW9uLno7IC8vIHRoaXMubG93ZXJCb3VuZCBpcyB0aGUgY29ybmVyIG9mIEFBQkIgd2l0aCBtaW5pbWFsIGNvb3JkaW5hdGVzIC0gbGVmdCBib3R0b20sIHJ0IGlzIG1heGltYWwgY29ybmVyCgogICAgICBjb25zdCB0MSA9ICh0aGlzLmxvd2VyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDsKICAgICAgY29uc3QgdDIgPSAodGhpcy51cHBlckJvdW5kLnggLSBmcm9tLngpICogZGlyRnJhY1g7CiAgICAgIGNvbnN0IHQzID0gKHRoaXMubG93ZXJCb3VuZC55IC0gZnJvbS55KSAqIGRpckZyYWNZOwogICAgICBjb25zdCB0NCA9ICh0aGlzLnVwcGVyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTsKICAgICAgY29uc3QgdDUgPSAodGhpcy5sb3dlckJvdW5kLnogLSBmcm9tLnopICogZGlyRnJhY1o7CiAgICAgIGNvbnN0IHQ2ID0gKHRoaXMudXBwZXJCb3VuZC56IC0gZnJvbS56KSAqIGRpckZyYWNaOyAvLyBjb25zdCB0bWluID0gTWF0aC5tYXgoTWF0aC5tYXgoTWF0aC5taW4odDEsIHQyKSwgTWF0aC5taW4odDMsIHQ0KSkpOwogICAgICAvLyBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSkpOwoKICAgICAgY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpLCBNYXRoLm1pbih0NSwgdDYpKTsKICAgICAgY29uc3QgdG1heCA9IE1hdGgubWluKE1hdGgubWluKE1hdGgubWF4KHQxLCB0MiksIE1hdGgubWF4KHQzLCB0NCkpLCBNYXRoLm1heCh0NSwgdDYpKTsgLy8gaWYgdG1heCA8IDAsIHJheSAobGluZSkgaXMgaW50ZXJzZWN0aW5nIEFBQkIsIGJ1dCB3aG9sZSBBQUJCIGlzIGJlaGluZyB1cwoKICAgICAgaWYgKHRtYXggPCAwKSB7CiAgICAgICAgLy90ID0gdG1heDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8gaWYgdG1pbiA+IHRtYXgsIHJheSBkb2Vzbid0IGludGVyc2VjdCBBQUJCCgoKICAgICAgaWYgKHRtaW4gPiB0bWF4KSB7CiAgICAgICAgLy90ID0gdG1heDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICB9CiAgY29uc3QgdG1wJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwoKICAvKioKICAgKiBDb2xsaXNpb24gIm1hdHJpeCIuCiAgICogSXQncyBhY3R1YWxseSBhIHRyaWFuZ3VsYXItc2hhcGVkIGFycmF5IG9mIHdoZXRoZXIgdHdvIGJvZGllcyBhcmUgdG91Y2hpbmcgdGhpcyBzdGVwLCBmb3IgcmVmZXJlbmNlIG5leHQgc3RlcAogICAqLwogIGNsYXNzIEFycmF5Q29sbGlzaW9uTWF0cml4IHsKICAgIC8qKgogICAgICogVGhlIG1hdHJpeCBzdG9yYWdlLgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5tYXRyaXggPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFuIGVsZW1lbnQKICAgICAqLwoKCiAgICBnZXQoYmksIGJqKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5tYXRyaXhbKGkgKiAoaSArIDEpID4+IDEpICsgaiAtIDFdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgYW4gZWxlbWVudAogICAgICovCgoKICAgIHNldChiaSwgYmosIHZhbHVlKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICB0aGlzLm1hdHJpeFsoaSAqIChpICsgMSkgPj4gMSkgKyBqIC0gMV0gPSB2YWx1ZSA/IDEgOiAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGFsbCBlbGVtZW50cyB0byB6ZXJvCiAgICAgKi8KCgogICAgcmVzZXQoKSB7CiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gdGhpcy5tYXRyaXgubGVuZ3RoOyBpICE9PSBsOyBpKyspIHsKICAgICAgICB0aGlzLm1hdHJpeFtpXSA9IDA7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgbWF4IG51bWJlciBvZiBvYmplY3RzCiAgICAgKi8KCgogICAgc2V0TnVtT2JqZWN0cyhuKSB7CiAgICAgIHRoaXMubWF0cml4Lmxlbmd0aCA9IG4gKiAobiAtIDEpID4+IDE7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQmFzZSBjbGFzcyBmb3Igb2JqZWN0cyB0aGF0IGRpc3BhdGNoZXMgZXZlbnRzLgogICAqLwogIGNsYXNzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyCiAgICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwogICAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbGlzdGVuZXJzW3R5cGVdID0gW107CiAgICAgIH0KCiAgICAgIGlmICghbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXS5wdXNoKGxpc3RlbmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGFuIGV2ZW50IGxpc3RlbmVyIGlzIGFkZGVkCiAgICAgKi8KCgogICAgaGFzRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKCiAgICAgIGlmIChsaXN0ZW5lcnNbdHlwZV0gIT09IHVuZGVmaW5lZCAmJiBsaXN0ZW5lcnNbdHlwZV0uaW5jbHVkZXMobGlzdGVuZXIpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW55IGV2ZW50IGxpc3RlbmVyIG9mIHRoZSBnaXZlbiB0eXBlIGlzIGFkZGVkCiAgICAgKi8KCgogICAgaGFzQW55RXZlbnRMaXN0ZW5lcih0eXBlKSB7CiAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwogICAgICByZXR1cm4gbGlzdGVuZXJzW3R5cGVdICE9PSB1bmRlZmluZWQ7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBhbiBldmVudCBsaXN0ZW5lcgogICAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzW3R5cGVdLmluZGV4T2YobGlzdGVuZXIpOwoKICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogRW1pdCBhbiBldmVudC4KICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIGRpc3BhdGNoRXZlbnQoZXZlbnQpIHsKICAgICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKICAgICAgY29uc3QgbGlzdGVuZXJBcnJheSA9IGxpc3RlbmVyc1tldmVudC50eXBlXTsKCiAgICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBldmVudC50YXJnZXQgPSB0aGlzOwoKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGxpc3RlbmVyQXJyYXkubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICBsaXN0ZW5lckFycmF5W2ldLmNhbGwodGhpcywgZXZlbnQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQSBRdWF0ZXJuaW9uIGRlc2NyaWJlcyBhIHJvdGF0aW9uIGluIDNEIHNwYWNlLiBUaGUgUXVhdGVybmlvbiBpcyBtYXRoZW1hdGljYWxseSBkZWZpbmVkIGFzIFEgPSB4KmkgKyB5KmogKyB6KmsgKyB3LCB3aGVyZSAoaSxqLGspIGFyZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9ycy4gKHgseSx6KSBjYW4gYmUgc2VlbiBhcyBhIHZlY3RvciByZWxhdGVkIHRvIHRoZSBheGlzIG9mIHJvdGF0aW9uLCB3aGlsZSB0aGUgcmVhbCBtdWx0aXBsaWVyLCB3LCBpcyByZWxhdGVkIHRvIHRoZSBhbW91bnQgb2Ygcm90YXRpb24uCiAgICogQHBhcmFtIHggTXVsdGlwbGllciBvZiB0aGUgaW1hZ2luYXJ5IGJhc2lzIHZlY3RvciBpLgogICAqIEBwYXJhbSB5IE11bHRpcGxpZXIgb2YgdGhlIGltYWdpbmFyeSBiYXNpcyB2ZWN0b3Igai4KICAgKiBAcGFyYW0geiBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGsuCiAgICogQHBhcmFtIHcgTXVsdGlwbGllciBvZiB0aGUgcmVhbCBwYXJ0LgogICAqIEBzZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9RdWF0ZXJuaW9uCiAgICovCgogIGNsYXNzIFF1YXRlcm5pb24gewogICAgY29uc3RydWN0b3IoeCwgeSwgeiwgdykgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDA7CiAgICAgIH0KCiAgICAgIGlmICh5ID09PSB2b2lkIDApIHsKICAgICAgICB5ID0gMDsKICAgICAgfQoKICAgICAgaWYgKHogPT09IHZvaWQgMCkgewogICAgICAgIHogPSAwOwogICAgICB9CgogICAgICBpZiAodyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdyA9IDE7CiAgICAgIH0KCiAgICAgIHRoaXMueCA9IHg7CiAgICAgIHRoaXMueSA9IHk7CiAgICAgIHRoaXMueiA9IHo7CiAgICAgIHRoaXMudyA9IHc7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgdmFsdWUgb2YgdGhlIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgc2V0KHgsIHksIHosIHcpIHsKICAgICAgdGhpcy54ID0geDsKICAgICAgdGhpcy55ID0geTsKICAgICAgdGhpcy56ID0gejsKICAgICAgdGhpcy53ID0gdzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdG8gYSByZWFkYWJsZSBmb3JtYXQKICAgICAqIEByZXR1cm4gIngseSx6LHciCiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnh9LCR7dGhpcy55fSwke3RoaXMuen0sJHt0aGlzLnd9YDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCB0byBhbiBBcnJheQogICAgICogQHJldHVybiBbeCwgeSwgeiwgd10KICAgICAqLwoKCiAgICB0b0FycmF5KCkgewogICAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55LCB0aGlzLnosIHRoaXMud107CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiBjb21wb25lbnRzIGdpdmVuIGFuIGF4aXMgYW5kIGFuIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgc2V0RnJvbUF4aXNBbmdsZSh2ZWN0b3IsIGFuZ2xlKSB7CiAgICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSAqIDAuNSk7CiAgICAgIHRoaXMueCA9IHZlY3Rvci54ICogczsKICAgICAgdGhpcy55ID0gdmVjdG9yLnkgKiBzOwogICAgICB0aGlzLnogPSB2ZWN0b3IueiAqIHM7CiAgICAgIHRoaXMudyA9IE1hdGguY29zKGFuZ2xlICogMC41KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnRzIHRoZSBxdWF0ZXJuaW9uIHRvIFsgYXhpcywgYW5nbGUgXSByZXByZXNlbnRhdGlvbi4KICAgICAqIEBwYXJhbSB0YXJnZXRBeGlzIEEgdmVjdG9yIG9iamVjdCB0byByZXVzZSBmb3Igc3RvcmluZyB0aGUgYXhpcy4KICAgICAqIEByZXR1cm4gQW4gYXJyYXksIGZpcnN0IGVsZW1lbnQgaXMgdGhlIGF4aXMgYW5kIHRoZSBzZWNvbmQgaXMgdGhlIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgdG9BeGlzQW5nbGUodGFyZ2V0QXhpcykgewogICAgICBpZiAodGFyZ2V0QXhpcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0QXhpcyA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMubm9ybWFsaXplKCk7IC8vIGlmIHc+MSBhY29zIGFuZCBzcXJ0IHdpbGwgcHJvZHVjZSBlcnJvcnMsIHRoaXMgY2FudCBoYXBwZW4gaWYgcXVhdGVybmlvbiBpcyBub3JtYWxpc2VkCgogICAgICBjb25zdCBhbmdsZSA9IDIgKiBNYXRoLmFjb3ModGhpcy53KTsKICAgICAgY29uc3QgcyA9IE1hdGguc3FydCgxIC0gdGhpcy53ICogdGhpcy53KTsgLy8gYXNzdW1pbmcgcXVhdGVybmlvbiBub3JtYWxpc2VkIHRoZW4gdyBpcyBsZXNzIHRoYW4gMSwgc28gdGVybSBhbHdheXMgcG9zaXRpdmUuCgogICAgICBpZiAocyA8IDAuMDAxKSB7CiAgICAgICAgLy8gdGVzdCB0byBhdm9pZCBkaXZpZGUgYnkgemVybywgcyBpcyBhbHdheXMgcG9zaXRpdmUgZHVlIHRvIHNxcnQKICAgICAgICAvLyBpZiBzIGNsb3NlIHRvIHplcm8gdGhlbiBkaXJlY3Rpb24gb2YgYXhpcyBub3QgaW1wb3J0YW50CiAgICAgICAgdGFyZ2V0QXhpcy54ID0gdGhpcy54OyAvLyBpZiBpdCBpcyBpbXBvcnRhbnQgdGhhdCBheGlzIGlzIG5vcm1hbGlzZWQgdGhlbiByZXBsYWNlIHdpdGggeD0xOyB5PXo9MDsKCiAgICAgICAgdGFyZ2V0QXhpcy55ID0gdGhpcy55OwogICAgICAgIHRhcmdldEF4aXMueiA9IHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICB0YXJnZXRBeGlzLnggPSB0aGlzLnggLyBzOyAvLyBub3JtYWxpc2UgYXhpcwoKICAgICAgICB0YXJnZXRBeGlzLnkgPSB0aGlzLnkgLyBzOwogICAgICAgIHRhcmdldEF4aXMueiA9IHRoaXMueiAvIHM7CiAgICAgIH0KCiAgICAgIHJldHVybiBbdGFyZ2V0QXhpcywgYW5nbGVdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHF1YXRlcm5pb24gdmFsdWUgZ2l2ZW4gdHdvIHZlY3RvcnMuIFRoZSByZXN1bHRpbmcgcm90YXRpb24gd2lsbCBiZSB0aGUgbmVlZGVkIHJvdGF0aW9uIHRvIHJvdGF0ZSB1IHRvIHYuCiAgICAgKi8KCgogICAgc2V0RnJvbVZlY3RvcnModSwgdikgewogICAgICBpZiAodS5pc0FudGlwYXJhbGxlbFRvKHYpKSB7CiAgICAgICAgY29uc3QgdDEgPSBzZnZfdDE7CiAgICAgICAgY29uc3QgdDIgPSBzZnZfdDI7CiAgICAgICAgdS50YW5nZW50cyh0MSwgdDIpOwogICAgICAgIHRoaXMuc2V0RnJvbUF4aXNBbmdsZSh0MSwgTWF0aC5QSSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgYSA9IHUuY3Jvc3Modik7CiAgICAgICAgdGhpcy54ID0gYS54OwogICAgICAgIHRoaXMueSA9IGEueTsKICAgICAgICB0aGlzLnogPSBhLno7CiAgICAgICAgdGhpcy53ID0gTWF0aC5zcXJ0KHUubGVuZ3RoKCkgKiogMiAqIHYubGVuZ3RoKCkgKiogMikgKyB1LmRvdCh2KTsKICAgICAgICB0aGlzLm5vcm1hbGl6ZSgpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgdGhlIHF1YXRlcm5pb24gd2l0aCBhbiBvdGhlciBxdWF0ZXJuaW9uLgogICAgICovCgoKICAgIG11bHQocXVhdCwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gdGhpcy54OwogICAgICBjb25zdCBheSA9IHRoaXMueTsKICAgICAgY29uc3QgYXogPSB0aGlzLno7CiAgICAgIGNvbnN0IGF3ID0gdGhpcy53OwogICAgICBjb25zdCBieCA9IHF1YXQueDsKICAgICAgY29uc3QgYnkgPSBxdWF0Lnk7CiAgICAgIGNvbnN0IGJ6ID0gcXVhdC56OwogICAgICBjb25zdCBidyA9IHF1YXQudzsKICAgICAgdGFyZ2V0LnggPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5OwogICAgICB0YXJnZXQueSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYno7CiAgICAgIHRhcmdldC56ID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieDsKICAgICAgdGFyZ2V0LncgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGludmVyc2UgcXVhdGVybmlvbiByb3RhdGlvbi4KICAgICAqLwoKCiAgICBpbnZlcnNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCB3ID0gdGhpcy53OwogICAgICB0aGlzLmNvbmp1Z2F0ZSh0YXJnZXQpOwogICAgICBjb25zdCBpbm9ybTIgPSAxIC8gKHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3KTsKICAgICAgdGFyZ2V0LnggKj0gaW5vcm0yOwogICAgICB0YXJnZXQueSAqPSBpbm9ybTI7CiAgICAgIHRhcmdldC56ICo9IGlub3JtMjsKICAgICAgdGFyZ2V0LncgKj0gaW5vcm0yOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHF1YXRlcm5pb24gY29uanVnYXRlCiAgICAgKi8KCgogICAgY29uanVnYXRlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IC10aGlzLng7CiAgICAgIHRhcmdldC55ID0gLXRoaXMueTsKICAgICAgdGFyZ2V0LnogPSAtdGhpcy56OwogICAgICB0YXJnZXQudyA9IHRoaXMudzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSBxdWF0ZXJuaW9uLiBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIHRoZSB2YWx1ZXMgb2YgdGhlIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBsZXQgbCA9IE1hdGguc3FydCh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkgKyB0aGlzLnogKiB0aGlzLnogKyB0aGlzLncgKiB0aGlzLncpOwoKICAgICAgaWYgKGwgPT09IDApIHsKICAgICAgICB0aGlzLnggPSAwOwogICAgICAgIHRoaXMueSA9IDA7CiAgICAgICAgdGhpcy56ID0gMDsKICAgICAgICB0aGlzLncgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIGwgPSAxIC8gbDsKICAgICAgICB0aGlzLnggKj0gbDsKICAgICAgICB0aGlzLnkgKj0gbDsKICAgICAgICB0aGlzLnogKj0gbDsKICAgICAgICB0aGlzLncgKj0gbDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEFwcHJveGltYXRpb24gb2YgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uLiBXb3JrcyBiZXN0IHdoZW4gcXVhdCBpcyBhbHJlYWR5IGFsbW9zdC1ub3JtYWxpemVkLgogICAgICogQGF1dGhvciB1bnBoYXNlZCwgaHR0cHM6Ly9naXRodWIuY29tL3VucGhhc2VkCiAgICAgKi8KCgogICAgbm9ybWFsaXplRmFzdCgpIHsKICAgICAgY29uc3QgZiA9ICgzLjAgLSAodGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55ICsgdGhpcy56ICogdGhpcy56ICsgdGhpcy53ICogdGhpcy53KSkgLyAyLjA7CgogICAgICBpZiAoZiA9PT0gMCkgewogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICAgIHRoaXMudyA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy54ICo9IGY7CiAgICAgICAgdGhpcy55ICo9IGY7CiAgICAgICAgdGhpcy56ICo9IGY7CiAgICAgICAgdGhpcy53ICo9IGY7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiBieSBhIHZlY3RvcgogICAgICovCgoKICAgIHZtdWx0KHYsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdi54OwogICAgICBjb25zdCB5ID0gdi55OwogICAgICBjb25zdCB6ID0gdi56OwogICAgICBjb25zdCBxeCA9IHRoaXMueDsKICAgICAgY29uc3QgcXkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHF6ID0gdGhpcy56OwogICAgICBjb25zdCBxdyA9IHRoaXMudzsgLy8gcSp2CgogICAgICBjb25zdCBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTsKICAgICAgY29uc3QgaXkgPSBxdyAqIHkgKyBxeiAqIHggLSBxeCAqIHo7CiAgICAgIGNvbnN0IGl6ID0gcXcgKiB6ICsgcXggKiB5IC0gcXkgKiB4OwogICAgICBjb25zdCBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7CiAgICAgIHRhcmdldC54ID0gaXggKiBxdyArIGl3ICogLXF4ICsgaXkgKiAtcXogLSBpeiAqIC1xeTsKICAgICAgdGFyZ2V0LnkgPSBpeSAqIHF3ICsgaXcgKiAtcXkgKyBpeiAqIC1xeCAtIGl4ICogLXF6OwogICAgICB0YXJnZXQueiA9IGl6ICogcXcgKyBpdyAqIC1xeiArIGl4ICogLXF5IC0gaXkgKiAtcXg7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyBxdWF0ZXJuaW9uLgogICAgICogQHJldHVybiB0aGlzCiAgICAgKi8KCgogICAgY29weShxdWF0KSB7CiAgICAgIHRoaXMueCA9IHF1YXQueDsKICAgICAgdGhpcy55ID0gcXVhdC55OwogICAgICB0aGlzLnogPSBxdWF0Lno7CiAgICAgIHRoaXMudyA9IHF1YXQudzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdGhlIHF1YXRlcm5pb24gdG8gZXVsZXIgYW5nbGUgcmVwcmVzZW50YXRpb24uIE9yZGVyOiBZWlgsIGFzIHRoaXMgcGFnZSBkZXNjcmliZXM6IGh0dHBzOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9zdGFuZGFyZHMvaW5kZXguaHRtCiAgICAgKiBAcGFyYW0gb3JkZXIgVGhyZWUtY2hhcmFjdGVyIHN0cmluZywgZGVmYXVsdHMgdG8gIllaWCIKICAgICAqLwoKCiAgICB0b0V1bGVyKHRhcmdldCwgb3JkZXIpIHsKICAgICAgaWYgKG9yZGVyID09PSB2b2lkIDApIHsKICAgICAgICBvcmRlciA9ICdZWlgnOwogICAgICB9CgogICAgICBsZXQgaGVhZGluZzsKICAgICAgbGV0IGF0dGl0dWRlOwogICAgICBsZXQgYmFuazsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgY29uc3QgdyA9IHRoaXMudzsKCiAgICAgIHN3aXRjaCAob3JkZXIpIHsKICAgICAgICBjYXNlICdZWlgnOgogICAgICAgICAgY29uc3QgdGVzdCA9IHggKiB5ICsgeiAqIHc7CgogICAgICAgICAgaWYgKHRlc3QgPiAwLjQ5OSkgewogICAgICAgICAgICAvLyBzaW5ndWxhcml0eSBhdCBub3J0aCBwb2xlCiAgICAgICAgICAgIGhlYWRpbmcgPSAyICogTWF0aC5hdGFuMih4LCB3KTsKICAgICAgICAgICAgYXR0aXR1ZGUgPSBNYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRlc3QgPCAtMC40OTkpIHsKICAgICAgICAgICAgLy8gc2luZ3VsYXJpdHkgYXQgc291dGggcG9sZQogICAgICAgICAgICBoZWFkaW5nID0gLTIgKiBNYXRoLmF0YW4yKHgsIHcpOwogICAgICAgICAgICBhdHRpdHVkZSA9IC1NYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGhlYWRpbmcgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjb25zdCBzcXggPSB4ICogeDsKICAgICAgICAgICAgY29uc3Qgc3F5ID0geSAqIHk7CiAgICAgICAgICAgIGNvbnN0IHNxeiA9IHogKiB6OwogICAgICAgICAgICBoZWFkaW5nID0gTWF0aC5hdGFuMigyICogeSAqIHcgLSAyICogeCAqIHosIDEgLSAyICogc3F5IC0gMiAqIHNxeik7IC8vIEhlYWRpbmcKCiAgICAgICAgICAgIGF0dGl0dWRlID0gTWF0aC5hc2luKDIgKiB0ZXN0KTsgLy8gYXR0aXR1ZGUKCiAgICAgICAgICAgIGJhbmsgPSBNYXRoLmF0YW4yKDIgKiB4ICogdyAtIDIgKiB5ICogeiwgMSAtIDIgKiBzcXggLSAyICogc3F6KTsgLy8gYmFuawogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFdWxlciBvcmRlciAke29yZGVyfSBub3Qgc3VwcG9ydGVkIHlldC5gKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnkgPSBoZWFkaW5nOwogICAgICB0YXJnZXQueiA9IGF0dGl0dWRlOwogICAgICB0YXJnZXQueCA9IGJhbms7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiBjb21wb25lbnRzIGdpdmVuIEV1bGVyIGFuZ2xlIHJlcHJlc2VudGF0aW9uLgogICAgICoKICAgICAqIEBwYXJhbSBvcmRlciBUaGUgb3JkZXIgdG8gYXBwbHkgYW5nbGVzOiAnWFlaJyBvciAnWVhaJyBvciBhbnkgb3RoZXIgY29tYmluYXRpb24uCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dy5tYXRod29ya3MuY29tL21hdGxhYmNlbnRyYWwvZmlsZWV4Y2hhbmdlLzIwNjk2LWZ1bmN0aW9uLXRvLWNvbnZlcnQtYmV0d2Vlbi1kY20tZXVsZXItYW5nbGVzLXF1YXRlcm5pb25zLWFuZC1ldWxlci12ZWN0b3JzIE1hdGhXb3Jrc30gcmVmZXJlbmNlCiAgICAgKi8KCgogICAgc2V0RnJvbUV1bGVyKHgsIHksIHosIG9yZGVyKSB7CiAgICAgIGlmIChvcmRlciA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3JkZXIgPSAnWFlaJzsKICAgICAgfQoKICAgICAgY29uc3QgYzEgPSBNYXRoLmNvcyh4IC8gMik7CiAgICAgIGNvbnN0IGMyID0gTWF0aC5jb3MoeSAvIDIpOwogICAgICBjb25zdCBjMyA9IE1hdGguY29zKHogLyAyKTsKICAgICAgY29uc3QgczEgPSBNYXRoLnNpbih4IC8gMik7CiAgICAgIGNvbnN0IHMyID0gTWF0aC5zaW4oeSAvIDIpOwogICAgICBjb25zdCBzMyA9IE1hdGguc2luKHogLyAyKTsKCiAgICAgIGlmIChvcmRlciA9PT0gJ1hZWicpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgKyBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdZWFonKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWlhZJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMzsKICAgICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1pZWCcpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdZWlgnKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWFpZJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMzsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgY2xvbmUoKSB7CiAgICAgIHJldHVybiBuZXcgUXVhdGVybmlvbih0aGlzLngsIHRoaXMueSwgdGhpcy56LCB0aGlzLncpOwogICAgfQogICAgLyoqCiAgICAgKiBQZXJmb3JtcyBhIHNwaGVyaWNhbCBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBxdWF0CiAgICAgKgogICAgICogQHBhcmFtIHRvUXVhdCBzZWNvbmQgb3BlcmFuZAogICAgICogQHBhcmFtIHQgaW50ZXJwb2xhdGlvbiBhbW91bnQgYmV0d2VlbiB0aGUgc2VsZiBxdWF0ZXJuaW9uIGFuZCB0b1F1YXQKICAgICAqIEBwYXJhbSB0YXJnZXQgQSBxdWF0ZXJuaW9uIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uIElmIG5vdCBwcm92aWRlZCwgYSBuZXcgb25lIHdpbGwgYmUgY3JlYXRlZC4KICAgICAqIEByZXR1cm5zIHtRdWF0ZXJuaW9ufSBUaGUgInRhcmdldCIgb2JqZWN0CiAgICAgKi8KCgogICAgc2xlcnAodG9RdWF0LCB0LCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgfQoKICAgICAgY29uc3QgYXggPSB0aGlzLng7CiAgICAgIGNvbnN0IGF5ID0gdGhpcy55OwogICAgICBjb25zdCBheiA9IHRoaXMuejsKICAgICAgY29uc3QgYXcgPSB0aGlzLnc7CiAgICAgIGxldCBieCA9IHRvUXVhdC54OwogICAgICBsZXQgYnkgPSB0b1F1YXQueTsKICAgICAgbGV0IGJ6ID0gdG9RdWF0Lno7CiAgICAgIGxldCBidyA9IHRvUXVhdC53OwogICAgICBsZXQgb21lZ2E7CiAgICAgIGxldCBjb3NvbTsKICAgICAgbGV0IHNpbm9tOwogICAgICBsZXQgc2NhbGUwOwogICAgICBsZXQgc2NhbGUxOyAvLyBjYWxjIGNvc2luZQoKICAgICAgY29zb20gPSBheCAqIGJ4ICsgYXkgKiBieSArIGF6ICogYnogKyBhdyAqIGJ3OyAvLyBhZGp1c3Qgc2lnbnMgKGlmIG5lY2Vzc2FyeSkKCiAgICAgIGlmIChjb3NvbSA8IDAuMCkgewogICAgICAgIGNvc29tID0gLWNvc29tOwogICAgICAgIGJ4ID0gLWJ4OwogICAgICAgIGJ5ID0gLWJ5OwogICAgICAgIGJ6ID0gLWJ6OwogICAgICAgIGJ3ID0gLWJ3OwogICAgICB9IC8vIGNhbGN1bGF0ZSBjb2VmZmljaWVudHMKCgogICAgICBpZiAoMS4wIC0gY29zb20gPiAwLjAwMDAwMSkgewogICAgICAgIC8vIHN0YW5kYXJkIGNhc2UgKHNsZXJwKQogICAgICAgIG9tZWdhID0gTWF0aC5hY29zKGNvc29tKTsKICAgICAgICBzaW5vbSA9IE1hdGguc2luKG9tZWdhKTsKICAgICAgICBzY2FsZTAgPSBNYXRoLnNpbigoMS4wIC0gdCkgKiBvbWVnYSkgLyBzaW5vbTsKICAgICAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gImZyb20iIGFuZCAidG8iIHF1YXRlcm5pb25zIGFyZSB2ZXJ5IGNsb3NlCiAgICAgICAgLy8gIC4uLiBzbyB3ZSBjYW4gZG8gYSBsaW5lYXIgaW50ZXJwb2xhdGlvbgogICAgICAgIHNjYWxlMCA9IDEuMCAtIHQ7CiAgICAgICAgc2NhbGUxID0gdDsKICAgICAgfSAvLyBjYWxjdWxhdGUgZmluYWwgdmFsdWVzCgoKICAgICAgdGFyZ2V0LnggPSBzY2FsZTAgKiBheCArIHNjYWxlMSAqIGJ4OwogICAgICB0YXJnZXQueSA9IHNjYWxlMCAqIGF5ICsgc2NhbGUxICogYnk7CiAgICAgIHRhcmdldC56ID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejsKICAgICAgdGFyZ2V0LncgPSBzY2FsZTAgKiBhdyArIHNjYWxlMSAqIGJ3OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBSb3RhdGUgYW4gYWJzb2x1dGUgb3JpZW50YXRpb24gcXVhdGVybmlvbiBnaXZlbiBhbiBhbmd1bGFyIHZlbG9jaXR5IGFuZCBhIHRpbWUgc3RlcC4KICAgICAqLwoKCiAgICBpbnRlZ3JhdGUoYW5ndWxhclZlbG9jaXR5LCBkdCwgYW5ndWxhckZhY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gYW5ndWxhclZlbG9jaXR5LnggKiBhbmd1bGFyRmFjdG9yLngsCiAgICAgICAgICAgIGF5ID0gYW5ndWxhclZlbG9jaXR5LnkgKiBhbmd1bGFyRmFjdG9yLnksCiAgICAgICAgICAgIGF6ID0gYW5ndWxhclZlbG9jaXR5LnogKiBhbmd1bGFyRmFjdG9yLnosCiAgICAgICAgICAgIGJ4ID0gdGhpcy54LAogICAgICAgICAgICBieSA9IHRoaXMueSwKICAgICAgICAgICAgYnogPSB0aGlzLnosCiAgICAgICAgICAgIGJ3ID0gdGhpcy53OwogICAgICBjb25zdCBoYWxmX2R0ID0gZHQgKiAwLjU7CiAgICAgIHRhcmdldC54ICs9IGhhbGZfZHQgKiAoYXggKiBidyArIGF5ICogYnogLSBheiAqIGJ5KTsKICAgICAgdGFyZ2V0LnkgKz0gaGFsZl9kdCAqIChheSAqIGJ3ICsgYXogKiBieCAtIGF4ICogYnopOwogICAgICB0YXJnZXQueiArPSBoYWxmX2R0ICogKGF6ICogYncgKyBheCAqIGJ5IC0gYXkgKiBieCk7CiAgICAgIHRhcmdldC53ICs9IGhhbGZfZHQgKiAoLWF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBieik7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogIH0KICBjb25zdCBzZnZfdDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNmdl90MiA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIFRoZSBhdmFpbGFibGUgc2hhcGUgdHlwZXMuCiAgICovCiAgY29uc3QgU0hBUEVfVFlQRVMgPSB7CiAgICAvKiogU1BIRVJFICovCiAgICBTUEhFUkU6IDEsCgogICAgLyoqIFBMQU5FICovCiAgICBQTEFORTogMiwKCiAgICAvKiogQk9YICovCiAgICBCT1g6IDQsCgogICAgLyoqIENPTVBPVU5EICovCiAgICBDT01QT1VORDogOCwKCiAgICAvKiogQ09OVkVYUE9MWUhFRFJPTiAqLwogICAgQ09OVkVYUE9MWUhFRFJPTjogMTYsCgogICAgLyoqIEhFSUdIVEZJRUxEICovCiAgICBIRUlHSFRGSUVMRDogMzIsCgogICAgLyoqIFBBUlRJQ0xFICovCiAgICBQQVJUSUNMRTogNjQsCgogICAgLyoqIENZTElOREVSICovCiAgICBDWUxJTkRFUjogMTI4LAoKICAgIC8qKiBUUklNRVNIICovCiAgICBUUklNRVNIOiAyNTYKICB9OwogIC8qKgogICAqIFNoYXBlVHlwZQogICAqLwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBzaGFwZXMKICAgKi8KICBjbGFzcyBTaGFwZSB7CiAgICAvKioKICAgICAqIElkZW50aWZpZXIgb2YgdGhlIFNoYXBlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgdHlwZSBvZiB0aGlzIHNoYXBlLiBNdXN0IGJlIHNldCB0byBhbiBpbnQgPiAwIGJ5IHN1YmNsYXNzZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBsb2NhbCBib3VuZGluZyBzcGhlcmUgcmFkaXVzIG9mIHRoaXMgc2hhcGUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZC4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBPcHRpb25hbCBtYXRlcmlhbCBvZiB0aGUgc2hhcGUgdGhhdCByZWd1bGF0ZXMgY29udGFjdCBwcm9wZXJ0aWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYm9keSB0byB3aGljaCB0aGUgc2hhcGUgaXMgYWRkZWQgdG8uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCB0aGUgU2hhcGUgdHlwZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5pZCA9IFNoYXBlLmlkQ291bnRlcisrOwogICAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGUgfHwgMDsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IDA7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgOiAtMTsKICAgICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgPyBvcHRpb25zLm1hdGVyaWFsIDogbnVsbDsKICAgICAgdGhpcy5ib2R5ID0gbnVsbDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgdGhlIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMuCiAgICAgKiBUaGUgcmVzdWx0IGlzIHN0b3JlZCBpbiB0aGUgcHJvcGVydHkgYC5ib3VuZGluZ1NwaGVyZVJhZGl1c2AKICAgICAqLwoKCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhyb3cgYGNvbXB1dGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAke3RoaXMudHlwZX1gOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHZvbHVtZSBvZiB0aGlzIHNoYXBlCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICB0aHJvdyBgdm9sdW1lKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICR7dGhpcy50eXBlfWA7CiAgICB9CiAgICAvKioKICAgICAqIENhbGN1bGF0ZXMgdGhlIGluZXJ0aWEgaW4gdGhlIGxvY2FsIGZyYW1lIGZvciB0aGlzIHNoYXBlLgogICAgICogQHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbW9tZW50c19vZl9pbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICB0aHJvdyBgY2FsY3VsYXRlTG9jYWxJbmVydGlhKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICR7dGhpcy50eXBlfWA7CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIHVzZSBhYnN0cmFjdCBmb3IgdGhlc2Uga2luZCBvZiBtZXRob2RzCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgdGhyb3cgYGNhbGN1bGF0ZVdvcmxkQUFCQigpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAke3RoaXMudHlwZX1gOwogICAgfQoKICB9CiAgU2hhcGUuaWRDb3VudGVyID0gMDsKICBTaGFwZS50eXBlcyA9IFNIQVBFX1RZUEVTOwoKICAvKioKICAgKiBUcmFuc2Zvcm1hdGlvbiB1dGlsaXRpZXMuCiAgICovCiAgY2xhc3MgVHJhbnNmb3JtIHsKICAgIC8qKgogICAgICogcG9zaXRpb24KICAgICAqLwoKICAgIC8qKgogICAgICogcXVhdGVybmlvbgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24pIHsKICAgICAgICB0aGlzLnBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHsKICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIGdsb2JhbCBwb2ludCBpbiBsb2NhbCB0cmFuc2Zvcm0gY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgcG9pbnRUb0xvY2FsKHdvcmxkUG9pbnQsIHJlc3VsdCkgewogICAgICByZXR1cm4gVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHRoaXMucG9zaXRpb24sIHRoaXMucXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgbG9jYWwgcG9pbnQgaW4gZ2xvYmFsIHRyYW5zZm9ybSBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBwb2ludFRvV29ybGQobG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIHJldHVybiBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5wb3NpdGlvbiwgdGhpcy5xdWF0ZXJuaW9uLCBsb2NhbFBvaW50LCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb1dvcmxkRnJhbWUKICAgICAqLwoKCiAgICB2ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHBvaW50VG9Mb2NhbEZyYW1lCiAgICAgKi8KCgogICAgc3RhdGljIHBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgd29ybGRQb2ludC52c3ViKHBvc2l0aW9uLCByZXN1bHQpOwogICAgICBxdWF0ZXJuaW9uLmNvbmp1Z2F0ZSh0bXBRdWF0JDEpOwogICAgICB0bXBRdWF0JDEudm11bHQocmVzdWx0LCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBwb2ludFRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyBwb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgbG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udm11bHQobG9jYWxQb2ludCwgcmVzdWx0KTsKICAgICAgcmVzdWx0LnZhZGQocG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHZlY3RvclRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyB2ZWN0b3JUb1dvcmxkRnJhbWUocXVhdGVybmlvbiwgbG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBxdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb0xvY2FsRnJhbWUKICAgICAqLwoKCiAgICBzdGF0aWMgdmVjdG9yVG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFZlY3RvciwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udyAqPSAtMTsKICAgICAgcXVhdGVybmlvbi52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTsKICAgICAgcXVhdGVybmlvbi53ICo9IC0xOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CiAgY29uc3QgdG1wUXVhdCQxID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgLyoqCiAgICogQSBzZXQgb2YgcG9seWdvbnMgZGVzY3JpYmluZyBhIGNvbnZleCBzaGFwZS4KICAgKgogICAqIFRoZSBzaGFwZSBNVVNUIGJlIGNvbnZleCBmb3IgdGhlIGNvZGUgdG8gd29yayBwcm9wZXJseS4gTm8gcG9seWdvbnMgbWF5IGJlIGNvcGxhbmFyIChjb250YWluZWQKICAgKiBpbiB0aGUgc2FtZSAzRCBwbGFuZSksIGluc3RlYWQgdGhlc2Ugc2hvdWxkIGJlIG1lcmdlZCBpbnRvIG9uZSBwb2x5Z29uLgogICAqCiAgICogQGF1dGhvciBxaWFvIC8gaHR0cHM6Ly9naXRodWIuY29tL3FpYW8gKG9yaWdpbmFsIGF1dGhvciwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9xaWFvL3RocmVlLmpzL2NvbW1pdC84NTAyNmYwYzc2OWU0MDAwMTQ4YTY3ZDQ1YTllOWI5YzUxMDg4MzZmKQogICAqIEBhdXRob3Igc2NodGVwcGUgLyBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUKICAgKiBAc2VlIGh0dHBzOi8vd3d3LmFsdGRldmJsb2dhZGF5LmNvbS8yMDExLzA1LzEzL2NvbnRhY3QtZ2VuZXJhdGlvbi1iZXR3ZWVuLTNkLWNvbnZleC1tZXNoZXMvCiAgICoKICAgKiBAdG9kbyBNb3ZlIHRoZSBjbGlwcGluZyBmdW5jdGlvbnMgdG8gQ29udGFjdEdlbmVyYXRvcj8KICAgKiBAdG9kbyBBdXRvbWF0aWNhbGx5IG1lcmdlIGNvcGxhbmFyIHBvbHlnb25zIGluIGNvbnN0cnVjdG9yLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGNvbnZleFNoYXBlID0gbmV3IENBTk5PTi5Db252ZXhQb2x5aGVkcm9uKHsgdmVydGljZXMsIGZhY2VzIH0pCiAgICogICAgIGNvbnN0IGNvbnZleEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY29udmV4U2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShjb252ZXhCb2R5KQogICAqLwogIGNsYXNzIENvbnZleFBvbHloZWRyb24gZXh0ZW5kcyBTaGFwZSB7CiAgICAvKiogdmVydGljZXMgKi8KCiAgICAvKioKICAgICAqIEFycmF5IG9mIGludGVnZXIgYXJyYXlzLCBpbmRpY2F0aW5nIHdoaWNoIHZlcnRpY2VzIGVhY2ggZmFjZSBjb25zaXN0cyBvZgogICAgICovCgogICAgLyoqIGZhY2VOb3JtYWxzICovCgogICAgLyoqIHdvcmxkVmVydGljZXMgKi8KCiAgICAvKiogd29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlICovCgogICAgLyoqIHdvcmxkRmFjZU5vcm1hbHMgKi8KCiAgICAvKiogd29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlICovCgogICAgLyoqCiAgICAgKiBJZiBnaXZlbiwgdGhlc2UgbG9jYWxseSBkZWZpbmVkLCBub3JtYWxpemVkIGF4ZXMgYXJlIHRoZSBvbmx5IG9uZXMgYmVpbmcgY2hlY2tlZCB3aGVuIGRvaW5nIHNlcGFyYXRpbmcgYXhpcyBjaGVjay4KICAgICAqLwoKICAgIC8qKiB1bmlxdWVFZGdlcyAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHZlcnRpY2VzIEFuIGFycmF5IG9mIFZlYzMncwogICAgICogQHBhcmFtIGZhY2VzIEFycmF5IG9mIGludGVnZXIgYXJyYXlzLCBkZXNjcmliaW5nIHdoaWNoIHZlcnRpY2VzIHRoYXQgaXMgaW5jbHVkZWQgaW4gZWFjaCBmYWNlLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihwcm9wcykgewogICAgICBpZiAocHJvcHMgPT09IHZvaWQgMCkgewogICAgICAgIHByb3BzID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IHsKICAgICAgICB2ZXJ0aWNlcyA9IFtdLAogICAgICAgIGZhY2VzID0gW10sCiAgICAgICAgbm9ybWFscyA9IFtdLAogICAgICAgIGF4ZXMsCiAgICAgICAgYm91bmRpbmdTcGhlcmVSYWRpdXMKICAgICAgfSA9IHByb3BzOwogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTgogICAgICB9KTsKICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzOwogICAgICB0aGlzLmZhY2VzID0gZmFjZXM7CiAgICAgIHRoaXMuZmFjZU5vcm1hbHMgPSBub3JtYWxzOwoKICAgICAgaWYgKHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5jb21wdXRlTm9ybWFscygpOwogICAgICB9CgogICAgICBpZiAoIWJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBib3VuZGluZ1NwaGVyZVJhZGl1czsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzID0gW107IC8vIFdvcmxkIHRyYW5zZm9ybWVkIHZlcnNpb24gb2YgLnZlcnRpY2VzCgogICAgICB0aGlzLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC5mYWNlTm9ybWFscwoKICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLnVuaXF1ZUF4ZXMgPSBheGVzID8gYXhlcy5zbGljZSgpIDogbnVsbDsKICAgICAgdGhpcy51bmlxdWVFZGdlcyA9IFtdOwogICAgICB0aGlzLmNvbXB1dGVFZGdlcygpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB1bmlxdWVFZGdlcwogICAgICovCgoKICAgIGNvbXB1dGVFZGdlcygpIHsKICAgICAgY29uc3QgZmFjZXMgPSB0aGlzLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIGNvbnN0IGVkZ2VzID0gdGhpcy51bmlxdWVFZGdlczsKICAgICAgZWRnZXMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgZWRnZSA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07CiAgICAgICAgY29uc3QgbnVtVmVydGljZXMgPSBmYWNlLmxlbmd0aDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IG51bVZlcnRpY2VzOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGsgPSAoaiArIDEpICUgbnVtVmVydGljZXM7CiAgICAgICAgICB2ZXJ0aWNlc1tmYWNlW2pdXS52c3ViKHZlcnRpY2VzW2ZhY2Vba11dLCBlZGdlKTsKICAgICAgICAgIGVkZ2Uubm9ybWFsaXplKCk7CiAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKCiAgICAgICAgICBmb3IgKGxldCBwID0gMDsgcCAhPT0gZWRnZXMubGVuZ3RoOyBwKyspIHsKICAgICAgICAgICAgaWYgKGVkZ2VzW3BdLmFsbW9zdEVxdWFscyhlZGdlKSB8fCBlZGdlc1twXS5hbG1vc3RFcXVhbHMoZWRnZSkpIHsKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICAgIGVkZ2VzLnB1c2goZWRnZS5jbG9uZSgpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuCiAgICAgKiBXaWxsIHJldXNlIGV4aXN0aW5nIFZlYzMgb2JqZWN0cyBpbiB0aGUgYGZhY2VOb3JtYWxzYCBhcnJheSBpZiB0aGV5IGV4aXN0LgogICAgICovCgoKICAgIGNvbXB1dGVOb3JtYWxzKCkgewogICAgICB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aCA9IHRoaXMuZmFjZXMubGVuZ3RoOyAvLyBHZW5lcmF0ZSBub3JtYWxzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBDaGVjayBzbyBhbGwgdmVydGljZXMgZXhpc3RzIGZvciB0aGlzIGZhY2UKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmICghdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldW2pdXSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZlcnRleCAke3RoaXMuZmFjZXNbaV1bal19IG5vdCBmb3VuZCFgKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGNvbnN0IG4gPSB0aGlzLmZhY2VOb3JtYWxzW2ldIHx8IG5ldyBWZWMzKCk7CiAgICAgICAgdGhpcy5nZXRGYWNlTm9ybWFsKGksIG4pOwogICAgICAgIG4ubmVnYXRlKG4pOwogICAgICAgIHRoaXMuZmFjZU5vcm1hbHNbaV0gPSBuOwogICAgICAgIGNvbnN0IHZlcnRleCA9IHRoaXMudmVydGljZXNbdGhpcy5mYWNlc1tpXVswXV07CgogICAgICAgIGlmIChuLmRvdCh2ZXJ0ZXgpIDwgMCkgewogICAgICAgICAgY29uc29sZS5lcnJvcihgLmZhY2VOb3JtYWxzWyR7aX1dID0gVmVjMygke24udG9TdHJpbmcoKX0pIGxvb2tzIGxpa2UgaXQgcG9pbnRzIGludG8gdGhlIHNoYXBlPyBUaGUgdmVydGljZXMgZm9sbG93LiBNYWtlIHN1cmUgdGhleSBhcmUgb3JkZXJlZCBDQ1cgYXJvdW5kIHRoZSBub3JtYWwsIHVzaW5nIHRoZSByaWdodCBoYW5kIHJ1bGUuYCk7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmZhY2VzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGNvbnNvbGUud2FybihgLnZlcnRpY2VzWyR7dGhpcy5mYWNlc1tpXVtqXX1dID0gVmVjMygke3RoaXMudmVydGljZXNbdGhpcy5mYWNlc1tpXVtqXV0udG9TdHJpbmcoKX0pYCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIG5vcm1hbCBvZiBhIGZhY2UgZnJvbSBpdHMgdmVydGljZXMKICAgICAqLwoKCiAgICBnZXRGYWNlTm9ybWFsKGksIHRhcmdldCkgewogICAgICBjb25zdCBmID0gdGhpcy5mYWNlc1tpXTsKICAgICAgY29uc3QgdmEgPSB0aGlzLnZlcnRpY2VzW2ZbMF1dOwogICAgICBjb25zdCB2YiA9IHRoaXMudmVydGljZXNbZlsxXV07CiAgICAgIGNvbnN0IHZjID0gdGhpcy52ZXJ0aWNlc1tmWzJdXTsKICAgICAgQ29udmV4UG9seWhlZHJvbi5jb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBmYWNlIG5vcm1hbCBnaXZlbiAzIHZlcnRpY2VzCiAgICAgKi8KCgogICAgc3RhdGljIGNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNiID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYWIgPSBuZXcgVmVjMygpOwogICAgICB2Yi52c3ViKHZhLCBhYik7CiAgICAgIHZjLnZzdWIodmIsIGNiKTsKICAgICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7CgogICAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkgewogICAgICAgIHRhcmdldC5ub3JtYWxpemUoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0gbWluRGlzdCBDbGFtcCBkaXN0YW5jZQogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgYW4gYXJyYXkgb2YgY29udGFjdCBwb2ludCBvYmplY3RzLCBzZWUgY2xpcEZhY2VBZ2FpbnN0SHVsbAogICAgICovCgoKICAgIGNsaXBBZ2FpbnN0SHVsbChwb3NBLCBxdWF0QSwgaHVsbEIsIHBvc0IsIHF1YXRCLCBzZXBhcmF0aW5nTm9ybWFsLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHsKICAgICAgY29uc3QgV29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICBsZXQgY2xvc2VzdEZhY2VCID0gLTE7CiAgICAgIGxldCBkbWF4ID0gLU51bWJlci5NQVhfVkFMVUU7CgogICAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGh1bGxCLmZhY2VzLmxlbmd0aDsgZmFjZSsrKSB7CiAgICAgICAgV29ybGROb3JtYWwuY29weShodWxsQi5mYWNlTm9ybWFsc1tmYWNlXSk7CiAgICAgICAgcXVhdEIudm11bHQoV29ybGROb3JtYWwsIFdvcmxkTm9ybWFsKTsKICAgICAgICBjb25zdCBkID0gV29ybGROb3JtYWwuZG90KHNlcGFyYXRpbmdOb3JtYWwpOwoKICAgICAgICBpZiAoZCA+IGRtYXgpIHsKICAgICAgICAgIGRtYXggPSBkOwogICAgICAgICAgY2xvc2VzdEZhY2VCID0gZmFjZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkVmVydHNCMSA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBodWxsQi5mYWNlc1tjbG9zZXN0RmFjZUJdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGh1bGxCLnZlcnRpY2VzW2h1bGxCLmZhY2VzW2Nsb3Nlc3RGYWNlQl1baV1dOwogICAgICAgIGNvbnN0IHdvcmxkYiA9IG5ldyBWZWMzKCk7CiAgICAgICAgd29ybGRiLmNvcHkoYik7CiAgICAgICAgcXVhdEIudm11bHQod29ybGRiLCB3b3JsZGIpOwogICAgICAgIHBvc0IudmFkZCh3b3JsZGIsIHdvcmxkYik7CiAgICAgICAgd29ybGRWZXJ0c0IxLnB1c2god29ybGRiKTsKICAgICAgfQoKICAgICAgaWYgKGNsb3Nlc3RGYWNlQiA+PSAwKSB7CiAgICAgICAgdGhpcy5jbGlwRmFjZUFnYWluc3RIdWxsKHNlcGFyYXRpbmdOb3JtYWwsIHBvc0EsIHF1YXRBLCB3b3JsZFZlcnRzQjEsIG1pbkRpc3QsIG1heERpc3QsIHJlc3VsdCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogRmluZCB0aGUgc2VwYXJhdGluZyBheGlzIGJldHdlZW4gdGhpcyBodWxsIGFuZCBhbm90aGVyCiAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgdmVjdG9yIHRvIHNhdmUgdGhlIGF4aXMgaW4KICAgICAqIEByZXR1cm4gUmV0dXJucyBmYWxzZSBpZiBhIHNlcGFyYXRpb24gaXMgZm91bmQsIGVsc2UgdHJ1ZQogICAgICovCgoKICAgIGZpbmRTZXBhcmF0aW5nQXhpcyhodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCLCB0YXJnZXQsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSB7CiAgICAgIGNvbnN0IGZhY2VBTm9ybWFsV1MzID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgV29ybGRub3JtYWwxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgZGVsdGFDID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgd29ybGRFZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkRWRnZTEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBDcm9zcyA9IG5ldyBWZWMzKCk7CiAgICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgICAgY29uc3QgaHVsbEEgPSB0aGlzOwoKICAgICAgaWYgKCFodWxsQS51bmlxdWVBeGVzKSB7CiAgICAgICAgY29uc3QgbnVtRmFjZXNBID0gZmFjZUxpc3RBID8gZmFjZUxpc3RBLmxlbmd0aCA6IGh1bGxBLmZhY2VzLmxlbmd0aDsgLy8gVGVzdCBmYWNlIG5vcm1hbHMgZnJvbSBodWxsQQoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQTsgaSsrKSB7CiAgICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0QSA/IGZhY2VMaXN0QVtpXSA6IGk7IC8vIEdldCB3b3JsZCBmYWNlIG5vcm1hbAoKICAgICAgICAgIGZhY2VBTm9ybWFsV1MzLmNvcHkoaHVsbEEuZmFjZU5vcm1hbHNbZmldKTsKICAgICAgICAgIHF1YXRBLnZtdWx0KGZhY2VBTm9ybWFsV1MzLCBmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoZmFjZUFOb3JtYWxXUzMsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gaHVsbEEudW5pcXVlQXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgLy8gR2V0IHdvcmxkIGF4aXMKICAgICAgICAgIHF1YXRBLnZtdWx0KGh1bGxBLnVuaXF1ZUF4ZXNbaV0sIGZhY2VBTm9ybWFsV1MzKTsKICAgICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhmYWNlQU5vcm1hbFdTMywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KGZhY2VBTm9ybWFsV1MzKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghaHVsbEIudW5pcXVlQXhlcykgewogICAgICAgIC8vIFRlc3QgZmFjZSBub3JtYWxzIGZyb20gaHVsbEIKICAgICAgICBjb25zdCBudW1GYWNlc0IgPSBmYWNlTGlzdEIgPyBmYWNlTGlzdEIubGVuZ3RoIDogaHVsbEIuZmFjZXMubGVuZ3RoOwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQjsgaSsrKSB7CiAgICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0QiA/IGZhY2VMaXN0QltpXSA6IGk7CiAgICAgICAgICBXb3JsZG5vcm1hbDEuY29weShodWxsQi5mYWNlTm9ybWFsc1tmaV0pOwogICAgICAgICAgcXVhdEIudm11bHQoV29ybGRub3JtYWwxLCBXb3JsZG5vcm1hbDEpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KFdvcmxkbm9ybWFsMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMgaW4gQgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBodWxsQi51bmlxdWVBeGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBxdWF0Qi52bXVsdChodWxsQi51bmlxdWVBeGVzW2ldLCBXb3JsZG5vcm1hbDEpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KFdvcmxkbm9ybWFsMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIFRlc3QgZWRnZXMKCgogICAgICBmb3IgKGxldCBlMCA9IDA7IGUwICE9PSBodWxsQS51bmlxdWVFZGdlcy5sZW5ndGg7IGUwKyspIHsKICAgICAgICAvLyBHZXQgd29ybGQgZWRnZQogICAgICAgIHF1YXRBLnZtdWx0KGh1bGxBLnVuaXF1ZUVkZ2VzW2UwXSwgd29ybGRFZGdlMCk7CgogICAgICAgIGZvciAobGV0IGUxID0gMDsgZTEgIT09IGh1bGxCLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgZTErKykgewogICAgICAgICAgLy8gR2V0IHdvcmxkIGVkZ2UgMgogICAgICAgICAgcXVhdEIudm11bHQoaHVsbEIudW5pcXVlRWRnZXNbZTFdLCB3b3JsZEVkZ2UxKTsKICAgICAgICAgIHdvcmxkRWRnZTAuY3Jvc3Mod29ybGRFZGdlMSwgQ3Jvc3MpOwoKICAgICAgICAgIGlmICghQ3Jvc3MuYWxtb3N0WmVybygpKSB7CiAgICAgICAgICAgIENyb3NzLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBjb25zdCBkaXN0ID0gaHVsbEEudGVzdFNlcEF4aXMoQ3Jvc3MsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgICAgaWYgKGRpc3QgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZGlzdCA8IGRtaW4pIHsKICAgICAgICAgICAgICBkbWluID0gZGlzdDsKICAgICAgICAgICAgICB0YXJnZXQuY29weShDcm9zcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHBvc0IudnN1Yihwb3NBLCBkZWx0YUMpOwoKICAgICAgaWYgKGRlbHRhQy5kb3QodGFyZ2V0KSA+IDAuMCkgewogICAgICAgIHRhcmdldC5uZWdhdGUodGFyZ2V0KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIFRlc3Qgc2VwYXJhdGluZyBheGlzIGFnYWluc3QgdHdvIGh1bGxzLiBCb3RoIGh1bGxzIGFyZSBwcm9qZWN0ZWQgb250byB0aGUgYXhpcyBhbmQgdGhlIG92ZXJsYXAgc2l6ZSBpcyByZXR1cm5lZCBpZiB0aGVyZSBpcyBvbmUuCiAgICAgKiBAcmV0dXJuIFRoZSBvdmVybGFwIGRlcHRoLCBvciBGQUxTRSBpZiBubyBwZW5ldHJhdGlvbi4KICAgICAqLwoKCiAgICB0ZXN0U2VwQXhpcyhheGlzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKSB7CiAgICAgIGNvbnN0IGh1bGxBID0gdGhpczsKICAgICAgQ29udmV4UG9seWhlZHJvbi5wcm9qZWN0KGh1bGxBLCBheGlzLCBwb3NBLCBxdWF0QSwgbWF4bWluQSk7CiAgICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQiwgYXhpcywgcG9zQiwgcXVhdEIsIG1heG1pbkIpOwogICAgICBjb25zdCBtYXhBID0gbWF4bWluQVswXTsKICAgICAgY29uc3QgbWluQSA9IG1heG1pbkFbMV07CiAgICAgIGNvbnN0IG1heEIgPSBtYXhtaW5CWzBdOwogICAgICBjb25zdCBtaW5CID0gbWF4bWluQlsxXTsKCiAgICAgIGlmIChtYXhBIDwgbWluQiB8fCBtYXhCIDwgbWluQSkgewogICAgICAgIHJldHVybiBmYWxzZTsgLy8gU2VwYXJhdGVkCiAgICAgIH0KCiAgICAgIGNvbnN0IGQwID0gbWF4QSAtIG1pbkI7CiAgICAgIGNvbnN0IGQxID0gbWF4QiAtIG1pbkE7CiAgICAgIGNvbnN0IGRlcHRoID0gZDAgPCBkMSA/IGQwIDogZDE7CiAgICAgIHJldHVybiBkZXB0aDsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlTG9jYWxJbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGJveCBpbmVydGlhCiAgICAgIC8vIEV4YWN0IGluZXJ0aWEgY2FsY3VsYXRpb24gaXMgb3ZlcmtpbGwsIGJ1dCBzZWUgaHR0cDovL2dlb21ldHJpY3Rvb2xzLmNvbS9Eb2N1bWVudGF0aW9uL1BvbHloZWRyYWxNYXNzUHJvcGVydGllcy5wZGYgZm9yIHRoZSBjb3JyZWN0IHdheSB0byBkbyBpdAogICAgICBjb25zdCBhYWJibWF4ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYWFiYm1pbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29tcHV0ZUxvY2FsQUFCQihhYWJibWluLCBhYWJibWF4KTsKICAgICAgY29uc3QgeCA9IGFhYmJtYXgueCAtIGFhYmJtaW4ueDsKICAgICAgY29uc3QgeSA9IGFhYmJtYXgueSAtIGFhYmJtaW4ueTsKICAgICAgY29uc3QgeiA9IGFhYmJtYXgueiAtIGFhYmJtaW4uejsKICAgICAgdGFyZ2V0LnggPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeik7CiAgICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHggKiAyICogeCArIDIgKiB6ICogMiAqIHopOwogICAgICB0YXJnZXQueiA9IDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB5ICogMiAqIHkgKyAyICogeCAqIDIgKiB4KTsKICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIGZhY2VfaSBJbmRleCBvZiB0aGUgZmFjZQogICAgICovCgoKICAgIGdldFBsYW5lQ29uc3RhbnRPZkZhY2UoZmFjZV9pKSB7CiAgICAgIGNvbnN0IGYgPSB0aGlzLmZhY2VzW2ZhY2VfaV07CiAgICAgIGNvbnN0IG4gPSB0aGlzLmZhY2VOb3JtYWxzW2ZhY2VfaV07CiAgICAgIGNvbnN0IHYgPSB0aGlzLnZlcnRpY2VzW2ZbMF1dOwogICAgICBjb25zdCBjID0gLW4uZG90KHYpOwogICAgICByZXR1cm4gYzsKICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgYWdhaW5zdCBhIGh1bGwuCiAgICAgKiBAcGFyYW0gd29ybGRWZXJ0c0IxIEFuIGFycmF5IG9mIFZlYzMgd2l0aCB2ZXJ0aWNlcyBpbiB0aGUgd29ybGQgZnJhbWUuCiAgICAgKiBAcGFyYW0gbWluRGlzdCBEaXN0YW5jZSBjbGFtcGluZwogICAgICogQHBhcmFtIEFycmF5IHJlc3VsdCBBcnJheSB0byBzdG9yZSByZXN1bHRpbmcgY29udGFjdCBwb2ludHMgaW4uIFdpbGwgYmUgb2JqZWN0cyB3aXRoIHByb3BlcnRpZXM6IHBvaW50LCBkZXB0aCwgbm9ybWFsLiBUaGVzZSBhcmUgcmVwcmVzZW50ZWQgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0SHVsbChzZXBhcmF0aW5nTm9ybWFsLCBwb3NBLCBxdWF0QSwgd29ybGRWZXJ0c0IxLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHsKICAgICAgY29uc3QgZmFjZUFOb3JtYWxXUyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGVkZ2UwID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgV29ybGRFZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkUGxhbmVBbm9ybWFsMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBsYW5lTm9ybWFsV1MxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgd29ybGRBMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGxvY2FsUGxhbmVOb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBwbGFuZU5vcm1hbFdTID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaHVsbEEgPSB0aGlzOwogICAgICBjb25zdCB3b3JsZFZlcnRzQjIgPSBbXTsKICAgICAgY29uc3QgcFZ0eEluID0gd29ybGRWZXJ0c0IxOwogICAgICBjb25zdCBwVnR4T3V0ID0gd29ybGRWZXJ0c0IyOwogICAgICBsZXQgY2xvc2VzdEZhY2VBID0gLTE7CiAgICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsgLy8gRmluZCB0aGUgZmFjZSB3aXRoIG5vcm1hbCBjbG9zZXN0IHRvIHRoZSBzZXBhcmF0aW5nIGF4aXMKCiAgICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgaHVsbEEuZmFjZXMubGVuZ3RoOyBmYWNlKyspIHsKICAgICAgICBmYWNlQU5vcm1hbFdTLmNvcHkoaHVsbEEuZmFjZU5vcm1hbHNbZmFjZV0pOwogICAgICAgIHF1YXRBLnZtdWx0KGZhY2VBTm9ybWFsV1MsIGZhY2VBTm9ybWFsV1MpOwogICAgICAgIGNvbnN0IGQgPSBmYWNlQU5vcm1hbFdTLmRvdChzZXBhcmF0aW5nTm9ybWFsKTsKCiAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICBkbWluID0gZDsKICAgICAgICAgIGNsb3Nlc3RGYWNlQSA9IGZhY2U7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoY2xvc2VzdEZhY2VBIDwgMCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBHZXQgdGhlIGZhY2UgYW5kIGNvbnN0cnVjdCBjb25uZWN0ZWQgZmFjZXMKCgogICAgICBjb25zdCBwb2x5QSA9IGh1bGxBLmZhY2VzW2Nsb3Nlc3RGYWNlQV07CiAgICAgIHBvbHlBLmNvbm5lY3RlZEZhY2VzID0gW107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bGxBLmZhY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBodWxsQS5mYWNlc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgaWYgKAogICAgICAgICAgLyogU2hhcmluZyBhIHZlcnRleCovCiAgICAgICAgICBwb2x5QS5pbmRleE9mKGh1bGxBLmZhY2VzW2ldW2pdKSAhPT0gLTEgJiYKICAgICAgICAgIC8qIE5vdCB0aGUgb25lIHdlIGFyZSBsb29raW5nIGZvciBjb25uZWN0aW9ucyBmcm9tICovCiAgICAgICAgICBpICE9PSBjbG9zZXN0RmFjZUEgJiYKICAgICAgICAgIC8qIE5vdCBhbHJlYWR5IGFkZGVkICovCiAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5pbmRleE9mKGkpID09PSAtMSkgewogICAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5wdXNoKGkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBDbGlwIHRoZSBwb2x5Z29uIHRvIHRoZSBiYWNrIG9mIHRoZSBwbGFuZXMgb2YgYWxsIGZhY2VzIG9mIGh1bGwgQSwKICAgICAgLy8gdGhhdCBhcmUgYWRqYWNlbnQgdG8gdGhlIHdpdG5lc3MgZmFjZQoKCiAgICAgIGNvbnN0IG51bVZlcnRpY2VzQSA9IHBvbHlBLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVmVydGljZXNBOyBpKyspIHsKICAgICAgICBjb25zdCBhID0gaHVsbEEudmVydGljZXNbcG9seUFbaV1dOwogICAgICAgIGNvbnN0IGIgPSBodWxsQS52ZXJ0aWNlc1twb2x5QVsoaSArIDEpICUgbnVtVmVydGljZXNBXV07CiAgICAgICAgYS52c3ViKGIsIGVkZ2UwKTsKICAgICAgICBXb3JsZEVkZ2UwLmNvcHkoZWRnZTApOwogICAgICAgIHF1YXRBLnZtdWx0KFdvcmxkRWRnZTAsIFdvcmxkRWRnZTApOwogICAgICAgIHBvc0EudmFkZChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTsKICAgICAgICB3b3JsZFBsYW5lQW5vcm1hbDEuY29weSh0aGlzLmZhY2VOb3JtYWxzW2Nsb3Nlc3RGYWNlQV0pOwogICAgICAgIHF1YXRBLnZtdWx0KHdvcmxkUGxhbmVBbm9ybWFsMSwgd29ybGRQbGFuZUFub3JtYWwxKTsKICAgICAgICBwb3NBLnZhZGQod29ybGRQbGFuZUFub3JtYWwxLCB3b3JsZFBsYW5lQW5vcm1hbDEpOwogICAgICAgIFdvcmxkRWRnZTAuY3Jvc3Mod29ybGRQbGFuZUFub3JtYWwxLCBwbGFuZU5vcm1hbFdTMSk7CiAgICAgICAgcGxhbmVOb3JtYWxXUzEubmVnYXRlKHBsYW5lTm9ybWFsV1MxKTsKICAgICAgICB3b3JsZEExLmNvcHkoYSk7CiAgICAgICAgcXVhdEEudm11bHQod29ybGRBMSwgd29ybGRBMSk7CiAgICAgICAgcG9zQS52YWRkKHdvcmxkQTEsIHdvcmxkQTEpOwogICAgICAgIGNvbnN0IG90aGVyRmFjZSA9IHBvbHlBLmNvbm5lY3RlZEZhY2VzW2ldOwogICAgICAgIGxvY2FsUGxhbmVOb3JtYWwuY29weSh0aGlzLmZhY2VOb3JtYWxzW290aGVyRmFjZV0pOwogICAgICAgIGNvbnN0IGxvY2FsUGxhbmVFcSA9IHRoaXMuZ2V0UGxhbmVDb25zdGFudE9mRmFjZShvdGhlckZhY2UpOwogICAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTsKICAgICAgICBxdWF0QS52bXVsdChwbGFuZU5vcm1hbFdTLCBwbGFuZU5vcm1hbFdTKTsKICAgICAgICBjb25zdCBwbGFuZUVxV1MgPSBsb2NhbFBsYW5lRXEgLSBwbGFuZU5vcm1hbFdTLmRvdChwb3NBKTsgLy8gQ2xpcCBmYWNlIGFnYWluc3Qgb3VyIGNvbnN0cnVjdGVkIHBsYW5lCgogICAgICAgIHRoaXMuY2xpcEZhY2VBZ2FpbnN0UGxhbmUocFZ0eEluLCBwVnR4T3V0LCBwbGFuZU5vcm1hbFdTLCBwbGFuZUVxV1MpOyAvLyBUaHJvdyBhd2F5IGFsbCBjbGlwcGVkIHBvaW50cywgYnV0IHNhdmUgdGhlIHJlbWFpbmluZyB1bnRpbCBuZXh0IGNsaXAKCiAgICAgICAgd2hpbGUgKHBWdHhJbi5sZW5ndGgpIHsKICAgICAgICAgIHBWdHhJbi5zaGlmdCgpOwogICAgICAgIH0KCiAgICAgICAgd2hpbGUgKHBWdHhPdXQubGVuZ3RoKSB7CiAgICAgICAgICBwVnR4SW4ucHVzaChwVnR4T3V0LnNoaWZ0KCkpOwogICAgICAgIH0KICAgICAgfSAvLyBvbmx5IGtlZXAgY29udGFjdCBwb2ludHMgdGhhdCBhcmUgYmVoaW5kIHRoZSB3aXRuZXNzIGZhY2UKCgogICAgICBsb2NhbFBsYW5lTm9ybWFsLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tjbG9zZXN0RmFjZUFdKTsKICAgICAgY29uc3QgbG9jYWxQbGFuZUVxID0gdGhpcy5nZXRQbGFuZUNvbnN0YW50T2ZGYWNlKGNsb3Nlc3RGYWNlQSk7CiAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTsKICAgICAgcXVhdEEudm11bHQocGxhbmVOb3JtYWxXUywgcGxhbmVOb3JtYWxXUyk7CiAgICAgIGNvbnN0IHBsYW5lRXFXUyA9IGxvY2FsUGxhbmVFcSAtIHBsYW5lTm9ybWFsV1MuZG90KHBvc0EpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwVnR4SW4ubGVuZ3RoOyBpKyspIHsKICAgICAgICBsZXQgZGVwdGggPSBwbGFuZU5vcm1hbFdTLmRvdChwVnR4SW5baV0pICsgcGxhbmVFcVdTOyAvLyA/Pz8KCiAgICAgICAgaWYgKGRlcHRoIDw9IG1pbkRpc3QpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBjbGFtcGVkOiBkZXB0aD0ke2RlcHRofSB0byBtaW5EaXN0PSR7bWluRGlzdH1gKTsKICAgICAgICAgIGRlcHRoID0gbWluRGlzdDsKICAgICAgICB9CgogICAgICAgIGlmIChkZXB0aCA8PSBtYXhEaXN0KSB7CiAgICAgICAgICBjb25zdCBwb2ludCA9IHBWdHhJbltpXTsKCiAgICAgICAgICBpZiAoZGVwdGggPD0gMWUtNikgewogICAgICAgICAgICBjb25zdCBwID0gewogICAgICAgICAgICAgIHBvaW50LAogICAgICAgICAgICAgIG5vcm1hbDogcGxhbmVOb3JtYWxXUywKICAgICAgICAgICAgICBkZXB0aAogICAgICAgICAgICB9OwogICAgICAgICAgICByZXN1bHQucHVzaChwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgaW4gYSBodWxsIGFnYWluc3QgdGhlIGJhY2sgb2YgYSBwbGFuZS4KICAgICAqIEBwYXJhbSBwbGFuZUNvbnN0YW50IFRoZSBjb25zdGFudCBpbiB0aGUgbWF0aGVtYXRpY2FsIHBsYW5lIGVxdWF0aW9uCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0UGxhbmUoaW5WZXJ0aWNlcywgb3V0VmVydGljZXMsIHBsYW5lTm9ybWFsLCBwbGFuZUNvbnN0YW50KSB7CiAgICAgIGxldCBuX2RvdF9maXJzdDsKICAgICAgbGV0IG5fZG90X2xhc3Q7CiAgICAgIGNvbnN0IG51bVZlcnRzID0gaW5WZXJ0aWNlcy5sZW5ndGg7CgogICAgICBpZiAobnVtVmVydHMgPCAyKSB7CiAgICAgICAgcmV0dXJuIG91dFZlcnRpY2VzOwogICAgICB9CgogICAgICBsZXQgZmlyc3RWZXJ0ZXggPSBpblZlcnRpY2VzW2luVmVydGljZXMubGVuZ3RoIC0gMV07CiAgICAgIGxldCBsYXN0VmVydGV4ID0gaW5WZXJ0aWNlc1swXTsKICAgICAgbl9kb3RfZmlyc3QgPSBwbGFuZU5vcm1hbC5kb3QoZmlyc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgIGZvciAobGV0IHZpID0gMDsgdmkgPCBudW1WZXJ0czsgdmkrKykgewogICAgICAgIGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzW3ZpXTsKICAgICAgICBuX2RvdF9sYXN0ID0gcGxhbmVOb3JtYWwuZG90KGxhc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgICAgaWYgKG5fZG90X2ZpcnN0IDwgMCkgewogICAgICAgICAgaWYgKG5fZG90X2xhc3QgPCAwKSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kIDwgMCwgc28gb3V0cHV0IGxhc3RWZXJ0ZXgKICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIG5ld3YuY29weShsYXN0VmVydGV4KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kID49IDAsIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24KICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIGZpcnN0VmVydGV4LmxlcnAobGFzdFZlcnRleCwgbl9kb3RfZmlyc3QgLyAobl9kb3RfZmlyc3QgLSBuX2RvdF9sYXN0KSwgbmV3dik7CiAgICAgICAgICAgIG91dFZlcnRpY2VzLnB1c2gobmV3dik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChuX2RvdF9sYXN0IDwgMCkgewogICAgICAgICAgICAvLyBTdGFydCA+PSAwLCBlbmQgPCAwIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24gYW5kIGVuZAogICAgICAgICAgICBjb25zdCBuZXd2ID0gbmV3IFZlYzMoKTsKICAgICAgICAgICAgZmlyc3RWZXJ0ZXgubGVycChsYXN0VmVydGV4LCBuX2RvdF9maXJzdCAvIChuX2RvdF9maXJzdCAtIG5fZG90X2xhc3QpLCBuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChsYXN0VmVydGV4KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZpcnN0VmVydGV4ID0gbGFzdFZlcnRleDsKICAgICAgICBuX2RvdF9maXJzdCA9IG5fZG90X2xhc3Q7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXRWZXJ0aWNlczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgLndvcmxkVmVydGljZXNgIGFuZCBzZXRzIGAud29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlYCB0byBmYWxzZS4KICAgICAqLwoKCiAgICBjb21wdXRlV29ybGRWZXJ0aWNlcyhwb3NpdGlvbiwgcXVhdCkgewogICAgICB3aGlsZSAodGhpcy53b3JsZFZlcnRpY2VzLmxlbmd0aCA8IHRoaXMudmVydGljZXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy53b3JsZFZlcnRpY2VzLnB1c2gobmV3IFZlYzMoKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3Qgd29ybGRWZXJ0cyA9IHRoaXMud29ybGRWZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcXVhdC52bXVsdCh2ZXJ0c1tpXSwgd29ybGRWZXJ0c1tpXSk7CiAgICAgICAgcG9zaXRpb24udmFkZCh3b3JsZFZlcnRzW2ldLCB3b3JsZFZlcnRzW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KCiAgICBjb21wdXRlTG9jYWxBQUJCKGFhYmJtaW4sIGFhYmJtYXgpIHsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBhYWJibWluLnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgYWFiYm1heC5zZXQoLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gdmVydGljZXNbaV07CgogICAgICAgIGlmICh2LnggPCBhYWJibWluLngpIHsKICAgICAgICAgIGFhYmJtaW4ueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IGFhYmJtYXgueCkgewogICAgICAgICAgYWFiYm1heC54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGFhYmJtaW4ueSkgewogICAgICAgICAgYWFiYm1pbi55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gYWFiYm1heC55KSB7CiAgICAgICAgICBhYWJibWF4LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgYWFiYm1pbi56KSB7CiAgICAgICAgICBhYWJibWluLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiBhYWJibWF4LnopIHsKICAgICAgICAgIGFhYmJtYXgueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgd29ybGRWZXJ0aWNlc2AgYW5kIHNldHMgYHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuCiAgICAgKi8KCgogICAgY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocXVhdCkgewogICAgICBjb25zdCBOID0gdGhpcy5mYWNlTm9ybWFscy5sZW5ndGg7CgogICAgICB3aGlsZSAodGhpcy53b3JsZEZhY2VOb3JtYWxzLmxlbmd0aCA8IE4pIHsKICAgICAgICB0aGlzLndvcmxkRmFjZU5vcm1hbHMucHVzaChuZXcgVmVjMygpKTsKICAgICAgfQoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuZmFjZU5vcm1hbHM7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFscyA9IHRoaXMud29ybGRGYWNlTm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBxdWF0LnZtdWx0KG5vcm1hbHNbaV0sIHdvcmxkTm9ybWFsc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXIKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBub3JtMiA9IHZlcnRzW2ldLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBsZXQgbWlueDsKICAgICAgbGV0IG1pbnk7CiAgICAgIGxldCBtaW56OwogICAgICBsZXQgbWF4eDsKICAgICAgbGV0IG1heHk7CiAgICAgIGxldCBtYXh6OwogICAgICBsZXQgdGVtcFdvcmxkVmVydGV4ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0ZW1wV29ybGRWZXJ0ZXguY29weSh2ZXJ0c1tpXSk7CiAgICAgICAgcXVhdC52bXVsdCh0ZW1wV29ybGRWZXJ0ZXgsIHRlbXBXb3JsZFZlcnRleCk7CiAgICAgICAgcG9zLnZhZGQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpOwogICAgICAgIGNvbnN0IHYgPSB0ZW1wV29ybGRWZXJ0ZXg7CgogICAgICAgIGlmIChtaW54ID09PSB1bmRlZmluZWQgfHwgdi54IDwgbWlueCkgewogICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh4ID09PSB1bmRlZmluZWQgfHwgdi54ID4gbWF4eCkgewogICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtaW55ID09PSB1bmRlZmluZWQgfHwgdi55IDwgbWlueSkgewogICAgICAgICAgbWlueSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh5ID09PSB1bmRlZmluZWQgfHwgdi55ID4gbWF4eSkgewogICAgICAgICAgbWF4eSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtaW56ID09PSB1bmRlZmluZWQgfHwgdi56IDwgbWlueikgewogICAgICAgICAgbWlueiA9IHYuejsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh6ID09PSB1bmRlZmluZWQgfHwgdi56ID4gbWF4eikgewogICAgICAgICAgbWF4eiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1pbi5zZXQobWlueCwgbWlueSwgbWlueik7CiAgICAgIG1heC5zZXQobWF4eCwgbWF4eSwgbWF4eik7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhcHByb3hpbWF0ZSBjb252ZXggdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBhdmVyYWdlIG9mIGFsbCB0aGUgdmVydGljZXMgcG9zaXRpb25zCiAgICAgKi8KCgogICAgZ2V0QXZlcmFnZVBvaW50TG9jYWwodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0YXJnZXQudmFkZCh2ZXJ0c1tpXSwgdGFyZ2V0KTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNjYWxlKDEgLyB2ZXJ0cy5sZW5ndGgsIHRhcmdldCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zZm9ybSBhbGwgbG9jYWwgcG9pbnRzLiBXaWxsIGNoYW5nZSB0aGUgLnZlcnRpY2VzCiAgICAgKi8KCgogICAgdHJhbnNmb3JtQWxsUG9pbnRzKG9mZnNldCwgcXVhdCkgewogICAgICBjb25zdCBuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7CiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsgLy8gQXBwbHkgcm90YXRpb24KCiAgICAgIGlmIChxdWF0KSB7CiAgICAgICAgLy8gUm90YXRlIHZlcnRpY2VzCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTsKICAgICAgICAgIHF1YXQudm11bHQodiwgdik7CiAgICAgICAgfSAvLyBSb3RhdGUgZmFjZSBub3JtYWxzCgoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLmZhY2VOb3JtYWxzW2ldOwogICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTsKICAgICAgICB9CiAgICAgICAgLyoKICAgICAgICAgICAgICAvLyBSb3RhdGUgZWRnZXMKICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMudW5pcXVlRWRnZXNbaV07CiAgICAgICAgICAgICAgICAgIHF1YXQudm11bHQodix2KTsKICAgICAgICAgICAgICB9Ki8KCiAgICAgIH0gLy8gQXBwbHkgb2Zmc2V0CgoKICAgICAgaWYgKG9mZnNldCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICBjb25zdCB2ID0gdmVydHNbaV07CiAgICAgICAgICB2LnZhZGQob2Zmc2V0LCB2KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2tzIHdoZXRoZXIgcCBpcyBpbnNpZGUgdGhlIHBvbHloZWRyYS4gTXVzdCBiZSBpbiBsb2NhbCBjb29yZHMuCiAgICAgKiBUaGUgcG9pbnQgbGllcyBvdXRzaWRlIG9mIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgb3RoZXIgcG9pbnRzIGlmIGFuZCBvbmx5IGlmIHRoZSBkaXJlY3Rpb24KICAgICAqIG9mIGFsbCB0aGUgdmVjdG9ycyBmcm9tIGl0IHRvIHRob3NlIG90aGVyIHBvaW50cyBhcmUgb24gbGVzcyB0aGFuIG9uZSBoYWxmIG9mIGEgc3BoZXJlIGFyb3VuZCBpdC4KICAgICAqIEBwYXJhbSBwIEEgcG9pbnQgZ2l2ZW4gaW4gbG9jYWwgY29vcmRpbmF0ZXMKICAgICAqLwoKCiAgICBwb2ludElzSW5zaWRlKHApIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCBmYWNlcyA9IHRoaXMuZmFjZXM7CiAgICAgIGNvbnN0IG5vcm1hbHMgPSB0aGlzLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBwb3NpdGl2ZVJlc3VsdCA9IG51bGw7CiAgICAgIGNvbnN0IHBvaW50SW5zaWRlID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5nZXRBdmVyYWdlUG9pbnRMb2NhbChwb2ludEluc2lkZSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBsZXQgbiA9IG5vcm1hbHNbaV07CiAgICAgICAgY29uc3QgdiA9IHZlcnRzW2ZhY2VzW2ldWzBdXTsgLy8gV2Ugb25seSBuZWVkIG9uZSBwb2ludCBpbiB0aGUgZmFjZQogICAgICAgIC8vIFRoaXMgZG90IHByb2R1Y3QgZGV0ZXJtaW5lcyB3aGljaCBzaWRlIG9mIHRoZSBlZGdlIHRoZSBwb2ludCBpcwoKICAgICAgICBjb25zdCB2VG9QID0gbmV3IFZlYzMoKTsKICAgICAgICBwLnZzdWIodiwgdlRvUCk7CiAgICAgICAgY29uc3QgcjEgPSBuLmRvdCh2VG9QKTsKICAgICAgICBjb25zdCB2VG9Qb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7CiAgICAgICAgcG9pbnRJbnNpZGUudnN1Yih2LCB2VG9Qb2ludEluc2lkZSk7CiAgICAgICAgY29uc3QgcjIgPSBuLmRvdCh2VG9Qb2ludEluc2lkZSk7CgogICAgICAgIGlmIChyMSA8IDAgJiYgcjIgPiAwIHx8IHIxID4gMCAmJiByMiA8IDApIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gRW5jb3VudGVyZWQgc29tZSBvdGhlciBzaWduLiBFeGl0LgogICAgICAgIH0KICAgICAgfSAvLyBJZiB3ZSBnb3QgaGVyZSwgYWxsIGRvdCBwcm9kdWN0cyB3ZXJlIG9mIHRoZSBzYW1lIHNpZ24uCgoKICAgICAgcmV0dXJuIHBvc2l0aXZlUmVzdWx0ID8gMSA6IC0xOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgbWF4IGFuZCBtaW4gZG90IHByb2R1Y3Qgb2YgYSBjb252ZXggaHVsbCBhdCBwb3NpdGlvbiAocG9zLHF1YXQpIHByb2plY3RlZCBvbnRvIGFuIGF4aXMuCiAgICAgKiBSZXN1bHRzIGFyZSBzYXZlZCBpbiB0aGUgYXJyYXkgbWF4bWluLgogICAgICogQHBhcmFtIHJlc3VsdCByZXN1bHRbMF0gYW5kIHJlc3VsdFsxXSB3aWxsIGJlIHNldCB0byBtYXhpbXVtIGFuZCBtaW5pbXVtLCByZXNwZWN0aXZlbHkuCiAgICAgKi8KCgogICAgc3RhdGljIHByb2plY3Qoc2hhcGUsIGF4aXMsIHBvcywgcXVhdCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IG4gPSBzaGFwZS52ZXJ0aWNlcy5sZW5ndGg7CiAgICAgIGNvbnN0IGxvY2FsQXhpcyA9IHByb2plY3RfbG9jYWxBeGlzOwogICAgICBsZXQgbWF4ID0gMDsKICAgICAgbGV0IG1pbiA9IDA7CiAgICAgIGNvbnN0IGxvY2FsT3JpZ2luID0gcHJvamVjdF9sb2NhbE9yaWdpbjsKICAgICAgY29uc3QgdnMgPSBzaGFwZS52ZXJ0aWNlczsKICAgICAgbG9jYWxPcmlnaW4uc2V0WmVybygpOyAvLyBUcmFuc2Zvcm0gdGhlIGF4aXMgdG8gbG9jYWwKCiAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb0xvY2FsRnJhbWUocG9zLCBxdWF0LCBheGlzLCBsb2NhbEF4aXMpOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zLCBxdWF0LCBsb2NhbE9yaWdpbiwgbG9jYWxPcmlnaW4pOwogICAgICBjb25zdCBhZGQgPSBsb2NhbE9yaWdpbi5kb3QobG9jYWxBeGlzKTsKICAgICAgbWluID0gbWF4ID0gdnNbMF0uZG90KGxvY2FsQXhpcyk7CgogICAgICBmb3IgKGxldCBpID0gMTsgaSA8IG47IGkrKykgewogICAgICAgIGNvbnN0IHZhbCA9IHZzW2ldLmRvdChsb2NhbEF4aXMpOwoKICAgICAgICBpZiAodmFsID4gbWF4KSB7CiAgICAgICAgICBtYXggPSB2YWw7CiAgICAgICAgfQoKICAgICAgICBpZiAodmFsIDwgbWluKSB7CiAgICAgICAgICBtaW4gPSB2YWw7CiAgICAgICAgfQogICAgICB9CgogICAgICBtaW4gLT0gYWRkOwogICAgICBtYXggLT0gYWRkOwoKICAgICAgaWYgKG1pbiA+IG1heCkgewogICAgICAgIC8vIEluY29uc2lzdGVudCAtIHN3YXAKICAgICAgICBjb25zdCB0ZW1wID0gbWluOwogICAgICAgIG1pbiA9IG1heDsKICAgICAgICBtYXggPSB0ZW1wOwogICAgICB9IC8vIE91dHB1dAoKCiAgICAgIHJlc3VsdFswXSA9IG1heDsKICAgICAgcmVzdWx0WzFdID0gbWluOwogICAgfQoKICB9CiAgY29uc3QgbWF4bWluQSA9IFtdOwogIGNvbnN0IG1heG1pbkIgPSBbXTsKICBuZXcgVmVjMygpOwogIGNvbnN0IHByb2plY3RfbG9jYWxBeGlzID0gbmV3IFZlYzMoKTsKICBjb25zdCBwcm9qZWN0X2xvY2FsT3JpZ2luID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQSAzZCBib3ggc2hhcGUuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3Qgc2l6ZSA9IDEKICAgKiAgICAgY29uc3QgaGFsZkV4dGVudHMgPSBuZXcgQ0FOTk9OLlZlYzMoc2l6ZSwgc2l6ZSwgc2l6ZSkKICAgKiAgICAgY29uc3QgYm94U2hhcGUgPSBuZXcgQ0FOTk9OLkJveChoYWxmRXh0ZW50cykKICAgKiAgICAgY29uc3QgYm94Qm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBib3hTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJveEJvZHkpCiAgICovCiAgY2xhc3MgQm94IGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiBUaGUgaGFsZiBleHRlbnRzIG9mIHRoZSBib3guCiAgICAgKi8KCiAgICAvKioKICAgICAqIFVzZWQgYnkgdGhlIGNvbnRhY3QgZ2VuZXJhdG9yIHRvIG1ha2UgY29udGFjdHMgd2l0aCBvdGhlciBjb252ZXggcG9seWhlZHJhIGZvciBleGFtcGxlLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihoYWxmRXh0ZW50cykgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuQk9YCiAgICAgIH0pOwogICAgICB0aGlzLmhhbGZFeHRlbnRzID0gaGFsZkV4dGVudHM7CiAgICAgIHRoaXMuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uID0gbnVsbDsKICAgICAgdGhpcy51cGRhdGVDb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24oKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGVzIHRoZSBsb2NhbCBjb252ZXggcG9seWhlZHJvbiByZXByZXNlbnRhdGlvbiB1c2VkIGZvciBzb21lIGNvbGxpc2lvbnMuCiAgICAgKi8KCgogICAgdXBkYXRlQ29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uKCkgewogICAgICBjb25zdCBzeCA9IHRoaXMuaGFsZkV4dGVudHMueDsKICAgICAgY29uc3Qgc3kgPSB0aGlzLmhhbGZFeHRlbnRzLnk7CiAgICAgIGNvbnN0IHN6ID0gdGhpcy5oYWxmRXh0ZW50cy56OwogICAgICBjb25zdCBWID0gVmVjMzsKICAgICAgY29uc3QgdmVydGljZXMgPSBbbmV3IFYoLXN4LCAtc3ksIC1zeiksIG5ldyBWKHN4LCAtc3ksIC1zeiksIG5ldyBWKHN4LCBzeSwgLXN6KSwgbmV3IFYoLXN4LCBzeSwgLXN6KSwgbmV3IFYoLXN4LCAtc3ksIHN6KSwgbmV3IFYoc3gsIC1zeSwgc3opLCBuZXcgVihzeCwgc3ksIHN6KSwgbmV3IFYoLXN4LCBzeSwgc3opXTsKICAgICAgY29uc3QgZmFjZXMgPSBbWzMsIDIsIDEsIDBdLCAvLyAtegogICAgICBbNCwgNSwgNiwgN10sIC8vICt6CiAgICAgIFs1LCA0LCAwLCAxXSwgLy8gLXkKICAgICAgWzIsIDMsIDcsIDZdLCAvLyAreQogICAgICBbMCwgNCwgNywgM10sIC8vIC14CiAgICAgIFsxLCAyLCA2LCA1XSAvLyAreAogICAgICBdOwogICAgICBjb25zdCBheGVzID0gW25ldyBWKDAsIDAsIDEpLCBuZXcgVigwLCAxLCAwKSwgbmV3IFYoMSwgMCwgMCldOwogICAgICBjb25zdCBoID0gbmV3IENvbnZleFBvbHloZWRyb24oewogICAgICAgIHZlcnRpY2VzLAogICAgICAgIGZhY2VzLAogICAgICAgIGF4ZXMKICAgICAgfSk7CiAgICAgIHRoaXMuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uID0gaDsKICAgICAgaC5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7CiAgICB9CiAgICAvKioKICAgICAqIENhbGN1bGF0ZSB0aGUgaW5lcnRpYSBvZiB0aGUgYm94LgogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgQm94LmNhbGN1bGF0ZUluZXJ0aWEodGhpcy5oYWxmRXh0ZW50cywgbWFzcywgdGFyZ2V0KTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICBzdGF0aWMgY2FsY3VsYXRlSW5lcnRpYShoYWxmRXh0ZW50cywgbWFzcywgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGUgPSBoYWxmRXh0ZW50czsKICAgICAgdGFyZ2V0LnggPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS55ICogMiAqIGUueSArIDIgKiBlLnogKiAyICogZS56KTsKICAgICAgdGFyZ2V0LnkgPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS54ICogMiAqIGUueCArIDIgKiBlLnogKiAyICogZS56KTsKICAgICAgdGFyZ2V0LnogPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS55ICogMiAqIGUueSArIDIgKiBlLnggKiAyICogZS54KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBib3ggNiBzaWRlIG5vcm1hbHMKICAgICAqIEBwYXJhbSBzaXhUYXJnZXRWZWN0b3JzIEFuIGFycmF5IG9mIDYgdmVjdG9ycywgdG8gc3RvcmUgdGhlIHJlc3VsdGluZyBzaWRlIG5vcm1hbHMgaW4uCiAgICAgKiBAcGFyYW0gcXVhdCBPcmllbnRhdGlvbiB0byBhcHBseSB0byB0aGUgbm9ybWFsIHZlY3RvcnMuIElmIG5vdCBwcm92aWRlZCwgdGhlIHZlY3RvcnMgd2lsbCBiZSBpbiByZXNwZWN0IHRvIHRoZSBsb2NhbCBmcmFtZS4KICAgICAqLwoKCiAgICBnZXRTaWRlTm9ybWFscyhzaXhUYXJnZXRWZWN0b3JzLCBxdWF0KSB7CiAgICAgIGNvbnN0IHNpZGVzID0gc2l4VGFyZ2V0VmVjdG9yczsKICAgICAgY29uc3QgZXggPSB0aGlzLmhhbGZFeHRlbnRzOwogICAgICBzaWRlc1swXS5zZXQoZXgueCwgMCwgMCk7CiAgICAgIHNpZGVzWzFdLnNldCgwLCBleC55LCAwKTsKICAgICAgc2lkZXNbMl0uc2V0KDAsIDAsIGV4LnopOwogICAgICBzaWRlc1szXS5zZXQoLWV4LngsIDAsIDApOwogICAgICBzaWRlc1s0XS5zZXQoMCwgLWV4LnksIDApOwogICAgICBzaWRlc1s1XS5zZXQoMCwgMCwgLWV4LnopOwoKICAgICAgaWYgKHF1YXQgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBzaWRlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgcXVhdC52bXVsdChzaWRlc1tpXSwgc2lkZXNbaV0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHNpZGVzOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSB2b2x1bWUgb2YgdGhlIGJveC4KICAgICAqLwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiA4LjAgKiB0aGlzLmhhbGZFeHRlbnRzLnggKiB0aGlzLmhhbGZFeHRlbnRzLnkgKiB0aGlzLmhhbGZFeHRlbnRzLno7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB0aGlzLmhhbGZFeHRlbnRzLmxlbmd0aCgpOwogICAgfQogICAgLyoqCiAgICAgKiBmb3JFYWNoV29ybGRDb3JuZXIKICAgICAqLwoKCiAgICBmb3JFYWNoV29ybGRDb3JuZXIocG9zLCBxdWF0LCBjYWxsYmFjaykgewogICAgICBjb25zdCBlID0gdGhpcy5oYWxmRXh0ZW50czsKICAgICAgY29uc3QgY29ybmVycyA9IFtbZS54LCBlLnksIGUuel0sIFstZS54LCBlLnksIGUuel0sIFstZS54LCAtZS55LCBlLnpdLCBbLWUueCwgLWUueSwgLWUuel0sIFtlLngsIC1lLnksIC1lLnpdLCBbZS54LCBlLnksIC1lLnpdLCBbLWUueCwgZS55LCAtZS56XSwgW2UueCwgLWUueSwgZS56XV07CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvcm5lcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICB3b3JsZENvcm5lclRlbXBQb3Muc2V0KGNvcm5lcnNbaV1bMF0sIGNvcm5lcnNbaV1bMV0sIGNvcm5lcnNbaV1bMl0pOwogICAgICAgIHF1YXQudm11bHQod29ybGRDb3JuZXJUZW1wUG9zLCB3b3JsZENvcm5lclRlbXBQb3MpOwogICAgICAgIHBvcy52YWRkKHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTsKICAgICAgICBjYWxsYmFjayh3b3JsZENvcm5lclRlbXBQb3MueCwgd29ybGRDb3JuZXJUZW1wUG9zLnksIHdvcmxkQ29ybmVyVGVtcFBvcy56KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBjYWxjdWxhdGVXb3JsZEFBQkIKICAgICAqLwoKCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICBjb25zdCBlID0gdGhpcy5oYWxmRXh0ZW50czsKICAgICAgd29ybGRDb3JuZXJzVGVtcFswXS5zZXQoZS54LCBlLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMV0uc2V0KC1lLngsIGUueSwgZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFsyXS5zZXQoLWUueCwgLWUueSwgZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFszXS5zZXQoLWUueCwgLWUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbNF0uc2V0KGUueCwgLWUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbNV0uc2V0KGUueCwgZS55LCAtZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFs2XS5zZXQoLWUueCwgZS55LCAtZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFs3XS5zZXQoZS54LCAtZS55LCBlLnopOwogICAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbMF07CiAgICAgIHF1YXQudm11bHQod2MsIHdjKTsKICAgICAgcG9zLnZhZGQod2MsIHdjKTsKICAgICAgbWF4LmNvcHkod2MpOwogICAgICBtaW4uY29weSh3Yyk7CgogICAgICBmb3IgKGxldCBpID0gMTsgaSA8IDg7IGkrKykgewogICAgICAgIGNvbnN0IHdjID0gd29ybGRDb3JuZXJzVGVtcFtpXTsKICAgICAgICBxdWF0LnZtdWx0KHdjLCB3Yyk7CiAgICAgICAgcG9zLnZhZGQod2MsIHdjKTsKICAgICAgICBjb25zdCB4ID0gd2MueDsKICAgICAgICBjb25zdCB5ID0gd2MueTsKICAgICAgICBjb25zdCB6ID0gd2MuejsKCiAgICAgICAgaWYgKHggPiBtYXgueCkgewogICAgICAgICAgbWF4LnggPSB4OwogICAgICAgIH0KCiAgICAgICAgaWYgKHkgPiBtYXgueSkgewogICAgICAgICAgbWF4LnkgPSB5OwogICAgICAgIH0KCiAgICAgICAgaWYgKHogPiBtYXgueikgewogICAgICAgICAgbWF4LnogPSB6OwogICAgICAgIH0KCiAgICAgICAgaWYgKHggPCBtaW4ueCkgewogICAgICAgICAgbWluLnggPSB4OwogICAgICAgIH0KCiAgICAgICAgaWYgKHkgPCBtaW4ueSkgewogICAgICAgICAgbWluLnkgPSB5OwogICAgICAgIH0KCiAgICAgICAgaWYgKHogPCBtaW4ueikgewogICAgICAgICAgbWluLnogPSB6OwogICAgICAgIH0KICAgICAgfSAvLyBHZXQgZWFjaCBheGlzIG1heAogICAgICAvLyBtaW4uc2V0KEluZmluaXR5LEluZmluaXR5LEluZmluaXR5KTsKICAgICAgLy8gbWF4LnNldCgtSW5maW5pdHksLUluZmluaXR5LC1JbmZpbml0eSk7CiAgICAgIC8vIHRoaXMuZm9yRWFjaFdvcmxkQ29ybmVyKHBvcyxxdWF0LGZ1bmN0aW9uKHgseSx6KXsKICAgICAgLy8gICAgIGlmKHggPiBtYXgueCl7CiAgICAgIC8vICAgICAgICAgbWF4LnggPSB4OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeSA+IG1heC55KXsKICAgICAgLy8gICAgICAgICBtYXgueSA9IHk7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZih6ID4gbWF4LnopewogICAgICAvLyAgICAgICAgIG1heC56ID0gejsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHggPCBtaW4ueCl7CiAgICAgIC8vICAgICAgICAgbWluLnggPSB4OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeSA8IG1pbi55KXsKICAgICAgLy8gICAgICAgICBtaW4ueSA9IHk7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZih6IDwgbWluLnopewogICAgICAvLyAgICAgICAgIG1pbi56ID0gejsKICAgICAgLy8gICAgIH0KICAgICAgLy8gfSk7CgogICAgfQoKICB9CiAgY29uc3Qgd29ybGRDb3JuZXJUZW1wUG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCB3b3JsZENvcm5lcnNUZW1wID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwoKICAvKioKICAgKiBCT0RZX1RZUEVTCiAgICovCiAgY29uc3QgQk9EWV9UWVBFUyA9IHsKICAgIC8qKiBEWU5BTUlDICovCiAgICBEWU5BTUlDOiAxLAoKICAgIC8qKiBTVEFUSUMgKi8KICAgIFNUQVRJQzogMiwKCiAgICAvKiogS0lORU1BVElDICovCiAgICBLSU5FTUFUSUM6IDQKICB9OwogIC8qKgogICAqIEJvZHlUeXBlCiAgICovCgogIC8qKgogICAqIEJPRFlfU0xFRVBfU1RBVEVTCiAgICovCiAgY29uc3QgQk9EWV9TTEVFUF9TVEFURVMgPSB7CiAgICAvKiogQVdBS0UgKi8KICAgIEFXQUtFOiAwLAoKICAgIC8qKiBTTEVFUFkgKi8KICAgIFNMRUVQWTogMSwKCiAgICAvKiogU0xFRVBJTkcgKi8KICAgIFNMRUVQSU5HOiAyCiAgfTsKICAvKioKICAgKiBCb2R5U2xlZXBTdGF0ZQogICAqLwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBhbGwgYm9keSB0eXBlcy4KICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCBzaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKDEpCiAgICogICAgIGNvbnN0IGJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoewogICAqICAgICAgIG1hc3M6IDEsCiAgICogICAgICAgc2hhcGUsCiAgICogICAgIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoYm9keSkKICAgKi8KICBjbGFzcyBCb2R5IGV4dGVuZHMgRXZlbnRUYXJnZXQgewogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIHR3byBib2RpZXMgY29sbGlkZS4gVGhpcyBldmVudCBpcyBkaXNwYXRjaGVkIG9uIGVhY2gKICAgICAqIG9mIHRoZSB0d28gYm9kaWVzIGludm9sdmVkIGluIHRoZSBjb2xsaXNpb24uCiAgICAgKiBAZXZlbnQgY29sbGlkZQogICAgICogQHBhcmFtIGJvZHkgVGhlIGJvZHkgdGhhdCB3YXMgaW52b2x2ZWQgaW4gdGhlIGNvbGxpc2lvbi4KICAgICAqIEBwYXJhbSBjb250YWN0IFRoZSBkZXRhaWxzIG9mIHRoZSBjb2xsaXNpb24uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEEgZHluYW1pYyBib2R5IGlzIGZ1bGx5IHNpbXVsYXRlZC4gQ2FuIGJlIG1vdmVkIG1hbnVhbGx5IGJ5IHRoZSB1c2VyLCBidXQgbm9ybWFsbHkgdGhleSBtb3ZlIGFjY29yZGluZyB0byBmb3JjZXMuIEEgZHluYW1pYyBib2R5IGNhbiBjb2xsaWRlIHdpdGggYWxsIGJvZHkgdHlwZXMuIEEgZHluYW1pYyBib2R5IGFsd2F5cyBoYXMgZmluaXRlLCBub24temVybyBtYXNzLgogICAgICovCgogICAgLyoqCiAgICAgKiBBIHN0YXRpYyBib2R5IGRvZXMgbm90IG1vdmUgZHVyaW5nIHNpbXVsYXRpb24gYW5kIGJlaGF2ZXMgYXMgaWYgaXQgaGFzIGluZmluaXRlIG1hc3MuIFN0YXRpYyBib2RpZXMgY2FuIGJlIG1vdmVkIG1hbnVhbGx5IGJ5IHNldHRpbmcgdGhlIHBvc2l0aW9uIG9mIHRoZSBib2R5LiBUaGUgdmVsb2NpdHkgb2YgYSBzdGF0aWMgYm9keSBpcyBhbHdheXMgemVyby4gU3RhdGljIGJvZGllcyBkbyBub3QgY29sbGlkZSB3aXRoIG90aGVyIHN0YXRpYyBvciBraW5lbWF0aWMgYm9kaWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBBIGtpbmVtYXRpYyBib2R5IG1vdmVzIHVuZGVyIHNpbXVsYXRpb24gYWNjb3JkaW5nIHRvIGl0cyB2ZWxvY2l0eS4gVGhleSBkbyBub3QgcmVzcG9uZCB0byBmb3JjZXMuIFRoZXkgY2FuIGJlIG1vdmVkIG1hbnVhbGx5LCBidXQgbm9ybWFsbHkgYSBraW5lbWF0aWMgYm9keSBpcyBtb3ZlZCBieSBzZXR0aW5nIGl0cyB2ZWxvY2l0eS4gQSBraW5lbWF0aWMgYm9keSBiZWhhdmVzIGFzIGlmIGl0IGhhcyBpbmZpbml0ZSBtYXNzLiBLaW5lbWF0aWMgYm9kaWVzIGRvIG5vdCBjb2xsaWRlIHdpdGggb3RoZXIgc3RhdGljIG9yIGtpbmVtYXRpYyBib2RpZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFXQUtFCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNMRUVQWQogICAgICovCgogICAgLyoqCiAgICAgKiBTTEVFUElORwogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgc2xlZXBpbmcgYm9keSBoYXMgd29rZW4gdXAuCiAgICAgKiBAZXZlbnQgd2FrZXVwCiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBnb25lIGluIHRvIHRoZSBzbGVlcHkgc3RhdGUuCiAgICAgKiBAZXZlbnQgc2xlZXB5CiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBmYWxsZW4gYXNsZWVwLgogICAgICogQGV2ZW50IHNsZWVwCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5pZCA9IEJvZHkuaWRDb3VudGVyKys7CiAgICAgIHRoaXMuaW5kZXggPSAtMTsKICAgICAgdGhpcy53b3JsZCA9IG51bGw7CiAgICAgIHRoaXMudmxhbWJkYSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9PT0gJ251bWJlcicgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA9PT0gJ251bWJlcicgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgOiAtMTsKICAgICAgdGhpcy5jb2xsaXNpb25SZXNwb25zZSA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlID09PSAnYm9vbGVhbicgPyBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlIDogdHJ1ZTsKICAgICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmluaXRQb3NpdGlvbiA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy5wb3NpdGlvbikgewogICAgICAgIHRoaXMucG9zaXRpb24uY29weShvcHRpb25zLnBvc2l0aW9uKTsKICAgICAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24uY29weShvcHRpb25zLnBvc2l0aW9uKTsKICAgICAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgICAgdGhpcy5pbml0UG9zaXRpb24uY29weShvcHRpb25zLnBvc2l0aW9uKTsKICAgICAgfQoKICAgICAgdGhpcy52ZWxvY2l0eSA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy52ZWxvY2l0eSkgewogICAgICAgIHRoaXMudmVsb2NpdHkuY29weShvcHRpb25zLnZlbG9jaXR5KTsKICAgICAgfQoKICAgICAgdGhpcy5pbml0VmVsb2NpdHkgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmZvcmNlID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgbWFzcyA9IHR5cGVvZiBvcHRpb25zLm1hc3MgPT09ICdudW1iZXInID8gb3B0aW9ucy5tYXNzIDogMDsKICAgICAgdGhpcy5tYXNzID0gbWFzczsKICAgICAgdGhpcy5pbnZNYXNzID0gbWFzcyA+IDAgPyAxLjAgLyBtYXNzIDogMDsKICAgICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgfHwgbnVsbDsKICAgICAgdGhpcy5saW5lYXJEYW1waW5nID0gdHlwZW9mIG9wdGlvbnMubGluZWFyRGFtcGluZyA9PT0gJ251bWJlcicgPyBvcHRpb25zLmxpbmVhckRhbXBpbmcgOiAwLjAxOwogICAgICB0aGlzLnR5cGUgPSBtYXNzIDw9IDAuMCA/IEJvZHkuU1RBVElDIDogQm9keS5EWU5BTUlDOwoKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnR5cGUgPT09IHR5cGVvZiBCb2R5LlNUQVRJQykgewogICAgICAgIHRoaXMudHlwZSA9IG9wdGlvbnMudHlwZTsKICAgICAgfQoKICAgICAgdGhpcy5hbGxvd1NsZWVwID0gdHlwZW9mIG9wdGlvbnMuYWxsb3dTbGVlcCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFsbG93U2xlZXAgOiB0cnVlOwogICAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LkFXQUtFOwogICAgICB0aGlzLnNsZWVwU3BlZWRMaW1pdCA9IHR5cGVvZiBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCA6IDAuMTsKICAgICAgdGhpcy5zbGVlcFRpbWVMaW1pdCA9IHR5cGVvZiBvcHRpb25zLnNsZWVwVGltZUxpbWl0ICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuc2xlZXBUaW1lTGltaXQgOiAxOwogICAgICB0aGlzLnRpbWVMYXN0U2xlZXB5ID0gMDsKICAgICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CiAgICAgIHRoaXMudG9ycXVlID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5xdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgdGhpcy5pbml0UXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHsKICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICAgIHRoaXMuaW5pdFF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgICB0aGlzLmludGVycG9sYXRlZFF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICB9CgogICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eSA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy5hbmd1bGFyVmVsb2NpdHkpIHsKICAgICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5jb3B5KG9wdGlvbnMuYW5ndWxhclZlbG9jaXR5KTsKICAgICAgfQoKICAgICAgdGhpcy5pbml0QW5ndWxhclZlbG9jaXR5ID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5zaGFwZXMgPSBbXTsKICAgICAgdGhpcy5zaGFwZU9mZnNldHMgPSBbXTsKICAgICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucyA9IFtdOwogICAgICB0aGlzLmluZXJ0aWEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludkluZXJ0aWEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludkluZXJ0aWFXb3JsZCA9IG5ldyBNYXQzKCk7CiAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gMDsKICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlID0gbmV3IE1hdDMoKTsKICAgICAgdGhpcy5maXhlZFJvdGF0aW9uID0gdHlwZW9mIG9wdGlvbnMuZml4ZWRSb3RhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmZpeGVkUm90YXRpb24gOiBmYWxzZTsKICAgICAgdGhpcy5hbmd1bGFyRGFtcGluZyA9IHR5cGVvZiBvcHRpb25zLmFuZ3VsYXJEYW1waW5nICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYW5ndWxhckRhbXBpbmcgOiAwLjAxOwogICAgICB0aGlzLmxpbmVhckZhY3RvciA9IG5ldyBWZWMzKDEsIDEsIDEpOwoKICAgICAgaWYgKG9wdGlvbnMubGluZWFyRmFjdG9yKSB7CiAgICAgICAgdGhpcy5saW5lYXJGYWN0b3IuY29weShvcHRpb25zLmxpbmVhckZhY3Rvcik7CiAgICAgIH0KCiAgICAgIHRoaXMuYW5ndWxhckZhY3RvciA9IG5ldyBWZWMzKDEsIDEsIDEpOwoKICAgICAgaWYgKG9wdGlvbnMuYW5ndWxhckZhY3RvcikgewogICAgICAgIHRoaXMuYW5ndWxhckZhY3Rvci5jb3B5KG9wdGlvbnMuYW5ndWxhckZhY3Rvcik7CiAgICAgIH0KCiAgICAgIHRoaXMuYWFiYiA9IG5ldyBBQUJCKCk7CiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgdGhpcy5ib3VuZGluZ1JhZGl1cyA9IDA7CiAgICAgIHRoaXMud2xhbWJkYSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaXNUcmlnZ2VyID0gQm9vbGVhbihvcHRpb25zLmlzVHJpZ2dlcik7CgogICAgICBpZiAob3B0aW9ucy5zaGFwZSkgewogICAgICAgIHRoaXMuYWRkU2hhcGUob3B0aW9ucy5zaGFwZSk7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgIH0KICAgIC8qKgogICAgICogV2FrZSB0aGUgYm9keSB1cC4KICAgICAqLwoKCiAgICB3YWtlVXAoKSB7CiAgICAgIGNvbnN0IHByZXZTdGF0ZSA9IHRoaXMuc2xlZXBTdGF0ZTsKICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTsKICAgICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CgogICAgICBpZiAocHJldlN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEJvZHkud2FrZXVwRXZlbnQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEZvcmNlIGJvZHkgc2xlZXAKICAgICAqLwoKCiAgICBzbGVlcCgpIHsKICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5TTEVFUElORzsKICAgICAgdGhpcy52ZWxvY2l0eS5zZXQoMCwgMCwgMCk7CiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnNldCgwLCAwLCAwKTsKICAgICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIENhbGxlZCBldmVyeSB0aW1lc3RlcCB0byB1cGRhdGUgaW50ZXJuYWwgc2xlZXAgdGltZXIgYW5kIGNoYW5nZSBzbGVlcCBzdGF0ZSBpZiBuZWVkZWQuCiAgICAgKiBAcGFyYW0gdGltZSBUaGUgd29ybGQgdGltZSBpbiBzZWNvbmRzCiAgICAgKi8KCgogICAgc2xlZXBUaWNrKHRpbWUpIHsKICAgICAgaWYgKHRoaXMuYWxsb3dTbGVlcCkgewogICAgICAgIGNvbnN0IHNsZWVwU3RhdGUgPSB0aGlzLnNsZWVwU3RhdGU7CiAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkID0gdGhpcy52ZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCkgKyB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7CiAgICAgICAgY29uc3Qgc3BlZWRMaW1pdFNxdWFyZWQgPSB0aGlzLnNsZWVwU3BlZWRMaW1pdCAqKiAyOwoKICAgICAgICBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBzcGVlZFNxdWFyZWQgPCBzcGVlZExpbWl0U3F1YXJlZCkgewogICAgICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5TTEVFUFk7IC8vIFNsZWVweQoKICAgICAgICAgIHRoaXMudGltZUxhc3RTbGVlcHkgPSB0aW1lOwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEJvZHkuc2xlZXB5RXZlbnQpOwogICAgICAgIH0gZWxzZSBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUFkgJiYgc3BlZWRTcXVhcmVkID4gc3BlZWRMaW1pdFNxdWFyZWQpIHsKICAgICAgICAgIHRoaXMud2FrZVVwKCk7IC8vIFdha2UgdXAKICAgICAgICB9IGVsc2UgaWYgKHNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBZICYmIHRpbWUgLSB0aGlzLnRpbWVMYXN0U2xlZXB5ID4gdGhpcy5zbGVlcFRpbWVMaW1pdCkgewogICAgICAgICAgdGhpcy5zbGVlcCgpOyAvLyBTbGVlcGluZwoKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVwRXZlbnQpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBJZiB0aGUgYm9keSBpcyBzbGVlcGluZywgaXQgc2hvdWxkIGJlIGltbW92YWJsZSAvIGhhdmUgaW5maW5pdGUgbWFzcyBkdXJpbmcgc29sdmUuIFdlIHNvbHZlIGl0IGJ5IGhhdmluZyBhIHNlcGFyYXRlICJzb2x2ZSBtYXNzIi4KICAgICAqLwoKCiAgICB1cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCkgewogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HIHx8IHRoaXMudHlwZSA9PT0gQm9keS5LSU5FTUFUSUMpIHsKICAgICAgICB0aGlzLmludk1hc3NTb2x2ZSA9IDA7CiAgICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUuc2V0WmVybygpOwogICAgICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkU29sdmUuc2V0WmVybygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gdGhpcy5pbnZNYXNzOwogICAgICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlLmNvcHkodGhpcy5pbnZJbmVydGlhKTsKICAgICAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlLmNvcHkodGhpcy5pbnZJbmVydGlhV29ybGQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSB3b3JsZCBwb2ludCB0byBsb2NhbCBib2R5IGZyYW1lLgogICAgICovCgoKICAgIHBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkUG9pbnQsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB3b3JsZFBvaW50LnZzdWIodGhpcy5wb3NpdGlvbiwgcmVzdWx0KTsKICAgICAgdGhpcy5xdWF0ZXJuaW9uLmNvbmp1Z2F0ZSgpLnZtdWx0KHJlc3VsdCwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCBhIHdvcmxkIHZlY3RvciB0byBsb2NhbCBib2R5IGZyYW1lLgogICAgICovCgoKICAgIHZlY3RvclRvTG9jYWxGcmFtZSh3b3JsZFZlY3RvciwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMucXVhdGVybmlvbi5jb25qdWdhdGUoKS52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCBhIGxvY2FsIGJvZHkgcG9pbnQgdG8gd29ybGQgZnJhbWUuCiAgICAgKi8KCgogICAgcG9pbnRUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMucXVhdGVybmlvbi52bXVsdChsb2NhbFBvaW50LCByZXN1bHQpOwogICAgICByZXN1bHQudmFkZCh0aGlzLnBvc2l0aW9uLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgbG9jYWwgYm9keSBwb2ludCB0byB3b3JsZCBmcmFtZS4KICAgICAqLwoKCiAgICB2ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhIHNoYXBlIHRvIHRoZSBib2R5IHdpdGggYSBsb2NhbCBvZmZzZXQgYW5kIG9yaWVudGF0aW9uLgogICAgICogQHJldHVybiBUaGUgYm9keSBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgYWRkU2hhcGUoc2hhcGUsIF9vZmZzZXQsIF9vcmllbnRhdGlvbikgewogICAgICBjb25zdCBvZmZzZXQgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBvcmllbnRhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CgogICAgICBpZiAoX29mZnNldCkgewogICAgICAgIG9mZnNldC5jb3B5KF9vZmZzZXQpOwogICAgICB9CgogICAgICBpZiAoX29yaWVudGF0aW9uKSB7CiAgICAgICAgb3JpZW50YXRpb24uY29weShfb3JpZW50YXRpb24pOwogICAgICB9CgogICAgICB0aGlzLnNoYXBlcy5wdXNoKHNoYXBlKTsKICAgICAgdGhpcy5zaGFwZU9mZnNldHMucHVzaChvZmZzZXQpOwogICAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zLnB1c2gob3JpZW50YXRpb24pOwogICAgICB0aGlzLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdSYWRpdXMoKTsKICAgICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICBzaGFwZS5ib2R5ID0gdGhpczsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBhIHNoYXBlIGZyb20gdGhlIGJvZHkuCiAgICAgKiBAcmV0dXJuIFRoZSBib2R5IG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwoKCiAgICByZW1vdmVTaGFwZShzaGFwZSkgewogICAgICBjb25zdCBpbmRleCA9IHRoaXMuc2hhcGVzLmluZGV4T2Yoc2hhcGUpOwoKICAgICAgaWYgKGluZGV4ID09PSAtMSkgewogICAgICAgIGNvbnNvbGUud2FybignU2hhcGUgZG9lcyBub3QgYmVsb25nIHRvIHRoZSBib2R5Jyk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIHRoaXMuc2hhcGVzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMuc2hhcGVPZmZzZXRzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMuc2hhcGVPcmllbnRhdGlvbnMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgdGhpcy51cGRhdGVNYXNzUHJvcGVydGllcygpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nUmFkaXVzKCk7CiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgc2hhcGUuYm9keSA9IG51bGw7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGJvdW5kaW5nIHJhZGl1cyBvZiB0aGUgYm9keS4gU2hvdWxkIGJlIGRvbmUgaWYgYW55IG9mIHRoZSBzaGFwZXMgYXJlIGNoYW5nZWQuCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdSYWRpdXMoKSB7CiAgICAgIGNvbnN0IHNoYXBlcyA9IHRoaXMuc2hhcGVzOwogICAgICBjb25zdCBzaGFwZU9mZnNldHMgPSB0aGlzLnNoYXBlT2Zmc2V0czsKICAgICAgY29uc3QgTiA9IHNoYXBlcy5sZW5ndGg7CiAgICAgIGxldCByYWRpdXMgPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IHNoYXBlID0gc2hhcGVzW2ldOwogICAgICAgIHNoYXBlLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gc2hhcGVPZmZzZXRzW2ldLmxlbmd0aCgpOwogICAgICAgIGNvbnN0IHIgPSBzaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1czsKCiAgICAgICAgaWYgKG9mZnNldCArIHIgPiByYWRpdXMpIHsKICAgICAgICAgIHJhZGl1cyA9IG9mZnNldCArIHI7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmJvdW5kaW5nUmFkaXVzID0gcmFkaXVzOwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGVzIHRoZSAuYWFiYgogICAgICovCgoKICAgIHVwZGF0ZUFBQkIoKSB7CiAgICAgIGNvbnN0IHNoYXBlcyA9IHRoaXMuc2hhcGVzOwogICAgICBjb25zdCBzaGFwZU9mZnNldHMgPSB0aGlzLnNoYXBlT2Zmc2V0czsKICAgICAgY29uc3Qgc2hhcGVPcmllbnRhdGlvbnMgPSB0aGlzLnNoYXBlT3JpZW50YXRpb25zOwogICAgICBjb25zdCBOID0gc2hhcGVzLmxlbmd0aDsKICAgICAgY29uc3Qgb2Zmc2V0ID0gdG1wVmVjOwogICAgICBjb25zdCBvcmllbnRhdGlvbiA9IHRtcFF1YXQ7CiAgICAgIGNvbnN0IGJvZHlRdWF0ID0gdGhpcy5xdWF0ZXJuaW9uOwogICAgICBjb25zdCBhYWJiID0gdGhpcy5hYWJiOwogICAgICBjb25zdCBzaGFwZUFBQkIgPSB1cGRhdGVBQUJCX3NoYXBlQUFCQjsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZSA9IHNoYXBlc1tpXTsgLy8gR2V0IHNoYXBlIHdvcmxkIHBvc2l0aW9uCgogICAgICAgIGJvZHlRdWF0LnZtdWx0KHNoYXBlT2Zmc2V0c1tpXSwgb2Zmc2V0KTsKICAgICAgICBvZmZzZXQudmFkZCh0aGlzLnBvc2l0aW9uLCBvZmZzZXQpOyAvLyBHZXQgc2hhcGUgd29ybGQgcXVhdGVybmlvbgoKICAgICAgICBib2R5UXVhdC5tdWx0KHNoYXBlT3JpZW50YXRpb25zW2ldLCBvcmllbnRhdGlvbik7IC8vIEdldCBzaGFwZSBBQUJCCgogICAgICAgIHNoYXBlLmNhbGN1bGF0ZVdvcmxkQUFCQihvZmZzZXQsIG9yaWVudGF0aW9uLCBzaGFwZUFBQkIubG93ZXJCb3VuZCwgc2hhcGVBQUJCLnVwcGVyQm91bmQpOwoKICAgICAgICBpZiAoaSA9PT0gMCkgewogICAgICAgICAgYWFiYi5jb3B5KHNoYXBlQUFCQik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFhYmIuZXh0ZW5kKHNoYXBlQUFCQik7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgYC5pbmVydGlhV29ybGRgIGFuZCBgLmludkluZXJ0aWFXb3JsZGAKICAgICAqLwoKCiAgICB1cGRhdGVJbmVydGlhV29ybGQoZm9yY2UpIHsKICAgICAgY29uc3QgSSA9IHRoaXMuaW52SW5lcnRpYTsKCiAgICAgIGlmIChJLnggPT09IEkueSAmJiBJLnkgPT09IEkueiAmJiAhZm9yY2UpIDsgZWxzZSB7CiAgICAgICAgY29uc3QgbTEgPSB1aXdfbTE7CiAgICAgICAgY29uc3QgbTIgPSB1aXdfbTI7CiAgICAgICAgbTEuc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbih0aGlzLnF1YXRlcm5pb24pOwogICAgICAgIG0xLnRyYW5zcG9zZShtMik7CiAgICAgICAgbTEuc2NhbGUoSSwgbTEpOwogICAgICAgIG0xLm1tdWx0KG0yLCB0aGlzLmludkluZXJ0aWFXb3JsZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQXBwbHkgZm9yY2UgdG8gYSBwb2ludCBvZiB0aGUgYm9keS4gVGhpcyBjb3VsZCBmb3IgZXhhbXBsZSBiZSBhIHBvaW50IG9uIHRoZSBCb2R5IHN1cmZhY2UuCiAgICAgKiBBcHBseWluZyBmb3JjZSB0aGlzIHdheSB3aWxsIGFkZCB0byBCb2R5LmZvcmNlIGFuZCBCb2R5LnRvcnF1ZS4KICAgICAqIEBwYXJhbSBmb3JjZSBUaGUgYW1vdW50IG9mIGZvcmNlIHRvIGFkZC4KICAgICAqIEBwYXJhbSByZWxhdGl2ZVBvaW50IEEgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIHRvIGFwcGx5IHRoZSBmb3JjZSBvbi4KICAgICAqLwoKCiAgICBhcHBseUZvcmNlKGZvcmNlLCByZWxhdGl2ZVBvaW50KSB7CiAgICAgIGlmIChyZWxhdGl2ZVBvaW50ID09PSB2b2lkIDApIHsKICAgICAgICByZWxhdGl2ZVBvaW50ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgLy8gTmVlZGVkPwogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLndha2VVcCgpOwogICAgICB9IC8vIENvbXB1dGUgcHJvZHVjZWQgcm90YXRpb25hbCBmb3JjZQoKCiAgICAgIGNvbnN0IHJvdEZvcmNlID0gQm9keV9hcHBseUZvcmNlX3JvdEZvcmNlOwogICAgICByZWxhdGl2ZVBvaW50LmNyb3NzKGZvcmNlLCByb3RGb3JjZSk7IC8vIEFkZCBsaW5lYXIgZm9yY2UKCiAgICAgIHRoaXMuZm9yY2UudmFkZChmb3JjZSwgdGhpcy5mb3JjZSk7IC8vIEFkZCByb3RhdGlvbmFsIGZvcmNlCgogICAgICB0aGlzLnRvcnF1ZS52YWRkKHJvdEZvcmNlLCB0aGlzLnRvcnF1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IGZvcmNlIHRvIGEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkuCiAgICAgKiBAcGFyYW0gZm9yY2UgVGhlIGZvcmNlIHZlY3RvciB0byBhcHBseSwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBib2R5IGZyYW1lLgogICAgICogQHBhcmFtIGxvY2FsUG9pbnQgQSBsb2NhbCBwb2ludCBpbiB0aGUgYm9keSB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlMb2NhbEZvcmNlKGxvY2FsRm9yY2UsIGxvY2FsUG9pbnQpIHsKICAgICAgaWYgKGxvY2FsUG9pbnQgPT09IHZvaWQgMCkgewogICAgICAgIGxvY2FsUG9pbnQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkRm9yY2UgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV93b3JsZEZvcmNlOwogICAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlCgogICAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEZvcmNlLCB3b3JsZEZvcmNlKTsKICAgICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgICAgdGhpcy5hcHBseUZvcmNlKHdvcmxkRm9yY2UsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IHRvcnF1ZSB0byB0aGUgYm9keS4KICAgICAqIEBwYXJhbSB0b3JxdWUgVGhlIGFtb3VudCBvZiB0b3JxdWUgdG8gYWRkLgogICAgICovCgoKICAgIGFwcGx5VG9ycXVlKHRvcnF1ZSkgewogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLndha2VVcCgpOwogICAgICB9IC8vIEFkZCByb3RhdGlvbmFsIGZvcmNlCgoKICAgICAgdGhpcy50b3JxdWUudmFkZCh0b3JxdWUsIHRoaXMudG9ycXVlKTsKICAgIH0KICAgIC8qKgogICAgICogQXBwbHkgaW1wdWxzZSB0byBhIHBvaW50IG9mIHRoZSBib2R5LiBUaGlzIGNvdWxkIGZvciBleGFtcGxlIGJlIGEgcG9pbnQgb24gdGhlIEJvZHkgc3VyZmFjZS4KICAgICAqIEFuIGltcHVsc2UgaXMgYSBmb3JjZSBhZGRlZCB0byBhIGJvZHkgZHVyaW5nIGEgc2hvcnQgcGVyaW9kIG9mIHRpbWUgKGltcHVsc2UgPSBmb3JjZSAqIHRpbWUpLgogICAgICogSW1wdWxzZXMgd2lsbCBiZSBhZGRlZCB0byBCb2R5LnZlbG9jaXR5IGFuZCBCb2R5LmFuZ3VsYXJWZWxvY2l0eS4KICAgICAqIEBwYXJhbSBpbXB1bHNlIFRoZSBhbW91bnQgb2YgaW1wdWxzZSB0byBhZGQuCiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQb2ludCBBIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbGF0aXZlUG9pbnQpIHsKICAgICAgaWYgKHJlbGF0aXZlUG9pbnQgPT09IHZvaWQgMCkgewogICAgICAgIHJlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLndha2VVcCgpOwogICAgICB9IC8vIENvbXB1dGUgcG9pbnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIGJvZHkgY2VudGVyCgoKICAgICAgY29uc3QgciA9IHJlbGF0aXZlUG9pbnQ7IC8vIENvbXB1dGUgcHJvZHVjZWQgY2VudHJhbCBpbXB1bHNlIHZlbG9jaXR5CgogICAgICBjb25zdCB2ZWxvID0gQm9keV9hcHBseUltcHVsc2VfdmVsbzsKICAgICAgdmVsby5jb3B5KGltcHVsc2UpOwogICAgICB2ZWxvLnNjYWxlKHRoaXMuaW52TWFzcywgdmVsbyk7IC8vIEFkZCBsaW5lYXIgaW1wdWxzZQoKICAgICAgdGhpcy52ZWxvY2l0eS52YWRkKHZlbG8sIHRoaXMudmVsb2NpdHkpOyAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgaW1wdWxzZSB2ZWxvY2l0eQoKICAgICAgY29uc3Qgcm90VmVsbyA9IEJvZHlfYXBwbHlJbXB1bHNlX3JvdFZlbG87CiAgICAgIHIuY3Jvc3MoaW1wdWxzZSwgcm90VmVsbyk7CiAgICAgIC8qCiAgICAgICByb3RWZWxvLnggKj0gdGhpcy5pbnZJbmVydGlhLng7CiAgICAgICByb3RWZWxvLnkgKj0gdGhpcy5pbnZJbmVydGlhLnk7CiAgICAgICByb3RWZWxvLnogKj0gdGhpcy5pbnZJbmVydGlhLno7CiAgICAgICAqLwoKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGQudm11bHQocm90VmVsbywgcm90VmVsbyk7IC8vIEFkZCByb3RhdGlvbmFsIEltcHVsc2UKCiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnZhZGQocm90VmVsbywgdGhpcy5hbmd1bGFyVmVsb2NpdHkpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSBsb2NhbGx5LWRlZmluZWQgaW1wdWxzZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIGZvcmNlIFRoZSBmb3JjZSB2ZWN0b3IgdG8gYXBwbHksIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgYm9keSBmcmFtZS4KICAgICAqIEBwYXJhbSBsb2NhbFBvaW50IEEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5TG9jYWxJbXB1bHNlKGxvY2FsSW1wdWxzZSwgbG9jYWxQb2ludCkgewogICAgICBpZiAobG9jYWxQb2ludCA9PT0gdm9pZCAwKSB7CiAgICAgICAgbG9jYWxQb2ludCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3Qgd29ybGRJbXB1bHNlID0gQm9keV9hcHBseUxvY2FsSW1wdWxzZV93b3JsZEltcHVsc2U7CiAgICAgIGNvbnN0IHJlbGF0aXZlUG9pbnRXb3JsZCA9IEJvZHlfYXBwbHlMb2NhbEltcHVsc2VfcmVsYXRpdmVQb2ludDsgLy8gVHJhbnNmb3JtIHRoZSBmb3JjZSB2ZWN0b3IgdG8gd29ybGQgc3BhY2UKCiAgICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsSW1wdWxzZSwgd29ybGRJbXB1bHNlKTsKICAgICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgICAgdGhpcy5hcHBseUltcHVsc2Uod29ybGRJbXB1bHNlLCByZWxhdGl2ZVBvaW50V29ybGQpOwogICAgfQogICAgLyoqCiAgICAgKiBTaG91bGQgYmUgY2FsbGVkIHdoZW5ldmVyIHlvdSBjaGFuZ2UgdGhlIGJvZHkgc2hhcGUgb3IgbWFzcy4KICAgICAqLwoKCiAgICB1cGRhdGVNYXNzUHJvcGVydGllcygpIHsKICAgICAgY29uc3QgaGFsZkV4dGVudHMgPSBCb2R5X3VwZGF0ZU1hc3NQcm9wZXJ0aWVzX2hhbGZFeHRlbnRzOwogICAgICB0aGlzLmludk1hc3MgPSB0aGlzLm1hc3MgPiAwID8gMS4wIC8gdGhpcy5tYXNzIDogMDsKICAgICAgY29uc3QgSSA9IHRoaXMuaW5lcnRpYTsKICAgICAgY29uc3QgZml4ZWQgPSB0aGlzLmZpeGVkUm90YXRpb247IC8vIEFwcHJveGltYXRlIHdpdGggQUFCQiBib3gKCiAgICAgIHRoaXMudXBkYXRlQUFCQigpOwogICAgICBoYWxmRXh0ZW50cy5zZXQoKHRoaXMuYWFiYi51cHBlckJvdW5kLnggLSB0aGlzLmFhYmIubG93ZXJCb3VuZC54KSAvIDIsICh0aGlzLmFhYmIudXBwZXJCb3VuZC55IC0gdGhpcy5hYWJiLmxvd2VyQm91bmQueSkgLyAyLCAodGhpcy5hYWJiLnVwcGVyQm91bmQueiAtIHRoaXMuYWFiYi5sb3dlckJvdW5kLnopIC8gMik7CiAgICAgIEJveC5jYWxjdWxhdGVJbmVydGlhKGhhbGZFeHRlbnRzLCB0aGlzLm1hc3MsIEkpOwogICAgICB0aGlzLmludkluZXJ0aWEuc2V0KEkueCA+IDAgJiYgIWZpeGVkID8gMS4wIC8gSS54IDogMCwgSS55ID4gMCAmJiAhZml4ZWQgPyAxLjAgLyBJLnkgOiAwLCBJLnogPiAwICYmICFmaXhlZCA/IDEuMCAvIEkueiA6IDApOwogICAgICB0aGlzLnVwZGF0ZUluZXJ0aWFXb3JsZCh0cnVlKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHdvcmxkIHZlbG9jaXR5IG9mIGEgcG9pbnQgaW4gdGhlIGJvZHkuCiAgICAgKiBAcGFyYW0gd29ybGRQb2ludAogICAgICogQHBhcmFtIHJlc3VsdAogICAgICogQHJldHVybiBUaGUgcmVzdWx0IHZlY3Rvci4KICAgICAqLwoKCiAgICBnZXRWZWxvY2l0eUF0V29ybGRQb2ludCh3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgY29uc3QgciA9IG5ldyBWZWMzKCk7CiAgICAgIHdvcmxkUG9pbnQudnN1Yih0aGlzLnBvc2l0aW9uLCByKTsKICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MociwgcmVzdWx0KTsKICAgICAgdGhpcy52ZWxvY2l0eS52YWRkKHJlc3VsdCwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogTW92ZSB0aGUgYm9keSBmb3J3YXJkIGluIHRpbWUuCiAgICAgKiBAcGFyYW0gZHQgVGltZSBzdGVwCiAgICAgKiBAcGFyYW0gcXVhdE5vcm1hbGl6ZSBTZXQgdG8gdHJ1ZSB0byBub3JtYWxpemUgdGhlIGJvZHkgcXVhdGVybmlvbgogICAgICogQHBhcmFtIHF1YXROb3JtYWxpemVGYXN0IElmIHRoZSBxdWF0ZXJuaW9uIHNob3VsZCBiZSBub3JtYWxpemVkIHVzaW5nICJmYXN0IiBxdWF0ZXJuaW9uIG5vcm1hbGl6YXRpb24KICAgICAqLwoKCiAgICBpbnRlZ3JhdGUoZHQsIHF1YXROb3JtYWxpemUsIHF1YXROb3JtYWxpemVGYXN0KSB7CiAgICAgIC8vIFNhdmUgcHJldmlvdXMgcG9zaXRpb24KICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uLmNvcHkodGhpcy5wb3NpdGlvbik7CiAgICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uLmNvcHkodGhpcy5xdWF0ZXJuaW9uKTsKCiAgICAgIGlmICghKHRoaXMudHlwZSA9PT0gQm9keS5EWU5BTUlDIHx8IHRoaXMudHlwZSA9PT0gQm9keS5LSU5FTUFUSUMpIHx8IHRoaXMuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORykgewogICAgICAgIC8vIE9ubHkgZm9yIGR5bmFtaWMKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlbG8gPSB0aGlzLnZlbG9jaXR5OwogICAgICBjb25zdCBhbmd1bGFyVmVsbyA9IHRoaXMuYW5ndWxhclZlbG9jaXR5OwogICAgICBjb25zdCBwb3MgPSB0aGlzLnBvc2l0aW9uOwogICAgICBjb25zdCBmb3JjZSA9IHRoaXMuZm9yY2U7CiAgICAgIGNvbnN0IHRvcnF1ZSA9IHRoaXMudG9ycXVlOwogICAgICBjb25zdCBxdWF0ID0gdGhpcy5xdWF0ZXJuaW9uOwogICAgICBjb25zdCBpbnZNYXNzID0gdGhpcy5pbnZNYXNzOwogICAgICBjb25zdCBpbnZJbmVydGlhID0gdGhpcy5pbnZJbmVydGlhV29ybGQ7CiAgICAgIGNvbnN0IGxpbmVhckZhY3RvciA9IHRoaXMubGluZWFyRmFjdG9yOwogICAgICBjb25zdCBpTWR0ID0gaW52TWFzcyAqIGR0OwogICAgICB2ZWxvLnggKz0gZm9yY2UueCAqIGlNZHQgKiBsaW5lYXJGYWN0b3IueDsKICAgICAgdmVsby55ICs9IGZvcmNlLnkgKiBpTWR0ICogbGluZWFyRmFjdG9yLnk7CiAgICAgIHZlbG8ueiArPSBmb3JjZS56ICogaU1kdCAqIGxpbmVhckZhY3Rvci56OwogICAgICBjb25zdCBlID0gaW52SW5lcnRpYS5lbGVtZW50czsKICAgICAgY29uc3QgYW5ndWxhckZhY3RvciA9IHRoaXMuYW5ndWxhckZhY3RvcjsKICAgICAgY29uc3QgdHggPSB0b3JxdWUueCAqIGFuZ3VsYXJGYWN0b3IueDsKICAgICAgY29uc3QgdHkgPSB0b3JxdWUueSAqIGFuZ3VsYXJGYWN0b3IueTsKICAgICAgY29uc3QgdHogPSB0b3JxdWUueiAqIGFuZ3VsYXJGYWN0b3IuejsKICAgICAgYW5ndWxhclZlbG8ueCArPSBkdCAqIChlWzBdICogdHggKyBlWzFdICogdHkgKyBlWzJdICogdHopOwogICAgICBhbmd1bGFyVmVsby55ICs9IGR0ICogKGVbM10gKiB0eCArIGVbNF0gKiB0eSArIGVbNV0gKiB0eik7CiAgICAgIGFuZ3VsYXJWZWxvLnogKz0gZHQgKiAoZVs2XSAqIHR4ICsgZVs3XSAqIHR5ICsgZVs4XSAqIHR6KTsgLy8gVXNlIG5ldyB2ZWxvY2l0eSAgLSBsZWFwIGZyb2cKCiAgICAgIHBvcy54ICs9IHZlbG8ueCAqIGR0OwogICAgICBwb3MueSArPSB2ZWxvLnkgKiBkdDsKICAgICAgcG9zLnogKz0gdmVsby56ICogZHQ7CiAgICAgIHF1YXQuaW50ZWdyYXRlKHRoaXMuYW5ndWxhclZlbG9jaXR5LCBkdCwgdGhpcy5hbmd1bGFyRmFjdG9yLCBxdWF0KTsKCiAgICAgIGlmIChxdWF0Tm9ybWFsaXplKSB7CiAgICAgICAgaWYgKHF1YXROb3JtYWxpemVGYXN0KSB7CiAgICAgICAgICBxdWF0Lm5vcm1hbGl6ZUZhc3QoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcXVhdC5ub3JtYWxpemUoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsgLy8gVXBkYXRlIHdvcmxkIGluZXJ0aWEKCiAgICAgIHRoaXMudXBkYXRlSW5lcnRpYVdvcmxkKCk7CiAgICB9CgogIH0KICBCb2R5LmlkQ291bnRlciA9IDA7CiAgQm9keS5DT0xMSURFX0VWRU5UX05BTUUgPSAnY29sbGlkZSc7CiAgQm9keS5EWU5BTUlDID0gQk9EWV9UWVBFUy5EWU5BTUlDOwogIEJvZHkuU1RBVElDID0gQk9EWV9UWVBFUy5TVEFUSUM7CiAgQm9keS5LSU5FTUFUSUMgPSBCT0RZX1RZUEVTLktJTkVNQVRJQzsKICBCb2R5LkFXQUtFID0gQk9EWV9TTEVFUF9TVEFURVMuQVdBS0U7CiAgQm9keS5TTEVFUFkgPSBCT0RZX1NMRUVQX1NUQVRFUy5TTEVFUFk7CiAgQm9keS5TTEVFUElORyA9IEJPRFlfU0xFRVBfU1RBVEVTLlNMRUVQSU5HOwogIEJvZHkud2FrZXVwRXZlbnQgPSB7CiAgICB0eXBlOiAnd2FrZXVwJwogIH07CiAgQm9keS5zbGVlcHlFdmVudCA9IHsKICAgIHR5cGU6ICdzbGVlcHknCiAgfTsKICBCb2R5LnNsZWVwRXZlbnQgPSB7CiAgICB0eXBlOiAnc2xlZXAnCiAgfTsKICBjb25zdCB0bXBWZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFF1YXQgPSBuZXcgUXVhdGVybmlvbigpOwogIGNvbnN0IHVwZGF0ZUFBQkJfc2hhcGVBQUJCID0gbmV3IEFBQkIoKTsKICBjb25zdCB1aXdfbTEgPSBuZXcgTWF0MygpOwogIGNvbnN0IHVpd19tMiA9IG5ldyBNYXQzKCk7CiAgbmV3IE1hdDMoKTsKICBjb25zdCBCb2R5X2FwcGx5Rm9yY2Vfcm90Rm9yY2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEZvcmNlX3dvcmxkRm9yY2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEZvcmNlX3JlbGF0aXZlUG9pbnRXb3JsZCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUltcHVsc2VfdmVsbyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUltcHVsc2Vfcm90VmVsbyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUxvY2FsSW1wdWxzZV93b3JsZEltcHVsc2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2VfcmVsYXRpdmVQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV91cGRhdGVNYXNzUHJvcGVydGllc19oYWxmRXh0ZW50cyA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEJhc2UgY2xhc3MgZm9yIGJyb2FkcGhhc2UgaW1wbGVtZW50YXRpb25zCiAgICogQGF1dGhvciBzY2h0ZXBwZQogICAqLwogIGNsYXNzIEJyb2FkcGhhc2UgewogICAgLyoqCiAgICAgKiBUaGUgd29ybGQgdG8gc2VhcmNoIGZvciBjb2xsaXNpb25zIGluLgogICAgICovCgogICAgLyoqCiAgICAgKiBJZiBzZXQgdG8gdHJ1ZSwgdGhlIGJyb2FkcGhhc2UgdXNlcyBib3VuZGluZyBib3hlcyBmb3IgaW50ZXJzZWN0aW9uIHRlc3RzLCBlbHNlIGl0IHVzZXMgYm91bmRpbmcgc3BoZXJlcy4KICAgICAqLwoKICAgIC8qKgogICAgICogU2V0IHRvIHRydWUgaWYgdGhlIG9iamVjdHMgaW4gdGhlIHdvcmxkIG1vdmVkLgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy53b3JsZCA9IG51bGw7CiAgICAgIHRoaXMudXNlQm91bmRpbmdCb3hlcyA9IGZhbHNlOwogICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBjb2xsaXNpb24gcGFpcnMgZnJvbSB0aGUgd29ybGQKICAgICAqIEBwYXJhbSB3b3JsZCBUaGUgd29ybGQgdG8gc2VhcmNoIGluCiAgICAgKiBAcGFyYW0gcDEgRW1wdHkgYXJyYXkgdG8gYmUgZmlsbGVkIHdpdGggYm9keSBvYmplY3RzCiAgICAgKiBAcGFyYW0gcDIgRW1wdHkgYXJyYXkgdG8gYmUgZmlsbGVkIHdpdGggYm9keSBvYmplY3RzCiAgICAgKi8KCgogICAgY29sbGlzaW9uUGFpcnMod29ybGQsIHAxLCBwMikgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvbGxpc2lvblBhaXJzIG5vdCBpbXBsZW1lbnRlZCBmb3IgdGhpcyBCcm9hZFBoYXNlIGNsYXNzIScpOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiBhIGJvZHkgcGFpciBuZWVkcyB0byBiZSBpbnRlcnNlY3Rpb24gdGVzdGVkIGF0IGFsbC4KICAgICAqLwoKCiAgICBuZWVkQnJvYWRwaGFzZUNvbGxpc2lvbihib2R5QSwgYm9keUIpIHsKICAgICAgLy8gQ2hlY2sgY29sbGlzaW9uIGZpbHRlciBtYXNrcwogICAgICBpZiAoKGJvZHlBLmNvbGxpc2lvbkZpbHRlckdyb3VwICYgYm9keUIuY29sbGlzaW9uRmlsdGVyTWFzaykgPT09IDAgfHwgKGJvZHlCLmNvbGxpc2lvbkZpbHRlckdyb3VwICYgYm9keUEuY29sbGlzaW9uRmlsdGVyTWFzaykgPT09IDApIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8gQ2hlY2sgdHlwZXMKCgogICAgICBpZiAoKChib2R5QS50eXBlICYgQm9keS5TVEFUSUMpICE9PSAwIHx8IGJvZHlBLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpICYmICgoYm9keUIudHlwZSAmIEJvZHkuU1RBVElDKSAhPT0gMCB8fCBib2R5Qi5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSkgewogICAgICAgIC8vIEJvdGggYm9kaWVzIGFyZSBzdGF0aWMgb3Igc2xlZXBpbmcuIFNraXAuCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIHZvbHVtZXMgb2YgdHdvIGJvZGllcyBpbnRlcnNlY3QuCiAgICAgKi8KCgogICAgaW50ZXJzZWN0aW9uVGVzdChib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGlmICh0aGlzLnVzZUJvdW5kaW5nQm94ZXMpIHsKICAgICAgICB0aGlzLmRvQm91bmRpbmdCb3hCcm9hZHBoYXNlKGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZG9Cb3VuZGluZ1NwaGVyZUJyb2FkcGhhc2UoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIHNwaGVyZXMgb2YgdHdvIGJvZGllcyBhcmUgaW50ZXJzZWN0aW5nLgogICAgICogQHBhcmFtIHBhaXJzMSBib2R5QSBpcyBhcHBlbmRlZCB0byB0aGlzIGFycmF5IGlmIGludGVyc2VjdGlvbgogICAgICogQHBhcmFtIHBhaXJzMiBib2R5QiBpcyBhcHBlbmRlZCB0byB0aGlzIGFycmF5IGlmIGludGVyc2VjdGlvbgogICAgICovCgoKICAgIGRvQm91bmRpbmdTcGhlcmVCcm9hZHBoYXNlKGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpIHsKICAgICAgY29uc3QgciA9IEJyb2FkcGhhc2VfY29sbGlzaW9uUGFpcnNfcjsKICAgICAgYm9keUIucG9zaXRpb24udnN1Yihib2R5QS5wb3NpdGlvbiwgcik7CiAgICAgIGNvbnN0IGJvdW5kaW5nUmFkaXVzU3VtMiA9IChib2R5QS5ib3VuZGluZ1JhZGl1cyArIGJvZHlCLmJvdW5kaW5nUmFkaXVzKSAqKiAyOwogICAgICBjb25zdCBub3JtMiA9IHIubGVuZ3RoU3F1YXJlZCgpOwoKICAgICAgaWYgKG5vcm0yIDwgYm91bmRpbmdSYWRpdXNTdW0yKSB7CiAgICAgICAgcGFpcnMxLnB1c2goYm9keUEpOwogICAgICAgIHBhaXJzMi5wdXNoKGJvZHlCKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgYm91bmRpbmcgYm94ZXMgb2YgdHdvIGJvZGllcyBhcmUgaW50ZXJzZWN0aW5nLgogICAgICovCgoKICAgIGRvQm91bmRpbmdCb3hCcm9hZHBoYXNlKGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpIHsKICAgICAgaWYgKGJvZHlBLmFhYmJOZWVkc1VwZGF0ZSkgewogICAgICAgIGJvZHlBLnVwZGF0ZUFBQkIoKTsKICAgICAgfQoKICAgICAgaWYgKGJvZHlCLmFhYmJOZWVkc1VwZGF0ZSkgewogICAgICAgIGJvZHlCLnVwZGF0ZUFBQkIoKTsKICAgICAgfSAvLyBDaGVjayBBQUJCIC8gQUFCQgoKCiAgICAgIGlmIChib2R5QS5hYWJiLm92ZXJsYXBzKGJvZHlCLmFhYmIpKSB7CiAgICAgICAgcGFpcnMxLnB1c2goYm9keUEpOwogICAgICAgIHBhaXJzMi5wdXNoKGJvZHlCKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmVzIGR1cGxpY2F0ZSBwYWlycyBmcm9tIHRoZSBwYWlyIGFycmF5cy4KICAgICAqLwoKCiAgICBtYWtlUGFpcnNVbmlxdWUocGFpcnMxLCBwYWlyczIpIHsKICAgICAgY29uc3QgdCA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3RlbXA7CiAgICAgIGNvbnN0IHAxID0gQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDE7CiAgICAgIGNvbnN0IHAyID0gQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDI7CiAgICAgIGNvbnN0IE4gPSBwYWlyczEubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIHAxW2ldID0gcGFpcnMxW2ldOwogICAgICAgIHAyW2ldID0gcGFpcnMyW2ldOwogICAgICB9CgogICAgICBwYWlyczEubGVuZ3RoID0gMDsKICAgICAgcGFpcnMyLmxlbmd0aCA9IDA7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgaWQxID0gcDFbaV0uaWQ7CiAgICAgICAgY29uc3QgaWQyID0gcDJbaV0uaWQ7CiAgICAgICAgY29uc3Qga2V5ID0gaWQxIDwgaWQyID8gYCR7aWQxfSwke2lkMn1gIDogYCR7aWQyfSwke2lkMX1gOwogICAgICAgIHRba2V5XSA9IGk7CiAgICAgICAgdC5rZXlzLnB1c2goa2V5KTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IHQua2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGtleSA9IHQua2V5cy5wb3AoKTsKICAgICAgICBjb25zdCBwYWlySW5kZXggPSB0W2tleV07CiAgICAgICAgcGFpcnMxLnB1c2gocDFbcGFpckluZGV4XSk7CiAgICAgICAgcGFpcnMyLnB1c2gocDJbcGFpckluZGV4XSk7CiAgICAgICAgZGVsZXRlIHRba2V5XTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBUbyBiZSBpbXBsZW1lbnRlZCBieSBzdWJjYXNzZXMKICAgICAqLwoKCiAgICBzZXRXb3JsZCh3b3JsZCkge30KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIHNwaGVyZXMgb2YgdHdvIGJvZGllcyBvdmVybGFwLgogICAgICovCgoKICAgIHN0YXRpYyBib3VuZGluZ1NwaGVyZUNoZWNrKGJvZHlBLCBib2R5QikgewogICAgICBjb25zdCBkaXN0ID0gbmV3IFZlYzMoKTsgLy8gYnNjX2Rpc3Q7CgogICAgICBib2R5QS5wb3NpdGlvbi52c3ViKGJvZHlCLnBvc2l0aW9uLCBkaXN0KTsKICAgICAgY29uc3Qgc2EgPSBib2R5QS5zaGFwZXNbMF07CiAgICAgIGNvbnN0IHNiID0gYm9keUIuc2hhcGVzWzBdOwogICAgICByZXR1cm4gTWF0aC5wb3coc2EuYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzYi5ib3VuZGluZ1NwaGVyZVJhZGl1cywgMikgPiBkaXN0Lmxlbmd0aFNxdWFyZWQoKTsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbGwgdGhlIGJvZGllcyB3aXRoaW4gdGhlIEFBQkIuCiAgICAgKi8KCgogICAgYWFiYlF1ZXJ5KHdvcmxkLCBhYWJiLCByZXN1bHQpIHsKICAgICAgY29uc29sZS53YXJuKCcuYWFiYlF1ZXJ5IGlzIG5vdCBpbXBsZW1lbnRlZCBpbiB0aGlzIEJyb2FkcGhhc2Ugc3ViY2xhc3MuJyk7CiAgICAgIHJldHVybiBbXTsKICAgIH0KCiAgfSAvLyBUZW1wIG9iamVjdHMKCiAgY29uc3QgQnJvYWRwaGFzZV9jb2xsaXNpb25QYWlyc19yID0gbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBRdWF0ZXJuaW9uKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV90ZW1wID0gewogICAga2V5czogW10KICB9OwogIGNvbnN0IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxID0gW107CiAgY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDIgPSBbXTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogTmFpdmUgYnJvYWRwaGFzZSBpbXBsZW1lbnRhdGlvbiwgdXNlZCBpbiBsYWNrIG9mIGJldHRlciBvbmVzLgogICAqCiAgICogVGhlIG5haXZlIGJyb2FkcGhhc2UgbG9va3MgYXQgYWxsIHBvc3NpYmxlIHBhaXJzIHdpdGhvdXQgcmVzdHJpY3Rpb24sIHRoZXJlZm9yZSBpdCBoYXMgY29tcGxleGl0eSBOXjIgXyh3aGljaCBpcyBiYWQpXwogICAqLwogIGNsYXNzIE5haXZlQnJvYWRwaGFzZSBleHRlbmRzIEJyb2FkcGhhc2UgewogICAgLyoqCiAgICAgKiBAdG9kbyBSZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvcgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFsbCB0aGUgY29sbGlzaW9uIHBhaXJzIGluIHRoZSBwaHlzaWNzIHdvcmxkCiAgICAgKi8KCgogICAgY29sbGlzaW9uUGFpcnMod29ybGQsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllczsKICAgICAgY29uc3QgbiA9IGJvZGllcy5sZW5ndGg7CiAgICAgIGxldCBiaTsKICAgICAgbGV0IGJqOyAvLyBOYWl2ZSBOXjIgZnR3IQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IG47IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBpOyBqKyspIHsKICAgICAgICAgIGJpID0gYm9kaWVzW2ldOwogICAgICAgICAgYmogPSBib2RpZXNbal07CgogICAgICAgICAgaWYgKCF0aGlzLm5lZWRCcm9hZHBoYXNlQ29sbGlzaW9uKGJpLCBiaikpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcGFpcnMxLCBwYWlyczIpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiBhbiBBQUJCLgogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSByZXN1bHRpbmcgYm9kaWVzIGluLgogICAgICovCgoKICAgIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IFtdOwogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmxkLmJvZGllcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGIgPSB3b3JsZC5ib2RpZXNbaV07CgogICAgICAgIGlmIChiLmFhYmJOZWVkc1VwZGF0ZSkgewogICAgICAgICAgYi51cGRhdGVBQUJCKCk7CiAgICAgICAgfSAvLyBVZ2x5IGhhY2sgdW50aWwgQm9keSBnZXRzIGFhYmIKCgogICAgICAgIGlmIChiLmFhYmIub3ZlcmxhcHMoYWFiYikpIHsKICAgICAgICAgIHJlc3VsdC5wdXNoKGIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgfQoKICAvKioKICAgKiBTdG9yYWdlIGZvciBSYXkgY2FzdGluZyBkYXRhCiAgICovCiAgY2xhc3MgUmF5Y2FzdFJlc3VsdCB7CiAgICAvKioKICAgICAqIHJheUZyb21Xb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiByYXlUb1dvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGhpdE5vcm1hbFdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGhpdFBvaW50V29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogaGFzSGl0CiAgICAgKi8KCiAgICAvKioKICAgICAqIHNoYXBlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGJvZHkKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGluZGV4IG9mIHRoZSBoaXQgdHJpYW5nbGUsIGlmIHRoZSBoaXQgc2hhcGUgd2FzIGEgdHJpbWVzaAogICAgICovCgogICAgLyoqCiAgICAgKiBEaXN0YW5jZSB0byB0aGUgaGl0LiBXaWxsIGJlIHNldCB0byAtMSBpZiB0aGVyZSB3YXMgbm8gaGl0CiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHRoZSByYXkgc2hvdWxkIHN0b3AgdHJhdmVyc2luZyB0aGUgYm9kaWVzCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLnJheUZyb21Xb3JsZCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucmF5VG9Xb3JsZCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmhpdFBvaW50V29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmhhc0hpdCA9IGZhbHNlOwogICAgICB0aGlzLnNoYXBlID0gbnVsbDsKICAgICAgdGhpcy5ib2R5ID0gbnVsbDsKICAgICAgdGhpcy5oaXRGYWNlSW5kZXggPSAtMTsKICAgICAgdGhpcy5kaXN0YW5jZSA9IC0xOwogICAgICB0aGlzLnNob3VsZFN0b3AgPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogUmVzZXQgYWxsIHJlc3VsdCBkYXRhLgogICAgICovCgoKICAgIHJlc2V0KCkgewogICAgICB0aGlzLnJheUZyb21Xb3JsZC5zZXRaZXJvKCk7CiAgICAgIHRoaXMucmF5VG9Xb3JsZC5zZXRaZXJvKCk7CiAgICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLmhpdFBvaW50V29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLmhhc0hpdCA9IGZhbHNlOwogICAgICB0aGlzLnNoYXBlID0gbnVsbDsKICAgICAgdGhpcy5ib2R5ID0gbnVsbDsKICAgICAgdGhpcy5oaXRGYWNlSW5kZXggPSAtMTsKICAgICAgdGhpcy5kaXN0YW5jZSA9IC0xOwogICAgICB0aGlzLnNob3VsZFN0b3AgPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogYWJvcnQKICAgICAqLwoKCiAgICBhYm9ydCgpIHsKICAgICAgdGhpcy5zaG91bGRTdG9wID0gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHJlc3VsdCBkYXRhLgogICAgICovCgoKICAgIHNldChyYXlGcm9tV29ybGQsIHJheVRvV29ybGQsIGhpdE5vcm1hbFdvcmxkLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpIHsKICAgICAgdGhpcy5yYXlGcm9tV29ybGQuY29weShyYXlGcm9tV29ybGQpOwogICAgICB0aGlzLnJheVRvV29ybGQuY29weShyYXlUb1dvcmxkKTsKICAgICAgdGhpcy5oaXROb3JtYWxXb3JsZC5jb3B5KGhpdE5vcm1hbFdvcmxkKTsKICAgICAgdGhpcy5oaXRQb2ludFdvcmxkLmNvcHkoaGl0UG9pbnRXb3JsZCk7CiAgICAgIHRoaXMuc2hhcGUgPSBzaGFwZTsKICAgICAgdGhpcy5ib2R5ID0gYm9keTsKICAgICAgdGhpcy5kaXN0YW5jZSA9IGRpc3RhbmNlOwogICAgfQoKICB9CgogIGxldCBfU2hhcGUkdHlwZXMkU1BIRVJFLCBfU2hhcGUkdHlwZXMkUExBTkUsIF9TaGFwZSR0eXBlcyRCT1gsIF9TaGFwZSR0eXBlcyRDWUxJTkRFUiwgX1NoYXBlJHR5cGVzJENPTlZFWFBPLCBfU2hhcGUkdHlwZXMkSEVJR0hURkksIF9TaGFwZSR0eXBlcyRUUklNRVNIOwoKICAvKioKICAgKiBSQVlfTU9ERVMKICAgKi8KICBjb25zdCBSQVlfTU9ERVMgPSB7CiAgICAvKiogQ0xPU0VTVCAqLwogICAgQ0xPU0VTVDogMSwKCiAgICAvKiogQU5ZICovCiAgICBBTlk6IDIsCgogICAgLyoqIEFMTCAqLwogICAgQUxMOiA0CiAgfTsKICAvKioKICAgKiBSYXlNb2RlCiAgICovCgogIF9TaGFwZSR0eXBlcyRTUEhFUkUgPSBTaGFwZS50eXBlcy5TUEhFUkU7CiAgX1NoYXBlJHR5cGVzJFBMQU5FID0gU2hhcGUudHlwZXMuUExBTkU7CiAgX1NoYXBlJHR5cGVzJEJPWCA9IFNoYXBlLnR5cGVzLkJPWDsKICBfU2hhcGUkdHlwZXMkQ1lMSU5ERVIgPSBTaGFwZS50eXBlcy5DWUxJTkRFUjsKICBfU2hhcGUkdHlwZXMkQ09OVkVYUE8gPSBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OOwogIF9TaGFwZSR0eXBlcyRIRUlHSFRGSSA9IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxEOwogIF9TaGFwZSR0eXBlcyRUUklNRVNIID0gU2hhcGUudHlwZXMuVFJJTUVTSDsKCiAgLyoqCiAgICogQSBsaW5lIGluIDNEIHNwYWNlIHRoYXQgaW50ZXJzZWN0cyBib2RpZXMgYW5kIHJldHVybiBwb2ludHMuCiAgICovCiAgY2xhc3MgUmF5IHsKICAgIC8qKgogICAgICogZnJvbQogICAgICovCgogICAgLyoqCiAgICAgKiB0bwogICAgICovCgogICAgLyoqCiAgICAgKiBkaXJlY3Rpb24KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHByZWNpc2lvbiBvZiB0aGUgcmF5LiBVc2VkIHdoZW4gY2hlY2tpbmcgcGFyYWxsZWxpdHkgZXRjLgogICAgICogQGRlZmF1bHQgMC4wMDAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byBgZmFsc2VgIGlmIHlvdSBkb24ndCB3YW50IHRoZSBSYXkgdG8gdGFrZSBgY29sbGlzaW9uUmVzcG9uc2VgIGZsYWdzIGludG8gYWNjb3VudCBvbiBib2RpZXMgYW5kIHNoYXBlcy4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogSWYgc2V0IHRvIGB0cnVlYCwgdGhlIHJheSBza2lwcyBhbnkgaGl0cyB3aXRoIG5vcm1hbC5kb3QocmF5RGlyZWN0aW9uKSA8IDAuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBjb2xsaXNpb25GaWx0ZXJNYXNrCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBjb2xsaXNpb25GaWx0ZXJHcm91cAogICAgICogQGRlZmF1bHQgLTEKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGludGVyc2VjdGlvbiBtb2RlLiBTaG91bGQgYmUgUmF5LkFOWSwgUmF5LkFMTCBvciBSYXkuQ0xPU0VTVC4KICAgICAqIEBkZWZhdWx0IFJBWS5BTlkKICAgICAqLwoKICAgIC8qKgogICAgICogQ3VycmVudCByZXN1bHQgb2JqZWN0LgogICAgICovCgogICAgLyoqCiAgICAgKiBXaWxsIGJlIHNldCB0byBgdHJ1ZWAgZHVyaW5nIGludGVyc2VjdFdvcmxkKCkgaWYgdGhlIHJheSBoaXQgYW55dGhpbmcuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFVzZXItcHJvdmlkZWQgcmVzdWx0IGNhbGxiYWNrLiBXaWxsIGJlIHVzZWQgaWYgbW9kZSBpcyBSYXkuQUxMLgogICAgICovCgogICAgLyoqCiAgICAgKiBDTE9TRVNUCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFOWQogICAgICovCgogICAgLyoqCiAgICAgKiBBTEwKICAgICAqLwogICAgZ2V0IFtfU2hhcGUkdHlwZXMkU1BIRVJFXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdFNwaGVyZTsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRQTEFORV0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RQbGFuZTsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRCT1hdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Qm94OwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJENZTElOREVSXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdENvbnZleDsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRDT05WRVhQT10oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkSEVJR0hURkldKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkVFJJTUVTSF0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RUcmltZXNoOwogICAgfQoKICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvKSB7CiAgICAgIGlmIChmcm9tID09PSB2b2lkIDApIHsKICAgICAgICBmcm9tID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHRvID09PSB2b2lkIDApIHsKICAgICAgICB0byA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuZnJvbSA9IGZyb20uY2xvbmUoKTsKICAgICAgdGhpcy50byA9IHRvLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5wcmVjaXNpb24gPSAwLjAwMDE7CiAgICAgIHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHRydWU7CiAgICAgIHRoaXMuc2tpcEJhY2tmYWNlcyA9IGZhbHNlOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSAtMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IC0xOwogICAgICB0aGlzLm1vZGUgPSBSYXkuQU5ZOwogICAgICB0aGlzLnJlc3VsdCA9IG5ldyBSYXljYXN0UmVzdWx0KCk7CiAgICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7CgogICAgICB0aGlzLmNhbGxiYWNrID0gcmVzdWx0ID0+IHt9OwogICAgfQogICAgLyoqCiAgICAgKiBEbyBpdGVyc2VjdGlvbiBhZ2FpbnN0IGFsbCBib2RpZXMgaW4gdGhlIGdpdmVuIFdvcmxkLgogICAgICogQHJldHVybiBUcnVlIGlmIHRoZSByYXkgaGl0IGFueXRoaW5nLCBvdGhlcndpc2UgZmFsc2UuCiAgICAgKi8KCgogICAgaW50ZXJzZWN0V29ybGQod29ybGQsIG9wdGlvbnMpIHsKICAgICAgdGhpcy5tb2RlID0gb3B0aW9ucy5tb2RlIHx8IFJheS5BTlk7CiAgICAgIHRoaXMucmVzdWx0ID0gb3B0aW9ucy5yZXN1bHQgfHwgbmV3IFJheWNhc3RSZXN1bHQoKTsKICAgICAgdGhpcy5za2lwQmFja2ZhY2VzID0gISFvcHRpb25zLnNraXBCYWNrZmFjZXM7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzayA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrIDogLTE7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogLTE7CiAgICAgIHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHR5cGVvZiBvcHRpb25zLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5jaGVja0NvbGxpc2lvblJlc3BvbnNlIDogdHJ1ZTsKCiAgICAgIGlmIChvcHRpb25zLmZyb20pIHsKICAgICAgICB0aGlzLmZyb20uY29weShvcHRpb25zLmZyb20pOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy50bykgewogICAgICAgIHRoaXMudG8uY29weShvcHRpb25zLnRvKTsKICAgICAgfQoKICAgICAgdGhpcy5jYWxsYmFjayA9IG9wdGlvbnMuY2FsbGJhY2sgfHwgKCgpID0+IHt9KTsKCiAgICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7CiAgICAgIHRoaXMucmVzdWx0LnJlc2V0KCk7CiAgICAgIHRoaXMudXBkYXRlRGlyZWN0aW9uKCk7CiAgICAgIHRoaXMuZ2V0QUFCQih0bXBBQUJCJDEpOwogICAgICB0bXBBcnJheS5sZW5ndGggPSAwOwogICAgICB3b3JsZC5icm9hZHBoYXNlLmFhYmJRdWVyeSh3b3JsZCwgdG1wQUFCQiQxLCB0bXBBcnJheSk7CiAgICAgIHRoaXMuaW50ZXJzZWN0Qm9kaWVzKHRtcEFycmF5KTsKICAgICAgcmV0dXJuIHRoaXMuaGFzSGl0OwogICAgfQogICAgLyoqCiAgICAgKiBTaG9vdCBhIHJheSBhdCBhIGJvZHksIGdldCBiYWNrIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoaXQuCiAgICAgKiBAZGVwcmVjYXRlZCBAcGFyYW0gcmVzdWx0IHNldCB0aGUgcmVzdWx0IHByb3BlcnR5IG9mIHRoZSBSYXkgaW5zdGVhZC4KICAgICAqLwoKCiAgICBpbnRlcnNlY3RCb2R5KGJvZHksIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTsKICAgICAgfQoKICAgICAgY29uc3QgY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZTsKCiAgICAgIGlmIChjaGVja0NvbGxpc2lvblJlc3BvbnNlICYmICFib2R5LmNvbGxpc2lvblJlc3BvbnNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoKHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgJiBib2R5LmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwIHx8IChib2R5LmNvbGxpc2lvbkZpbHRlckdyb3VwICYgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrKSA9PT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgeGkgPSBpbnRlcnNlY3RCb2R5X3hpOwogICAgICBjb25zdCBxaSA9IGludGVyc2VjdEJvZHlfcWk7CgogICAgICBmb3IgKGxldCBpID0gMCwgTiA9IGJvZHkuc2hhcGVzLmxlbmd0aDsgaSA8IE47IGkrKykgewogICAgICAgIGNvbnN0IHNoYXBlID0gYm9keS5zaGFwZXNbaV07CgogICAgICAgIGlmIChjaGVja0NvbGxpc2lvblJlc3BvbnNlICYmICFzaGFwZS5jb2xsaXNpb25SZXNwb25zZSkgewogICAgICAgICAgY29udGludWU7IC8vIFNraXAKICAgICAgICB9CgogICAgICAgIGJvZHkucXVhdGVybmlvbi5tdWx0KGJvZHkuc2hhcGVPcmllbnRhdGlvbnNbaV0sIHFpKTsKICAgICAgICBib2R5LnF1YXRlcm5pb24udm11bHQoYm9keS5zaGFwZU9mZnNldHNbaV0sIHhpKTsKICAgICAgICB4aS52YWRkKGJvZHkucG9zaXRpb24sIHhpKTsKICAgICAgICB0aGlzLmludGVyc2VjdFNoYXBlKHNoYXBlLCBxaSwgeGksIGJvZHkpOwoKICAgICAgICBpZiAodGhpcy5yZXN1bHQuc2hvdWxkU3RvcCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNob290IGEgcmF5IGF0IGFuIGFycmF5IGJvZGllcywgZ2V0IGJhY2sgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGhpdC4KICAgICAqIEBwYXJhbSBib2RpZXMgQW4gYXJyYXkgb2YgQm9keSBvYmplY3RzLgogICAgICogQGRlcHJlY2F0ZWQgQHBhcmFtIHJlc3VsdCBzZXQgdGhlIHJlc3VsdCBwcm9wZXJ0eSBvZiB0aGUgUmF5IGluc3RlYWQuCiAgICAgKgogICAgICovCgoKICAgIGludGVyc2VjdEJvZGllcyhib2RpZXMsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBib2RpZXMubGVuZ3RoOyAhdGhpcy5yZXN1bHQuc2hvdWxkU3RvcCAmJiBpIDwgbDsgaSsrKSB7CiAgICAgICAgdGhpcy5pbnRlcnNlY3RCb2R5KGJvZGllc1tpXSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgZGlyZWN0aW9uIHZlY3Rvci4KICAgICAqLwoKCiAgICB1cGRhdGVEaXJlY3Rpb24oKSB7CiAgICAgIHRoaXMudG8udnN1Yih0aGlzLmZyb20sIHRoaXMuZGlyZWN0aW9uKTsKICAgICAgdGhpcy5kaXJlY3Rpb24ubm9ybWFsaXplKCk7CiAgICB9CgogICAgaW50ZXJzZWN0U2hhcGUoc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5KSB7CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207IC8vIENoZWNraW5nIGJvdW5kaW5nU3BoZXJlCgogICAgICBjb25zdCBkaXN0YW5jZSA9IGRpc3RhbmNlRnJvbUludGVyc2VjdGlvbihmcm9tLCB0aGlzLmRpcmVjdGlvbiwgcG9zaXRpb24pOwoKICAgICAgaWYgKGRpc3RhbmNlID4gc2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IGludGVyc2VjdE1ldGhvZCA9IHRoaXNbc2hhcGUudHlwZV07CgogICAgICBpZiAoaW50ZXJzZWN0TWV0aG9kKSB7CiAgICAgICAgaW50ZXJzZWN0TWV0aG9kLmNhbGwodGhpcywgc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCBzaGFwZSk7CiAgICAgIH0KICAgIH0KCiAgICBfaW50ZXJzZWN0Qm94KGJveCwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdENvbnZleChib3guY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSk7CiAgICB9CgogICAgX2ludGVyc2VjdFBsYW5lKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkgewogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uOyAvLyBHZXQgcGxhbmUgbm9ybWFsCgogICAgICBjb25zdCB3b3JsZE5vcm1hbCA9IG5ldyBWZWMzKDAsIDAsIDEpOwogICAgICBxdWF0LnZtdWx0KHdvcmxkTm9ybWFsLCB3b3JsZE5vcm1hbCk7CiAgICAgIGNvbnN0IGxlbiA9IG5ldyBWZWMzKCk7CiAgICAgIGZyb20udnN1Yihwb3NpdGlvbiwgbGVuKTsKICAgICAgY29uc3QgcGxhbmVUb0Zyb20gPSBsZW4uZG90KHdvcmxkTm9ybWFsKTsKICAgICAgdG8udnN1Yihwb3NpdGlvbiwgbGVuKTsKICAgICAgY29uc3QgcGxhbmVUb1RvID0gbGVuLmRvdCh3b3JsZE5vcm1hbCk7CgogICAgICBpZiAocGxhbmVUb0Zyb20gKiBwbGFuZVRvVG8gPiAwKSB7CiAgICAgICAgLy8gImZyb20iIGFuZCAidG8iIGFyZSBvbiB0aGUgc2FtZSBzaWRlIG9mIHRoZSBwbGFuZS4uLiBiYWlsIG91dAogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGZyb20uZGlzdGFuY2VUbyh0bykgPCBwbGFuZVRvRnJvbSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3Qgbl9kb3RfZGlyID0gd29ybGROb3JtYWwuZG90KGRpcmVjdGlvbik7CgogICAgICBpZiAoTWF0aC5hYnMobl9kb3RfZGlyKSA8IHRoaXMucHJlY2lzaW9uKSB7CiAgICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBwbGFuZVBvaW50VG9Gcm9tID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgZGlyX3NjYWxlZF93aXRoX3QgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBoaXRQb2ludFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgZnJvbS52c3ViKHBvc2l0aW9uLCBwbGFuZVBvaW50VG9Gcm9tKTsKICAgICAgY29uc3QgdCA9IC13b3JsZE5vcm1hbC5kb3QocGxhbmVQb2ludFRvRnJvbSkgLyBuX2RvdF9kaXI7CiAgICAgIGRpcmVjdGlvbi5zY2FsZSh0LCBkaXJfc2NhbGVkX3dpdGhfdCk7CiAgICAgIGZyb20udmFkZChkaXJfc2NhbGVkX3dpdGhfdCwgaGl0UG9pbnRXb3JsZCk7CiAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKHdvcmxkTm9ybWFsLCBoaXRQb2ludFdvcmxkLCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgd29ybGQgQUFCQiBvZiB0aGUgcmF5LgogICAgICovCgoKICAgIGdldEFBQkIoYWFiYikgewogICAgICBjb25zdCB7CiAgICAgICAgbG93ZXJCb3VuZCwKICAgICAgICB1cHBlckJvdW5kCiAgICAgIH0gPSBhYWJiOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGxvd2VyQm91bmQueCA9IE1hdGgubWluKHRvLngsIGZyb20ueCk7CiAgICAgIGxvd2VyQm91bmQueSA9IE1hdGgubWluKHRvLnksIGZyb20ueSk7CiAgICAgIGxvd2VyQm91bmQueiA9IE1hdGgubWluKHRvLnosIGZyb20ueik7CiAgICAgIHVwcGVyQm91bmQueCA9IE1hdGgubWF4KHRvLngsIGZyb20ueCk7CiAgICAgIHVwcGVyQm91bmQueSA9IE1hdGgubWF4KHRvLnksIGZyb20ueSk7CiAgICAgIHVwcGVyQm91bmQueiA9IE1hdGgubWF4KHRvLnosIGZyb20ueik7CiAgICB9CgogICAgX2ludGVyc2VjdEhlaWdodGZpZWxkKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkgewogICAgICBzaGFwZS5kYXRhOwogICAgICBzaGFwZS5lbGVtZW50U2l6ZTsgLy8gQ29udmVydCB0aGUgcmF5IHRvIGxvY2FsIGhlaWdodGZpZWxkIGNvb3JkaW5hdGVzCgogICAgICBjb25zdCBsb2NhbFJheSA9IGludGVyc2VjdEhlaWdodGZpZWxkX2xvY2FsUmF5OyAvL25ldyBSYXkodGhpcy5mcm9tLCB0aGlzLnRvKTsKCiAgICAgIGxvY2FsUmF5LmZyb20uY29weSh0aGlzLmZyb20pOwogICAgICBsb2NhbFJheS50by5jb3B5KHRoaXMudG8pOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGxvY2FsUmF5LmZyb20sIGxvY2FsUmF5LmZyb20pOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGxvY2FsUmF5LnRvLCBsb2NhbFJheS50byk7CiAgICAgIGxvY2FsUmF5LnVwZGF0ZURpcmVjdGlvbigpOyAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkYXRhIHBvaW50cyB0byB0ZXN0IGFnYWluc3QKCiAgICAgIGNvbnN0IGluZGV4ID0gaW50ZXJzZWN0SGVpZ2h0ZmllbGRfaW5kZXg7CiAgICAgIGxldCBpTWluWDsKICAgICAgbGV0IGlNaW5ZOwogICAgICBsZXQgaU1heFg7CiAgICAgIGxldCBpTWF4WTsgLy8gU2V0IHRvIG1heAoKICAgICAgaU1pblggPSBpTWluWSA9IDA7CiAgICAgIGlNYXhYID0gaU1heFkgPSBzaGFwZS5kYXRhLmxlbmd0aCAtIDE7CiAgICAgIGNvbnN0IGFhYmIgPSBuZXcgQUFCQigpOwogICAgICBsb2NhbFJheS5nZXRBQUJCKGFhYmIpOwogICAgICBzaGFwZS5nZXRJbmRleE9mUG9zaXRpb24oYWFiYi5sb3dlckJvdW5kLngsIGFhYmIubG93ZXJCb3VuZC55LCBpbmRleCwgdHJ1ZSk7CiAgICAgIGlNaW5YID0gTWF0aC5tYXgoaU1pblgsIGluZGV4WzBdKTsKICAgICAgaU1pblkgPSBNYXRoLm1heChpTWluWSwgaW5kZXhbMV0pOwogICAgICBzaGFwZS5nZXRJbmRleE9mUG9zaXRpb24oYWFiYi51cHBlckJvdW5kLngsIGFhYmIudXBwZXJCb3VuZC55LCBpbmRleCwgdHJ1ZSk7CiAgICAgIGlNYXhYID0gTWF0aC5taW4oaU1heFgsIGluZGV4WzBdICsgMSk7CiAgICAgIGlNYXhZID0gTWF0aC5taW4oaU1heFksIGluZGV4WzFdICsgMSk7CgogICAgICBmb3IgKGxldCBpID0gaU1pblg7IGkgPCBpTWF4WDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IGlNaW5ZOyBqIDwgaU1heFk7IGorKykgewogICAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHNoYXBlLmdldEFhYmJBdEluZGV4KGksIGosIGFhYmIpOwoKICAgICAgICAgIGlmICghYWFiYi5vdmVybGFwc1JheShsb2NhbFJheSkpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9IC8vIExvd2VyIHRyaWFuZ2xlCgoKICAgICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdCwgc2hhcGUucGlsbGFyT2Zmc2V0LCB3b3JsZFBpbGxhck9mZnNldCk7CgogICAgICAgICAgdGhpcy5faW50ZXJzZWN0Q29udmV4KHNoYXBlLnBpbGxhckNvbnZleCwgcXVhdCwgd29ybGRQaWxsYXJPZmZzZXQsIGJvZHksIHJlcG9ydGVkU2hhcGUsIGludGVyc2VjdENvbnZleE9wdGlvbnMpOwoKICAgICAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGUKCgogICAgICAgICAgc2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIHNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIHRoaXMuX2ludGVyc2VjdENvbnZleChzaGFwZS5waWxsYXJDb252ZXgsIHF1YXQsIHdvcmxkUGlsbGFyT2Zmc2V0LCBib2R5LCByZXBvcnRlZFNoYXBlLCBpbnRlcnNlY3RDb252ZXhPcHRpb25zKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBfaW50ZXJzZWN0U3BoZXJlKHNwaGVyZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCByID0gc3BoZXJlLnJhZGl1czsKICAgICAgY29uc3QgYSA9ICh0by54IC0gZnJvbS54KSAqKiAyICsgKHRvLnkgLSBmcm9tLnkpICoqIDIgKyAodG8ueiAtIGZyb20ueikgKiogMjsKICAgICAgY29uc3QgYiA9IDIgKiAoKHRvLnggLSBmcm9tLngpICogKGZyb20ueCAtIHBvc2l0aW9uLngpICsgKHRvLnkgLSBmcm9tLnkpICogKGZyb20ueSAtIHBvc2l0aW9uLnkpICsgKHRvLnogLSBmcm9tLnopICogKGZyb20ueiAtIHBvc2l0aW9uLnopKTsKICAgICAgY29uc3QgYyA9IChmcm9tLnggLSBwb3NpdGlvbi54KSAqKiAyICsgKGZyb20ueSAtIHBvc2l0aW9uLnkpICoqIDIgKyAoZnJvbS56IC0gcG9zaXRpb24ueikgKiogMiAtIHIgKiogMjsKICAgICAgY29uc3QgZGVsdGEgPSBiICoqIDIgLSA0ICogYSAqIGM7CiAgICAgIGNvbnN0IGludGVyc2VjdGlvblBvaW50ID0gUmF5X2ludGVyc2VjdFNwaGVyZV9pbnRlcnNlY3Rpb25Qb2ludDsKICAgICAgY29uc3Qgbm9ybWFsID0gUmF5X2ludGVyc2VjdFNwaGVyZV9ub3JtYWw7CgogICAgICBpZiAoZGVsdGEgPCAwKSB7CiAgICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uCiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKGRlbHRhID09PSAwKSB7CiAgICAgICAgLy8gc2luZ2xlIGludGVyc2VjdGlvbiBwb2ludAogICAgICAgIGZyb20ubGVycCh0bywgZGVsdGEsIGludGVyc2VjdGlvblBvaW50KTsKICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludC52c3ViKHBvc2l0aW9uLCBub3JtYWwpOwogICAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgZDEgPSAoLWIgLSBNYXRoLnNxcnQoZGVsdGEpKSAvICgyICogYSk7CiAgICAgICAgY29uc3QgZDIgPSAoLWIgKyBNYXRoLnNxcnQoZGVsdGEpKSAvICgyICogYSk7CgogICAgICAgIGlmIChkMSA+PSAwICYmIGQxIDw9IDEpIHsKICAgICAgICAgIGZyb20ubGVycCh0bywgZDEsIGludGVyc2VjdGlvblBvaW50KTsKICAgICAgICAgIGludGVyc2VjdGlvblBvaW50LnZzdWIocG9zaXRpb24sIG5vcm1hbCk7CiAgICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5yZXN1bHQuc2hvdWxkU3RvcCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGQyID49IDAgJiYgZDIgPD0gMSkgewogICAgICAgICAgZnJvbS5sZXJwKHRvLCBkMiwgaW50ZXJzZWN0aW9uUG9pbnQpOwogICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQudnN1Yihwb3NpdGlvbiwgbm9ybWFsKTsKICAgICAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKG5vcm1hbCwgaW50ZXJzZWN0aW9uUG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIC0xKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBfaW50ZXJzZWN0Q29udmV4KHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgb3B0aW9ucykgewogICAgICBjb25zdCBub3JtYWwgPSBpbnRlcnNlY3RDb252ZXhfbm9ybWFsOwogICAgICBjb25zdCB2ZWN0b3IgPSBpbnRlcnNlY3RDb252ZXhfdmVjdG9yOwogICAgICBjb25zdCBmYWNlTGlzdCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5mYWNlTGlzdCB8fCBudWxsOyAvLyBDaGVja2luZyBmYWNlcwoKICAgICAgY29uc3QgZmFjZXMgPSBzaGFwZS5mYWNlczsKICAgICAgY29uc3QgdmVydGljZXMgPSBzaGFwZS52ZXJ0aWNlczsKICAgICAgY29uc3Qgbm9ybWFscyA9IHNoYXBlLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbjsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBmcm9tVG9EaXN0YW5jZSA9IGZyb20uZGlzdGFuY2VUbyh0byk7CiAgICAgIGNvbnN0IE5mYWNlcyA9IGZhY2VMaXN0ID8gZmFjZUxpc3QubGVuZ3RoIDogZmFjZXMubGVuZ3RoOwogICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsKCiAgICAgIGZvciAobGV0IGogPSAwOyAhcmVzdWx0LnNob3VsZFN0b3AgJiYgaiA8IE5mYWNlczsgaisrKSB7CiAgICAgICAgY29uc3QgZmkgPSBmYWNlTGlzdCA/IGZhY2VMaXN0W2pdIDogajsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbZmldOwogICAgICAgIGNvbnN0IGZhY2VOb3JtYWwgPSBub3JtYWxzW2ZpXTsKICAgICAgICBjb25zdCBxID0gcXVhdDsKICAgICAgICBjb25zdCB4ID0gcG9zaXRpb247IC8vIGRldGVybWluZSBpZiByYXkgaW50ZXJzZWN0cyB0aGUgcGxhbmUgb2YgdGhlIGZhY2UKICAgICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWwKICAgICAgICAvLyBHZXQgcGxhbmUgcG9pbnQgaW4gd29ybGQgY29vcmRpbmF0ZXMuLi4KCiAgICAgICAgdmVjdG9yLmNvcHkodmVydGljZXNbZmFjZVswXV0pOwogICAgICAgIHEudm11bHQodmVjdG9yLCB2ZWN0b3IpOwogICAgICAgIHZlY3Rvci52YWRkKHgsIHZlY3Rvcik7IC8vIC4uLmJ1dCBtYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSByYXkgZnJvbS4gV2UnbGwgZml4IHRoaXMgbGF0ZXIuCgogICAgICAgIHZlY3Rvci52c3ViKGZyb20sIHZlY3Rvcik7IC8vIEdldCBwbGFuZSBub3JtYWwKCiAgICAgICAgcS52bXVsdChmYWNlTm9ybWFsLCBub3JtYWwpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZwoKICAgICAgICBjb25zdCBkb3QgPSBkaXJlY3Rpb24uZG90KG5vcm1hbCk7IC8vIEJhaWwgb3V0IGlmIHJheSBhbmQgcGxhbmUgYXJlIHBhcmFsbGVsCgogICAgICAgIGlmIChNYXRoLmFicyhkb3QpIDwgdGhpcy5wcmVjaXNpb24pIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gLy8gY2FsYyBkaXN0YW5jZSB0byBwbGFuZQoKCiAgICAgICAgY29uc3Qgc2NhbGFyID0gbm9ybWFsLmRvdCh2ZWN0b3IpIC8gZG90OyAvLyBpZiBuZWdhdGl2ZSBkaXN0YW5jZSwgdGhlbiBwbGFuZSBpcyBiZWhpbmQgcmF5CgogICAgICAgIGlmIChzY2FsYXIgPCAwKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIGlmIChkb3QgPCAwKSB7CiAgICAgICAgLy8gSW50ZXJzZWN0aW9uIHBvaW50IGlzIGZyb20gKyBkaXJlY3Rpb24gKiBzY2FsYXIKCgogICAgICAgIGRpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTsKICAgICAgICBpbnRlcnNlY3RQb2ludC52YWRkKGZyb20sIGludGVyc2VjdFBvaW50KTsgLy8gYSBpcyB0aGUgcG9pbnQgd2UgY29tcGFyZSBwb2ludHMgYiBhbmQgYyB3aXRoLgoKICAgICAgICBhLmNvcHkodmVydGljZXNbZmFjZVswXV0pOwogICAgICAgIHEudm11bHQoYSwgYSk7CiAgICAgICAgeC52YWRkKGEsIGEpOwoKICAgICAgICBmb3IgKGxldCBpID0gMTsgIXJlc3VsdC5zaG91bGRTdG9wICYmIGkgPCBmYWNlLmxlbmd0aCAtIDE7IGkrKykgewogICAgICAgICAgLy8gVHJhbnNmb3JtIDMgdmVydGljZXMgdG8gd29ybGQgY29vcmRzCiAgICAgICAgICBiLmNvcHkodmVydGljZXNbZmFjZVtpXV0pOwogICAgICAgICAgYy5jb3B5KHZlcnRpY2VzW2ZhY2VbaSArIDFdXSk7CiAgICAgICAgICBxLnZtdWx0KGIsIGIpOwogICAgICAgICAgcS52bXVsdChjLCBjKTsKICAgICAgICAgIHgudmFkZChiLCBiKTsKICAgICAgICAgIHgudmFkZChjLCBjKTsKICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gaW50ZXJzZWN0UG9pbnQuZGlzdGFuY2VUbyhmcm9tKTsKCiAgICAgICAgICBpZiAoIShSYXkucG9pbnRJblRyaWFuZ2xlKGludGVyc2VjdFBvaW50LCBhLCBiLCBjKSB8fCBSYXkucG9pbnRJblRyaWFuZ2xlKGludGVyc2VjdFBvaW50LCBiLCBhLCBjKSkgfHwgZGlzdGFuY2UgPiBmcm9tVG9EaXN0YW5jZSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdFBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCBmaSk7CiAgICAgICAgfSAvLyB9CgogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIE9wdGltaXplIGJ5IHRyYW5zZm9ybWluZyB0aGUgd29ybGQgdG8gbG9jYWwgc3BhY2UgZmlyc3QuCiAgICAgKiBAdG9kbyBVc2UgT2N0cmVlIGxvb2t1cAogICAgICovCgoKICAgIF9pbnRlcnNlY3RUcmltZXNoKG1lc2gsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlLCBvcHRpb25zKSB7CiAgICAgIGNvbnN0IG5vcm1hbCA9IGludGVyc2VjdFRyaW1lc2hfbm9ybWFsOwogICAgICBjb25zdCB0cmlhbmdsZXMgPSBpbnRlcnNlY3RUcmltZXNoX3RyaWFuZ2xlczsKICAgICAgY29uc3QgdHJlZVRyYW5zZm9ybSA9IGludGVyc2VjdFRyaW1lc2hfdHJlZVRyYW5zZm9ybTsKICAgICAgY29uc3QgdmVjdG9yID0gaW50ZXJzZWN0Q29udmV4X3ZlY3RvcjsKICAgICAgY29uc3QgbG9jYWxEaXJlY3Rpb24gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRGlyZWN0aW9uOwogICAgICBjb25zdCBsb2NhbEZyb20gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRnJvbTsKICAgICAgY29uc3QgbG9jYWxUbyA9IGludGVyc2VjdFRyaW1lc2hfbG9jYWxUbzsKICAgICAgY29uc3Qgd29ybGRJbnRlcnNlY3RQb2ludCA9IGludGVyc2VjdFRyaW1lc2hfd29ybGRJbnRlcnNlY3RQb2ludDsKICAgICAgY29uc3Qgd29ybGROb3JtYWwgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsOyAvLyBDaGVja2luZyBmYWNlcwoKICAgICAgY29uc3QgaW5kaWNlcyA9IG1lc2guaW5kaWNlczsKICAgICAgbWVzaC52ZXJ0aWNlczsgLy8gY29uc3Qgbm9ybWFscyA9IG1lc2guZmFjZU5vcm1hbHMKCiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb247CiAgICAgIHRyZWVUcmFuc2Zvcm0ucG9zaXRpb24uY29weShwb3NpdGlvbik7CiAgICAgIHRyZWVUcmFuc2Zvcm0ucXVhdGVybmlvbi5jb3B5KHF1YXQpOyAvLyBUcmFuc2Zvcm0gcmF5IHRvIGxvY2FsIHNwYWNlIQoKICAgICAgVHJhbnNmb3JtLnZlY3RvclRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgZGlyZWN0aW9uLCBsb2NhbERpcmVjdGlvbik7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgZnJvbSwgbG9jYWxGcm9tKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCB0bywgbG9jYWxUbyk7CiAgICAgIGxvY2FsVG8ueCAqPSBtZXNoLnNjYWxlLng7CiAgICAgIGxvY2FsVG8ueSAqPSBtZXNoLnNjYWxlLnk7CiAgICAgIGxvY2FsVG8ueiAqPSBtZXNoLnNjYWxlLno7CiAgICAgIGxvY2FsRnJvbS54ICo9IG1lc2guc2NhbGUueDsKICAgICAgbG9jYWxGcm9tLnkgKj0gbWVzaC5zY2FsZS55OwogICAgICBsb2NhbEZyb20ueiAqPSBtZXNoLnNjYWxlLno7CiAgICAgIGxvY2FsVG8udnN1Yihsb2NhbEZyb20sIGxvY2FsRGlyZWN0aW9uKTsKICAgICAgbG9jYWxEaXJlY3Rpb24ubm9ybWFsaXplKCk7CiAgICAgIGNvbnN0IGZyb21Ub0Rpc3RhbmNlU3F1YXJlZCA9IGxvY2FsRnJvbS5kaXN0YW5jZVNxdWFyZWQobG9jYWxUbyk7CiAgICAgIG1lc2gudHJlZS5yYXlRdWVyeSh0aGlzLCB0cmVlVHJhbnNmb3JtLCB0cmlhbmdsZXMpOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSB0cmlhbmdsZXMubGVuZ3RoOyAhdGhpcy5yZXN1bHQuc2hvdWxkU3RvcCAmJiBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCB0cmlhbmdsZXNJbmRleCA9IHRyaWFuZ2xlc1tpXTsKICAgICAgICBtZXNoLmdldE5vcm1hbCh0cmlhbmdsZXNJbmRleCwgbm9ybWFsKTsgLy8gZGV0ZXJtaW5lIGlmIHJheSBpbnRlcnNlY3RzIHRoZSBwbGFuZSBvZiB0aGUgZmFjZQogICAgICAgIC8vIG5vdGU6IHRoaXMgd29ya3MgcmVnYXJkbGVzcyBvZiB0aGUgZGlyZWN0aW9uIG9mIHRoZSBmYWNlIG5vcm1hbAogICAgICAgIC8vIEdldCBwbGFuZSBwb2ludCBpbiB3b3JsZCBjb29yZGluYXRlcy4uLgoKICAgICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogM10sIGEpOyAvLyAuLi5idXQgbWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgcmF5IGZyb20uIFdlJ2xsIGZpeCB0aGlzIGxhdGVyLgoKICAgICAgICBhLnZzdWIobG9jYWxGcm9tLCB2ZWN0b3IpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZwoKICAgICAgICBjb25zdCBkb3QgPSBsb2NhbERpcmVjdGlvbi5kb3Qobm9ybWFsKTsgLy8gQmFpbCBvdXQgaWYgcmF5IGFuZCBwbGFuZSBhcmUgcGFyYWxsZWwKICAgICAgICAvLyBpZiAoTWF0aC5hYnMoIGRvdCApIDwgdGhpcy5wcmVjaXNpb24pewogICAgICAgIC8vICAgICBjb250aW51ZTsKICAgICAgICAvLyB9CiAgICAgICAgLy8gY2FsYyBkaXN0YW5jZSB0byBwbGFuZQoKICAgICAgICBjb25zdCBzY2FsYXIgPSBub3JtYWwuZG90KHZlY3RvcikgLyBkb3Q7IC8vIGlmIG5lZ2F0aXZlIGRpc3RhbmNlLCB0aGVuIHBsYW5lIGlzIGJlaGluZCByYXkKCiAgICAgICAgaWYgKHNjYWxhciA8IDApIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gLy8gSW50ZXJzZWN0aW9uIHBvaW50IGlzIGZyb20gKyBkaXJlY3Rpb24gKiBzY2FsYXIKCgogICAgICAgIGxvY2FsRGlyZWN0aW9uLnNjYWxlKHNjYWxhciwgaW50ZXJzZWN0UG9pbnQpOwogICAgICAgIGludGVyc2VjdFBvaW50LnZhZGQobG9jYWxGcm9tLCBpbnRlcnNlY3RQb2ludCk7IC8vIEdldCB0cmlhbmdsZSB2ZXJ0aWNlcwoKICAgICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogMyArIDFdLCBiKTsKICAgICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogMyArIDJdLCBjKTsKICAgICAgICBjb25zdCBzcXVhcmVkRGlzdGFuY2UgPSBpbnRlcnNlY3RQb2ludC5kaXN0YW5jZVNxdWFyZWQobG9jYWxGcm9tKTsKCiAgICAgICAgaWYgKCEoUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYiwgYSwgYykgfHwgUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYSwgYiwgYykpIHx8IHNxdWFyZWREaXN0YW5jZSA+IGZyb21Ub0Rpc3RhbmNlU3F1YXJlZCkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSAvLyB0cmFuc2Zvcm0gaW50ZXJzZWN0cG9pbnQgYW5kIG5vcm1hbCB0byB3b3JsZAoKCiAgICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZShxdWF0LCBub3JtYWwsIHdvcmxkTm9ybWFsKTsKICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIGludGVyc2VjdFBvaW50LCB3b3JsZEludGVyc2VjdFBvaW50KTsKICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbih3b3JsZE5vcm1hbCwgd29ybGRJbnRlcnNlY3RQb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgdHJpYW5nbGVzSW5kZXgpOwogICAgICB9CgogICAgICB0cmlhbmdsZXMubGVuZ3RoID0gMDsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybiBUcnVlIGlmIHRoZSBpbnRlcnNlY3Rpb25zIHNob3VsZCBjb250aW51ZQogICAgICovCgoKICAgIHJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBoaXRGYWNlSW5kZXgpIHsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBkaXN0YW5jZSA9IGZyb20uZGlzdGFuY2VUbyhoaXRQb2ludFdvcmxkKTsKICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZXN1bHQ7IC8vIFNraXAgYmFjayBmYWNlcz8KCiAgICAgIGlmICh0aGlzLnNraXBCYWNrZmFjZXMgJiYgbm9ybWFsLmRvdCh0aGlzLmRpcmVjdGlvbikgPiAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICByZXN1bHQuaGl0RmFjZUluZGV4ID0gdHlwZW9mIGhpdEZhY2VJbmRleCAhPT0gJ3VuZGVmaW5lZCcgPyBoaXRGYWNlSW5kZXggOiAtMTsKCiAgICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7CiAgICAgICAgY2FzZSBSYXkuQUxMOgogICAgICAgICAgdGhpcy5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgcmVzdWx0LnNldChmcm9tLCB0bywgbm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpOwogICAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7CiAgICAgICAgICB0aGlzLmNhbGxiYWNrKHJlc3VsdCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBSYXkuQ0xPU0VTVDoKICAgICAgICAgIC8vIFN0b3JlIGlmIGNsb3NlciB0aGFuIGN1cnJlbnQgY2xvc2VzdAogICAgICAgICAgaWYgKGRpc3RhbmNlIDwgcmVzdWx0LmRpc3RhbmNlIHx8ICFyZXN1bHQuaGFzSGl0KSB7CiAgICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7CiAgICAgICAgICAgIHJlc3VsdC5zZXQoZnJvbSwgdG8sIG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBSYXkuQU5ZOgogICAgICAgICAgLy8gUmVwb3J0IGFuZCBzdG9wLgogICAgICAgICAgdGhpcy5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7CiAgICAgICAgICByZXN1bHQuc2V0KGZyb20sIHRvLCBub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSk7CiAgICAgICAgICByZXN1bHQuc2hvdWxkU3RvcCA9IHRydWU7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBBcyBwZXIgIkJhcnljZW50cmljIFRlY2huaXF1ZSIgYXMgbmFtZWQKICAgICAqIHtAbGluayBodHRwczovL3d3dy5ibGFja3Bhd24uY29tL3RleHRzL3BvaW50aW5wb2x5L2RlZmF1bHQuaHRtbCBoZXJlfSBidXQgd2l0aG91dCB0aGUgZGl2aXNpb24KICAgICAqLwoKCiAgICBzdGF0aWMgcG9pbnRJblRyaWFuZ2xlKHAsIGEsIGIsIGMpIHsKICAgICAgYy52c3ViKGEsIHYwKTsKICAgICAgYi52c3ViKGEsIHYxKTsKICAgICAgcC52c3ViKGEsIHYyKTsKICAgICAgY29uc3QgZG90MDAgPSB2MC5kb3QodjApOwogICAgICBjb25zdCBkb3QwMSA9IHYwLmRvdCh2MSk7CiAgICAgIGNvbnN0IGRvdDAyID0gdjAuZG90KHYyKTsKICAgICAgY29uc3QgZG90MTEgPSB2MS5kb3QodjEpOwogICAgICBjb25zdCBkb3QxMiA9IHYxLmRvdCh2Mik7CiAgICAgIGxldCB1OwogICAgICBsZXQgdjsKICAgICAgcmV0dXJuICh1ID0gZG90MTEgKiBkb3QwMiAtIGRvdDAxICogZG90MTIpID49IDAgJiYgKHYgPSBkb3QwMCAqIGRvdDEyIC0gZG90MDEgKiBkb3QwMikgPj0gMCAmJiB1ICsgdiA8IGRvdDAwICogZG90MTEgLSBkb3QwMSAqIGRvdDAxOwogICAgfQoKICB9CiAgUmF5LkNMT1NFU1QgPSBSQVlfTU9ERVMuQ0xPU0VTVDsKICBSYXkuQU5ZID0gUkFZX01PREVTLkFOWTsKICBSYXkuQUxMID0gUkFZX01PREVTLkFMTDsKICBjb25zdCB0bXBBQUJCJDEgPSBuZXcgQUFCQigpOwogIGNvbnN0IHRtcEFycmF5ID0gW107CiAgY29uc3QgdjEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHYyID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RCb2R5X3hpID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RCb2R5X3FpID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCBpbnRlcnNlY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYyA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgUmF5Y2FzdFJlc3VsdCgpOwogIGNvbnN0IGludGVyc2VjdENvbnZleE9wdGlvbnMgPSB7CiAgICBmYWNlTGlzdDogWzBdCiAgfTsKICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0SGVpZ2h0ZmllbGRfbG9jYWxSYXkgPSBuZXcgUmF5KCk7CiAgY29uc3QgaW50ZXJzZWN0SGVpZ2h0ZmllbGRfaW5kZXggPSBbXTsKICBjb25zdCBSYXlfaW50ZXJzZWN0U3BoZXJlX2ludGVyc2VjdGlvblBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCBSYXlfaW50ZXJzZWN0U3BoZXJlX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Q29udmV4X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdENvbnZleF92ZWN0b3IgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRGlyZWN0aW9uID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRnJvbSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9sb2NhbFRvID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX3dvcmxkSW50ZXJzZWN0UG9pbnQgPSBuZXcgVmVjMygpOwogIG5ldyBBQUJCKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF90cmlhbmdsZXMgPSBbXTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX3RyZWVUcmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtKCk7CiAgY29uc3QgdjAgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdCA9IG5ldyBWZWMzKCk7CgogIGZ1bmN0aW9uIGRpc3RhbmNlRnJvbUludGVyc2VjdGlvbihmcm9tLCBkaXJlY3Rpb24sIHBvc2l0aW9uKSB7CiAgICAvLyB2MCBpcyB2ZWN0b3IgZnJvbSBmcm9tIHRvIHBvc2l0aW9uCiAgICBwb3NpdGlvbi52c3ViKGZyb20sIHYwKTsKICAgIGNvbnN0IGRvdCA9IHYwLmRvdChkaXJlY3Rpb24pOyAvLyBpbnRlcnNlY3QgPSBkaXJlY3Rpb24qZG90ICsgZnJvbQoKICAgIGRpcmVjdGlvbi5zY2FsZShkb3QsIGludGVyc2VjdCk7CiAgICBpbnRlcnNlY3QudmFkZChmcm9tLCBpbnRlcnNlY3QpOwogICAgY29uc3QgZGlzdGFuY2UgPSBwb3NpdGlvbi5kaXN0YW5jZVRvKGludGVyc2VjdCk7CiAgICByZXR1cm4gZGlzdGFuY2U7CiAgfQoKICAvKioKICAgKiBTd2VlcCBhbmQgcHJ1bmUgYnJvYWRwaGFzZSBhbG9uZyBvbmUgYXhpcy4KICAgKi8KICBjbGFzcyBTQVBCcm9hZHBoYXNlIGV4dGVuZHMgQnJvYWRwaGFzZSB7CiAgICAvKioKICAgICAqIExpc3Qgb2YgYm9kaWVzIGN1cnJlbnRseSBpbiB0aGUgYnJvYWRwaGFzZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHdvcmxkIHRvIHNlYXJjaCBpbi4KICAgICAqLwoKICAgIC8qKgogICAgICogQXhpcyB0byBzb3J0IHRoZSBib2RpZXMgYWxvbmcuCiAgICAgKiBTZXQgdG8gMCBmb3IgeCBheGlzLCBhbmQgMSBmb3IgeSBheGlzLgogICAgICogRm9yIGJlc3QgcGVyZm9ybWFuY2UsIHBpY2sgdGhlIGF4aXMgd2hlcmUgYm9kaWVzIGFyZSBtb3N0IGRpc3RyaWJ1dGVkLgogICAgICovCgogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgYm91bmRzIG9mIHR3byBib2RpZXMgb3ZlcmxhcCwgYWxvbmcgdGhlIGdpdmVuIFNBUCBheGlzLgogICAgICovCiAgICBzdGF0aWMgY2hlY2tCb3VuZHMoYmksIGJqLCBheGlzSW5kZXgpIHsKICAgICAgbGV0IGJpUG9zOwogICAgICBsZXQgYmpQb3M7CgogICAgICBpZiAoYXhpc0luZGV4ID09PSAwKSB7CiAgICAgICAgYmlQb3MgPSBiaS5wb3NpdGlvbi54OwogICAgICAgIGJqUG9zID0gYmoucG9zaXRpb24ueDsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHsKICAgICAgICBiaVBvcyA9IGJpLnBvc2l0aW9uLnk7CiAgICAgICAgYmpQb3MgPSBiai5wb3NpdGlvbi55OwogICAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMikgewogICAgICAgIGJpUG9zID0gYmkucG9zaXRpb24uejsKICAgICAgICBialBvcyA9IGJqLnBvc2l0aW9uLno7CiAgICAgIH0KCiAgICAgIGNvbnN0IHJpID0gYmkuYm91bmRpbmdSYWRpdXMsCiAgICAgICAgICAgIHJqID0gYmouYm91bmRpbmdSYWRpdXMsCiAgICAgICAgICAgIGJvdW5kQTIgPSBiaVBvcyArIHJpLAogICAgICAgICAgICBib3VuZEIxID0gYmpQb3MgLSByajsKICAgICAgcmV0dXJuIGJvdW5kQjEgPCBib3VuZEEyOwogICAgfSAvLyBOb3RlOiB0aGVzZSBhcmUgaWRlbnRpY2FsLCBzYXZlIGZvciB4L3kveiBsb3dlcmJvdW5kCgogICAgLyoqCiAgICAgKiBpbnNlcnRpb25Tb3J0WAogICAgICovCgoKICAgIHN0YXRpYyBpbnNlcnRpb25Tb3J0WChhKSB7CiAgICAgIGZvciAobGV0IGkgPSAxLCBsID0gYS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gYVtpXTsKICAgICAgICBsZXQgajsKCiAgICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICBpZiAoYVtqXS5hYWJiLmxvd2VyQm91bmQueCA8PSB2LmFhYmIubG93ZXJCb3VuZC54KSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGFbaiArIDFdID0gYVtqXTsKICAgICAgICB9CgogICAgICAgIGFbaiArIDFdID0gdjsKICAgICAgfQoKICAgICAgcmV0dXJuIGE7CiAgICB9CiAgICAvKioKICAgICAqIGluc2VydGlvblNvcnRZCiAgICAgKi8KCgogICAgc3RhdGljIGluc2VydGlvblNvcnRZKGEpIHsKICAgICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIGNvbnN0IHYgPSBhW2ldOwogICAgICAgIGxldCBqOwoKICAgICAgICBmb3IgKGogPSBpIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC55IDw9IHYuYWFiYi5sb3dlckJvdW5kLnkpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgYVtqICsgMV0gPSBhW2pdOwogICAgICAgIH0KCiAgICAgICAgYVtqICsgMV0gPSB2OwogICAgICB9CgogICAgICByZXR1cm4gYTsKICAgIH0KICAgIC8qKgogICAgICogaW5zZXJ0aW9uU29ydFoKICAgICAqLwoKCiAgICBzdGF0aWMgaW5zZXJ0aW9uU29ydFooYSkgewogICAgICBmb3IgKGxldCBpID0gMSwgbCA9IGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IGFbaV07CiAgICAgICAgbGV0IGo7CgogICAgICAgIGZvciAoaiA9IGkgLSAxOyBqID49IDA7IGotLSkgewogICAgICAgICAgaWYgKGFbal0uYWFiYi5sb3dlckJvdW5kLnogPD0gdi5hYWJiLmxvd2VyQm91bmQueikgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBhW2ogKyAxXSA9IGFbal07CiAgICAgICAgfQoKICAgICAgICBhW2ogKyAxXSA9IHY7CiAgICAgIH0KCiAgICAgIHJldHVybiBhOwogICAgfQoKICAgIGNvbnN0cnVjdG9yKHdvcmxkKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuYXhpc0xpc3QgPSBbXTsKICAgICAgdGhpcy53b3JsZCA9IG51bGw7CiAgICAgIHRoaXMuYXhpc0luZGV4ID0gMDsKICAgICAgY29uc3QgYXhpc0xpc3QgPSB0aGlzLmF4aXNMaXN0OwoKICAgICAgdGhpcy5fYWRkQm9keUhhbmRsZXIgPSBldmVudCA9PiB7CiAgICAgICAgYXhpc0xpc3QucHVzaChldmVudC5ib2R5KTsKICAgICAgfTsKCiAgICAgIHRoaXMuX3JlbW92ZUJvZHlIYW5kbGVyID0gZXZlbnQgPT4gewogICAgICAgIGNvbnN0IGlkeCA9IGF4aXNMaXN0LmluZGV4T2YoZXZlbnQuYm9keSk7CgogICAgICAgIGlmIChpZHggIT09IC0xKSB7CiAgICAgICAgICBheGlzTGlzdC5zcGxpY2UoaWR4LCAxKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBpZiAod29ybGQpIHsKICAgICAgICB0aGlzLnNldFdvcmxkKHdvcmxkKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDaGFuZ2UgdGhlIHdvcmxkCiAgICAgKi8KCgogICAgc2V0V29ybGQod29ybGQpIHsKICAgICAgLy8gQ2xlYXIgdGhlIG9sZCBheGlzIGFycmF5CiAgICAgIHRoaXMuYXhpc0xpc3QubGVuZ3RoID0gMDsgLy8gQWRkIGFsbCBib2RpZXMgZnJvbSB0aGUgbmV3IHdvcmxkCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmxkLmJvZGllcy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuYXhpc0xpc3QucHVzaCh3b3JsZC5ib2RpZXNbaV0pOwogICAgICB9IC8vIFJlbW92ZSBvbGQgaGFuZGxlcnMsIGlmIGFueQoKCiAgICAgIHdvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FkZEJvZHknLCB0aGlzLl9hZGRCb2R5SGFuZGxlcik7CiAgICAgIHdvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3JlbW92ZUJvZHknLCB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlcik7IC8vIEFkZCBoYW5kbGVycyB0byB1cGRhdGUgdGhlIGxpc3Qgb2YgYm9kaWVzLgoKICAgICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcignYWRkQm9keScsIHRoaXMuX2FkZEJvZHlIYW5kbGVyKTsKICAgICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncmVtb3ZlQm9keScsIHRoaXMuX3JlbW92ZUJvZHlIYW5kbGVyKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ29sbGVjdCBhbGwgY29sbGlzaW9uIHBhaXJzCiAgICAgKi8KCgogICAgY29sbGlzaW9uUGFpcnMod29ybGQsIHAxLCBwMikgewogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0OwogICAgICBjb25zdCBOID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7CiAgICAgIGxldCBpOwogICAgICBsZXQgajsKCiAgICAgIGlmICh0aGlzLmRpcnR5KSB7CiAgICAgICAgdGhpcy5zb3J0TGlzdCgpOwogICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTsKICAgICAgfSAvLyBMb29rIHRocm91Z2ggdGhlIGxpc3QKCgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBOOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGJqID0gYm9kaWVzW2pdOwoKICAgICAgICAgIGlmICghdGhpcy5uZWVkQnJvYWRwaGFzZUNvbGxpc2lvbihiaSwgYmopKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghU0FQQnJvYWRwaGFzZS5jaGVja0JvdW5kcyhiaSwgYmosIGF4aXNJbmRleCkpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcDEsIHAyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzb3J0TGlzdCgpIHsKICAgICAgY29uc3QgYXhpc0xpc3QgPSB0aGlzLmF4aXNMaXN0OwogICAgICBjb25zdCBheGlzSW5kZXggPSB0aGlzLmF4aXNJbmRleDsKICAgICAgY29uc3QgTiA9IGF4aXNMaXN0Lmxlbmd0aDsgLy8gVXBkYXRlIEFBQkJzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBheGlzTGlzdFtpXTsKCiAgICAgICAgaWYgKGJpLmFhYmJOZWVkc1VwZGF0ZSkgewogICAgICAgICAgYmkudXBkYXRlQUFCQigpOwogICAgICAgIH0KICAgICAgfSAvLyBTb3J0IHRoZSBsaXN0CgoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMCkgewogICAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFgoYXhpc0xpc3QpOwogICAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMSkgewogICAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFkoYXhpc0xpc3QpOwogICAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMikgewogICAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFooYXhpc0xpc3QpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIHRoZSB2YXJpYW5jZSBvZiB0aGUgYm9keSBwb3NpdGlvbnMgYW5kIGVzdGltYXRlcyB0aGUgYmVzdCBheGlzIHRvIHVzZS4KICAgICAqIFdpbGwgYXV0b21hdGljYWxseSBzZXQgcHJvcGVydHkgYGF4aXNJbmRleGAuCiAgICAgKi8KCgogICAgYXV0b0RldGVjdEF4aXMoKSB7CiAgICAgIGxldCBzdW1YID0gMDsKICAgICAgbGV0IHN1bVgyID0gMDsKICAgICAgbGV0IHN1bVkgPSAwOwogICAgICBsZXQgc3VtWTIgPSAwOwogICAgICBsZXQgc3VtWiA9IDA7CiAgICAgIGxldCBzdW1aMiA9IDA7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYXhpc0xpc3Q7CiAgICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBpbnZOID0gMSAvIE47CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICBjb25zdCBjZW50ZXJYID0gYi5wb3NpdGlvbi54OwogICAgICAgIHN1bVggKz0gY2VudGVyWDsKICAgICAgICBzdW1YMiArPSBjZW50ZXJYICogY2VudGVyWDsKICAgICAgICBjb25zdCBjZW50ZXJZID0gYi5wb3NpdGlvbi55OwogICAgICAgIHN1bVkgKz0gY2VudGVyWTsKICAgICAgICBzdW1ZMiArPSBjZW50ZXJZICogY2VudGVyWTsKICAgICAgICBjb25zdCBjZW50ZXJaID0gYi5wb3NpdGlvbi56OwogICAgICAgIHN1bVogKz0gY2VudGVyWjsKICAgICAgICBzdW1aMiArPSBjZW50ZXJaICogY2VudGVyWjsKICAgICAgfQoKICAgICAgY29uc3QgdmFyaWFuY2VYID0gc3VtWDIgLSBzdW1YICogc3VtWCAqIGludk47CiAgICAgIGNvbnN0IHZhcmlhbmNlWSA9IHN1bVkyIC0gc3VtWSAqIHN1bVkgKiBpbnZOOwogICAgICBjb25zdCB2YXJpYW5jZVogPSBzdW1aMiAtIHN1bVogKiBzdW1aICogaW52TjsKCiAgICAgIGlmICh2YXJpYW5jZVggPiB2YXJpYW5jZVkpIHsKICAgICAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VaKSB7CiAgICAgICAgICB0aGlzLmF4aXNJbmRleCA9IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMjsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodmFyaWFuY2VZID4gdmFyaWFuY2VaKSB7CiAgICAgICAgdGhpcy5heGlzSW5kZXggPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMjsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiBhbiBBQUJCLgogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSByZXN1bHRpbmcgYm9kaWVzIGluLgogICAgICovCgoKICAgIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IFtdOwogICAgICB9CgogICAgICBpZiAodGhpcy5kaXJ0eSkgewogICAgICAgIHRoaXMuc29ydExpc3QoKTsKICAgICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4aXNJbmRleCA9IHRoaXMuYXhpc0luZGV4OwogICAgICBsZXQgYXhpcyA9ICd4JzsKCiAgICAgIGlmIChheGlzSW5kZXggPT09IDEpIHsKICAgICAgICBheGlzID0gJ3knOwogICAgICB9CgogICAgICBpZiAoYXhpc0luZGV4ID09PSAyKSB7CiAgICAgICAgYXhpcyA9ICd6JzsKICAgICAgfQoKICAgICAgY29uc3QgYXhpc0xpc3QgPSB0aGlzLmF4aXNMaXN0OwogICAgICBhYWJiLmxvd2VyQm91bmRbYXhpc107CiAgICAgIGFhYmIudXBwZXJCb3VuZFtheGlzXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXhpc0xpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gYXhpc0xpc3RbaV07CgogICAgICAgIGlmIChiLmFhYmJOZWVkc1VwZGF0ZSkgewogICAgICAgICAgYi51cGRhdGVBQUJCKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoYi5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICByZXN1bHQucHVzaChiKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogIH0KCiAgY2xhc3MgVXRpbHMgewogICAgLyoqCiAgICAgKiBFeHRlbmQgYW4gb3B0aW9ucyBvYmplY3Qgd2l0aCBkZWZhdWx0IHZhbHVlcy4KICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBvcHRpb25zIG9iamVjdC4gTWF5IGJlIGZhbHN5OiBpbiB0aGlzIGNhc2UsIGEgbmV3IG9iamVjdCBpcyBjcmVhdGVkIGFuZCByZXR1cm5lZC4KICAgICAqIEBwYXJhbSBkZWZhdWx0cyBBbiBvYmplY3QgY29udGFpbmluZyBkZWZhdWx0IHZhbHVlcy4KICAgICAqIEByZXR1cm4gVGhlIG1vZGlmaWVkIG9wdGlvbnMgb2JqZWN0LgogICAgICovCiAgICBzdGF0aWMgZGVmYXVsdHMob3B0aW9ucywgZGVmYXVsdHMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgZm9yIChsZXQga2V5IGluIGRlZmF1bHRzKSB7CiAgICAgICAgaWYgKCEoa2V5IGluIG9wdGlvbnMpKSB7CiAgICAgICAgICBvcHRpb25zW2tleV0gPSBkZWZhdWx0c1trZXldOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG9wdGlvbnM7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQ29uc3RyYWludCBiYXNlIGNsYXNzCiAgICovCiAgY2xhc3MgQ29uc3RyYWludCB7CiAgICAvKioKICAgICAqIEVxdWF0aW9ucyB0byBiZSBzb2x2ZWQgaW4gdGhpcyBjb25zdHJhaW50LgogICAgICovCgogICAgLyoqCiAgICAgKiBCb2R5IEEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEJvZHkgQi4KICAgICAqLwoKICAgIC8qKgogICAgICogU2V0IHRvIGZhbHNlIGlmIHlvdSBkb24ndCB3YW50IHRoZSBib2RpZXMgdG8gY29sbGlkZSB3aGVuIHRoZXkgYXJlIGNvbm5lY3RlZC4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7CiAgICAgICAgY29sbGlkZUNvbm5lY3RlZDogdHJ1ZSwKICAgICAgICB3YWtlVXBCb2RpZXM6IHRydWUKICAgICAgfSk7CiAgICAgIHRoaXMuZXF1YXRpb25zID0gW107CiAgICAgIHRoaXMuYm9keUEgPSBib2R5QTsKICAgICAgdGhpcy5ib2R5QiA9IGJvZHlCOwogICAgICB0aGlzLmlkID0gQ29uc3RyYWludC5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gb3B0aW9ucy5jb2xsaWRlQ29ubmVjdGVkOwoKICAgICAgaWYgKG9wdGlvbnMud2FrZVVwQm9kaWVzKSB7CiAgICAgICAgaWYgKGJvZHlBKSB7CiAgICAgICAgICBib2R5QS53YWtlVXAoKTsKICAgICAgICB9CgogICAgICAgIGlmIChib2R5QikgewogICAgICAgICAgYm9keUIud2FrZVVwKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSBhbGwgdGhlIGVxdWF0aW9ucyB3aXRoIGRhdGEuCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ21ldGhvZCB1cGRhdGUoKSBub3QgaW1wbG1lbWVudGVkIGluIHRoaXMgQ29uc3RyYWludCBzdWJjbGFzcyEnKTsKICAgIH0KICAgIC8qKgogICAgICogRW5hYmxlcyBhbGwgZXF1YXRpb25zIGluIHRoZSBjb25zdHJhaW50LgogICAgICovCgoKICAgIGVuYWJsZSgpIHsKICAgICAgY29uc3QgZXFzID0gdGhpcy5lcXVhdGlvbnM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVxcy5sZW5ndGg7IGkrKykgewogICAgICAgIGVxc1tpXS5lbmFibGVkID0gdHJ1ZTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBEaXNhYmxlcyBhbGwgZXF1YXRpb25zIGluIHRoZSBjb25zdHJhaW50LgogICAgICovCgoKICAgIGRpc2FibGUoKSB7CiAgICAgIGNvbnN0IGVxcyA9IHRoaXMuZXF1YXRpb25zOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBlcXNbaV0uZW5hYmxlZCA9IGZhbHNlOwogICAgICB9CiAgICB9CgogIH0KICBDb25zdHJhaW50LmlkQ291bnRlciA9IDA7CgogIC8qKgogICAqIEFuIGVsZW1lbnQgY29udGFpbmluZyA2IGVudHJpZXMsIDMgc3BhdGlhbCBhbmQgMyByb3RhdGlvbmFsIGRlZ3JlZXMgb2YgZnJlZWRvbS4KICAgKi8KCiAgY2xhc3MgSmFjb2JpYW5FbGVtZW50IHsKICAgIC8qKgogICAgICogc3BhdGlhbAogICAgICovCgogICAgLyoqCiAgICAgKiByb3RhdGlvbmFsCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLnNwYXRpYWwgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJvdGF0aW9uYWwgPSBuZXcgVmVjMygpOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB3aXRoIG90aGVyIEphY29iaWFuRWxlbWVudAogICAgICovCgoKICAgIG11bHRpcGx5RWxlbWVudChlbGVtZW50KSB7CiAgICAgIHJldHVybiBlbGVtZW50LnNwYXRpYWwuZG90KHRoaXMuc3BhdGlhbCkgKyBlbGVtZW50LnJvdGF0aW9uYWwuZG90KHRoaXMucm90YXRpb25hbCk7CiAgICB9CiAgICAvKioKICAgICAqIE11bHRpcGx5IHdpdGggdHdvIHZlY3RvcnMKICAgICAqLwoKCiAgICBtdWx0aXBseVZlY3RvcnMoc3BhdGlhbCwgcm90YXRpb25hbCkgewogICAgICByZXR1cm4gc3BhdGlhbC5kb3QodGhpcy5zcGF0aWFsKSArIHJvdGF0aW9uYWwuZG90KHRoaXMucm90YXRpb25hbCk7CiAgICB9CgogIH0KCiAgLyoqCiAgICogRXF1YXRpb24gYmFzZSBjbGFzcy4KICAgKgogICAqIGBhYCwgYGJgIGFuZCBgZXBzYCBhcmUge0BsaW5rIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyLzVEVjA1OC9WVDE1L2xlY3R1cmVzL1NQT09LbGFibm90ZXMucGRmIFNQT09LfSBwYXJhbWV0ZXJzIHRoYXQgZGVmYXVsdCB0byBgMC4wYC4gU2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUvY2Fubm9uLmpzL2lzc3Vlcy8yMzgjaXNzdWVjb21tZW50LTE0NzE3MjMyNyB0aGlzIGV4Y2hhbmdlfSBmb3IgbW9yZSBkZXRhaWxzIG9uIENhbm5vbidzIHBoeXNpY3MgaW1wbGVtZW50YXRpb24uCiAgICovCiAgY2xhc3MgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiBNaW5pbXVtIChyZWFkOiBuZWdhdGl2ZSBtYXgpIGZvcmNlIHRvIGJlIGFwcGxpZWQgYnkgdGhlIGNvbnN0cmFpbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE1heGltdW0gKHJlYWQ6IHBvc2l0aXZlIG1heCkgZm9yY2UgdG8gYmUgYXBwbGllZCBieSB0aGUgY29uc3RyYWludC4KICAgICAqLwoKICAgIC8qKgogICAgICogU1BPT0sgcGFyYW1ldGVyCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNQT09LIHBhcmFtZXRlcgogICAgICovCgogICAgLyoqCiAgICAgKiBTUE9PSyBwYXJhbWV0ZXIKICAgICAqLwoKICAgIC8qKgogICAgICogQSBudW1iZXIsIHByb3BvcnRpb25hbCB0byB0aGUgZm9yY2UgYWRkZWQgdG8gdGhlIGJvZGllcy4KICAgICAqLwogICAgY29uc3RydWN0b3IoYmksIGJqLCBtaW5Gb3JjZSwgbWF4Rm9yY2UpIHsKICAgICAgaWYgKG1pbkZvcmNlID09PSB2b2lkIDApIHsKICAgICAgICBtaW5Gb3JjZSA9IC0xZTY7CiAgICAgIH0KCiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHRoaXMuaWQgPSBFcXVhdGlvbi5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5taW5Gb3JjZSA9IG1pbkZvcmNlOwogICAgICB0aGlzLm1heEZvcmNlID0gbWF4Rm9yY2U7CiAgICAgIHRoaXMuYmkgPSBiaTsKICAgICAgdGhpcy5iaiA9IGJqOwogICAgICB0aGlzLmEgPSAwLjA7IC8vIFNQT09LIHBhcmFtZXRlcgoKICAgICAgdGhpcy5iID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuZXBzID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QSA9IG5ldyBKYWNvYmlhbkVsZW1lbnQoKTsKICAgICAgdGhpcy5qYWNvYmlhbkVsZW1lbnRCID0gbmV3IEphY29iaWFuRWxlbWVudCgpOwogICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlOwogICAgICB0aGlzLm11bHRpcGxpZXIgPSAwOwogICAgICB0aGlzLnNldFNwb29rUGFyYW1zKDFlNywgNCwgMSAvIDYwKTsgLy8gU2V0IHR5cGljYWwgc3Bvb2sgcGFyYW1zCiAgICB9CiAgICAvKioKICAgICAqIFJlY2FsY3VsYXRlcyBhLCBiLCBhbmQgZXBzLgogICAgICoKICAgICAqIFRoZSBFcXVhdGlvbiBjb25zdHJ1Y3RvciBzZXRzIHR5cGljYWwgU1BPT0sgcGFyYW1ldGVycyBhcyBzdWNoOgogICAgICogKiBgc3RpZmZuZXNzYCA9IDFlNwogICAgICogKiBgcmVsYXhhdGlvbmAgPSA0CiAgICAgKiAqIGB0aW1lU3RlcGA9IDEgLyA2MCwgX25vdGUgdGhlIGhhcmRjb2RlZCByZWZyZXNoIHJhdGUuXwogICAgICovCgoKICAgIHNldFNwb29rUGFyYW1zKHN0aWZmbmVzcywgcmVsYXhhdGlvbiwgdGltZVN0ZXApIHsKICAgICAgY29uc3QgZCA9IHJlbGF4YXRpb247CiAgICAgIGNvbnN0IGsgPSBzdGlmZm5lc3M7CiAgICAgIGNvbnN0IGggPSB0aW1lU3RlcDsKICAgICAgdGhpcy5hID0gNC4wIC8gKGggKiAoMSArIDQgKiBkKSk7CiAgICAgIHRoaXMuYiA9IDQuMCAqIGQgLyAoMSArIDQgKiBkKTsKICAgICAgdGhpcy5lcHMgPSA0LjAgLyAoaCAqIGggKiBrICogKDEgKyA0ICogZCkpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB0aGUgcmlnaHQgaGFuZCBzaWRlIG9mIHRoZSBTUE9PSyBlcXVhdGlvbgogICAgICovCgoKICAgIGNvbXB1dGVCKGEsIGIsIGgpIHsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHcSA9IHRoaXMuY29tcHV0ZUdxKCk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIHJldHVybiAtR3EgKiBhIC0gR1cgKiBiIC0gR2lNZiAqIGg7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqcSwgd2hlcmUgcSBhcmUgdGhlIGdlbmVyYWxpemVkIGJvZHkgY29vcmRpbmF0ZXMKICAgICAqLwoKCiAgICBjb21wdXRlR3EoKSB7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHhpID0gYmkucG9zaXRpb247CiAgICAgIGNvbnN0IHhqID0gYmoucG9zaXRpb247CiAgICAgIHJldHVybiBHQS5zcGF0aWFsLmRvdCh4aSkgKyBHQi5zcGF0aWFsLmRvdCh4aik7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqVywgd2hlcmUgVyBhcmUgdGhlIGJvZHkgdmVsb2NpdGllcwogICAgICovCgoKICAgIGNvbXB1dGVHVygpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgdmkgPSBiaS52ZWxvY2l0eTsKICAgICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTsKICAgICAgY29uc3Qgd2kgPSBiaS5hbmd1bGFyVmVsb2NpdHk7CiAgICAgIGNvbnN0IHdqID0gYmouYW5ndWxhclZlbG9jaXR5OwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKHZpLCB3aSkgKyBHQi5tdWx0aXBseVZlY3RvcnModmosIHdqKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgRypXbGFtYmRhLCB3aGVyZSBXIGFyZSB0aGUgYm9keSB2ZWxvY2l0aWVzCiAgICAgKi8KCgogICAgY29tcHV0ZUdXbGFtYmRhKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB2aSA9IGJpLnZsYW1iZGE7CiAgICAgIGNvbnN0IHZqID0gYmoudmxhbWJkYTsKICAgICAgY29uc3Qgd2kgPSBiaS53bGFtYmRhOwogICAgICBjb25zdCB3aiA9IGJqLndsYW1iZGE7CiAgICAgIHJldHVybiBHQS5tdWx0aXBseVZlY3RvcnModmksIHdpKSArIEdCLm11bHRpcGx5VmVjdG9ycyh2aiwgd2opOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKmludihNKSpmLCB3aGVyZSBNIGlzIHRoZSBtYXNzIG1hdHJpeCB3aXRoIGRpYWdvbmFsIGJsb2NrcyBmb3IgZWFjaCBib2R5LCBhbmQgZiBhcmUgdGhlIGZvcmNlcyBvbiB0aGUgYm9kaWVzLgogICAgICovCgoKICAgIGNvbXB1dGVHaU1mKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCBmaSA9IGJpLmZvcmNlOwogICAgICBjb25zdCB0aSA9IGJpLnRvcnF1ZTsKICAgICAgY29uc3QgZmogPSBiai5mb3JjZTsKICAgICAgY29uc3QgdGogPSBiai50b3JxdWU7CiAgICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZNYXNzaiA9IGJqLmludk1hc3NTb2x2ZTsKICAgICAgZmkuc2NhbGUoaW52TWFzc2ksIGlNZmkpOwogICAgICBmai5zY2FsZShpbnZNYXNzaiwgaU1maik7CiAgICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KHRpLCBpbnZJaV92bXVsdF90YXVpKTsKICAgICAgYmouaW52SW5lcnRpYVdvcmxkU29sdmUudm11bHQodGosIGludklqX3ZtdWx0X3RhdWopOwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKGlNZmksIGludklpX3ZtdWx0X3RhdWkpICsgR0IubXVsdGlwbHlWZWN0b3JzKGlNZmosIGludklqX3ZtdWx0X3RhdWopOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKmludihNKSpHJwogICAgICovCgoKICAgIGNvbXB1dGVHaU1HdCgpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgaW52TWFzc2kgPSBiaS5pbnZNYXNzU29sdmU7CiAgICAgIGNvbnN0IGludk1hc3NqID0gYmouaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZJaSA9IGJpLmludkluZXJ0aWFXb3JsZFNvbHZlOwogICAgICBjb25zdCBpbnZJaiA9IGJqLmludkluZXJ0aWFXb3JsZFNvbHZlOwogICAgICBsZXQgcmVzdWx0ID0gaW52TWFzc2kgKyBpbnZNYXNzajsKICAgICAgaW52SWkudm11bHQoR0Eucm90YXRpb25hbCwgdG1wKTsKICAgICAgcmVzdWx0ICs9IHRtcC5kb3QoR0Eucm90YXRpb25hbCk7CiAgICAgIGludklqLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRtcCk7CiAgICAgIHJlc3VsdCArPSB0bXAuZG90KEdCLnJvdGF0aW9uYWwpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgY29uc3RyYWludCB2ZWxvY2l0eSB0byB0aGUgYm9kaWVzLgogICAgICovCgoKICAgIGFkZFRvV2xhbWJkYShkZWx0YWxhbWJkYSkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB0ZW1wID0gYWRkVG9XbGFtYmRhX3RlbXA7IC8vIEFkZCB0byBsaW5lYXIgdmVsb2NpdHkKICAgICAgLy8gdl9sYW1iZGEgKz0gaW52KE0pICogZGVsdGFfbGFtYmEgKiBHCgogICAgICBiaS52bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihiaS5pbnZNYXNzU29sdmUgKiBkZWx0YWxhbWJkYSwgR0Euc3BhdGlhbCwgYmkudmxhbWJkYSk7CiAgICAgIGJqLnZsYW1iZGEuYWRkU2NhbGVkVmVjdG9yKGJqLmludk1hc3NTb2x2ZSAqIGRlbHRhbGFtYmRhLCBHQi5zcGF0aWFsLCBiai52bGFtYmRhKTsgLy8gQWRkIHRvIGFuZ3VsYXIgdmVsb2NpdHkKCiAgICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdBLnJvdGF0aW9uYWwsIHRlbXApOwogICAgICBiaS53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmkud2xhbWJkYSk7CiAgICAgIGJqLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRlbXApOwogICAgICBiai53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmoud2xhbWJkYSk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIGRlbm9taW5hdG9yIHBhcnQgb2YgdGhlIFNQT09LIGVxdWF0aW9uOiBDID0gRyppbnYoTSkqRycgKyBlcHMKICAgICAqLwoKCiAgICBjb21wdXRlQygpIHsKICAgICAgcmV0dXJuIHRoaXMuY29tcHV0ZUdpTUd0KCkgKyB0aGlzLmVwczsKICAgIH0KCiAgfQogIEVxdWF0aW9uLmlkQ291bnRlciA9IDA7CiAgY29uc3QgaU1maSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaU1maiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW52SWlfdm11bHRfdGF1aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW52SWpfdm11bHRfdGF1aiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wID0gbmV3IFZlYzMoKTsKICBjb25zdCBhZGRUb1dsYW1iZGFfdGVtcCA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIENvbnRhY3Qvbm9uLXBlbmV0cmF0aW9uIGNvbnN0cmFpbnQgZXF1YXRpb24KICAgKi8KICBjbGFzcyBDb250YWN0RXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqICJib3VuY2luZXNzIjogdTEgPSAtZSp1MAogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZC1vcmllbnRlZCB2ZWN0b3IgdGhhdCBnb2VzIGZyb20gdGhlIGNlbnRlciBvZiBiaSB0byB0aGUgY29udGFjdCBwb2ludC4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQtb3JpZW50ZWQgdmVjdG9yIHRoYXQgc3RhcnRzIGluIGJvZHkgaiBwb3NpdGlvbiBhbmQgZ29lcyB0byB0aGUgY29udGFjdCBwb2ludC4KICAgICAqLwoKICAgIC8qKgogICAgICogQ29udGFjdCBub3JtYWwsIHBvaW50aW5nIG91dCBvZiBib2R5IGkuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5QiwgbWF4Rm9yY2UpIHsKICAgICAgaWYgKG1heEZvcmNlID09PSB2b2lkIDApIHsKICAgICAgICBtYXhGb3JjZSA9IDFlNjsKICAgICAgfQoKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCLCAwLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSAwLjA7CiAgICAgIHRoaXMucmkgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJqID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5uaSA9IG5ldyBWZWMzKCk7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICBjb25zdCBhID0gdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgcmkgPSB0aGlzLnJpOwogICAgICBjb25zdCByaiA9IHRoaXMucmo7CiAgICAgIGNvbnN0IHJpeG4gPSBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDE7CiAgICAgIGNvbnN0IHJqeG4gPSBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDI7CiAgICAgIGNvbnN0IHZpID0gYmkudmVsb2NpdHk7CiAgICAgIGNvbnN0IHdpID0gYmkuYW5ndWxhclZlbG9jaXR5OwogICAgICBiaS5mb3JjZTsKICAgICAgYmkudG9ycXVlOwogICAgICBjb25zdCB2aiA9IGJqLnZlbG9jaXR5OwogICAgICBjb25zdCB3aiA9IGJqLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgYmouZm9yY2U7CiAgICAgIGJqLnRvcnF1ZTsKICAgICAgY29uc3QgcGVuZXRyYXRpb25WZWMgPSBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDM7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgbiA9IHRoaXMubmk7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0cwoKICAgICAgcmkuY3Jvc3Mobiwgcml4bik7CiAgICAgIHJqLmNyb3NzKG4sIHJqeG4pOyAvLyBnID0geGorcmogLSh4aStyaSkKICAgICAgLy8gRyA9IFsgLW5pICAtcml4biAgbmkgIHJqeG4gXQoKICAgICAgbi5uZWdhdGUoR0Euc3BhdGlhbCk7CiAgICAgIHJpeG4ubmVnYXRlKEdBLnJvdGF0aW9uYWwpOwogICAgICBHQi5zcGF0aWFsLmNvcHkobik7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShyanhuKTsgLy8gQ2FsY3VsYXRlIHRoZSBwZW5ldHJhdGlvbiB2ZWN0b3IKCiAgICAgIHBlbmV0cmF0aW9uVmVjLmNvcHkoYmoucG9zaXRpb24pOwogICAgICBwZW5ldHJhdGlvblZlYy52YWRkKHJqLCBwZW5ldHJhdGlvblZlYyk7CiAgICAgIHBlbmV0cmF0aW9uVmVjLnZzdWIoYmkucG9zaXRpb24sIHBlbmV0cmF0aW9uVmVjKTsKICAgICAgcGVuZXRyYXRpb25WZWMudnN1YihyaSwgcGVuZXRyYXRpb25WZWMpOwogICAgICBjb25zdCBnID0gbi5kb3QocGVuZXRyYXRpb25WZWMpOyAvLyBDb21wdXRlIGl0ZXJhdGlvbgoKICAgICAgY29uc3QgZVBsdXNPbmUgPSB0aGlzLnJlc3RpdHV0aW9uICsgMTsKICAgICAgY29uc3QgR1cgPSBlUGx1c09uZSAqIHZqLmRvdChuKSAtIGVQbHVzT25lICogdmkuZG90KG4pICsgd2ouZG90KHJqeG4pIC0gd2kuZG90KHJpeG4pOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICBjb25zdCBCID0gLWcgKiBhIC0gR1cgKiBiIC0gaCAqIEdpTWY7CiAgICAgIHJldHVybiBCOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgcmVsYXRpdmUgdmVsb2NpdHkgaW4gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCgogICAgZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbCgpIHsKICAgICAgY29uc3QgdmkgPSBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF92aTsKICAgICAgY29uc3QgdmogPSBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF92ajsKICAgICAgY29uc3QgeGkgPSBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aTsKICAgICAgY29uc3QgeGogPSBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94ajsKICAgICAgY29uc3QgcmVsVmVsID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfcmVsVmVsOwogICAgICB0aGlzLmJpLnBvc2l0aW9uLnZhZGQodGhpcy5yaSwgeGkpOwogICAgICB0aGlzLmJqLnBvc2l0aW9uLnZhZGQodGhpcy5yaiwgeGopOwogICAgICB0aGlzLmJpLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHhpLCB2aSk7CiAgICAgIHRoaXMuYmouZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQoeGosIHZqKTsKICAgICAgdmkudnN1Yih2aiwgcmVsVmVsKTsKICAgICAgcmV0dXJuIHRoaXMubmkuZG90KHJlbFZlbCk7CiAgICB9CgogIH0KICBjb25zdCBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDEgPSBuZXcgVmVjMygpOyAvLyBUZW1wIHZlY3RvcnMKCiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDMgPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZpID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF92aiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGkgPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hqID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF9yZWxWZWwgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBDb25uZWN0cyB0d28gYm9kaWVzIGF0IGdpdmVuIG9mZnNldCBwb2ludHMuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgYm9keUEgPSBuZXcgQm9keSh7IG1hc3M6IDEgfSkKICAgKiAgICAgY29uc3QgYm9keUIgPSBuZXcgQm9keSh7IG1hc3M6IDEgfSkKICAgKiAgICAgYm9keUEucG9zaXRpb24uc2V0KC0xLCAwLCAwKQogICAqICAgICBib2R5Qi5wb3NpdGlvbi5zZXQoMSwgMCwgMCkKICAgKiAgICAgYm9keUEuYWRkU2hhcGUoc2hhcGVBKQogICAqICAgICBib2R5Qi5hZGRTaGFwZShzaGFwZUIpCiAgICogICAgIHdvcmxkLmFkZEJvZHkoYm9keUEpCiAgICogICAgIHdvcmxkLmFkZEJvZHkoYm9keUIpCiAgICogICAgIGNvbnN0IGxvY2FsUGl2b3RBID0gbmV3IFZlYzMoMSwgMCwgMCkKICAgKiAgICAgY29uc3QgbG9jYWxQaXZvdEIgPSBuZXcgVmVjMygtMSwgMCwgMCkKICAgKiAgICAgY29uc3QgY29uc3RyYWludCA9IG5ldyBQb2ludFRvUG9pbnRDb25zdHJhaW50KGJvZHlBLCBsb2NhbFBpdm90QSwgYm9keUIsIGxvY2FsUGl2b3RCKQogICAqICAgICB3b3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQpCiAgICovCiAgY2xhc3MgUG9pbnRUb1BvaW50Q29uc3RyYWludCBleHRlbmRzIENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBQaXZvdCwgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlBLgogICAgICovCgogICAgLyoqCiAgICAgKiBQaXZvdCwgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlCLgogICAgICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gcGl2b3RBIFRoZSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3Mgb2YgYm9keUEgd2hpY2ggYm9keUEgaXMgY29uc3RyYWluZWQgdG8uCiAgICAgKiBAcGFyYW0gYm9keUIgQm9keSB0aGF0IHdpbGwgYmUgY29uc3RyYWluZWQgaW4gYSBzaW1pbGFyIHdheSB0byB0aGUgc2FtZSBwb2ludCBhcyBib2R5QS4gV2Ugd2lsbCB0aGVyZWZvcmUgZ2V0IGEgbGluayBiZXR3ZWVuIGJvZHlBIGFuZCBib2R5Qi4gSWYgbm90IHNwZWNpZmllZCwgYm9keUEgd2lsbCBiZSBjb25zdHJhaW5lZCB0byBhIHN0YXRpYyBwb2ludC4KICAgICAqIEBwYXJhbSBwaXZvdEIgVGhlIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyBvZiBib2R5QiB3aGljaCBib2R5QiBpcyBjb25zdHJhaW5lZCB0by4KICAgICAqIEBwYXJhbSBtYXhGb3JjZSBUaGUgbWF4aW11bSBmb3JjZSB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIGNvbnN0cmFpbiB0aGUgYm9kaWVzLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgcGl2b3RBLCBib2R5QiwgcGl2b3RCLCBtYXhGb3JjZSkgewogICAgICBpZiAocGl2b3RBID09PSB2b2lkIDApIHsKICAgICAgICBwaXZvdEEgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAocGl2b3RCID09PSB2b2lkIDApIHsKICAgICAgICBwaXZvdEIgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAobWF4Rm9yY2UgPT09IHZvaWQgMCkgewogICAgICAgIG1heEZvcmNlID0gMWU2OwogICAgICB9CgogICAgICBzdXBlcihib2R5QSwgYm9keUIpOwogICAgICB0aGlzLnBpdm90QSA9IHBpdm90QS5jbG9uZSgpOwogICAgICB0aGlzLnBpdm90QiA9IHBpdm90Qi5jbG9uZSgpOwogICAgICBjb25zdCB4ID0gdGhpcy5lcXVhdGlvblggPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7CiAgICAgIGNvbnN0IHkgPSB0aGlzLmVxdWF0aW9uWSA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsKICAgICAgY29uc3QgeiA9IHRoaXMuZXF1YXRpb25aID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOyAvLyBFcXVhdGlvbnMgdG8gYmUgZmVkIHRvIHRoZSBzb2x2ZXIKCiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2goeCwgeSwgeik7IC8vIE1ha2UgdGhlIGVxdWF0aW9ucyBiaWRpcmVjdGlvbmFsCgogICAgICB4Lm1pbkZvcmNlID0geS5taW5Gb3JjZSA9IHoubWluRm9yY2UgPSAtbWF4Rm9yY2U7CiAgICAgIHgubWF4Rm9yY2UgPSB5Lm1heEZvcmNlID0gei5tYXhGb3JjZSA9IG1heEZvcmNlOwogICAgICB4Lm5pLnNldCgxLCAwLCAwKTsKICAgICAgeS5uaS5zZXQoMCwgMSwgMCk7CiAgICAgIHoubmkuc2V0KDAsIDAsIDEpOwogICAgfQoKICAgIHVwZGF0ZSgpIHsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIGNvbnN0IHggPSB0aGlzLmVxdWF0aW9uWDsKICAgICAgY29uc3QgeSA9IHRoaXMuZXF1YXRpb25ZOwogICAgICBjb25zdCB6ID0gdGhpcy5lcXVhdGlvblo7IC8vIFJvdGF0ZSB0aGUgcGl2b3RzIHRvIHdvcmxkIHNwYWNlCgogICAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMucGl2b3RBLCB4LnJpKTsKICAgICAgYm9keUIucXVhdGVybmlvbi52bXVsdCh0aGlzLnBpdm90QiwgeC5yaik7CiAgICAgIHkucmkuY29weSh4LnJpKTsKICAgICAgeS5yai5jb3B5KHgucmopOwogICAgICB6LnJpLmNvcHkoeC5yaSk7CiAgICAgIHoucmouY29weSh4LnJqKTsKICAgIH0KCiAgfQoKICAvKioKICAgKiBDb25lIGVxdWF0aW9uLiBXb3JrcyB0byBrZWVwIHRoZSBnaXZlbiBib2R5IHdvcmxkIHZlY3RvcnMgYWxpZ25lZCwgb3IgdGlsdGVkIHdpdGhpbiBhIGdpdmVuIGFuZ2xlIGZyb20gZWFjaCBvdGhlci4KICAgKi8KICBjbGFzcyBDb25lRXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqIExvY2FsIGF4aXMgaW4gQQogICAgICovCgogICAgLyoqCiAgICAgKiBMb2NhbCBheGlzIGluIEIKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlICJjb25lIGFuZ2xlIiB0byBrZWVwCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7CiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMCwgMSwgMCk7CiAgICAgIHRoaXMuYW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy5hbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ2xlIDogMDsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIGNvbnN0IGEgPSB0aGlzLmE7CiAgICAgIGNvbnN0IGIgPSB0aGlzLmI7CiAgICAgIGNvbnN0IG5pID0gdGhpcy5heGlzQTsKICAgICAgY29uc3QgbmogPSB0aGlzLmF4aXNCOwogICAgICBjb25zdCBuaXhuaiA9IHRtcFZlYzEkMjsKICAgICAgY29uc3Qgbmp4bmkgPSB0bXBWZWMyJDI7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzCgogICAgICBuaS5jcm9zcyhuaiwgbml4bmopOwogICAgICBuai5jcm9zcyhuaSwgbmp4bmkpOyAvLyBUaGUgYW5nbGUgYmV0d2VlbiB0d28gdmVjdG9yIGlzOgogICAgICAvLyBjb3ModGhldGEpID0gYSAqIGIgLyAobGVuZ3RoKGEpICogbGVuZ3RoKGIpID0geyBsZW4oYSkgPSBsZW4oYikgPSAxIH0gPSBhICogYgogICAgICAvLyBnID0gYSAqIGIKICAgICAgLy8gZ2RvdCA9IChiIHggYSkgKiB3aSArIChhIHggYikgKiB3agogICAgICAvLyBHID0gWzAgYnhhIDAgYXhiXQogICAgICAvLyBXID0gW3ZpIHdpIHZqIHdqXQoKICAgICAgR0Eucm90YXRpb25hbC5jb3B5KG5qeG5pKTsKICAgICAgR0Iucm90YXRpb25hbC5jb3B5KG5peG5qKTsKICAgICAgY29uc3QgZyA9IE1hdGguY29zKHRoaXMuYW5nbGUpIC0gbmkuZG90KG5qKTsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICBjb25zdCBCID0gLWcgKiBhIC0gR1cgKiBiIC0gaCAqIEdpTWY7CiAgICAgIHJldHVybiBCOwogICAgfQoKICB9CiAgY29uc3QgdG1wVmVjMSQyID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWMyJDIgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBSb3RhdGlvbmFsIGNvbnN0cmFpbnQuIFdvcmtzIHRvIGtlZXAgdGhlIGxvY2FsIHZlY3RvcnMgb3J0aG9nb25hbCB0byBlYWNoIG90aGVyIGluIHdvcmxkIHNwYWNlLgogICAqLwogIGNsYXNzIFJvdGF0aW9uYWxFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBvcmllbnRlZCByb3RhdGlvbmFsIGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIG1heEFuZ2xlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7CiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMCwgMSwgMCk7CiAgICAgIHRoaXMubWF4QW5nbGUgPSBNYXRoLlBJIC8gMjsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIGNvbnN0IGEgPSB0aGlzLmE7CiAgICAgIGNvbnN0IGIgPSB0aGlzLmI7CiAgICAgIGNvbnN0IG5pID0gdGhpcy5heGlzQTsKICAgICAgY29uc3QgbmogPSB0aGlzLmF4aXNCOwogICAgICBjb25zdCBuaXhuaiA9IHRtcFZlYzEkMTsKICAgICAgY29uc3Qgbmp4bmkgPSB0bXBWZWMyJDE7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzCgogICAgICBuaS5jcm9zcyhuaiwgbml4bmopOwogICAgICBuai5jcm9zcyhuaSwgbmp4bmkpOyAvLyBnID0gbmkgKiBuagogICAgICAvLyBnZG90ID0gKG5qIHggbmkpICogd2kgKyAobmkgeCBuaikgKiB3agogICAgICAvLyBHID0gWzAgbmp4bmkgMCBuaXhual0KICAgICAgLy8gVyA9IFt2aSB3aSB2aiB3al0KCiAgICAgIEdBLnJvdGF0aW9uYWwuY29weShuanhuaSk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShuaXhuaik7CiAgICAgIGNvbnN0IGcgPSBNYXRoLmNvcyh0aGlzLm1heEFuZ2xlKSAtIG5pLmRvdChuaik7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQogIGNvbnN0IHRtcFZlYzEkMSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjMiQxID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQSBDb25lIFR3aXN0IGNvbnN0cmFpbnQsIHVzZWZ1bCBmb3IgcmFnZG9sbHMuCiAgICovCiAgY2xhc3MgQ29uZVR3aXN0Q29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBUaGUgYXhpcyBkaXJlY3Rpb24gZm9yIHRoZSBjb25zdHJhaW50IG9mIHRoZSBib2R5IEEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBheGlzIGRpcmVjdGlvbiBmb3IgdGhlIGNvbnN0cmFpbnQgb2YgdGhlIGJvZHkgQi4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGFwZXJ0dXJlIGFuZ2xlIG9mIHRoZSBjb25lLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgdHdpc3QgYW5nbGUgb2YgdGhlIGpvaW50LgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlbgoKICAgICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gb3B0aW9ucy5waXZvdEIgPyBvcHRpb25zLnBpdm90Qi5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgc3VwZXIoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gISFvcHRpb25zLmNvbGxpZGVDb25uZWN0ZWQ7CiAgICAgIHRoaXMuYW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy5hbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ2xlIDogMDsKICAgICAgY29uc3QgYyA9IHRoaXMuY29uZUVxdWF0aW9uID0gbmV3IENvbmVFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCB0ID0gdGhpcy50d2lzdEVxdWF0aW9uID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICB0aGlzLnR3aXN0QW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy50d2lzdEFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMudHdpc3RBbmdsZSA6IDA7IC8vIE1ha2UgdGhlIGNvbmUgZXF1YXRpb24gcHVzaCB0aGUgYm9kaWVzIHRvd2FyZCB0aGUgY29uZSBheGlzLCBub3Qgb3V0d2FyZAoKICAgICAgYy5tYXhGb3JjZSA9IDA7CiAgICAgIGMubWluRm9yY2UgPSAtbWF4Rm9yY2U7IC8vIE1ha2UgdGhlIHR3aXN0IGVxdWF0aW9uIGFkZCB0b3JxdWUgdG93YXJkIHRoZSBpbml0aWFsIHBvc2l0aW9uCgogICAgICB0Lm1heEZvcmNlID0gMDsKICAgICAgdC5taW5Gb3JjZSA9IC1tYXhGb3JjZTsKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChjLCB0KTsKICAgIH0KCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCBjb25lID0gdGhpcy5jb25lRXF1YXRpb247CiAgICAgIGNvbnN0IHR3aXN0ID0gdGhpcy50d2lzdEVxdWF0aW9uOwogICAgICBzdXBlci51cGRhdGUoKTsgLy8gVXBkYXRlIHRoZSBheGVzIHRvIHRoZSBjb25lIGNvbnN0cmFpbnQKCiAgICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLmF4aXNBLCBjb25lLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuYXhpc0IsIGNvbmUuYXhpc0IpOyAvLyBVcGRhdGUgdGhlIHdvcmxkIGF4ZXMgaW4gdGhlIHR3aXN0IGNvbnN0cmFpbnQKCiAgICAgIHRoaXMuYXhpc0EudGFuZ2VudHModHdpc3QuYXhpc0EsIHR3aXN0LmF4aXNBKTsKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7CiAgICAgIHRoaXMuYXhpc0IudGFuZ2VudHModHdpc3QuYXhpc0IsIHR3aXN0LmF4aXNCKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHR3aXN0LmF4aXNCLCB0d2lzdC5heGlzQik7CiAgICAgIGNvbmUuYW5nbGUgPSB0aGlzLmFuZ2xlOwogICAgICB0d2lzdC5tYXhBbmdsZSA9IHRoaXMudHdpc3RBbmdsZTsKICAgIH0KCiAgfQogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQ29uc3RyYWlucyB0d28gYm9kaWVzIHRvIGJlIGF0IGEgY29uc3RhbnQgZGlzdGFuY2UgZnJvbSBlYWNoIG90aGVycyBjZW50ZXIgb2YgbWFzcy4KICAgKi8KICBjbGFzcyBEaXN0YW5jZUNvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogVGhlIGRpc3RhbmNlIHRvIGtlZXAuIElmIHVuZGVmaW5lZCwgaXQgd2lsbCBiZSBzZXQgdG8gdGhlIGN1cnJlbnQgZGlzdGFuY2UgYmV0d2VlbiBib2R5QSBhbmQgYm9keUIKICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIGRpc3RhbmNlIFRoZSBkaXN0YW5jZSB0byBrZWVwLiBJZiB1bmRlZmluZWQsIGl0IHdpbGwgYmUgc2V0IHRvIHRoZSBjdXJyZW50IGRpc3RhbmNlIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCLgogICAgICogQHBhcmFtIG1heEZvcmNlIFRoZSBtYXhpbXVtIGZvcmNlIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gY29uc3RyYWluIHRoZSBib2RpZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5QiwgZGlzdGFuY2UsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5Qik7CgogICAgICBpZiAodHlwZW9mIGRpc3RhbmNlID09PSAndW5kZWZpbmVkJykgewogICAgICAgIGRpc3RhbmNlID0gYm9keUEucG9zaXRpb24uZGlzdGFuY2VUbyhib2R5Qi5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIHRoaXMuZGlzdGFuY2UgPSBkaXN0YW5jZTsKICAgICAgY29uc3QgZXEgPSB0aGlzLmRpc3RhbmNlRXF1YXRpb24gPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7CiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2goZXEpOyAvLyBNYWtlIGl0IGJpZGlyZWN0aW9uYWwKCiAgICAgIGVxLm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgICBlcS5tYXhGb3JjZSA9IG1heEZvcmNlOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGUKICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCBlcSA9IHRoaXMuZGlzdGFuY2VFcXVhdGlvbjsKICAgICAgY29uc3QgaGFsZkRpc3QgPSB0aGlzLmRpc3RhbmNlICogMC41OwogICAgICBjb25zdCBub3JtYWwgPSBlcS5uaTsKICAgICAgYm9keUIucG9zaXRpb24udnN1Yihib2R5QS5wb3NpdGlvbiwgbm9ybWFsKTsKICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICBub3JtYWwuc2NhbGUoaGFsZkRpc3QsIGVxLnJpKTsKICAgICAgbm9ybWFsLnNjYWxlKC1oYWxmRGlzdCwgZXEucmopOwogICAgfQoKICB9CgogIC8qKgogICAqIExvY2sgY29uc3RyYWludC4gV2lsbCByZW1vdmUgYWxsIGRlZ3JlZXMgb2YgZnJlZWRvbSBiZXR3ZWVuIHRoZSBib2RpZXMuCiAgICovCiAgY2xhc3MgTG9ja0NvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7IC8vIFNldCBwaXZvdCBwb2ludCBpbiBiZXR3ZWVuCgogICAgICBjb25zdCBwaXZvdEEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBwaXZvdEIgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBoYWxmV2F5ID0gbmV3IFZlYzMoKTsKICAgICAgYm9keUEucG9zaXRpb24udmFkZChib2R5Qi5wb3NpdGlvbiwgaGFsZldheSk7CiAgICAgIGhhbGZXYXkuc2NhbGUoMC41LCBoYWxmV2F5KTsKICAgICAgYm9keUIucG9pbnRUb0xvY2FsRnJhbWUoaGFsZldheSwgcGl2b3RCKTsKICAgICAgYm9keUEucG9pbnRUb0xvY2FsRnJhbWUoaGFsZldheSwgcGl2b3RBKTsgLy8gVGhlIHBvaW50LXRvLXBvaW50IGNvbnN0cmFpbnQgd2lsbCBrZWVwIGEgcG9pbnQgc2hhcmVkIGJldHdlZW4gdGhlIGJvZGllcwoKICAgICAgc3VwZXIoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpOyAvLyBTdG9yZSBpbml0aWFsIHJvdGF0aW9uIG9mIHRoZSBib2RpZXMgYXMgdW5pdCB2ZWN0b3JzIGluIHRoZSBsb2NhbCBib2R5IHNwYWNlcwoKICAgICAgdGhpcy54QSA9IGJvZHlBLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWCk7CiAgICAgIHRoaXMueEIgPSBib2R5Qi52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1gpOwogICAgICB0aGlzLnlBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9ZKTsKICAgICAgdGhpcy55QiA9IGJvZHlCLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWSk7CiAgICAgIHRoaXMuekEgPSBib2R5QS52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1opOwogICAgICB0aGlzLnpCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTsgLy8gLi4uYW5kIHRoZSBmb2xsb3dpbmcgcm90YXRpb25hbCBlcXVhdGlvbnMgd2lsbCBrZWVwIGFsbCByb3RhdGlvbmFsIERPRidzIGluIHBsYWNlCgogICAgICBjb25zdCByMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgY29uc3QgcjIgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjIgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHIzID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24zID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHIxLCByMiwgcjMpOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGUKICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICB0aGlzLm1vdG9yRXF1YXRpb247CiAgICAgIGNvbnN0IHIxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xOwogICAgICBjb25zdCByMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMjsKICAgICAgY29uc3QgcjMgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjM7CiAgICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBUaGVzZSB2ZWN0b3IgcGFpcnMgbXVzdCBiZSBvcnRob2dvbmFsCgogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy54QSwgcjEuYXhpc0EpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy55QiwgcjEuYXhpc0IpOwogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy55QSwgcjIuYXhpc0EpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy56QiwgcjIuYXhpc0IpOwogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy56QSwgcjMuYXhpc0EpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy54QiwgcjMuYXhpc0IpOwogICAgfQoKICB9CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwoKICAvKioKICAgKiBSb3RhdGlvbmFsIG1vdG9yIGNvbnN0cmFpbnQuIFRyaWVzIHRvIGtlZXAgdGhlIHJlbGF0aXZlIGFuZ3VsYXIgdmVsb2NpdHkgb2YgdGhlIGJvZGllcyB0byBhIGdpdmVuIHZhbHVlLgogICAqLwogIGNsYXNzIFJvdGF0aW9uYWxNb3RvckVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiBXb3JsZCBvcmllbnRlZCByb3RhdGlvbmFsIGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy4KICAgICAqLwoKICAgIC8qKgogICAgICogTW90b3IgdmVsb2NpdHkuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5QiwgbWF4Rm9yY2UpIHsKICAgICAgaWYgKG1heEZvcmNlID09PSB2b2lkIDApIHsKICAgICAgICBtYXhGb3JjZSA9IDFlNjsKICAgICAgfQoKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCLCAtbWF4Rm9yY2UsIG1heEZvcmNlKTsKICAgICAgdGhpcy5heGlzQSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuYXhpc0IgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnRhcmdldFZlbG9jaXR5ID0gMDsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgdGhpcy5iaTsKICAgICAgdGhpcy5iajsKICAgICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBOwogICAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0I7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gZyA9IDAKICAgICAgLy8gZ2RvdCA9IGF4aXNBICogd2kgLSBheGlzQiAqIHdqCiAgICAgIC8vIGdkb3QgPSBHICogVyA9IEcgKiBbdmkgd2kgdmogd2pdCiAgICAgIC8vID0+CiAgICAgIC8vIEcgPSBbMCBheGlzQSAwIC1heGlzQl0KCiAgICAgIEdBLnJvdGF0aW9uYWwuY29weShheGlzQSk7CiAgICAgIGF4aXNCLm5lZ2F0ZShHQi5yb3RhdGlvbmFsKTsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpIC0gdGhpcy50YXJnZXRWZWxvY2l0eTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1HVyAqIGIgLSBoICogR2lNZjsKICAgICAgcmV0dXJuIEI7CiAgICB9CgogIH0KCiAgLyoqCiAgICogSGluZ2UgY29uc3RyYWludC4gVGhpbmsgb2YgaXQgYXMgYSBkb29yIGhpbmdlLiBJdCB0cmllcyB0byBrZWVwIHRoZSBkb29yIGluIHRoZSBjb3JyZWN0IHBsYWNlIGFuZCB3aXRoIHRoZSBjb3JyZWN0IG9yaWVudGF0aW9uLgogICAqLwogIGNsYXNzIEhpbmdlQ29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBSb3RhdGlvbiBheGlzLCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFJvdGF0aW9uIGF4aXMsIGRlZmluZWQgbG9jYWxseSBpbiBib2R5Qi4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjsKICAgICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gb3B0aW9ucy5waXZvdEIgPyBvcHRpb25zLnBpdm90Qi5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgc3VwZXIoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpOwogICAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIGF4aXNBLm5vcm1hbGl6ZSgpOwogICAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIGF4aXNCLm5vcm1hbGl6ZSgpOwogICAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSAhIW9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDsKICAgICAgY29uc3Qgcm90YXRpb25hbDEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjEgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHJvdGF0aW9uYWwyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbiA9IG5ldyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbihib2R5QSwgYm9keUIsIG1heEZvcmNlKTsKICAgICAgbW90b3IuZW5hYmxlZCA9IGZhbHNlOyAvLyBOb3QgZW5hYmxlZCBieSBkZWZhdWx0CiAgICAgIC8vIEVxdWF0aW9ucyB0byBiZSBmZWQgdG8gdGhlIHNvbHZlcgoKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChyb3RhdGlvbmFsMSwgcm90YXRpb25hbDIsIG1vdG9yKTsKICAgIH0KICAgIC8qKgogICAgICogZW5hYmxlTW90b3IKICAgICAqLwoKCiAgICBlbmFibGVNb3RvcigpIHsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQgPSB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBkaXNhYmxlTW90b3IKICAgICAqLwoKCiAgICBkaXNhYmxlTW90b3IoKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi5lbmFibGVkID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHNldE1vdG9yU3BlZWQKICAgICAqLwoKCiAgICBzZXRNb3RvclNwZWVkKHNwZWVkKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi50YXJnZXRWZWxvY2l0eSA9IHNwZWVkOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRNb3Rvck1heEZvcmNlCiAgICAgKi8KCgogICAgc2V0TW90b3JNYXhGb3JjZShtYXhGb3JjZSkgewogICAgICB0aGlzLm1vdG9yRXF1YXRpb24ubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGUKICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbjsKICAgICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjE7CiAgICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yOwogICAgICBjb25zdCB3b3JsZEF4aXNBID0gSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxOwogICAgICBjb25zdCB3b3JsZEF4aXNCID0gSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMyOwogICAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IGF4aXNCID0gdGhpcy5heGlzQjsKICAgICAgc3VwZXIudXBkYXRlKCk7IC8vIEdldCB3b3JsZCBheGVzCgogICAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KGF4aXNBLCB3b3JsZEF4aXNBKTsKICAgICAgYm9keUIucXVhdGVybmlvbi52bXVsdChheGlzQiwgd29ybGRBeGlzQik7CiAgICAgIHdvcmxkQXhpc0EudGFuZ2VudHMocjEuYXhpc0EsIHIyLmF4aXNBKTsKICAgICAgcjEuYXhpc0IuY29weSh3b3JsZEF4aXNCKTsKICAgICAgcjIuYXhpc0IuY29weSh3b3JsZEF4aXNCKTsKCiAgICAgIGlmICh0aGlzLm1vdG9yRXF1YXRpb24uZW5hYmxlZCkgewogICAgICAgIGJvZHlBLnF1YXRlcm5pb24udm11bHQodGhpcy5heGlzQSwgbW90b3IuYXhpc0EpOwogICAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQodGhpcy5heGlzQiwgbW90b3IuYXhpc0IpOwogICAgICB9CiAgICB9CgogIH0KICBjb25zdCBIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzEgPSBuZXcgVmVjMygpOwogIGNvbnN0IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMiA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIENvbnN0cmFpbnMgdGhlIHNsaXBwaW5nIGluIGEgY29udGFjdCBhbG9uZyBhIHRhbmdlbnQKICAgKi8KICBjbGFzcyBGcmljdGlvbkVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLy8gVGFuZ2VudAoKICAgIC8qKgogICAgICogQHBhcmFtIHNsaXBGb3JjZSBzaG91bGQgYmUgKy1GX2ZyaWN0aW9uID0gKy1tdSAqIEZfbm9ybWFsID0gKy1tdSAqIG0gKiBnCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgc2xpcEZvcmNlKSB7CiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLXNsaXBGb3JjZSwgc2xpcEZvcmNlKTsKICAgICAgdGhpcy5yaSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucmogPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnQgPSBuZXcgVmVjMygpOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICB0aGlzLmJpOwogICAgICB0aGlzLmJqOwogICAgICBjb25zdCByaSA9IHRoaXMucmk7CiAgICAgIGNvbnN0IHJqID0gdGhpcy5yajsKICAgICAgY29uc3Qgcml4dCA9IEZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDE7CiAgICAgIGNvbnN0IHJqeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyOwogICAgICBjb25zdCB0ID0gdGhpcy50OyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIHJpLmNyb3NzKHQsIHJpeHQpOwogICAgICByai5jcm9zcyh0LCByanh0KTsgLy8gRyA9IFstdCAtcml4dCB0IHJqeHRdCiAgICAgIC8vIEFuZCByZW1lbWJlciwgdGhpcyBpcyBhIHB1cmUgdmVsb2NpdHkgY29uc3RyYWludCwgZyBpcyBhbHdheXMgemVybyEKCiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgdC5uZWdhdGUoR0Euc3BhdGlhbCk7CiAgICAgIHJpeHQubmVnYXRlKEdBLnJvdGF0aW9uYWwpOwogICAgICBHQi5zcGF0aWFsLmNvcHkodCk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShyanh0KTsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICBjb25zdCBCID0gLUdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQogIGNvbnN0IEZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IEZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDIgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBEZWZpbmVzIHdoYXQgaGFwcGVucyB3aGVuIHR3byBtYXRlcmlhbHMgbWVldC4KICAgKiBAdG9kbyBSZWZhY3RvciBtYXRlcmlhbHMgdG8gbWF0ZXJpYWxBIGFuZCBtYXRlcmlhbEIKICAgKi8KICBjbGFzcyBDb250YWN0TWF0ZXJpYWwgewogICAgLyoqCiAgICAgKiBJZGVudGlmaWVyIG9mIHRoaXMgbWF0ZXJpYWwuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFBhcnRpY2lwYXRpbmcgbWF0ZXJpYWxzLgogICAgICovCgogICAgLyoqCiAgICAgKiBGcmljdGlvbiBjb2VmZmljaWVudC4KICAgICAqIEBkZWZhdWx0IDAuMwogICAgICovCgogICAgLyoqCiAgICAgKiBSZXN0aXR1dGlvbiBjb2VmZmljaWVudC4KICAgICAqIEBkZWZhdWx0IDAuMwogICAgICovCgogICAgLyoqCiAgICAgKiBTdGlmZm5lc3Mgb2YgdGhlIHByb2R1Y2VkIGNvbnRhY3QgZXF1YXRpb25zLgogICAgICogQGRlZmF1bHQgMWU3CiAgICAgKi8KCiAgICAvKioKICAgICAqIFJlbGF4YXRpb24gdGltZSBvZiB0aGUgcHJvZHVjZWQgY29udGFjdCBlcXVhdGlvbnMuCiAgICAgKiBAZGVmYXVsdCAzCiAgICAgKi8KCiAgICAvKioKICAgICAqIFN0aWZmbmVzcyBvZiB0aGUgcHJvZHVjZWQgZnJpY3Rpb24gZXF1YXRpb25zLgogICAgICogQGRlZmF1bHQgMWU3CiAgICAgKi8KCiAgICAvKioKICAgICAqIFJlbGF4YXRpb24gdGltZSBvZiB0aGUgcHJvZHVjZWQgZnJpY3Rpb24gZXF1YXRpb25zCiAgICAgKiBAZGVmYXVsdCAzCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG0xLCBtMiwgb3B0aW9ucykgewogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIGZyaWN0aW9uOiAwLjMsCiAgICAgICAgcmVzdGl0dXRpb246IDAuMywKICAgICAgICBjb250YWN0RXF1YXRpb25TdGlmZm5lc3M6IDFlNywKICAgICAgICBjb250YWN0RXF1YXRpb25SZWxheGF0aW9uOiAzLAogICAgICAgIGZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3M6IDFlNywKICAgICAgICBmcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbjogMwogICAgICB9KTsKICAgICAgdGhpcy5pZCA9IENvbnRhY3RNYXRlcmlhbC5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5tYXRlcmlhbHMgPSBbbTEsIG0yXTsKICAgICAgdGhpcy5mcmljdGlvbiA9IG9wdGlvbnMuZnJpY3Rpb247CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSBvcHRpb25zLnJlc3RpdHV0aW9uOwogICAgICB0aGlzLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzcyA9IG9wdGlvbnMuY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzOwogICAgICB0aGlzLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24gPSBvcHRpb25zLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb247CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcyA9IG9wdGlvbnMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzczsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiA9IG9wdGlvbnMuZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb247CiAgICB9CgogIH0KICBDb250YWN0TWF0ZXJpYWwuaWRDb3VudGVyID0gMDsKCiAgLyoqCiAgICogRGVmaW5lcyBhIHBoeXNpY3MgbWF0ZXJpYWwuCiAgICovCiAgY2xhc3MgTWF0ZXJpYWwgewogICAgLyoqCiAgICAgKiBNYXRlcmlhbCBuYW1lLgogICAgICogSWYgb3B0aW9ucyBpcyBhIHN0cmluZywgbmFtZSB3aWxsIGJlIHNldCB0byB0aGF0IHN0cmluZy4KICAgICAqIEB0b2RvIERlcHJlY2F0ZSB0aGlzCiAgICAgKi8KCiAgICAvKiogTWF0ZXJpYWwgaWQuICovCgogICAgLyoqCiAgICAgKiBGcmljdGlvbiBmb3IgdGhpcyBtYXRlcmlhbC4KICAgICAqIElmIG5vbi1uZWdhdGl2ZSwgaXQgd2lsbCBiZSB1c2VkIGluc3RlYWQgb2YgdGhlIGZyaWN0aW9uIGdpdmVuIGJ5IENvbnRhY3RNYXRlcmlhbHMuIElmIHRoZXJlJ3Mgbm8gbWF0Y2hpbmcgQ29udGFjdE1hdGVyaWFsLCB0aGUgdmFsdWUgZnJvbSBgZGVmYXVsdENvbnRhY3RNYXRlcmlhbGAgaW4gdGhlIFdvcmxkIHdpbGwgYmUgdXNlZC4KICAgICAqLwoKICAgIC8qKgogICAgICogUmVzdGl0dXRpb24gZm9yIHRoaXMgbWF0ZXJpYWwuCiAgICAgKiBJZiBub24tbmVnYXRpdmUsIGl0IHdpbGwgYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSByZXN0aXR1dGlvbiBnaXZlbiBieSBDb250YWN0TWF0ZXJpYWxzLiBJZiB0aGVyZSdzIG5vIG1hdGNoaW5nIENvbnRhY3RNYXRlcmlhbCwgdGhlIHZhbHVlIGZyb20gYGRlZmF1bHRDb250YWN0TWF0ZXJpYWxgIGluIHRoZSBXb3JsZCB3aWxsIGJlIHVzZWQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgbGV0IG5hbWUgPSAnJzsgLy8gQmFja3dhcmRzIGNvbXBhdGliaWxpdHkgZml4CgogICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgLy9jb25zb2xlLndhcm4oYFBhc3NpbmcgYSBzdHJpbmcgdG8gTWF0ZXJpYWxPcHRpb25zIGlzIGRlcHJlY2F0ZWQsIGFuZCBoYXMgbm8gZWZmZWN0YCkKICAgICAgICBuYW1lID0gb3B0aW9uczsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgIHRoaXMuaWQgPSBNYXRlcmlhbC5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5mcmljdGlvbiA9IHR5cGVvZiBvcHRpb25zLmZyaWN0aW9uICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuZnJpY3Rpb24gOiAtMTsKICAgICAgdGhpcy5yZXN0aXR1dGlvbiA9IHR5cGVvZiBvcHRpb25zLnJlc3RpdHV0aW9uICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMucmVzdGl0dXRpb24gOiAtMTsKICAgIH0KCiAgfQogIE1hdGVyaWFsLmlkQ291bnRlciA9IDA7CgogIC8qKgogICAqIEEgc3ByaW5nLCBjb25uZWN0aW5nIHR3byBib2RpZXMuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3Qgc3ByaW5nID0gbmV3IFNwcmluZyhib3hCb2R5LCBzcGhlcmVCb2R5LCB7CiAgICogICAgICAgcmVzdExlbmd0aDogMCwKICAgKiAgICAgICBzdGlmZm5lc3M6IDUwLAogICAqICAgICAgIGRhbXBpbmc6IDEsCiAgICogICAgIH0pCiAgICoKICAgKiAgICAgLy8gQ29tcHV0ZSB0aGUgZm9yY2UgYWZ0ZXIgZWFjaCBzdGVwCiAgICogICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgKGV2ZW50KSA9PiB7CiAgICogICAgICAgc3ByaW5nLmFwcGx5Rm9yY2UoKQogICAqICAgICB9KQogICAqLwogIGNsYXNzIFNwcmluZyB7CiAgICAvKioKICAgICAqIFJlc3QgbGVuZ3RoIG9mIHRoZSBzcHJpbmcuIEEgbnVtYmVyID4gMC4KICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogU3RpZmZuZXNzIG9mIHRoZSBzcHJpbmcuIEEgbnVtYmVyID49IDAuCiAgICAgKiBAZGVmYXVsdCAxMDAKICAgICAqLwoKICAgIC8qKgogICAgICogRGFtcGluZyBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+PSAwLgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBGaXJzdCBjb25uZWN0ZWQgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogU2Vjb25kIGNvbm5lY3RlZCBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBBbmNob3IgZm9yIGJvZHlBIGluIGxvY2FsIGJvZHlBIGNvb3JkaW5hdGVzLgogICAgICogV2hlcmUgdG8gaG9vayB0aGUgc3ByaW5nIHRvIGJvZHkgQSwgaW4gbG9jYWwgYm9keSBjb29yZGluYXRlcy4KICAgICAqIEBkZWZhdWx0IG5ldyBWZWMzKCkKICAgICAqLwoKICAgIC8qKgogICAgICogQW5jaG9yIGZvciBib2R5QiBpbiBsb2NhbCBib2R5QiBjb29yZGluYXRlcy4KICAgICAqIFdoZXJlIHRvIGhvb2sgdGhlIHNwcmluZyB0byBib2R5IEIsIGluIGxvY2FsIGJvZHkgY29vcmRpbmF0ZXMuCiAgICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLnJlc3RMZW5ndGggPSB0eXBlb2Ygb3B0aW9ucy5yZXN0TGVuZ3RoID09PSAnbnVtYmVyJyA/IG9wdGlvbnMucmVzdExlbmd0aCA6IDE7CiAgICAgIHRoaXMuc3RpZmZuZXNzID0gb3B0aW9ucy5zdGlmZm5lc3MgfHwgMTAwOwogICAgICB0aGlzLmRhbXBpbmcgPSBvcHRpb25zLmRhbXBpbmcgfHwgMTsKICAgICAgdGhpcy5ib2R5QSA9IGJvZHlBOwogICAgICB0aGlzLmJvZHlCID0gYm9keUI7CiAgICAgIHRoaXMubG9jYWxBbmNob3JBID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5sb2NhbEFuY2hvckIgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMubG9jYWxBbmNob3JBKSB7CiAgICAgICAgdGhpcy5sb2NhbEFuY2hvckEuY29weShvcHRpb25zLmxvY2FsQW5jaG9yQSk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLmxvY2FsQW5jaG9yQikgewogICAgICAgIHRoaXMubG9jYWxBbmNob3JCLmNvcHkob3B0aW9ucy5sb2NhbEFuY2hvckIpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy53b3JsZEFuY2hvckEpIHsKICAgICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQShvcHRpb25zLndvcmxkQW5jaG9yQSk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLndvcmxkQW5jaG9yQikgewogICAgICAgIHRoaXMuc2V0V29ybGRBbmNob3JCKG9wdGlvbnMud29ybGRBbmNob3JCKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIHVzaW5nIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICovCgoKICAgIHNldFdvcmxkQW5jaG9yQSh3b3JsZEFuY2hvckEpIHsKICAgICAgdGhpcy5ib2R5QS5wb2ludFRvTG9jYWxGcmFtZSh3b3JsZEFuY2hvckEsIHRoaXMubG9jYWxBbmNob3JBKTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBhbmNob3IgcG9pbnQgb24gYm9keSBCLCB1c2luZyB3b3JsZCBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBzZXRXb3JsZEFuY2hvckIod29ybGRBbmNob3JCKSB7CiAgICAgIHRoaXMuYm9keUIucG9pbnRUb0xvY2FsRnJhbWUod29ybGRBbmNob3JCLCB0aGlzLmxvY2FsQW5jaG9yQik7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHkgQSwgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKiBAcGFyYW0gcmVzdWx0IFRoZSB2ZWN0b3IgdG8gc3RvcmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBnZXRXb3JsZEFuY2hvckEocmVzdWx0KSB7CiAgICAgIHRoaXMuYm9keUEucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5sb2NhbEFuY2hvckEsIHJlc3VsdCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHkgQiwgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKiBAcGFyYW0gcmVzdWx0IFRoZSB2ZWN0b3IgdG8gc3RvcmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBnZXRXb3JsZEFuY2hvckIocmVzdWx0KSB7CiAgICAgIHRoaXMuYm9keUIucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5sb2NhbEFuY2hvckIsIHJlc3VsdCk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IHRoZSBzcHJpbmcgZm9yY2UgdG8gdGhlIGNvbm5lY3RlZCBib2RpZXMuCiAgICAgKi8KCgogICAgYXBwbHlGb3JjZSgpIHsKICAgICAgY29uc3QgayA9IHRoaXMuc3RpZmZuZXNzOwogICAgICBjb25zdCBkID0gdGhpcy5kYW1waW5nOwogICAgICBjb25zdCBsID0gdGhpcy5yZXN0TGVuZ3RoOwogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgciA9IGFwcGx5Rm9yY2VfcjsKICAgICAgY29uc3Qgcl91bml0ID0gYXBwbHlGb3JjZV9yX3VuaXQ7CiAgICAgIGNvbnN0IHUgPSBhcHBseUZvcmNlX3U7CiAgICAgIGNvbnN0IGYgPSBhcHBseUZvcmNlX2Y7CiAgICAgIGNvbnN0IHRtcCA9IGFwcGx5Rm9yY2VfdG1wOwogICAgICBjb25zdCB3b3JsZEFuY2hvckEgPSBhcHBseUZvcmNlX3dvcmxkQW5jaG9yQTsKICAgICAgY29uc3Qgd29ybGRBbmNob3JCID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckI7CiAgICAgIGNvbnN0IHJpID0gYXBwbHlGb3JjZV9yaTsKICAgICAgY29uc3QgcmogPSBhcHBseUZvcmNlX3JqOwogICAgICBjb25zdCByaV94X2YgPSBhcHBseUZvcmNlX3JpX3hfZjsKICAgICAgY29uc3QgcmpfeF9mID0gYXBwbHlGb3JjZV9yal94X2Y7IC8vIEdldCB3b3JsZCBhbmNob3JzCgogICAgICB0aGlzLmdldFdvcmxkQW5jaG9yQSh3b3JsZEFuY2hvckEpOwogICAgICB0aGlzLmdldFdvcmxkQW5jaG9yQih3b3JsZEFuY2hvckIpOyAvLyBHZXQgb2Zmc2V0IHBvaW50cwoKICAgICAgd29ybGRBbmNob3JBLnZzdWIoYm9keUEucG9zaXRpb24sIHJpKTsKICAgICAgd29ybGRBbmNob3JCLnZzdWIoYm9keUIucG9zaXRpb24sIHJqKTsgLy8gQ29tcHV0ZSBkaXN0YW5jZSB2ZWN0b3IgYmV0d2VlbiB3b3JsZCBhbmNob3IgcG9pbnRzCgogICAgICB3b3JsZEFuY2hvckIudnN1Yih3b3JsZEFuY2hvckEsIHIpOwogICAgICBjb25zdCBybGVuID0gci5sZW5ndGgoKTsKICAgICAgcl91bml0LmNvcHkocik7CiAgICAgIHJfdW5pdC5ub3JtYWxpemUoKTsgLy8gQ29tcHV0ZSByZWxhdGl2ZSB2ZWxvY2l0eSBvZiB0aGUgYW5jaG9yIHBvaW50cywgdQoKICAgICAgYm9keUIudmVsb2NpdHkudnN1Yihib2R5QS52ZWxvY2l0eSwgdSk7IC8vIEFkZCByb3RhdGlvbmFsIHZlbG9jaXR5CgogICAgICBib2R5Qi5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MocmosIHRtcCk7CiAgICAgIHUudmFkZCh0bXAsIHUpOwogICAgICBib2R5QS5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MocmksIHRtcCk7CiAgICAgIHUudnN1Yih0bXAsIHUpOyAvLyBGID0gLSBrICogKCB4IC0gTCApIC0gRCAqICggdSApCgogICAgICByX3VuaXQuc2NhbGUoLWsgKiAocmxlbiAtIGwpIC0gZCAqIHUuZG90KHJfdW5pdCksIGYpOyAvLyBBZGQgZm9yY2VzIHRvIGJvZGllcwoKICAgICAgYm9keUEuZm9yY2UudnN1YihmLCBib2R5QS5mb3JjZSk7CiAgICAgIGJvZHlCLmZvcmNlLnZhZGQoZiwgYm9keUIuZm9yY2UpOyAvLyBBbmd1bGFyIGZvcmNlCgogICAgICByaS5jcm9zcyhmLCByaV94X2YpOwogICAgICByai5jcm9zcyhmLCByal94X2YpOwogICAgICBib2R5QS50b3JxdWUudnN1YihyaV94X2YsIGJvZHlBLnRvcnF1ZSk7CiAgICAgIGJvZHlCLnRvcnF1ZS52YWRkKHJqX3hfZiwgYm9keUIudG9ycXVlKTsKICAgIH0KCiAgfQogIGNvbnN0IGFwcGx5Rm9yY2VfciA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9yX3VuaXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfdSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9mID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3dvcmxkQW5jaG9yQSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV93b3JsZEFuY2hvckIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfcmkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfcmogPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfcmlfeF9mID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JqX3hfZiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV90bXAgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBXaGVlbEluZm8KICAgKi8KICBjbGFzcyBXaGVlbEluZm8gewogICAgLyoqCiAgICAgKiBNYXggdHJhdmVsIGRpc3RhbmNlIG9mIHRoZSBzdXNwZW5zaW9uLCBpbiBtZXRlcnMuCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNwZWVkIHRvIGFwcGx5IHRvIHRoZSB3aGVlbCByb3RhdGlvbiB3aGVuIHRoZSB3aGVlbCBpcyBzbGlkaW5nLgogICAgICogQGRlZmF1bHQgLTAuMQogICAgICovCgogICAgLyoqCiAgICAgKiBJZiB0aGUgY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCBzaG91bGQgYmUgdXNlZC4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIHNsaWRpbmcKICAgICAqLwoKICAgIC8qKgogICAgICogQ29ubmVjdGlvbiBwb2ludCwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBjaGFzc2lzIGJvZHkgZnJhbWUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIGNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBkaXJlY3Rpb25Mb2NhbAogICAgICovCgogICAgLyoqCiAgICAgKiBkaXJlY3Rpb25Xb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBheGxlTG9jYWwKICAgICAqLwoKICAgIC8qKgogICAgICogYXhsZVdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25SZXN0TGVuZ3RoCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25NYXhMZW5ndGgKICAgICAqIEBkZWZhdWx0IDIKICAgICAqLwoKICAgIC8qKgogICAgICogcmFkaXVzCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25TdGlmZm5lc3MKICAgICAqIEBkZWZhdWx0IDEwMAogICAgICovCgogICAgLyoqCiAgICAgKiBkYW1waW5nQ29tcHJlc3Npb24KICAgICAqIEBkZWZhdWx0IDEwCiAgICAgKi8KCiAgICAvKioKICAgICAqIGRhbXBpbmdSZWxheGF0aW9uCiAgICAgKiBAZGVmYXVsdCAxMAogICAgICovCgogICAgLyoqCiAgICAgKiBmcmljdGlvblNsaXAKICAgICAqIEBkZWZhdWx0IDEwLjUKICAgICAqLwoKICAgIC8qKiBmb3J3YXJkQWNjZWxlcmF0aW9uICovCgogICAgLyoqIHNpZGVBY2NlbGVyYXRpb24gKi8KCiAgICAvKioKICAgICAqIHN0ZWVyaW5nCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIFJvdGF0aW9uIHZhbHVlLCBpbiByYWRpYW5zLgogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBkZWx0YVJvdGF0aW9uCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHJvbGxJbmZsdWVuY2UKICAgICAqIEBkZWZhdWx0IDAuMDEKICAgICAqLwoKICAgIC8qKgogICAgICogbWF4U3VzcGVuc2lvbkZvcmNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGVuZ2luZUZvcmNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGJyYWtlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGlzRnJvbnRXaGVlbAogICAgICogQGRlZmF1bHQgdHJ1ZQogICAgICovCgogICAgLyoqCiAgICAgKiBjbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24KICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkKICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogc3VzcGVuc2lvbkZvcmNlCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHNsaXBJbmZvCiAgICAgKi8KCiAgICAvKioKICAgICAqIHNraWRJbmZvCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25MZW5ndGgKICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogc2lkZUltcHVsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogZm9yd2FyZEltcHVsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHJlc3VsdCBmcm9tIHJheWNhc3RpbmcuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZWVsIHdvcmxkIHRyYW5zZm9ybS4KICAgICAqLwoKICAgIC8qKgogICAgICogaXNJbkNvbnRhY3QKICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIGNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbDogbmV3IFZlYzMoKSwKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgZGlyZWN0aW9uTG9jYWw6IG5ldyBWZWMzKCksCiAgICAgICAgZGlyZWN0aW9uV29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgYXhsZUxvY2FsOiBuZXcgVmVjMygpLAogICAgICAgIGF4bGVXb3JsZDogbmV3IFZlYzMoKSwKICAgICAgICBzdXNwZW5zaW9uUmVzdExlbmd0aDogMSwKICAgICAgICBzdXNwZW5zaW9uTWF4TGVuZ3RoOiAyLAogICAgICAgIHJhZGl1czogMSwKICAgICAgICBzdXNwZW5zaW9uU3RpZmZuZXNzOiAxMDAsCiAgICAgICAgZGFtcGluZ0NvbXByZXNzaW9uOiAxMCwKICAgICAgICBkYW1waW5nUmVsYXhhdGlvbjogMTAsCiAgICAgICAgZnJpY3Rpb25TbGlwOiAxMC41LAogICAgICAgIGZvcndhcmRBY2NlbGVyYXRpb246IDEsCiAgICAgICAgc2lkZUFjY2VsZXJhdGlvbjogMSwKICAgICAgICBzdGVlcmluZzogMCwKICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICBkZWx0YVJvdGF0aW9uOiAwLAogICAgICAgIHJvbGxJbmZsdWVuY2U6IDAuMDEsCiAgICAgICAgbWF4U3VzcGVuc2lvbkZvcmNlOiBOdW1iZXIuTUFYX1ZBTFVFLAogICAgICAgIGlzRnJvbnRXaGVlbDogdHJ1ZSwKICAgICAgICBjbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb246IDEsCiAgICAgICAgc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHk6IDAsCiAgICAgICAgc3VzcGVuc2lvbkZvcmNlOiAwLAogICAgICAgIHNsaXBJbmZvOiAwLAogICAgICAgIHNraWRJbmZvOiAwLAogICAgICAgIHN1c3BlbnNpb25MZW5ndGg6IDAsCiAgICAgICAgbWF4U3VzcGVuc2lvblRyYXZlbDogMSwKICAgICAgICB1c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiBmYWxzZSwKICAgICAgICBjdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiAtMC4xCiAgICAgIH0pOwogICAgICB0aGlzLm1heFN1c3BlbnNpb25UcmF2ZWwgPSBvcHRpb25zLm1heFN1c3BlbnNpb25UcmF2ZWw7CiAgICAgIHRoaXMuY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IG9wdGlvbnMuY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDsKICAgICAgdGhpcy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkID0gb3B0aW9ucy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOwogICAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwgPSBvcHRpb25zLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbC5jbG9uZSgpOwogICAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCA9IG9wdGlvbnMuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uTG9jYWwgPSBvcHRpb25zLmRpcmVjdGlvbkxvY2FsLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uV29ybGQgPSBvcHRpb25zLmRpcmVjdGlvbldvcmxkLmNsb25lKCk7CiAgICAgIHRoaXMuYXhsZUxvY2FsID0gb3B0aW9ucy5heGxlTG9jYWwuY2xvbmUoKTsKICAgICAgdGhpcy5heGxlV29ybGQgPSBvcHRpb25zLmF4bGVXb3JsZC5jbG9uZSgpOwogICAgICB0aGlzLnN1c3BlbnNpb25SZXN0TGVuZ3RoID0gb3B0aW9ucy5zdXNwZW5zaW9uUmVzdExlbmd0aDsKICAgICAgdGhpcy5zdXNwZW5zaW9uTWF4TGVuZ3RoID0gb3B0aW9ucy5zdXNwZW5zaW9uTWF4TGVuZ3RoOwogICAgICB0aGlzLnJhZGl1cyA9IG9wdGlvbnMucmFkaXVzOwogICAgICB0aGlzLnN1c3BlbnNpb25TdGlmZm5lc3MgPSBvcHRpb25zLnN1c3BlbnNpb25TdGlmZm5lc3M7CiAgICAgIHRoaXMuZGFtcGluZ0NvbXByZXNzaW9uID0gb3B0aW9ucy5kYW1waW5nQ29tcHJlc3Npb247CiAgICAgIHRoaXMuZGFtcGluZ1JlbGF4YXRpb24gPSBvcHRpb25zLmRhbXBpbmdSZWxheGF0aW9uOwogICAgICB0aGlzLmZyaWN0aW9uU2xpcCA9IG9wdGlvbnMuZnJpY3Rpb25TbGlwOwogICAgICB0aGlzLmZvcndhcmRBY2NlbGVyYXRpb24gPSBvcHRpb25zLmZvcndhcmRBY2NlbGVyYXRpb247CiAgICAgIHRoaXMuc2lkZUFjY2VsZXJhdGlvbiA9IG9wdGlvbnMuc2lkZUFjY2VsZXJhdGlvbjsKICAgICAgdGhpcy5zdGVlcmluZyA9IDA7CiAgICAgIHRoaXMucm90YXRpb24gPSAwOwogICAgICB0aGlzLmRlbHRhUm90YXRpb24gPSAwOwogICAgICB0aGlzLnJvbGxJbmZsdWVuY2UgPSBvcHRpb25zLnJvbGxJbmZsdWVuY2U7CiAgICAgIHRoaXMubWF4U3VzcGVuc2lvbkZvcmNlID0gb3B0aW9ucy5tYXhTdXNwZW5zaW9uRm9yY2U7CiAgICAgIHRoaXMuZW5naW5lRm9yY2UgPSAwOwogICAgICB0aGlzLmJyYWtlID0gMDsKICAgICAgdGhpcy5pc0Zyb250V2hlZWwgPSBvcHRpb25zLmlzRnJvbnRXaGVlbDsKICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxOwogICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uRm9yY2UgPSAwOwogICAgICB0aGlzLnNsaXBJbmZvID0gMDsKICAgICAgdGhpcy5za2lkSW5mbyA9IDA7CiAgICAgIHRoaXMuc3VzcGVuc2lvbkxlbmd0aCA9IDA7CiAgICAgIHRoaXMuc2lkZUltcHVsc2UgPSAwOwogICAgICB0aGlzLmZvcndhcmRJbXB1bHNlID0gMDsKICAgICAgdGhpcy5yYXljYXN0UmVzdWx0ID0gbmV3IFJheWNhc3RSZXN1bHQoKTsKICAgICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTsKICAgICAgdGhpcy5pc0luQ29udGFjdCA9IGZhbHNlOwogICAgfQoKICAgIHVwZGF0ZVdoZWVsKGNoYXNzaXMpIHsKICAgICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHRoaXMucmF5Y2FzdFJlc3VsdDsKCiAgICAgIGlmICh0aGlzLmlzSW5Db250YWN0KSB7CiAgICAgICAgY29uc3QgcHJvamVjdCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KHJheWNhc3RSZXN1bHQuZGlyZWN0aW9uV29ybGQpOwogICAgICAgIHJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXMucG9zaXRpb24sIHJlbHBvcyk7CiAgICAgICAgY2hhc3Npcy5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChyZWxwb3MsIGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTsKICAgICAgICBjb25zdCBwcm9qVmVsID0gcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZC5kb3QoY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQpOwoKICAgICAgICBpZiAocHJvamVjdCA+PSAtMC4xKSB7CiAgICAgICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wOwogICAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjAgLyAwLjE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGludiA9IC0xIC8gcHJvamVjdDsKICAgICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52OwogICAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSBpbnY7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIE5vdCBpbiBjb250YWN0IDogcG9zaXRpb24gd2hlZWwgaW4gYSBuaWNlIChyZXN0IGxlbmd0aCkgcG9zaXRpb24KICAgICAgICByYXljYXN0UmVzdWx0LnN1c3BlbnNpb25MZW5ndGggPSB0aGlzLnN1c3BlbnNpb25SZXN0TGVuZ3RoOwogICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSAwLjA7CiAgICAgICAgcmF5Y2FzdFJlc3VsdC5kaXJlY3Rpb25Xb3JsZC5zY2FsZSgtMSwgcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjA7CiAgICAgIH0KICAgIH0KCiAgfQogIGNvbnN0IGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCByZWxwb3MgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBWZWhpY2xlIGhlbHBlciBjbGFzcyB0aGF0IGNhc3RzIHJheXMgZnJvbSB0aGUgd2hlZWwgcG9zaXRpb25zIHRvd2FyZHMgdGhlIGdyb3VuZCBhbmQgYXBwbGllcyBmb3JjZXMuCiAgICovCiAgY2xhc3MgUmF5Y2FzdFZlaGljbGUgewogICAgLyoqIFRoZSBjYXIgY2hhc3NpcyBib2R5LiAqLwoKICAgIC8qKiBUaGUgd2hlZWxzLiAqLwoKICAgIC8qKiBXaWxsIGJlIHNldCB0byB0cnVlIGlmIHRoZSBjYXIgaXMgc2xpZGluZy4gKi8KCiAgICAvKiogSW5kZXggb2YgdGhlIHJpZ2h0IGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogSW5kZXggb2YgdGhlIGZvcndhcmQgYXhpcy4geD0wLCB5PTEsIHo9MiAqLwoKICAgIC8qKiBJbmRleCBvZiB0aGUgdXAgYXhpcy4geD0wLCB5PTEsIHo9MiAqLwoKICAgIC8qKiBUaGUgY29uc3RyYWludHMuICovCgogICAgLyoqIE9wdGlvbmFsIHByZS1zdGVwIGNhbGxiYWNrLiAqLwoKICAgIC8qKiBOdW1iZXIgb2Ygd2hlZWxzIG9uIHRoZSBncm91bmQuICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIHRoaXMuY2hhc3Npc0JvZHkgPSBvcHRpb25zLmNoYXNzaXNCb2R5OwogICAgICB0aGlzLndoZWVsSW5mb3MgPSBbXTsKICAgICAgdGhpcy5zbGlkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLmluZGV4UmlnaHRBeGlzID0gdHlwZW9mIG9wdGlvbnMuaW5kZXhSaWdodEF4aXMgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5pbmRleFJpZ2h0QXhpcyA6IDI7CiAgICAgIHRoaXMuaW5kZXhGb3J3YXJkQXhpcyA9IHR5cGVvZiBvcHRpb25zLmluZGV4Rm9yd2FyZEF4aXMgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5pbmRleEZvcndhcmRBeGlzIDogMDsKICAgICAgdGhpcy5pbmRleFVwQXhpcyA9IHR5cGVvZiBvcHRpb25zLmluZGV4VXBBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhVcEF4aXMgOiAxOwogICAgICB0aGlzLmNvbnN0cmFpbnRzID0gW107CgogICAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9ICgpID0+IHt9OwoKICAgICAgdGhpcy5jdXJyZW50VmVoaWNsZVNwZWVkS21Ib3VyID0gMDsKICAgICAgdGhpcy5udW1XaGVlbHNPbkdyb3VuZCA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhIHdoZWVsLiBGb3IgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG9wdGlvbnMsIHNlZSBgV2hlZWxJbmZvYC4KICAgICAqLwoKCiAgICBhZGRXaGVlbChvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IGluZm8gPSBuZXcgV2hlZWxJbmZvKG9wdGlvbnMpOwogICAgICBjb25zdCBpbmRleCA9IHRoaXMud2hlZWxJbmZvcy5sZW5ndGg7CiAgICAgIHRoaXMud2hlZWxJbmZvcy5wdXNoKGluZm8pOwogICAgICByZXR1cm4gaW5kZXg7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgc3RlZXJpbmcgdmFsdWUgb2YgYSB3aGVlbC4KICAgICAqLwoKCiAgICBzZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KSB7CiAgICAgIGNvbnN0IHdoZWVsID0gdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdOwogICAgICB3aGVlbC5zdGVlcmluZyA9IHZhbHVlOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHdoZWVsIGZvcmNlIHRvIGFwcGx5IG9uIG9uZSBvZiB0aGUgd2hlZWxzIGVhY2ggdGltZSBzdGVwCiAgICAgKi8KCgogICAgYXBwbHlFbmdpbmVGb3JjZSh2YWx1ZSwgd2hlZWxJbmRleCkgewogICAgICB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0uZW5naW5lRm9yY2UgPSB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBicmFraW5nIGZvcmNlIG9mIGEgd2hlZWwKICAgICAqLwoKCiAgICBzZXRCcmFrZShicmFrZSwgd2hlZWxJbmRleCkgewogICAgICB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0uYnJha2UgPSBicmFrZTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIHRoZSB2ZWhpY2xlIGluY2x1ZGluZyBpdHMgY29uc3RyYWludHMgdG8gdGhlIHdvcmxkLgogICAgICovCgoKICAgIGFkZFRvV29ybGQod29ybGQpIHsKICAgICAgd29ybGQuYWRkQm9keSh0aGlzLmNoYXNzaXNCb2R5KTsKICAgICAgY29uc3QgdGhhdCA9IHRoaXM7CgogICAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9ICgpID0+IHsKICAgICAgICB0aGF0LnVwZGF0ZVZlaGljbGUod29ybGQuZHQpOwogICAgICB9OwoKICAgICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHRoaXMucHJlU3RlcENhbGxiYWNrKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgb25lIG9mIHRoZSB3aGVlbCBheGxlcywgd29ybGQtb3JpZW50ZWQuCiAgICAgKi8KCgogICAgZ2V0VmVoaWNsZUF4aXNXb3JsZChheGlzSW5kZXgsIHJlc3VsdCkgewogICAgICByZXN1bHQuc2V0KGF4aXNJbmRleCA9PT0gMCA/IDEgOiAwLCBheGlzSW5kZXggPT09IDEgPyAxIDogMCwgYXhpc0luZGV4ID09PSAyID8gMSA6IDApOwogICAgICB0aGlzLmNoYXNzaXNCb2R5LnZlY3RvclRvV29ybGRGcmFtZShyZXN1bHQsIHJlc3VsdCk7CiAgICB9CgogICAgdXBkYXRlVmVoaWNsZSh0aW1lU3RlcCkgewogICAgICBjb25zdCB3aGVlbEluZm9zID0gdGhpcy53aGVlbEluZm9zOwogICAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIHRoaXMudXBkYXRlV2hlZWxUcmFuc2Zvcm0oaSk7CiAgICAgIH0KCiAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciA9IDMuNiAqIGNoYXNzaXNCb2R5LnZlbG9jaXR5Lmxlbmd0aCgpOwogICAgICBjb25zdCBmb3J3YXJkV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmdldFZlaGljbGVBeGlzV29ybGQodGhpcy5pbmRleEZvcndhcmRBeGlzLCBmb3J3YXJkV29ybGQpOwoKICAgICAgaWYgKGZvcndhcmRXb3JsZC5kb3QoY2hhc3Npc0JvZHkudmVsb2NpdHkpIDwgMCkgewogICAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciAqPSAtMTsKICAgICAgfSAvLyBzaW11bGF0ZSBzdXNwZW5zaW9uCgoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIHRoaXMuY2FzdFJheSh3aGVlbEluZm9zW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVTdXNwZW5zaW9uKHRpbWVTdGVwKTsKICAgICAgY29uc3QgaW1wdWxzZSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHJlbHBvcyA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgLy9hcHBseSBzdXNwZW5zaW9uIGZvcmNlCiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGxldCBzdXNwZW5zaW9uRm9yY2UgPSB3aGVlbC5zdXNwZW5zaW9uRm9yY2U7CgogICAgICAgIGlmIChzdXNwZW5zaW9uRm9yY2UgPiB3aGVlbC5tYXhTdXNwZW5zaW9uRm9yY2UpIHsKICAgICAgICAgIHN1c3BlbnNpb25Gb3JjZSA9IHdoZWVsLm1heFN1c3BlbnNpb25Gb3JjZTsKICAgICAgICB9CgogICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuc2NhbGUoc3VzcGVuc2lvbkZvcmNlICogdGltZVN0ZXAsIGltcHVsc2UpOwogICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNoYXNzaXNCb2R5LmFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxwb3MpOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZUZyaWN0aW9uKHRpbWVTdGVwKTsKICAgICAgY29uc3QgaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaiA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGZ3ZCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHZlbCA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOyAvL2NvbnN0IHJlbHBvcyA9IG5ldyBWZWMzKCk7CiAgICAgICAgLy93aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQudnN1YihjaGFzc2lzQm9keS5wb3NpdGlvbiwgcmVscG9zKTsKCiAgICAgICAgY2hhc3Npc0JvZHkuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLCB2ZWwpOyAvLyBIYWNrIHRvIGdldCB0aGUgcm90YXRpb24gaW4gdGhlIGNvcnJlY3QgZGlyZWN0aW9uCgogICAgICAgIGxldCBtID0gMTsKCiAgICAgICAgc3dpdGNoICh0aGlzLmluZGV4VXBBeGlzKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIG0gPSAtMTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBpZiAod2hlZWwuaXNJbkNvbnRhY3QpIHsKICAgICAgICAgIHRoaXMuZ2V0VmVoaWNsZUF4aXNXb3JsZCh0aGlzLmluZGV4Rm9yd2FyZEF4aXMsIGZ3ZCk7CiAgICAgICAgICBjb25zdCBwcm9qID0gZndkLmRvdCh3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkKTsKICAgICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuc2NhbGUocHJvaiwgaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaik7CiAgICAgICAgICBmd2QudnN1YihoaXROb3JtYWxXb3JsZFNjYWxlZFdpdGhQcm9qLCBmd2QpOwogICAgICAgICAgY29uc3QgcHJvajIgPSBmd2QuZG90KHZlbCk7CiAgICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gbSAqIHByb2oyICogdGltZVN0ZXAgLyB3aGVlbC5yYWRpdXM7CiAgICAgICAgfQoKICAgICAgICBpZiAoKHdoZWVsLnNsaWRpbmcgfHwgIXdoZWVsLmlzSW5Db250YWN0KSAmJiB3aGVlbC5lbmdpbmVGb3JjZSAhPT0gMCAmJiB3aGVlbC51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkKSB7CiAgICAgICAgICAvLyBBcHBseSBjdXN0b20gcm90YXRpb24gd2hlbiBhY2NlbGVyYXRpbmcgYW5kIHNsaWRpbmcKICAgICAgICAgIHdoZWVsLmRlbHRhUm90YXRpb24gPSAod2hlZWwuZW5naW5lRm9yY2UgPiAwID8gMSA6IC0xKSAqIHdoZWVsLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgKiB0aW1lU3RlcDsKICAgICAgICB9IC8vIExvY2sgd2hlZWxzCgoKICAgICAgICBpZiAoTWF0aC5hYnMod2hlZWwuYnJha2UpID4gTWF0aC5hYnMod2hlZWwuZW5naW5lRm9yY2UpKSB7CiAgICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gMDsKICAgICAgICB9CgogICAgICAgIHdoZWVsLnJvdGF0aW9uICs9IHdoZWVsLmRlbHRhUm90YXRpb247IC8vIFVzZSB0aGUgb2xkIHZhbHVlCgogICAgICAgIHdoZWVsLmRlbHRhUm90YXRpb24gKj0gMC45OTsgLy8gZGFtcGluZyBvZiByb3RhdGlvbiB3aGVuIG5vdCBpbiBjb250YWN0CiAgICAgIH0KICAgIH0KCiAgICB1cGRhdGVTdXNwZW5zaW9uKGRlbHRhVGltZSkgewogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGNvbnN0IGNoYXNzaXNNYXNzID0gY2hhc3Npc0JvZHkubWFzczsKICAgICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvczsKICAgICAgY29uc3QgbnVtV2hlZWxzID0gd2hlZWxJbmZvcy5sZW5ndGg7CgogICAgICBmb3IgKGxldCB3X2l0ID0gMDsgd19pdCA8IG51bVdoZWVsczsgd19pdCsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW3dfaXRdOwoKICAgICAgICBpZiAod2hlZWwuaXNJbkNvbnRhY3QpIHsKICAgICAgICAgIGxldCBmb3JjZTsgLy8gU3ByaW5nCgogICAgICAgICAgY29uc3Qgc3VzcF9sZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aDsKICAgICAgICAgIGNvbnN0IGN1cnJlbnRfbGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvbkxlbmd0aDsKICAgICAgICAgIGNvbnN0IGxlbmd0aF9kaWZmID0gc3VzcF9sZW5ndGggLSBjdXJyZW50X2xlbmd0aDsKICAgICAgICAgIGZvcmNlID0gd2hlZWwuc3VzcGVuc2lvblN0aWZmbmVzcyAqIGxlbmd0aF9kaWZmICogd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uOyAvLyBEYW1wZXIKCiAgICAgICAgICBjb25zdCBwcm9qZWN0ZWRfcmVsX3ZlbCA9IHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5OwogICAgICAgICAgbGV0IHN1c3BfZGFtcGluZzsKCiAgICAgICAgICBpZiAocHJvamVjdGVkX3JlbF92ZWwgPCAwKSB7CiAgICAgICAgICAgIHN1c3BfZGFtcGluZyA9IHdoZWVsLmRhbXBpbmdDb21wcmVzc2lvbjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN1c3BfZGFtcGluZyA9IHdoZWVsLmRhbXBpbmdSZWxheGF0aW9uOwogICAgICAgICAgfQoKICAgICAgICAgIGZvcmNlIC09IHN1c3BfZGFtcGluZyAqIHByb2plY3RlZF9yZWxfdmVsOwogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gZm9yY2UgKiBjaGFzc2lzTWFzczsKCiAgICAgICAgICBpZiAod2hlZWwuc3VzcGVuc2lvbkZvcmNlIDwgMCkgewogICAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgPSAwOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgPSAwOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgdGhlIHZlaGljbGUgaW5jbHVkaW5nIGl0cyBjb25zdHJhaW50cyBmcm9tIHRoZSB3b3JsZC4KICAgICAqLwoKCiAgICByZW1vdmVGcm9tV29ybGQod29ybGQpIHsKICAgICAgdGhpcy5jb25zdHJhaW50czsKICAgICAgd29ybGQucmVtb3ZlQm9keSh0aGlzLmNoYXNzaXNCb2R5KTsKICAgICAgd29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHRoaXMucHJlU3RlcENhbGxiYWNrKTsKICAgICAgdGhpcy53b3JsZCA9IG51bGw7CiAgICB9CgogICAgY2FzdFJheSh3aGVlbCkgewogICAgICBjb25zdCByYXl2ZWN0b3IgPSBjYXN0UmF5X3JheXZlY3RvcjsKICAgICAgY29uc3QgdGFyZ2V0ID0gY2FzdFJheV90YXJnZXQ7CiAgICAgIHRoaXMudXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbCk7CiAgICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTsKICAgICAgbGV0IGRlcHRoID0gLTE7CiAgICAgIGNvbnN0IHJheWxlbiA9IHdoZWVsLnN1c3BlbnNpb25SZXN0TGVuZ3RoICsgd2hlZWwucmFkaXVzOwogICAgICB3aGVlbC5kaXJlY3Rpb25Xb3JsZC5zY2FsZShyYXlsZW4sIHJheXZlY3Rvcik7CiAgICAgIGNvbnN0IHNvdXJjZSA9IHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZDsKICAgICAgc291cmNlLnZhZGQocmF5dmVjdG9yLCB0YXJnZXQpOwogICAgICBjb25zdCByYXljYXN0UmVzdWx0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdDsKICAgICAgcmF5Y2FzdFJlc3VsdC5yZXNldCgpOyAvLyBUdXJuIG9mZiByYXkgY29sbGlzaW9uIHdpdGggdGhlIGNoYXNzaXMgdGVtcG9yYXJpbHkKCiAgICAgIGNvbnN0IG9sZFN0YXRlID0gY2hhc3Npc0JvZHkuY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlID0gZmFsc2U7IC8vIENhc3QgcmF5IGFnYWluc3Qgd29ybGQKCiAgICAgIHRoaXMud29ybGQucmF5VGVzdChzb3VyY2UsIHRhcmdldCwgcmF5Y2FzdFJlc3VsdCk7CiAgICAgIGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlID0gb2xkU3RhdGU7CiAgICAgIGNvbnN0IG9iamVjdCA9IHJheWNhc3RSZXN1bHQuYm9keTsKICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5ncm91bmRPYmplY3QgPSAwOwoKICAgICAgaWYgKG9iamVjdCkgewogICAgICAgIGRlcHRoID0gcmF5Y2FzdFJlc3VsdC5kaXN0YW5jZTsKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkID0gcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZDsKICAgICAgICB3aGVlbC5pc0luQ29udGFjdCA9IHRydWU7CiAgICAgICAgY29uc3QgaGl0RGlzdGFuY2UgPSByYXljYXN0UmVzdWx0LmRpc3RhbmNlOwogICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSBoaXREaXN0YW5jZSAtIHdoZWVsLnJhZGl1czsgLy8gY2xhbXAgb24gbWF4IHN1c3BlbnNpb24gdHJhdmVsCgogICAgICAgIGNvbnN0IG1pblN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCAtIHdoZWVsLm1heFN1c3BlbnNpb25UcmF2ZWw7CiAgICAgICAgY29uc3QgbWF4U3VzcGVuc2lvbkxlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25SZXN0TGVuZ3RoICsgd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDsKCiAgICAgICAgaWYgKHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPCBtaW5TdXNwZW5zaW9uTGVuZ3RoKSB7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gbWluU3VzcGVuc2lvbkxlbmd0aDsKICAgICAgICB9CgogICAgICAgIGlmICh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID4gbWF4U3VzcGVuc2lvbkxlbmd0aCkgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA9IG1heFN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LnJlc2V0KCk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBkZW5vbWluYXRvciA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KHdoZWVsLmRpcmVjdGlvbldvcmxkKTsKICAgICAgICBjb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgICAgICAgY2hhc3Npc0JvZHkuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7CiAgICAgICAgY29uc3QgcHJvalZlbCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTsKCiAgICAgICAgaWYgKGRlbm9taW5hdG9yID49IC0wLjEpIHsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMDsKICAgICAgICAgIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IDEgLyAwLjE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGludiA9IC0xIC8gZGVub21pbmF0b3I7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IHByb2pWZWwgKiBpbnY7CiAgICAgICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSBpbnY7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vcHV0IHdoZWVsIGluZm8gYXMgaW4gcmVzdCBwb3NpdGlvbgogICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIDAgKiB3aGVlbC5tYXhTdXNwZW5zaW9uVHJhdmVsOwogICAgICAgIHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wOwogICAgICAgIHdoZWVsLmRpcmVjdGlvbldvcmxkLnNjYWxlKC0xLCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkKTsKICAgICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjA7CiAgICAgIH0KCiAgICAgIHJldHVybiBkZXB0aDsKICAgIH0KCiAgICB1cGRhdGVXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsKSB7CiAgICAgIHdoZWVsLmlzSW5Db250YWN0ID0gZmFsc2U7CiAgICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTsKICAgICAgY2hhc3Npc0JvZHkucG9pbnRUb1dvcmxkRnJhbWUod2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsLCB3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQpOwogICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUod2hlZWwuZGlyZWN0aW9uTG9jYWwsIHdoZWVsLmRpcmVjdGlvbldvcmxkKTsKICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmF4bGVMb2NhbCwgd2hlZWwuYXhsZVdvcmxkKTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIG9uZSBvZiB0aGUgd2hlZWwgdHJhbnNmb3JtLgogICAgICogTm90ZSB3aGVuIHJlbmRlcmluZyB3aGVlbHM6IGR1cmluZyBlYWNoIHN0ZXAsIHdoZWVsIHRyYW5zZm9ybXMgYXJlIHVwZGF0ZWQgQkVGT1JFIHRoZSBjaGFzc2lzOyBpZS4gdGhlaXIgcG9zaXRpb24gYmVjb21lcyBpbnZhbGlkIGFmdGVyIHRoZSBzdGVwLiBUaHVzIHdoZW4geW91IHJlbmRlciB3aGVlbHMsIHlvdSBtdXN0IHVwZGF0ZSB3aGVlbCB0cmFuc2Zvcm1zIGJlZm9yZSByZW5kZXJpbmcgdGhlbS4gU2VlIHJheWNhc3RWZWhpY2xlIGRlbW8gZm9yIGFuIGV4YW1wbGUuCiAgICAgKiBAcGFyYW0gd2hlZWxJbmRleCBUaGUgd2hlZWwgaW5kZXggdG8gdXBkYXRlLgogICAgICovCgoKICAgIHVwZGF0ZVdoZWVsVHJhbnNmb3JtKHdoZWVsSW5kZXgpIHsKICAgICAgY29uc3QgdXAgPSB0bXBWZWM0OwogICAgICBjb25zdCByaWdodCA9IHRtcFZlYzU7CiAgICAgIGNvbnN0IGZ3ZCA9IHRtcFZlYzY7CiAgICAgIGNvbnN0IHdoZWVsID0gdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdOwogICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpOwogICAgICB3aGVlbC5kaXJlY3Rpb25Mb2NhbC5zY2FsZSgtMSwgdXApOwogICAgICByaWdodC5jb3B5KHdoZWVsLmF4bGVMb2NhbCk7CiAgICAgIHVwLmNyb3NzKHJpZ2h0LCBmd2QpOwogICAgICBmd2Qubm9ybWFsaXplKCk7CiAgICAgIHJpZ2h0Lm5vcm1hbGl6ZSgpOyAvLyBSb3RhdGUgYXJvdW5kIHN0ZWVyaW5nIG92ZXIgdGhlIHdoZWVsQXhsZQoKICAgICAgY29uc3Qgc3RlZXJpbmcgPSB3aGVlbC5zdGVlcmluZzsKICAgICAgY29uc3Qgc3RlZXJpbmdPcm4gPSBuZXcgUXVhdGVybmlvbigpOwogICAgICBzdGVlcmluZ09ybi5zZXRGcm9tQXhpc0FuZ2xlKHVwLCBzdGVlcmluZyk7CiAgICAgIGNvbnN0IHJvdGF0aW5nT3JuID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgcm90YXRpbmdPcm4uc2V0RnJvbUF4aXNBbmdsZShyaWdodCwgd2hlZWwucm90YXRpb24pOyAvLyBXb3JsZCByb3RhdGlvbiBvZiB0aGUgd2hlZWwKCiAgICAgIGNvbnN0IHEgPSB3aGVlbC53b3JsZFRyYW5zZm9ybS5xdWF0ZXJuaW9uOwogICAgICB0aGlzLmNoYXNzaXNCb2R5LnF1YXRlcm5pb24ubXVsdChzdGVlcmluZ09ybiwgcSk7CiAgICAgIHEubXVsdChyb3RhdGluZ09ybiwgcSk7CiAgICAgIHEubm9ybWFsaXplKCk7IC8vIHdvcmxkIHBvc2l0aW9uIG9mIHRoZSB3aGVlbAoKICAgICAgY29uc3QgcCA9IHdoZWVsLndvcmxkVHJhbnNmb3JtLnBvc2l0aW9uOwogICAgICBwLmNvcHkod2hlZWwuZGlyZWN0aW9uV29ybGQpOwogICAgICBwLnNjYWxlKHdoZWVsLnN1c3BlbnNpb25MZW5ndGgsIHApOwogICAgICBwLnZhZGQod2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLCBwKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSB3b3JsZCB0cmFuc2Zvcm0gb2Ygb25lIG9mIHRoZSB3aGVlbHMKICAgICAqLwoKCiAgICBnZXRXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsSW5kZXgpIHsKICAgICAgcmV0dXJuIHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XS53b3JsZFRyYW5zZm9ybTsKICAgIH0KCiAgICB1cGRhdGVGcmljdGlvbih0aW1lU3RlcCkgewogICAgICBjb25zdCBzdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2ogPSB1cGRhdGVGcmljdGlvbl9zdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2o7IC8vY2FsY3VsYXRlIHRoZSBpbXB1bHNlLCBzbyB0aGF0IHRoZSB3aGVlbHMgZG9uJ3QgbW92ZSBzaWRld2FyZHMKCiAgICAgIGNvbnN0IHdoZWVsSW5mb3MgPSB0aGlzLndoZWVsSW5mb3M7CiAgICAgIGNvbnN0IG51bVdoZWVscyA9IHdoZWVsSW5mb3MubGVuZ3RoOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGNvbnN0IGZvcndhcmRXUyA9IHVwZGF0ZUZyaWN0aW9uX2ZvcndhcmRXUzsKICAgICAgY29uc3QgYXhsZSA9IHVwZGF0ZUZyaWN0aW9uX2F4bGU7CiAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7CgogICAgICAgIGlmIChncm91bmRPYmplY3QpIHsKICAgICAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQrKzsKICAgICAgICB9CgogICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlID0gMDsKICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSA9IDA7CgogICAgICAgIGlmICghZm9yd2FyZFdTW2ldKSB7CiAgICAgICAgICBmb3J3YXJkV1NbaV0gPSBuZXcgVmVjMygpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFheGxlW2ldKSB7CiAgICAgICAgICBheGxlW2ldID0gbmV3IFZlYzMoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICBjb25zdCBheGxlaSA9IGF4bGVbaV07CiAgICAgICAgICBjb25zdCB3aGVlbFRyYW5zID0gdGhpcy5nZXRXaGVlbFRyYW5zZm9ybVdvcmxkKGkpOyAvLyBHZXQgd29ybGQgYXhsZQoKICAgICAgICAgIHdoZWVsVHJhbnMudmVjdG9yVG9Xb3JsZEZyYW1lKGRpcmVjdGlvbnNbdGhpcy5pbmRleFJpZ2h0QXhpc10sIGF4bGVpKTsKICAgICAgICAgIGNvbnN0IHN1cmZOb3JtYWxXUyA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQ7CiAgICAgICAgICBjb25zdCBwcm9qID0gYXhsZWkuZG90KHN1cmZOb3JtYWxXUyk7CiAgICAgICAgICBzdXJmTm9ybWFsV1Muc2NhbGUocHJvaiwgc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qKTsKICAgICAgICAgIGF4bGVpLnZzdWIoc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qLCBheGxlaSk7CiAgICAgICAgICBheGxlaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHN1cmZOb3JtYWxXUy5jcm9zcyhheGxlaSwgZm9yd2FyZFdTW2ldKTsKICAgICAgICAgIGZvcndhcmRXU1tpXS5ub3JtYWxpemUoKTsKICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbChjaGFzc2lzQm9keSwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBncm91bmRPYmplY3QsIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgYXhsZWkpOwogICAgICAgICAgd2hlZWwuc2lkZUltcHVsc2UgKj0gc2lkZUZyaWN0aW9uU3RpZmZuZXNzMjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHNpZGVGYWN0b3IgPSAxOwogICAgICBjb25zdCBmd2RGYWN0b3IgPSAwLjU7CiAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgICAgbGV0IHJvbGxpbmdGcmljdGlvbiA9IDA7CiAgICAgICAgd2hlZWwuc2xpcEluZm8gPSAxOwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICBjb25zdCBkZWZhdWx0Um9sbGluZ0ZyaWN0aW9uSW1wdWxzZSA9IDA7CiAgICAgICAgICBjb25zdCBtYXhJbXB1bHNlID0gd2hlZWwuYnJha2UgPyB3aGVlbC5icmFrZSA6IGRlZmF1bHRSb2xsaW5nRnJpY3Rpb25JbXB1bHNlOyAvLyBidFdoZWVsQ29udGFjdFBvaW50IGNvbnRhY3RQdChjaGFzc2lzQm9keSxncm91bmRPYmplY3Qsd2hlZWxJbmZyYXljYXN0SW5mby5oaXRQb2ludFdvcmxkLGZvcndhcmRXU1t3aGVlbF0sbWF4SW1wdWxzZSk7CiAgICAgICAgICAvLyByb2xsaW5nRnJpY3Rpb24gPSBjYWxjUm9sbGluZ0ZyaWN0aW9uKGNvbnRhY3RQdCk7CgogICAgICAgICAgcm9sbGluZ0ZyaWN0aW9uID0gY2FsY1JvbGxpbmdGcmljdGlvbihjaGFzc2lzQm9keSwgZ3JvdW5kT2JqZWN0LCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQsIGZvcndhcmRXU1tpXSwgbWF4SW1wdWxzZSk7CiAgICAgICAgICByb2xsaW5nRnJpY3Rpb24gKz0gd2hlZWwuZW5naW5lRm9yY2UgKiB0aW1lU3RlcDsgLy8gcm9sbGluZ0ZyaWN0aW9uID0gMDsKCiAgICAgICAgICBjb25zdCBmYWN0b3IgPSBtYXhJbXB1bHNlIC8gcm9sbGluZ0ZyaWN0aW9uOwogICAgICAgICAgd2hlZWwuc2xpcEluZm8gKj0gZmFjdG9yOwogICAgICAgIH0gLy9zd2l0Y2ggYmV0d2VlbiBhY3RpdmUgcm9sbGluZyAodGhyb3R0bGUpLCBicmFraW5nIGFuZCBub24tYWN0aXZlIHJvbGxpbmcgZnJpY3Rpb24gKG50aHJvdHRsZS9icmVhaykKCgogICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlID0gMDsKICAgICAgICB3aGVlbC5za2lkSW5mbyA9IDE7CgogICAgICAgIGlmIChncm91bmRPYmplY3QpIHsKICAgICAgICAgIHdoZWVsLnNraWRJbmZvID0gMTsKICAgICAgICAgIGNvbnN0IG1heGltcCA9IHdoZWVsLnN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwICogd2hlZWwuZnJpY3Rpb25TbGlwOwogICAgICAgICAgY29uc3QgbWF4aW1wU2lkZSA9IG1heGltcDsKICAgICAgICAgIGNvbnN0IG1heGltcFNxdWFyZWQgPSBtYXhpbXAgKiBtYXhpbXBTaWRlOwogICAgICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSByb2xsaW5nRnJpY3Rpb247IC8vd2hlZWxJbmZvLmVuZ2luZUZvcmNlKiB0aW1lU3RlcDsKCiAgICAgICAgICBjb25zdCB4ID0gd2hlZWwuZm9yd2FyZEltcHVsc2UgKiBmd2RGYWN0b3IgLyB3aGVlbC5mb3J3YXJkQWNjZWxlcmF0aW9uOwogICAgICAgICAgY29uc3QgeSA9IHdoZWVsLnNpZGVJbXB1bHNlICogc2lkZUZhY3RvciAvIHdoZWVsLnNpZGVBY2NlbGVyYXRpb247CiAgICAgICAgICBjb25zdCBpbXB1bHNlU3F1YXJlZCA9IHggKiB4ICsgeSAqIHk7CiAgICAgICAgICB3aGVlbC5zbGlkaW5nID0gZmFsc2U7CgogICAgICAgICAgaWYgKGltcHVsc2VTcXVhcmVkID4gbWF4aW1wU3F1YXJlZCkgewogICAgICAgICAgICB0aGlzLnNsaWRpbmcgPSB0cnVlOwogICAgICAgICAgICB3aGVlbC5zbGlkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4aW1wIC8gTWF0aC5zcXJ0KGltcHVsc2VTcXVhcmVkKTsKICAgICAgICAgICAgd2hlZWwuc2tpZEluZm8gKj0gZmFjdG9yOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2xpZGluZykgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKCiAgICAgICAgICBpZiAod2hlZWwuc2lkZUltcHVsc2UgIT09IDApIHsKICAgICAgICAgICAgaWYgKHdoZWVsLnNraWRJbmZvIDwgMSkgewogICAgICAgICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlICo9IHdoZWVsLnNraWRJbmZvOwogICAgICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHdoZWVsLnNraWRJbmZvOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIGFwcGx5IHRoZSBpbXB1bHNlcwoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgcmVsX3BvcyA9IG5ldyBWZWMzKCk7CiAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLnZzdWIoY2hhc3Npc0JvZHkucG9zaXRpb24sIHJlbF9wb3MpOyAvLyBjYW5ub25zIGFwcGx5aW1wdWxzZSBpcyB1c2luZyB3b3JsZCBjb29yZCBmb3IgdGhlIHBvc2l0aW9uCiAgICAgICAgLy9yZWxfcG9zLmNvcHkod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkKTsKCiAgICAgICAgaWYgKHdoZWVsLmZvcndhcmRJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICBjb25zdCBpbXB1bHNlID0gbmV3IFZlYzMoKTsKICAgICAgICAgIGZvcndhcmRXU1tpXS5zY2FsZSh3aGVlbC5mb3J3YXJkSW1wdWxzZSwgaW1wdWxzZSk7CiAgICAgICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2UoaW1wdWxzZSwgcmVsX3Bvcyk7CiAgICAgICAgfQoKICAgICAgICBpZiAod2hlZWwuc2lkZUltcHVsc2UgIT09IDApIHsKICAgICAgICAgIGNvbnN0IGdyb3VuZE9iamVjdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuYm9keTsKICAgICAgICAgIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTsKICAgICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGdyb3VuZE9iamVjdC5wb3NpdGlvbiwgcmVsX3BvczIpOyAvL3JlbF9wb3MyLmNvcHkod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkKTsKCiAgICAgICAgICBjb25zdCBzaWRlSW1wID0gbmV3IFZlYzMoKTsKICAgICAgICAgIGF4bGVbaV0uc2NhbGUod2hlZWwuc2lkZUltcHVsc2UsIHNpZGVJbXApOyAvLyBTY2FsZSB0aGUgcmVsYXRpdmUgcG9zaXRpb24gaW4gdGhlIHVwIGRpcmVjdGlvbiB3aXRoIHJvbGxJbmZsdWVuY2UuCiAgICAgICAgICAvLyBJZiByb2xsSW5mbHVlbmNlIGlzIDEsIHRoZSBpbXB1bHNlIHdpbGwgYmUgYXBwbGllZCBvbiB0aGUgaGl0UG9pbnQgKGVhc3kgdG8gcm9sbCBvdmVyKSwgaWYgaXQgaXMgemVybyBpdCB3aWxsIGJlIGFwcGxpZWQgaW4gdGhlIHNhbWUgcGxhbmUgYXMgdGhlIGNlbnRlciBvZiBtYXNzIChub3QgZWFzeSB0byByb2xsIG92ZXIpLgoKICAgICAgICAgIGNoYXNzaXNCb2R5LnZlY3RvclRvTG9jYWxGcmFtZShyZWxfcG9zLCByZWxfcG9zKTsKICAgICAgICAgIHJlbF9wb3NbJ3h5eidbdGhpcy5pbmRleFVwQXhpc11dICo9IHdoZWVsLnJvbGxJbmZsdWVuY2U7CiAgICAgICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVsX3BvcywgcmVsX3Bvcyk7CiAgICAgICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2Uoc2lkZUltcCwgcmVsX3Bvcyk7IC8vYXBwbHkgZnJpY3Rpb24gaW1wdWxzZSBvbiB0aGUgZ3JvdW5kCgogICAgICAgICAgc2lkZUltcC5zY2FsZSgtMSwgc2lkZUltcCk7CiAgICAgICAgICBncm91bmRPYmplY3QuYXBwbHlJbXB1bHNlKHNpZGVJbXAsIHJlbF9wb3MyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgfQogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzYgPSBuZXcgVmVjMygpOwogIG5ldyBSYXkoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IGNhc3RSYXlfcmF5dmVjdG9yID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYXN0UmF5X3RhcmdldCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZGlyZWN0aW9ucyA9IFtuZXcgVmVjMygxLCAwLCAwKSwgbmV3IFZlYzMoMCwgMSwgMCksIG5ldyBWZWMzKDAsIDAsIDEpXTsKICBjb25zdCB1cGRhdGVGcmljdGlvbl9zdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2ogPSBuZXcgVmVjMygpOwogIGNvbnN0IHVwZGF0ZUZyaWN0aW9uX2F4bGUgPSBbXTsKICBjb25zdCB1cGRhdGVGcmljdGlvbl9mb3J3YXJkV1MgPSBbXTsKICBjb25zdCBzaWRlRnJpY3Rpb25TdGlmZm5lc3MyID0gMTsKICBjb25zdCBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwgPSBuZXcgVmVjMygpOwoKICBmdW5jdGlvbiBjYWxjUm9sbGluZ0ZyaWN0aW9uKGJvZHkwLCBib2R5MSwgZnJpY3Rpb25Qb3NXb3JsZCwgZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZCwgbWF4SW1wdWxzZSkgewogICAgbGV0IGoxID0gMDsKICAgIGNvbnN0IGNvbnRhY3RQb3NXb3JsZCA9IGZyaWN0aW9uUG9zV29ybGQ7IC8vIGNvbnN0IHJlbF9wb3MxID0gbmV3IFZlYzMoKTsKICAgIC8vIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTsKCiAgICBjb25zdCB2ZWwxID0gY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwxOwogICAgY29uc3QgdmVsMiA9IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMjsKICAgIGNvbnN0IHZlbCA9IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsOyAvLyBjb250YWN0UG9zV29ybGQudnN1Yihib2R5MC5wb3NpdGlvbiwgcmVsX3BvczEpOwogICAgLy8gY29udGFjdFBvc1dvcmxkLnZzdWIoYm9keTEucG9zaXRpb24sIHJlbF9wb3MyKTsKCiAgICBib2R5MC5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChjb250YWN0UG9zV29ybGQsIHZlbDEpOwogICAgYm9keTEuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQoY29udGFjdFBvc1dvcmxkLCB2ZWwyKTsKICAgIHZlbDEudnN1Yih2ZWwyLCB2ZWwpOwogICAgY29uc3QgdnJlbCA9IGZyaWN0aW9uRGlyZWN0aW9uV29ybGQuZG90KHZlbCk7CiAgICBjb25zdCBkZW5vbTAgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yKGJvZHkwLCBmcmljdGlvblBvc1dvcmxkLCBmcmljdGlvbkRpcmVjdGlvbldvcmxkKTsKICAgIGNvbnN0IGRlbm9tMSA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IoYm9keTEsIGZyaWN0aW9uUG9zV29ybGQsIGZyaWN0aW9uRGlyZWN0aW9uV29ybGQpOwogICAgY29uc3QgcmVsYXhhdGlvbiA9IDE7CiAgICBjb25zdCBqYWNEaWFnQUJJbnYgPSByZWxheGF0aW9uIC8gKGRlbm9tMCArIGRlbm9tMSk7IC8vIGNhbGN1bGF0ZSBqIHRoYXQgbW92ZXMgdXMgdG8gemVybyByZWxhdGl2ZSB2ZWxvY2l0eQoKICAgIGoxID0gLXZyZWwgKiBqYWNEaWFnQUJJbnY7CgogICAgaWYgKG1heEltcHVsc2UgPCBqMSkgewogICAgICBqMSA9IG1heEltcHVsc2U7CiAgICB9CgogICAgaWYgKGoxIDwgLW1heEltcHVsc2UpIHsKICAgICAgajEgPSAtbWF4SW1wdWxzZTsKICAgIH0KCiAgICByZXR1cm4gajE7CiAgfQoKICBjb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3IwID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX2MwID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3ZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9tID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcihib2R5LCBwb3MsIG5vcm1hbCkgewogICAgY29uc3QgcjAgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3IwOwogICAgY29uc3QgYzAgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX2MwOwogICAgY29uc3QgdmVjID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl92ZWM7CiAgICBjb25zdCBtID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9tOwogICAgcG9zLnZzdWIoYm9keS5wb3NpdGlvbiwgcjApOwogICAgcjAuY3Jvc3Mobm9ybWFsLCBjMCk7CiAgICBib2R5LmludkluZXJ0aWFXb3JsZC52bXVsdChjMCwgbSk7CiAgICBtLmNyb3NzKHIwLCB2ZWMpOwogICAgcmV0dXJuIGJvZHkuaW52TWFzcyArIG5vcm1hbC5kb3QodmVjKTsKICB9CgogIGNvbnN0IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwyID0gbmV3IFZlYzMoKTsKICBjb25zdCByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbCA9IG5ldyBWZWMzKCk7IC8vIGJpbGF0ZXJhbCBjb25zdHJhaW50IGJldHdlZW4gdHdvIGR5bmFtaWMgb2JqZWN0cwoKICBmdW5jdGlvbiByZXNvbHZlU2luZ2xlQmlsYXRlcmFsKGJvZHkxLCBwb3MxLCBib2R5MiwgcG9zMiwgbm9ybWFsKSB7CiAgICBjb25zdCBub3JtYWxMZW5TcXIgPSBub3JtYWwubGVuZ3RoU3F1YXJlZCgpOwoKICAgIGlmIChub3JtYWxMZW5TcXIgPiAxLjEpIHsKICAgICAgcmV0dXJuIDA7IC8vIG5vIGltcHVsc2UKICAgIH0gLy8gY29uc3QgcmVsX3BvczEgPSBuZXcgVmVjMygpOwogICAgLy8gY29uc3QgcmVsX3BvczIgPSBuZXcgVmVjMygpOwogICAgLy8gcG9zMS52c3ViKGJvZHkxLnBvc2l0aW9uLCByZWxfcG9zMSk7CiAgICAvLyBwb3MyLnZzdWIoYm9keTIucG9zaXRpb24sIHJlbF9wb3MyKTsKCgogICAgY29uc3QgdmVsMSA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMTsKICAgIGNvbnN0IHZlbDIgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDI7CiAgICBjb25zdCB2ZWwgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDsKICAgIGJvZHkxLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHBvczEsIHZlbDEpOwogICAgYm9keTIuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQocG9zMiwgdmVsMik7CiAgICB2ZWwxLnZzdWIodmVsMiwgdmVsKTsKICAgIGNvbnN0IHJlbF92ZWwgPSBub3JtYWwuZG90KHZlbCk7CiAgICBjb25zdCBjb250YWN0RGFtcGluZyA9IDAuMjsKICAgIGNvbnN0IG1hc3NUZXJtID0gMSAvIChib2R5MS5pbnZNYXNzICsgYm9keTIuaW52TWFzcyk7CiAgICBjb25zdCBpbXB1bHNlID0gLWNvbnRhY3REYW1waW5nICogcmVsX3ZlbCAqIG1hc3NUZXJtOwogICAgcmV0dXJuIGltcHVsc2U7CiAgfQoKICAvKioKICAgKiBTcGhlcmljYWwgc2hhcGUKICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCByYWRpdXMgPSAxCiAgICogICAgIGNvbnN0IHNwaGVyZVNoYXBlID0gbmV3IENBTk5PTi5TcGhlcmUocmFkaXVzKQogICAqICAgICBjb25zdCBzcGhlcmVCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMSwgc2hhcGU6IHNwaGVyZVNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoc3BoZXJlQm9keSkKICAgKi8KICBjbGFzcyBTcGhlcmUgZXh0ZW5kcyBTaGFwZSB7CiAgICAvKioKICAgICAqIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZS4KICAgICAqLwoKICAgIC8qKgogICAgICoKICAgICAqIEBwYXJhbSByYWRpdXMgVGhlIHJhZGl1cyBvZiB0aGUgc3BoZXJlLCBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHJhZGl1cykgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuU1BIRVJFCiAgICAgIH0pOwogICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cyAhPT0gdW5kZWZpbmVkID8gcmFkaXVzIDogMS4wOwoKICAgICAgaWYgKHRoaXMucmFkaXVzIDwgMCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHNwaGVyZSByYWRpdXMgY2Fubm90IGJlIG5lZ2F0aXZlLicpOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICB9CiAgICAvKiogY2FsY3VsYXRlTG9jYWxJbmVydGlhICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgY29uc3QgSSA9IDIuMCAqIG1hc3MgKiB0aGlzLnJhZGl1cyAqIHRoaXMucmFkaXVzIC8gNS4wOwogICAgICB0YXJnZXQueCA9IEk7CiAgICAgIHRhcmdldC55ID0gSTsKICAgICAgdGFyZ2V0LnogPSBJOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqIHZvbHVtZSAqLwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiA0LjAgKiBNYXRoLlBJICogTWF0aC5wb3codGhpcy5yYWRpdXMsIDMpIC8gMy4wOwogICAgfQoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gdGhpcy5yYWRpdXM7CiAgICB9CgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgciA9IHRoaXMucmFkaXVzOwogICAgICBjb25zdCBheGVzID0gWyd4JywgJ3knLCAneiddOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBheGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYXggPSBheGVzW2ldOwogICAgICAgIG1pbltheF0gPSBwb3NbYXhdIC0gcjsKICAgICAgICBtYXhbYXhdID0gcG9zW2F4XSArIHI7CiAgICAgIH0KICAgIH0KCiAgfQogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOyAvLyBUZW1wIHZlY3RvcnMgZm9yIGNhbGN1bGF0aW9uCgogIG5ldyBWZWMzKCk7IC8vIFJlbGF0aXZlIHZlbG9jaXR5CgogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQ3lsaW5kZXIgY2xhc3MuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcmFkaXVzVG9wID0gMC41CiAgICogICAgIGNvbnN0IHJhZGl1c0JvdHRvbSA9IDAuNQogICAqICAgICBjb25zdCBoZWlnaHQgPSAyCiAgICogICAgIGNvbnN0IG51bVNlZ21lbnRzID0gMTIKICAgKiAgICAgY29uc3QgY3lsaW5kZXJTaGFwZSA9IG5ldyBDQU5OT04uQ3lsaW5kZXIocmFkaXVzVG9wLCByYWRpdXNCb3R0b20sIGhlaWdodCwgbnVtU2VnbWVudHMpCiAgICogICAgIGNvbnN0IGN5bGluZGVyQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBjeWxpbmRlclNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoY3lsaW5kZXJCb2R5KQogICAqLwoKICBjbGFzcyBDeWxpbmRlciBleHRlbmRzIENvbnZleFBvbHloZWRyb24gewogICAgLyoqIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuICovCgogICAgLyoqIFRoZSByYWRpdXMgb2YgdGhlIGJvdHRvbSBvZiB0aGUgQ3lsaW5kZXIuICovCgogICAgLyoqIFRoZSBoZWlnaHQgb2YgdGhlIEN5bGluZGVyLiAqLwoKICAgIC8qKiBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIHRvIGJ1aWxkIHRoZSBjeWxpbmRlciBvdXQgb2YuICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gcmFkaXVzVG9wIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuCiAgICAgKiBAcGFyYW0gcmFkaXVzQm90dG9tIFRoZSByYWRpdXMgb2YgdGhlIGJvdHRvbSBvZiB0aGUgQ3lsaW5kZXIuCiAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIEN5bGluZGVyLgogICAgICogQHBhcmFtIG51bVNlZ21lbnRzIFRoZSBudW1iZXIgb2Ygc2VnbWVudHMgdG8gYnVpbGQgdGhlIGN5bGluZGVyIG91dCBvZi4KICAgICAqLwogICAgY29uc3RydWN0b3IocmFkaXVzVG9wLCByYWRpdXNCb3R0b20sIGhlaWdodCwgbnVtU2VnbWVudHMpIHsKICAgICAgaWYgKHJhZGl1c1RvcCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmFkaXVzVG9wID0gMTsKICAgICAgfQoKICAgICAgaWYgKHJhZGl1c0JvdHRvbSA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmFkaXVzQm90dG9tID0gMTsKICAgICAgfQoKICAgICAgaWYgKGhlaWdodCA9PT0gdm9pZCAwKSB7CiAgICAgICAgaGVpZ2h0ID0gMTsKICAgICAgfQoKICAgICAgaWYgKG51bVNlZ21lbnRzID09PSB2b2lkIDApIHsKICAgICAgICBudW1TZWdtZW50cyA9IDg7CiAgICAgIH0KCiAgICAgIGlmIChyYWRpdXNUb3AgPCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgY3lsaW5kZXIgcmFkaXVzVG9wIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgaWYgKHJhZGl1c0JvdHRvbSA8IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjeWxpbmRlciByYWRpdXNCb3R0b20gY2Fubm90IGJlIG5lZ2F0aXZlLicpOwogICAgICB9CgogICAgICBjb25zdCBOID0gbnVtU2VnbWVudHM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gW107CiAgICAgIGNvbnN0IGF4ZXMgPSBbXTsKICAgICAgY29uc3QgZmFjZXMgPSBbXTsKICAgICAgY29uc3QgYm90dG9tZmFjZSA9IFtdOwogICAgICBjb25zdCB0b3BmYWNlID0gW107CiAgICAgIGNvbnN0IGNvcyA9IE1hdGguY29zOwogICAgICBjb25zdCBzaW4gPSBNYXRoLnNpbjsgLy8gRmlyc3QgYm90dG9tIHBvaW50CgogICAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBWZWMzKC1yYWRpdXNCb3R0b20gKiBzaW4oMCksIC1oZWlnaHQgKiAwLjUsIHJhZGl1c0JvdHRvbSAqIGNvcygwKSkpOwogICAgICBib3R0b21mYWNlLnB1c2goMCk7IC8vIEZpcnN0IHRvcCBwb2ludAoKICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzVG9wICogc2luKDApLCBoZWlnaHQgKiAwLjUsIHJhZGl1c1RvcCAqIGNvcygwKSkpOwogICAgICB0b3BmYWNlLnB1c2goMSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE47IGkrKykgewogICAgICAgIGNvbnN0IHRoZXRhID0gMiAqIE1hdGguUEkgLyBOICogKGkgKyAxKTsKICAgICAgICBjb25zdCB0aGV0YU4gPSAyICogTWF0aC5QSSAvIE4gKiAoaSArIDAuNSk7CgogICAgICAgIGlmIChpIDwgTiAtIDEpIHsKICAgICAgICAgIC8vIEJvdHRvbQogICAgICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzQm90dG9tICogc2luKHRoZXRhKSwgLWhlaWdodCAqIDAuNSwgcmFkaXVzQm90dG9tICogY29zKHRoZXRhKSkpOwogICAgICAgICAgYm90dG9tZmFjZS5wdXNoKDIgKiBpICsgMik7IC8vIFRvcAoKICAgICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c1RvcCAqIHNpbih0aGV0YSksIGhlaWdodCAqIDAuNSwgcmFkaXVzVG9wICogY29zKHRoZXRhKSkpOwogICAgICAgICAgdG9wZmFjZS5wdXNoKDIgKiBpICsgMyk7IC8vIEZhY2UKCiAgICAgICAgICBmYWNlcy5wdXNoKFsyICogaSwgMiAqIGkgKyAxLCAyICogaSArIDMsIDIgKiBpICsgMl0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmYWNlcy5wdXNoKFsyICogaSwgMiAqIGkgKyAxLCAxLCAwXSk7IC8vIENvbm5lY3QKICAgICAgICB9IC8vIEF4aXM6IHdlIGNhbiBjdXQgb2ZmIGhhbGYgb2YgdGhlbSBpZiB3ZSBoYXZlIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzCgoKICAgICAgICBpZiAoTiAlIDIgPT09IDEgfHwgaSA8IE4gLyAyKSB7CiAgICAgICAgICBheGVzLnB1c2gobmV3IFZlYzMoLXNpbih0aGV0YU4pLCAwLCBjb3ModGhldGFOKSkpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZmFjZXMucHVzaChib3R0b21mYWNlKTsKICAgICAgYXhlcy5wdXNoKG5ldyBWZWMzKDAsIDEsIDApKTsgLy8gUmVvcmRlciB0b3AgZmFjZQoKICAgICAgY29uc3QgdGVtcCA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3BmYWNlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGVtcC5wdXNoKHRvcGZhY2VbdG9wZmFjZS5sZW5ndGggLSBpIC0gMV0pOwogICAgICB9CgogICAgICBmYWNlcy5wdXNoKHRlbXApOwogICAgICBzdXBlcih7CiAgICAgICAgdmVydGljZXMsCiAgICAgICAgZmFjZXMsCiAgICAgICAgYXhlcwogICAgICB9KTsKICAgICAgdGhpcy50eXBlID0gU2hhcGUudHlwZXMuQ1lMSU5ERVI7CiAgICAgIHRoaXMucmFkaXVzVG9wID0gcmFkaXVzVG9wOwogICAgICB0aGlzLnJhZGl1c0JvdHRvbSA9IHJhZGl1c0JvdHRvbTsKICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgIHRoaXMubnVtU2VnbWVudHMgPSBudW1TZWdtZW50czsKICAgIH0KCiAgfQoKICAvKioKICAgKiBQYXJ0aWNsZSBzaGFwZS4KICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCBwYXJ0aWNsZVNoYXBlID0gbmV3IENBTk5PTi5QYXJ0aWNsZSgpCiAgICogICAgIGNvbnN0IHBhcnRpY2xlQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBwYXJ0aWNsZVNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkocGFydGljbGVCb2R5KQogICAqLwogIGNsYXNzIFBhcnRpY2xlIGV4dGVuZHMgU2hhcGUgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKHsKICAgICAgICB0eXBlOiBTaGFwZS50eXBlcy5QQVJUSUNMRQogICAgICB9KTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlTG9jYWxJbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQuc2V0KDAsIDAsIDApOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICAgIHZvbHVtZSgpIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSAwOwogICAgfQoKICAgIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7CiAgICAgIC8vIEdldCBlYWNoIGF4aXMgbWF4CiAgICAgIG1pbi5jb3B5KHBvcyk7CiAgICAgIG1heC5jb3B5KHBvcyk7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQSBwbGFuZSwgZmFjaW5nIGluIHRoZSBaIGRpcmVjdGlvbi4gVGhlIHBsYW5lIGhhcyBpdHMgc3VyZmFjZSBhdCB6PTAgYW5kIGV2ZXJ5dGhpbmcgYmVsb3cgej0wIGlzIGFzc3VtZWQgdG8gYmUgc29saWQgcGxhbmUuIFRvIG1ha2UgdGhlIHBsYW5lIGZhY2UgaW4gc29tZSBvdGhlciBkaXJlY3Rpb24gdGhhbiB6LCB5b3UgbXVzdCBwdXQgaXQgaW5zaWRlIGEgQm9keSBhbmQgcm90YXRlIHRoYXQgYm9keS4gU2VlIHRoZSBkZW1vcy4KICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCBwbGFuZVNoYXBlID0gbmV3IENBTk5PTi5QbGFuZSgpCiAgICogICAgIGNvbnN0IHBsYW5lQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDAsIHNoYXBlOiAgcGxhbmVTaGFwZSB9KQogICAqICAgICBwbGFuZUJvZHkucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIoLU1hdGguUEkgLyAyLCAwLCAwKSAvLyBtYWtlIGl0IGZhY2UgdXAKICAgKiAgICAgd29ybGQuYWRkQm9keShwbGFuZUJvZHkpCiAgICovCiAgY2xhc3MgUGxhbmUgZXh0ZW5kcyBTaGFwZSB7CiAgICAvKiogd29ybGROb3JtYWwgKi8KCiAgICAvKiogd29ybGROb3JtYWxOZWVkc1VwZGF0ZSAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKHsKICAgICAgICB0eXBlOiBTaGFwZS50eXBlcy5QTEFORQogICAgICB9KTsgLy8gV29ybGQgb3JpZW50ZWQgbm9ybWFsCgogICAgICB0aGlzLndvcmxkTm9ybWFsID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy53b3JsZE5vcm1hbE5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE51bWJlci5NQVhfVkFMVUU7CiAgICB9CiAgICAvKiogY29tcHV0ZVdvcmxkTm9ybWFsICovCgoKICAgIGNvbXB1dGVXb3JsZE5vcm1hbChxdWF0KSB7CiAgICAgIGNvbnN0IG4gPSB0aGlzLndvcmxkTm9ybWFsOwogICAgICBuLnNldCgwLCAwLCAxKTsKICAgICAgcXVhdC52bXVsdChuLCBuKTsKICAgICAgdGhpcy53b3JsZE5vcm1hbE5lZWRzVXBkYXRlID0gZmFsc2U7CiAgICB9CgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICAgIHZvbHVtZSgpIHsKICAgICAgcmV0dXJuICgvLyBUaGUgcGxhbmUgaXMgaW5maW5pdGUuLi4KICAgICAgICBOdW1iZXIuTUFYX1ZBTFVFCiAgICAgICk7CiAgICB9CgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLy8gVGhlIHBsYW5lIEFBQkIgaXMgaW5maW5pdGUsIGV4Y2VwdCBpZiB0aGUgbm9ybWFsIGlzIHBvaW50aW5nIGFsb25nIGFueSBheGlzCiAgICAgIHRlbXBOb3JtYWwuc2V0KDAsIDAsIDEpOyAvLyBEZWZhdWx0IHBsYW5lIG5vcm1hbCBpcyB6CgogICAgICBxdWF0LnZtdWx0KHRlbXBOb3JtYWwsIHRlbXBOb3JtYWwpOwogICAgICBjb25zdCBtYXhWYWwgPSBOdW1iZXIuTUFYX1ZBTFVFOwogICAgICBtaW4uc2V0KC1tYXhWYWwsIC1tYXhWYWwsIC1tYXhWYWwpOwogICAgICBtYXguc2V0KG1heFZhbCwgbWF4VmFsLCBtYXhWYWwpOwoKICAgICAgaWYgKHRlbXBOb3JtYWwueCA9PT0gMSkgewogICAgICAgIG1heC54ID0gcG9zLng7CiAgICAgIH0gZWxzZSBpZiAodGVtcE5vcm1hbC54ID09PSAtMSkgewogICAgICAgIG1pbi54ID0gcG9zLng7CiAgICAgIH0KCiAgICAgIGlmICh0ZW1wTm9ybWFsLnkgPT09IDEpIHsKICAgICAgICBtYXgueSA9IHBvcy55OwogICAgICB9IGVsc2UgaWYgKHRlbXBOb3JtYWwueSA9PT0gLTEpIHsKICAgICAgICBtaW4ueSA9IHBvcy55OwogICAgICB9CgogICAgICBpZiAodGVtcE5vcm1hbC56ID09PSAxKSB7CiAgICAgICAgbWF4LnogPSBwb3MuejsKICAgICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnogPT09IC0xKSB7CiAgICAgICAgbWluLnogPSBwb3MuejsKICAgICAgfQogICAgfQoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgIH0KCiAgfQogIGNvbnN0IHRlbXBOb3JtYWwgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBIZWlnaHRmaWVsZCBzaGFwZSBjbGFzcy4gSGVpZ2h0IGRhdGEgaXMgZ2l2ZW4gYXMgYW4gYXJyYXkuIFRoZXNlIGRhdGEgcG9pbnRzIGFyZSBzcHJlYWQgb3V0IGV2ZW5seSB3aXRoIGEgZ2l2ZW4gZGlzdGFuY2UuCiAgICogQHRvZG8gU2hvdWxkIGJlIHBvc3NpYmxlIHRvIHVzZSBhbG9uZyBhbGwgYXhlcywgbm90IGp1c3QgeQogICAqIEB0b2RvIHNob3VsZCBiZSBwb3NzaWJsZSB0byBzY2FsZSBhbG9uZyBhbGwgYXhlcwogICAqIEB0b2RvIFJlZmFjdG9yIGVsZW1lbnRTaXplIHRvIGVsZW1lbnRTaXplWCBhbmQgZWxlbWVudFNpemVZCiAgICoKICAgKiBAZXhhbXBsZQogICAqICAgICAvLyBHZW5lcmF0ZSBzb21lIGhlaWdodCBkYXRhICh5LXZhbHVlcykuCiAgICogICAgIGNvbnN0IGRhdGEgPSBbXQogICAqICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDA7IGkrKykgewogICAqICAgICAgICAgY29uc3QgeSA9IDAuNSAqIE1hdGguY29zKDAuMiAqIGkpCiAgICogICAgICAgICBkYXRhLnB1c2goeSkKICAgKiAgICAgfQogICAqCiAgICogICAgIC8vIENyZWF0ZSB0aGUgaGVpZ2h0ZmllbGQgc2hhcGUKICAgKiAgICAgY29uc3QgaGVpZ2h0ZmllbGRTaGFwZSA9IG5ldyBDQU5OT04uSGVpZ2h0ZmllbGQoZGF0YSwgewogICAqICAgICAgICAgZWxlbWVudFNpemU6IDEgLy8gRGlzdGFuY2UgYmV0d2VlbiB0aGUgZGF0YSBwb2ludHMgaW4gWCBhbmQgWSBkaXJlY3Rpb25zCiAgICogICAgIH0pCiAgICogICAgIGNvbnN0IGhlaWdodGZpZWxkQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IHNoYXBlOiBoZWlnaHRmaWVsZFNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoaGVpZ2h0ZmllbGRCb2R5KQogICAqLwogIGNsYXNzIEhlaWdodGZpZWxkIGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiBBbiBhcnJheSBvZiBudW1iZXJzLCBvciBoZWlnaHQgdmFsdWVzLCB0aGF0IGFyZSBzcHJlYWQgb3V0IGFsb25nIHRoZSB4IGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE1heCB2YWx1ZSBvZiB0aGUgZGF0YSBwb2ludHMgaW4gdGhlIGRhdGEgYXJyYXkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE1pbmltdW0gdmFsdWUgb2YgdGhlIGRhdGEgcG9pbnRzIGluIHRoZSBkYXRhIGFycmF5LgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBzcGFjaW5nIGJldHdlZW4gdGhlIGRhdGEgcG9pbnRzIGluIFggYW5kIFkgZGlyZWN0aW9uLgogICAgICogQHRvZG8gZWxlbWVudFNpemVYIGFuZCBZCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIGRhdGEgQW4gYXJyYXkgb2YgbnVtYmVycywgb3IgaGVpZ2h0IHZhbHVlcywgdGhhdCBhcmUgc3ByZWFkIG91dCBhbG9uZyB0aGUgeCBheGlzLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihkYXRhLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7CiAgICAgICAgbWF4VmFsdWU6IG51bGwsCiAgICAgICAgbWluVmFsdWU6IG51bGwsCiAgICAgICAgZWxlbWVudFNpemU6IDEKICAgICAgfSk7CiAgICAgIHN1cGVyKHsKICAgICAgICB0eXBlOiBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRAogICAgICB9KTsKICAgICAgdGhpcy5kYXRhID0gZGF0YTsKICAgICAgdGhpcy5tYXhWYWx1ZSA9IG9wdGlvbnMubWF4VmFsdWU7CiAgICAgIHRoaXMubWluVmFsdWUgPSBvcHRpb25zLm1pblZhbHVlOwogICAgICB0aGlzLmVsZW1lbnRTaXplID0gb3B0aW9ucy5lbGVtZW50U2l6ZTsKCiAgICAgIGlmIChvcHRpb25zLm1pblZhbHVlID09PSBudWxsKSB7CiAgICAgICAgdGhpcy51cGRhdGVNaW5WYWx1ZSgpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy5tYXhWYWx1ZSA9PT0gbnVsbCkgewogICAgICAgIHRoaXMudXBkYXRlTWF4VmFsdWUoKTsKICAgICAgfQoKICAgICAgdGhpcy5jYWNoZUVuYWJsZWQgPSB0cnVlOwogICAgICB0aGlzLnBpbGxhckNvbnZleCA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKCk7CiAgICAgIHRoaXMucGlsbGFyT2Zmc2V0ID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOyAvLyAiaV9qX2lzVXBwZXIiID0+IHsgY29udmV4OiAuLi4sIG9mZnNldDogLi4uIH0KICAgICAgLy8gZm9yIGV4YW1wbGU6CiAgICAgIC8vIF9jYWNoZWRQaWxsYXJzWyIwXzJfMSJdCgogICAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0ge307CiAgICB9CiAgICAvKioKICAgICAqIENhbGwgd2hlbmV2ZXIgeW91IGNoYW5nZSB0aGUgZGF0YSBhcnJheS4KICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIHRoaXMuX2NhY2hlZFBpbGxhcnMgPSB7fTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBgbWluVmFsdWVgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlTWluVmFsdWUoKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGxldCBtaW5WYWx1ZSA9IGRhdGFbMF1bMF07CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBkYXRhW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCB2ID0gZGF0YVtpXVtqXTsKCiAgICAgICAgICBpZiAodiA8IG1pblZhbHVlKSB7CiAgICAgICAgICAgIG1pblZhbHVlID0gdjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMubWluVmFsdWUgPSBtaW5WYWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBgbWF4VmFsdWVgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlTWF4VmFsdWUoKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGxldCBtYXhWYWx1ZSA9IGRhdGFbMF1bMF07CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBkYXRhW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCB2ID0gZGF0YVtpXVtqXTsKCiAgICAgICAgICBpZiAodiA+IG1heFZhbHVlKSB7CiAgICAgICAgICAgIG1heFZhbHVlID0gdjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMubWF4VmFsdWUgPSBtYXhWYWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBoZWlnaHQgdmFsdWUgYXQgYW4gaW5kZXguIERvbid0IGZvcmdldCB0byB1cGRhdGUgbWF4VmFsdWUgYW5kIG1pblZhbHVlIGFmdGVyIHlvdSdyZSBkb25lLgogICAgICovCgoKICAgIHNldEhlaWdodFZhbHVlQXRJbmRleCh4aSwgeWksIHZhbHVlKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGRhdGFbeGldW3lpXSA9IHZhbHVlOyAvLyBJbnZhbGlkYXRlIGNhY2hlCgogICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBmYWxzZSk7CgogICAgICBpZiAoeGkgPiAwKSB7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWksIHRydWUpOwogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSAtIDEsIHlpLCBmYWxzZSk7CiAgICAgIH0KCiAgICAgIGlmICh5aSA+IDApIHsKICAgICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpIC0gMSwgdHJ1ZSk7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSAtIDEsIGZhbHNlKTsKICAgICAgfQoKICAgICAgaWYgKHlpID4gMCAmJiB4aSA+IDApIHsKICAgICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGkgLSAxLCB5aSAtIDEsIHRydWUpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBtYXgvbWluIGluIGEgcmVjdGFuZ2xlIGluIHRoZSBtYXRyaXggZGF0YQogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSB0aGUgcmVzdWx0cyBpbi4KICAgICAqIEByZXR1cm4gVGhlIHJlc3VsdCBhcnJheSwgaWYgaXQgd2FzIHBhc3NlZCBpbi4gTWluaW11bSB3aWxsIGJlIGF0IHBvc2l0aW9uIDAgYW5kIG1heCBhdCAxLgogICAgICovCgoKICAgIGdldFJlY3RNaW5NYXgoaU1pblgsIGlNaW5ZLCBpTWF4WCwgaU1heFksIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBbXTsKICAgICAgfQoKICAgICAgLy8gR2V0IG1heCBhbmQgbWluIG9mIHRoZSBkYXRhCiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7IC8vIFNldCBmaXJzdCB2YWx1ZQoKICAgICAgbGV0IG1heCA9IHRoaXMubWluVmFsdWU7CgogICAgICBmb3IgKGxldCBpID0gaU1pblg7IGkgPD0gaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8PSBpTWF4WTsgaisrKSB7CiAgICAgICAgICBjb25zdCBoZWlnaHQgPSBkYXRhW2ldW2pdOwoKICAgICAgICAgIGlmIChoZWlnaHQgPiBtYXgpIHsKICAgICAgICAgICAgbWF4ID0gaGVpZ2h0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmVzdWx0WzBdID0gdGhpcy5taW5WYWx1ZTsKICAgICAgcmVzdWx0WzFdID0gbWF4OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGluZGV4IG9mIGEgbG9jYWwgcG9zaXRpb24gb24gdGhlIGhlaWdodGZpZWxkLiBUaGUgaW5kZXhlcyBpbmRpY2F0ZSB0aGUgcmVjdGFuZ2xlcywgc28gaWYgeW91ciB0ZXJyYWluIGlzIG1hZGUgb2YgTiB4IE4gaGVpZ2h0IGRhdGEgcG9pbnRzLCB5b3Ugd2lsbCBoYXZlIHJlY3RhbmdsZSBpbmRleGVzIHJhbmdpbmcgZnJvbSAwIHRvIE4tMS4KICAgICAqIEBwYXJhbSByZXN1bHQgVHdvLWVsZW1lbnQgYXJyYXkKICAgICAqIEBwYXJhbSBjbGFtcCBJZiB0aGUgcG9zaXRpb24gc2hvdWxkIGJlIGNsYW1wZWQgdG8gdGhlIGhlaWdodGZpZWxkIGVkZ2UuCiAgICAgKi8KCgogICAgZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIHJlc3VsdCwgY2xhbXApIHsKICAgICAgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CiAgICAgIGNvbnN0IHcgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgeGkgPSBNYXRoLmZsb29yKHggLyB3KTsKICAgICAgbGV0IHlpID0gTWF0aC5mbG9vcih5IC8gdyk7CiAgICAgIHJlc3VsdFswXSA9IHhpOwogICAgICByZXN1bHRbMV0gPSB5aTsKCiAgICAgIGlmIChjbGFtcCkgewogICAgICAgIC8vIENsYW1wIGluZGV4IHRvIGVkZ2VzCiAgICAgICAgaWYgKHhpIDwgMCkgewogICAgICAgICAgeGkgPSAwOwogICAgICAgIH0KCiAgICAgICAgaWYgKHlpIDwgMCkgewogICAgICAgICAgeWkgPSAwOwogICAgICAgIH0KCiAgICAgICAgaWYgKHhpID49IGRhdGEubGVuZ3RoIC0gMSkgewogICAgICAgICAgeGkgPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgICAgfQoKICAgICAgICBpZiAoeWkgPj0gZGF0YVswXS5sZW5ndGggLSAxKSB7CiAgICAgICAgICB5aSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgICB9CiAgICAgIH0gLy8gQmFpbCBvdXQgaWYgd2UgYXJlIG91dCBvZiB0aGUgdGVycmFpbgoKCiAgICAgIGlmICh4aSA8IDAgfHwgeWkgPCAwIHx8IHhpID49IGRhdGEubGVuZ3RoIC0gMSB8fCB5aSA+PSBkYXRhWzBdLmxlbmd0aCAtIDEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGdldFRyaWFuZ2xlQXQoeCwgeSwgZWRnZUNsYW1wLCBhLCBiLCBjKSB7CiAgICAgIGNvbnN0IGlkeCA9IGdldEhlaWdodEF0X2lkeDsKICAgICAgdGhpcy5nZXRJbmRleE9mUG9zaXRpb24oeCwgeSwgaWR4LCBlZGdlQ2xhbXApOwogICAgICBsZXQgeGkgPSBpZHhbMF07CiAgICAgIGxldCB5aSA9IGlkeFsxXTsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKCiAgICAgIGlmIChlZGdlQ2xhbXApIHsKICAgICAgICB4aSA9IE1hdGgubWluKGRhdGEubGVuZ3RoIC0gMiwgTWF0aC5tYXgoMCwgeGkpKTsKICAgICAgICB5aSA9IE1hdGgubWluKGRhdGFbMF0ubGVuZ3RoIC0gMiwgTWF0aC5tYXgoMCwgeWkpKTsKICAgICAgfQoKICAgICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICBjb25zdCBsb3dlckRpc3QyID0gKHggLyBlbGVtZW50U2l6ZSAtIHhpKSAqKiAyICsgKHkgLyBlbGVtZW50U2l6ZSAtIHlpKSAqKiAyOwogICAgICBjb25zdCB1cHBlckRpc3QyID0gKHggLyBlbGVtZW50U2l6ZSAtICh4aSArIDEpKSAqKiAyICsgKHkgLyBlbGVtZW50U2l6ZSAtICh5aSArIDEpKSAqKiAyOwogICAgICBjb25zdCB1cHBlciA9IGxvd2VyRGlzdDIgPiB1cHBlckRpc3QyOwogICAgICB0aGlzLmdldFRyaWFuZ2xlKHhpLCB5aSwgdXBwZXIsIGEsIGIsIGMpOwogICAgICByZXR1cm4gdXBwZXI7CiAgICB9CgogICAgZ2V0Tm9ybWFsQXQoeCwgeSwgZWRnZUNsYW1wLCByZXN1bHQpIHsKICAgICAgY29uc3QgYSA9IGdldE5vcm1hbEF0X2E7CiAgICAgIGNvbnN0IGIgPSBnZXROb3JtYWxBdF9iOwogICAgICBjb25zdCBjID0gZ2V0Tm9ybWFsQXRfYzsKICAgICAgY29uc3QgZTAgPSBnZXROb3JtYWxBdF9lMDsKICAgICAgY29uc3QgZTEgPSBnZXROb3JtYWxBdF9lMTsKICAgICAgdGhpcy5nZXRUcmlhbmdsZUF0KHgsIHksIGVkZ2VDbGFtcCwgYSwgYiwgYyk7CiAgICAgIGIudnN1YihhLCBlMCk7CiAgICAgIGMudnN1YihhLCBlMSk7CiAgICAgIGUwLmNyb3NzKGUxLCByZXN1bHQpOwogICAgICByZXN1bHQubm9ybWFsaXplKCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBBQUJCIG9mIGEgc3F1YXJlIGluIHRoZSBoZWlnaHRmaWVsZAogICAgICogQHBhcmFtIHhpCiAgICAgKiBAcGFyYW0geWkKICAgICAqIEBwYXJhbSByZXN1bHQKICAgICAqLwoKCiAgICBnZXRBYWJiQXRJbmRleCh4aSwgeWksIF9yZWYpIHsKICAgICAgbGV0IHsKICAgICAgICBsb3dlckJvdW5kLAogICAgICAgIHVwcGVyQm91bmQKICAgICAgfSA9IF9yZWY7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgbG93ZXJCb3VuZC5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWldKTsKICAgICAgdXBwZXJCb3VuZC5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0pOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGhlaWdodCBpbiB0aGUgaGVpZ2h0ZmllbGQgYXQgYSBnaXZlbiBwb3NpdGlvbgogICAgICovCgoKICAgIGdldEhlaWdodEF0KHgsIHksIGVkZ2VDbGFtcCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBhID0gZ2V0SGVpZ2h0QXRfYTsKICAgICAgY29uc3QgYiA9IGdldEhlaWdodEF0X2I7CiAgICAgIGNvbnN0IGMgPSBnZXRIZWlnaHRBdF9jOwogICAgICBjb25zdCBpZHggPSBnZXRIZWlnaHRBdF9pZHg7CiAgICAgIHRoaXMuZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIGlkeCwgZWRnZUNsYW1wKTsKICAgICAgbGV0IHhpID0gaWR4WzBdOwogICAgICBsZXQgeWkgPSBpZHhbMV07CgogICAgICBpZiAoZWRnZUNsYW1wKSB7CiAgICAgICAgeGkgPSBNYXRoLm1pbihkYXRhLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHhpKSk7CiAgICAgICAgeWkgPSBNYXRoLm1pbihkYXRhWzBdLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHlpKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHVwcGVyID0gdGhpcy5nZXRUcmlhbmdsZUF0KHgsIHksIGVkZ2VDbGFtcCwgYSwgYiwgYyk7CiAgICAgIGJhcnljZW50cmljV2VpZ2h0cyh4LCB5LCBhLngsIGEueSwgYi54LCBiLnksIGMueCwgYy55LCBnZXRIZWlnaHRBdF93ZWlnaHRzKTsKICAgICAgY29uc3QgdyA9IGdldEhlaWdodEF0X3dlaWdodHM7CgogICAgICBpZiAodXBwZXIpIHsKICAgICAgICAvLyBUb3AgdHJpYW5nbGUgdmVydHMKICAgICAgICByZXR1cm4gZGF0YVt4aSArIDFdW3lpICsgMV0gKiB3LnggKyBkYXRhW3hpXVt5aSArIDFdICogdy55ICsgZGF0YVt4aSArIDFdW3lpXSAqIHcuejsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUb3AgdHJpYW5nbGUgdmVydHMKICAgICAgICByZXR1cm4gZGF0YVt4aV1beWldICogdy54ICsgZGF0YVt4aSArIDFdW3lpXSAqIHcueSArIGRhdGFbeGldW3lpICsgMV0gKiB3Lno7CiAgICAgIH0KICAgIH0KCiAgICBnZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICByZXR1cm4gYCR7eGl9XyR7eWl9XyR7Z2V0VXBwZXJUcmlhbmdsZSA/IDEgOiAwfWA7CiAgICB9CgogICAgZ2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKSB7CiAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXTsKICAgIH0KCiAgICBzZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUsIGNvbnZleCwgb2Zmc2V0KSB7CiAgICAgIHRoaXMuX2NhY2hlZFBpbGxhcnNbdGhpcy5nZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSldID0gewogICAgICAgIGNvbnZleCwKICAgICAgICBvZmZzZXQKICAgICAgfTsKICAgIH0KCiAgICBjbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICBkZWxldGUgdGhpcy5fY2FjaGVkUGlsbGFyc1t0aGlzLmdldENhY2hlQ29udmV4VHJpYW5nbGVQaWxsYXJLZXkoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKV07CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIHRyaWFuZ2xlIGZyb20gdGhlIGhlaWdodGZpZWxkCiAgICAgKi8KCgogICAgZ2V0VHJpYW5nbGUoeGksIHlpLCB1cHBlciwgYSwgYiwgYykgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7CgogICAgICBpZiAodXBwZXIpIHsKICAgICAgICAvLyBUb3AgdHJpYW5nbGUgdmVydHMKICAgICAgICBhLnNldCgoeGkgKyAxKSAqIGVsZW1lbnRTaXplLCAoeWkgKyAxKSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWkgKyAxXSk7CiAgICAgICAgYi5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSk7CiAgICAgICAgYy5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgYS5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWldKTsKICAgICAgICBiLnNldCgoeGkgKyAxKSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldKTsKICAgICAgICBjLnNldCh4aSAqIGVsZW1lbnRTaXplLCAoeWkgKyAxKSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB0cmlhbmdsZSBpbiB0aGUgdGVycmFpbiBpbiB0aGUgZm9ybSBvZiBhIHRyaWFuZ3VsYXIgY29udmV4IHNoYXBlLgogICAgICovCgoKICAgIGdldENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICBsZXQgcmVzdWx0ID0gdGhpcy5waWxsYXJDb252ZXg7CiAgICAgIGxldCBvZmZzZXRSZXN1bHQgPSB0aGlzLnBpbGxhck9mZnNldDsKCiAgICAgIGlmICh0aGlzLmNhY2hlRW5hYmxlZCkgewogICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmdldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSk7CgogICAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgICB0aGlzLnBpbGxhckNvbnZleCA9IGRhdGEuY29udmV4OwogICAgICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSBkYXRhLm9mZnNldDsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHJlc3VsdCA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKCk7CiAgICAgICAgb2Zmc2V0UmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgICB0aGlzLnBpbGxhckNvbnZleCA9IHJlc3VsdDsKICAgICAgICB0aGlzLnBpbGxhck9mZnNldCA9IG9mZnNldFJlc3VsdDsKICAgICAgfQoKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICBjb25zdCBmYWNlcyA9IHJlc3VsdC5mYWNlczsgLy8gUmV1c2UgdmVydHMgaWYgcG9zc2libGUKCiAgICAgIHJlc3VsdC52ZXJ0aWNlcy5sZW5ndGggPSA2OwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHsKICAgICAgICBpZiAoIXJlc3VsdC52ZXJ0aWNlc1tpXSkgewogICAgICAgICAgcmVzdWx0LnZlcnRpY2VzW2ldID0gbmV3IFZlYzMoKTsKICAgICAgICB9CiAgICAgIH0gLy8gUmV1c2UgZmFjZXMgaWYgcG9zc2libGUKCgogICAgICBmYWNlcy5sZW5ndGggPSA1OwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICBpZiAoIWZhY2VzW2ldKSB7CiAgICAgICAgICBmYWNlc1tpXSA9IFtdOwogICAgICAgIH0KICAgICAgfQoKICAgICAgY29uc3QgdmVydHMgPSByZXN1bHQudmVydGljZXM7CiAgICAgIGNvbnN0IGggPSAoTWF0aC5taW4oZGF0YVt4aV1beWldLCBkYXRhW3hpICsgMV1beWldLCBkYXRhW3hpXVt5aSArIDFdLCBkYXRhW3hpICsgMV1beWkgKyAxXSkgLSB0aGlzLm1pblZhbHVlKSAvIDIgKyB0aGlzLm1pblZhbHVlOwoKICAgICAgaWYgKCFnZXRVcHBlclRyaWFuZ2xlKSB7CiAgICAgICAgLy8gQ2VudGVyIG9mIHRoZSB0cmlhbmdsZSBwaWxsYXIgLSBhbGwgcG9seWdvbnMgYXJlIGdpdmVuIHJlbGF0aXZlIHRvIHRoaXMgb25lCiAgICAgICAgb2Zmc2V0UmVzdWx0LnNldCgoeGkgKyAwLjI1KSAqIGVsZW1lbnRTaXplLCAvLyBzb3J0IG9mIGNlbnRlciBvZiBhIHRyaWFuZ2xlCiAgICAgICAgKHlpICsgMC4yNSkgKiBlbGVtZW50U2l6ZSwgaCAvLyB2ZXJ0aWNhbCBjZW50ZXIKICAgICAgICApOyAvLyBUb3AgdHJpYW5nbGUgdmVydHMKCiAgICAgICAgdmVydHNbMF0uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSAtIGgpOwogICAgICAgIHZlcnRzWzFdLnNldCgwLjc1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0gLSBoKTsKICAgICAgICB2ZXJ0c1syXS5zZXQoLTAuMjUgKiBlbGVtZW50U2l6ZSwgMC43NSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdIC0gaCk7IC8vIGJvdHRvbSB0cmlhbmdsZSB2ZXJ0cwoKICAgICAgICB2ZXJ0c1szXS5zZXQoLTAuMjUgKiBlbGVtZW50U2l6ZSwgLTAuMjUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7CiAgICAgICAgdmVydHNbNF0uc2V0KDAuNzUgKiBlbGVtZW50U2l6ZSwgLTAuMjUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7CiAgICAgICAgdmVydHNbNV0uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIDAuNzUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7IC8vIHRvcCB0cmlhbmdsZQoKICAgICAgICBmYWNlc1swXVswXSA9IDA7CiAgICAgICAgZmFjZXNbMF1bMV0gPSAxOwogICAgICAgIGZhY2VzWzBdWzJdID0gMjsgLy8gYm90dG9tIHRyaWFuZ2xlCgogICAgICAgIGZhY2VzWzFdWzBdID0gNTsKICAgICAgICBmYWNlc1sxXVsxXSA9IDQ7CiAgICAgICAgZmFjZXNbMV1bMl0gPSAzOyAvLyAteCBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1syXVswXSA9IDA7CiAgICAgICAgZmFjZXNbMl1bMV0gPSAyOwogICAgICAgIGZhY2VzWzJdWzJdID0gNTsKICAgICAgICBmYWNlc1syXVszXSA9IDM7IC8vIC15IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzNdWzBdID0gMTsKICAgICAgICBmYWNlc1szXVsxXSA9IDA7CiAgICAgICAgZmFjZXNbM11bMl0gPSAzOwogICAgICAgIGZhY2VzWzNdWzNdID0gNDsgLy8gK3h5IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzRdWzBdID0gNDsKICAgICAgICBmYWNlc1s0XVsxXSA9IDU7CiAgICAgICAgZmFjZXNbNF1bMl0gPSAyOwogICAgICAgIGZhY2VzWzRdWzNdID0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBDZW50ZXIgb2YgdGhlIHRyaWFuZ2xlIHBpbGxhciAtIGFsbCBwb2x5Z29ucyBhcmUgZ2l2ZW4gcmVsYXRpdmUgdG8gdGhpcyBvbmUKICAgICAgICBvZmZzZXRSZXN1bHQuc2V0KCh4aSArIDAuNzUpICogZWxlbWVudFNpemUsIC8vIHNvcnQgb2YgY2VudGVyIG9mIGEgdHJpYW5nbGUKICAgICAgICAoeWkgKyAwLjc1KSAqIGVsZW1lbnRTaXplLCBoIC8vIHZlcnRpY2FsIGNlbnRlcgogICAgICAgICk7IC8vIFRvcCB0cmlhbmdsZSB2ZXJ0cwoKICAgICAgICB2ZXJ0c1swXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdIC0gaCk7CiAgICAgICAgdmVydHNbMV0uc2V0KC0wLjc1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSAtIGgpOwogICAgICAgIHZlcnRzWzJdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIC0wLjc1ICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0gLSBoKTsgLy8gYm90dG9tIHRyaWFuZ2xlIHZlcnRzCgogICAgICAgIHZlcnRzWzNdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7CiAgICAgICAgdmVydHNbNF0uc2V0KC0wLjc1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7CiAgICAgICAgdmVydHNbNV0uc2V0KDAuMjUgKiBlbGVtZW50U2l6ZSwgLTAuNzUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7IC8vIFRvcCB0cmlhbmdsZQoKICAgICAgICBmYWNlc1swXVswXSA9IDA7CiAgICAgICAgZmFjZXNbMF1bMV0gPSAxOwogICAgICAgIGZhY2VzWzBdWzJdID0gMjsgLy8gYm90dG9tIHRyaWFuZ2xlCgogICAgICAgIGZhY2VzWzFdWzBdID0gNTsKICAgICAgICBmYWNlc1sxXVsxXSA9IDQ7CiAgICAgICAgZmFjZXNbMV1bMl0gPSAzOyAvLyAreCBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1syXVswXSA9IDI7CiAgICAgICAgZmFjZXNbMl1bMV0gPSA1OwogICAgICAgIGZhY2VzWzJdWzJdID0gMzsKICAgICAgICBmYWNlc1syXVszXSA9IDA7IC8vICt5IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzNdWzBdID0gMzsKICAgICAgICBmYWNlc1szXVsxXSA9IDQ7CiAgICAgICAgZmFjZXNbM11bMl0gPSAxOwogICAgICAgIGZhY2VzWzNdWzNdID0gMDsgLy8gLXh5IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzRdWzBdID0gMTsKICAgICAgICBmYWNlc1s0XVsxXSA9IDQ7CiAgICAgICAgZmFjZXNbNF1bMl0gPSA1OwogICAgICAgIGZhY2VzWzRdWzNdID0gMjsKICAgICAgfQoKICAgICAgcmVzdWx0LmNvbXB1dGVOb3JtYWxzKCk7CiAgICAgIHJlc3VsdC5jb21wdXRlRWRnZXMoKTsKICAgICAgcmVzdWx0LnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICAgIHRoaXMuc2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlLCByZXN1bHQsIG9mZnNldFJlc3VsdCk7CiAgICB9CgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQuc2V0KDAsIDAsIDApOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICAgIHZvbHVtZSgpIHsKICAgICAgcmV0dXJuICgvLyBUaGUgdGVycmFpbiBpcyBpbmZpbml0ZQogICAgICAgIE51bWJlci5NQVhfVkFMVUUKICAgICAgKTsKICAgIH0KCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICAvKiogQFRPRE8gZG8gaXQgcHJvcGVybHkgKi8KICAgICAgbWluLnNldCgtTnVtYmVyLk1BWF9WQUxVRSwgLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgbWF4LnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTsKICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgLy8gVXNlIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIG1pbi9tYXggdmFsdWVzCiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IHMgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gbmV3IFZlYzMoZGF0YS5sZW5ndGggKiBzLCBkYXRhWzBdLmxlbmd0aCAqIHMsIE1hdGgubWF4KE1hdGguYWJzKHRoaXMubWF4VmFsdWUpLCBNYXRoLmFicyh0aGlzLm1pblZhbHVlKSkpLmxlbmd0aCgpOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBoZWlnaHQgdmFsdWVzIGZyb20gYW4gaW1hZ2UuIEN1cnJlbnRseSBvbmx5IHN1cHBvcnRlZCBpbiBicm93c2VyLgogICAgICovCgoKICAgIHNldEhlaWdodHNGcm9tSW1hZ2UoaW1hZ2UsIHNjYWxlKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICB4LAogICAgICAgIHosCiAgICAgICAgeQogICAgICB9ID0gc2NhbGU7CiAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgICBjYW52YXMud2lkdGggPSBpbWFnZS53aWR0aDsKICAgICAgY2FudmFzLmhlaWdodCA9IGltYWdlLmhlaWdodDsKICAgICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7CiAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQpOwogICAgICBjb25zdCBtYXRyaXggPSB0aGlzLmRhdGE7CiAgICAgIG1hdHJpeC5sZW5ndGggPSAwOwogICAgICB0aGlzLmVsZW1lbnRTaXplID0gTWF0aC5hYnMoeCkgLyBpbWFnZURhdGEud2lkdGg7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGltYWdlRGF0YS5oZWlnaHQ7IGkrKykgewogICAgICAgIGNvbnN0IHJvdyA9IFtdOwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGltYWdlRGF0YS53aWR0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCBhID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0XTsKICAgICAgICAgIGNvbnN0IGIgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDQgKyAxXTsKICAgICAgICAgIGNvbnN0IGMgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDQgKyAyXTsKICAgICAgICAgIGNvbnN0IGhlaWdodCA9IChhICsgYiArIGMpIC8gNCAvIDI1NSAqIHo7CgogICAgICAgICAgaWYgKHggPCAwKSB7CiAgICAgICAgICAgIHJvdy5wdXNoKGhlaWdodCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByb3cudW5zaGlmdChoZWlnaHQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHkgPCAwKSB7CiAgICAgICAgICBtYXRyaXgudW5zaGlmdChyb3cpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBtYXRyaXgucHVzaChyb3cpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVNYXhWYWx1ZSgpOwogICAgICB0aGlzLnVwZGF0ZU1pblZhbHVlKCk7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CgogIH0KICBjb25zdCBnZXRIZWlnaHRBdF9pZHggPSBbXTsKICBjb25zdCBnZXRIZWlnaHRBdF93ZWlnaHRzID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXRIZWlnaHRBdF9hID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXRIZWlnaHRBdF9iID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXRIZWlnaHRBdF9jID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9hID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9iID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9jID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9lMCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfZTEgPSBuZXcgVmVjMygpOyAvLyBmcm9tIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0JhcnljZW50cmljX2Nvb3JkaW5hdGVfc3lzdGVtCgogIGZ1bmN0aW9uIGJhcnljZW50cmljV2VpZ2h0cyh4LCB5LCBheCwgYXksIGJ4LCBieSwgY3gsIGN5LCByZXN1bHQpIHsKICAgIHJlc3VsdC54ID0gKChieSAtIGN5KSAqICh4IC0gY3gpICsgKGN4IC0gYngpICogKHkgLSBjeSkpIC8gKChieSAtIGN5KSAqIChheCAtIGN4KSArIChjeCAtIGJ4KSAqIChheSAtIGN5KSk7CiAgICByZXN1bHQueSA9ICgoY3kgLSBheSkgKiAoeCAtIGN4KSArIChheCAtIGN4KSAqICh5IC0gY3kpKSAvICgoYnkgLSBjeSkgKiAoYXggLSBjeCkgKyAoY3ggLSBieCkgKiAoYXkgLSBjeSkpOwogICAgcmVzdWx0LnogPSAxIC0gcmVzdWx0LnggLSByZXN1bHQueTsKICB9CgogIC8qKgogICAqIE9jdHJlZU5vZGUKICAgKi8KICBjbGFzcyBPY3RyZWVOb2RlIHsKICAgIC8qKiBUaGUgcm9vdCBub2RlICovCgogICAgLyoqIEJvdW5kYXJ5IG9mIHRoaXMgbm9kZSAqLwoKICAgIC8qKiBDb250YWluZWQgZGF0YSBhdCB0aGUgY3VycmVudCBub2RlIGxldmVsICovCgogICAgLyoqIENoaWxkcmVuIHRvIHRoaXMgbm9kZSAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLnJvb3QgPSBvcHRpb25zLnJvb3QgfHwgbnVsbDsKICAgICAgdGhpcy5hYWJiID0gb3B0aW9ucy5hYWJiID8gb3B0aW9ucy5hYWJiLmNsb25lKCkgOiBuZXcgQUFCQigpOwogICAgICB0aGlzLmRhdGEgPSBbXTsKICAgICAgdGhpcy5jaGlsZHJlbiA9IFtdOwogICAgfQogICAgLyoqCiAgICAgKiByZXNldAogICAgICovCgoKICAgIHJlc2V0KCkgewogICAgICB0aGlzLmNoaWxkcmVuLmxlbmd0aCA9IHRoaXMuZGF0YS5sZW5ndGggPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBJbnNlcnQgZGF0YSBpbnRvIHRoaXMgbm9kZQogICAgICogQHJldHVybiBUcnVlIGlmIHN1Y2Nlc3NmdWwsIG90aGVyd2lzZSBmYWxzZQogICAgICovCgoKICAgIGluc2VydChhYWJiLCBlbGVtZW50RGF0YSwgbGV2ZWwpIHsKICAgICAgaWYgKGxldmVsID09PSB2b2lkIDApIHsKICAgICAgICBsZXZlbCA9IDA7CiAgICAgIH0KCiAgICAgIGNvbnN0IG5vZGVEYXRhID0gdGhpcy5kYXRhOyAvLyBJZ25vcmUgb2JqZWN0cyB0aGF0IGRvIG5vdCBiZWxvbmcgaW4gdGhpcyBub2RlCgogICAgICBpZiAoIXRoaXMuYWFiYi5jb250YWlucyhhYWJiKSkgewogICAgICAgIHJldHVybiBmYWxzZTsgLy8gb2JqZWN0IGNhbm5vdCBiZSBhZGRlZAogICAgICB9CgogICAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW47CiAgICAgIGNvbnN0IG1heERlcHRoID0gdGhpcy5tYXhEZXB0aCB8fCB0aGlzLnJvb3QubWF4RGVwdGg7CgogICAgICBpZiAobGV2ZWwgPCBtYXhEZXB0aCkgewogICAgICAgIC8vIFN1YmRpdmlkZSBpZiB0aGVyZSBhcmUgbm8gY2hpbGRyZW4geWV0CiAgICAgICAgbGV0IHN1YmRpdmlkZWQgPSBmYWxzZTsKCiAgICAgICAgaWYgKCFjaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICAgIHRoaXMuc3ViZGl2aWRlKCk7CiAgICAgICAgICBzdWJkaXZpZGVkID0gdHJ1ZTsKICAgICAgICB9IC8vIGFkZCB0byB3aGljaGV2ZXIgbm9kZSB3aWxsIGFjY2VwdCBpdAoKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgICAgaWYgKGNoaWxkcmVuW2ldLmluc2VydChhYWJiLCBlbGVtZW50RGF0YSwgbGV2ZWwgKyAxKSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChzdWJkaXZpZGVkKSB7CiAgICAgICAgICAvLyBObyBjaGlsZHJlbiBhY2NlcHRlZCEgTWlnaHQgYXMgd2VsbCBqdXN0IHJlbW92ZSBlbSBzaW5jZSB0aGV5IGNvbnRhaW4gbm9uZQogICAgICAgICAgY2hpbGRyZW4ubGVuZ3RoID0gMDsKICAgICAgICB9CiAgICAgIH0gLy8gVG9vIGRlZXAsIG9yIGNoaWxkcmVuIGRpZG50IHdhbnQgaXQuIGFkZCBpdCBpbiBjdXJyZW50IG5vZGUKCgogICAgICBub2RlRGF0YS5wdXNoKGVsZW1lbnREYXRhKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENyZWF0ZSA4IGVxdWFsbHkgc2l6ZWQgY2hpbGRyZW4gbm9kZXMgYW5kIHB1dCB0aGVtIGluIHRoZSBgY2hpbGRyZW5gIGFycmF5LgogICAgICovCgoKICAgIHN1YmRpdmlkZSgpIHsKICAgICAgY29uc3QgYWFiYiA9IHRoaXMuYWFiYjsKICAgICAgY29uc3QgbCA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IGFhYmIudXBwZXJCb3VuZDsKICAgICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuOwogICAgICBjaGlsZHJlbi5wdXNoKG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygwLCAwLCAwKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMCwgMCkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDEsIDApCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygxLCAxLCAxKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMSwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDAsIDEpCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygxLCAwLCAxKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMSwgMCkKICAgICAgICB9KQogICAgICB9KSk7CiAgICAgIHUudnN1YihsLCBoYWxmRGlhZ29uYWwpOwogICAgICBoYWxmRGlhZ29uYWwuc2NhbGUoMC41LCBoYWxmRGlhZ29uYWwpOwogICAgICBjb25zdCByb290ID0gdGhpcy5yb290IHx8IHRoaXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gODsgaSsrKSB7CiAgICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTsgLy8gU2V0IGN1cnJlbnQgbm9kZSBhcyByb290CgogICAgICAgIGNoaWxkLnJvb3QgPSByb290OyAvLyBDb21wdXRlIGJvdW5kcwoKICAgICAgICBjb25zdCBsb3dlckJvdW5kID0gY2hpbGQuYWFiYi5sb3dlckJvdW5kOwogICAgICAgIGxvd2VyQm91bmQueCAqPSBoYWxmRGlhZ29uYWwueDsKICAgICAgICBsb3dlckJvdW5kLnkgKj0gaGFsZkRpYWdvbmFsLnk7CiAgICAgICAgbG93ZXJCb3VuZC56ICo9IGhhbGZEaWFnb25hbC56OwogICAgICAgIGxvd2VyQm91bmQudmFkZChsLCBsb3dlckJvdW5kKTsgLy8gVXBwZXIgYm91bmQgaXMgYWx3YXlzIGxvd2VyIGJvdW5kICsgaGFsZkRpYWdvbmFsCgogICAgICAgIGxvd2VyQm91bmQudmFkZChoYWxmRGlhZ29uYWwsIGNoaWxkLmFhYmIudXBwZXJCb3VuZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogR2V0IGFsbCBkYXRhLCBwb3RlbnRpYWxseSB3aXRoaW4gYW4gQUFCQgogICAgICogQHJldHVybiBUaGUgInJlc3VsdCIgb2JqZWN0CiAgICAgKi8KCgogICAgYWFiYlF1ZXJ5KGFhYmIsIHJlc3VsdCkgewogICAgICB0aGlzLmRhdGE7IC8vIGFib3J0IGlmIHRoZSByYW5nZSBkb2VzIG5vdCBpbnRlcnNlY3QgdGhpcyBub2RlCiAgICAgIC8vIGlmICghdGhpcy5hYWJiLm92ZXJsYXBzKGFhYmIpKXsKICAgICAgLy8gICAgIHJldHVybiByZXN1bHQ7CiAgICAgIC8vIH0KICAgICAgLy8gQWRkIG9iamVjdHMgYXQgdGhpcyBsZXZlbAogICAgICAvLyBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIG5vZGVEYXRhKTsKICAgICAgLy8gQWRkIGNoaWxkIGRhdGEKICAgICAgLy8gQHRvZG8gdW53cmFwIHJlY3Vyc2lvbiBpbnRvIGEgcXVldWUgLyBsb29wLCB0aGF0J3MgZmFzdGVyIGluIEpTCgogICAgICB0aGlzLmNoaWxkcmVuOyAvLyBmb3IgKGxldCBpID0gMCwgTiA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpICE9PSBOOyBpKyspIHsKICAgICAgLy8gICAgIGNoaWxkcmVuW2ldLmFhYmJRdWVyeShhYWJiLCByZXN1bHQpOwogICAgICAvLyB9CgogICAgICBjb25zdCBxdWV1ZSA9IFt0aGlzXTsKCiAgICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgpIHsKICAgICAgICBjb25zdCBub2RlID0gcXVldWUucG9wKCk7CgogICAgICAgIGlmIChub2RlLmFhYmIub3ZlcmxhcHMoYWFiYikpIHsKICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHJlc3VsdCwgbm9kZS5kYXRhKTsKICAgICAgICB9CgogICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHF1ZXVlLCBub2RlLmNoaWxkcmVuKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFsbCBkYXRhLCBwb3RlbnRpYWxseSBpbnRlcnNlY3RlZCBieSBhIHJheS4KICAgICAqIEByZXR1cm4gVGhlICJyZXN1bHQiIG9iamVjdAogICAgICovCgoKICAgIHJheVF1ZXJ5KHJheSwgdHJlZVRyYW5zZm9ybSwgcmVzdWx0KSB7CiAgICAgIC8vIFVzZSBhYWJiIHF1ZXJ5IGZvciBub3cuCgogICAgICAvKiogQHRvZG8gaW1wbGVtZW50IHJlYWwgcmF5IHF1ZXJ5IHdoaWNoIG5lZWRzIGxlc3MgbG9va3VwcyAqLwogICAgICByYXkuZ2V0QUFCQih0bXBBQUJCKTsKICAgICAgdG1wQUFCQi50b0xvY2FsRnJhbWUodHJlZVRyYW5zZm9ybSwgdG1wQUFCQik7CiAgICAgIHRoaXMuYWFiYlF1ZXJ5KHRtcEFBQkIsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHJlbW92ZUVtcHR5Tm9kZXMKICAgICAqLwoKCiAgICByZW1vdmVFbXB0eU5vZGVzKCkgewogICAgICBmb3IgKGxldCBpID0gdGhpcy5jaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIHRoaXMuY2hpbGRyZW5baV0ucmVtb3ZlRW1wdHlOb2RlcygpOwoKICAgICAgICBpZiAoIXRoaXMuY2hpbGRyZW5baV0uY2hpbGRyZW4ubGVuZ3RoICYmICF0aGlzLmNoaWxkcmVuW2ldLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZShpLCAxKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgfQogIC8qKgogICAqIE9jdHJlZQogICAqLwoKCiAgY2xhc3MgT2N0cmVlIGV4dGVuZHMgT2N0cmVlTm9kZSB7CiAgICAvKioKICAgICAqIE1heGltdW0gc3ViZGl2aXNpb24gZGVwdGgKICAgICAqIEBkZWZhdWx0IDgKICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIGFhYmIgVGhlIHRvdGFsIEFBQkIgb2YgdGhlIHRyZWUKICAgICAqLwogICAgY29uc3RydWN0b3IoYWFiYiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBzdXBlcih7CiAgICAgICAgcm9vdDogbnVsbCwKICAgICAgICBhYWJiCiAgICAgIH0pOwogICAgICB0aGlzLm1heERlcHRoID0gdHlwZW9mIG9wdGlvbnMubWF4RGVwdGggIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhEZXB0aCA6IDg7CiAgICB9CgogIH0KICBjb25zdCBoYWxmRGlhZ29uYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcEFBQkIgPSBuZXcgQUFCQigpOwoKICAvKioKICAgKiBUcmltZXNoLgogICAqIEBleGFtcGxlCiAgICogICAgIC8vIEhvdyB0byBtYWtlIGEgbWVzaCB3aXRoIGEgc2luZ2xlIHRyaWFuZ2xlCiAgICogICAgIGNvbnN0IHZlcnRpY2VzID0gWwogICAqICAgICAgICAgMCwgMCwgMCwgLy8gdmVydGV4IDAKICAgKiAgICAgICAgIDEsIDAsIDAsIC8vIHZlcnRleCAxCiAgICogICAgICAgICAwLCAxLCAwICAvLyB2ZXJ0ZXggMgogICAqICAgICBdCiAgICogICAgIGNvbnN0IGluZGljZXMgPSBbCiAgICogICAgICAgICAwLCAxLCAyICAvLyB0cmlhbmdsZSAwCiAgICogICAgIF0KICAgKiAgICAgY29uc3QgdHJpbWVzaFNoYXBlID0gbmV3IENBTk5PTi5UcmltZXNoKHZlcnRpY2VzLCBpbmRpY2VzKQogICAqLwogIGNsYXNzIFRyaW1lc2ggZXh0ZW5kcyBTaGFwZSB7CiAgICAvKioKICAgICAqIHZlcnRpY2VzCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFycmF5IG9mIGludGVnZXJzLCBpbmRpY2F0aW5nIHdoaWNoIHZlcnRpY2VzIGVhY2ggdHJpYW5nbGUgY29uc2lzdHMgb2YuIFRoZSBsZW5ndGggb2YgdGhpcyBhcnJheSBpcyB0aHVzIDMgdGltZXMgdGhlIG51bWJlciBvZiB0cmlhbmdsZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBub3JtYWxzIGRhdGEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBsb2NhbCBBQUJCIG9mIHRoZSBtZXNoLgogICAgICovCgogICAgLyoqCiAgICAgKiBSZWZlcmVuY2VzIHRvIHZlcnRleCBwYWlycywgbWFraW5nIHVwIGFsbCB1bmlxdWUgZWRnZXMgaW4gdGhlIHRyaW1lc2guCiAgICAgKi8KCiAgICAvKioKICAgICAqIExvY2FsIHNjYWxpbmcgb2YgdGhlIG1lc2guIFVzZSAuc2V0U2NhbGUoKSB0byBzZXQgaXQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBpbmRleGVkIHRyaWFuZ2xlcy4gVXNlIC51cGRhdGVUcmVlKCkgdG8gdXBkYXRlIGl0LgogICAgICovCiAgICBjb25zdHJ1Y3Rvcih2ZXJ0aWNlcywgaW5kaWNlcykgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuVFJJTUVTSAogICAgICB9KTsKICAgICAgdGhpcy52ZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkodmVydGljZXMpOwogICAgICB0aGlzLmluZGljZXMgPSBuZXcgSW50MTZBcnJheShpbmRpY2VzKTsKICAgICAgdGhpcy5ub3JtYWxzID0gbmV3IEZsb2F0MzJBcnJheShpbmRpY2VzLmxlbmd0aCk7CiAgICAgIHRoaXMuYWFiYiA9IG5ldyBBQUJCKCk7CiAgICAgIHRoaXMuZWRnZXMgPSBudWxsOwogICAgICB0aGlzLnNjYWxlID0gbmV3IFZlYzMoMSwgMSwgMSk7CiAgICAgIHRoaXMudHJlZSA9IG5ldyBPY3RyZWUoKTsKICAgICAgdGhpcy51cGRhdGVFZGdlcygpOwogICAgICB0aGlzLnVwZGF0ZU5vcm1hbHMoKTsKICAgICAgdGhpcy51cGRhdGVBQUJCKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgICAgdGhpcy51cGRhdGVUcmVlKCk7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZVRyZWUKICAgICAqLwoKCiAgICB1cGRhdGVUcmVlKCkgewogICAgICBjb25zdCB0cmVlID0gdGhpcy50cmVlOwogICAgICB0cmVlLnJlc2V0KCk7CiAgICAgIHRyZWUuYWFiYi5jb3B5KHRoaXMuYWFiYik7CiAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy5zY2FsZTsgLy8gVGhlIGxvY2FsIG1lc2ggQUFCQiBpcyBzY2FsZWQsIGJ1dCB0aGUgb2N0cmVlIEFBQkIgc2hvdWxkIGJlIHVuc2NhbGVkCgogICAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC54ICo9IDEgLyBzY2FsZS54OwogICAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC55ICo9IDEgLyBzY2FsZS55OwogICAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC56ICo9IDEgLyBzY2FsZS56OwogICAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC54ICo9IDEgLyBzY2FsZS54OwogICAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC55ICo9IDEgLyBzY2FsZS55OwogICAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC56ICo9IDEgLyBzY2FsZS56OyAvLyBJbnNlcnQgYWxsIHRyaWFuZ2xlcwoKICAgICAgY29uc3QgdHJpYW5nbGVBQUJCID0gbmV3IEFBQkIoKTsKICAgICAgY29uc3QgYSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGIgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBjID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcG9pbnRzID0gW2EsIGIsIGNdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgLy90aGlzLmdldFRyaWFuZ2xlVmVydGljZXMoaSwgYSwgYiwgYyk7CiAgICAgICAgLy8gR2V0IHVuc2NhbGVkIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgY29uc3QgaTMgPSBpICogMzsKCiAgICAgICAgdGhpcy5fZ2V0VW5zY2FsZWRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzXSwgYSk7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDFdLCBiKTsKCiAgICAgICAgdGhpcy5fZ2V0VW5zY2FsZWRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMl0sIGMpOwoKICAgICAgICB0cmlhbmdsZUFBQkIuc2V0RnJvbVBvaW50cyhwb2ludHMpOwogICAgICAgIHRyZWUuaW5zZXJ0KHRyaWFuZ2xlQUFCQiwgaSk7CiAgICAgIH0KCiAgICAgIHRyZWUucmVtb3ZlRW1wdHlOb2RlcygpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdHJpYW5nbGVzIGluIGEgbG9jYWwgQUFCQiBmcm9tIHRoZSB0cmltZXNoLgogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSBvZiBpbnRlZ2VycywgcmVmZXJlbmNpbmcgdGhlIHF1ZXJpZWQgdHJpYW5nbGVzLgogICAgICovCgoKICAgIGdldFRyaWFuZ2xlc0luQUFCQihhYWJiLCByZXN1bHQpIHsKICAgICAgdW5zY2FsZWRBQUJCLmNvcHkoYWFiYik7IC8vIFNjYWxlIGl0IHRvIGxvY2FsCgogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7CiAgICAgIGNvbnN0IGlzeCA9IHNjYWxlLng7CiAgICAgIGNvbnN0IGlzeSA9IHNjYWxlLnk7CiAgICAgIGNvbnN0IGlzeiA9IHNjYWxlLno7CiAgICAgIGNvbnN0IGwgPSB1bnNjYWxlZEFBQkIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IHVuc2NhbGVkQUFCQi51cHBlckJvdW5kOwogICAgICBsLnggLz0gaXN4OwogICAgICBsLnkgLz0gaXN5OwogICAgICBsLnogLz0gaXN6OwogICAgICB1LnggLz0gaXN4OwogICAgICB1LnkgLz0gaXN5OwogICAgICB1LnogLz0gaXN6OwogICAgICByZXR1cm4gdGhpcy50cmVlLmFhYmJRdWVyeSh1bnNjYWxlZEFBQkIsIHJlc3VsdCk7CiAgICB9CiAgICAvKioKICAgICAqIHNldFNjYWxlCiAgICAgKi8KCgogICAgc2V0U2NhbGUoc2NhbGUpIHsKICAgICAgY29uc3Qgd2FzVW5pZm9ybSA9IHRoaXMuc2NhbGUueCA9PT0gdGhpcy5zY2FsZS55ICYmIHRoaXMuc2NhbGUueSA9PT0gdGhpcy5zY2FsZS56OwogICAgICBjb25zdCBpc1VuaWZvcm0gPSBzY2FsZS54ID09PSBzY2FsZS55ICYmIHNjYWxlLnkgPT09IHNjYWxlLno7CgogICAgICBpZiAoISh3YXNVbmlmb3JtICYmIGlzVW5pZm9ybSkpIHsKICAgICAgICAvLyBOb24tdW5pZm9ybSBzY2FsaW5nLiBOZWVkIHRvIHVwZGF0ZSBub3JtYWxzLgogICAgICAgIHRoaXMudXBkYXRlTm9ybWFscygpOwogICAgICB9CgogICAgICB0aGlzLnNjYWxlLmNvcHkoc2NhbGUpOwogICAgICB0aGlzLnVwZGF0ZUFBQkIoKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlIHRoZSBub3JtYWxzIG9mIHRoZSBmYWNlcy4gV2lsbCBzYXZlIGluIHRoZSBgLm5vcm1hbHNgIGFycmF5LgogICAgICovCgoKICAgIHVwZGF0ZU5vcm1hbHMoKSB7CiAgICAgIGNvbnN0IG4gPSBjb21wdXRlTm9ybWFsc19uOyAvLyBHZW5lcmF0ZSBub3JtYWxzCgogICAgICBjb25zdCBub3JtYWxzID0gdGhpcy5ub3JtYWxzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgICBjb25zdCBhID0gdGhpcy5pbmRpY2VzW2kzXTsKICAgICAgICBjb25zdCBiID0gdGhpcy5pbmRpY2VzW2kzICsgMV07CiAgICAgICAgY29uc3QgYyA9IHRoaXMuaW5kaWNlc1tpMyArIDJdOwogICAgICAgIHRoaXMuZ2V0VmVydGV4KGEsIHZhKTsKICAgICAgICB0aGlzLmdldFZlcnRleChiLCB2Yik7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoYywgdmMpOwogICAgICAgIFRyaW1lc2guY29tcHV0ZU5vcm1hbCh2YiwgdmEsIHZjLCBuKTsKICAgICAgICBub3JtYWxzW2kzXSA9IG4ueDsKICAgICAgICBub3JtYWxzW2kzICsgMV0gPSBuLnk7CiAgICAgICAgbm9ybWFsc1tpMyArIDJdID0gbi56OwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYC5lZGdlc2AgcHJvcGVydHkKICAgICAqLwoKCiAgICB1cGRhdGVFZGdlcygpIHsKICAgICAgY29uc3QgZWRnZXMgPSB7fTsKCiAgICAgIGNvbnN0IGFkZCA9IChhLCBiKSA9PiB7CiAgICAgICAgY29uc3Qga2V5ID0gYSA8IGIgPyBgJHthfV8ke2J9YCA6IGAke2J9XyR7YX1gOwogICAgICAgIGVkZ2VzW2tleV0gPSB0cnVlOwogICAgICB9OwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgICBjb25zdCBhID0gdGhpcy5pbmRpY2VzW2kzXTsKICAgICAgICBjb25zdCBiID0gdGhpcy5pbmRpY2VzW2kzICsgMV07CiAgICAgICAgY29uc3QgYyA9IHRoaXMuaW5kaWNlc1tpMyArIDJdOwogICAgICAgIGFkZChhLCBiKTsKICAgICAgICBhZGQoYiwgYyk7CiAgICAgICAgYWRkKGMsIGEpOwogICAgICB9CgogICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZWRnZXMpOwogICAgICB0aGlzLmVkZ2VzID0gbmV3IEludDE2QXJyYXkoa2V5cy5sZW5ndGggKiAyKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGluZGljZXMgPSBrZXlzW2ldLnNwbGl0KCdfJyk7CiAgICAgICAgdGhpcy5lZGdlc1syICogaV0gPSBwYXJzZUludChpbmRpY2VzWzBdLCAxMCk7CiAgICAgICAgdGhpcy5lZGdlc1syICogaSArIDFdID0gcGFyc2VJbnQoaW5kaWNlc1sxXSwgMTApOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBlZGdlIHZlcnRleAogICAgICogQHBhcmFtIGZpcnN0T3JTZWNvbmQgMCBvciAxLCBkZXBlbmRpbmcgb24gd2hpY2ggb25lIG9mIHRoZSB2ZXJ0aWNlcyB5b3UgbmVlZC4KICAgICAqIEBwYXJhbSB2ZXJ0ZXhTdG9yZSBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0CiAgICAgKi8KCgogICAgZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIGZpcnN0T3JTZWNvbmQsIHZlcnRleFN0b3JlKSB7CiAgICAgIGNvbnN0IHZlcnRleEluZGV4ID0gdGhpcy5lZGdlc1tlZGdlSW5kZXggKiAyICsgKGZpcnN0T3JTZWNvbmQgPyAxIDogMCldOwogICAgICB0aGlzLmdldFZlcnRleCh2ZXJ0ZXhJbmRleCwgdmVydGV4U3RvcmUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB2ZWN0b3IgYWxvbmcgYW4gZWRnZS4KICAgICAqLwoKCiAgICBnZXRFZGdlVmVjdG9yKGVkZ2VJbmRleCwgdmVjdG9yU3RvcmUpIHsKICAgICAgY29uc3QgdmEgPSBnZXRFZGdlVmVjdG9yX3ZhOwogICAgICBjb25zdCB2YiA9IGdldEVkZ2VWZWN0b3JfdmI7CiAgICAgIHRoaXMuZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIDAsIHZhKTsKICAgICAgdGhpcy5nZXRFZGdlVmVydGV4KGVkZ2VJbmRleCwgMSwgdmIpOwogICAgICB2Yi52c3ViKHZhLCB2ZWN0b3JTdG9yZSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBmYWNlIG5vcm1hbCBnaXZlbiAzIHZlcnRpY2VzCiAgICAgKi8KCgogICAgc3RhdGljIGNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KSB7CiAgICAgIHZiLnZzdWIodmEsIGFiKTsKICAgICAgdmMudnN1Yih2YiwgY2IpOwogICAgICBjYi5jcm9zcyhhYiwgdGFyZ2V0KTsKCiAgICAgIGlmICghdGFyZ2V0LmlzWmVybygpKSB7CiAgICAgICAgdGFyZ2V0Lm5vcm1hbGl6ZSgpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCB2ZXJ0ZXggaS4KICAgICAqIEByZXR1cm4gVGhlICJvdXQiIHZlY3RvciBvYmplY3QKICAgICAqLwoKCiAgICBnZXRWZXJ0ZXgoaSwgb3V0KSB7CiAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy5zY2FsZTsKCiAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KGksIG91dCk7CgogICAgICBvdXQueCAqPSBzY2FsZS54OwogICAgICBvdXQueSAqPSBzY2FsZS55OwogICAgICBvdXQueiAqPSBzY2FsZS56OwogICAgICByZXR1cm4gb3V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgcmF3IHZlcnRleCBpCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgX2dldFVuc2NhbGVkVmVydGV4KGksIG91dCkgewogICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIHJldHVybiBvdXQuc2V0KHZlcnRpY2VzW2kzXSwgdmVydGljZXNbaTMgKyAxXSwgdmVydGljZXNbaTMgKyAyXSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIHZlcnRleCBmcm9tIHRoZSB0cmltZXNoLHRyYW5zZm9ybWVkIGJ5IHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgcXVhdGVybmlvbi4KICAgICAqIEByZXR1cm4gVGhlICJvdXQiIHZlY3RvciBvYmplY3QKICAgICAqLwoKCiAgICBnZXRXb3JsZFZlcnRleChpLCBwb3MsIHF1YXQsIG91dCkgewogICAgICB0aGlzLmdldFZlcnRleChpLCBvdXQpOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zLCBxdWF0LCBvdXQsIG91dCk7CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgdGhyZWUgdmVydGljZXMgZm9yIHRyaWFuZ2xlIGkuCiAgICAgKi8KCgogICAgZ2V0VHJpYW5nbGVWZXJ0aWNlcyhpLCBhLCBiLCBjKSB7CiAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgIHRoaXMuZ2V0VmVydGV4KHRoaXMuaW5kaWNlc1tpM10sIGEpOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAxXSwgYik7CiAgICAgIHRoaXMuZ2V0VmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDJdLCBjKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFsIG9mIHRyaWFuZ2xlIGkuCiAgICAgKiBAcmV0dXJuIFRoZSAidGFyZ2V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0Tm9ybWFsKGksIHRhcmdldCkgewogICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICByZXR1cm4gdGFyZ2V0LnNldCh0aGlzLm5vcm1hbHNbaTNdLCB0aGlzLm5vcm1hbHNbaTMgKyAxXSwgdGhpcy5ub3JtYWxzW2kzICsgMl0pOwogICAgfQogICAgLyoqCiAgICAgKiBAcmV0dXJuIFRoZSAidGFyZ2V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGJveCBpbmVydGlhCiAgICAgIC8vIEV4YWN0IGluZXJ0aWEgY2FsY3VsYXRpb24gaXMgb3ZlcmtpbGwsIGJ1dCBzZWUgaHR0cDovL2dlb21ldHJpY3Rvb2xzLmNvbS9Eb2N1bWVudGF0aW9uL1BvbHloZWRyYWxNYXNzUHJvcGVydGllcy5wZGYgZm9yIHRoZSBjb3JyZWN0IHdheSB0byBkbyBpdAogICAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIoY2xpX2FhYmIpOwogICAgICBjb25zdCB4ID0gY2xpX2FhYmIudXBwZXJCb3VuZC54IC0gY2xpX2FhYmIubG93ZXJCb3VuZC54OwogICAgICBjb25zdCB5ID0gY2xpX2FhYmIudXBwZXJCb3VuZC55IC0gY2xpX2FhYmIubG93ZXJCb3VuZC55OwogICAgICBjb25zdCB6ID0gY2xpX2FhYmIudXBwZXJCb3VuZC56IC0gY2xpX2FhYmIubG93ZXJCb3VuZC56OwogICAgICByZXR1cm4gdGFyZ2V0LnNldCgxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeiksIDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB4ICogMiAqIHggKyAyICogeiAqIDIgKiB6KSwgMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB4ICogMiAqIHgpKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbG9jYWwgQUFCQiBmb3IgdGhlIHRyaW1lc2gKICAgICAqLwoKCiAgICBjb21wdXRlTG9jYWxBQUJCKGFhYmIpIHsKICAgICAgY29uc3QgbCA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IGFhYmIudXBwZXJCb3VuZDsKICAgICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoOwogICAgICB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCB2ID0gY29tcHV0ZUxvY2FsQUFCQl93b3JsZFZlcnQ7CiAgICAgIHRoaXMuZ2V0VmVydGV4KDAsIHYpOwogICAgICBsLmNvcHkodik7CiAgICAgIHUuY29weSh2KTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBuOyBpKyspIHsKICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTsKCiAgICAgICAgaWYgKHYueCA8IGwueCkgewogICAgICAgICAgbC54ID0gdi54OwogICAgICAgIH0gZWxzZSBpZiAodi54ID4gdS54KSB7CiAgICAgICAgICB1LnggPSB2Lng7CiAgICAgICAgfQoKICAgICAgICBpZiAodi55IDwgbC55KSB7CiAgICAgICAgICBsLnkgPSB2Lnk7CiAgICAgICAgfSBlbHNlIGlmICh2LnkgPiB1LnkpIHsKICAgICAgICAgIHUueSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmICh2LnogPCBsLnopIHsKICAgICAgICAgIGwueiA9IHYuejsKICAgICAgICB9IGVsc2UgaWYgKHYueiA+IHUueikgewogICAgICAgICAgdS56ID0gdi56OwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGAuYWFiYmAgcHJvcGVydHkKICAgICAqLwoKCiAgICB1cGRhdGVBQUJCKCkgewogICAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIodGhpcy5hYWJiKTsKICAgIH0KICAgIC8qKgogICAgICogV2lsbCB1cGRhdGUgdGhlIGAuYm91bmRpbmdTcGhlcmVSYWRpdXNgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXIKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIGNvbnN0IHYgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSB2ZXJ0aWNlcy5sZW5ndGggLyAzOyBpICE9PSBOOyBpKyspIHsKICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTsKICAgICAgICBjb25zdCBub3JtMiA9IHYubGVuZ3RoU3F1YXJlZCgpOwoKICAgICAgICBpZiAobm9ybTIgPiBtYXgyKSB7CiAgICAgICAgICBtYXgyID0gbm9ybTI7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTWF0aC5zcXJ0KG1heDIpOwogICAgfQogICAgLyoqCiAgICAgKiBjYWxjdWxhdGVXb3JsZEFBQkIKICAgICAqLwoKCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICAvKgogICAgICAgICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoIC8gMywKICAgICAgICAgICAgICB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CiAgICAgICAgICBjb25zdCBtaW54LG1pbnksbWlueixtYXh4LG1heHksbWF4ejsKICAgICAgICAgICBjb25zdCB2ID0gdGVtcFdvcmxkVmVydGV4OwogICAgICAgICAgZm9yKGxldCBpPTA7IGk8bjsgaSsrKXsKICAgICAgICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTsKICAgICAgICAgICAgICBxdWF0LnZtdWx0KHYsIHYpOwogICAgICAgICAgICAgIHBvcy52YWRkKHYsIHYpOwogICAgICAgICAgICAgIGlmICh2LnggPCBtaW54IHx8IG1pbng9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtaW54ID0gdi54OwogICAgICAgICAgICAgIH0gZWxzZSBpZih2LnggPiBtYXh4IHx8IG1heHg9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtYXh4ID0gdi54OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgaWYgKHYueSA8IG1pbnkgfHwgbWlueT09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1pbnkgPSB2Lnk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmKHYueSA+IG1heHkgfHwgbWF4eT09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1heHkgPSB2Lnk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICBpZiAodi56IDwgbWlueiB8fCBtaW56PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWlueiA9IHYuejsKICAgICAgICAgICAgICB9IGVsc2UgaWYodi56ID4gbWF4eiB8fCBtYXh6PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWF4eiA9IHYuejsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBtaW4uc2V0KG1pbngsbWlueSxtaW56KTsKICAgICAgICAgIG1heC5zZXQobWF4eCxtYXh5LG1heHopOwogICAgICAgICAgKi8KICAgICAgLy8gRmFzdGVyIGFwcHJveGltYXRpb24gdXNpbmcgbG9jYWwgQUFCQgogICAgICBjb25zdCBmcmFtZSA9IGNhbGN1bGF0ZVdvcmxkQUFCQl9mcmFtZTsKICAgICAgY29uc3QgcmVzdWx0ID0gY2FsY3VsYXRlV29ybGRBQUJCX2FhYmI7CiAgICAgIGZyYW1lLnBvc2l0aW9uID0gcG9zOwogICAgICBmcmFtZS5xdWF0ZXJuaW9uID0gcXVhdDsKICAgICAgdGhpcy5hYWJiLnRvV29ybGRGcmFtZShmcmFtZSwgcmVzdWx0KTsKICAgICAgbWluLmNvcHkocmVzdWx0Lmxvd2VyQm91bmQpOwogICAgICBtYXguY29weShyZXN1bHQudXBwZXJCb3VuZCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhcHByb3hpbWF0ZSB2b2x1bWUKICAgICAqLwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiA0LjAgKiBNYXRoLlBJICogdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyAvIDMuMDsKICAgIH0KICAgIC8qKgogICAgICogQ3JlYXRlIGEgVHJpbWVzaCBpbnN0YW5jZSwgc2hhcGVkIGFzIGEgdG9ydXMuCiAgICAgKi8KCgogICAgc3RhdGljIGNyZWF0ZVRvcnVzKHJhZGl1cywgdHViZSwgcmFkaWFsU2VnbWVudHMsIHR1YnVsYXJTZWdtZW50cywgYXJjKSB7CiAgICAgIGlmIChyYWRpdXMgPT09IHZvaWQgMCkgewogICAgICAgIHJhZGl1cyA9IDE7CiAgICAgIH0KCiAgICAgIGlmICh0dWJlID09PSB2b2lkIDApIHsKICAgICAgICB0dWJlID0gMC41OwogICAgICB9CgogICAgICBpZiAocmFkaWFsU2VnbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIHJhZGlhbFNlZ21lbnRzID0gODsKICAgICAgfQoKICAgICAgaWYgKHR1YnVsYXJTZWdtZW50cyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdHVidWxhclNlZ21lbnRzID0gNjsKICAgICAgfQoKICAgICAgaWYgKGFyYyA9PT0gdm9pZCAwKSB7CiAgICAgICAgYXJjID0gTWF0aC5QSSAqIDI7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRpY2VzID0gW107CiAgICAgIGNvbnN0IGluZGljZXMgPSBbXTsKCiAgICAgIGZvciAobGV0IGogPSAwOyBqIDw9IHJhZGlhbFNlZ21lbnRzOyBqKyspIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSB0dWJ1bGFyU2VnbWVudHM7IGkrKykgewogICAgICAgICAgY29uc3QgdSA9IGkgLyB0dWJ1bGFyU2VnbWVudHMgKiBhcmM7CiAgICAgICAgICBjb25zdCB2ID0gaiAvIHJhZGlhbFNlZ21lbnRzICogTWF0aC5QSSAqIDI7CiAgICAgICAgICBjb25zdCB4ID0gKHJhZGl1cyArIHR1YmUgKiBNYXRoLmNvcyh2KSkgKiBNYXRoLmNvcyh1KTsKICAgICAgICAgIGNvbnN0IHkgPSAocmFkaXVzICsgdHViZSAqIE1hdGguY29zKHYpKSAqIE1hdGguc2luKHUpOwogICAgICAgICAgY29uc3QgeiA9IHR1YmUgKiBNYXRoLnNpbih2KTsKICAgICAgICAgIHZlcnRpY2VzLnB1c2goeCwgeSwgeik7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKGxldCBqID0gMTsgaiA8PSByYWRpYWxTZWdtZW50czsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gdHVidWxhclNlZ21lbnRzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IGEgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiBqICsgaSAtIDE7CiAgICAgICAgICBjb25zdCBiID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogKGogLSAxKSArIGkgLSAxOwogICAgICAgICAgY29uc3QgYyA9ICh0dWJ1bGFyU2VnbWVudHMgKyAxKSAqIChqIC0gMSkgKyBpOwogICAgICAgICAgY29uc3QgZCA9ICh0dWJ1bGFyU2VnbWVudHMgKyAxKSAqIGogKyBpOwogICAgICAgICAgaW5kaWNlcy5wdXNoKGEsIGIsIGQpOwogICAgICAgICAgaW5kaWNlcy5wdXNoKGIsIGMsIGQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBUcmltZXNoKHZlcnRpY2VzLCBpbmRpY2VzKTsKICAgIH0KCiAgfQogIGNvbnN0IGNvbXB1dGVOb3JtYWxzX24gPSBuZXcgVmVjMygpOwogIGNvbnN0IHVuc2NhbGVkQUFCQiA9IG5ldyBBQUJCKCk7CiAgY29uc3QgZ2V0RWRnZVZlY3Rvcl92YSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0RWRnZVZlY3Rvcl92YiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2IgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFiID0gbmV3IFZlYzMoKTsKICBjb25zdCB2YSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHZjID0gbmV3IFZlYzMoKTsKICBjb25zdCBjbGlfYWFiYiA9IG5ldyBBQUJCKCk7CiAgY29uc3QgY29tcHV0ZUxvY2FsQUFCQl93b3JsZFZlcnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNhbGN1bGF0ZVdvcmxkQUFCQl9mcmFtZSA9IG5ldyBUcmFuc2Zvcm0oKTsKICBjb25zdCBjYWxjdWxhdGVXb3JsZEFBQkJfYWFiYiA9IG5ldyBBQUJCKCk7CgogIC8qKgogICAqIENvbnN0cmFpbnQgZXF1YXRpb24gc29sdmVyIGJhc2UgY2xhc3MuCiAgICovCiAgY2xhc3MgU29sdmVyIHsKICAgIC8qKgogICAgICogQWxsIGVxdWF0aW9ucyB0byBiZSBzb2x2ZWQKICAgICAqLwoKICAgIC8qKgogICAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuZXF1YXRpb25zID0gW107CiAgICB9CiAgICAvKioKICAgICAqIFNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzc2VzIQogICAgICogQHRvZG8gdXNlIGFic3RyYWN0CiAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZAogICAgICovCgoKICAgIHNvbHZlKGR0LCB3b3JsZCkgewogICAgICByZXR1cm4gKC8vIFNob3VsZCByZXR1cm4gdGhlIG51bWJlciBvZiBpdGVyYXRpb25zIGRvbmUhCiAgICAgICAgMAogICAgICApOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYW4gZXF1YXRpb24KICAgICAqLwoKCiAgICBhZGRFcXVhdGlvbihlcSkgewogICAgICBpZiAoZXEuZW5hYmxlZCAmJiAhZXEuYmkuaXNUcmlnZ2VyICYmICFlcS5iai5pc1RyaWdnZXIpIHsKICAgICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGVxKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgYW4gZXF1YXRpb24KICAgICAqLwoKCiAgICByZW1vdmVFcXVhdGlvbihlcSkgewogICAgICBjb25zdCBlcXMgPSB0aGlzLmVxdWF0aW9uczsKICAgICAgY29uc3QgaSA9IGVxcy5pbmRleE9mKGVxKTsKCiAgICAgIGlmIChpICE9PSAtMSkgewogICAgICAgIGVxcy5zcGxpY2UoaSwgMSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQWRkIGFsbCBlcXVhdGlvbnMKICAgICAqLwoKCiAgICByZW1vdmVBbGxFcXVhdGlvbnMoKSB7CiAgICAgIHRoaXMuZXF1YXRpb25zLmxlbmd0aCA9IDA7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQ29uc3RyYWludCBlcXVhdGlvbiBHYXVzcy1TZWlkZWwgc29sdmVyLgogICAqIEB0b2RvIFRoZSBzcG9vayBwYXJhbWV0ZXJzIHNob3VsZCBiZSBzcGVjaWZpZWQgZm9yIGVhY2ggY29uc3RyYWludCwgbm90IGdsb2JhbGx5LgogICAqIEBzZWUgaHR0cHM6Ly93d3c4LmNzLnVtdS5zZS9rdXJzZXIvNURWMDU4L1ZUMDkvbGVjdHVyZXMvc3Bvb2tub3Rlcy5wZGYKICAgKi8KICBjbGFzcyBHU1NvbHZlciBleHRlbmRzIFNvbHZlciB7CiAgICAvKioKICAgICAqIFRoZSBudW1iZXIgb2Ygc29sdmVyIGl0ZXJhdGlvbnMgZGV0ZXJtaW5lcyBxdWFsaXR5IG9mIHRoZSBjb25zdHJhaW50cyBpbiB0aGUgd29ybGQuCiAgICAgKiBUaGUgbW9yZSBpdGVyYXRpb25zLCB0aGUgbW9yZSBjb3JyZWN0IHNpbXVsYXRpb24uIE1vcmUgaXRlcmF0aW9ucyBuZWVkIG1vcmUgY29tcHV0YXRpb25zIHRob3VnaC4gSWYgeW91IGhhdmUgYSBsYXJnZSBncmF2aXR5IGZvcmNlIGluIHlvdXIgd29ybGQsIHlvdSB3aWxsIG5lZWQgbW9yZSBpdGVyYXRpb25zLgogICAgICovCgogICAgLyoqCiAgICAgKiBXaGVuIHRvbGVyYW5jZSBpcyByZWFjaGVkLCB0aGUgc3lzdGVtIGlzIGFzc3VtZWQgdG8gYmUgY29udmVyZ2VkLgogICAgICovCgogICAgLyoqCiAgICAgKiBAdG9kbyByZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvcgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5pdGVyYXRpb25zID0gMTA7CiAgICAgIHRoaXMudG9sZXJhbmNlID0gMWUtNzsKICAgIH0KICAgIC8qKgogICAgICogU29sdmUKICAgICAqIEByZXR1cm4gbnVtYmVyIG9mIGl0ZXJhdGlvbnMgcGVyZm9ybWVkCiAgICAgKi8KCgogICAgc29sdmUoZHQsIHdvcmxkKSB7CiAgICAgIGxldCBpdGVyID0gMDsKICAgICAgY29uc3QgbWF4SXRlciA9IHRoaXMuaXRlcmF0aW9uczsKICAgICAgY29uc3QgdG9sU3F1YXJlZCA9IHRoaXMudG9sZXJhbmNlICogdGhpcy50b2xlcmFuY2U7CiAgICAgIGNvbnN0IGVxdWF0aW9ucyA9IHRoaXMuZXF1YXRpb25zOwogICAgICBjb25zdCBOZXEgPSBlcXVhdGlvbnMubGVuZ3RoOwogICAgICBjb25zdCBib2RpZXMgPSB3b3JsZC5ib2RpZXM7CiAgICAgIGNvbnN0IE5ib2RpZXMgPSBib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBoID0gZHQ7CiAgICAgIGxldCBCOwogICAgICBsZXQgaW52QzsKICAgICAgbGV0IGRlbHRhbGFtYmRhOwogICAgICBsZXQgZGVsdGFsYW1iZGFUb3Q7CiAgICAgIGxldCBHV2xhbWJkYTsKICAgICAgbGV0IGxhbWJkYWo7IC8vIFVwZGF0ZSBzb2x2ZSBtYXNzCgogICAgICBpZiAoTmVxICE9PSAwKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgICAgYm9kaWVzW2ldLnVwZGF0ZVNvbHZlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgICB9CiAgICAgIH0gLy8gVGhpbmdzIHRoYXQgZG8gbm90IGNoYW5nZSBkdXJpbmcgaXRlcmF0aW9uIGNhbiBiZSBjb21wdXRlZCBvbmNlCgoKICAgICAgY29uc3QgaW52Q3MgPSBHU1NvbHZlcl9zb2x2ZV9pbnZDczsKICAgICAgY29uc3QgQnMgPSBHU1NvbHZlcl9zb2x2ZV9CczsKICAgICAgY29uc3QgbGFtYmRhID0gR1NTb2x2ZXJfc29sdmVfbGFtYmRhOwogICAgICBpbnZDcy5sZW5ndGggPSBOZXE7CiAgICAgIEJzLmxlbmd0aCA9IE5lcTsKICAgICAgbGFtYmRhLmxlbmd0aCA9IE5lcTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOZXE7IGkrKykgewogICAgICAgIGNvbnN0IGMgPSBlcXVhdGlvbnNbaV07CiAgICAgICAgbGFtYmRhW2ldID0gMC4wOwogICAgICAgIEJzW2ldID0gYy5jb21wdXRlQihoKTsKICAgICAgICBpbnZDc1tpXSA9IDEuMCAvIGMuY29tcHV0ZUMoKTsKICAgICAgfQoKICAgICAgaWYgKE5lcSAhPT0gMCkgewogICAgICAgIC8vIFJlc2V0IHZsYW1iZGEKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7CiAgICAgICAgICBjb25zdCBiID0gYm9kaWVzW2ldOwogICAgICAgICAgY29uc3QgdmxhbWJkYSA9IGIudmxhbWJkYTsKICAgICAgICAgIGNvbnN0IHdsYW1iZGEgPSBiLndsYW1iZGE7CiAgICAgICAgICB2bGFtYmRhLnNldCgwLCAwLCAwKTsKICAgICAgICAgIHdsYW1iZGEuc2V0KDAsIDAsIDApOwogICAgICAgIH0gLy8gSXRlcmF0ZSBvdmVyIGVxdWF0aW9ucwoKCiAgICAgICAgZm9yIChpdGVyID0gMDsgaXRlciAhPT0gbWF4SXRlcjsgaXRlcisrKSB7CiAgICAgICAgICAvLyBBY2N1bXVsYXRlIHRoZSB0b3RhbCBlcnJvciBmb3IgZWFjaCBpdGVyYXRpb24uCiAgICAgICAgICBkZWx0YWxhbWJkYVRvdCA9IDAuMDsKCiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gTmVxOyBqKyspIHsKICAgICAgICAgICAgY29uc3QgYyA9IGVxdWF0aW9uc1tqXTsgLy8gQ29tcHV0ZSBpdGVyYXRpb24KCiAgICAgICAgICAgIEIgPSBCc1tqXTsKICAgICAgICAgICAgaW52QyA9IGludkNzW2pdOwogICAgICAgICAgICBsYW1iZGFqID0gbGFtYmRhW2pdOwogICAgICAgICAgICBHV2xhbWJkYSA9IGMuY29tcHV0ZUdXbGFtYmRhKCk7CiAgICAgICAgICAgIGRlbHRhbGFtYmRhID0gaW52QyAqIChCIC0gR1dsYW1iZGEgLSBjLmVwcyAqIGxhbWJkYWopOyAvLyBDbGFtcCBpZiB3ZSBhcmUgbm90IHdpdGhpbiB0aGUgbWluL21heCBpbnRlcnZhbAoKICAgICAgICAgICAgaWYgKGxhbWJkYWogKyBkZWx0YWxhbWJkYSA8IGMubWluRm9yY2UpIHsKICAgICAgICAgICAgICBkZWx0YWxhbWJkYSA9IGMubWluRm9yY2UgLSBsYW1iZGFqOwogICAgICAgICAgICB9IGVsc2UgaWYgKGxhbWJkYWogKyBkZWx0YWxhbWJkYSA+IGMubWF4Rm9yY2UpIHsKICAgICAgICAgICAgICBkZWx0YWxhbWJkYSA9IGMubWF4Rm9yY2UgLSBsYW1iZGFqOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsYW1iZGFbal0gKz0gZGVsdGFsYW1iZGE7CiAgICAgICAgICAgIGRlbHRhbGFtYmRhVG90ICs9IGRlbHRhbGFtYmRhID4gMC4wID8gZGVsdGFsYW1iZGEgOiAtZGVsdGFsYW1iZGE7IC8vIGFicyhkZWx0YWxhbWJkYSkKCiAgICAgICAgICAgIGMuYWRkVG9XbGFtYmRhKGRlbHRhbGFtYmRhKTsKICAgICAgICAgIH0gLy8gSWYgdGhlIHRvdGFsIGVycm9yIGlzIHNtYWxsIGVub3VnaCAtIHN0b3AgaXRlcmF0ZQoKCiAgICAgICAgICBpZiAoZGVsdGFsYW1iZGFUb3QgKiBkZWx0YWxhbWJkYVRvdCA8IHRvbFNxdWFyZWQpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBBZGQgcmVzdWx0IHRvIHZlbG9jaXR5CgoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7CiAgICAgICAgICBjb25zdCBiID0gYm9kaWVzW2ldOwogICAgICAgICAgY29uc3QgdiA9IGIudmVsb2NpdHk7CiAgICAgICAgICBjb25zdCB3ID0gYi5hbmd1bGFyVmVsb2NpdHk7CiAgICAgICAgICBiLnZsYW1iZGEudm11bChiLmxpbmVhckZhY3RvciwgYi52bGFtYmRhKTsKICAgICAgICAgIHYudmFkZChiLnZsYW1iZGEsIHYpOwogICAgICAgICAgYi53bGFtYmRhLnZtdWwoYi5hbmd1bGFyRmFjdG9yLCBiLndsYW1iZGEpOwogICAgICAgICAgdy52YWRkKGIud2xhbWJkYSwgdyk7CiAgICAgICAgfSAvLyBTZXQgdGhlIGAubXVsdGlwbGllcmAgcHJvcGVydHkgb2YgZWFjaCBlcXVhdGlvbgoKCiAgICAgICAgbGV0IGwgPSBlcXVhdGlvbnMubGVuZ3RoOwogICAgICAgIGNvbnN0IGludkR0ID0gMSAvIGg7CgogICAgICAgIHdoaWxlIChsLS0pIHsKICAgICAgICAgIGVxdWF0aW9uc1tsXS5tdWx0aXBsaWVyID0gbGFtYmRhW2xdICogaW52RHQ7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gaXRlcjsKICAgIH0KCiAgfSAvLyBKdXN0IHRlbXBvcmFyeSBudW1iZXIgaG9sZGVycyB0aGF0IHdlIHdhbnQgdG8gcmV1c2UgZWFjaCBpdGVyYXRpb24uCgogIGNvbnN0IEdTU29sdmVyX3NvbHZlX2xhbWJkYSA9IFtdOwogIGNvbnN0IEdTU29sdmVyX3NvbHZlX2ludkNzID0gW107CiAgY29uc3QgR1NTb2x2ZXJfc29sdmVfQnMgPSBbXTsKCiAgLyoqCiAgICogU3BsaXRzIHRoZSBlcXVhdGlvbnMgaW50byBpc2xhbmRzIGFuZCBzb2x2ZXMgdGhlbSBpbmRlcGVuZGVudGx5LiBDYW4gaW1wcm92ZSBwZXJmb3JtYW5jZS4KICAgKi8KICBjbGFzcyBTcGxpdFNvbHZlciBleHRlbmRzIFNvbHZlciB7CiAgICAvKioKICAgICAqIFRoZSBudW1iZXIgb2Ygc29sdmVyIGl0ZXJhdGlvbnMgZGV0ZXJtaW5lcyBxdWFsaXR5IG9mIHRoZSBjb25zdHJhaW50cyBpbiB0aGUgd29ybGQuIFRoZSBtb3JlIGl0ZXJhdGlvbnMsIHRoZSBtb3JlIGNvcnJlY3Qgc2ltdWxhdGlvbi4gTW9yZSBpdGVyYXRpb25zIG5lZWQgbW9yZSBjb21wdXRhdGlvbnMgdGhvdWdoLiBJZiB5b3UgaGF2ZSBhIGxhcmdlIGdyYXZpdHkgZm9yY2UgaW4geW91ciB3b3JsZCwgeW91IHdpbGwgbmVlZCBtb3JlIGl0ZXJhdGlvbnMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZW4gdG9sZXJhbmNlIGlzIHJlYWNoZWQsIHRoZSBzeXN0ZW0gaXMgYXNzdW1lZCB0byBiZSBjb252ZXJnZWQuCiAgICAgKi8KCiAgICAvKiogc3Vic29sdmVyICovCiAgICBjb25zdHJ1Y3RvcihzdWJzb2x2ZXIpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5pdGVyYXRpb25zID0gMTA7CiAgICAgIHRoaXMudG9sZXJhbmNlID0gMWUtNzsKICAgICAgdGhpcy5zdWJzb2x2ZXIgPSBzdWJzb2x2ZXI7CiAgICAgIHRoaXMubm9kZXMgPSBbXTsKICAgICAgdGhpcy5ub2RlUG9vbCA9IFtdOyAvLyBDcmVhdGUgbmVlZGVkIG5vZGVzLCByZXVzZSBpZiBwb3NzaWJsZQoKICAgICAgd2hpbGUgKHRoaXMubm9kZVBvb2wubGVuZ3RoIDwgMTI4KSB7CiAgICAgICAgdGhpcy5ub2RlUG9vbC5wdXNoKHRoaXMuY3JlYXRlTm9kZSgpKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBjcmVhdGVOb2RlCiAgICAgKi8KCgogICAgY3JlYXRlTm9kZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBib2R5OiBudWxsLAogICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICBlcXM6IFtdLAogICAgICAgIHZpc2l0ZWQ6IGZhbHNlCiAgICAgIH07CiAgICB9CiAgICAvKioKICAgICAqIFNvbHZlIHRoZSBzdWJzeXN0ZW1zCiAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZAogICAgICovCgoKICAgIHNvbHZlKGR0LCB3b3JsZCkgewogICAgICBjb25zdCBub2RlcyA9IFNwbGl0U29sdmVyX3NvbHZlX25vZGVzOwogICAgICBjb25zdCBub2RlUG9vbCA9IHRoaXMubm9kZVBvb2w7CiAgICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllczsKICAgICAgY29uc3QgZXF1YXRpb25zID0gdGhpcy5lcXVhdGlvbnM7CiAgICAgIGNvbnN0IE5lcSA9IGVxdWF0aW9ucy5sZW5ndGg7CiAgICAgIGNvbnN0IE5ib2RpZXMgPSBib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBzdWJzb2x2ZXIgPSB0aGlzLnN1YnNvbHZlcjsgLy8gQ3JlYXRlIG5lZWRlZCBub2RlcywgcmV1c2UgaWYgcG9zc2libGUKCiAgICAgIHdoaWxlIChub2RlUG9vbC5sZW5ndGggPCBOYm9kaWVzKSB7CiAgICAgICAgbm9kZVBvb2wucHVzaCh0aGlzLmNyZWF0ZU5vZGUoKSk7CiAgICAgIH0KCiAgICAgIG5vZGVzLmxlbmd0aCA9IE5ib2RpZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE5ib2RpZXM7IGkrKykgewogICAgICAgIG5vZGVzW2ldID0gbm9kZVBvb2xbaV07CiAgICAgIH0gLy8gUmVzZXQgbm9kZSB2YWx1ZXMKCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7CiAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldOwogICAgICAgIG5vZGUuYm9keSA9IGJvZGllc1tpXTsKICAgICAgICBub2RlLmNoaWxkcmVuLmxlbmd0aCA9IDA7CiAgICAgICAgbm9kZS5lcXMubGVuZ3RoID0gMDsKICAgICAgICBub2RlLnZpc2l0ZWQgPSBmYWxzZTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IE5lcTsgaysrKSB7CiAgICAgICAgY29uc3QgZXEgPSBlcXVhdGlvbnNba107CiAgICAgICAgY29uc3QgaSA9IGJvZGllcy5pbmRleE9mKGVxLmJpKTsKICAgICAgICBjb25zdCBqID0gYm9kaWVzLmluZGV4T2YoZXEuYmopOwogICAgICAgIGNvbnN0IG5pID0gbm9kZXNbaV07CiAgICAgICAgY29uc3QgbmogPSBub2Rlc1tqXTsKICAgICAgICBuaS5jaGlsZHJlbi5wdXNoKG5qKTsKICAgICAgICBuaS5lcXMucHVzaChlcSk7CiAgICAgICAgbmouY2hpbGRyZW4ucHVzaChuaSk7CiAgICAgICAgbmouZXFzLnB1c2goZXEpOwogICAgICB9CgogICAgICBsZXQgY2hpbGQ7CiAgICAgIGxldCBuID0gMDsKICAgICAgbGV0IGVxcyA9IFNwbGl0U29sdmVyX3NvbHZlX2VxczsKICAgICAgc3Vic29sdmVyLnRvbGVyYW5jZSA9IHRoaXMudG9sZXJhbmNlOwogICAgICBzdWJzb2x2ZXIuaXRlcmF0aW9ucyA9IHRoaXMuaXRlcmF0aW9uczsKICAgICAgY29uc3QgZHVtbXlXb3JsZCA9IFNwbGl0U29sdmVyX3NvbHZlX2R1bW15V29ybGQ7CgogICAgICB3aGlsZSAoY2hpbGQgPSBnZXRVbnZpc2l0ZWROb2RlKG5vZGVzKSkgewogICAgICAgIGVxcy5sZW5ndGggPSAwOwogICAgICAgIGR1bW15V29ybGQuYm9kaWVzLmxlbmd0aCA9IDA7CiAgICAgICAgYmZzKGNoaWxkLCB2aXNpdEZ1bmMsIGR1bW15V29ybGQuYm9kaWVzLCBlcXMpOwogICAgICAgIGNvbnN0IE5lcXMgPSBlcXMubGVuZ3RoOwogICAgICAgIGVxcyA9IGVxcy5zb3J0KHNvcnRCeUlkKTsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5lcXM7IGkrKykgewogICAgICAgICAgc3Vic29sdmVyLmFkZEVxdWF0aW9uKGVxc1tpXSk7CiAgICAgICAgfQoKICAgICAgICBzdWJzb2x2ZXIuc29sdmUoZHQsIGR1bW15V29ybGQpOwogICAgICAgIHN1YnNvbHZlci5yZW1vdmVBbGxFcXVhdGlvbnMoKTsKICAgICAgICBuKys7CiAgICAgIH0KCiAgICAgIHJldHVybiBuOwogICAgfQoKICB9IC8vIFJldHVybnMgdGhlIG51bWJlciBvZiBzdWJzeXN0ZW1zCgogIGNvbnN0IFNwbGl0U29sdmVyX3NvbHZlX25vZGVzID0gW107IC8vIEFsbCBhbGxvY2F0ZWQgbm9kZSBvYmplY3RzCgogIGNvbnN0IFNwbGl0U29sdmVyX3NvbHZlX2VxcyA9IFtdOyAvLyBUZW1wIGFycmF5CgogIGNvbnN0IFNwbGl0U29sdmVyX3NvbHZlX2R1bW15V29ybGQgPSB7CiAgICBib2RpZXM6IFtdCiAgfTsgLy8gVGVtcCBvYmplY3QKCiAgY29uc3QgU1RBVElDID0gQm9keS5TVEFUSUM7CgogIGZ1bmN0aW9uIGdldFVudmlzaXRlZE5vZGUobm9kZXMpIHsKICAgIGNvbnN0IE5ub2RlcyA9IG5vZGVzLmxlbmd0aDsKCiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTm5vZGVzOyBpKyspIHsKICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldOwoKICAgICAgaWYgKCFub2RlLnZpc2l0ZWQgJiYgIShub2RlLmJvZHkudHlwZSAmIFNUQVRJQykpIHsKICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGNvbnN0IHF1ZXVlID0gW107CgogIGZ1bmN0aW9uIGJmcyhyb290LCB2aXNpdEZ1bmMsIGJkcywgZXFzKSB7CiAgICBxdWV1ZS5wdXNoKHJvb3QpOwogICAgcm9vdC52aXNpdGVkID0gdHJ1ZTsKICAgIHZpc2l0RnVuYyhyb290LCBiZHMsIGVxcyk7CgogICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkgewogICAgICBjb25zdCBub2RlID0gcXVldWUucG9wKCk7IC8vIExvb3Agb3ZlciB1bnZpc2l0ZWQgY2hpbGQgbm9kZXMKCiAgICAgIGxldCBjaGlsZDsKCiAgICAgIHdoaWxlIChjaGlsZCA9IGdldFVudmlzaXRlZE5vZGUobm9kZS5jaGlsZHJlbikpIHsKICAgICAgICBjaGlsZC52aXNpdGVkID0gdHJ1ZTsKICAgICAgICB2aXNpdEZ1bmMoY2hpbGQsIGJkcywgZXFzKTsKICAgICAgICBxdWV1ZS5wdXNoKGNoaWxkKTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gdmlzaXRGdW5jKG5vZGUsIGJkcywgZXFzKSB7CiAgICBiZHMucHVzaChub2RlLmJvZHkpOwogICAgY29uc3QgTmVxcyA9IG5vZGUuZXFzLmxlbmd0aDsKCiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxczsgaSsrKSB7CiAgICAgIGNvbnN0IGVxID0gbm9kZS5lcXNbaV07CgogICAgICBpZiAoIWVxcy5pbmNsdWRlcyhlcSkpIHsKICAgICAgICBlcXMucHVzaChlcSk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHNvcnRCeUlkKGEsIGIpIHsKICAgIHJldHVybiBiLmlkIC0gYS5pZDsKICB9CgogIC8qKgogICAqIEZvciBwb29saW5nIG9iamVjdHMgdGhhdCBjYW4gYmUgcmV1c2VkLgogICAqLwogIGNsYXNzIFBvb2wgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMub2JqZWN0cyA9IFtdOwogICAgICB0aGlzLnR5cGUgPSBPYmplY3Q7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZWxlYXNlIGFuIG9iamVjdCBhZnRlciB1c2UKICAgICAqLwogICAgcmVsZWFzZSgpIHsKICAgICAgY29uc3QgTmFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5hcmdzOyBpKyspIHsKICAgICAgICB0aGlzLm9iamVjdHMucHVzaChpIDwgMCB8fCBhcmd1bWVudHMubGVuZ3RoIDw9IGkgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbaV0pOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFuIG9iamVjdAogICAgICovCgoKICAgIGdldCgpIHsKICAgICAgaWYgKHRoaXMub2JqZWN0cy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3RPYmplY3QoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RzLnBvcCgpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbnN0cnVjdCBhbiBvYmplY3QuIFNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiBlYWNoIHN1YmNsYXNzLgogICAgICovCgoKICAgIGNvbnN0cnVjdE9iamVjdCgpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb25zdHJ1Y3RPYmplY3QoKSBub3QgaW1wbGVtZW50ZWQgaW4gdGhpcyBQb29sIHN1YmNsYXNzIHlldCEnKTsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybiBTZWxmLCBmb3IgY2hhaW5pbmcKICAgICAqLwoKCiAgICByZXNpemUoc2l6ZSkgewogICAgICBjb25zdCBvYmplY3RzID0gdGhpcy5vYmplY3RzOwoKICAgICAgd2hpbGUgKG9iamVjdHMubGVuZ3RoID4gc2l6ZSkgewogICAgICAgIG9iamVjdHMucG9wKCk7CiAgICAgIH0KCiAgICAgIHdoaWxlIChvYmplY3RzLmxlbmd0aCA8IHNpemUpIHsKICAgICAgICBvYmplY3RzLnB1c2godGhpcy5jb25zdHJ1Y3RPYmplY3QoKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICB9CgogIC8qKgogICAqIFZlYzNQb29sCiAgICovCgogIGNsYXNzIFZlYzNQb29sIGV4dGVuZHMgUG9vbCB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTsKICAgICAgdGhpcy50eXBlID0gVmVjMzsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnN0cnVjdCBhIHZlY3RvcgogICAgICovCiAgICBjb25zdHJ1Y3RPYmplY3QoKSB7CiAgICAgIHJldHVybiBuZXcgVmVjMygpOwogICAgfQoKICB9CgogIC8vIE5hbWluZyBydWxlOiBiYXNlZCBvZiB0aGUgb3JkZXIgaW4gU0hBUEVfVFlQRVMsCiAgLy8gdGhlIGZpcnN0IHBhcnQgb2YgdGhlIG1ldGhvZCBpcyBmb3JtZWQgYnkgdGhlCiAgLy8gc2hhcGUgdHlwZSB0aGF0IGNvbWVzIGJlZm9yZSwgaW4gdGhlIHNlY29uZCBwYXJ0CiAgLy8gdGhlcmUgaXMgdGhlIHNoYXBlIHR5cGUgdGhhdCBjb21lcyBhZnRlciBpbiB0aGUgU0hBUEVfVFlQRVMgbGlzdAogIGNvbnN0IENPTExJU0lPTl9UWVBFUyA9IHsKICAgIHNwaGVyZVNwaGVyZTogU2hhcGUudHlwZXMuU1BIRVJFLAogICAgc3BoZXJlUGxhbmU6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLlBMQU5FLAogICAgYm94Qm94OiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5CT1gsCiAgICBzcGhlcmVCb3g6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkJPWCwKICAgIHBsYW5lQm94OiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkJPWCwKICAgIGNvbnZleENvbnZleDogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiwKICAgIHNwaGVyZUNvbnZleDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiwKICAgIHBsYW5lQ29udmV4OiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBib3hDb252ZXg6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBzcGhlcmVIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuSEVJR0hURklFTEQsCiAgICBib3hIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuSEVJR0hURklFTEQsCiAgICBjb252ZXhIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELAogICAgc3BoZXJlUGFydGljbGU6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuU1BIRVJFLAogICAgcGxhbmVQYXJ0aWNsZTogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5QQVJUSUNMRSwKICAgIGJveFBhcnRpY2xlOiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5QQVJUSUNMRSwKICAgIGNvbnZleFBhcnRpY2xlOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBjeWxpbmRlckN5bGluZGVyOiBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHNwaGVyZUN5bGluZGVyOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHBsYW5lQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBib3hDeWxpbmRlcjogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBjb252ZXhDeWxpbmRlcjogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgaGVpZ2h0ZmllbGRDeWxpbmRlcjogU2hhcGUudHlwZXMuSEVJR0hURklFTEQgfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHBhcnRpY2xlQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBzcGhlcmVUcmltZXNoOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5UUklNRVNILAogICAgcGxhbmVUcmltZXNoOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLlRSSU1FU0gKICB9OwoKICAvKioKICAgKiBIZWxwZXIgY2xhc3MgZm9yIHRoZSBXb3JsZC4gR2VuZXJhdGVzIENvbnRhY3RFcXVhdGlvbnMuCiAgICogQHRvZG8gU3BoZXJlLUNvbnZleFBvbHloZWRyb24gY29udGFjdHMKICAgKiBAdG9kbyBDb250YWN0IHJlZHVjdGlvbgogICAqIEB0b2RvIHNob3VsZCBtb3ZlIG1ldGhvZHMgdG8gcHJvdG90eXBlCiAgICovCiAgY2xhc3MgTmFycm93cGhhc2UgewogICAgLyoqCiAgICAgKiBJbnRlcm5hbCBzdG9yYWdlIG9mIHBvb2xlZCBjb250YWN0IHBvaW50cy4KICAgICAqLwoKICAgIC8qKgogICAgICogUG9vbGVkIHZlY3RvcnMuCiAgICAgKi8KICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZVNwaGVyZV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZVNwaGVyZTsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVQbGFuZV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZVBsYW5lOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveEJveF0oKSB7CiAgICAgIHJldHVybiB0aGlzLmJveEJveDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVCb3hdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVCb3g7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMucGxhbmVCb3hdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZUJveDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jb252ZXhDb252ZXhdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXg7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuc3BoZXJlQ29udmV4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lQ29udmV4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVDb252ZXg7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuYm94Q29udmV4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZUhlaWdodGZpZWxkXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlSGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuYm94SGVpZ2h0ZmllbGRdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hIZWlnaHRmaWVsZDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jb252ZXhIZWlnaHRmaWVsZF0oKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleEhlaWdodGZpZWxkOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZVBhcnRpY2xlXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlUGFydGljbGU7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMucGxhbmVQYXJ0aWNsZV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lUGFydGljbGU7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuYm94UGFydGljbGVdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hQYXJ0aWNsZTsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jb252ZXhQYXJ0aWNsZV0oKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleFBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmN5bGluZGVyQ3lsaW5kZXJdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXg7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuc3BoZXJlQ3lsaW5kZXJdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVDb252ZXg7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMucGxhbmVDeWxpbmRlcl0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveEN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmNvbnZleEN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmhlaWdodGZpZWxkQ3lsaW5kZXJdKCkgewogICAgICByZXR1cm4gdGhpcy5oZWlnaHRmaWVsZEN5bGluZGVyOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBhcnRpY2xlQ3lsaW5kZXJdKCkgewogICAgICByZXR1cm4gdGhpcy5wYXJ0aWNsZUN5bGluZGVyOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZVRyaW1lc2hdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVUcmltZXNoOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lVHJpbWVzaF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lVHJpbWVzaDsKICAgIH0gLy8gZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4VHJpbWVzaF0oKSB7CiAgICAvLyAgIHJldHVybiB0aGlzLmNvbnZleFRyaW1lc2gKICAgIC8vIH0KCgogICAgY29uc3RydWN0b3Iod29ybGQpIHsKICAgICAgdGhpcy5jb250YWN0UG9pbnRQb29sID0gW107CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblBvb2wgPSBbXTsKICAgICAgdGhpcy5yZXN1bHQgPSBbXTsKICAgICAgdGhpcy5mcmljdGlvblJlc3VsdCA9IFtdOwogICAgICB0aGlzLnYzcG9vbCA9IG5ldyBWZWMzUG9vbCgpOwogICAgICB0aGlzLndvcmxkID0gd29ybGQ7CiAgICAgIHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbCA9IHdvcmxkLmRlZmF1bHRDb250YWN0TWF0ZXJpYWw7CiAgICAgIHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogTWFrZSBhIGNvbnRhY3Qgb2JqZWN0LCBieSB1c2luZyB0aGUgaW50ZXJuYWwgcG9vbCBvciBjcmVhdGluZyBhIG5ldyBvbmUuCiAgICAgKi8KCgogICAgY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCBvdmVycmlkZVNoYXBlQSwgb3ZlcnJpZGVTaGFwZUIpIHsKICAgICAgbGV0IGM7CgogICAgICBpZiAodGhpcy5jb250YWN0UG9pbnRQb29sLmxlbmd0aCkgewogICAgICAgIGMgPSB0aGlzLmNvbnRhY3RQb2ludFBvb2wucG9wKCk7CiAgICAgICAgYy5iaSA9IGJpOwogICAgICAgIGMuYmogPSBiajsKICAgICAgfSBlbHNlIHsKICAgICAgICBjID0gbmV3IENvbnRhY3RFcXVhdGlvbihiaSwgYmopOwogICAgICB9CgogICAgICBjLmVuYWJsZWQgPSBiaS5jb2xsaXNpb25SZXNwb25zZSAmJiBiai5jb2xsaXNpb25SZXNwb25zZSAmJiBzaS5jb2xsaXNpb25SZXNwb25zZSAmJiBzai5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgY29uc3QgY20gPSB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWw7CiAgICAgIGMucmVzdGl0dXRpb24gPSBjbS5yZXN0aXR1dGlvbjsKICAgICAgYy5zZXRTcG9va1BhcmFtcyhjbS5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MsIGNtLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24sIHRoaXMud29ybGQuZHQpOwogICAgICBjb25zdCBtYXRBID0gc2kubWF0ZXJpYWwgfHwgYmkubWF0ZXJpYWw7CiAgICAgIGNvbnN0IG1hdEIgPSBzai5tYXRlcmlhbCB8fCBiai5tYXRlcmlhbDsKCiAgICAgIGlmIChtYXRBICYmIG1hdEIgJiYgbWF0QS5yZXN0aXR1dGlvbiA+PSAwICYmIG1hdEIucmVzdGl0dXRpb24gPj0gMCkgewogICAgICAgIGMucmVzdGl0dXRpb24gPSBtYXRBLnJlc3RpdHV0aW9uICogbWF0Qi5yZXN0aXR1dGlvbjsKICAgICAgfQoKICAgICAgYy5zaSA9IG92ZXJyaWRlU2hhcGVBIHx8IHNpOwogICAgICBjLnNqID0gb3ZlcnJpZGVTaGFwZUIgfHwgc2o7CiAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QoY29udGFjdEVxdWF0aW9uLCBvdXRBcnJheSkgewogICAgICBjb25zdCBib2R5QSA9IGNvbnRhY3RFcXVhdGlvbi5iaTsKICAgICAgY29uc3QgYm9keUIgPSBjb250YWN0RXF1YXRpb24uYmo7CiAgICAgIGNvbnN0IHNoYXBlQSA9IGNvbnRhY3RFcXVhdGlvbi5zaTsKICAgICAgY29uc3Qgc2hhcGVCID0gY29udGFjdEVxdWF0aW9uLnNqOwogICAgICBjb25zdCB3b3JsZCA9IHRoaXMud29ybGQ7CiAgICAgIGNvbnN0IGNtID0gdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsOyAvLyBJZiBmcmljdGlvbiBvciByZXN0aXR1dGlvbiB3ZXJlIHNwZWNpZmllZCBpbiB0aGUgbWF0ZXJpYWwsIHVzZSB0aGVtCgogICAgICBsZXQgZnJpY3Rpb24gPSBjbS5mcmljdGlvbjsKICAgICAgY29uc3QgbWF0QSA9IHNoYXBlQS5tYXRlcmlhbCB8fCBib2R5QS5tYXRlcmlhbDsKICAgICAgY29uc3QgbWF0QiA9IHNoYXBlQi5tYXRlcmlhbCB8fCBib2R5Qi5tYXRlcmlhbDsKCiAgICAgIGlmIChtYXRBICYmIG1hdEIgJiYgbWF0QS5mcmljdGlvbiA+PSAwICYmIG1hdEIuZnJpY3Rpb24gPj0gMCkgewogICAgICAgIGZyaWN0aW9uID0gbWF0QS5mcmljdGlvbiAqIG1hdEIuZnJpY3Rpb247CiAgICAgIH0KCiAgICAgIGlmIChmcmljdGlvbiA+IDApIHsKICAgICAgICAvLyBDcmVhdGUgMiB0YW5nZW50IGVxdWF0aW9ucwogICAgICAgIC8vIFVzZXJzIG1heSBwcm92aWRlIGEgZm9yY2UgZGlmZmVyZW50IGZyb20gZ2xvYmFsIGdyYXZpdHkgdG8gdXNlIHdoZW4gY29tcHV0aW5nIGNvbnRhY3QgZnJpY3Rpb24uCiAgICAgICAgY29uc3QgbXVnID0gZnJpY3Rpb24gKiAod29ybGQuZnJpY3Rpb25HcmF2aXR5IHx8IHdvcmxkLmdyYXZpdHkpLmxlbmd0aCgpOwogICAgICAgIGxldCByZWR1Y2VkTWFzcyA9IGJvZHlBLmludk1hc3MgKyBib2R5Qi5pbnZNYXNzOwoKICAgICAgICBpZiAocmVkdWNlZE1hc3MgPiAwKSB7CiAgICAgICAgICByZWR1Y2VkTWFzcyA9IDEgLyByZWR1Y2VkTWFzczsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHBvb2wgPSB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sOwogICAgICAgIGNvbnN0IGMxID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYm9keUEsIGJvZHlCLCBtdWcgKiByZWR1Y2VkTWFzcyk7CiAgICAgICAgY29uc3QgYzIgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihib2R5QSwgYm9keUIsIG11ZyAqIHJlZHVjZWRNYXNzKTsKICAgICAgICBjMS5iaSA9IGMyLmJpID0gYm9keUE7CiAgICAgICAgYzEuYmogPSBjMi5iaiA9IGJvZHlCOwogICAgICAgIGMxLm1pbkZvcmNlID0gYzIubWluRm9yY2UgPSAtbXVnICogcmVkdWNlZE1hc3M7CiAgICAgICAgYzEubWF4Rm9yY2UgPSBjMi5tYXhGb3JjZSA9IG11ZyAqIHJlZHVjZWRNYXNzOyAvLyBDb3B5IG92ZXIgdGhlIHJlbGF0aXZlIHZlY3RvcnMKCiAgICAgICAgYzEucmkuY29weShjb250YWN0RXF1YXRpb24ucmkpOwogICAgICAgIGMxLnJqLmNvcHkoY29udGFjdEVxdWF0aW9uLnJqKTsKICAgICAgICBjMi5yaS5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaSk7CiAgICAgICAgYzIucmouY29weShjb250YWN0RXF1YXRpb24ucmopOyAvLyBDb25zdHJ1Y3QgdGFuZ2VudHMKCiAgICAgICAgY29udGFjdEVxdWF0aW9uLm5pLnRhbmdlbnRzKGMxLnQsIGMyLnQpOyAvLyBTZXQgc3Bvb2sgcGFyYW1zCgogICAgICAgIGMxLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCB3b3JsZC5kdCk7CiAgICAgICAgYzIuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIHdvcmxkLmR0KTsKICAgICAgICBjMS5lbmFibGVkID0gYzIuZW5hYmxlZCA9IGNvbnRhY3RFcXVhdGlvbi5lbmFibGVkOwogICAgICAgIG91dEFycmF5LnB1c2goYzEsIGMyKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBUYWtlIHRoZSBhdmVyYWdlIE4gbGF0ZXN0IGNvbnRhY3QgcG9pbnQgb24gdGhlIHBsYW5lLgogICAgICovCgoKICAgIGNyZWF0ZUZyaWN0aW9uRnJvbUF2ZXJhZ2UobnVtQ29udGFjdHMpIHsKICAgICAgLy8gVGhlIGxhc3QgY29udGFjdEVxdWF0aW9uCiAgICAgIGxldCBjID0gdGhpcy5yZXN1bHRbdGhpcy5yZXN1bHQubGVuZ3RoIC0gMV07IC8vIENyZWF0ZSB0aGUgcmVzdWx0OiB0d28gImF2ZXJhZ2UiIGZyaWN0aW9uIGVxdWF0aW9ucwoKICAgICAgaWYgKCF0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QoYywgdGhpcy5mcmljdGlvblJlc3VsdCkgfHwgbnVtQ29udGFjdHMgPT09IDEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IGYxID0gdGhpcy5mcmljdGlvblJlc3VsdFt0aGlzLmZyaWN0aW9uUmVzdWx0Lmxlbmd0aCAtIDJdOwogICAgICBjb25zdCBmMiA9IHRoaXMuZnJpY3Rpb25SZXN1bHRbdGhpcy5mcmljdGlvblJlc3VsdC5sZW5ndGggLSAxXTsKICAgICAgYXZlcmFnZU5vcm1hbC5zZXRaZXJvKCk7CiAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnNldFplcm8oKTsKICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIuc2V0WmVybygpOwogICAgICBjb25zdCBib2R5QSA9IGMuYmk7CiAgICAgIGMuYmo7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbnVtQ29udGFjdHM7IGkrKykgewogICAgICAgIGMgPSB0aGlzLnJlc3VsdFt0aGlzLnJlc3VsdC5sZW5ndGggLSAxIC0gaV07CgogICAgICAgIGlmIChjLmJpICE9PSBib2R5QSkgewogICAgICAgICAgYXZlcmFnZU5vcm1hbC52YWRkKGMubmksIGF2ZXJhZ2VOb3JtYWwpOwogICAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEEudmFkZChjLnJpLCBhdmVyYWdlQ29udGFjdFBvaW50QSk7CiAgICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi52YWRkKGMucmosIGF2ZXJhZ2VDb250YWN0UG9pbnRCKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYXZlcmFnZU5vcm1hbC52c3ViKGMubmksIGF2ZXJhZ2VOb3JtYWwpOwogICAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEEudmFkZChjLnJqLCBhdmVyYWdlQ29udGFjdFBvaW50QSk7CiAgICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi52YWRkKGMucmksIGF2ZXJhZ2VDb250YWN0UG9pbnRCKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IGludk51bUNvbnRhY3RzID0gMSAvIG51bUNvbnRhY3RzOwogICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS5zY2FsZShpbnZOdW1Db250YWN0cywgZjEucmkpOwogICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi5zY2FsZShpbnZOdW1Db250YWN0cywgZjEucmopOwogICAgICBmMi5yaS5jb3B5KGYxLnJpKTsgLy8gU2hvdWxkIGJlIHRoZSBzYW1lCgogICAgICBmMi5yai5jb3B5KGYxLnJqKTsKICAgICAgYXZlcmFnZU5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgYXZlcmFnZU5vcm1hbC50YW5nZW50cyhmMS50LCBmMi50KTsgLy8gcmV0dXJuIGVxOwogICAgfQogICAgLyoqCiAgICAgKiBHZW5lcmF0ZSBhbGwgY29udGFjdHMgYmV0d2VlbiBhIGxpc3Qgb2YgYm9keSBwYWlycwogICAgICogQHBhcmFtIHAxIEFycmF5IG9mIGJvZHkgaW5kaWNlcwogICAgICogQHBhcmFtIHAyIEFycmF5IG9mIGJvZHkgaW5kaWNlcwogICAgICogQHBhcmFtIHJlc3VsdCBBcnJheSB0byBzdG9yZSBnZW5lcmF0ZWQgY29udGFjdHMKICAgICAqIEBwYXJhbSBvbGRjb250YWN0cyBPcHRpb25hbC4gQXJyYXkgb2YgcmV1c2FibGUgY29udGFjdCBvYmplY3RzCiAgICAgKi8KCgogICAgZ2V0Q29udGFjdHMocDEsIHAyLCB3b3JsZCwgcmVzdWx0LCBvbGRjb250YWN0cywgZnJpY3Rpb25SZXN1bHQsIGZyaWN0aW9uUG9vbCkgewogICAgICAvLyBTYXZlIG9sZCBjb250YWN0IG9iamVjdHMKICAgICAgdGhpcy5jb250YWN0UG9pbnRQb29sID0gb2xkY29udGFjdHM7CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblBvb2wgPSBmcmljdGlvblBvb2w7CiAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0OwogICAgICB0aGlzLmZyaWN0aW9uUmVzdWx0ID0gZnJpY3Rpb25SZXN1bHQ7CiAgICAgIGNvbnN0IHFpID0gdG1wUXVhdDE7CiAgICAgIGNvbnN0IHFqID0gdG1wUXVhdDI7CiAgICAgIGNvbnN0IHhpID0gdG1wVmVjMTsKICAgICAgY29uc3QgeGogPSB0bXBWZWMyOwoKICAgICAgZm9yIChsZXQgayA9IDAsIE4gPSBwMS5sZW5ndGg7IGsgIT09IE47IGsrKykgewogICAgICAgIC8vIEdldCBjdXJyZW50IGNvbGxpc2lvbiBib2RpZXMKICAgICAgICBjb25zdCBiaSA9IHAxW2tdOwogICAgICAgIGNvbnN0IGJqID0gcDJba107IC8vIEdldCBjb250YWN0IG1hdGVyaWFsCgogICAgICAgIGxldCBib2R5Q29udGFjdE1hdGVyaWFsID0gbnVsbDsKCiAgICAgICAgaWYgKGJpLm1hdGVyaWFsICYmIGJqLm1hdGVyaWFsKSB7CiAgICAgICAgICBib2R5Q29udGFjdE1hdGVyaWFsID0gd29ybGQuZ2V0Q29udGFjdE1hdGVyaWFsKGJpLm1hdGVyaWFsLCBiai5tYXRlcmlhbCkgfHwgbnVsbDsKICAgICAgICB9CgogICAgICAgIGNvbnN0IGp1c3RUZXN0ID0gYmkudHlwZSAmIEJvZHkuS0lORU1BVElDICYmIGJqLnR5cGUgJiBCb2R5LlNUQVRJQyB8fCBiaS50eXBlICYgQm9keS5TVEFUSUMgJiYgYmoudHlwZSAmIEJvZHkuS0lORU1BVElDIHx8IGJpLnR5cGUgJiBCb2R5LktJTkVNQVRJQyAmJiBiai50eXBlICYgQm9keS5LSU5FTUFUSUM7CgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmkuc2hhcGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBiaS5xdWF0ZXJuaW9uLm11bHQoYmkuc2hhcGVPcmllbnRhdGlvbnNbaV0sIHFpKTsKICAgICAgICAgIGJpLnF1YXRlcm5pb24udm11bHQoYmkuc2hhcGVPZmZzZXRzW2ldLCB4aSk7CiAgICAgICAgICB4aS52YWRkKGJpLnBvc2l0aW9uLCB4aSk7CiAgICAgICAgICBjb25zdCBzaSA9IGJpLnNoYXBlc1tpXTsKCiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJqLnNoYXBlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAvLyBDb21wdXRlIHdvcmxkIHRyYW5zZm9ybSBvZiBzaGFwZXMKICAgICAgICAgICAgYmoucXVhdGVybmlvbi5tdWx0KGJqLnNoYXBlT3JpZW50YXRpb25zW2pdLCBxaik7CiAgICAgICAgICAgIGJqLnF1YXRlcm5pb24udm11bHQoYmouc2hhcGVPZmZzZXRzW2pdLCB4aik7CiAgICAgICAgICAgIHhqLnZhZGQoYmoucG9zaXRpb24sIHhqKTsKICAgICAgICAgICAgY29uc3Qgc2ogPSBiai5zaGFwZXNbal07CgogICAgICAgICAgICBpZiAoIShzaS5jb2xsaXNpb25GaWx0ZXJNYXNrICYgc2ouY29sbGlzaW9uRmlsdGVyR3JvdXAgJiYgc2ouY29sbGlzaW9uRmlsdGVyTWFzayAmIHNpLmNvbGxpc2lvbkZpbHRlckdyb3VwKSkgewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0gLy8gR2V0IGNvbGxpc2lvbiBtYXRlcmlhbAoKCiAgICAgICAgICAgIGxldCBzaGFwZUNvbnRhY3RNYXRlcmlhbCA9IG51bGw7CgogICAgICAgICAgICBpZiAoc2kubWF0ZXJpYWwgJiYgc2oubWF0ZXJpYWwpIHsKICAgICAgICAgICAgICBzaGFwZUNvbnRhY3RNYXRlcmlhbCA9IHdvcmxkLmdldENvbnRhY3RNYXRlcmlhbChzaS5tYXRlcmlhbCwgc2oubWF0ZXJpYWwpIHx8IG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbCA9IHNoYXBlQ29udGFjdE1hdGVyaWFsIHx8IGJvZHlDb250YWN0TWF0ZXJpYWwgfHwgd29ybGQuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDsgLy8gR2V0IGNvbnRhY3RzCgogICAgICAgICAgICBjb25zdCByZXNvbHZlckluZGV4ID0gc2kudHlwZSB8IHNqLnR5cGU7CiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVyID0gdGhpc1tyZXNvbHZlckluZGV4XTsKCiAgICAgICAgICAgIGlmIChyZXNvbHZlcikgewogICAgICAgICAgICAgIGxldCByZXR2YWwgPSBmYWxzZTsgLy8gVE8gRE86IGludmVzdGlnYXRlIHdoeSBzcGhlcmVQYXJ0aWNsZSBhbmQgY29udmV4UGFydGljbGUKICAgICAgICAgICAgICAvLyByZXNvbHZlcnMgZXhwZWN0IHNpIGFuZCBzaiBzaGFwZXMgdG8gYmUgaW4gcmV2ZXJzZSBvcmRlcgogICAgICAgICAgICAgIC8vIChpLmUuIGxhcmdlciBpbnRlZ2VyIHZhbHVlIHR5cGUgZmlyc3QgaW5zdGVhZCBvZiBzbWFsbGVyIGZpcnN0KQoKICAgICAgICAgICAgICBpZiAoc2kudHlwZSA8IHNqLnR5cGUpIHsKICAgICAgICAgICAgICAgIHJldHZhbCA9IHJlc29sdmVyLmNhbGwodGhpcywgc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dmFsID0gcmVzb2x2ZXIuY2FsbCh0aGlzLCBzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHNpLCBzaiwganVzdFRlc3QpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHJldHZhbCAmJiBqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgLy8gUmVnaXN0ZXIgb3ZlcmxhcAogICAgICAgICAgICAgICAgd29ybGQuc2hhcGVPdmVybGFwS2VlcGVyLnNldChzaS5pZCwgc2ouaWQpOwogICAgICAgICAgICAgICAgd29ybGQuYm9keU92ZXJsYXBLZWVwZXIuc2V0KGJpLmlkLCBiai5pZCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc3BoZXJlU3BoZXJlKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgIHJldHVybiB4aS5kaXN0YW5jZVNxdWFyZWQoeGopIDwgKHNpLnJhZGl1cyArIHNqLnJhZGl1cykgKiogMjsKICAgICAgfSAvLyBXZSB3aWxsIGhhdmUgb25seSBvbmUgY29udGFjdCBpbiB0aGlzIGNhc2UKCgogICAgICBjb25zdCBjb250YWN0RXEgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOyAvLyBDb250YWN0IG5vcm1hbAoKICAgICAgeGoudnN1Yih4aSwgY29udGFjdEVxLm5pKTsKICAgICAgY29udGFjdEVxLm5pLm5vcm1hbGl6ZSgpOyAvLyBDb250YWN0IHBvaW50IGxvY2F0aW9ucwoKICAgICAgY29udGFjdEVxLnJpLmNvcHkoY29udGFjdEVxLm5pKTsKICAgICAgY29udGFjdEVxLnJqLmNvcHkoY29udGFjdEVxLm5pKTsKICAgICAgY29udGFjdEVxLnJpLnNjYWxlKHNpLnJhZGl1cywgY29udGFjdEVxLnJpKTsKICAgICAgY29udGFjdEVxLnJqLnNjYWxlKC1zai5yYWRpdXMsIGNvbnRhY3RFcS5yaik7CiAgICAgIGNvbnRhY3RFcS5yaS52YWRkKHhpLCBjb250YWN0RXEucmkpOwogICAgICBjb250YWN0RXEucmkudnN1YihiaS5wb3NpdGlvbiwgY29udGFjdEVxLnJpKTsKICAgICAgY29udGFjdEVxLnJqLnZhZGQoeGosIGNvbnRhY3RFcS5yaik7CiAgICAgIGNvbnRhY3RFcS5yai52c3ViKGJqLnBvc2l0aW9uLCBjb250YWN0RXEucmopOwogICAgICB0aGlzLnJlc3VsdC5wdXNoKGNvbnRhY3RFcSk7CiAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChjb250YWN0RXEsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgfQoKICAgIHNwaGVyZVBsYW5lKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIC8vIFdlIHdpbGwgaGF2ZSBvbmUgY29udGFjdCBpbiB0aGlzIGNhc2UKICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7IC8vIENvbnRhY3Qgbm9ybWFsCgogICAgICByLm5pLnNldCgwLCAwLCAxKTsKICAgICAgcWoudm11bHQoci5uaSwgci5uaSk7CiAgICAgIHIubmkubmVnYXRlKHIubmkpOyAvLyBib2R5IGkgaXMgdGhlIHNwaGVyZSwgZmxpcCBub3JtYWwKCiAgICAgIHIubmkubm9ybWFsaXplKCk7IC8vIE5lZWRlZD8KICAgICAgLy8gVmVjdG9yIGZyb20gc3BoZXJlIGNlbnRlciB0byBjb250YWN0IHBvaW50CgogICAgICByLm5pLnNjYWxlKHNpLnJhZGl1cywgci5yaSk7IC8vIFByb2plY3QgZG93biBzcGhlcmUgb24gcGxhbmUKCiAgICAgIHhpLnZzdWIoeGosIHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZSk7CiAgICAgIHIubmkuc2NhbGUoci5uaS5kb3QocG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlKSwgcGxhbmVfdG9fc3BoZXJlX29ydGhvKTsKICAgICAgcG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlLnZzdWIocGxhbmVfdG9fc3BoZXJlX29ydGhvLCByLnJqKTsgLy8gVGhlIHNwaGVyZSBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gcGxhbmUKCiAgICAgIGlmICgtcG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlLmRvdChyLm5pKSA8PSBzaS5yYWRpdXMpIHsKICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gLy8gTWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgYm9keQoKCiAgICAgICAgY29uc3QgcmkgPSByLnJpOwogICAgICAgIGNvbnN0IHJqID0gci5yajsKICAgICAgICByaS52YWRkKHhpLCByaSk7CiAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpOwogICAgICAgIHJqLnZhZGQoeGosIHJqKTsKICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7CiAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgIH0KICAgIH0KCiAgICBib3hCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNqLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2ouY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleChzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlQm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IHYzcG9vbCA9IHRoaXMudjNwb29sOyAvLyB3ZSByZWZlciB0byB0aGUgYm94IGFzIGJvZHkgagoKICAgICAgY29uc3Qgc2lkZXMgPSBzcGhlcmVCb3hfc2lkZXM7CiAgICAgIHhpLnZzdWIoeGosIGJveF90b19zcGhlcmUpOwogICAgICBzai5nZXRTaWRlTm9ybWFscyhzaWRlcywgcWopOwogICAgICBjb25zdCBSID0gc2kucmFkaXVzOwoKICAgICAgbGV0IGZvdW5kID0gZmFsc2U7IC8vIFN0b3JlIHRoZSByZXN1bHRpbmcgc2lkZSBwZW5ldHJhdGlvbiBpbmZvCgogICAgICBjb25zdCBzaWRlX25zID0gc3BoZXJlQm94X3NpZGVfbnM7CiAgICAgIGNvbnN0IHNpZGVfbnMxID0gc3BoZXJlQm94X3NpZGVfbnMxOwogICAgICBjb25zdCBzaWRlX25zMiA9IHNwaGVyZUJveF9zaWRlX25zMjsKICAgICAgbGV0IHNpZGVfaCA9IG51bGw7CiAgICAgIGxldCBzaWRlX3BlbmV0cmF0aW9ucyA9IDA7CiAgICAgIGxldCBzaWRlX2RvdDEgPSAwOwogICAgICBsZXQgc2lkZV9kb3QyID0gMDsKICAgICAgbGV0IHNpZGVfZGlzdGFuY2UgPSBudWxsOwoKICAgICAgZm9yIChsZXQgaWR4ID0gMCwgbnNpZGVzID0gc2lkZXMubGVuZ3RoOyBpZHggIT09IG5zaWRlcyAmJiBmb3VuZCA9PT0gZmFsc2U7IGlkeCsrKSB7CiAgICAgICAgLy8gR2V0IHRoZSBwbGFuZSBzaWRlIG5vcm1hbCAobnMpCiAgICAgICAgY29uc3QgbnMgPSBzcGhlcmVCb3hfbnM7CiAgICAgICAgbnMuY29weShzaWRlc1tpZHhdKTsKICAgICAgICBjb25zdCBoID0gbnMubGVuZ3RoKCk7CiAgICAgICAgbnMubm9ybWFsaXplKCk7IC8vIFRoZSBub3JtYWwvZGlzdGFuY2UgZG90IHByb2R1Y3QgdGVsbHMgd2hpY2ggc2lkZSBvZiB0aGUgcGxhbmUgd2UgYXJlCgogICAgICAgIGNvbnN0IGRvdCA9IGJveF90b19zcGhlcmUuZG90KG5zKTsKCiAgICAgICAgaWYgKGRvdCA8IGggKyBSICYmIGRvdCA+IDApIHsKICAgICAgICAgIC8vIEludGVyc2VjdHMgcGxhbmUuIE5vdyBjaGVjayB0aGUgb3RoZXIgdHdvIGRpbWVuc2lvbnMKICAgICAgICAgIGNvbnN0IG5zMSA9IHNwaGVyZUJveF9uczE7CiAgICAgICAgICBjb25zdCBuczIgPSBzcGhlcmVCb3hfbnMyOwogICAgICAgICAgbnMxLmNvcHkoc2lkZXNbKGlkeCArIDEpICUgM10pOwogICAgICAgICAgbnMyLmNvcHkoc2lkZXNbKGlkeCArIDIpICUgM10pOwogICAgICAgICAgY29uc3QgaDEgPSBuczEubGVuZ3RoKCk7CiAgICAgICAgICBjb25zdCBoMiA9IG5zMi5sZW5ndGgoKTsKICAgICAgICAgIG5zMS5ub3JtYWxpemUoKTsKICAgICAgICAgIG5zMi5ub3JtYWxpemUoKTsKICAgICAgICAgIGNvbnN0IGRvdDEgPSBib3hfdG9fc3BoZXJlLmRvdChuczEpOwogICAgICAgICAgY29uc3QgZG90MiA9IGJveF90b19zcGhlcmUuZG90KG5zMik7CgogICAgICAgICAgaWYgKGRvdDEgPCBoMSAmJiBkb3QxID4gLWgxICYmIGRvdDIgPCBoMiAmJiBkb3QyID4gLWgyKSB7CiAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBNYXRoLmFicyhkb3QgLSBoIC0gUik7CgogICAgICAgICAgICBpZiAoc2lkZV9kaXN0YW5jZSA9PT0gbnVsbCB8fCBkaXN0IDwgc2lkZV9kaXN0YW5jZSkgewogICAgICAgICAgICAgIHNpZGVfZGlzdGFuY2UgPSBkaXN0OwogICAgICAgICAgICAgIHNpZGVfZG90MSA9IGRvdDE7CiAgICAgICAgICAgICAgc2lkZV9kb3QyID0gZG90MjsKICAgICAgICAgICAgICBzaWRlX2ggPSBoOwogICAgICAgICAgICAgIHNpZGVfbnMuY29weShucyk7CiAgICAgICAgICAgICAgc2lkZV9uczEuY29weShuczEpOwogICAgICAgICAgICAgIHNpZGVfbnMyLmNvcHkobnMyKTsKICAgICAgICAgICAgICBzaWRlX3BlbmV0cmF0aW9ucysrOwoKICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHNpZGVfcGVuZXRyYXRpb25zKSB7CiAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgIHNpZGVfbnMuc2NhbGUoLVIsIHIucmkpOyAvLyBTcGhlcmUgcgoKICAgICAgICByLm5pLmNvcHkoc2lkZV9ucyk7CiAgICAgICAgci5uaS5uZWdhdGUoci5uaSk7IC8vIE5vcm1hbCBzaG91bGQgYmUgb3V0IG9mIHNwaGVyZQoKICAgICAgICBzaWRlX25zLnNjYWxlKHNpZGVfaCwgc2lkZV9ucyk7CiAgICAgICAgc2lkZV9uczEuc2NhbGUoc2lkZV9kb3QxLCBzaWRlX25zMSk7CiAgICAgICAgc2lkZV9ucy52YWRkKHNpZGVfbnMxLCBzaWRlX25zKTsKICAgICAgICBzaWRlX25zMi5zY2FsZShzaWRlX2RvdDIsIHNpZGVfbnMyKTsKICAgICAgICBzaWRlX25zLnZhZGQoc2lkZV9uczIsIHIucmopOyAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwoKICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopOwogICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICB9IC8vIENoZWNrIGNvcm5lcnMKCgogICAgICBsZXQgcmogPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IHNwaGVyZV90b19jb3JuZXIgPSBzcGhlcmVCb3hfc3BoZXJlX3RvX2Nvcm5lcjsKCiAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSAyICYmICFmb3VuZDsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IDIgJiYgIWZvdW5kOyBrKyspIHsKICAgICAgICAgIGZvciAobGV0IGwgPSAwOyBsICE9PSAyICYmICFmb3VuZDsgbCsrKSB7CiAgICAgICAgICAgIHJqLnNldCgwLCAwLCAwKTsKCiAgICAgICAgICAgIGlmIChqKSB7CiAgICAgICAgICAgICAgcmoudmFkZChzaWRlc1swXSwgcmopOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJqLnZzdWIoc2lkZXNbMF0sIHJqKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGspIHsKICAgICAgICAgICAgICByai52YWRkKHNpZGVzWzFdLCByaik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmoudnN1YihzaWRlc1sxXSwgcmopOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAobCkgewogICAgICAgICAgICAgIHJqLnZhZGQoc2lkZXNbMl0sIHJqKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByai52c3ViKHNpZGVzWzJdLCByaik7CiAgICAgICAgICAgIH0gLy8gV29ybGQgcG9zaXRpb24gb2YgY29ybmVyCgoKICAgICAgICAgICAgeGoudmFkZChyaiwgc3BoZXJlX3RvX2Nvcm5lcik7CiAgICAgICAgICAgIHNwaGVyZV90b19jb3JuZXIudnN1Yih4aSwgc3BoZXJlX3RvX2Nvcm5lcik7CgogICAgICAgICAgICBpZiAoc3BoZXJlX3RvX2Nvcm5lci5sZW5ndGhTcXVhcmVkKCkgPCBSICogUikgewogICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgICAgci5yaS5jb3B5KHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgICAgIHIucmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgci5uaS5jb3B5KHIucmkpOwogICAgICAgICAgICAgIHIucmkuc2NhbGUoUiwgci5yaSk7CiAgICAgICAgICAgICAgci5yai5jb3B5KHJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTsKICAgICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7CiAgICAgICAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdjNwb29sLnJlbGVhc2UocmopOwogICAgICByaiA9IG51bGw7IC8vIENoZWNrIGVkZ2VzCgogICAgICBjb25zdCBlZGdlVGFuZ2VudCA9IHYzcG9vbC5nZXQoKTsKICAgICAgY29uc3QgZWRnZUNlbnRlciA9IHYzcG9vbC5nZXQoKTsKICAgICAgY29uc3QgciA9IHYzcG9vbC5nZXQoKTsgLy8gciA9IGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBjZW50ZXIKCiAgICAgIGNvbnN0IG9ydGhvZ29uYWwgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IGRpc3QgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IE5zaWRlcyA9IHNpZGVzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBOc2lkZXMgJiYgIWZvdW5kOyBqKyspIHsKICAgICAgICBmb3IgKGxldCBrID0gMDsgayAhPT0gTnNpZGVzICYmICFmb3VuZDsgaysrKSB7CiAgICAgICAgICBpZiAoaiAlIDMgIT09IGsgJSAzKSB7CiAgICAgICAgICAgIC8vIEdldCBlZGdlIHRhbmdlbnQKICAgICAgICAgICAgc2lkZXNba10uY3Jvc3Moc2lkZXNbal0sIGVkZ2VUYW5nZW50KTsKICAgICAgICAgICAgZWRnZVRhbmdlbnQubm9ybWFsaXplKCk7CiAgICAgICAgICAgIHNpZGVzW2pdLnZhZGQoc2lkZXNba10sIGVkZ2VDZW50ZXIpOwogICAgICAgICAgICByLmNvcHkoeGkpOwogICAgICAgICAgICByLnZzdWIoZWRnZUNlbnRlciwgcik7CiAgICAgICAgICAgIHIudnN1Yih4aiwgcik7CiAgICAgICAgICAgIGNvbnN0IG9ydGhvbm9ybSA9IHIuZG90KGVkZ2VUYW5nZW50KTsgLy8gZGlzdGFuY2UgZnJvbSBlZGdlIGNlbnRlciB0byBzcGhlcmUgY2VudGVyIGluIHRoZSB0YW5nZW50IGRpcmVjdGlvbgoKICAgICAgICAgICAgZWRnZVRhbmdlbnQuc2NhbGUob3J0aG9ub3JtLCBvcnRob2dvbmFsKTsgLy8gVmVjdG9yIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIGNlbnRlciBpbiB0aGUgdGFuZ2VudCBkaXJlY3Rpb24KICAgICAgICAgICAgLy8gRmluZCB0aGUgdGhpcmQgc2lkZSBvcnRob2dvbmFsIHRvIHRoaXMgb25lCgogICAgICAgICAgICBsZXQgbCA9IDA7CgogICAgICAgICAgICB3aGlsZSAobCA9PT0gaiAlIDMgfHwgbCA9PT0gayAlIDMpIHsKICAgICAgICAgICAgICBsKys7CiAgICAgICAgICAgIH0gLy8gdmVjIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIHByb2plY3RlZCB0byB0aGUgcGxhbmUgb3J0aG9nb25hbCB0byB0aGUgZWRnZSB0YW5nZW50CgoKICAgICAgICAgICAgZGlzdC5jb3B5KHhpKTsKICAgICAgICAgICAgZGlzdC52c3ViKG9ydGhvZ29uYWwsIGRpc3QpOwogICAgICAgICAgICBkaXN0LnZzdWIoZWRnZUNlbnRlciwgZGlzdCk7CiAgICAgICAgICAgIGRpc3QudnN1Yih4aiwgZGlzdCk7IC8vIERpc3RhbmNlcyBpbiB0YW5nZW50IGRpcmVjdGlvbiBhbmQgZGlzdGFuY2UgaW4gdGhlIHBsYW5lIG9ydGhvZ29uYWwgdG8gaXQKCiAgICAgICAgICAgIGNvbnN0IHRkaXN0ID0gTWF0aC5hYnMob3J0aG9ub3JtKTsKICAgICAgICAgICAgY29uc3QgbmRpc3QgPSBkaXN0Lmxlbmd0aCgpOwoKICAgICAgICAgICAgaWYgKHRkaXN0IDwgc2lkZXNbbF0ubGVuZ3RoKCkgJiYgbmRpc3QgPCBSKSB7CiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICBjb25zdCByZXMgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgICAgIGVkZ2VDZW50ZXIudmFkZChvcnRob2dvbmFsLCByZXMucmopOyAvLyBib3ggcmoKCiAgICAgICAgICAgICAgcmVzLnJqLmNvcHkocmVzLnJqKTsKICAgICAgICAgICAgICBkaXN0Lm5lZ2F0ZShyZXMubmkpOwogICAgICAgICAgICAgIHJlcy5uaS5ub3JtYWxpemUoKTsKICAgICAgICAgICAgICByZXMucmkuY29weShyZXMucmopOwogICAgICAgICAgICAgIHJlcy5yaS52YWRkKHhqLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yaS52c3ViKHhpLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yaS5ub3JtYWxpemUoKTsKICAgICAgICAgICAgICByZXMucmkuc2NhbGUoUiwgcmVzLnJpKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgICAgICAgcmVzLnJpLnZhZGQoeGksIHJlcy5yaSk7CiAgICAgICAgICAgICAgcmVzLnJpLnZzdWIoYmkucG9zaXRpb24sIHJlcy5yaSk7CiAgICAgICAgICAgICAgcmVzLnJqLnZhZGQoeGosIHJlcy5yaik7CiAgICAgICAgICAgICAgcmVzLnJqLnZzdWIoYmoucG9zaXRpb24sIHJlcy5yaik7CiAgICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyZXMpOwogICAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyZXMsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB2M3Bvb2wucmVsZWFzZShlZGdlVGFuZ2VudCwgZWRnZUNlbnRlciwgciwgb3J0aG9nb25hbCwgZGlzdCk7CiAgICB9CgogICAgcGxhbmVCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2oubWF0ZXJpYWw7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNqLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uaWQgPSBzai5pZDsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVDb252ZXgoc2ksIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4Q29udmV4KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0LCBmYWNlTGlzdEEsIGZhY2VMaXN0QikgewogICAgICBjb25zdCBzZXBBeGlzID0gY29udmV4Q29udmV4X3NlcEF4aXM7CgogICAgICBpZiAoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoc2kuZmluZFNlcGFyYXRpbmdBeGlzKHNqLCB4aSwgcWksIHhqLCBxaiwgc2VwQXhpcywgZmFjZUxpc3RBLCBmYWNlTGlzdEIpKSB7CiAgICAgICAgY29uc3QgcmVzID0gW107CiAgICAgICAgY29uc3QgcSA9IGNvbnZleENvbnZleF9xOwogICAgICAgIHNpLmNsaXBBZ2FpbnN0SHVsbCh4aSwgcWksIHNqLCB4aiwgcWosIHNlcEF4aXMsIC0xMDAsIDEwMCwgcmVzKTsKICAgICAgICBsZXQgbnVtQ29udGFjdHMgPSAwOwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gcmVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICBjb25zdCByaSA9IHIucmk7CiAgICAgICAgICBjb25zdCByaiA9IHIucmo7CiAgICAgICAgICBzZXBBeGlzLm5lZ2F0ZShyLm5pKTsKICAgICAgICAgIHJlc1tqXS5ub3JtYWwubmVnYXRlKHEpOwogICAgICAgICAgcS5zY2FsZShyZXNbal0uZGVwdGgsIHEpOwogICAgICAgICAgcmVzW2pdLnBvaW50LnZhZGQocSwgcmkpOwogICAgICAgICAgcmouY29weShyZXNbal0ucG9pbnQpOyAvLyBDb250YWN0IHBvaW50cyBhcmUgaW4gd29ybGQgY29vcmRpbmF0ZXMuIFRyYW5zZm9ybSBiYWNrIHRvIHJlbGF0aXZlCgogICAgICAgICAgcmkudnN1Yih4aSwgcmkpOwogICAgICAgICAgcmoudnN1Yih4aiwgcmopOyAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwoKICAgICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgICAgICAgIHJpLnZzdWIoYmkucG9zaXRpb24sIHJpKTsKICAgICAgICAgIHJqLnZhZGQoeGosIHJqKTsKICAgICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICBudW1Db250YWN0cysrOwoKICAgICAgICAgIGlmICghdGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbikgewogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbiAmJiBudW1Db250YWN0cykgewogICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkZyb21BdmVyYWdlKG51bUNvbnRhY3RzKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzcGhlcmVDb252ZXgoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgdjNwb29sID0gdGhpcy52M3Bvb2w7CiAgICAgIHhpLnZzdWIoeGosIGNvbnZleF90b19zcGhlcmUpOwogICAgICBjb25zdCBub3JtYWxzID0gc2ouZmFjZU5vcm1hbHM7CiAgICAgIGNvbnN0IGZhY2VzID0gc2ouZmFjZXM7CiAgICAgIGNvbnN0IHZlcnRzID0gc2oudmVydGljZXM7CiAgICAgIGNvbnN0IFIgPSBzaS5yYWRpdXM7CiAgICAgIC8vICAgICByZXR1cm47CiAgICAgIC8vIH0KCiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOyAvLyBDaGVjayBjb3JuZXJzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gdmVydHNbaV07IC8vIFdvcmxkIHBvc2l0aW9uIG9mIGNvcm5lcgoKICAgICAgICBjb25zdCB3b3JsZENvcm5lciA9IHNwaGVyZUNvbnZleF93b3JsZENvcm5lcjsKICAgICAgICBxai52bXVsdCh2LCB3b3JsZENvcm5lcik7CiAgICAgICAgeGoudmFkZCh3b3JsZENvcm5lciwgd29ybGRDb3JuZXIpOwogICAgICAgIGNvbnN0IHNwaGVyZV90b19jb3JuZXIgPSBzcGhlcmVDb252ZXhfc3BoZXJlVG9Db3JuZXI7CiAgICAgICAgd29ybGRDb3JuZXIudnN1Yih4aSwgc3BoZXJlX3RvX2Nvcm5lcik7CgogICAgICAgIGlmIChzcGhlcmVfdG9fY29ybmVyLmxlbmd0aFNxdWFyZWQoKSA8IFIgKiBSKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICByLnJpLmNvcHkoc3BoZXJlX3RvX2Nvcm5lcik7CiAgICAgICAgICByLnJpLm5vcm1hbGl6ZSgpOwogICAgICAgICAgci5uaS5jb3B5KHIucmkpOwogICAgICAgICAgci5yaS5zY2FsZShSLCByLnJpKTsKICAgICAgICAgIHdvcmxkQ29ybmVyLnZzdWIoeGosIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTsKICAgICAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9IC8vIENoZWNrIHNpZGUgKHBsYW5lKSBpbnRlcnNlY3Rpb25zCgoKICAgICAgZm9yIChsZXQgaSA9IDAsIG5mYWNlcyA9IGZhY2VzLmxlbmd0aDsgaSAhPT0gbmZhY2VzICYmIGZvdW5kID09PSBmYWxzZTsgaSsrKSB7CiAgICAgICAgY29uc3Qgbm9ybWFsID0gbm9ybWFsc1tpXTsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07IC8vIEdldCB3b3JsZC10cmFuc2Zvcm1lZCBub3JtYWwgb2YgdGhlIGZhY2UKCiAgICAgICAgY29uc3Qgd29ybGROb3JtYWwgPSBzcGhlcmVDb252ZXhfd29ybGROb3JtYWw7CiAgICAgICAgcWoudm11bHQobm9ybWFsLCB3b3JsZE5vcm1hbCk7IC8vIEdldCBhIHdvcmxkIHZlcnRleCBmcm9tIHRoZSBmYWNlCgogICAgICAgIGNvbnN0IHdvcmxkUG9pbnQgPSBzcGhlcmVDb252ZXhfd29ybGRQb2ludDsKICAgICAgICBxai52bXVsdCh2ZXJ0c1tmYWNlWzBdXSwgd29ybGRQb2ludCk7CiAgICAgICAgd29ybGRQb2ludC52YWRkKHhqLCB3b3JsZFBvaW50KTsgLy8gR2V0IGEgcG9pbnQgb24gdGhlIHNwaGVyZSwgY2xvc2VzdCB0byB0aGUgZmFjZSBub3JtYWwKCiAgICAgICAgY29uc3Qgd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lID0gc3BoZXJlQ29udmV4X3dvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZTsKICAgICAgICB3b3JsZE5vcm1hbC5zY2FsZSgtUiwgd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lKTsKICAgICAgICB4aS52YWRkKHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSwgd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lKTsgLy8gVmVjdG9yIGZyb20gYSBmYWNlIHBvaW50IHRvIHRoZSBjbG9zZXN0IHBvaW50IG9uIHRoZSBzcGhlcmUKCiAgICAgICAgY29uc3QgcGVuZXRyYXRpb25WZWMgPSBzcGhlcmVDb252ZXhfcGVuZXRyYXRpb25WZWM7CiAgICAgICAgd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lLnZzdWIod29ybGRQb2ludCwgcGVuZXRyYXRpb25WZWMpOyAvLyBUaGUgcGVuZXRyYXRpb24uIE5lZ2F0aXZlIHZhbHVlIG1lYW5zIG92ZXJsYXAuCgogICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uID0gcGVuZXRyYXRpb25WZWMuZG90KHdvcmxkTm9ybWFsKTsKICAgICAgICBjb25zdCB3b3JsZFBvaW50VG9TcGhlcmUgPSBzcGhlcmVDb252ZXhfc3BoZXJlVG9Xb3JsZFBvaW50OwogICAgICAgIHhpLnZzdWIod29ybGRQb2ludCwgd29ybGRQb2ludFRvU3BoZXJlKTsKCiAgICAgICAgaWYgKHBlbmV0cmF0aW9uIDwgMCAmJiB3b3JsZFBvaW50VG9TcGhlcmUuZG90KHdvcmxkTm9ybWFsKSA+IDApIHsKICAgICAgICAgIC8vIEludGVyc2VjdHMgcGxhbmUuIE5vdyBjaGVjayBpZiB0aGUgc3BoZXJlIGlzIGluc2lkZSB0aGUgZmFjZSBwb2x5Z29uCiAgICAgICAgICBjb25zdCBmYWNlVmVydHMgPSBbXTsgLy8gRmFjZSB2ZXJ0aWNlcywgaW4gd29ybGQgY29vcmRzCgogICAgICAgICAgZm9yIChsZXQgaiA9IDAsIE52ZXJ0cyA9IGZhY2UubGVuZ3RoOyBqICE9PSBOdmVydHM7IGorKykgewogICAgICAgICAgICBjb25zdCB3b3JsZFZlcnRleCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVtqXV0sIHdvcmxkVmVydGV4KTsKICAgICAgICAgICAgeGoudmFkZCh3b3JsZFZlcnRleCwgd29ybGRWZXJ0ZXgpOwogICAgICAgICAgICBmYWNlVmVydHMucHVzaCh3b3JsZFZlcnRleCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHBvaW50SW5Qb2x5Z29uKGZhY2VWZXJ0cywgd29ybGROb3JtYWwsIHhpKSkgewogICAgICAgICAgICAvLyBJcyB0aGUgc3BoZXJlIGNlbnRlciBpbiB0aGUgZmFjZSBwb2x5Z29uPwogICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHIucmkpOyAvLyBDb250YWN0IG9mZnNldCwgZnJvbSBzcGhlcmUgY2VudGVyIHRvIGNvbnRhY3QKCiAgICAgICAgICAgIHdvcmxkTm9ybWFsLm5lZ2F0ZShyLm5pKTsgLy8gTm9ybWFsIHBvaW50aW5nIG91dCBvZiBzcGhlcmUKCiAgICAgICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjMiA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLXBlbmV0cmF0aW9uLCBwZW5ldHJhdGlvblZlYzIpOwogICAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvblNwaGVyZVBvaW50ID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICB3b3JsZE5vcm1hbC5zY2FsZSgtUiwgcGVuZXRyYXRpb25TcGhlcmVQb2ludCk7IC8veGkudnN1Yih4aikudmFkZChwZW5ldHJhdGlvblNwaGVyZVBvaW50KS52YWRkKHBlbmV0cmF0aW9uVmVjMiAsIHIucmopOwoKICAgICAgICAgICAgeGkudnN1Yih4aiwgci5yaik7CiAgICAgICAgICAgIHIucmoudmFkZChwZW5ldHJhdGlvblNwaGVyZVBvaW50LCByLnJqKTsKICAgICAgICAgICAgci5yai52YWRkKHBlbmV0cmF0aW9uVmVjMiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7CiAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHBlbmV0cmF0aW9uVmVjMik7CiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQpOwogICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7IC8vIFJlbGVhc2Ugd29ybGQgdmVydGljZXMKCiAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOZmFjZXZlcnRzID0gZmFjZVZlcnRzLmxlbmd0aDsgaiAhPT0gTmZhY2V2ZXJ0czsgaisrKSB7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoZmFjZVZlcnRzW2pdKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuOyAvLyBXZSBvbmx5IGV4cGVjdCAqb25lKiBmYWNlIGNvbnRhY3QKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIEVkZ2U/CiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBmYWNlLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgLy8gR2V0IHR3byB3b3JsZCB0cmFuc2Zvcm1lZCB2ZXJ0aWNlcwogICAgICAgICAgICAgIGNvbnN0IHYxID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIGNvbnN0IHYyID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2VbKGogKyAxKSAlIGZhY2UubGVuZ3RoXV0sIHYxKTsKICAgICAgICAgICAgICBxai52bXVsdCh2ZXJ0c1tmYWNlWyhqICsgMikgJSBmYWNlLmxlbmd0aF1dLCB2Mik7CiAgICAgICAgICAgICAgeGoudmFkZCh2MSwgdjEpOwogICAgICAgICAgICAgIHhqLnZhZGQodjIsIHYyKTsgLy8gQ29uc3RydWN0IGVkZ2UgdmVjdG9yCgogICAgICAgICAgICAgIGNvbnN0IGVkZ2UgPSBzcGhlcmVDb252ZXhfZWRnZTsKICAgICAgICAgICAgICB2Mi52c3ViKHYxLCBlZGdlKTsgLy8gQ29uc3RydWN0IHRoZSBzYW1lIHZlY3RvciwgYnV0IG5vcm1hbGl6ZWQKCiAgICAgICAgICAgICAgY29uc3QgZWRnZVVuaXQgPSBzcGhlcmVDb252ZXhfZWRnZVVuaXQ7CiAgICAgICAgICAgICAgZWRnZS51bml0KGVkZ2VVbml0KTsgLy8gcCBpcyB4aSBwcm9qZWN0ZWQgb250byB0aGUgZWRnZQoKICAgICAgICAgICAgICBjb25zdCBwID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIGNvbnN0IHYxX3RvX3hpID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIHhpLnZzdWIodjEsIHYxX3RvX3hpKTsKICAgICAgICAgICAgICBjb25zdCBkb3QgPSB2MV90b194aS5kb3QoZWRnZVVuaXQpOwogICAgICAgICAgICAgIGVkZ2VVbml0LnNjYWxlKGRvdCwgcCk7CiAgICAgICAgICAgICAgcC52YWRkKHYxLCBwKTsgLy8gQ29tcHV0ZSBhIHZlY3RvciBmcm9tIHAgdG8gdGhlIGNlbnRlciBvZiB0aGUgc3BoZXJlCgogICAgICAgICAgICAgIGNvbnN0IHhpX3RvX3AgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgICAgcC52c3ViKHhpLCB4aV90b19wKTsgLy8gQ29sbGlzaW9uIGlmIHRoZSBlZGdlLXNwaGVyZSBkaXN0YW5jZSBpcyBsZXNzIHRoYW4gdGhlIHJhZGl1cwogICAgICAgICAgICAgIC8vIEFORCBpZiBwIGlzIGluIGJldHdlZW4gdjEgYW5kIHYyCgogICAgICAgICAgICAgIGlmIChkb3QgPiAwICYmIGRvdCAqIGRvdCA8IGVkZ2UubGVuZ3RoU3F1YXJlZCgpICYmIHhpX3RvX3AubGVuZ3RoU3F1YXJlZCgpIDwgUiAqIFIpIHsKICAgICAgICAgICAgICAgIC8vIENvbGxpc2lvbiBpZiB0aGUgZWRnZS1zcGhlcmUgZGlzdGFuY2UgaXMgbGVzcyB0aGFuIHRoZSByYWRpdXMKICAgICAgICAgICAgICAgIC8vIEVkZ2UgY29udGFjdCEKICAgICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgICAgICAgIHAudnN1Yih4aiwgci5yaik7CiAgICAgICAgICAgICAgICBwLnZzdWIoeGksIHIubmkpOwogICAgICAgICAgICAgICAgci5uaS5ub3JtYWxpemUoKTsKICAgICAgICAgICAgICAgIHIubmkuc2NhbGUoUiwgci5yaSk7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LgoKICAgICAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsgLy8gUmVsZWFzZSB3b3JsZCB2ZXJ0aWNlcwoKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOZmFjZXZlcnRzID0gZmFjZVZlcnRzLmxlbmd0aDsgaiAhPT0gTmZhY2V2ZXJ0czsgaisrKSB7CiAgICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjEpOwogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjIpOwogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UocCk7CiAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh4aV90b19wKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxX3RvX3hpKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxKTsKICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2Mik7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UocCk7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoeGlfdG9fcCk7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjFfdG9feGkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IC8vIFJlbGVhc2Ugd29ybGQgdmVydGljZXMKCgogICAgICAgICAgZm9yIChsZXQgaiA9IDAsIE5mYWNldmVydHMgPSBmYWNlVmVydHMubGVuZ3RoOyBqICE9PSBOZmFjZXZlcnRzOyBqKyspIHsKICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoZmFjZVZlcnRzW2pdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBwbGFuZUNvbnZleChwbGFuZVNoYXBlLCBjb252ZXhTaGFwZSwgcGxhbmVQb3NpdGlvbiwgY29udmV4UG9zaXRpb24sIHBsYW5lUXVhdCwgY29udmV4UXVhdCwgcGxhbmVCb2R5LCBjb252ZXhCb2R5LCBzaSwgc2osIGp1c3RUZXN0KSB7CiAgICAgIC8vIFNpbXBseSByZXR1cm4gdGhlIHBvaW50cyBiZWhpbmQgdGhlIHBsYW5lLgogICAgICBjb25zdCB3b3JsZFZlcnRleCA9IHBsYW5lQ29udmV4X3Y7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gcGxhbmVDb252ZXhfbm9ybWFsOwogICAgICB3b3JsZE5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIHBsYW5lUXVhdC52bXVsdCh3b3JsZE5vcm1hbCwgd29ybGROb3JtYWwpOyAvLyBUdXJuIG5vcm1hbCBhY2NvcmRpbmcgdG8gcGxhbmUgb3JpZW50YXRpb24KCiAgICAgIGxldCBudW1Db250YWN0cyA9IDA7CiAgICAgIGNvbnN0IHJlbHBvcyA9IHBsYW5lQ29udmV4X3JlbHBvczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBjb252ZXhTaGFwZS52ZXJ0aWNlcy5sZW5ndGg7IGkrKykgewogICAgICAgIC8vIEdldCB3b3JsZCBjb252ZXggdmVydGV4CiAgICAgICAgd29ybGRWZXJ0ZXguY29weShjb252ZXhTaGFwZS52ZXJ0aWNlc1tpXSk7CiAgICAgICAgY29udmV4UXVhdC52bXVsdCh3b3JsZFZlcnRleCwgd29ybGRWZXJ0ZXgpOwogICAgICAgIGNvbnZleFBvc2l0aW9uLnZhZGQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICB3b3JsZFZlcnRleC52c3ViKHBsYW5lUG9zaXRpb24sIHJlbHBvcyk7CiAgICAgICAgY29uc3QgZG90ID0gd29ybGROb3JtYWwuZG90KHJlbHBvcyk7CgogICAgICAgIGlmIChkb3QgPD0gMC4wKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKHBsYW5lQm9keSwgY29udmV4Qm9keSwgcGxhbmVTaGFwZSwgY29udmV4U2hhcGUsIHNpLCBzaik7IC8vIEdldCB2ZXJ0ZXggcG9zaXRpb24gcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgICAgY29uc3QgcHJvamVjdGVkID0gcGxhbmVDb252ZXhfcHJvamVjdGVkOwogICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUod29ybGROb3JtYWwuZG90KHJlbHBvcyksIHByb2plY3RlZCk7CiAgICAgICAgICB3b3JsZFZlcnRleC52c3ViKHByb2plY3RlZCwgcHJvamVjdGVkKTsKICAgICAgICAgIHByb2plY3RlZC52c3ViKHBsYW5lUG9zaXRpb24sIHIucmkpOyAvLyBGcm9tIHBsYW5lIHRvIHZlcnRleCBwcm9qZWN0ZWQgb24gcGxhbmUKCiAgICAgICAgICByLm5pLmNvcHkod29ybGROb3JtYWwpOyAvLyBDb250YWN0IG5vcm1hbCBpcyB0aGUgcGxhbmUgbm9ybWFsIG91dCBmcm9tIHBsYW5lCiAgICAgICAgICAvLyByaiBpcyBub3cganVzdCB0aGUgdmVjdG9yIGZyb20gdGhlIGNvbnZleCBjZW50ZXIgdG8gdGhlIHZlcnRleAoKICAgICAgICAgIHdvcmxkVmVydGV4LnZzdWIoY29udmV4UG9zaXRpb24sIHIucmopOyAvLyBNYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSBib2R5CgogICAgICAgICAgci5yaS52YWRkKHBsYW5lUG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yaS52c3ViKHBsYW5lQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICByLnJqLnZhZGQoY29udmV4UG9zaXRpb24sIHIucmopOwogICAgICAgICAgci5yai52c3ViKGNvbnZleEJvZHkucG9zaXRpb24sIHIucmopOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIG51bUNvbnRhY3RzKys7CgogICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uKSB7CiAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uICYmIG51bUNvbnRhY3RzKSB7CiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkZyb21BdmVyYWdlKG51bUNvbnRhY3RzKTsKICAgICAgfQogICAgfQoKICAgIGJveENvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzaS5tYXRlcmlhbDsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2kuY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleChzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgIH0KCiAgICBzcGhlcmVIZWlnaHRmaWVsZChzcGhlcmVTaGFwZSwgaGZTaGFwZSwgc3BoZXJlUG9zLCBoZlBvcywgc3BoZXJlUXVhdCwgaGZRdWF0LCBzcGhlcmVCb2R5LCBoZkJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCBkYXRhID0gaGZTaGFwZS5kYXRhOwogICAgICBjb25zdCByYWRpdXMgPSBzcGhlcmVTaGFwZS5yYWRpdXM7CiAgICAgIGNvbnN0IHcgPSBoZlNoYXBlLmVsZW1lbnRTaXplOwogICAgICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IHNwaGVyZUhlaWdodGZpZWxkX3RtcDI7IC8vIEdldCBzcGhlcmUgcG9zaXRpb24gdG8gaGVpZ2h0ZmllbGQgbG9jYWwhCgogICAgICBjb25zdCBsb2NhbFNwaGVyZVBvcyA9IHNwaGVyZUhlaWdodGZpZWxkX3RtcDE7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShoZlBvcywgaGZRdWF0LCBzcGhlcmVQb3MsIGxvY2FsU3BoZXJlUG9zKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CgogICAgICBsZXQgaU1pblggPSBNYXRoLmZsb29yKChsb2NhbFNwaGVyZVBvcy54IC0gcmFkaXVzKSAvIHcpIC0gMTsKICAgICAgbGV0IGlNYXhYID0gTWF0aC5jZWlsKChsb2NhbFNwaGVyZVBvcy54ICsgcmFkaXVzKSAvIHcpICsgMTsKICAgICAgbGV0IGlNaW5ZID0gTWF0aC5mbG9vcigobG9jYWxTcGhlcmVQb3MueSAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WSA9IE1hdGguY2VpbCgobG9jYWxTcGhlcmVQb3MueSArIHJhZGl1cykgLyB3KSArIDE7IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCiAgICAgIGlmIChpTWF4WCA8IDAgfHwgaU1heFkgPCAwIHx8IGlNaW5YID4gZGF0YS5sZW5ndGggfHwgaU1pblkgPiBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwoKCiAgICAgIGlmIChpTWluWCA8IDApIHsKICAgICAgICBpTWluWCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WCA8IDApIHsKICAgICAgICBpTWF4WCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA8IDApIHsKICAgICAgICBpTWluWSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA8IDApIHsKICAgICAgICBpTWF4WSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWCA+PSBkYXRhLmxlbmd0aCkgewogICAgICAgIGlNaW5YID0gZGF0YS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1heFggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWF4WCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhZID49IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgaU1heFkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNaW5ZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBjb25zdCBtaW5NYXggPSBbXTsKICAgICAgaGZTaGFwZS5nZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCBtaW5NYXgpOwogICAgICBjb25zdCBtaW4gPSBtaW5NYXhbMF07CiAgICAgIGNvbnN0IG1heCA9IG1pbk1heFsxXTsgLy8gQmFpbCBvdXQgaWYgd2UgY2FuJ3QgdG91Y2ggdGhlIGJvdW5kaW5nIGhlaWdodCBib3gKCiAgICAgIGlmIChsb2NhbFNwaGVyZVBvcy56IC0gcmFkaXVzID4gbWF4IHx8IGxvY2FsU3BoZXJlUG9zLnogKyByYWRpdXMgPCBtaW4pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucmVzdWx0OwoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDwgaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHsKICAgICAgICAgIGNvbnN0IG51bUNvbnRhY3RzQmVmb3JlID0gcmVzdWx0Lmxlbmd0aDsKICAgICAgICAgIGxldCBpbnRlcnNlY3RpbmcgPSBmYWxzZTsgLy8gTG93ZXIgdHJpYW5nbGUKCiAgICAgICAgICBoZlNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChzcGhlcmVQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNwaGVyZVNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuc3BoZXJlQ29udmV4KHNwaGVyZVNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgc3BoZXJlUG9zLCB3b3JsZFBpbGxhck9mZnNldCwgc3BoZXJlUXVhdCwgaGZRdWF0LCBzcGhlcmVCb2R5LCBoZkJvZHksIHNwaGVyZVNoYXBlLCBoZlNoYXBlLCBqdXN0VGVzdCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGUKCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCB0cnVlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChzcGhlcmVQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNwaGVyZVNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuc3BoZXJlQ29udmV4KHNwaGVyZVNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgc3BoZXJlUG9zLCB3b3JsZFBpbGxhck9mZnNldCwgc3BoZXJlUXVhdCwgaGZRdWF0LCBzcGhlcmVCb2R5LCBoZkJvZHksIHNwaGVyZVNoYXBlLCBoZlNoYXBlLCBqdXN0VGVzdCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCBudW1Db250YWN0cyA9IHJlc3VsdC5sZW5ndGggLSBudW1Db250YWN0c0JlZm9yZTsKCiAgICAgICAgICBpZiAobnVtQ29udGFjdHMgPiAyKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIC8qCiAgICAgICAgICAgIC8vIFNraXAgYWxsIGJ1dCAxCiAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgbnVtQ29udGFjdHMgLSAxOyBrKyspIHsKICAgICAgICAgICAgICAgIHJlc3VsdC5wb3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgKi8KCiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgYm94SGVpZ2h0ZmllbGQoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZChzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgIH0KCiAgICBjb252ZXhIZWlnaHRmaWVsZChjb252ZXhTaGFwZSwgaGZTaGFwZSwgY29udmV4UG9zLCBoZlBvcywgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCBkYXRhID0gaGZTaGFwZS5kYXRhOwogICAgICBjb25zdCB3ID0gaGZTaGFwZS5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgcmFkaXVzID0gY29udmV4U2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXM7CiAgICAgIGNvbnN0IHdvcmxkUGlsbGFyT2Zmc2V0ID0gY29udmV4SGVpZ2h0ZmllbGRfdG1wMjsKICAgICAgY29uc3QgZmFjZUxpc3QgPSBjb252ZXhIZWlnaHRmaWVsZF9mYWNlTGlzdDsgLy8gR2V0IHNwaGVyZSBwb3NpdGlvbiB0byBoZWlnaHRmaWVsZCBsb2NhbCEKCiAgICAgIGNvbnN0IGxvY2FsQ29udmV4UG9zID0gY29udmV4SGVpZ2h0ZmllbGRfdG1wMTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKGhmUG9zLCBoZlF1YXQsIGNvbnZleFBvcywgbG9jYWxDb252ZXhQb3MpOyAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkYXRhIHBvaW50cyB0byB0ZXN0IGFnYWluc3QKCiAgICAgIGxldCBpTWluWCA9IE1hdGguZmxvb3IoKGxvY2FsQ29udmV4UG9zLnggLSByYWRpdXMpIC8gdykgLSAxOwogICAgICBsZXQgaU1heFggPSBNYXRoLmNlaWwoKGxvY2FsQ29udmV4UG9zLnggKyByYWRpdXMpIC8gdykgKyAxOwogICAgICBsZXQgaU1pblkgPSBNYXRoLmZsb29yKChsb2NhbENvbnZleFBvcy55IC0gcmFkaXVzKSAvIHcpIC0gMTsKICAgICAgbGV0IGlNYXhZID0gTWF0aC5jZWlsKChsb2NhbENvbnZleFBvcy55ICsgcmFkaXVzKSAvIHcpICsgMTsgLy8gQmFpbCBvdXQgaWYgd2UgYXJlIG91dCBvZiB0aGUgdGVycmFpbgoKICAgICAgaWYgKGlNYXhYIDwgMCB8fCBpTWF4WSA8IDAgfHwgaU1pblggPiBkYXRhLmxlbmd0aCB8fCBpTWluWSA+IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIENsYW1wIGluZGV4IHRvIGVkZ2VzCgoKICAgICAgaWYgKGlNaW5YIDwgMCkgewogICAgICAgIGlNaW5YID0gMDsKICAgICAgfQoKICAgICAgaWYgKGlNYXhYIDwgMCkgewogICAgICAgIGlNYXhYID0gMDsKICAgICAgfQoKICAgICAgaWYgKGlNaW5ZIDwgMCkgewogICAgICAgIGlNaW5ZID0gMDsKICAgICAgfQoKICAgICAgaWYgKGlNYXhZIDwgMCkgewogICAgICAgIGlNYXhZID0gMDsKICAgICAgfQoKICAgICAgaWYgKGlNaW5YID49IGRhdGEubGVuZ3RoKSB7CiAgICAgICAgaU1pblggPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WCA+PSBkYXRhLmxlbmd0aCkgewogICAgICAgIGlNYXhYID0gZGF0YS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1heFkgPj0gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICBpTWF4WSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNaW5ZID49IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgaU1pblkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGNvbnN0IG1pbk1heCA9IFtdOwogICAgICBoZlNoYXBlLmdldFJlY3RNaW5NYXgoaU1pblgsIGlNaW5ZLCBpTWF4WCwgaU1heFksIG1pbk1heCk7CiAgICAgIGNvbnN0IG1pbiA9IG1pbk1heFswXTsKICAgICAgY29uc3QgbWF4ID0gbWluTWF4WzFdOyAvLyBCYWlsIG91dCBpZiB3ZSdyZSBjYW50IHRvdWNoIHRoZSBib3VuZGluZyBoZWlnaHQgYm94CgogICAgICBpZiAobG9jYWxDb252ZXhQb3MueiAtIHJhZGl1cyA+IG1heCB8fCBsb2NhbENvbnZleFBvcy56ICsgcmFkaXVzIDwgbWluKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gaU1pblg7IGkgPCBpTWF4WDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IGlNaW5ZOyBqIDwgaU1heFk7IGorKykgewogICAgICAgICAgbGV0IGludGVyc2VjdGluZyA9IGZhbHNlOyAvLyBMb3dlciB0cmlhbmdsZQoKICAgICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgZmFsc2UpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKGhmUG9zLCBoZlF1YXQsIGhmU2hhcGUucGlsbGFyT2Zmc2V0LCB3b3JsZFBpbGxhck9mZnNldCk7CgogICAgICAgICAgaWYgKGNvbnZleFBvcy5kaXN0YW5jZVRvKHdvcmxkUGlsbGFyT2Zmc2V0KSA8IGhmU2hhcGUucGlsbGFyQ29udmV4LmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgY29udmV4U2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICAgICAgaW50ZXJzZWN0aW5nID0gdGhpcy5jb252ZXhDb252ZXgoY29udmV4U2hhcGUsIGhmU2hhcGUucGlsbGFyQ29udmV4LCBjb252ZXhQb3MsIHdvcmxkUGlsbGFyT2Zmc2V0LCBjb252ZXhRdWF0LCBoZlF1YXQsIGNvbnZleEJvZHksIGhmQm9keSwgbnVsbCwgbnVsbCwganVzdFRlc3QsIGZhY2VMaXN0LCBudWxsKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoanVzdFRlc3QgJiYgaW50ZXJzZWN0aW5nKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfSAvLyBVcHBlciB0cmlhbmdsZQoKCiAgICAgICAgICBoZlNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIHRydWUpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKGhmUG9zLCBoZlF1YXQsIGhmU2hhcGUucGlsbGFyT2Zmc2V0LCB3b3JsZFBpbGxhck9mZnNldCk7CgogICAgICAgICAgaWYgKGNvbnZleFBvcy5kaXN0YW5jZVRvKHdvcmxkUGlsbGFyT2Zmc2V0KSA8IGhmU2hhcGUucGlsbGFyQ29udmV4LmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgY29udmV4U2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICAgICAgaW50ZXJzZWN0aW5nID0gdGhpcy5jb252ZXhDb252ZXgoY29udmV4U2hhcGUsIGhmU2hhcGUucGlsbGFyQ29udmV4LCBjb252ZXhQb3MsIHdvcmxkUGlsbGFyT2Zmc2V0LCBjb252ZXhRdWF0LCBoZlF1YXQsIGNvbnZleEJvZHksIGhmQm9keSwgbnVsbCwgbnVsbCwganVzdFRlc3QsIGZhY2VMaXN0LCBudWxsKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoanVzdFRlc3QgJiYgaW50ZXJzZWN0aW5nKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHNwaGVyZVBhcnRpY2xlKHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIC8vIFRoZSBub3JtYWwgaXMgdGhlIHVuaXQgdmVjdG9yIGZyb20gc3BoZXJlIGNlbnRlciB0byBwYXJ0aWNsZSBjZW50ZXIKICAgICAgY29uc3Qgbm9ybWFsID0gcGFydGljbGVTcGhlcmVfbm9ybWFsOwogICAgICBub3JtYWwuc2V0KDAsIDAsIDEpOwogICAgICB4aS52c3ViKHhqLCBub3JtYWwpOwogICAgICBjb25zdCBsZW5ndGhTcXVhcmVkID0gbm9ybWFsLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgIGlmIChsZW5ndGhTcXVhcmVkIDw9IHNqLnJhZGl1cyAqIHNqLnJhZGl1cykgewogICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgci5yai5jb3B5KG5vcm1hbCk7CiAgICAgICAgci5yai5zY2FsZShzai5yYWRpdXMsIHIucmopOwogICAgICAgIHIubmkuY29weShub3JtYWwpOyAvLyBDb250YWN0IG5vcm1hbAoKICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlCgogICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICB9CiAgICB9CgogICAgcGxhbmVQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCBub3JtYWwgPSBwYXJ0aWNsZVBsYW5lX25vcm1hbDsKICAgICAgbm9ybWFsLnNldCgwLCAwLCAxKTsKICAgICAgYmoucXVhdGVybmlvbi52bXVsdChub3JtYWwsIG5vcm1hbCk7IC8vIFR1cm4gbm9ybWFsIGFjY29yZGluZyB0byBwbGFuZSBvcmllbnRhdGlvbgoKICAgICAgY29uc3QgcmVscG9zID0gcGFydGljbGVQbGFuZV9yZWxwb3M7CiAgICAgIHhpLnZzdWIoYmoucG9zaXRpb24sIHJlbHBvcyk7CiAgICAgIGNvbnN0IGRvdCA9IG5vcm1hbC5kb3QocmVscG9zKTsKCiAgICAgIGlmIChkb3QgPD0gMC4wKSB7CiAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgIHIubmkuY29weShub3JtYWwpOyAvLyBDb250YWN0IG5vcm1hbCBpcyB0aGUgcGxhbmUgbm9ybWFsCgogICAgICAgIHIubmkubmVnYXRlKHIubmkpOwogICAgICAgIHIucmkuc2V0KDAsIDAsIDApOyAvLyBDZW50ZXIgb2YgcGFydGljbGUKICAgICAgICAvLyBHZXQgcGFydGljbGUgcG9zaXRpb24gcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBhcnRpY2xlUGxhbmVfcHJvamVjdGVkOwogICAgICAgIG5vcm1hbC5zY2FsZShub3JtYWwuZG90KHhpKSwgcHJvamVjdGVkKTsKICAgICAgICB4aS52c3ViKHByb2plY3RlZCwgcHJvamVjdGVkKTsgLy9wcm9qZWN0ZWQudmFkZChiai5wb3NpdGlvbixwcm9qZWN0ZWQpOwogICAgICAgIC8vIHJqIGlzIG5vdyB0aGUgcHJvamVjdGVkIHdvcmxkIHBvc2l0aW9uIG1pbnVzIHBsYW5lIHBvc2l0aW9uCgogICAgICAgIHIucmouY29weShwcm9qZWN0ZWQpOwogICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICB9CiAgICB9CgogICAgYm94UGFydGljbGUoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZShzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgIH0KCiAgICBjb252ZXhQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBsZXQgcGVuZXRyYXRlZEZhY2VJbmRleCA9IC0xOwogICAgICBjb25zdCBwZW5ldHJhdGVkRmFjZU5vcm1hbCA9IGNvbnZleFBhcnRpY2xlX3BlbmV0cmF0ZWRGYWNlTm9ybWFsOwogICAgICBjb25zdCB3b3JsZFBlbmV0cmF0aW9uVmVjID0gY29udmV4UGFydGljbGVfd29ybGRQZW5ldHJhdGlvblZlYzsKICAgICAgbGV0IG1pblBlbmV0cmF0aW9uID0gbnVsbDsKCiAgICAgIGNvbnN0IGxvY2FsID0gY29udmV4UGFydGljbGVfbG9jYWw7CiAgICAgIGxvY2FsLmNvcHkoeGkpOwogICAgICBsb2NhbC52c3ViKHhqLCBsb2NhbCk7IC8vIENvbnZlcnQgcG9zaXRpb24gdG8gcmVsYXRpdmUgdGhlIGNvbnZleCBvcmlnaW4KCiAgICAgIHFqLmNvbmp1Z2F0ZShjcWopOwogICAgICBjcWoudm11bHQobG9jYWwsIGxvY2FsKTsKCiAgICAgIGlmIChzai5wb2ludElzSW5zaWRlKGxvY2FsKSkgewogICAgICAgIGlmIChzai53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIHNqLmNvbXB1dGVXb3JsZFZlcnRpY2VzKHhqLCBxaik7CiAgICAgICAgfQoKICAgICAgICBpZiAoc2oud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlKSB7CiAgICAgICAgICBzai5jb21wdXRlV29ybGRGYWNlTm9ybWFscyhxaik7CiAgICAgICAgfSAvLyBGb3IgZWFjaCB3b3JsZCBwb2x5Z29uIGluIHRoZSBwb2x5aGVkcmEKCgogICAgICAgIGZvciAobGV0IGkgPSAwLCBuZmFjZXMgPSBzai5mYWNlcy5sZW5ndGg7IGkgIT09IG5mYWNlczsgaSsrKSB7CiAgICAgICAgICAvLyBDb25zdHJ1Y3Qgd29ybGQgZmFjZSB2ZXJ0aWNlcwogICAgICAgICAgY29uc3QgdmVydHMgPSBbc2oud29ybGRWZXJ0aWNlc1tzai5mYWNlc1tpXVswXV1dOwogICAgICAgICAgY29uc3Qgbm9ybWFsID0gc2oud29ybGRGYWNlTm9ybWFsc1tpXTsgLy8gQ2hlY2sgaG93IG11Y2ggdGhlIHBhcnRpY2xlIHBlbmV0cmF0ZXMgdGhlIHBvbHlnb24gcGxhbmUuCgogICAgICAgICAgeGkudnN1Yih2ZXJ0c1swXSwgY29udmV4UGFydGljbGVfdmVydGV4VG9QYXJ0aWNsZSk7CiAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IC1ub3JtYWwuZG90KGNvbnZleFBhcnRpY2xlX3ZlcnRleFRvUGFydGljbGUpOwoKICAgICAgICAgIGlmIChtaW5QZW5ldHJhdGlvbiA9PT0gbnVsbCB8fCBNYXRoLmFicyhwZW5ldHJhdGlvbikgPCBNYXRoLmFicyhtaW5QZW5ldHJhdGlvbikpIHsKICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG1pblBlbmV0cmF0aW9uID0gcGVuZXRyYXRpb247CiAgICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlSW5kZXggPSBpOwogICAgICAgICAgICBwZW5ldHJhdGVkRmFjZU5vcm1hbC5jb3B5KG5vcm1hbCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAocGVuZXRyYXRlZEZhY2VJbmRleCAhPT0gLTEpIHsKICAgICAgICAgIC8vIFNldHVwIGNvbnRhY3QKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwuc2NhbGUobWluUGVuZXRyYXRpb24sIHdvcmxkUGVuZXRyYXRpb25WZWMpOyAvLyByaiBpcyB0aGUgcGFydGljbGUgcG9zaXRpb24gcHJvamVjdGVkIHRvIHRoZSBmYWNlCgogICAgICAgICAgd29ybGRQZW5ldHJhdGlvblZlYy52YWRkKHhpLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTsKICAgICAgICAgIHdvcmxkUGVuZXRyYXRpb25WZWMudnN1Yih4aiwgd29ybGRQZW5ldHJhdGlvblZlYyk7CiAgICAgICAgICByLnJqLmNvcHkod29ybGRQZW5ldHJhdGlvblZlYyk7IC8vY29uc3QgcHJvamVjdGVkVG9GYWNlID0geGkudnN1Yih4aikudmFkZCh3b3JsZFBlbmV0cmF0aW9uVmVjKTsKICAgICAgICAgIC8vcHJvamVjdGVkVG9GYWNlLmNvcHkoci5yaik7CiAgICAgICAgICAvL3FqLnZtdWx0KHIucmosci5yaik7CgogICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwubmVnYXRlKHIubmkpOyAvLyBDb250YWN0IG5vcm1hbAoKICAgICAgICAgIHIucmkuc2V0KDAsIDAsIDApOyAvLyBDZW50ZXIgb2YgcGFydGljbGUKCiAgICAgICAgICBjb25zdCByaSA9IHIucmk7CiAgICAgICAgICBjb25zdCByaiA9IHIucmo7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgcmkudmFkZCh4aSwgcmkpOwogICAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpOwogICAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS53YXJuKCdQb2ludCBmb3VuZCBpbnNpZGUgY29udmV4LCBidXQgZGlkIG5vdCBmaW5kIHBlbmV0cmF0aW5nIGZhY2UhJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaGVpZ2h0ZmllbGRDeWxpbmRlcihoZlNoYXBlLCBjb252ZXhTaGFwZSwgaGZQb3MsIGNvbnZleFBvcywgaGZRdWF0LCBjb252ZXhRdWF0LCBoZkJvZHksIGNvbnZleEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZChjb252ZXhTaGFwZSwgaGZTaGFwZSwgY29udmV4UG9zLCBoZlBvcywgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgcGFydGljbGVDeWxpbmRlcihzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlVHJpbWVzaChzcGhlcmVTaGFwZSwgdHJpbWVzaFNoYXBlLCBzcGhlcmVQb3MsIHRyaW1lc2hQb3MsIHNwaGVyZVF1YXQsIHRyaW1lc2hRdWF0LCBzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IGVkZ2VWZXJ0ZXhBID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QTsKICAgICAgY29uc3QgZWRnZVZlcnRleEIgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhCOwogICAgICBjb25zdCBlZGdlVmVjdG9yID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yOwogICAgICBjb25zdCBlZGdlVmVjdG9yVW5pdCA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvclVuaXQ7CiAgICAgIGNvbnN0IGxvY2FsU3BoZXJlUG9zID0gc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvczsKICAgICAgY29uc3QgdG1wID0gc3BoZXJlVHJpbWVzaF90bXA7CiAgICAgIGNvbnN0IGxvY2FsU3BoZXJlQUFCQiA9IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCOwogICAgICBjb25zdCB2MiA9IHNwaGVyZVRyaW1lc2hfdjI7CiAgICAgIGNvbnN0IHJlbHBvcyA9IHNwaGVyZVRyaW1lc2hfcmVscG9zOwogICAgICBjb25zdCB0cmlhbmdsZXMgPSBzcGhlcmVUcmltZXNoX3RyaWFuZ2xlczsgLy8gQ29udmVydCBzcGhlcmUgcG9zaXRpb24gdG8gbG9jYWwgaW4gdGhlIHRyaW1lc2gKCiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgc3BoZXJlUG9zLCBsb2NhbFNwaGVyZVBvcyk7IC8vIEdldCB0aGUgYWFiYiBvZiB0aGUgc3BoZXJlIGxvY2FsbHkgaW4gdGhlIHRyaW1lc2gKCiAgICAgIGNvbnN0IHNwaGVyZVJhZGl1cyA9IHNwaGVyZVNoYXBlLnJhZGl1czsKICAgICAgbG9jYWxTcGhlcmVBQUJCLmxvd2VyQm91bmQuc2V0KGxvY2FsU3BoZXJlUG9zLnggLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnkgLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnogLSBzcGhlcmVSYWRpdXMpOwogICAgICBsb2NhbFNwaGVyZUFBQkIudXBwZXJCb3VuZC5zZXQobG9jYWxTcGhlcmVQb3MueCArIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueSArIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueiArIHNwaGVyZVJhZGl1cyk7CiAgICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZXNJbkFBQkIobG9jYWxTcGhlcmVBQUJCLCB0cmlhbmdsZXMpOyAvL2ZvciAobGV0IGkgPSAwOyBpIDwgdHJpbWVzaFNoYXBlLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB0cmlhbmdsZXMucHVzaChpKTsgLy8gQWxsCiAgICAgIC8vIFZlcnRpY2VzCgogICAgICBjb25zdCB2ID0gc3BoZXJlVHJpbWVzaF92OwogICAgICBjb25zdCByYWRpdXNTcXVhcmVkID0gc3BoZXJlU2hhcGUucmFkaXVzICogc3BoZXJlU2hhcGUucmFkaXVzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmlhbmdsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleCh0cmltZXNoU2hhcGUuaW5kaWNlc1t0cmlhbmdsZXNbaV0gKiAzICsgal0sIHYpOyAvLyBDaGVjayB2ZXJ0ZXggb3ZlcmxhcCBpbiBzcGhlcmUKCiAgICAgICAgICB2LnZzdWIobG9jYWxTcGhlcmVQb3MsIHJlbHBvcyk7CgogICAgICAgICAgaWYgKHJlbHBvcy5sZW5ndGhTcXVhcmVkKCkgPD0gcmFkaXVzU3F1YXJlZCkgewogICAgICAgICAgICAvLyBTYWZlIHVwCiAgICAgICAgICAgIHYyLmNvcHkodik7CiAgICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdjIsIHYpOwogICAgICAgICAgICB2LnZzdWIoc3BoZXJlUG9zLCByZWxwb3MpOwoKICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTsKICAgICAgICAgICAgci5uaS5jb3B5KHJlbHBvcyk7CiAgICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7IC8vIHJpIGlzIHRoZSB2ZWN0b3IgZnJvbSBzcGhlcmUgY2VudGVyIHRvIHRoZSBzcGhlcmUgc3VyZmFjZQoKICAgICAgICAgICAgci5yaS5jb3B5KHIubmkpOwogICAgICAgICAgICByLnJpLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7CiAgICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpOwogICAgICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgIHIucmouY29weSh2KTsKICAgICAgICAgICAgci5yai52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsgLy8gU3RvcmUgcmVzdWx0CgogICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIENoZWNrIGFsbCBlZGdlcwoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIGpdLCBlZGdlVmVydGV4QSk7CiAgICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KHRyaW1lc2hTaGFwZS5pbmRpY2VzW3RyaWFuZ2xlc1tpXSAqIDMgKyAoaiArIDEpICUgM10sIGVkZ2VWZXJ0ZXhCKTsKICAgICAgICAgIGVkZ2VWZXJ0ZXhCLnZzdWIoZWRnZVZlcnRleEEsIGVkZ2VWZWN0b3IpOyAvLyBQcm9qZWN0IHNwaGVyZSBwb3NpdGlvbiB0byB0aGUgZWRnZQoKICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEIsIHRtcCk7CiAgICAgICAgICBjb25zdCBwb3NpdGlvbkFsb25nRWRnZUIgPSB0bXAuZG90KGVkZ2VWZWN0b3IpOwogICAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1YihlZGdlVmVydGV4QSwgdG1wKTsKICAgICAgICAgIGxldCBwb3NpdGlvbkFsb25nRWRnZUEgPSB0bXAuZG90KGVkZ2VWZWN0b3IpOwoKICAgICAgICAgIGlmIChwb3NpdGlvbkFsb25nRWRnZUEgPiAwICYmIHBvc2l0aW9uQWxvbmdFZGdlQiA8IDApIHsKICAgICAgICAgICAgLy8gTm93IGNoZWNrIHRoZSBvcnRob2dvbmFsIGRpc3RhbmNlIGZyb20gZWRnZSB0byBzcGhlcmUgY2VudGVyCiAgICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEEsIHRtcCk7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0LmNvcHkoZWRnZVZlY3Rvcik7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0Lm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBwb3NpdGlvbkFsb25nRWRnZUEgPSB0bXAuZG90KGVkZ2VWZWN0b3JVbml0KTsKICAgICAgICAgICAgZWRnZVZlY3RvclVuaXQuc2NhbGUocG9zaXRpb25BbG9uZ0VkZ2VBLCB0bXApOwogICAgICAgICAgICB0bXAudmFkZChlZGdlVmVydGV4QSwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIGNlbnRlciBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIGVkZ2UsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgdHJpbWVzaCBmcmFtZQoKICAgICAgICAgICAgY29uc3QgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTsKCiAgICAgICAgICAgIGlmIChkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7CiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgICAgIHRtcC52c3ViKGxvY2FsU3BoZXJlUG9zLCByLm5pKTsKICAgICAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTsKICAgICAgICAgICAgICByLnJpLnZhZGQoc3BoZXJlUG9zLCByLnJpKTsKICAgICAgICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7CiAgICAgICAgICAgICAgdG1wLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOwogICAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIubmksIHIubmkpOwogICAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpOwogICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIFRyaWFuZ2xlIGZhY2VzCgoKICAgICAgY29uc3QgdmEgPSBzcGhlcmVUcmltZXNoX3ZhOwogICAgICBjb25zdCB2YiA9IHNwaGVyZVRyaW1lc2hfdmI7CiAgICAgIGNvbnN0IHZjID0gc3BoZXJlVHJpbWVzaF92YzsKICAgICAgY29uc3Qgbm9ybWFsID0gc3BoZXJlVHJpbWVzaF9ub3JtYWw7CgogICAgICBmb3IgKGxldCBpID0gMCwgTiA9IHRyaWFuZ2xlcy5sZW5ndGg7IGkgIT09IE47IGkrKykgewogICAgICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZVZlcnRpY2VzKHRyaWFuZ2xlc1tpXSwgdmEsIHZiLCB2Yyk7CiAgICAgICAgdHJpbWVzaFNoYXBlLmdldE5vcm1hbCh0cmlhbmdsZXNbaV0sIG5vcm1hbCk7CiAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1Yih2YSwgdG1wKTsKICAgICAgICBsZXQgZGlzdCA9IHRtcC5kb3Qobm9ybWFsKTsKICAgICAgICBub3JtYWwuc2NhbGUoZGlzdCwgdG1wKTsKICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKHRtcCwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIHBvc2l0aW9uIHByb2plY3RlZCB0byB0aGUgdHJpYW5nbGUgcGxhbmUKCiAgICAgICAgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTsKCiAgICAgICAgaWYgKFJheS5wb2ludEluVHJpYW5nbGUodG1wLCB2YSwgdmIsIHZjKSAmJiBkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgdG1wLnZzdWIobG9jYWxTcGhlcmVQb3MsIHIubmkpOwogICAgICAgICAgci5uaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTsKICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpOwogICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7CiAgICAgICAgICB0bXAudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLm5pLCByLm5pKTsKICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRyaWFuZ2xlcy5sZW5ndGggPSAwOwogICAgfQoKICAgIHBsYW5lVHJpbWVzaChwbGFuZVNoYXBlLCB0cmltZXNoU2hhcGUsIHBsYW5lUG9zLCB0cmltZXNoUG9zLCBwbGFuZVF1YXQsIHRyaW1lc2hRdWF0LCBwbGFuZUJvZHksIHRyaW1lc2hCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgLy8gTWFrZSBjb250YWN0cyEKICAgICAgY29uc3QgdiA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IG5vcm1hbCA9IHBsYW5lVHJpbWVzaF9ub3JtYWw7CiAgICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIHBsYW5lUXVhdC52bXVsdChub3JtYWwsIG5vcm1hbCk7IC8vIFR1cm4gbm9ybWFsIGFjY29yZGluZyB0byBwbGFuZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmltZXNoU2hhcGUudmVydGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgLy8gR2V0IHdvcmxkIHZlcnRleCBmcm9tIHRyaW1lc2gKICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KGksIHYpOyAvLyBTYWZlIHVwCgogICAgICAgIGNvbnN0IHYyID0gbmV3IFZlYzMoKTsKICAgICAgICB2Mi5jb3B5KHYpOwogICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdjIsIHYpOyAvLyBDaGVjayBwbGFuZSBzaWRlCgogICAgICAgIGNvbnN0IHJlbHBvcyA9IHBsYW5lVHJpbWVzaF9yZWxwb3M7CiAgICAgICAgdi52c3ViKHBsYW5lUG9zLCByZWxwb3MpOwogICAgICAgIGNvbnN0IGRvdCA9IG5vcm1hbC5kb3QocmVscG9zKTsKCiAgICAgICAgaWYgKGRvdCA8PSAwLjApIHsKICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24ocGxhbmVCb2R5LCB0cmltZXNoQm9keSwgcGxhbmVTaGFwZSwgdHJpbWVzaFNoYXBlLCByc2ksIHJzaik7CiAgICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbAogICAgICAgICAgLy8gR2V0IHZlcnRleCBwb3NpdGlvbiBwcm9qZWN0ZWQgb24gcGxhbmUKCiAgICAgICAgICBjb25zdCBwcm9qZWN0ZWQgPSBwbGFuZVRyaW1lc2hfcHJvamVjdGVkOwogICAgICAgICAgbm9ybWFsLnNjYWxlKHJlbHBvcy5kb3Qobm9ybWFsKSwgcHJvamVjdGVkKTsKICAgICAgICAgIHYudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vIHJpIGlzIHRoZSBwcm9qZWN0ZWQgd29ybGQgcG9zaXRpb24gbWludXMgcGxhbmUgcG9zaXRpb24KCiAgICAgICAgICByLnJpLmNvcHkocHJvamVjdGVkKTsKICAgICAgICAgIHIucmkudnN1YihwbGFuZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yai5jb3B5KHYpOwogICAgICAgICAgci5yai52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsgLy8gU3RvcmUgcmVzdWx0CgogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gLy8gY29udmV4VHJpbWVzaCgKICAgIC8vICAgc2k6IENvbnZleFBvbHloZWRyb24sIHNqOiBUcmltZXNoLCB4aTogVmVjMywgeGo6IFZlYzMsIHFpOiBRdWF0ZXJuaW9uLCBxajogUXVhdGVybmlvbiwKICAgIC8vICAgYmk6IEJvZHksIGJqOiBCb2R5LCByc2k/OiBTaGFwZSB8IG51bGwsIHJzaj86IFNoYXBlIHwgbnVsbCwKICAgIC8vICAgZmFjZUxpc3RBPzogbnVtYmVyW10gfCBudWxsLCBmYWNlTGlzdEI/OiBudW1iZXJbXSB8IG51bGwsCiAgICAvLyApIHsKICAgIC8vICAgY29uc3Qgc2VwQXhpcyA9IGNvbnZleENvbnZleF9zZXBBeGlzOwogICAgLy8gICBpZih4aS5kaXN0YW5jZVRvKHhqKSA+IHNpLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2ouYm91bmRpbmdTcGhlcmVSYWRpdXMpewogICAgLy8gICAgICAgcmV0dXJuOwogICAgLy8gICB9CiAgICAvLyAgIC8vIENvbnN0cnVjdCBhIHRlbXAgaHVsbCBmb3IgZWFjaCB0cmlhbmdsZQogICAgLy8gICBjb25zdCBodWxsQiA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKCk7CiAgICAvLyAgIGh1bGxCLmZhY2VzID0gW1swLDEsMl1dOwogICAgLy8gICBjb25zdCB2YSA9IG5ldyBWZWMzKCk7CiAgICAvLyAgIGNvbnN0IHZiID0gbmV3IFZlYzMoKTsKICAgIC8vICAgY29uc3QgdmMgPSBuZXcgVmVjMygpOwogICAgLy8gICBodWxsQi52ZXJ0aWNlcyA9IFsKICAgIC8vICAgICAgIHZhLAogICAgLy8gICAgICAgdmIsCiAgICAvLyAgICAgICB2YwogICAgLy8gICBdOwogICAgLy8gICBmb3IgKGxldCBpID0gMDsgaSA8IHNqLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAvLyAgICAgICBjb25zdCB0cmlhbmdsZU5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgICAvLyAgICAgICBzai5nZXROb3JtYWwoaSwgdHJpYW5nbGVOb3JtYWwpOwogICAgLy8gICAgICAgaHVsbEIuZmFjZU5vcm1hbHMgPSBbdHJpYW5nbGVOb3JtYWxdOwogICAgLy8gICAgICAgc2ouZ2V0VHJpYW5nbGVWZXJ0aWNlcyhpLCB2YSwgdmIsIHZjKTsKICAgIC8vICAgICAgIGxldCBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7CiAgICAvLyAgICAgICBpZighZCl7CiAgICAvLyAgICAgICAgICAgdHJpYW5nbGVOb3JtYWwuc2NhbGUoLTEsIHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgICAgICBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7CiAgICAvLyAgICAgICAgICAgaWYoIWQpewogICAgLy8gICAgICAgICAgICAgICBjb250aW51ZTsKICAgIC8vICAgICAgICAgICB9CiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgICBjb25zdCByZXM6IENvbnZleFBvbHloZWRyb25Db250YWN0UG9pbnRbXSA9IFtdOwogICAgLy8gICAgICAgY29uc3QgcSA9IGNvbnZleENvbnZleF9xOwogICAgLy8gICAgICAgc2kuY2xpcEFnYWluc3RIdWxsKHhpLHFpLGh1bGxCLHhqLHFqLHRyaWFuZ2xlTm9ybWFsLC0xMDAsMTAwLHJlcyk7CiAgICAvLyAgICAgICBmb3IobGV0IGogPSAwOyBqICE9PSByZXMubGVuZ3RoOyBqKyspewogICAgLy8gICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSxiaixzaSxzaixyc2kscnNqKSwKICAgIC8vICAgICAgICAgICAgICAgcmkgPSByLnJpLAogICAgLy8gICAgICAgICAgICAgICByaiA9IHIucmo7CiAgICAvLyAgICAgICAgICAgci5uaS5jb3B5KHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgIC8vICAgICAgICAgICByZXNbal0ubm9ybWFsLm5lZ2F0ZShxKTsKICAgIC8vICAgICAgICAgICBxLm11bHQocmVzW2pdLmRlcHRoLCBxKTsKICAgIC8vICAgICAgICAgICByZXNbal0ucG9pbnQudmFkZChxLCByaSk7CiAgICAvLyAgICAgICAgICAgcmouY29weShyZXNbal0ucG9pbnQpOwogICAgLy8gICAgICAgICAgIC8vIENvbnRhY3QgcG9pbnRzIGFyZSBpbiB3b3JsZCBjb29yZGluYXRlcy4gVHJhbnNmb3JtIGJhY2sgdG8gcmVsYXRpdmUKICAgIC8vICAgICAgICAgICByaS52c3ViKHhpLHJpKTsKICAgIC8vICAgICAgICAgICByai52c3ViKHhqLHJqKTsKICAgIC8vICAgICAgICAgICAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwogICAgLy8gICAgICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgIC8vICAgICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAvLyAgICAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgLy8gICAgICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgIC8vICAgICAgICAgICByZXN1bHQucHVzaChyKTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgfQogICAgLy8gfQoKCiAgfQogIGNvbnN0IGF2ZXJhZ2VOb3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGF2ZXJhZ2VDb250YWN0UG9pbnRBID0gbmV3IFZlYzMoKTsKICBjb25zdCBhdmVyYWdlQ29udGFjdFBvaW50QiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjMSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wUXVhdDEgPSBuZXcgUXVhdGVybmlvbigpOwogIGNvbnN0IHRtcFF1YXQyID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgY29uc3QgcGxhbmVUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX3Byb2plY3RlZCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfcmVscG9zID0gbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF92MiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3JVbml0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX2xvY2FsU3BoZXJlUG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3RtcCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF92YSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF92YiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF92YyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZUFBQkIgPSBuZXcgQUFCQigpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdHJpYW5nbGVzID0gW107CiAgY29uc3QgcG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlID0gbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZV90b19zcGhlcmVfb3J0aG8gPSBuZXcgVmVjMygpOyAvLyBTZWUgaHR0cDovL2J1bGxldHBoeXNpY3MuY29tL0J1bGxldC9CdWxsZXRGdWxsL1NwaGVyZVRyaWFuZ2xlRGV0ZWN0b3JfOGNwcF9zb3VyY2UuaHRtbAoKICBjb25zdCBwb2ludEluUG9seWdvbl9lZGdlID0gbmV3IFZlYzMoKTsKICBjb25zdCBwb2ludEluUG9seWdvbl9lZGdlX3hfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBwb2ludEluUG9seWdvbl92dHAgPSBuZXcgVmVjMygpOwoKICBmdW5jdGlvbiBwb2ludEluUG9seWdvbih2ZXJ0cywgbm9ybWFsLCBwKSB7CiAgICBsZXQgcG9zaXRpdmVSZXN1bHQgPSBudWxsOwogICAgY29uc3QgTiA9IHZlcnRzLmxlbmd0aDsKCiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTsgLy8gR2V0IGVkZ2UgdG8gdGhlIG5leHQgdmVydGV4CgogICAgICBjb25zdCBlZGdlID0gcG9pbnRJblBvbHlnb25fZWRnZTsKICAgICAgdmVydHNbKGkgKyAxKSAlIE5dLnZzdWIodiwgZWRnZSk7IC8vIEdldCBjcm9zcyBwcm9kdWN0IGJldHdlZW4gcG9seWdvbiBub3JtYWwgYW5kIHRoZSBlZGdlCgogICAgICBjb25zdCBlZGdlX3hfbm9ybWFsID0gcG9pbnRJblBvbHlnb25fZWRnZV94X25vcm1hbDsgLy9jb25zdCBlZGdlX3hfbm9ybWFsID0gbmV3IFZlYzMoKTsKCiAgICAgIGVkZ2UuY3Jvc3Mobm9ybWFsLCBlZGdlX3hfbm9ybWFsKTsgLy8gR2V0IHZlY3RvciBiZXR3ZWVuIHBvaW50IGFuZCBjdXJyZW50IHZlcnRleAoKICAgICAgY29uc3QgdmVydGV4X3RvX3AgPSBwb2ludEluUG9seWdvbl92dHA7CiAgICAgIHAudnN1Yih2LCB2ZXJ0ZXhfdG9fcCk7IC8vIFRoaXMgZG90IHByb2R1Y3QgZGV0ZXJtaW5lcyB3aGljaCBzaWRlIG9mIHRoZSBlZGdlIHRoZSBwb2ludCBpcwoKICAgICAgY29uc3QgciA9IGVkZ2VfeF9ub3JtYWwuZG90KHZlcnRleF90b19wKTsgLy8gSWYgYWxsIHN1Y2ggZG90IHByb2R1Y3RzIGhhdmUgc2FtZSBzaWduLCB3ZSBhcmUgaW5zaWRlIHRoZSBwb2x5Z29uLgoKICAgICAgaWYgKHBvc2l0aXZlUmVzdWx0ID09PSBudWxsIHx8IHIgPiAwICYmIHBvc2l0aXZlUmVzdWx0ID09PSB0cnVlIHx8IHIgPD0gMCAmJiBwb3NpdGl2ZVJlc3VsdCA9PT0gZmFsc2UpIHsKICAgICAgICBpZiAocG9zaXRpdmVSZXN1bHQgPT09IG51bGwpIHsKICAgICAgICAgIHBvc2l0aXZlUmVzdWx0ID0gciA+IDA7CiAgICAgICAgfQoKICAgICAgICBjb250aW51ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7IC8vIEVuY291bnRlcmVkIHNvbWUgb3RoZXIgc2lnbi4gRXhpdC4KICAgICAgfQogICAgfSAvLyBJZiB3ZSBnb3QgaGVyZSwgYWxsIGRvdCBwcm9kdWN0cyB3ZXJlIG9mIHRoZSBzYW1lIHNpZ24uCgoKICAgIHJldHVybiB0cnVlOwogIH0KCiAgY29uc3QgYm94X3RvX3NwaGVyZSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfbnMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfbnMyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZXMgPSBbbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKV07CiAgY29uc3Qgc3BoZXJlQm94X3NwaGVyZV90b19jb3JuZXIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9zaWRlX25zID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9uczEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9zaWRlX25zMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29udmV4X3RvX3NwaGVyZSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X2VkZ2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9lZGdlVW5pdCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3NwaGVyZVRvQ29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGRDb3JuZXIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF93b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3dvcmxkUG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF93b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9wZW5ldHJhdGlvblZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3NwaGVyZVRvV29ybGRQb2ludCA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X3YgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVDb252ZXhfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZUNvbnZleF9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleENvbnZleF9zZXBBeGlzID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhDb252ZXhfcSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVQbGFuZV9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBhcnRpY2xlUGxhbmVfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVTcGhlcmVfbm9ybWFsID0gbmV3IFZlYzMoKTsgLy8gV0lQCgogIGNvbnN0IGNxaiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgY29udmV4UGFydGljbGVfbG9jYWwgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgY29uc3QgY29udmV4UGFydGljbGVfcGVuZXRyYXRlZEZhY2VOb3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX3ZlcnRleFRvUGFydGljbGUgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleEhlaWdodGZpZWxkX3RtcDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleEhlaWdodGZpZWxkX3RtcDIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleEhlaWdodGZpZWxkX2ZhY2VMaXN0ID0gWzBdOwogIGNvbnN0IHNwaGVyZUhlaWdodGZpZWxkX3RtcDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUhlaWdodGZpZWxkX3RtcDIgPSBuZXcgVmVjMygpOwoKICBjbGFzcyBPdmVybGFwS2VlcGVyIHsKICAgIC8qKgogICAgICogQHRvZG8gUmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuY3VycmVudCA9IFtdOwogICAgICB0aGlzLnByZXZpb3VzID0gW107CiAgICB9CiAgICAvKioKICAgICAqIGdldEtleQogICAgICovCgoKICAgIGdldEtleShpLCBqKSB7CiAgICAgIGlmIChqIDwgaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gaSA8PCAxNiB8IGo7CiAgICB9CiAgICAvKioKICAgICAqIHNldAogICAgICovCgoKICAgIHNldChpLCBqKSB7CiAgICAgIC8vIEluc2VydGlvbiBzb3J0LiBUaGlzIHdheSB0aGUgZGlmZiB3aWxsIGhhdmUgbGluZWFyIGNvbXBsZXhpdHkuCiAgICAgIGNvbnN0IGtleSA9IHRoaXMuZ2V0S2V5KGksIGopOwogICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50OwogICAgICBsZXQgaW5kZXggPSAwOwoKICAgICAgd2hpbGUgKGtleSA+IGN1cnJlbnRbaW5kZXhdKSB7CiAgICAgICAgaW5kZXgrKzsKICAgICAgfQoKICAgICAgaWYgKGtleSA9PT0gY3VycmVudFtpbmRleF0pIHsKICAgICAgICByZXR1cm47IC8vIFBhaXIgd2FzIGFscmVhZHkgYWRkZWQKICAgICAgfQoKICAgICAgZm9yIChsZXQgaiA9IGN1cnJlbnQubGVuZ3RoIC0gMTsgaiA+PSBpbmRleDsgai0tKSB7CiAgICAgICAgY3VycmVudFtqICsgMV0gPSBjdXJyZW50W2pdOwogICAgICB9CgogICAgICBjdXJyZW50W2luZGV4XSA9IGtleTsKICAgIH0KICAgIC8qKgogICAgICogdGljawogICAgICovCgoKICAgIHRpY2soKSB7CiAgICAgIGNvbnN0IHRtcCA9IHRoaXMuY3VycmVudDsKICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5wcmV2aW91czsKICAgICAgdGhpcy5wcmV2aW91cyA9IHRtcDsKICAgICAgdGhpcy5jdXJyZW50Lmxlbmd0aCA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIGdldERpZmYKICAgICAqLwoKCiAgICBnZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuY3VycmVudDsKICAgICAgY29uc3QgYiA9IHRoaXMucHJldmlvdXM7CiAgICAgIGNvbnN0IGFsID0gYS5sZW5ndGg7CiAgICAgIGNvbnN0IGJsID0gYi5sZW5ndGg7CiAgICAgIGxldCBqID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWw7IGkrKykgewogICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOwogICAgICAgIGNvbnN0IGtleUEgPSBhW2ldOwoKICAgICAgICB3aGlsZSAoa2V5QSA+IGJbal0pIHsKICAgICAgICAgIGorKzsKICAgICAgICB9CgogICAgICAgIGZvdW5kID0ga2V5QSA9PT0gYltqXTsKCiAgICAgICAgaWYgKCFmb3VuZCkgewogICAgICAgICAgdW5wYWNrQW5kUHVzaChhZGRpdGlvbnMsIGtleUEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaiA9IDA7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsOyBpKyspIHsKICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKICAgICAgICBjb25zdCBrZXlCID0gYltpXTsKCiAgICAgICAgd2hpbGUgKGtleUIgPiBhW2pdKSB7CiAgICAgICAgICBqKys7CiAgICAgICAgfQoKICAgICAgICBmb3VuZCA9IGFbal0gPT09IGtleUI7CgogICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgIHVucGFja0FuZFB1c2gocmVtb3ZhbHMsIGtleUIpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICB9CgogIGZ1bmN0aW9uIHVucGFja0FuZFB1c2goYXJyYXksIGtleSkgewogICAgYXJyYXkucHVzaCgoa2V5ICYgMHhmZmZmMDAwMCkgPj4gMTYsIGtleSAmIDB4MDAwMGZmZmYpOwogIH0KCiAgY29uc3QgZ2V0S2V5ID0gKGksIGopID0+IGkgPCBqID8gYCR7aX0tJHtqfWAgOiBgJHtqfS0ke2l9YDsKICAvKioKICAgKiBUdXBsZURpY3Rpb25hcnkKICAgKi8KCgogIGNsYXNzIFR1cGxlRGljdGlvbmFyeSB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5kYXRhID0gewogICAgICAgIGtleXM6IFtdCiAgICAgIH07CiAgICB9CgogICAgLyoqIGdldCAqLwogICAgZ2V0KGksIGopIHsKICAgICAgY29uc3Qga2V5ID0gZ2V0S2V5KGksIGopOwogICAgICByZXR1cm4gdGhpcy5kYXRhW2tleV07CiAgICB9CiAgICAvKiogc2V0ICovCgoKICAgIHNldChpLCBqLCB2YWx1ZSkgewogICAgICBjb25zdCBrZXkgPSBnZXRLZXkoaSwgaik7IC8vIENoZWNrIGlmIGtleSBhbHJlYWR5IGV4aXN0cwoKICAgICAgaWYgKCF0aGlzLmdldChpLCBqKSkgewogICAgICAgIHRoaXMuZGF0YS5rZXlzLnB1c2goa2V5KTsKICAgICAgfQoKICAgICAgdGhpcy5kYXRhW2tleV0gPSB2YWx1ZTsKICAgIH0KICAgIC8qKiBkZWxldGUgKi8KCgogICAgZGVsZXRlKGksIGopIHsKICAgICAgY29uc3Qga2V5ID0gZ2V0S2V5KGksIGopOwogICAgICBjb25zdCBpbmRleCA9IHRoaXMuZGF0YS5rZXlzLmluZGV4T2Yoa2V5KTsKCiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICB0aGlzLmRhdGEua2V5cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CgogICAgICBkZWxldGUgdGhpcy5kYXRhW2tleV07CiAgICB9CiAgICAvKiogcmVzZXQgKi8KCgogICAgcmVzZXQoKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IGtleXMgPSBkYXRhLmtleXM7CgogICAgICB3aGlsZSAoa2V5cy5sZW5ndGggPiAwKSB7CiAgICAgICAgY29uc3Qga2V5ID0ga2V5cy5wb3AoKTsKICAgICAgICBkZWxldGUgZGF0YVtrZXldOwogICAgICB9CiAgICB9CgogIH0KCiAgLyoqCiAgICogVGhlIHBoeXNpY3Mgd29ybGQKICAgKi8KICBjbGFzcyBXb3JsZCBleHRlbmRzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogQ3VycmVudGx5IC8gbGFzdCB1c2VkIHRpbWVzdGVwLiBJcyBzZXQgdG8gLTEgaWYgbm90IGF2YWlsYWJsZS4gVGhpcyB2YWx1ZSBpcyB1cGRhdGVkIGJlZm9yZSBlYWNoIGludGVybmFsIHN0ZXAsIHdoaWNoIG1lYW5zIHRoYXQgaXQgaXMgImZyZXNoIiBpbnNpZGUgZXZlbnQgY2FsbGJhY2tzLgogICAgICovCgogICAgLyoqCiAgICAgKiBNYWtlcyBib2RpZXMgZ28gdG8gc2xlZXAgd2hlbiB0aGV5J3ZlIGJlZW4gaW5hY3RpdmUuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgdGhlIGN1cnJlbnQgY29udGFjdHMgKGluc3RhbmNlcyBvZiBDb250YWN0RXF1YXRpb24pIGluIHRoZSB3b3JsZC4KICAgICAqLwoKICAgIC8qKgogICAgICogSG93IG9mdGVuIHRvIG5vcm1hbGl6ZSBxdWF0ZXJuaW9ucy4gU2V0IHRvIDAgZm9yIGV2ZXJ5IHN0ZXAsIDEgZm9yIGV2ZXJ5IHNlY29uZCBldGMuLiBBIGxhcmdlciB2YWx1ZSBpbmNyZWFzZXMgcGVyZm9ybWFuY2UuIElmIGJvZGllcyB0ZW5kIHRvIGV4cGxvZGUsIHNldCB0byBhIHNtYWxsZXIgdmFsdWUgKHplcm8gdG8gYmUgc3VyZSBub3RoaW5nIGNhbiBnbyB3cm9uZykuCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byB0cnVlIHRvIHVzZSBmYXN0IHF1YXRlcm5pb24gbm9ybWFsaXphdGlvbi4gSXQgaXMgb2Z0ZW4gZW5vdWdoIGFjY3VyYXRlIHRvIHVzZS4KICAgICAqIElmIGJvZGllcyB0ZW5kIHRvIGV4cGxvZGUsIHNldCB0byBmYWxzZS4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSB3YWxsLWNsb2NrIHRpbWUgc2luY2Ugc2ltdWxhdGlvbiBzdGFydC4KICAgICAqLwoKICAgIC8qKgogICAgICogTnVtYmVyIG9mIHRpbWVzdGVwcyB0YWtlbiBzaW5jZSBzdGFydC4KICAgICAqLwoKICAgIC8qKgogICAgICogRGVmYXVsdCBhbmQgbGFzdCB0aW1lc3RlcCBzaXplcy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGdyYXZpdHkgb2YgdGhlIHdvcmxkLgogICAgICovCgogICAgLyoqCiAgICAgKiBHcmF2aXR5IHRvIHVzZSB3aGVuIGFwcHJveGltYXRpbmcgdGhlIGZyaWN0aW9uIG1heCBmb3JjZSAobXUqbWFzcypncmF2aXR5KS4KICAgICAqIElmIHVuZGVmaW5lZCwgZ2xvYmFsIGdyYXZpdHkgd2lsbCBiZSB1c2VkLgogICAgICogVXNlIHRvIGVuYWJsZSBmcmljdGlvbiBpbiBhIFdvcmxkIHdpdGggYSBudWxsIGdyYXZpdHkgdmVjdG9yIChubyBncmF2aXR5KS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGJyb2FkcGhhc2UgYWxnb3JpdGhtIHRvIHVzZS4KICAgICAqIEBkZWZhdWx0IE5haXZlQnJvYWRwaGFzZQogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgYm9kaWVzIGluIHRoaXMgd29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogVHJ1ZSBpZiBhbnkgYm9kaWVzIGFyZSBub3Qgc2xlZXBpbmcsIGZhbHNlIGlmIGV2ZXJ5IGJvZHkgaXMgc2xlZXBpbmcuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBzb2x2ZXIgYWxnb3JpdGhtIHRvIHVzZS4KICAgICAqIEBkZWZhdWx0IEdTU29sdmVyCiAgICAgKi8KCiAgICAvKioKICAgICAqIGNvbGxpc2lvbk1hdHJpeAogICAgICovCgogICAgLyoqCiAgICAgKiBDb2xsaXNpb25NYXRyaXggZnJvbSB0aGUgcHJldmlvdXMgc3RlcC4KICAgICAqLwoKICAgIC8qKgogICAgICogQWxsIGFkZGVkIGNvbnRhY3RtYXRlcmlhbHMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFVzZWQgdG8gbG9vayB1cCBhIENvbnRhY3RNYXRlcmlhbCBnaXZlbiB0d28gaW5zdGFuY2VzIG9mIE1hdGVyaWFsLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgZGVmYXVsdCBtYXRlcmlhbCBvZiB0aGUgYm9kaWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGlzIGNvbnRhY3QgbWF0ZXJpYWwgaXMgdXNlZCBpZiBubyBzdWl0YWJsZSBjb250YWN0bWF0ZXJpYWwgaXMgZm91bmQgZm9yIGEgY29udGFjdC4KICAgICAqLwoKICAgIC8qKgogICAgICogVGltZSBhY2N1bXVsYXRvciBmb3IgaW50ZXJwb2xhdGlvbi4KICAgICAqIEBzZWUgaHR0cHM6Ly9nYWZmZXJvbmdhbWVzLmNvbS9nYW1lLXBoeXNpY3MvZml4LXlvdXItdGltZXN0ZXAvCiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBiZWVuIGFkZGVkIHRvIHRoZSB3b3JsZC4KICAgICAqLwoKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciBhIGJvZHkgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSB3b3JsZC4KICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBzdXBlcigpOwogICAgICB0aGlzLmR0ID0gLTE7CiAgICAgIHRoaXMuYWxsb3dTbGVlcCA9ICEhb3B0aW9ucy5hbGxvd1NsZWVwOwogICAgICB0aGlzLmNvbnRhY3RzID0gW107CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMgPSBbXTsKICAgICAgdGhpcy5xdWF0Tm9ybWFsaXplU2tpcCA9IG9wdGlvbnMucXVhdE5vcm1hbGl6ZVNraXAgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucXVhdE5vcm1hbGl6ZVNraXAgOiAwOwogICAgICB0aGlzLnF1YXROb3JtYWxpemVGYXN0ID0gb3B0aW9ucy5xdWF0Tm9ybWFsaXplRmFzdCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5xdWF0Tm9ybWFsaXplRmFzdCA6IGZhbHNlOwogICAgICB0aGlzLnRpbWUgPSAwLjA7CiAgICAgIHRoaXMuc3RlcG51bWJlciA9IDA7CiAgICAgIHRoaXMuZGVmYXVsdF9kdCA9IDEgLyA2MDsKICAgICAgdGhpcy5uZXh0SWQgPSAwOwogICAgICB0aGlzLmdyYXZpdHkgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMuZ3Jhdml0eSkgewogICAgICAgIHRoaXMuZ3Jhdml0eS5jb3B5KG9wdGlvbnMuZ3Jhdml0eSk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLmZyaWN0aW9uR3Jhdml0eSkgewogICAgICAgIHRoaXMuZnJpY3Rpb25HcmF2aXR5ID0gbmV3IFZlYzMoKTsKICAgICAgICB0aGlzLmZyaWN0aW9uR3Jhdml0eS5jb3B5KG9wdGlvbnMuZnJpY3Rpb25HcmF2aXR5KTsKICAgICAgfQoKICAgICAgdGhpcy5icm9hZHBoYXNlID0gb3B0aW9ucy5icm9hZHBoYXNlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmJyb2FkcGhhc2UgOiBuZXcgTmFpdmVCcm9hZHBoYXNlKCk7CiAgICAgIHRoaXMuYm9kaWVzID0gW107CiAgICAgIHRoaXMuaGFzQWN0aXZlQm9kaWVzID0gZmFsc2U7CiAgICAgIHRoaXMuc29sdmVyID0gb3B0aW9ucy5zb2x2ZXIgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc29sdmVyIDogbmV3IEdTU29sdmVyKCk7CiAgICAgIHRoaXMuY29uc3RyYWludHMgPSBbXTsKICAgICAgdGhpcy5uYXJyb3dwaGFzZSA9IG5ldyBOYXJyb3dwaGFzZSh0aGlzKTsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXggPSBuZXcgQXJyYXlDb2xsaXNpb25NYXRyaXgoKTsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cyA9IG5ldyBBcnJheUNvbGxpc2lvbk1hdHJpeCgpOwogICAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyID0gbmV3IE92ZXJsYXBLZWVwZXIoKTsKICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIgPSBuZXcgT3ZlcmxhcEtlZXBlcigpOwogICAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMgPSBbXTsKICAgICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZSA9IG5ldyBUdXBsZURpY3Rpb25hcnkoKTsKICAgICAgdGhpcy5kZWZhdWx0TWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwoJ2RlZmF1bHQnKTsKICAgICAgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsID0gbmV3IENvbnRhY3RNYXRlcmlhbCh0aGlzLmRlZmF1bHRNYXRlcmlhbCwgdGhpcy5kZWZhdWx0TWF0ZXJpYWwsIHsKICAgICAgICBmcmljdGlvbjogMC4zLAogICAgICAgIHJlc3RpdHV0aW9uOiAwLjAKICAgICAgfSk7CiAgICAgIHRoaXMuZG9Qcm9maWxpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5wcm9maWxlID0gewogICAgICAgIHNvbHZlOiAwLAogICAgICAgIG1ha2VDb250YWN0Q29uc3RyYWludHM6IDAsCiAgICAgICAgYnJvYWRwaGFzZTogMCwKICAgICAgICBpbnRlZ3JhdGU6IDAsCiAgICAgICAgbmFycm93cGhhc2U6IDAKICAgICAgfTsKICAgICAgdGhpcy5hY2N1bXVsYXRvciA9IDA7CiAgICAgIHRoaXMuc3Vic3lzdGVtcyA9IFtdOwogICAgICB0aGlzLmFkZEJvZHlFdmVudCA9IHsKICAgICAgICB0eXBlOiAnYWRkQm9keScsCiAgICAgICAgYm9keTogbnVsbAogICAgICB9OwogICAgICB0aGlzLnJlbW92ZUJvZHlFdmVudCA9IHsKICAgICAgICB0eXBlOiAncmVtb3ZlQm9keScsCiAgICAgICAgYm9keTogbnVsbAogICAgICB9OwogICAgICB0aGlzLmlkVG9Cb2R5TWFwID0ge307CiAgICAgIHRoaXMuYnJvYWRwaGFzZS5zZXRXb3JsZCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBjb250YWN0IG1hdGVyaWFsIGJldHdlZW4gbWF0ZXJpYWxzIG0xIGFuZCBtMgogICAgICogQHJldHVybiBUaGUgY29udGFjdCBtYXRlcmlhbCBpZiBpdCB3YXMgZm91bmQuCiAgICAgKi8KCgogICAgZ2V0Q29udGFjdE1hdGVyaWFsKG0xLCBtMikgewogICAgICByZXR1cm4gdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZS5nZXQobTEuaWQsIG0yLmlkKTsKICAgIH0KICAgIC8qKgogICAgICogU3RvcmUgb2xkIGNvbGxpc2lvbiBzdGF0ZSBpbmZvCiAgICAgKi8KCgogICAgY29sbGlzaW9uTWF0cml4VGljaygpIHsKICAgICAgY29uc3QgdGVtcCA9IHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXM7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXMgPSB0aGlzLmNvbGxpc2lvbk1hdHJpeDsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXggPSB0ZW1wOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5yZXNldCgpOwogICAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyLnRpY2soKTsKICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIudGljaygpOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSBjb25zdHJhaW50IHRvIHRoZSBzaW11bGF0aW9uLgogICAgICovCgoKICAgIGFkZENvbnN0cmFpbnQoYykgewogICAgICB0aGlzLmNvbnN0cmFpbnRzLnB1c2goYyk7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZXMgYSBjb25zdHJhaW50CiAgICAgKi8KCgogICAgcmVtb3ZlQ29uc3RyYWludChjKSB7CiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuY29uc3RyYWludHMuaW5kZXhPZihjKTsKCiAgICAgIGlmIChpZHggIT09IC0xKSB7CiAgICAgICAgdGhpcy5jb25zdHJhaW50cy5zcGxpY2UoaWR4LCAxKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSYXljYXN0IHRlc3QKICAgICAqIEBkZXByZWNhdGVkIFVzZSAucmF5Y2FzdEFsbCwgLnJheWNhc3RDbG9zZXN0IG9yIC5yYXljYXN0QW55IGluc3RlYWQuCiAgICAgKi8KCgogICAgcmF5VGVzdChmcm9tLCB0bywgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSYXljYXN0UmVzdWx0KSB7CiAgICAgICAgLy8gRG8gcmF5Y2FzdENsb3Nlc3QKICAgICAgICB0aGlzLnJheWNhc3RDbG9zZXN0KGZyb20sIHRvLCB7CiAgICAgICAgICBza2lwQmFja2ZhY2VzOiB0cnVlCiAgICAgICAgfSwgcmVzdWx0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBEbyByYXljYXN0QWxsCiAgICAgICAgdGhpcy5yYXljYXN0QWxsKGZyb20sIHRvLCB7CiAgICAgICAgICBza2lwQmFja2ZhY2VzOiB0cnVlCiAgICAgICAgfSwgcmVzdWx0KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSYXkgY2FzdCBhZ2FpbnN0IGFsbCBib2RpZXMuIFRoZSBwcm92aWRlZCBjYWxsYmFjayB3aWxsIGJlIGV4ZWN1dGVkIGZvciBlYWNoIGhpdCB3aXRoIGEgUmF5Y2FzdFJlc3VsdCBhcyBzaW5nbGUgYXJndW1lbnQuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0QWxsKGZyb20sIHRvLCBvcHRpb25zLCBjYWxsYmFjaykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zLm1vZGUgPSBSYXkuQUxMOwogICAgICBvcHRpb25zLmZyb20gPSBmcm9tOwogICAgICBvcHRpb25zLnRvID0gdG87CiAgICAgIG9wdGlvbnMuY2FsbGJhY2sgPSBjYWxsYmFjazsKICAgICAgcmV0dXJuIHRtcFJheS5pbnRlcnNlY3RXb3JsZCh0aGlzLCBvcHRpb25zKTsKICAgIH0KICAgIC8qKgogICAgICogUmF5IGNhc3QsIGFuZCBzdG9wIGF0IHRoZSBmaXJzdCByZXN1bHQuIE5vdGUgdGhhdCB0aGUgb3JkZXIgaXMgcmFuZG9tIC0gYnV0IHRoZSBtZXRob2QgaXMgZmFzdC4KICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBhbnkgYm9keSB3YXMgaGl0LgogICAgICovCgoKICAgIHJheWNhc3RBbnkoZnJvbSwgdG8sIG9wdGlvbnMsIHJlc3VsdCkgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zLm1vZGUgPSBSYXkuQU5ZOwogICAgICBvcHRpb25zLmZyb20gPSBmcm9tOwogICAgICBvcHRpb25zLnRvID0gdG87CiAgICAgIG9wdGlvbnMucmVzdWx0ID0gcmVzdWx0OwogICAgICByZXR1cm4gdG1wUmF5LmludGVyc2VjdFdvcmxkKHRoaXMsIG9wdGlvbnMpOwogICAgfQogICAgLyoqCiAgICAgKiBSYXkgY2FzdCwgYW5kIHJldHVybiBpbmZvcm1hdGlvbiBvZiB0aGUgY2xvc2VzdCBoaXQuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0Q2xvc2VzdChmcm9tLCB0bywgb3B0aW9ucywgcmVzdWx0KSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIG9wdGlvbnMubW9kZSA9IFJheS5DTE9TRVNUOwogICAgICBvcHRpb25zLmZyb20gPSBmcm9tOwogICAgICBvcHRpb25zLnRvID0gdG87CiAgICAgIG9wdGlvbnMucmVzdWx0ID0gcmVzdWx0OwogICAgICByZXR1cm4gdG1wUmF5LmludGVyc2VjdFdvcmxkKHRoaXMsIG9wdGlvbnMpOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSByaWdpZCBib2R5IHRvIHRoZSBzaW11bGF0aW9uLgogICAgICogQHRvZG8gSWYgdGhlIHNpbXVsYXRpb24gaGFzIG5vdCB5ZXQgc3RhcnRlZCwgd2h5IHJlY3JldGUgYW5kIGNvcHkgYXJyYXlzIGZvciBlYWNoIGJvZHk/IEFjY3VtdWxhdGUgaW4gZHluYW1pYyBhcnJheXMgaW4gdGhpcyBjYXNlLgogICAgICogQHRvZG8gQWRkaW5nIGFuIGFycmF5IG9mIGJvZGllcyBzaG91bGQgYmUgcG9zc2libGUuIFRoaXMgd291bGQgc2F2ZSBzb21lIGxvb3BzIHRvbwogICAgICovCgoKICAgIGFkZEJvZHkoYm9keSkgewogICAgICBpZiAodGhpcy5ib2RpZXMuaW5jbHVkZXMoYm9keSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGJvZHkuaW5kZXggPSB0aGlzLmJvZGllcy5sZW5ndGg7CiAgICAgIHRoaXMuYm9kaWVzLnB1c2goYm9keSk7CiAgICAgIGJvZHkud29ybGQgPSB0aGlzOwogICAgICBib2R5LmluaXRQb3NpdGlvbi5jb3B5KGJvZHkucG9zaXRpb24pOwogICAgICBib2R5LmluaXRWZWxvY2l0eS5jb3B5KGJvZHkudmVsb2NpdHkpOwogICAgICBib2R5LnRpbWVMYXN0U2xlZXB5ID0gdGhpcy50aW1lOwoKICAgICAgaWYgKGJvZHkgaW5zdGFuY2VvZiBCb2R5KSB7CiAgICAgICAgYm9keS5pbml0QW5ndWxhclZlbG9jaXR5LmNvcHkoYm9keS5hbmd1bGFyVmVsb2NpdHkpOwogICAgICAgIGJvZHkuaW5pdFF1YXRlcm5pb24uY29weShib2R5LnF1YXRlcm5pb24pOwogICAgICB9CgogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXROdW1PYmplY3RzKHRoaXMuYm9kaWVzLmxlbmd0aCk7CiAgICAgIHRoaXMuYWRkQm9keUV2ZW50LmJvZHkgPSBib2R5OwogICAgICB0aGlzLmlkVG9Cb2R5TWFwW2JvZHkuaWRdID0gYm9keTsKICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMuYWRkQm9keUV2ZW50KTsKICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIGEgcmlnaWQgYm9keSBmcm9tIHRoZSBzaW11bGF0aW9uLgogICAgICovCgoKICAgIHJlbW92ZUJvZHkoYm9keSkgewogICAgICBib2R5LndvcmxkID0gbnVsbDsKICAgICAgY29uc3QgbiA9IHRoaXMuYm9kaWVzLmxlbmd0aCAtIDE7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzOwogICAgICBjb25zdCBpZHggPSBib2RpZXMuaW5kZXhPZihib2R5KTsKCiAgICAgIGlmIChpZHggIT09IC0xKSB7CiAgICAgICAgYm9kaWVzLnNwbGljZShpZHgsIDEpOyAvLyBUb2RvOiBzaG91bGQgdXNlIGEgZ2FyYmFnZSBmcmVlIG1ldGhvZAogICAgICAgIC8vIFJlY29tcHV0ZSBpbmRleAoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gYm9kaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBib2RpZXNbaV0uaW5kZXggPSBpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0TnVtT2JqZWN0cyhuKTsKICAgICAgICB0aGlzLnJlbW92ZUJvZHlFdmVudC5ib2R5ID0gYm9keTsKICAgICAgICBkZWxldGUgdGhpcy5pZFRvQm9keU1hcFtib2R5LmlkXTsKICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy5yZW1vdmVCb2R5RXZlbnQpOwogICAgICB9CiAgICB9CgogICAgZ2V0Qm9keUJ5SWQoaWQpIHsKICAgICAgcmV0dXJuIHRoaXMuaWRUb0JvZHlNYXBbaWRdOwogICAgfQogICAgLyoqCiAgICAgKiBAdG9kbyBNYWtlIGEgZmFzdGVyIG1hcAogICAgICovCgoKICAgIGdldFNoYXBlQnlJZChpZCkgewogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9kaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3Qgc2hhcGVzID0gYm9kaWVzW2ldLnNoYXBlczsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaGFwZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGNvbnN0IHNoYXBlID0gc2hhcGVzW2pdOwoKICAgICAgICAgIGlmIChzaGFwZS5pZCA9PT0gaWQpIHsKICAgICAgICAgICAgcmV0dXJuIHNoYXBlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICAvKioKICAgICAqIEFkZHMgYSBjb250YWN0IG1hdGVyaWFsIHRvIHRoZSBXb3JsZAogICAgICovCgoKICAgIGFkZENvbnRhY3RNYXRlcmlhbChjbWF0KSB7CiAgICAgIC8vIEFkZCBjb250YWN0IG1hdGVyaWFsCiAgICAgIHRoaXMuY29udGFjdG1hdGVyaWFscy5wdXNoKGNtYXQpOyAvLyBBZGQgY3VycmVudCBjb250YWN0IG1hdGVyaWFsIHRvIHRoZSBtYXRlcmlhbCB0YWJsZQoKICAgICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZS5zZXQoY21hdC5tYXRlcmlhbHNbMF0uaWQsIGNtYXQubWF0ZXJpYWxzWzFdLmlkLCBjbWF0KTsKICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlcyBhIGNvbnRhY3QgbWF0ZXJpYWwgZnJvbSB0aGUgV29ybGQuCiAgICAgKi8KCgogICAgcmVtb3ZlQ29udGFjdE1hdGVyaWFsKGNtYXQpIHsKICAgICAgY29uc3QgaWR4ID0gdGhpcy5jb250YWN0bWF0ZXJpYWxzLmluZGV4T2YoY21hdCk7CgogICAgICBpZiAoaWR4ID09PSAtMSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5jb250YWN0bWF0ZXJpYWxzLnNwbGljZShpZHgsIDEpOwogICAgICB0aGlzLmNvbnRhY3RNYXRlcmlhbFRhYmxlLmRlbGV0ZShjbWF0Lm1hdGVyaWFsc1swXS5pZCwgY21hdC5tYXRlcmlhbHNbMV0uaWQpOwogICAgfQogICAgLyoqCiAgICAgKiBTdGVwIHRoZSBzaW11bGF0aW9uIGZvcndhcmQga2VlcGluZyB0cmFjayBvZiBsYXN0IGNhbGxlZCB0aW1lCiAgICAgKiB0byBiZSBhYmxlIHRvIHN0ZXAgdGhlIHdvcmxkIGF0IGEgZml4ZWQgcmF0ZSwgaW5kZXBlbmRlbnRseSBvZiBmcmFtZXJhdGUuCiAgICAgKgogICAgICogQHBhcmFtIGR0IFRoZSBmaXhlZCB0aW1lIHN0ZXAgc2l6ZSB0byB1c2UgKGRlZmF1bHQ6IDEgLyA2MCkuCiAgICAgKiBAcGFyYW0gbWF4U3ViU3RlcHMgTWF4aW11bSBudW1iZXIgb2YgZml4ZWQgc3RlcHMgdG8gdGFrZSBwZXIgZnVuY3Rpb24gY2FsbCAoZGVmYXVsdDogMTApLgogICAgICogQHNlZSBodHRwczovL2dhZmZlcm9uZ2FtZXMuY29tL3Bvc3QvZml4X3lvdXJfdGltZXN0ZXAvCiAgICAgKiBAZXhhbXBsZQogICAgICogICAgIC8vIFJ1biB0aGUgc2ltdWxhdGlvbiBpbmRlcGVuZGVudGx5IG9mIGZyYW1lcmF0ZSBldmVyeSAxIC8gNjAgbXMKICAgICAqICAgICB3b3JsZC5maXhlZFN0ZXAoKQogICAgICovCgoKICAgIGZpeGVkU3RlcChkdCwgbWF4U3ViU3RlcHMpIHsKICAgICAgaWYgKGR0ID09PSB2b2lkIDApIHsKICAgICAgICBkdCA9IDEgLyA2MDsKICAgICAgfQoKICAgICAgaWYgKG1heFN1YlN0ZXBzID09PSB2b2lkIDApIHsKICAgICAgICBtYXhTdWJTdGVwcyA9IDEwOwogICAgICB9CgogICAgICBjb25zdCB0aW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDAwOyAvLyBzZWNvbmRzCgogICAgICBpZiAoIXRoaXMubGFzdENhbGxUaW1lKSB7CiAgICAgICAgdGhpcy5zdGVwKGR0LCB1bmRlZmluZWQsIG1heFN1YlN0ZXBzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCB0aW1lU2luY2VMYXN0Q2FsbGVkID0gdGltZSAtIHRoaXMubGFzdENhbGxUaW1lOwogICAgICAgIHRoaXMuc3RlcChkdCwgdGltZVNpbmNlTGFzdENhbGxlZCwgbWF4U3ViU3RlcHMpOwogICAgICB9CgogICAgICB0aGlzLmxhc3RDYWxsVGltZSA9IHRpbWU7CiAgICB9CiAgICAvKioKICAgICAqIFN0ZXAgdGhlIHBoeXNpY3Mgd29ybGQgZm9yd2FyZCBpbiB0aW1lLgogICAgICoKICAgICAqIFRoZXJlIGFyZSB0d28gbW9kZXMuIFRoZSBzaW1wbGUgbW9kZSBpcyBmaXhlZCB0aW1lc3RlcHBpbmcgd2l0aG91dCBpbnRlcnBvbGF0aW9uLiBJbiB0aGlzIGNhc2UgeW91IG9ubHkgdXNlIHRoZSBmaXJzdCBhcmd1bWVudC4gVGhlIHNlY29uZCBjYXNlIHVzZXMgaW50ZXJwb2xhdGlvbi4gSW4gdGhhdCB5b3UgYWxzbyBwcm92aWRlIHRoZSB0aW1lIHNpbmNlIHRoZSBmdW5jdGlvbiB3YXMgbGFzdCB1c2VkLCBhcyB3ZWxsIGFzIHRoZSBtYXhpbXVtIGZpeGVkIHRpbWVzdGVwcyB0byB0YWtlLgogICAgICoKICAgICAqIEBwYXJhbSBkdCBUaGUgZml4ZWQgdGltZSBzdGVwIHNpemUgdG8gdXNlLgogICAgICogQHBhcmFtIHRpbWVTaW5jZUxhc3RDYWxsZWQgVGhlIHRpbWUgZWxhcHNlZCBzaW5jZSB0aGUgZnVuY3Rpb24gd2FzIGxhc3QgY2FsbGVkLgogICAgICogQHBhcmFtIG1heFN1YlN0ZXBzIE1heGltdW0gbnVtYmVyIG9mIGZpeGVkIHN0ZXBzIHRvIHRha2UgcGVyIGZ1bmN0aW9uIGNhbGwgKGRlZmF1bHQ6IDEwKS4KICAgICAqIEBzZWUgaHR0cHM6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMTgwNDI2MTU0NTMxL2h0dHA6Ly9idWxsZXRwaHlzaWNzLm9yZy9tZWRpYXdpa2ktMS41LjgvaW5kZXgucGhwL1N0ZXBwaW5nX1RoZV9Xb3JsZCNXaGF0X2RvX3RoZV9wYXJhbWV0ZXJzX3RvX2J0RHluYW1pY3NXb3JsZDo6c3RlcFNpbXVsYXRpb25fbWVhbi4zRgogICAgICogQGV4YW1wbGUKICAgICAqICAgICAvLyBmaXhlZCB0aW1lc3RlcHBpbmcgd2l0aG91dCBpbnRlcnBvbGF0aW9uCiAgICAgKiAgICAgd29ybGQuc3RlcCgxIC8gNjApCiAgICAgKi8KCgogICAgc3RlcChkdCwgdGltZVNpbmNlTGFzdENhbGxlZCwgbWF4U3ViU3RlcHMpIHsKICAgICAgaWYgKG1heFN1YlN0ZXBzID09PSB2b2lkIDApIHsKICAgICAgICBtYXhTdWJTdGVwcyA9IDEwOwogICAgICB9CgogICAgICBpZiAodGltZVNpbmNlTGFzdENhbGxlZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgLy8gRml4ZWQsIHNpbXBsZSBzdGVwcGluZwogICAgICAgIHRoaXMuaW50ZXJuYWxTdGVwKGR0KTsgLy8gSW5jcmVtZW50IHRpbWUKCiAgICAgICAgdGhpcy50aW1lICs9IGR0OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWNjdW11bGF0b3IgKz0gdGltZVNpbmNlTGFzdENhbGxlZDsKICAgICAgICBjb25zdCB0MCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICAgIGxldCBzdWJzdGVwcyA9IDA7CgogICAgICAgIHdoaWxlICh0aGlzLmFjY3VtdWxhdG9yID49IGR0ICYmIHN1YnN0ZXBzIDwgbWF4U3ViU3RlcHMpIHsKICAgICAgICAgIC8vIERvIGZpeGVkIHN0ZXBzIHRvIGNhdGNoIHVwCiAgICAgICAgICB0aGlzLmludGVybmFsU3RlcChkdCk7CiAgICAgICAgICB0aGlzLmFjY3VtdWxhdG9yIC09IGR0OwogICAgICAgICAgc3Vic3RlcHMrKzsKCiAgICAgICAgICBpZiAocGVyZm9ybWFuY2Uubm93KCkgLSB0MCA+IGR0ICogMTAwMCkgewogICAgICAgICAgICAvLyBUaGUgZnJhbWVyYXRlIGlzIG5vdCBpbnRlcmFjdGl2ZSBhbnltb3JlLgogICAgICAgICAgICAvLyBXZSBhcmUgYmVsb3cgdGhlIHRhcmdldCBmcmFtZXJhdGUuCiAgICAgICAgICAgIC8vIEJldHRlciBiYWlsIG91dC4KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBSZW1vdmUgdGhlIGV4Y2VzcyBhY2N1bXVsYXRvciwgc2luY2Ugd2UgbWF5IG5vdAogICAgICAgIC8vIGhhdmUgaGFkIGVub3VnaCBzdWJzdGVwcyBhdmFpbGFibGUgdG8gY2F0Y2ggdXAKCgogICAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSB0aGlzLmFjY3VtdWxhdG9yICUgZHQ7CiAgICAgICAgY29uc3QgdCA9IHRoaXMuYWNjdW11bGF0b3IgLyBkdDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IHRoaXMuYm9kaWVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCBiID0gdGhpcy5ib2RpZXNbal07CiAgICAgICAgICBiLnByZXZpb3VzUG9zaXRpb24ubGVycChiLnBvc2l0aW9uLCB0LCBiLmludGVycG9sYXRlZFBvc2l0aW9uKTsKICAgICAgICAgIGIucHJldmlvdXNRdWF0ZXJuaW9uLnNsZXJwKGIucXVhdGVybmlvbiwgdCwgYi5pbnRlcnBvbGF0ZWRRdWF0ZXJuaW9uKTsKICAgICAgICAgIGIucHJldmlvdXNRdWF0ZXJuaW9uLm5vcm1hbGl6ZSgpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy50aW1lICs9IHRpbWVTaW5jZUxhc3RDYWxsZWQ7CiAgICAgIH0KICAgIH0KCiAgICBpbnRlcm5hbFN0ZXAoZHQpIHsKICAgICAgdGhpcy5kdCA9IGR0OwogICAgICBjb25zdCBjb250YWN0cyA9IHRoaXMuY29udGFjdHM7CiAgICAgIGNvbnN0IHAxID0gV29ybGRfc3RlcF9wMTsKICAgICAgY29uc3QgcDIgPSBXb3JsZF9zdGVwX3AyOwogICAgICBjb25zdCBOID0gdGhpcy5ib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllczsKICAgICAgY29uc3Qgc29sdmVyID0gdGhpcy5zb2x2ZXI7CiAgICAgIGNvbnN0IGdyYXZpdHkgPSB0aGlzLmdyYXZpdHk7CiAgICAgIGNvbnN0IGRvUHJvZmlsaW5nID0gdGhpcy5kb1Byb2ZpbGluZzsKICAgICAgY29uc3QgcHJvZmlsZSA9IHRoaXMucHJvZmlsZTsKICAgICAgY29uc3QgRFlOQU1JQyA9IEJvZHkuRFlOQU1JQzsKICAgICAgbGV0IHByb2ZpbGluZ1N0YXJ0ID0gLUluZmluaXR5OwogICAgICBjb25zdCBjb25zdHJhaW50cyA9IHRoaXMuY29uc3RyYWludHM7CiAgICAgIGNvbnN0IGZyaWN0aW9uRXF1YXRpb25Qb29sID0gV29ybGRfc3RlcF9mcmljdGlvbkVxdWF0aW9uUG9vbDsKICAgICAgZ3Jhdml0eS5sZW5ndGgoKTsKICAgICAgY29uc3QgZ3ggPSBncmF2aXR5Lng7CiAgICAgIGNvbnN0IGd5ID0gZ3Jhdml0eS55OwogICAgICBjb25zdCBneiA9IGdyYXZpdHkuejsKICAgICAgbGV0IGkgPSAwOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfSAvLyBBZGQgZ3Jhdml0eSB0byBhbGwgb2JqZWN0cwoKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYmkudHlwZSA9PT0gRFlOQU1JQykgewogICAgICAgICAgLy8gT25seSBmb3IgZHluYW1pYyBib2RpZXMKICAgICAgICAgIGNvbnN0IGYgPSBiaS5mb3JjZTsKICAgICAgICAgIGNvbnN0IG0gPSBiaS5tYXNzOwogICAgICAgICAgZi54ICs9IG0gKiBneDsKICAgICAgICAgIGYueSArPSBtICogZ3k7CiAgICAgICAgICBmLnogKz0gbSAqIGd6OwogICAgICAgIH0KICAgICAgfSAvLyBVcGRhdGUgc3Vic3lzdGVtcwoKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOc3Vic3lzdGVtcyA9IHRoaXMuc3Vic3lzdGVtcy5sZW5ndGg7IGkgIT09IE5zdWJzeXN0ZW1zOyBpKyspIHsKICAgICAgICB0aGlzLnN1YnN5c3RlbXNbaV0udXBkYXRlKCk7CiAgICAgIH0gLy8gQ29sbGlzaW9uIGRldGVjdGlvbgoKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgIH0KCiAgICAgIHAxLmxlbmd0aCA9IDA7IC8vIENsZWFuIHVwIHBhaXIgYXJyYXlzIGZyb20gbGFzdCBzdGVwCgogICAgICBwMi5sZW5ndGggPSAwOwogICAgICB0aGlzLmJyb2FkcGhhc2UuY29sbGlzaW9uUGFpcnModGhpcywgcDEsIHAyKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUuYnJvYWRwaGFzZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gUmVtb3ZlIGNvbnN0cmFpbmVkIHBhaXJzIHdpdGggY29sbGlkZUNvbm5lY3RlZCA9PSBmYWxzZQoKCiAgICAgIGxldCBOY29uc3RyYWludHMgPSBjb25zdHJhaW50cy5sZW5ndGg7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOY29uc3RyYWludHM7IGkrKykgewogICAgICAgIGNvbnN0IGMgPSBjb25zdHJhaW50c1tpXTsKCiAgICAgICAgaWYgKCFjLmNvbGxpZGVDb25uZWN0ZWQpIHsKICAgICAgICAgIGZvciAobGV0IGogPSBwMS5sZW5ndGggLSAxOyBqID49IDA7IGogLT0gMSkgewogICAgICAgICAgICBpZiAoYy5ib2R5QSA9PT0gcDFbal0gJiYgYy5ib2R5QiA9PT0gcDJbal0gfHwgYy5ib2R5QiA9PT0gcDFbal0gJiYgYy5ib2R5QSA9PT0gcDJbal0pIHsKICAgICAgICAgICAgICBwMS5zcGxpY2UoaiwgMSk7CiAgICAgICAgICAgICAgcDIuc3BsaWNlKGosIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFRpY2soKTsgLy8gR2VuZXJhdGUgY29udGFjdHMKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IG9sZGNvbnRhY3RzID0gV29ybGRfc3RlcF9vbGRDb250YWN0czsKICAgICAgY29uc3QgTm9sZENvbnRhY3RzID0gY29udGFjdHMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTm9sZENvbnRhY3RzOyBpKyspIHsKICAgICAgICBvbGRjb250YWN0cy5wdXNoKGNvbnRhY3RzW2ldKTsKICAgICAgfQoKICAgICAgY29udGFjdHMubGVuZ3RoID0gMDsgLy8gVHJhbnNmZXIgRnJpY3Rpb25FcXVhdGlvbiBmcm9tIGN1cnJlbnQgbGlzdCB0byB0aGUgcG9vbCBmb3IgcmV1c2UKCiAgICAgIGNvbnN0IE5vbGRGcmljdGlvbkVxdWF0aW9ucyA9IHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTm9sZEZyaWN0aW9uRXF1YXRpb25zOyBpKyspIHsKICAgICAgICBmcmljdGlvbkVxdWF0aW9uUG9vbC5wdXNoKHRoaXMuZnJpY3Rpb25FcXVhdGlvbnNbaV0pOwogICAgICB9CgogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aCA9IDA7CiAgICAgIHRoaXMubmFycm93cGhhc2UuZ2V0Q29udGFjdHMocDEsIHAyLCB0aGlzLCBjb250YWN0cywgb2xkY29udGFjdHMsIC8vIFRvIGJlIHJldXNlZAogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLCBmcmljdGlvbkVxdWF0aW9uUG9vbCk7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLm5hcnJvd3BoYXNlID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDsKICAgICAgfSAvLyBMb29wIG92ZXIgYWxsIGNvbGxpc2lvbnMKCgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9IC8vIEFkZCBhbGwgZnJpY3Rpb24gZXFzCgoKICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBzb2x2ZXIuYWRkRXF1YXRpb24odGhpcy5mcmljdGlvbkVxdWF0aW9uc1tpXSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IG5jb250YWN0cyA9IGNvbnRhY3RzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSBuY29udGFjdHM7IGsrKykgewogICAgICAgIC8vIEN1cnJlbnQgY29udGFjdAogICAgICAgIGNvbnN0IGMgPSBjb250YWN0c1trXTsgLy8gR2V0IGN1cnJlbnQgY29sbGlzaW9uIGluZGVjZXMKCiAgICAgICAgY29uc3QgYmkgPSBjLmJpOwogICAgICAgIGNvbnN0IGJqID0gYy5iajsKICAgICAgICBjb25zdCBzaSA9IGMuc2k7CiAgICAgICAgY29uc3Qgc2ogPSBjLnNqOyAvLyBHZXQgY29sbGlzaW9uIHByb3BlcnRpZXMKCiAgICAgICAgbGV0IGNtOwoKICAgICAgICBpZiAoYmkubWF0ZXJpYWwgJiYgYmoubWF0ZXJpYWwpIHsKICAgICAgICAgIGNtID0gdGhpcy5nZXRDb250YWN0TWF0ZXJpYWwoYmkubWF0ZXJpYWwsIGJqLm1hdGVyaWFsKSB8fCB0aGlzLmRlZmF1bHRDb250YWN0TWF0ZXJpYWw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNtID0gdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICAgIH0gLy8gYy5lbmFibGVkID0gYmkuY29sbGlzaW9uUmVzcG9uc2UgJiYgYmouY29sbGlzaW9uUmVzcG9uc2UgJiYgc2kuY29sbGlzaW9uUmVzcG9uc2UgJiYgc2ouY29sbGlzaW9uUmVzcG9uc2U7CgoKICAgICAgICBjbS5mcmljdGlvbjsgLy8gYy5yZXN0aXR1dGlvbiA9IGNtLnJlc3RpdHV0aW9uOwogICAgICAgIC8vIElmIGZyaWN0aW9uIG9yIHJlc3RpdHV0aW9uIHdlcmUgc3BlY2lmaWVkIGluIHRoZSBtYXRlcmlhbCwgdXNlIHRoZW0KCiAgICAgICAgaWYgKGJpLm1hdGVyaWFsICYmIGJqLm1hdGVyaWFsKSB7CiAgICAgICAgICBpZiAoYmkubWF0ZXJpYWwuZnJpY3Rpb24gPj0gMCAmJiBiai5tYXRlcmlhbC5mcmljdGlvbiA+PSAwKSB7CiAgICAgICAgICAgIGJpLm1hdGVyaWFsLmZyaWN0aW9uICogYmoubWF0ZXJpYWwuZnJpY3Rpb247CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGJpLm1hdGVyaWFsLnJlc3RpdHV0aW9uID49IDAgJiYgYmoubWF0ZXJpYWwucmVzdGl0dXRpb24gPj0gMCkgewogICAgICAgICAgICBjLnJlc3RpdHV0aW9uID0gYmkubWF0ZXJpYWwucmVzdGl0dXRpb24gKiBiai5tYXRlcmlhbC5yZXN0aXR1dGlvbjsKICAgICAgICAgIH0KICAgICAgICB9IC8vIGMuc2V0U3Bvb2tQYXJhbXMoCiAgICAgICAgLy8gICAgICAgICAgIGNtLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzcywKICAgICAgICAvLyAgICAgICAgICAgY20uY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbiwKICAgICAgICAvLyAgICAgICAgICAgZHQKICAgICAgICAvLyAgICAgICApOwoKCiAgICAgICAgc29sdmVyLmFkZEVxdWF0aW9uKGMpOyAvLyAvLyBBZGQgZnJpY3Rpb24gY29uc3RyYWludCBlcXVhdGlvbgogICAgICAgIC8vIGlmKG11ID4gMCl7CiAgICAgICAgLy8gCS8vIENyZWF0ZSAyIHRhbmdlbnQgZXF1YXRpb25zCiAgICAgICAgLy8gCWNvbnN0IG11ZyA9IG11ICogZ25vcm07CiAgICAgICAgLy8gCWNvbnN0IHJlZHVjZWRNYXNzID0gKGJpLmludk1hc3MgKyBiai5pbnZNYXNzKTsKICAgICAgICAvLyAJaWYocmVkdWNlZE1hc3MgPiAwKXsKICAgICAgICAvLyAJCXJlZHVjZWRNYXNzID0gMS9yZWR1Y2VkTWFzczsKICAgICAgICAvLyAJfQogICAgICAgIC8vIAljb25zdCBwb29sID0gZnJpY3Rpb25FcXVhdGlvblBvb2w7CiAgICAgICAgLy8gCWNvbnN0IGMxID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYmksYmosbXVnKnJlZHVjZWRNYXNzKTsKICAgICAgICAvLyAJY29uc3QgYzIgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihiaSxiaixtdWcqcmVkdWNlZE1hc3MpOwogICAgICAgIC8vIAl0aGlzLmZyaWN0aW9uRXF1YXRpb25zLnB1c2goYzEsIGMyKTsKICAgICAgICAvLyAJYzEuYmkgPSBjMi5iaSA9IGJpOwogICAgICAgIC8vIAljMS5iaiA9IGMyLmJqID0gYmo7CiAgICAgICAgLy8gCWMxLm1pbkZvcmNlID0gYzIubWluRm9yY2UgPSAtbXVnKnJlZHVjZWRNYXNzOwogICAgICAgIC8vIAljMS5tYXhGb3JjZSA9IGMyLm1heEZvcmNlID0gbXVnKnJlZHVjZWRNYXNzOwogICAgICAgIC8vIAkvLyBDb3B5IG92ZXIgdGhlIHJlbGF0aXZlIHZlY3RvcnMKICAgICAgICAvLyAJYzEucmkuY29weShjLnJpKTsKICAgICAgICAvLyAJYzEucmouY29weShjLnJqKTsKICAgICAgICAvLyAJYzIucmkuY29weShjLnJpKTsKICAgICAgICAvLyAJYzIucmouY29weShjLnJqKTsKICAgICAgICAvLyAJLy8gQ29uc3RydWN0IHRhbmdlbnRzCiAgICAgICAgLy8gCWMubmkudGFuZ2VudHMoYzEudCwgYzIudCk7CiAgICAgICAgLy8gICAgICAgICAgIC8vIFNldCBzcG9vayBwYXJhbXMKICAgICAgICAvLyAgICAgICAgICAgYzEuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIGR0KTsKICAgICAgICAvLyAgICAgICAgICAgYzIuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIGR0KTsKICAgICAgICAvLyAgICAgICAgICAgYzEuZW5hYmxlZCA9IGMyLmVuYWJsZWQgPSBjLmVuYWJsZWQ7CiAgICAgICAgLy8gCS8vIEFkZCBlcXVhdGlvbnMgdG8gc29sdmVyCiAgICAgICAgLy8gCXNvbHZlci5hZGRFcXVhdGlvbihjMSk7CiAgICAgICAgLy8gCXNvbHZlci5hZGRFcXVhdGlvbihjMik7CiAgICAgICAgLy8gfQoKICAgICAgICBpZiAoYmkuYWxsb3dTbGVlcCAmJiBiaS50eXBlID09PSBCb2R5LkRZTkFNSUMgJiYgYmkuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyAmJiBiai5zbGVlcFN0YXRlID09PSBCb2R5LkFXQUtFICYmIGJqLnR5cGUgIT09IEJvZHkuU1RBVElDKSB7CiAgICAgICAgICBjb25zdCBzcGVlZFNxdWFyZWRCID0gYmoudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgYmouYW5ndWxhclZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKTsKICAgICAgICAgIGNvbnN0IHNwZWVkTGltaXRTcXVhcmVkQiA9IGJqLnNsZWVwU3BlZWRMaW1pdCAqKiAyOwoKICAgICAgICAgIGlmIChzcGVlZFNxdWFyZWRCID49IHNwZWVkTGltaXRTcXVhcmVkQiAqIDIpIHsKICAgICAgICAgICAgYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoYmouYWxsb3dTbGVlcCAmJiBiai50eXBlID09PSBCb2R5LkRZTkFNSUMgJiYgYmouc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyAmJiBiaS5zbGVlcFN0YXRlID09PSBCb2R5LkFXQUtFICYmIGJpLnR5cGUgIT09IEJvZHkuU1RBVElDKSB7CiAgICAgICAgICBjb25zdCBzcGVlZFNxdWFyZWRBID0gYmkudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgYmkuYW5ndWxhclZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKTsKICAgICAgICAgIGNvbnN0IHNwZWVkTGltaXRTcXVhcmVkQSA9IGJpLnNsZWVwU3BlZWRMaW1pdCAqKiAyOwoKICAgICAgICAgIGlmIChzcGVlZFNxdWFyZWRBID49IHNwZWVkTGltaXRTcXVhcmVkQSAqIDIpIHsKICAgICAgICAgICAgYmoud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBOb3cgd2Uga25vdyB0aGF0IGkgYW5kIGogYXJlIGluIGNvbnRhY3QuIFNldCBjb2xsaXNpb24gbWF0cml4IHN0YXRlCgoKICAgICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXQoYmksIGJqLCB0cnVlKTsKCiAgICAgICAgaWYgKCF0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzLmdldChiaSwgYmopKSB7CiAgICAgICAgICAvLyBGaXJzdCBjb250YWN0IQogICAgICAgICAgLy8gV2UgcmV1c2UgdGhlIGNvbGxpZGVFdmVudCBvYmplY3QsIG90aGVyd2lzZSB3ZSB3aWxsIGVuZCB1cCBjcmVhdGluZyBuZXcgb2JqZWN0cyBmb3IgZWFjaCBuZXcgY29udGFjdCwgZXZlbiBpZiB0aGVyZSdzIG5vIGV2ZW50IGxpc3RlbmVyIGF0dGFjaGVkLgogICAgICAgICAgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQuYm9keSA9IGJqOwogICAgICAgICAgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQuY29udGFjdCA9IGM7CiAgICAgICAgICBiaS5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50KTsKICAgICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmJvZHkgPSBiaTsKICAgICAgICAgIGJqLmRpc3BhdGNoRXZlbnQoV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci5zZXQoYmkuaWQsIGJqLmlkKTsKICAgICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlci5zZXQoc2kuaWQsIHNqLmlkKTsKICAgICAgfQoKICAgICAgdGhpcy5lbWl0Q29udGFjdEV2ZW50cygpOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5tYWtlQ29udGFjdENvbnN0cmFpbnRzID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9IC8vIFdha2UgdXAgYm9kaWVzCgoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CgogICAgICAgIGlmIChiaS53YWtlVXBBZnRlck5hcnJvd3BoYXNlKSB7CiAgICAgICAgICBiaS53YWtlVXAoKTsKICAgICAgICAgIGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0gLy8gQWRkIHVzZXItYWRkZWQgY29uc3RyYWludHMKCgogICAgICBOY29uc3RyYWludHMgPSBjb25zdHJhaW50cy5sZW5ndGg7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOY29uc3RyYWludHM7IGkrKykgewogICAgICAgIGNvbnN0IGMgPSBjb25zdHJhaW50c1tpXTsKICAgICAgICBjLnVwZGF0ZSgpOwoKICAgICAgICBmb3IgKGxldCBqID0gMCwgTmVxID0gYy5lcXVhdGlvbnMubGVuZ3RoOyBqICE9PSBOZXE7IGorKykgewogICAgICAgICAgY29uc3QgZXEgPSBjLmVxdWF0aW9uc1tqXTsKICAgICAgICAgIHNvbHZlci5hZGRFcXVhdGlvbihlcSk7CiAgICAgICAgfQogICAgICB9IC8vIFNvbHZlIHRoZSBjb25zdHJhaW5lZCBzeXN0ZW0KCgogICAgICBzb2x2ZXIuc29sdmUoZHQsIHRoaXMpOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5zb2x2ZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gUmVtb3ZlIGFsbCBjb250YWN0cyBmcm9tIHNvbHZlcgoKCiAgICAgIHNvbHZlci5yZW1vdmVBbGxFcXVhdGlvbnMoKTsgLy8gQXBwbHkgZGFtcGluZywgc2VlIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9idWxsZXQvaXNzdWVzL2RldGFpbD9pZD03NCBmb3IgZGV0YWlscwoKICAgICAgY29uc3QgcG93ID0gTWF0aC5wb3c7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgaWYgKGJpLnR5cGUgJiBEWU5BTUlDKSB7CiAgICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljIGJvZGllcwogICAgICAgICAgY29uc3QgbGQgPSBwb3coMS4wIC0gYmkubGluZWFyRGFtcGluZywgZHQpOwogICAgICAgICAgY29uc3QgdiA9IGJpLnZlbG9jaXR5OwogICAgICAgICAgdi5zY2FsZShsZCwgdik7CiAgICAgICAgICBjb25zdCBhdiA9IGJpLmFuZ3VsYXJWZWxvY2l0eTsKCiAgICAgICAgICBpZiAoYXYpIHsKICAgICAgICAgICAgY29uc3QgYWQgPSBwb3coMS4wIC0gYmkuYW5ndWxhckRhbXBpbmcsIGR0KTsKICAgICAgICAgICAgYXYuc2NhbGUoYWQsIGF2KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCk7IC8vIExlYXAgZnJvZwogICAgICAvLyB2bmV3ID0gdiArIGgqZi9tCiAgICAgIC8vIHhuZXcgPSB4ICsgaCp2bmV3CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9CgogICAgICBjb25zdCBzdGVwbnVtYmVyID0gdGhpcy5zdGVwbnVtYmVyOwogICAgICBjb25zdCBxdWF0Tm9ybWFsaXplID0gc3RlcG51bWJlciAlICh0aGlzLnF1YXROb3JtYWxpemVTa2lwICsgMSkgPT09IDA7CiAgICAgIGNvbnN0IHF1YXROb3JtYWxpemVGYXN0ID0gdGhpcy5xdWF0Tm9ybWFsaXplRmFzdDsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGJvZGllc1tpXS5pbnRlZ3JhdGUoZHQsIHF1YXROb3JtYWxpemUsIHF1YXROb3JtYWxpemVGYXN0KTsKICAgICAgfQoKICAgICAgdGhpcy5jbGVhckZvcmNlcygpOwogICAgICB0aGlzLmJyb2FkcGhhc2UuZGlydHkgPSB0cnVlOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5pbnRlZ3JhdGUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIFVwZGF0ZSBzdGVwIG51bWJlcgoKCiAgICAgIHRoaXMuc3RlcG51bWJlciArPSAxOwogICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoV29ybGRfc3RlcF9wb3N0U3RlcEV2ZW50KTsgLy8gU2xlZXBpbmcgdXBkYXRlCgogICAgICBsZXQgaGFzQWN0aXZlQm9kaWVzID0gdHJ1ZTsKCiAgICAgIGlmICh0aGlzLmFsbG93U2xlZXApIHsKICAgICAgICBoYXNBY3RpdmVCb2RpZXMgPSBmYWxzZTsKCiAgICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKICAgICAgICAgIGJpLnNsZWVwVGljayh0aGlzLnRpbWUpOwoKICAgICAgICAgIGlmIChiaS5zbGVlcFN0YXRlICE9PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgICAgIGhhc0FjdGl2ZUJvZGllcyA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmhhc0FjdGl2ZUJvZGllcyA9IGhhc0FjdGl2ZUJvZGllczsKICAgIH0KCiAgICBlbWl0Q29udGFjdEV2ZW50cygpIHsKICAgICAgY29uc3QgaGFzQmVnaW5Db250YWN0ID0gdGhpcy5oYXNBbnlFdmVudExpc3RlbmVyKCdiZWdpbkNvbnRhY3QnKTsKICAgICAgY29uc3QgaGFzRW5kQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignZW5kQ29udGFjdCcpOwoKICAgICAgaWYgKGhhc0JlZ2luQ29udGFjdCB8fCBoYXNFbmRDb250YWN0KSB7CiAgICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci5nZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpOwogICAgICB9CgogICAgICBpZiAoaGFzQmVnaW5Db250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBhZGRpdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QSA9IHRoaXMuZ2V0Qm9keUJ5SWQoYWRkaXRpb25zW2ldKTsKICAgICAgICAgIGJlZ2luQ29udGFjdEV2ZW50LmJvZHlCID0gdGhpcy5nZXRCb2R5QnlJZChhZGRpdGlvbnNbaSArIDFdKTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChiZWdpbkNvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QSA9IGJlZ2luQ29udGFjdEV2ZW50LmJvZHlCID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKGhhc0VuZENvbnRhY3QpIHsKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHJlbW92YWxzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikgewogICAgICAgICAgZW5kQ29udGFjdEV2ZW50LmJvZHlBID0gdGhpcy5nZXRCb2R5QnlJZChyZW1vdmFsc1tpXSk7CiAgICAgICAgICBlbmRDb250YWN0RXZlbnQuYm9keUIgPSB0aGlzLmdldEJvZHlCeUlkKHJlbW92YWxzW2kgKyAxXSk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZW5kQ29udGFjdEV2ZW50KTsKICAgICAgICB9CgogICAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QSA9IGVuZENvbnRhY3RFdmVudC5ib2R5QiA9IG51bGw7CiAgICAgIH0KCiAgICAgIGFkZGl0aW9ucy5sZW5ndGggPSByZW1vdmFscy5sZW5ndGggPSAwOwogICAgICBjb25zdCBoYXNCZWdpblNoYXBlQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignYmVnaW5TaGFwZUNvbnRhY3QnKTsKICAgICAgY29uc3QgaGFzRW5kU2hhcGVDb250YWN0ID0gdGhpcy5oYXNBbnlFdmVudExpc3RlbmVyKCdlbmRTaGFwZUNvbnRhY3QnKTsKCiAgICAgIGlmIChoYXNCZWdpblNoYXBlQ29udGFjdCB8fCBoYXNFbmRTaGFwZUNvbnRhY3QpIHsKICAgICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlci5nZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpOwogICAgICB9CgogICAgICBpZiAoaGFzQmVnaW5TaGFwZUNvbnRhY3QpIHsKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGFkZGl0aW9ucy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGNvbnN0IHNoYXBlQSA9IHRoaXMuZ2V0U2hhcGVCeUlkKGFkZGl0aW9uc1tpXSk7CiAgICAgICAgICBjb25zdCBzaGFwZUIgPSB0aGlzLmdldFNoYXBlQnlJZChhZGRpdGlvbnNbaSArIDFdKTsKICAgICAgICAgIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gc2hhcGVBOwogICAgICAgICAgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBzaGFwZUI7CiAgICAgICAgICBpZiAoc2hhcGVBKSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlBID0gc2hhcGVBLmJvZHk7CiAgICAgICAgICBpZiAoc2hhcGVCKSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gc2hhcGVCLmJvZHk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoYmVnaW5TaGFwZUNvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlBID0gYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBudWxsOwogICAgICB9CgogICAgICBpZiAoaGFzRW5kU2hhcGVDb250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSByZW1vdmFscy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGNvbnN0IHNoYXBlQSA9IHRoaXMuZ2V0U2hhcGVCeUlkKHJlbW92YWxzW2ldKTsKICAgICAgICAgIGNvbnN0IHNoYXBlQiA9IHRoaXMuZ2V0U2hhcGVCeUlkKHJlbW92YWxzW2kgKyAxXSk7CiAgICAgICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5zaGFwZUEgPSBzaGFwZUE7CiAgICAgICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBzaGFwZUI7CiAgICAgICAgICBpZiAoc2hhcGVBKSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IHNoYXBlQS5ib2R5OwogICAgICAgICAgaWYgKHNoYXBlQikgZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBzaGFwZUIuYm9keTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChlbmRTaGFwZUNvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gbnVsbDsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGFsbCBib2R5IGZvcmNlcyBpbiB0aGUgd29ybGQgdG8gemVyby4KICAgICAqLwoKCiAgICBjbGVhckZvcmNlcygpIHsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CiAgICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07CiAgICAgICAgYi5mb3JjZTsKICAgICAgICBiLnRvcnF1ZTsKICAgICAgICBiLmZvcmNlLnNldCgwLCAwLCAwKTsKICAgICAgICBiLnRvcnF1ZS5zZXQoMCwgMCwgMCk7CiAgICAgIH0KICAgIH0KCiAgfSAvLyBUZW1wIHN0dWZmCgogIG5ldyBBQUJCKCk7CiAgY29uc3QgdG1wUmF5ID0gbmV3IFJheSgpOyAvLyBwZXJmb3JtYW5jZS5ub3coKSBmYWxsYmFjayBvbiBEYXRlLm5vdygpCgogIGNvbnN0IHBlcmZvcm1hbmNlID0gZ2xvYmFsVGhpcy5wZXJmb3JtYW5jZSB8fCB7fTsKCiAgaWYgKCFwZXJmb3JtYW5jZS5ub3cpIHsKICAgIGxldCBub3dPZmZzZXQgPSBEYXRlLm5vdygpOwoKICAgIGlmIChwZXJmb3JtYW5jZS50aW1pbmcgJiYgcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCkgewogICAgICBub3dPZmZzZXQgPSBwZXJmb3JtYW5jZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0OwogICAgfQoKICAgIHBlcmZvcm1hbmNlLm5vdyA9ICgpID0+IERhdGUubm93KCkgLSBub3dPZmZzZXQ7CiAgfQoKICBuZXcgVmVjMygpOyAvLyBEaXNwYXRjaGVkIGFmdGVyIHRoZSB3b3JsZCBoYXMgc3RlcHBlZCBmb3J3YXJkIGluIHRpbWUuCiAgLy8gUmV1c2FibGUgZXZlbnQgb2JqZWN0cyB0byBzYXZlIG1lbW9yeS4KCiAgY29uc3QgV29ybGRfc3RlcF9wb3N0U3RlcEV2ZW50ID0gewogICAgdHlwZTogJ3Bvc3RTdGVwJwogIH07IC8vIERpc3BhdGNoZWQgYmVmb3JlIHRoZSB3b3JsZCBzdGVwcyBmb3J3YXJkIGluIHRpbWUuCgogIGNvbnN0IFdvcmxkX3N0ZXBfcHJlU3RlcEV2ZW50ID0gewogICAgdHlwZTogJ3ByZVN0ZXAnCiAgfTsKICBjb25zdCBXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCA9IHsKICAgIHR5cGU6IEJvZHkuQ09MTElERV9FVkVOVF9OQU1FLAogICAgYm9keTogbnVsbCwKICAgIGNvbnRhY3Q6IG51bGwKICB9OyAvLyBQb29scyBmb3IgdW51c2VkIG9iamVjdHMKCiAgY29uc3QgV29ybGRfc3RlcF9vbGRDb250YWN0cyA9IFtdOwogIGNvbnN0IFdvcmxkX3N0ZXBfZnJpY3Rpb25FcXVhdGlvblBvb2wgPSBbXTsgLy8gUmV1c2FibGUgYXJyYXlzIGZvciBjb2xsaXNpb24gcGFpcnMKCiAgY29uc3QgV29ybGRfc3RlcF9wMSA9IFtdOwogIGNvbnN0IFdvcmxkX3N0ZXBfcDIgPSBbXTsgLy8gU3R1ZmYgZm9yIGVtaXRDb250YWN0RXZlbnRzCgogIGNvbnN0IGFkZGl0aW9ucyA9IFtdOwogIGNvbnN0IHJlbW92YWxzID0gW107CiAgY29uc3QgYmVnaW5Db250YWN0RXZlbnQgPSB7CiAgICB0eXBlOiAnYmVnaW5Db250YWN0JywKICAgIGJvZHlBOiBudWxsLAogICAgYm9keUI6IG51bGwKICB9OwogIGNvbnN0IGVuZENvbnRhY3RFdmVudCA9IHsKICAgIHR5cGU6ICdlbmRDb250YWN0JywKICAgIGJvZHlBOiBudWxsLAogICAgYm9keUI6IG51bGwKICB9OwogIGNvbnN0IGJlZ2luU2hhcGVDb250YWN0RXZlbnQgPSB7CiAgICB0eXBlOiAnYmVnaW5TaGFwZUNvbnRhY3QnLAogICAgYm9keUE6IG51bGwsCiAgICBib2R5QjogbnVsbCwKICAgIHNoYXBlQTogbnVsbCwKICAgIHNoYXBlQjogbnVsbAogIH07CiAgY29uc3QgZW5kU2hhcGVDb250YWN0RXZlbnQgPSB7CiAgICB0eXBlOiAnZW5kU2hhcGVDb250YWN0JywKICAgIGJvZHlBOiBudWxsLAogICAgYm9keUI6IG51bGwsCiAgICBzaGFwZUE6IG51bGwsCiAgICBzaGFwZUI6IG51bGwKICB9OwoKICBjb25zdCBhZGRDb250YWN0TWF0ZXJpYWwgPSAod29ybGQsIGNyZWF0ZU1hdGVyaWFsLCBfcmVmLCB1dWlkKSA9PiB7CiAgICBsZXQgW21hdGVyaWFsQSwgbWF0ZXJpYWxCLCBvcHRpb25zXSA9IF9yZWY7CiAgICBjb25zdCBtYXRBID0gY3JlYXRlTWF0ZXJpYWwobWF0ZXJpYWxBKTsKICAgIGNvbnN0IG1hdEIgPSBjcmVhdGVNYXRlcmlhbChtYXRlcmlhbEIpOwogICAgY29uc3QgY29udGFjdE1hdGVyaWFsID0gbmV3IENvbnRhY3RNYXRlcmlhbChtYXRBLCBtYXRCLCBvcHRpb25zKTsKICAgIGNvbnRhY3RNYXRlcmlhbC51dWlkID0gdXVpZDsKICAgIHdvcmxkLmFkZENvbnRhY3RNYXRlcmlhbChjb250YWN0TWF0ZXJpYWwpOwogIH07CiAgY29uc3QgcmVtb3ZlQ29udGFjdE1hdGVyaWFsID0gKHdvcmxkLCBjbVVVSUQpID0+IHsKICAgIGNvbnN0IGluZGV4ID0gd29ybGQuY29udGFjdG1hdGVyaWFscy5maW5kSW5kZXgoX3JlZjIgPT4gewogICAgICBsZXQgewogICAgICAgIHV1aWQKICAgICAgfSA9IF9yZWYyOwogICAgICByZXR1cm4gdXVpZCA9PT0gY21VVUlEOwogICAgfSk7CiAgICBjb25zdCBbewogICAgICBpZDogaQogICAgfSwgewogICAgICBpZDogagogICAgfV0gPSB3b3JsZC5jb250YWN0bWF0ZXJpYWxzW2luZGV4XS5tYXRlcmlhbHM7CiAgICB3b3JsZC5jb250YWN0bWF0ZXJpYWxzLnNwbGljZShpbmRleCwgMSk7CiAgICBkZWxldGUgd29ybGQuY29udGFjdE1hdGVyaWFsVGFibGUuZGF0YVtpIDwgaiA/IGAke2l9LSR7an1gIDogYCR7an0tJHtpfWBdOwogIH07CgogIGxldCBtYXRlcmlhbElkID0gMDsKICBjb25zdCBjcmVhdGVNYXRlcmlhbEZhY3RvcnkgPSBtYXRlcmlhbHMgPT4gZnVuY3Rpb24gKG5hbWVPck9wdGlvbnMpIHsKICAgIGlmIChuYW1lT3JPcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgbmFtZU9yT3B0aW9ucyA9IHt9OwogICAgfQogICAgY29uc3QgbWF0ZXJpYWxPcHRpb25zID0gdHlwZW9mIG5hbWVPck9wdGlvbnMgPT09ICdzdHJpbmcnID8gewogICAgICBuYW1lOiBuYW1lT3JPcHRpb25zCiAgICB9IDogewogICAgICBuYW1lOiBTeW1ib2wuZm9yKGBNYXRlcmlhbCR7bWF0ZXJpYWxJZCsrfWApLAogICAgICAuLi5uYW1lT3JPcHRpb25zCiAgICB9OwogICAgY29uc3QgewogICAgICBuYW1lCiAgICB9ID0gbWF0ZXJpYWxPcHRpb25zOwogICAgbWF0ZXJpYWxzW25hbWVdID0gbWF0ZXJpYWxzW25hbWVdIHx8IG5ldyBNYXRlcmlhbChtYXRlcmlhbE9wdGlvbnMpOwogICAgcmV0dXJuIG1hdGVyaWFsc1tuYW1lXTsKICB9OwoKICAvKioKICAgKiBAdHlwZWRlZiB7IGltcG9ydCgnY2Fubm9uLWVzJykuTWF0ZXJpYWxPcHRpb25zIH0gTWF0ZXJpYWxPcHRpb25zCiAgICovCgogIGNvbnN0IG1ha2VWZWMzID0gX3JlZiA9PiB7CiAgICBsZXQgW3gsIHksIHpdID0gX3JlZjsKICAgIHJldHVybiBuZXcgVmVjMyh4LCB5LCB6KTsKICB9OwogIGNvbnN0IHByZXBhcmVTcGhlcmUgPSBhcmdzID0+IEFycmF5LmlzQXJyYXkoYXJncykgPyBhcmdzIDogW2FyZ3NdOwogIGNvbnN0IHByZXBhcmVDb252ZXhQb2x5aGVkcm9uID0gX3JlZjIgPT4gewogICAgbGV0IFt2LCBmYWNlcywgbiwgYSwgYm91bmRpbmdTcGhlcmVSYWRpdXNdID0gX3JlZjI7CiAgICByZXR1cm4gW3sKICAgICAgYXhlczogYSA/IGEubWFwKG1ha2VWZWMzKSA6IHVuZGVmaW5lZCwKICAgICAgYm91bmRpbmdTcGhlcmVSYWRpdXMsCiAgICAgIGZhY2VzLAogICAgICBub3JtYWxzOiBuID8gbi5tYXAobWFrZVZlYzMpIDogdW5kZWZpbmVkLAogICAgICB2ZXJ0aWNlczogdiA/IHYubWFwKG1ha2VWZWMzKSA6IHVuZGVmaW5lZAogICAgfV07CiAgfTsKICBmdW5jdGlvbiBjcmVhdGVTaGFwZSh0eXBlLCBhcmdzKSB7CiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgY2FzZSAnQm94JzoKICAgICAgICByZXR1cm4gbmV3IEJveChuZXcgVmVjMyguLi5hcmdzLm1hcCh2ID0+IHYgLyAyKSkpOwogICAgICAvLyBleHRlbnRzID0+IGhhbGZFeHRlbnRzCiAgICAgIGNhc2UgJ0NvbnZleFBvbHloZWRyb24nOgogICAgICAgIHJldHVybiBuZXcgQ29udmV4UG9seWhlZHJvbiguLi5wcmVwYXJlQ29udmV4UG9seWhlZHJvbihhcmdzKSk7CiAgICAgIGNhc2UgJ0N5bGluZGVyJzoKICAgICAgICByZXR1cm4gbmV3IEN5bGluZGVyKC4uLmFyZ3MpOwogICAgICAvLyBbIHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzIF0gPSBhcmdzCiAgICAgIGNhc2UgJ0hlaWdodGZpZWxkJzoKICAgICAgICByZXR1cm4gbmV3IEhlaWdodGZpZWxkKC4uLmFyZ3MpOwogICAgICAvLyBbIEFycmF5IGRhdGEsIG9wdGlvbnM6IHttaW5WYWx1ZSwgbWF4VmFsdWUsIGVsZW1lbnRTaXplfSAgXSA9IGFyZ3MKICAgICAgY2FzZSAnUGFydGljbGUnOgogICAgICAgIHJldHVybiBuZXcgUGFydGljbGUoKTsKICAgICAgLy8gbm8gYXJncwogICAgICBjYXNlICdQbGFuZSc6CiAgICAgICAgcmV0dXJuIG5ldyBQbGFuZSgpOwogICAgICAvLyBubyBhcmdzLCBpbmZpbml0ZSB4IGFuZCB5CiAgICAgIGNhc2UgJ1NwaGVyZSc6CiAgICAgICAgcmV0dXJuIG5ldyBTcGhlcmUoLi4ucHJlcGFyZVNwaGVyZShhcmdzKSk7CiAgICAgIC8vIHJhZGl1cyA9IGFyZ3MKICAgICAgY2FzZSAnVHJpbWVzaCc6CiAgICAgICAgcmV0dXJuIG5ldyBUcmltZXNoKC4uLmFyZ3MpOwogICAgICAvLyBbdmVydGljZXMsIGluZGljZXNdID0gYXJncwogICAgfQogIH0KCiAgLyoqCiAgICogQHBhcmFtIHtUSFJFRS5RdWF0ZXJuaW9ufSB0YXJnZXQKICAgKiBAcGFyYW0ge3sgcm90YXRpb24/OiBUSFJFRS5WZWN0b3IzVHVwbGUgcXVhdGVybmlvbj86IFRIUkVFLlZlY3RvcjRUdXBsZSB9fSBwcm9wcwogICAqIEByZXR1cm5zIHtUSFJFRS5RdWF0ZXJuaW9ufQogICAqLwogIGNvbnN0IHNldFF1YXRlcm5pb24gPSAodGFyZ2V0LCBfcmVmMykgPT4gewogICAgbGV0IHsKICAgICAgcXVhdGVybmlvbiwKICAgICAgcm90YXRpb24KICAgIH0gPSBfcmVmMzsKICAgIGlmIChxdWF0ZXJuaW9uKSB7CiAgICAgIHRhcmdldC5zZXQoLi4ucXVhdGVybmlvbik7CiAgICB9IGVsc2UgaWYgKHJvdGF0aW9uKSB7CiAgICAgIHRhcmdldC5zZXRGcm9tRXVsZXIoLi4ucm90YXRpb24pOwogICAgfQogICAgcmV0dXJuIHRhcmdldDsKICB9OwoKICAvKioKICAgKiBAZnVuY3Rpb24KICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnV1aWQKICAgKiBAcGFyYW0ge0JvZHlQcm9wc30gb3B0aW9ucy5wcm9wcwogICAqIEBwYXJhbSB7Qm9keVNoYXBlVHlwZX0gb3B0aW9ucy50eXBlCiAgICogQHBhcmFtIHsobWF0ZXJpYWxPcHRpb25zOiBNYXRlcmlhbE9wdGlvbnMpID0+IE1hdGVyaWFsID19IG9wdGlvbnMuY3JlYXRlTWF0ZXJpYWwKICAgKiBAcmV0dXJucyB7Qm9keX0KICAgKi8KICBjb25zdCBwcm9wc1RvQm9keSA9IG9wdGlvbnMgPT4gewogICAgY29uc3QgewogICAgICB1dWlkLAogICAgICBwcm9wcywKICAgICAgdHlwZSwKICAgICAgY3JlYXRlTWF0ZXJpYWwgPSBtYXRlcmlhbE9wdGlvbnMgPT4gbmV3IE1hdGVyaWFsKG1hdGVyaWFsT3B0aW9ucykKICAgIH0gPSBvcHRpb25zOwogICAgY29uc3QgewogICAgICBhbmd1bGFyRmFjdG9yID0gWzEsIDEsIDFdLAogICAgICBhbmd1bGFyVmVsb2NpdHkgPSBbMCwgMCwgMF0sCiAgICAgIGFyZ3MgPSBbXSwKICAgICAgY29sbGlzaW9uUmVzcG9uc2UsCiAgICAgIGxpbmVhckZhY3RvciA9IFsxLCAxLCAxXSwKICAgICAgbWFzcywKICAgICAgbWF0ZXJpYWwsCiAgICAgIG9uQ29sbGlkZSwKICAgICAgcG9zaXRpb24gPSBbMCwgMCwgMF0sCiAgICAgIHJvdGF0aW9uLAogICAgICBxdWF0ZXJuaW9uLAogICAgICBzaGFwZXMsCiAgICAgIHR5cGU6IGJvZHlUeXBlLAogICAgICB2ZWxvY2l0eSA9IFswLCAwLCAwXSwKICAgICAgLi4uZXh0cmEKICAgIH0gPSBwcm9wczsKICAgIGNvbnN0IGJvZHkgPSBuZXcgQm9keSh7CiAgICAgIC4uLmV4dHJhLAogICAgICBtYXNzOiBib2R5VHlwZSA9PT0gJ1N0YXRpYycgPyAwIDogbWFzcywKICAgICAgbWF0ZXJpYWw6IG1hdGVyaWFsID8gY3JlYXRlTWF0ZXJpYWwobWF0ZXJpYWwpIDogdW5kZWZpbmVkLAogICAgICB0eXBlOiBib2R5VHlwZSA/IEJvZHlbYm9keVR5cGUudG9VcHBlckNhc2UoKV0gOiB1bmRlZmluZWQKICAgIH0pOwogICAgYm9keS51dWlkID0gdXVpZDsKICAgIGlmIChjb2xsaXNpb25SZXNwb25zZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGJvZHkuY29sbGlzaW9uUmVzcG9uc2UgPSBjb2xsaXNpb25SZXNwb25zZTsKICAgIH0KICAgIGlmICh0eXBlID09PSAnQ29tcG91bmQnKSB7CiAgICAgIHNoYXBlcy5mb3JFYWNoKF9yZWY0ID0+IHsKICAgICAgICBsZXQgewogICAgICAgICAgdHlwZSwKICAgICAgICAgIGFyZ3MsCiAgICAgICAgICBwb3NpdGlvbiwKICAgICAgICAgIHJvdGF0aW9uLAogICAgICAgICAgcXVhdGVybmlvbiwKICAgICAgICAgIG1hdGVyaWFsLAogICAgICAgICAgLi4uZXh0cmEKICAgICAgICB9ID0gX3JlZjQ7CiAgICAgICAgY29uc3Qgc2hhcGVCb2R5ID0gYm9keS5hZGRTaGFwZShjcmVhdGVTaGFwZSh0eXBlLCBhcmdzKSwgcG9zaXRpb24gPyBuZXcgVmVjMyguLi5wb3NpdGlvbikgOiB1bmRlZmluZWQsIHNldFF1YXRlcm5pb24obmV3IFF1YXRlcm5pb24oMCwgMCwgMCwgMSksIHsKICAgICAgICAgIHF1YXRlcm5pb24sCiAgICAgICAgICByb3RhdGlvbgogICAgICAgIH0pKTsKICAgICAgICBpZiAobWF0ZXJpYWwpIHNoYXBlQm9keS5tYXRlcmlhbCA9IGNyZWF0ZU1hdGVyaWFsKG1hdGVyaWFsKTsKICAgICAgICBPYmplY3QuYXNzaWduKHNoYXBlQm9keSwgZXh0cmEpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGJvZHkuYWRkU2hhcGUoY3JlYXRlU2hhcGUodHlwZSwgYXJncykpOwogICAgfQogICAgYm9keS5wb3NpdGlvbi5zZXQocG9zaXRpb25bMF0sIHBvc2l0aW9uWzFdLCBwb3NpdGlvblsyXSk7CiAgICBib2R5LnZlbG9jaXR5LnNldCh2ZWxvY2l0eVswXSwgdmVsb2NpdHlbMV0sIHZlbG9jaXR5WzJdKTsKICAgIGJvZHkuYW5ndWxhclZlbG9jaXR5LnNldChhbmd1bGFyVmVsb2NpdHlbMF0sIGFuZ3VsYXJWZWxvY2l0eVsxXSwgYW5ndWxhclZlbG9jaXR5WzJdKTsKICAgIGJvZHkubGluZWFyRmFjdG9yLnNldChsaW5lYXJGYWN0b3JbMF0sIGxpbmVhckZhY3RvclsxXSwgbGluZWFyRmFjdG9yWzJdKTsKICAgIGJvZHkuYW5ndWxhckZhY3Rvci5zZXQoYW5ndWxhckZhY3RvclswXSwgYW5ndWxhckZhY3RvclsxXSwgYW5ndWxhckZhY3RvclsyXSk7CiAgICBzZXRRdWF0ZXJuaW9uKGJvZHkucXVhdGVybmlvbiwgewogICAgICBxdWF0ZXJuaW9uLAogICAgICByb3RhdGlvbgogICAgfSk7CiAgICByZXR1cm4gYm9keTsKICB9OwoKICBjb25zdCBhZGRCb2RpZXMgPSAoc3RhdGUsIGNyZWF0ZU1hdGVyaWFsLCBfcmVmKSA9PiB7CiAgICBsZXQgewogICAgICBwcm9wcywKICAgICAgdHlwZSwKICAgICAgdXVpZAogICAgfSA9IF9yZWY7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHV1aWQubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgYm9keSA9IHByb3BzVG9Cb2R5KHsKICAgICAgICBjcmVhdGVNYXRlcmlhbCwKICAgICAgICBwcm9wczogcHJvcHNbaV0sCiAgICAgICAgdHlwZSwKICAgICAgICB1dWlkOiB1dWlkW2ldCiAgICAgIH0pOwogICAgICBzdGF0ZS53b3JsZC5hZGRCb2R5KGJvZHkpOwogICAgICBpZiAocHJvcHNbaV0ub25Db2xsaWRlKSBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbGxpZGUnLCBfcmVmMiA9PiB7CiAgICAgICAgbGV0IHsKICAgICAgICAgIHR5cGUsCiAgICAgICAgICBib2R5LAogICAgICAgICAgdGFyZ2V0LAogICAgICAgICAgY29udGFjdAogICAgICAgIH0gPSBfcmVmMjsKICAgICAgICBpZiAoIWJvZHkudXVpZCB8fCAhdGFyZ2V0LnV1aWQpIHJldHVybjsKICAgICAgICBjb25zdCB7CiAgICAgICAgICBuaSwKICAgICAgICAgIHJpLAogICAgICAgICAgcmosCiAgICAgICAgICBiaSwKICAgICAgICAgIGJqLAogICAgICAgICAgaWQKICAgICAgICB9ID0gY29udGFjdDsKICAgICAgICBjb25zdCBjb250YWN0UG9pbnQgPSBiaS5wb3NpdGlvbi52YWRkKHJpKTsKICAgICAgICBjb25zdCBjb250YWN0Tm9ybWFsID0gYmkgPT09IGJvZHkgPyBuaSA6IG5pLnNjYWxlKC0xKTsKICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICAgIGJvZHk6IGJvZHkudXVpZCwKICAgICAgICAgIGNvbGxpc2lvbkZpbHRlcnM6IHsKICAgICAgICAgICAgYm9keUZpbHRlckdyb3VwOiBib2R5LmNvbGxpc2lvbkZpbHRlckdyb3VwLAogICAgICAgICAgICBib2R5RmlsdGVyTWFzazogYm9keS5jb2xsaXNpb25GaWx0ZXJNYXNrLAogICAgICAgICAgICB0YXJnZXRGaWx0ZXJHcm91cDogdGFyZ2V0LmNvbGxpc2lvbkZpbHRlckdyb3VwLAogICAgICAgICAgICB0YXJnZXRGaWx0ZXJNYXNrOiB0YXJnZXQuY29sbGlzaW9uRmlsdGVyTWFzawogICAgICAgICAgfSwKICAgICAgICAgIGNvbnRhY3Q6IHsKICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiB1c2UgaWQgaW5zdGVhZCBvZiB1dWlkCiAgICAgICAgICAgIGJpOiBiaS51dWlkLAogICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IHVzZSBpZCBpbnN0ZWFkIG9mIHV1aWQKICAgICAgICAgICAgYmo6IGJqLnV1aWQsCiAgICAgICAgICAgIC8vIE5vcm1hbCBvZiB0aGUgY29udGFjdCwgcmVsYXRpdmUgdG8gdGhlIGNvbGxpZGluZyBib2R5CiAgICAgICAgICAgIGNvbnRhY3ROb3JtYWw6IGNvbnRhY3ROb3JtYWwudG9BcnJheSgpLAogICAgICAgICAgICAvLyBXb3JsZCBwb3NpdGlvbiBvZiB0aGUgY29udGFjdAogICAgICAgICAgICBjb250YWN0UG9pbnQ6IGNvbnRhY3RQb2ludC50b0FycmF5KCksCiAgICAgICAgICAgIGlkLAogICAgICAgICAgICBpbXBhY3RWZWxvY2l0eTogY29udGFjdC5nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsKCksCiAgICAgICAgICAgIG5pOiBuaS50b0FycmF5KCksCiAgICAgICAgICAgIHJpOiByaS50b0FycmF5KCksCiAgICAgICAgICAgIHJqOiByai50b0FycmF5KCkKICAgICAgICAgIH0sCiAgICAgICAgICBvcDogJ2V2ZW50JywKICAgICAgICAgIHRhcmdldDogdGFyZ2V0LnV1aWQsCiAgICAgICAgICB0eXBlCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH07CgogIGNvbnN0IHRyaXBsZXRUb1ZlYzMgPSB0ID0+IHQgPyBuZXcgVmVjMyguLi50KSA6IHVuZGVmaW5lZDsKCiAgY29uc3QgYWRkQ29uc3RyYWludCA9IChzdGF0ZSwgX3JlZikgPT4gewogICAgbGV0IHsKICAgICAgcHJvcHM6IFtib2R5QSwgYm9keUIsIHsKICAgICAgICBhbmdsZSwKICAgICAgICBheGlzQSwKICAgICAgICBheGlzQiwKICAgICAgICBjb2xsaWRlQ29ubmVjdGVkLAogICAgICAgIGRpc3RhbmNlLAogICAgICAgIG1heEZvcmNlLAogICAgICAgIG1heE11bHRpcGxpZXIsCiAgICAgICAgcGl2b3RBLAogICAgICAgIHBpdm90QiwKICAgICAgICB0d2lzdEFuZ2xlLAogICAgICAgIHdha2VVcEJvZGllcwogICAgICB9XSwKICAgICAgdHlwZSwKICAgICAgdXVpZAogICAgfSA9IF9yZWY7CiAgICBsZXQgY29uc3RyYWludDsKICAgIHN3aXRjaCAodHlwZSkgewogICAgICBjYXNlICdQb2ludFRvUG9pbnQnOgogICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgUG9pbnRUb1BvaW50Q29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCB0cmlwbGV0VG9WZWMzKHBpdm90QSksIHN0YXRlLmJvZGllc1tib2R5Ql0sIHRyaXBsZXRUb1ZlYzMocGl2b3RCKSwgbWF4Rm9yY2UpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdDb25lVHdpc3QnOgogICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgQ29uZVR3aXN0Q29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgICAgICBhbmdsZSwKICAgICAgICAgIGF4aXNBOiB0cmlwbGV0VG9WZWMzKGF4aXNBKSwKICAgICAgICAgIGF4aXNCOiB0cmlwbGV0VG9WZWMzKGF4aXNCKSwKICAgICAgICAgIGNvbGxpZGVDb25uZWN0ZWQsCiAgICAgICAgICBtYXhGb3JjZSwKICAgICAgICAgIHBpdm90QTogdHJpcGxldFRvVmVjMyhwaXZvdEEpLAogICAgICAgICAgcGl2b3RCOiB0cmlwbGV0VG9WZWMzKHBpdm90QiksCiAgICAgICAgICB0d2lzdEFuZ2xlCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ0hpbmdlJzoKICAgICAgICBjb25zdHJhaW50ID0gbmV3IEhpbmdlQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgICAgICBheGlzQTogdHJpcGxldFRvVmVjMyhheGlzQSksCiAgICAgICAgICBheGlzQjogdHJpcGxldFRvVmVjMyhheGlzQiksCiAgICAgICAgICBjb2xsaWRlQ29ubmVjdGVkLAogICAgICAgICAgbWF4Rm9yY2UsCiAgICAgICAgICBwaXZvdEE6IHRyaXBsZXRUb1ZlYzMocGl2b3RBKSwKICAgICAgICAgIHBpdm90QjogdHJpcGxldFRvVmVjMyhwaXZvdEIpCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ0Rpc3RhbmNlJzoKICAgICAgICBjb25zdHJhaW50ID0gbmV3IERpc3RhbmNlQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCBkaXN0YW5jZSwgbWF4Rm9yY2UpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdMb2NrJzoKICAgICAgICBjb25zdHJhaW50ID0gbmV3IExvY2tDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgICAgIG1heEZvcmNlCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgICAgIGNvbGxpZGVDb25uZWN0ZWQsCiAgICAgICAgICB3YWtlVXBCb2RpZXMKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgIH0KICAgIGNvbnN0cmFpbnQudXVpZCA9IHV1aWQ7CiAgICBzdGF0ZS53b3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQpOwogICAgaWYgKG1heE11bHRpcGxpZXIgIT09IHVuZGVmaW5lZCkgewogICAgICBjb25zdCBwb3N0U3RlcENvbnN0cmFpbnQgPSAoKSA9PiB7CiAgICAgICAgLy8gVGhlIG11bHRpcGxpZXIgaXMgcHJvcG9ydGlvbmFsIHRvIGhvdyBtdWNoIGZvcmNlIGlzIGFkZGVkIHRvIHRoZSBib2RpZXMgYnkgdGhlIGNvbnN0cmFpbnQuCiAgICAgICAgLy8gSWYgdGhpcyBleGNlZWRzIGEgbGltaXQgdGhlIGNvbnN0cmFpbnQgaXMgZGlzYWJsZWQuCiAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IE1hdGguYWJzKGNvbnN0cmFpbnQuZXF1YXRpb25zWzBdLm11bHRpcGxpZXIpOwogICAgICAgIGlmIChtdWx0aXBsaWVyID4gbWF4TXVsdGlwbGllcikgewogICAgICAgICAgY29uc3RyYWludC5kaXNhYmxlKCk7CiAgICAgICAgfQogICAgICB9OwogICAgICBzdGF0ZS5jb25zdHJhaW50c1t1dWlkXSA9IHBvc3RTdGVwQ29uc3RyYWludDsKICAgICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5jb25zdHJhaW50c1t1dWlkXSk7CiAgICB9CiAgfTsKCiAgZnVuY3Rpb24gdG9VcHBlcmNhc2Uoc3RyKSB7CiAgICByZXR1cm4gc3RyLnRvVXBwZXJDYXNlKCk7CiAgfQogIGNvbnN0IGFkZFJheSA9IChzdGF0ZSwgX3JlZikgPT4gewogICAgbGV0IHsKICAgICAgcHJvcHM6IHsKICAgICAgICBmcm9tLAogICAgICAgIG1vZGUsCiAgICAgICAgdG8sCiAgICAgICAgLi4ucmF5T3B0aW9ucwogICAgICB9LAogICAgICB1dWlkCiAgICB9ID0gX3JlZjsKICAgIGNvbnN0IHJheSA9IG5ldyBSYXkodHJpcGxldFRvVmVjMyhmcm9tKSwgdHJpcGxldFRvVmVjMyh0bykpOwogICAgY29uc3Qgb3B0aW9ucyA9IHsKICAgICAgbW9kZTogUkFZX01PREVTW3RvVXBwZXJjYXNlKG1vZGUpXSwKICAgICAgcmVzdWx0OiBuZXcgUmF5Y2FzdFJlc3VsdCgpLAogICAgICAuLi5yYXlPcHRpb25zCiAgICB9OwogICAgc3RhdGUucmF5c1t1dWlkXSA9ICgpID0+IHsKICAgICAgcmF5LmludGVyc2VjdFdvcmxkKHN0YXRlLndvcmxkLCBvcHRpb25zKTsKICAgICAgaWYgKCFvcHRpb25zLnJlc3VsdCB8fCAhb3B0aW9ucy5yZXN1bHQuYm9keSkgcmV0dXJuOwogICAgICBjb25zdCB7CiAgICAgICAgYm9keSwKICAgICAgICBzaGFwZSwKICAgICAgICByYXlGcm9tV29ybGQsCiAgICAgICAgcmF5VG9Xb3JsZCwKICAgICAgICBoaXROb3JtYWxXb3JsZCwKICAgICAgICBoaXRQb2ludFdvcmxkLAogICAgICAgIC4uLnJlc3QKICAgICAgfSA9IG9wdGlvbnMucmVzdWx0OwogICAgICBjb25zdCBib2R5VVVJRCA9IGJvZHkudXVpZDsKICAgICAgaWYgKCFib2R5VVVJRCkgcmV0dXJuOwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICBib2R5OiBib2R5VVVJRCwKICAgICAgICBoaXROb3JtYWxXb3JsZDogaGl0Tm9ybWFsV29ybGQudG9BcnJheSgpLAogICAgICAgIGhpdFBvaW50V29ybGQ6IGhpdFBvaW50V29ybGQudG9BcnJheSgpLAogICAgICAgIG9wOiAnZXZlbnQnLAogICAgICAgIHJheTogewogICAgICAgICAgY29sbGlzaW9uRmlsdGVyR3JvdXA6IHJheS5jb2xsaXNpb25GaWx0ZXJHcm91cCwKICAgICAgICAgIGNvbGxpc2lvbkZpbHRlck1hc2s6IHJheS5jb2xsaXNpb25GaWx0ZXJNYXNrLAogICAgICAgICAgZGlyZWN0aW9uOiByYXkuZGlyZWN0aW9uLnRvQXJyYXkoKSwKICAgICAgICAgIGZyb20sCiAgICAgICAgICB0bywKICAgICAgICAgIHV1aWQKICAgICAgICB9LAogICAgICAgIHJheUZyb21Xb3JsZDogcmF5RnJvbVdvcmxkLnRvQXJyYXkoKSwKICAgICAgICByYXlUb1dvcmxkOiByYXlUb1dvcmxkLnRvQXJyYXkoKSwKICAgICAgICBzaGFwZTogc2hhcGUgPyB7CiAgICAgICAgICAuLi5zaGFwZSwKICAgICAgICAgIGJvZHk6IGJvZHlVVUlECiAgICAgICAgfSA6IG51bGwsCiAgICAgICAgdHlwZTogJ3JheWhpdCcsCiAgICAgICAgLi4ucmVzdAogICAgICB9KTsKICAgIH07CiAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUucmF5c1t1dWlkXSk7CiAgfTsKCiAgY29uc3QgYWRkUmF5Y2FzdFZlaGljbGUgPSAoc3RhdGUsIGRhdGEpID0+IHsKICAgIGNvbnN0IFtjaGFzc2lzQm9keSwgd2hlZWxzLCB3aGVlbEluZm9zLCBpbmRleEZvcndhcmRBeGlzLCBpbmRleFJpZ2h0QXhpcywgaW5kZXhVcEF4aXNdID0gZGF0YS5wcm9wczsKICAgIGNvbnN0IHZlaGljbGUgPSBuZXcgUmF5Y2FzdFZlaGljbGUoewogICAgICBjaGFzc2lzQm9keTogc3RhdGUuYm9kaWVzW2NoYXNzaXNCb2R5XSwKICAgICAgaW5kZXhGb3J3YXJkQXhpcywKICAgICAgaW5kZXhSaWdodEF4aXMsCiAgICAgIGluZGV4VXBBeGlzCiAgICB9KTsKICAgIHZlaGljbGUud29ybGQgPSBzdGF0ZS53b3JsZDsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2hlZWxJbmZvcy5sZW5ndGg7IGkrKykgewogICAgICBjb25zdCB7CiAgICAgICAgYXhsZUxvY2FsLAogICAgICAgIGNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCwKICAgICAgICBkaXJlY3Rpb25Mb2NhbCwKICAgICAgICAuLi5yZXN0CiAgICAgIH0gPSB3aGVlbEluZm9zW2ldOwogICAgICB2ZWhpY2xlLmFkZFdoZWVsKHsKICAgICAgICBheGxlTG9jYWw6IHRyaXBsZXRUb1ZlYzMoYXhsZUxvY2FsKSwKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWw6IHRyaXBsZXRUb1ZlYzMoY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsKSwKICAgICAgICBkaXJlY3Rpb25Mb2NhbDogdHJpcGxldFRvVmVjMyhkaXJlY3Rpb25Mb2NhbCksCiAgICAgICAgLi4ucmVzdAogICAgICB9KTsKICAgIH0KICAgIGNvbnN0IHByZVN0ZXAgPSAoKSA9PiB7CiAgICAgIHZlaGljbGUudXBkYXRlVmVoaWNsZShzdGF0ZS53b3JsZC5kdCk7CiAgICB9OwogICAgY29uc3QgcG9zdFN0ZXAgPSAoKSA9PiB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVoaWNsZS53aGVlbEluZm9zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmVoaWNsZS51cGRhdGVXaGVlbFRyYW5zZm9ybShpKTsKICAgICAgICBjb25zdCB0ID0gdmVoaWNsZS53aGVlbEluZm9zW2ldLndvcmxkVHJhbnNmb3JtOwogICAgICAgIGNvbnN0IHdoZWVsQm9keSA9IHN0YXRlLmJvZGllc1t3aGVlbHNbaV1dOwogICAgICAgIHdoZWVsQm9keS5wb3NpdGlvbi5jb3B5KHQucG9zaXRpb24pOwogICAgICAgIHdoZWVsQm9keS5xdWF0ZXJuaW9uLmNvcHkodC5xdWF0ZXJuaW9uKTsKICAgICAgfQogICAgfTsKICAgIHN0YXRlLnZlaGljbGVzW2RhdGEudXVpZF0gPSB7CiAgICAgIHBvc3RTdGVwLAogICAgICBwcmVTdGVwLAogICAgICB2ZWhpY2xlCiAgICB9OwogICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHByZVN0ZXApOwogICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBwb3N0U3RlcCk7CiAgfTsKCiAgY29uc3QgYWRkU3ByaW5nID0gKHN0YXRlLCBfcmVmKSA9PiB7CiAgICBsZXQgewogICAgICBwcm9wczogW2JvZHlBLCBib2R5QiwgewogICAgICAgIGRhbXBpbmcsCiAgICAgICAgbG9jYWxBbmNob3JBLAogICAgICAgIGxvY2FsQW5jaG9yQiwKICAgICAgICByZXN0TGVuZ3RoLAogICAgICAgIHN0aWZmbmVzcywKICAgICAgICB3b3JsZEFuY2hvckEsCiAgICAgICAgd29ybGRBbmNob3JCCiAgICAgIH1dLAogICAgICB1dWlkCiAgICB9ID0gX3JlZjsKICAgIGNvbnN0IHNwcmluZyA9IG5ldyBTcHJpbmcoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgewogICAgICBkYW1waW5nLAogICAgICBsb2NhbEFuY2hvckE6IHRyaXBsZXRUb1ZlYzMobG9jYWxBbmNob3JBKSwKICAgICAgbG9jYWxBbmNob3JCOiB0cmlwbGV0VG9WZWMzKGxvY2FsQW5jaG9yQiksCiAgICAgIHJlc3RMZW5ndGgsCiAgICAgIHN0aWZmbmVzcywKICAgICAgd29ybGRBbmNob3JBOiB0cmlwbGV0VG9WZWMzKHdvcmxkQW5jaG9yQSksCiAgICAgIHdvcmxkQW5jaG9yQjogdHJpcGxldFRvVmVjMyh3b3JsZEFuY2hvckIpCiAgICB9KTsKICAgIHNwcmluZy51dWlkID0gdXVpZDsKICAgIGNvbnN0IHBvc3RTdGVwU3ByaW5nID0gKCkgPT4gc3ByaW5nLmFwcGx5Rm9yY2UoKTsKICAgIHN0YXRlLnNwcmluZ3NbdXVpZF0gPSBwb3N0U3RlcFNwcmluZzsKICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1t1dWlkXSA9IHNwcmluZzsKCiAgICAvLyBDb21wdXRlIHRoZSBmb3JjZSBhZnRlciBlYWNoIHN0ZXAKICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUuc3ByaW5nc1t1dWlkXSk7CiAgfTsKCiAgZnVuY3Rpb24gZW1pdEJlZ2luQ29udGFjdChfcmVmKSB7CiAgICBsZXQgewogICAgICBib2R5QSwKICAgICAgYm9keUIKICAgIH0gPSBfcmVmOwogICAgaWYgKCEoYm9keUEgIT0gbnVsbCAmJiBib2R5QS51dWlkKSB8fCAhKGJvZHlCICE9IG51bGwgJiYgYm9keUIudXVpZCkpIHJldHVybjsKICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICBib2R5QTogYm9keUEudXVpZCwKICAgICAgYm9keUI6IGJvZHlCLnV1aWQsCiAgICAgIG9wOiAnZXZlbnQnLAogICAgICB0eXBlOiAnY29sbGlkZUJlZ2luJwogICAgfSk7CiAgfQogIGZ1bmN0aW9uIGVtaXRFbmRDb250YWN0KF9yZWYyKSB7CiAgICBsZXQgewogICAgICBib2R5QSwKICAgICAgYm9keUIKICAgIH0gPSBfcmVmMjsKICAgIGlmICghKGJvZHlBICE9IG51bGwgJiYgYm9keUEudXVpZCkgfHwgIShib2R5QiAhPSBudWxsICYmIGJvZHlCLnV1aWQpKSByZXR1cm47CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgYm9keUE6IGJvZHlBLnV1aWQsCiAgICAgIGJvZHlCOiBib2R5Qi51dWlkLAogICAgICBvcDogJ2V2ZW50JywKICAgICAgdHlwZTogJ2NvbGxpZGVFbmQnCiAgICB9KTsKICB9CiAgY29uc3QgaW5pdCA9ICh3b3JsZCwgX3JlZjMpID0+IHsKICAgIGxldCB7CiAgICAgIGFsbG93U2xlZXAsCiAgICAgIGF4aXNJbmRleCA9IDAsCiAgICAgIGJyb2FkcGhhc2UsCiAgICAgIGRlZmF1bHRDb250YWN0TWF0ZXJpYWwsCiAgICAgIGZyaWN0aW9uR3Jhdml0eSwKICAgICAgZ3Jhdml0eSwKICAgICAgaXRlcmF0aW9ucywKICAgICAgcXVhdE5vcm1hbGl6ZUZhc3QsCiAgICAgIHF1YXROb3JtYWxpemVTa2lwLAogICAgICBzb2x2ZXIsCiAgICAgIHRvbGVyYW5jZQogICAgfSA9IF9yZWYzOwogICAgd29ybGQuYWxsb3dTbGVlcCA9IGFsbG93U2xlZXA7CiAgICB3b3JsZC5ncmF2aXR5LnNldCguLi5ncmF2aXR5KTsKICAgIHdvcmxkLmZyaWN0aW9uR3Jhdml0eSA9IGZyaWN0aW9uR3Jhdml0eSA/IG5ldyBWZWMzKC4uLmZyaWN0aW9uR3Jhdml0eSkgOiB1bmRlZmluZWQ7CiAgICB3b3JsZC5xdWF0Tm9ybWFsaXplRmFzdCA9IHF1YXROb3JtYWxpemVGYXN0OwogICAgd29ybGQucXVhdE5vcm1hbGl6ZVNraXAgPSBxdWF0Tm9ybWFsaXplU2tpcDsKICAgIGlmIChzb2x2ZXIgPT09ICdTcGxpdCcpIHsKICAgICAgd29ybGQuc29sdmVyID0gbmV3IFNwbGl0U29sdmVyKG5ldyBHU1NvbHZlcigpKTsKICAgIH0KICAgIGlmICh3b3JsZC5zb2x2ZXIgaW5zdGFuY2VvZiBHU1NvbHZlcikgewogICAgICB3b3JsZC5zb2x2ZXIudG9sZXJhbmNlID0gdG9sZXJhbmNlOwogICAgICB3b3JsZC5zb2x2ZXIuaXRlcmF0aW9ucyA9IGl0ZXJhdGlvbnM7CiAgICB9CiAgICB3b3JsZC5icm9hZHBoYXNlID0gYnJvYWRwaGFzZSA9PT0gJ1NBUCcgPyBuZXcgU0FQQnJvYWRwaGFzZSh3b3JsZCkgOiBuZXcgTmFpdmVCcm9hZHBoYXNlKCk7CiAgICBpZiAod29ybGQuYnJvYWRwaGFzZSBpbnN0YW5jZW9mIFNBUEJyb2FkcGhhc2UpIHsKICAgICAgd29ybGQuYnJvYWRwaGFzZS5heGlzSW5kZXggPSBheGlzSW5kZXg7CiAgICB9CiAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdiZWdpbkNvbnRhY3QnLCBlbWl0QmVnaW5Db250YWN0KTsKICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZENvbnRhY3QnLCBlbWl0RW5kQ29udGFjdCk7CiAgICBPYmplY3QuYXNzaWduKHdvcmxkLmRlZmF1bHRDb250YWN0TWF0ZXJpYWwsIGRlZmF1bHRDb250YWN0TWF0ZXJpYWwpOwogIH07CgogIGNvbnN0IGlzUW9yViA9IHYgPT4gdiBpbnN0YW5jZW9mIFF1YXRlcm5pb24gfHwgdiBpbnN0YW5jZW9mIFZlYzM7CiAgY29uc3Qgc3RlcCA9IChzdGF0ZSwgX3JlZikgPT4gewogICAgbGV0IHsKICAgICAgcG9zaXRpb25zLAogICAgICBwcm9wczogewogICAgICAgIG1heFN1YlN0ZXBzLAogICAgICAgIHN0ZXBTaXplLAogICAgICAgIHRpbWVTaW5jZUxhc3RDYWxsZWQKICAgICAgfSwKICAgICAgcXVhdGVybmlvbnMKICAgIH0gPSBfcmVmOwogICAgc3RhdGUud29ybGQuc3RlcChzdGVwU2l6ZSwgdGltZVNpbmNlTGFzdENhbGxlZCwgbWF4U3ViU3RlcHMpOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGF0ZS53b3JsZC5ib2RpZXMubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgY29uc3QgcCA9IHN0YXRlLndvcmxkLmJvZGllc1tpXS5wb3NpdGlvbjsKICAgICAgY29uc3QgcSA9IHN0YXRlLndvcmxkLmJvZGllc1tpXS5xdWF0ZXJuaW9uOwogICAgICBwb3NpdGlvbnNbMyAqIGkgKyAwXSA9IHAueDsKICAgICAgcG9zaXRpb25zWzMgKiBpICsgMV0gPSBwLnk7CiAgICAgIHBvc2l0aW9uc1szICogaSArIDJdID0gcC56OwogICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDBdID0gcS54OwogICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDFdID0gcS55OwogICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDJdID0gcS56OwogICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDNdID0gcS53OwogICAgfQogICAgY29uc3Qgb2JzZXJ2YXRpb25zID0gW107CiAgICBmb3IgKGNvbnN0IGlkIG9mIE9iamVjdC5rZXlzKHN0YXRlLnN1YnNjcmlwdGlvbnMpKSB7CiAgICAgIGNvbnN0IFt1dWlkLCB0eXBlLCB0YXJnZXQgPSAnYm9kaWVzJ10gPSBzdGF0ZS5zdWJzY3JpcHRpb25zW2lkXTsKICAgICAgY29uc3QgewogICAgICAgIGJvZGllcywKICAgICAgICB2ZWhpY2xlcwogICAgICB9ID0gc3RhdGU7CiAgICAgIGNvbnN0IHZhbHVlID0gdGFyZ2V0ID09PSAndmVoaWNsZXMnID8KICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiBEaWZmZXJlbnRpYXRlIHRoZXNlICJ0eXBlcyIKICAgICAgdmVoaWNsZXNbdXVpZF0udmVoaWNsZVt0eXBlXSA6CiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogRGlmZmVyZW50aWF0ZSB0aGVzZSAidHlwZXMiCiAgICAgIGJvZGllc1t1dWlkXVt0eXBlXTsKICAgICAgY29uc3Qgc2VyaWFsaXphYmxlVmFsdWUgPSBpc1FvclYodmFsdWUpID8gdmFsdWUudG9BcnJheSgpIDogdmFsdWU7CiAgICAgIG9ic2VydmF0aW9ucy5wdXNoKFtOdW1iZXIoaWQpLCBzZXJpYWxpemFibGVWYWx1ZSwKICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiBEaWZmZXJlbnRpYXRlIHRoZXNlICJ0eXBlcyIKICAgICAgdHlwZV0pOwogICAgfQogICAgY29uc3QgbWVzc2FnZSA9IHsKICAgICAgYWN0aXZlOiBzdGF0ZS53b3JsZC5oYXNBY3RpdmVCb2RpZXMsCiAgICAgIG9ic2VydmF0aW9ucywKICAgICAgb3A6ICdmcmFtZScsCiAgICAgIHBvc2l0aW9ucywKICAgICAgcXVhdGVybmlvbnMKICAgIH07CiAgICBpZiAoc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcpIHsKICAgICAgbWVzc2FnZS5ib2RpZXMgPSBzdGF0ZS53b3JsZC5ib2RpZXMucmVkdWNlKChib2RpZXMsIGJvZHkpID0+IHsKICAgICAgICBpZiAoYm9keS51dWlkKSBib2RpZXMucHVzaChib2R5LnV1aWQpOwogICAgICAgIHJldHVybiBib2RpZXM7CiAgICAgIH0sIFtdKTsKICAgICAgc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcgPSBmYWxzZTsKICAgIH0KICAgIHNlbGYucG9zdE1lc3NhZ2UobWVzc2FnZSwgW3Bvc2l0aW9ucy5idWZmZXIsIHF1YXRlcm5pb25zLmJ1ZmZlcl0pOwogIH07CgogIGNvbnN0IHN0YXRlID0gewogICAgYm9kaWVzOiB7fSwKICAgIGJvZGllc05lZWRTeW5jaW5nOiBmYWxzZSwKICAgIGNvbnN0cmFpbnRzOiB7fSwKICAgIG1hdGVyaWFsczoge30sCiAgICByYXlzOiB7fSwKICAgIHNwcmluZ0luc3RhbmNlczoge30sCiAgICBzcHJpbmdzOiB7fSwKICAgIHN1YnNjcmlwdGlvbnM6IHt9LAogICAgdmVoaWNsZXM6IHt9LAogICAgd29ybGQ6IG5ldyBXb3JsZCgpCiAgfTsKCiAgLy8vIDxyZWZlcmVuY2Ugbm8tZGVmYXVsdC1saWI9InRydWUiLz4KICBjb25zdCBpc0hpbmdlQ29uc3RyYWludCA9IGMgPT4gYyBpbnN0YW5jZW9mIEhpbmdlQ29uc3RyYWludDsKICBmdW5jdGlvbiBzeW5jQm9kaWVzKCkgewogICAgc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcgPSB0cnVlOwogICAgc3RhdGUuYm9kaWVzID0gc3RhdGUud29ybGQuYm9kaWVzLnJlZHVjZSgoYm9kaWVzLCBib2R5KSA9PiBib2R5LnV1aWQgPyB7CiAgICAgIC4uLmJvZGllcywKICAgICAgW2JvZHkudXVpZF06IGJvZHkKICAgIH0gOiBib2RpZXMsIHt9KTsKICB9CiAgY29uc3QgYnJvYWRwaGFzZXMgPSB7CiAgICBOYWl2ZUJyb2FkcGhhc2UsCiAgICBTQVBCcm9hZHBoYXNlCiAgfTsKICBjb25zdCBjcmVhdGVNYXRlcmlhbCA9IGNyZWF0ZU1hdGVyaWFsRmFjdG9yeShzdGF0ZS5tYXRlcmlhbHMpOwogIHNlbGYub25tZXNzYWdlID0gX3JlZiA9PiB7CiAgICBsZXQgewogICAgICBkYXRhCiAgICB9ID0gX3JlZjsKICAgIHN3aXRjaCAoZGF0YS5vcCkgewogICAgICBjYXNlICdpbml0JzoKICAgICAgICB7CiAgICAgICAgICBpbml0KHN0YXRlLndvcmxkLCBkYXRhLnByb3BzKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAnc3RlcCc6CiAgICAgICAgewogICAgICAgICAgc3RlcChzdGF0ZSwgZGF0YSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ2FkZEJvZGllcyc6CiAgICAgICAgewogICAgICAgICAgYWRkQm9kaWVzKHN0YXRlLCBjcmVhdGVNYXRlcmlhbCwgZGF0YSk7CiAgICAgICAgICBzeW5jQm9kaWVzKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ3JlbW92ZUJvZGllcyc6CiAgICAgICAgewogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLnV1aWQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlQm9keShzdGF0ZS5ib2RpZXNbZGF0YS51dWlkW2ldXSk7CiAgICAgICAgICAgIGNvbnN0IGtleSA9IE9iamVjdC5rZXlzKHN0YXRlLnN1YnNjcmlwdGlvbnMpLmZpbmQoayA9PiBzdGF0ZS5zdWJzY3JpcHRpb25zW2tdWzBdID09PSBkYXRhLnV1aWRbaV0pOwogICAgICAgICAgICBpZiAoa2V5KSB7CiAgICAgICAgICAgICAgZGVsZXRlIHN0YXRlLnN1YnNjcmlwdGlvbnNba2V5XTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc3luY0JvZGllcygpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdzdWJzY3JpYmUnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IHsKICAgICAgICAgICAgaWQsCiAgICAgICAgICAgIHRhcmdldCwKICAgICAgICAgICAgdHlwZQogICAgICAgICAgfSA9IGRhdGEucHJvcHM7CiAgICAgICAgICBzdGF0ZS5zdWJzY3JpcHRpb25zW2lkXSA9IFtkYXRhLnV1aWQsIHR5cGUsIHRhcmdldF07CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ3Vuc3Vic2NyaWJlJzoKICAgICAgICB7CiAgICAgICAgICBkZWxldGUgc3RhdGUuc3Vic2NyaXB0aW9uc1tkYXRhLnByb3BzXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAnc2V0UG9zaXRpb24nOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnBvc2l0aW9uLnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0UXVhdGVybmlvbic6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ucXVhdGVybmlvbi5zZXQoZGF0YS5wcm9wc1swXSwgZGF0YS5wcm9wc1sxXSwgZGF0YS5wcm9wc1syXSwgZGF0YS5wcm9wc1szXSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldFJvdGF0aW9uJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5xdWF0ZXJuaW9uLnNldEZyb21FdWxlcihkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0VmVsb2NpdHknOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnZlbG9jaXR5LnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0QW5ndWxhclZlbG9jaXR5JzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hbmd1bGFyVmVsb2NpdHkuc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRMaW5lYXJGYWN0b3InOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmxpbmVhckZhY3Rvci5zZXQoZGF0YS5wcm9wc1swXSwgZGF0YS5wcm9wc1sxXSwgZGF0YS5wcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJGYWN0b3InOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFuZ3VsYXJGYWN0b3Iuc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRNYXNzJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5tYXNzID0gZGF0YS5wcm9wczsKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS51cGRhdGVNYXNzUHJvcGVydGllcygpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRNYXRlcmlhbCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ubWF0ZXJpYWwgPSBkYXRhLnByb3BzID8gY3JlYXRlTWF0ZXJpYWwoZGF0YS5wcm9wcykgOiBudWxsOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRMaW5lYXJEYW1waW5nJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5saW5lYXJEYW1waW5nID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0QW5ndWxhckRhbXBpbmcnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFuZ3VsYXJEYW1waW5nID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0QWxsb3dTbGVlcCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uYWxsb3dTbGVlcCA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldFNsZWVwU3BlZWRMaW1pdCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uc2xlZXBTcGVlZExpbWl0ID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0U2xlZXBUaW1lTGltaXQnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnNsZWVwVGltZUxpbWl0ID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0Q29sbGlzaW9uRmlsdGVyR3JvdXAnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0Q29sbGlzaW9uRmlsdGVyTWFzayc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uY29sbGlzaW9uRmlsdGVyTWFzayA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldENvbGxpc2lvblJlc3BvbnNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5jb2xsaXNpb25SZXNwb25zZSA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldEZpeGVkUm90YXRpb24nOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmZpeGVkUm90YXRpb24gPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRGcmljdGlvbkdyYXZpdHknOgogICAgICAgIHN0YXRlLndvcmxkLmZyaWN0aW9uR3Jhdml0eSA9IGRhdGEucHJvcHMgPyBuZXcgVmVjMyguLi5kYXRhLnByb3BzKSA6IHVuZGVmaW5lZDsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0SXNUcmlnZ2VyJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5pc1RyaWdnZXIgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRHcmF2aXR5JzoKICAgICAgICBzdGF0ZS53b3JsZC5ncmF2aXR5LnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0VG9sZXJhbmNlJzoKICAgICAgICBpZiAoc3RhdGUud29ybGQuc29sdmVyIGluc3RhbmNlb2YgR1NTb2x2ZXIpIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnNvbHZlci50b2xlcmFuY2UgPSBkYXRhLnByb3BzOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0SXRlcmF0aW9ucyc6CiAgICAgICAgaWYgKHN0YXRlLndvcmxkLnNvbHZlciBpbnN0YW5jZW9mIEdTU29sdmVyKSB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5zb2x2ZXIuaXRlcmF0aW9ucyA9IGRhdGEucHJvcHM7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRCcm9hZHBoYXNlJzoKICAgICAgICBzdGF0ZS53b3JsZC5icm9hZHBoYXNlID0gbmV3IChicm9hZHBoYXNlc1tgJHtkYXRhLnByb3BzfUJyb2FkcGhhc2VgXSB8fCBOYWl2ZUJyb2FkcGhhc2UpKHN0YXRlLndvcmxkKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0QXhpc0luZGV4JzoKICAgICAgICBpZiAoc3RhdGUud29ybGQuYnJvYWRwaGFzZSBpbnN0YW5jZW9mIFNBUEJyb2FkcGhhc2UpIHsKICAgICAgICAgIHN0YXRlLndvcmxkLmJyb2FkcGhhc2UuYXhpc0luZGV4ID0gZGF0YS5wcm9wcyA9PT0gdW5kZWZpbmVkIHx8IGRhdGEucHJvcHMgPT09IG51bGwgPyAwIDogZGF0YS5wcm9wczsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2FwcGx5Rm9yY2UnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFwcGx5Rm9yY2UobmV3IFZlYzMoLi4uZGF0YS5wcm9wc1swXSksIG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMV0pKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnYXBwbHlJbXB1bHNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUltcHVsc2UobmV3IFZlYzMoLi4uZGF0YS5wcm9wc1swXSksIG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMV0pKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnYXBwbHlMb2NhbEZvcmNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUxvY2FsRm9yY2UobmV3IFZlYzMoLi4uZGF0YS5wcm9wc1swXSksIG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMV0pKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnYXBwbHlMb2NhbEltcHVsc2UnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFwcGx5TG9jYWxJbXB1bHNlKG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5kYXRhLnByb3BzWzFdKSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2FwcGx5VG9ycXVlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseVRvcnF1ZShuZXcgVmVjMyguLi5kYXRhLnByb3BzWzBdKSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2FkZENvbnN0cmFpbnQnOgogICAgICAgIHsKICAgICAgICAgIGFkZENvbnN0cmFpbnQoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdyZW1vdmVDb25zdHJhaW50JzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoX3JlZjIgPT4gewogICAgICAgICAgbGV0IHsKICAgICAgICAgICAgdXVpZAogICAgICAgICAgfSA9IF9yZWYyOwogICAgICAgICAgcmV0dXJuIHV1aWQgPT09IGRhdGEudXVpZDsKICAgICAgICB9KS5tYXAoYyA9PiBzdGF0ZS53b3JsZC5yZW1vdmVDb25zdHJhaW50KGMpKTsKICAgICAgICBpZiAoc3RhdGUuY29uc3RyYWludHNbZGF0YS51dWlkXSkgewogICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5jb25zdHJhaW50c1tkYXRhLnV1aWRdKTsKICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5jb25zdHJhaW50c1tkYXRhLnV1aWRdOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSAnZW5hYmxlQ29uc3RyYWludCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKGMgPT4gYy51dWlkID09PSBkYXRhLnV1aWQpLm1hcChjID0+IGMuZW5hYmxlKCkpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdkaXNhYmxlQ29uc3RyYWludCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKGMgPT4gYy51dWlkID09PSBkYXRhLnV1aWQpLm1hcChjID0+IGMuZGlzYWJsZSgpKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnZW5hYmxlQ29uc3RyYWludE1vdG9yJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkuZmlsdGVyKGlzSGluZ2VDb25zdHJhaW50KS5tYXAoYyA9PiBjLmVuYWJsZU1vdG9yKCkpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdkaXNhYmxlQ29uc3RyYWludE1vdG9yJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkuZmlsdGVyKGlzSGluZ2VDb25zdHJhaW50KS5tYXAoYyA9PiBjLmRpc2FibGVNb3RvcigpKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0Q29uc3RyYWludE1vdG9yU3BlZWQnOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcihjID0+IGMudXVpZCA9PT0gZGF0YS51dWlkKS5maWx0ZXIoaXNIaW5nZUNvbnN0cmFpbnQpLm1hcChjID0+IGMuc2V0TW90b3JTcGVlZChkYXRhLnByb3BzKSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldENvbnN0cmFpbnRNb3Rvck1heEZvcmNlJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkuZmlsdGVyKGlzSGluZ2VDb25zdHJhaW50KS5tYXAoYyA9PiBjLnNldE1vdG9yTWF4Rm9yY2UoZGF0YS5wcm9wcykpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdhZGRTcHJpbmcnOgogICAgICAgIHsKICAgICAgICAgIGFkZFNwcmluZyhzdGF0ZSwgZGF0YSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ3NldFNwcmluZ1N0aWZmbmVzcyc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuc3ByaW5nSW5zdGFuY2VzW2RhdGEudXVpZF0uc3RpZmZuZXNzID0gZGF0YS5wcm9wczsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAnc2V0U3ByaW5nUmVzdExlbmd0aCc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuc3ByaW5nSW5zdGFuY2VzW2RhdGEudXVpZF0ucmVzdExlbmd0aCA9IGRhdGEucHJvcHM7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ3NldFNwcmluZ0RhbXBpbmcnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1tkYXRhLnV1aWRdLmRhbXBpbmcgPSBkYXRhLnByb3BzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdyZW1vdmVTcHJpbmcnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUuc3ByaW5nc1tkYXRhLnV1aWRdKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAnYWRkUmF5JzoKICAgICAgICB7CiAgICAgICAgICBhZGRSYXkoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdyZW1vdmVSYXknOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS5yYXlzW2RhdGEudXVpZF0pOwogICAgICAgICAgZGVsZXRlIHN0YXRlLnJheXNbZGF0YS51dWlkXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAnYWRkUmF5Y2FzdFZlaGljbGUnOgogICAgICAgIHsKICAgICAgICAgIGFkZFJheWNhc3RWZWhpY2xlKHN0YXRlLCBkYXRhKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAncmVtb3ZlUmF5Y2FzdFZlaGljbGUnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnByZVN0ZXApOwogICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnBvc3RTdGVwKTsKICAgICAgICAgIHN0YXRlLnZlaGljbGVzW2RhdGEudXVpZF0udmVoaWNsZS53b3JsZCA9IG51bGw7CiAgICAgICAgICBkZWxldGUgc3RhdGUudmVoaWNsZXNbZGF0YS51dWlkXTsKICAgICAgICAgIGNvbnN0IGtleSA9IE9iamVjdC5rZXlzKHN0YXRlLnN1YnNjcmlwdGlvbnMpLmZpbmQoayA9PiBzdGF0ZS5zdWJzY3JpcHRpb25zW2tdWzBdID09PSBkYXRhLnV1aWQpOwogICAgICAgICAgaWYgKGtleSkgewogICAgICAgICAgICBkZWxldGUgc3RhdGUuc3Vic2NyaXB0aW9uc1trZXldOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdzZXRSYXljYXN0VmVoaWNsZVN0ZWVyaW5nVmFsdWUnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IFt2YWx1ZSwgd2hlZWxJbmRleF0gPSBkYXRhLnByb3BzOwogICAgICAgICAgc3RhdGUudmVoaWNsZXNbZGF0YS51dWlkXS52ZWhpY2xlLnNldFN0ZWVyaW5nVmFsdWUodmFsdWUsIHdoZWVsSW5kZXgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdhcHBseVJheWNhc3RWZWhpY2xlRW5naW5lRm9yY2UnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IFt2YWx1ZSwgd2hlZWxJbmRleF0gPSBkYXRhLnByb3BzOwogICAgICAgICAgc3RhdGUudmVoaWNsZXNbZGF0YS51dWlkXS52ZWhpY2xlLmFwcGx5RW5naW5lRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdzZXRSYXljYXN0VmVoaWNsZUJyYWtlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCBbYnJha2UsIHdoZWVsSW5kZXhdID0gZGF0YS5wcm9wczsKICAgICAgICAgIHN0YXRlLnZlaGljbGVzW2RhdGEudXVpZF0udmVoaWNsZS5zZXRCcmFrZShicmFrZSwgd2hlZWxJbmRleCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ2FkZENvbnRhY3RNYXRlcmlhbCc6CiAgICAgICAgewogICAgICAgICAgYWRkQ29udGFjdE1hdGVyaWFsKHN0YXRlLndvcmxkLCBjcmVhdGVNYXRlcmlhbCwgZGF0YS5wcm9wcywgZGF0YS51dWlkKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAncmVtb3ZlQ29udGFjdE1hdGVyaWFsJzoKICAgICAgICB7CiAgICAgICAgICByZW1vdmVDb250YWN0TWF0ZXJpYWwoc3RhdGUud29ybGQsIGRhdGEudXVpZCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ3dha2VVcCc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ud2FrZVVwKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ3NsZWVwJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5zbGVlcCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgfQogIH07Cgp9KSgpOwoK", null, !1), Xb = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; cr(this, n); var r = e.allowSleep, a = void 0 !== r && r, o = e.axisIndex, s = void 0 === o ? 0 : o, g = e.broadphase, c = void 0 === g ? "Naive" : g, u = e.defaultContactMaterial, C = void 0 === u ? { contactEquationStiffness: 1e6 } : u, d = e.frictionGravity, I = void 0 === d ? null : d, h = e.gravity, A = void 0 === h ? [0, -9.81, 0] : h, p = e.iterations, f = void 0 === p ? 5 : p, m = e.quatNormalizeFast, v = void 0 !== m && m, b = e.quatNormalizeSkip, G = void 0 === b ? 0 : b, B = e.size, Z = void 0 === B ? 1e3 : B, w = e.solver, S = void 0 === w ? "GS" : w, R = e.tolerance, x = void 0 === R ? .001 : R; return i = t.call(this), (0, l.Z)(y(i), "messageQueue", []), (0, l.Z)(y(i), "worker", null), i.config = { allowSleep: a, axisIndex: s, broadphase: c, defaultContactMaterial: C, frictionGravity: I, gravity: A, iterations: f, quatNormalizeFast: v, quatNormalizeSkip: G, size: Z, solver: S, tolerance: x }, i.buffers = { positions: new Float32Array(3 * Z), quaternions: new Float32Array(4 * Z) }, i } return dr(n, [{ key: "axisIndex", get: function () { return this.config.axisIndex }, set: function (e) { this.config.axisIndex = e, this.postMessage({ op: "setAxisIndex", props: e }) } }, { key: "broadphase", get: function () { return this.config.broadphase }, set: function (e) { this.config.broadphase = e, this.postMessage({ op: "setBroadphase", props: e }) } }, { key: "frictionGravity", get: function () { return this.config.frictionGravity }, set: function (e) { this.config.frictionGravity = e, this.postMessage({ op: "setFrictionGravity", props: e }) } }, { key: "gravity", get: function () { return this.config.gravity }, set: function (e) { this.config.gravity = e, this.postMessage({ op: "setGravity", props: e }) } }, { key: "iterations", get: function () { return this.config.iterations }, set: function (e) { this.config.iterations = e, this.postMessage({ op: "setIterations", props: e }) } }, { key: "tolerance", get: function () { return this.config.tolerance }, set: function (e) { this.config.tolerance = e, this.postMessage({ op: "setTolerance", props: e }) } }, { key: "addBodies", value: function (e) { var t = e.props, n = e.type, i = e.uuid; this.postMessage({ op: "addBodies", props: t, type: n, uuid: i }) } }, { key: "addConstraint", value: function (e) { var t = (0, r.Z)(e.props, 3), n = t[0], i = t[1], a = t[2], o = e.type, s = e.uuid; this.postMessage({ op: "addConstraint", props: [n, i, a], type: o, uuid: s }) } }, { key: "addContactMaterial", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "addContactMaterial", props: t, uuid: n }) } }, { key: "addRay", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "addRay", props: t, uuid: n }) } }, { key: "addRaycastVehicle", value: function (e) { var t = (0, r.Z)(e.props, 6), n = t[0], i = t[1], a = t[2], o = t[3], s = t[4], l = t[5], g = e.uuid; this.postMessage({ op: "addRaycastVehicle", props: [n, i, a, o, s, l], uuid: g }) } }, { key: "addSpring", value: function (e) { var t = (0, r.Z)(e.props, 3), n = t[0], i = t[1], a = t[2], o = e.uuid; this.postMessage({ op: "addSpring", props: [n, i, a], uuid: o }) } }, { key: "applyForce", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "applyForce", props: t, uuid: n }) } }, { key: "applyImpulse", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "applyImpulse", props: t, uuid: n }) } }, { key: "applyLocalForce", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "applyLocalForce", props: t, uuid: n }) } }, { key: "applyLocalImpulse", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "applyLocalImpulse", props: t, uuid: n }) } }, { key: "applyRaycastVehicleEngineForce", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "applyRaycastVehicleEngineForce", props: t, uuid: n }) } }, { key: "applyTorque", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "applyTorque", props: t, uuid: n }) } }, { key: "connect", value: function () { var e = this; this.worker = new Nb, this.worker.onmessage = function (t) { if ("frame" === t.data.op) return e.buffers.positions = t.data.positions, e.buffers.quaternions = t.data.quaternions, void e.emit(t.data.op, t.data); e.emit(t.data.type, t.data) }; var t, n = gr(this.messageQueue); try { for (n.s(); !(t = n.n()).done;) { var i = t.value; this.worker.postMessage(i) } } catch (r) { n.e(r) } finally { n.f() } this.messageQueue.length = 0 } }, { key: "disableConstraint", value: function (e) { var t = e.uuid; this.postMessage({ op: "disableConstraint", uuid: t }) } }, { key: "disableConstraintMotor", value: function (e) { var t = e.uuid; this.postMessage({ op: "disableConstraintMotor", uuid: t }) } }, { key: "disconnect", value: function () { this.worker && (this.worker.onmessage = null) } }, { key: "enableConstraint", value: function (e) { var t = e.uuid; this.postMessage({ op: "enableConstraint", uuid: t }) } }, { key: "enableConstraintMotor", value: function (e) { var t = e.uuid; this.postMessage({ op: "enableConstraintMotor", uuid: t }) } }, { key: "init", value: function () { var e = this.config, t = e.allowSleep, n = e.axisIndex, i = e.broadphase, r = e.defaultContactMaterial, a = e.frictionGravity, o = e.gravity, s = e.iterations, l = e.quatNormalizeFast, g = e.quatNormalizeSkip, c = e.solver, u = e.tolerance; this.postMessage({ op: "init", props: { allowSleep: t, axisIndex: n, broadphase: i, defaultContactMaterial: r, frictionGravity: a, gravity: o, iterations: s, quatNormalizeFast: l, quatNormalizeSkip: g, solver: c, tolerance: u } }) } }, { key: "removeBodies", value: function (e) { var t = e.uuid; this.postMessage({ op: "removeBodies", uuid: t }) } }, { key: "removeConstraint", value: function (e) { var t = e.uuid; this.postMessage({ op: "removeConstraint", uuid: t }) } }, { key: "removeContactMaterial", value: function (e) { var t = e.uuid; this.postMessage({ op: "removeContactMaterial", uuid: t }) } }, { key: "removeRay", value: function (e) { var t = e.uuid; this.postMessage({ op: "removeRay", uuid: t }) } }, { key: "removeRaycastVehicle", value: function (e) { var t = e.uuid; this.postMessage({ op: "removeRaycastVehicle", uuid: t }) } }, { key: "removeSpring", value: function (e) { var t = e.uuid; this.postMessage({ op: "removeSpring", uuid: t }) } }, { key: "setAllowSleep", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setAllowSleep", props: t, uuid: n }) } }, { key: "setAngularDamping", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setAngularDamping", props: t, uuid: n }) } }, { key: "setAngularFactor", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setAngularFactor", props: t, uuid: n }) } }, { key: "setAngularVelocity", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setAngularVelocity", props: t, uuid: n }) } }, { key: "setCollisionFilterGroup", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setCollisionFilterGroup", props: t, uuid: n }) } }, { key: "setCollisionFilterMask", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setCollisionFilterMask", props: t, uuid: n }) } }, { key: "setCollisionResponse", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setCollisionResponse", props: t, uuid: n }) } }, { key: "setConstraintMotorMaxForce", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setConstraintMotorMaxForce", props: t, uuid: n }) } }, { key: "setConstraintMotorSpeed", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setConstraintMotorSpeed", props: t, uuid: n }) } }, { key: "setFixedRotation", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setFixedRotation", props: t, uuid: n }) } }, { key: "setIsTrigger", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setIsTrigger", props: t, uuid: n }) } }, { key: "setLinearDamping", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setLinearDamping", props: t, uuid: n }) } }, { key: "setLinearFactor", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setLinearFactor", props: t, uuid: n }) } }, { key: "setMass", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setMass", props: t, uuid: n }) } }, { key: "setMaterial", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setMaterial", props: t, uuid: n }) } }, { key: "setPosition", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setPosition", props: t, uuid: n }) } }, { key: "setQuaternion", value: function (e) { var t = (0, r.Z)(e.props, 4), n = t[0], i = t[1], a = t[2], o = t[3], s = e.uuid; this.postMessage({ op: "setQuaternion", props: [n, i, a, o], uuid: s }) } }, { key: "setRaycastVehicleBrake", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setRaycastVehicleBrake", props: t, uuid: n }) } }, { key: "setRaycastVehicleSteeringValue", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setRaycastVehicleSteeringValue", props: t, uuid: n }) } }, { key: "setRotation", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setRotation", props: t, uuid: n }) } }, { key: "setSleepSpeedLimit", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setSleepSpeedLimit", props: t, uuid: n }) } }, { key: "setSleepTimeLimit", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setSleepTimeLimit", props: t, uuid: n }) } }, { key: "setSpringDamping", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setSpringDamping", props: t, uuid: n }) } }, { key: "setSpringRestLength", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setSpringRestLength", props: t, uuid: n }) } }, { key: "setSpringStiffness", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setSpringStiffness", props: t, uuid: n }) } }, { key: "setUserData", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setUserData", props: t, uuid: n }) } }, { key: "setVelocity", value: function (e) { var t = e.props, n = e.uuid; this.postMessage({ op: "setVelocity", props: t, uuid: n }) } }, { key: "sleep", value: function (e) { var t = e.uuid; this.postMessage({ op: "sleep", uuid: t }) } }, { key: "step", value: function (e) { var t, n = this.buffers, i = n.positions, r = n.quaternions; (i.byteLength || r.byteLength) && (null == (t = this.worker) || t.postMessage({ op: "step", positions: i, props: e, quaternions: r }, [i.buffer, r.buffer])) } }, { key: "subscribe", value: function (e) { var t = e.props, n = t.id, i = t.target, r = t.type, a = e.uuid; this.postMessage({ op: "subscribe", props: { id: n, target: i, type: r }, uuid: a }) } }, { key: "terminate", value: function () { var e; null == (e = this.worker) || e.terminate(), this.worker = null } }, { key: "unsubscribe", value: function (e) { var t = e.props; this.postMessage({ op: "unsubscribe", props: t }) } }, { key: "wakeUp", value: function (e) { var t = e.uuid; this.postMessage({ op: "wakeUp", uuid: t }) } }, { key: "postMessage", value: function (e) { if (this.worker) return this.worker.postMessage(e); this.messageQueue.push(e) } }]), n }(Mb), Yb = function () { function e(t) { cr(this, e), void 0 === t && (t = [0, 0, 0, 0, 0, 0, 0, 0, 0]), this.elements = t } return dr(e, [{ key: "identity", value: function () { var e = this.elements; e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 1, e[5] = 0, e[6] = 0, e[7] = 0, e[8] = 1 } }, { key: "setZero", value: function () { var e = this.elements; e[0] = 0, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 0, e[5] = 0, e[6] = 0, e[7] = 0, e[8] = 0 } }, { key: "setTrace", value: function (e) { var t = this.elements; t[0] = e.x, t[4] = e.y, t[8] = e.z } }, { key: "getTrace", value: function (e) { void 0 === e && (e = new Lb); var t = this.elements; return e.x = t[0], e.y = t[4], e.z = t[8], e } }, { key: "vmult", value: function (e, t) { void 0 === t && (t = new Lb); var n = this.elements, i = e.x, r = e.y, a = e.z; return t.x = n[0] * i + n[1] * r + n[2] * a, t.y = n[3] * i + n[4] * r + n[5] * a, t.z = n[6] * i + n[7] * r + n[8] * a, t } }, { key: "smult", value: function (e) { for (var t = 0; t < this.elements.length; t++)this.elements[t] *= e } }, { key: "mmult", value: function (t, n) { void 0 === n && (n = new e); var i = this.elements, r = t.elements, a = n.elements, o = i[0], s = i[1], l = i[2], g = i[3], c = i[4], u = i[5], C = i[6], d = i[7], I = i[8], h = r[0], A = r[1], p = r[2], f = r[3], m = r[4], v = r[5], b = r[6], y = r[7], G = r[8]; return a[0] = o * h + s * f + l * b, a[1] = o * A + s * m + l * y, a[2] = o * p + s * v + l * G, a[3] = g * h + c * f + u * b, a[4] = g * A + c * m + u * y, a[5] = g * p + c * v + u * G, a[6] = C * h + d * f + I * b, a[7] = C * A + d * m + I * y, a[8] = C * p + d * v + I * G, n } }, { key: "scale", value: function (t, n) { void 0 === n && (n = new e); for (var i = this.elements, r = n.elements, a = 0; 3 !== a; a++)r[3 * a + 0] = t.x * i[3 * a + 0], r[3 * a + 1] = t.y * i[3 * a + 1], r[3 * a + 2] = t.z * i[3 * a + 2]; return n } }, { key: "solve", value: function (e, t) { void 0 === t && (t = new Lb); var n, i, r = []; for (n = 0; n < 12; n++)r.push(0); for (n = 0; n < 3; n++)for (i = 0; i < 3; i++)r[n + 4 * i] = this.elements[n + 3 * i]; r[3] = e.x, r[7] = e.y, r[11] = e.z; var a, o, s = 3, l = s; do { if (0 === r[(n = l - s) + 4 * n]) for (i = n + 1; i < l; i++)if (0 !== r[n + 4 * i]) { a = 4; do { r[(o = 4 - a) + 4 * n] += r[o + 4 * i] } while (--a); break } if (0 !== r[n + 4 * n]) for (i = n + 1; i < l; i++) { var g = r[n + 4 * i] / r[n + 4 * n]; a = 4; do { r[(o = 4 - a) + 4 * i] = o <= n ? 0 : r[o + 4 * i] - r[o + 4 * n] * g } while (--a) } } while (--s); if (t.z = r[11] / r[10], t.y = (r[7] - r[6] * t.z) / r[5], t.x = (r[3] - r[2] * t.z - r[1] * t.y) / r[0], isNaN(t.x) || isNaN(t.y) || isNaN(t.z) || t.x === 1 / 0 || t.y === 1 / 0 || t.z === 1 / 0) throw "Could not solve equation! Got x=[".concat(t.toString(), "], b=[").concat(e.toString(), "], A=[").concat(this.toString(), "]"); return t } }, { key: "e", value: function (e, t, n) { if (void 0 === n) return this.elements[t + 3 * e]; this.elements[t + 3 * e] = n } }, { key: "copy", value: function (e) { for (var t = 0; t < e.elements.length; t++)this.elements[t] = e.elements[t]; return this } }, { key: "toString", value: function () { for (var e = "", t = 0; t < 9; t++)e += this.elements[t] + ","; return e } }, { key: "reverse", value: function (t) { void 0 === t && (t = new e); var n, i, r = Kb; for (n = 0; n < 3; n++)for (i = 0; i < 3; i++)r[n + 6 * i] = this.elements[n + 3 * i]; r[3] = 1, r[9] = 0, r[15] = 0, r[4] = 0, r[10] = 1, r[16] = 0, r[5] = 0, r[11] = 0, r[17] = 1; var a, o, s = 3, l = s; do { if (0 === r[(n = l - s) + 6 * n]) for (i = n + 1; i < l; i++)if (0 !== r[n + 6 * i]) { a = 6; do { r[(o = 6 - a) + 6 * n] += r[o + 6 * i] } while (--a); break } if (0 !== r[n + 6 * n]) for (i = n + 1; i < l; i++) { var g = r[n + 6 * i] / r[n + 6 * n]; a = 6; do { r[(o = 6 - a) + 6 * i] = o <= n ? 0 : r[o + 6 * i] - r[o + 6 * n] * g } while (--a) } } while (--s); n = 2; do { i = n - 1; do { var c = r[n + 6 * i] / r[n + 6 * n]; a = 6; do { r[(o = 6 - a) + 6 * i] = r[o + 6 * i] - r[o + 6 * n] * c } while (--a) } while (i--) } while (--n); n = 2; do { var u = 1 / r[n + 6 * n]; a = 6; do { r[(o = 6 - a) + 6 * n] = r[o + 6 * n] * u } while (--a) } while (n--); n = 2; do { i = 2; do { if (o = r[3 + i + 6 * n], isNaN(o) || o === 1 / 0) throw "Could not reverse! A=[".concat(this.toString(), "]"); t.e(n, i, o) } while (i--) } while (n--); return t } }, { key: "setRotationFromQuaternion", value: function (e) { var t = e.x, n = e.y, i = e.z, r = e.w, a = t + t, o = n + n, s = i + i, l = t * a, g = t * o, c = t * s, u = n * o, C = n * s, d = i * s, I = r * a, h = r * o, A = r * s, p = this.elements; return p[0] = 1 - (u + d), p[1] = g - A, p[2] = c + h, p[3] = g + A, p[4] = 1 - (l + d), p[5] = C - I, p[6] = c - h, p[7] = C + I, p[8] = 1 - (l + u), this } }, { key: "transpose", value: function (t) { void 0 === t && (t = new e); var n, i = this.elements, r = t.elements; return r[0] = i[0], r[4] = i[4], r[8] = i[8], n = i[1], r[1] = i[3], r[3] = n, n = i[2], r[2] = i[6], r[6] = n, n = i[5], r[5] = i[7], r[7] = n, t } }]), e }(), Kb = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], Lb = function () { function e(t, n, i) { cr(this, e), void 0 === t && (t = 0), void 0 === n && (n = 0), void 0 === i && (i = 0), this.x = t, this.y = n, this.z = i } return dr(e, [{ key: "cross", value: function (t, n) { void 0 === n && (n = new e); var i = t.x, r = t.y, a = t.z, o = this.x, s = this.y, l = this.z; return n.x = s * a - l * r, n.y = l * i - o * a, n.z = o * r - s * i, n } }, { key: "set", value: function (e, t, n) { return this.x = e, this.y = t, this.z = n, this } }, { key: "setZero", value: function () { this.x = this.y = this.z = 0 } }, { key: "vadd", value: function (t, n) { if (!n) return new e(this.x + t.x, this.y + t.y, this.z + t.z); n.x = t.x + this.x, n.y = t.y + this.y, n.z = t.z + this.z } }, { key: "vsub", value: function (t, n) { if (!n) return new e(this.x - t.x, this.y - t.y, this.z - t.z); n.x = this.x - t.x, n.y = this.y - t.y, n.z = this.z - t.z } }, { key: "crossmat", value: function () { return new Yb([0, -this.z, this.y, this.z, 0, -this.x, -this.y, this.x, 0]) } }, { key: "normalize", value: function () { var e = this.x, t = this.y, n = this.z, i = Math.sqrt(e * e + t * t + n * n); if (i > 0) { var r = 1 / i; this.x *= r, this.y *= r, this.z *= r } else this.x = 0, this.y = 0, this.z = 0; return i } }, { key: "unit", value: function (t) { void 0 === t && (t = new e); var n = this.x, i = this.y, r = this.z, a = Math.sqrt(n * n + i * i + r * r); return a > 0 ? (a = 1 / a, t.x = n * a, t.y = i * a, t.z = r * a) : (t.x = 1, t.y = 0, t.z = 0), t } }, { key: "length", value: function () { var e = this.x, t = this.y, n = this.z; return Math.sqrt(e * e + t * t + n * n) } }, { key: "lengthSquared", value: function () { return this.dot(this) } }, { key: "distanceTo", value: function (e) { var t = this.x, n = this.y, i = this.z, r = e.x, a = e.y, o = e.z; return Math.sqrt((r - t) * (r - t) + (a - n) * (a - n) + (o - i) * (o - i)) } }, { key: "distanceSquared", value: function (e) { var t = this.x, n = this.y, i = this.z, r = e.x, a = e.y, o = e.z; return (r - t) * (r - t) + (a - n) * (a - n) + (o - i) * (o - i) } }, { key: "scale", value: function (t, n) { void 0 === n && (n = new e); var i = this.x, r = this.y, a = this.z; return n.x = t * i, n.y = t * r, n.z = t * a, n } }, { key: "vmul", value: function (t, n) { return void 0 === n && (n = new e), n.x = t.x * this.x, n.y = t.y * this.y, n.z = t.z * this.z, n } }, { key: "addScaledVector", value: function (t, n, i) { return void 0 === i && (i = new e), i.x = this.x + t * n.x, i.y = this.y + t * n.y, i.z = this.z + t * n.z, i } }, { key: "dot", value: function (e) { return this.x * e.x + this.y * e.y + this.z * e.z } }, { key: "isZero", value: function () { return 0 === this.x && 0 === this.y && 0 === this.z } }, { key: "negate", value: function (t) { return void 0 === t && (t = new e), t.x = -this.x, t.y = -this.y, t.z = -this.z, t } }, { key: "tangents", value: function (e, t) { var n = this.length(); if (n > 0) { var i = zb, r = 1 / n; i.set(this.x * r, this.y * r, this.z * r); var a = Eb; Math.abs(i.x) < .9 ? (a.set(1, 0, 0), i.cross(a, e)) : (a.set(0, 1, 0), i.cross(a, e)), i.cross(e, t) } else e.set(1, 0, 0), t.set(0, 1, 0) } }, { key: "toString", value: function () { return "".concat(this.x, ",").concat(this.y, ",").concat(this.z) } }, { key: "toArray", value: function () { return [this.x, this.y, this.z] } }, { key: "copy", value: function (e) { return this.x = e.x, this.y = e.y, this.z = e.z, this } }, { key: "lerp", value: function (e, t, n) { var i = this.x, r = this.y, a = this.z; n.x = i + (e.x - i) * t, n.y = r + (e.y - r) * t, n.z = a + (e.z - a) * t } }, { key: "almostEquals", value: function (e, t) { return void 0 === t && (t = 1e-6), !(Math.abs(this.x - e.x) > t || Math.abs(this.y - e.y) > t || Math.abs(this.z - e.z) > t) } }, { key: "almostZero", value: function (e) { return void 0 === e && (e = 1e-6), !(Math.abs(this.x) > e || Math.abs(this.y) > e || Math.abs(this.z) > e) } }, { key: "isAntiparallelTo", value: function (e, t) { return this.negate(Tb), Tb.almostEquals(e, t) } }, { key: "clone", value: function () { return new e(this.x, this.y, this.z) } }]), e }(); Lb.ZERO = new Lb(0, 0, 0), Lb.UNIT_X = new Lb(1, 0, 0), Lb.UNIT_Y = new Lb(0, 1, 0), Lb.UNIT_Z = new Lb(0, 0, 1); var zb = new Lb, Eb = new Lb, Tb = new Lb, _b = function () { function e(t) { cr(this, e), void 0 === t && (t = {}), this.lowerBound = new Lb, this.upperBound = new Lb, t.lowerBound && this.lowerBound.copy(t.lowerBound), t.upperBound && this.upperBound.copy(t.upperBound) } return dr(e, [{ key: "setFromPoints", value: function (e, t, n, i) { var r = this.lowerBound, a = this.upperBound, o = n; r.copy(e[0]), o && o.vmult(r, r), a.copy(r); for (var s = 1; s < e.length; s++) { var l = e[s]; o && (o.vmult(l, Ub), l = Ub), l.x > a.x && (a.x = l.x), l.x < r.x && (r.x = l.x), l.y > a.y && (a.y = l.y), l.y < r.y && (r.y = l.y), l.z > a.z && (a.z = l.z), l.z < r.z && (r.z = l.z) } return t && (t.vadd(r, r), t.vadd(a, a)), i && (r.x -= i, r.y -= i, r.z -= i, a.x += i, a.y += i, a.z += i), this } }, { key: "copy", value: function (e) { return this.lowerBound.copy(e.lowerBound), this.upperBound.copy(e.upperBound), this } }, { key: "clone", value: function () { return (new e).copy(this) } }, { key: "extend", value: function (e) { this.lowerBound.x = Math.min(this.lowerBound.x, e.lowerBound.x), this.upperBound.x = Math.max(this.upperBound.x, e.upperBound.x), this.lowerBound.y = Math.min(this.lowerBound.y, e.lowerBound.y), this.upperBound.y = Math.max(this.upperBound.y, e.upperBound.y), this.lowerBound.z = Math.min(this.lowerBound.z, e.lowerBound.z), this.upperBound.z = Math.max(this.upperBound.z, e.upperBound.z) } }, { key: "overlaps", value: function (e) { var t = this.lowerBound, n = this.upperBound, i = e.lowerBound, r = e.upperBound, a = i.x <= n.x && n.x <= r.x || t.x <= r.x && r.x <= n.x, o = i.y <= n.y && n.y <= r.y || t.y <= r.y && r.y <= n.y, s = i.z <= n.z && n.z <= r.z || t.z <= r.z && r.z <= n.z; return a && o && s } }, { key: "volume", value: function () { var e = this.lowerBound, t = this.upperBound; return (t.x - e.x) * (t.y - e.y) * (t.z - e.z) } }, { key: "contains", value: function (e) { var t = this.lowerBound, n = this.upperBound, i = e.lowerBound, r = e.upperBound; return t.x <= i.x && n.x >= r.x && t.y <= i.y && n.y >= r.y && t.z <= i.z && n.z >= r.z } }, { key: "getCorners", value: function (e, t, n, i, r, a, o, s) { var l = this.lowerBound, g = this.upperBound; e.copy(l), t.set(g.x, l.y, l.z), n.set(g.x, g.y, l.z), i.set(l.x, g.y, g.z), r.set(g.x, l.y, g.z), a.set(l.x, g.y, l.z), o.set(l.x, l.y, g.z), s.copy(g) } }, { key: "toLocalFrame", value: function (e, t) { var n = Db, i = n[0], r = n[1], a = n[2], o = n[3], s = n[4], l = n[5], g = n[6], c = n[7]; this.getCorners(i, r, a, o, s, l, g, c); for (var u = 0; 8 !== u; u++) { var C = n[u]; e.pointToLocal(C, C) } return t.setFromPoints(n) } }, { key: "toWorldFrame", value: function (e, t) { var n = Db, i = n[0], r = n[1], a = n[2], o = n[3], s = n[4], l = n[5], g = n[6], c = n[7]; this.getCorners(i, r, a, o, s, l, g, c); for (var u = 0; 8 !== u; u++) { var C = n[u]; e.pointToWorld(C, C) } return t.setFromPoints(n) } }, { key: "overlapsRay", value: function (e) { var t = e.direction, n = e.from, i = 1 / t.x, r = 1 / t.y, a = 1 / t.z, o = (this.lowerBound.x - n.x) * i, s = (this.upperBound.x - n.x) * i, l = (this.lowerBound.y - n.y) * r, g = (this.upperBound.y - n.y) * r, c = (this.lowerBound.z - n.z) * a, u = (this.upperBound.z - n.z) * a, C = Math.max(Math.max(Math.min(o, s), Math.min(l, g)), Math.min(c, u)), d = Math.min(Math.min(Math.max(o, s), Math.max(l, g)), Math.max(c, u)); return !(d < 0) && !(C > d) } }]), e }(), Ub = new Lb, Db = [new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb], Pb = function () { function e() { cr(this, e) } return dr(e, [{ key: "addEventListener", value: function (e, t) { void 0 === this._listeners && (this._listeners = {}); var n = this._listeners; return void 0 === n[e] && (n[e] = []), n[e].includes(t) || n[e].push(t), this } }, { key: "hasEventListener", value: function (e, t) { if (void 0 === this._listeners) return !1; var n = this._listeners; return !(void 0 === n[e] || !n[e].includes(t)) } }, { key: "hasAnyEventListener", value: function (e) { return void 0 !== this._listeners && void 0 !== this._listeners[e] } }, { key: "removeEventListener", value: function (e, t) { if (void 0 === this._listeners) return this; var n = this._listeners; if (void 0 === n[e]) return this; var i = n[e].indexOf(t); return -1 !== i && n[e].splice(i, 1), this } }, { key: "dispatchEvent", value: function (e) { if (void 0 === this._listeners) return this; var t = this._listeners[e.type]; if (void 0 !== t) { e.target = this; for (var n = 0, i = t.length; n < i; n++)t[n].call(this, e) } return this } }]), e }(), Jb = function () { function e(t, n, i, r) { cr(this, e), void 0 === t && (t = 0), void 0 === n && (n = 0), void 0 === i && (i = 0), void 0 === r && (r = 1), this.x = t, this.y = n, this.z = i, this.w = r } return dr(e, [{ key: "set", value: function (e, t, n, i) { return this.x = e, this.y = t, this.z = n, this.w = i, this } }, { key: "toString", value: function () { return "".concat(this.x, ",").concat(this.y, ",").concat(this.z, ",").concat(this.w) } }, { key: "toArray", value: function () { return [this.x, this.y, this.z, this.w] } }, { key: "setFromAxisAngle", value: function (e, t) { var n = Math.sin(.5 * t); return this.x = e.x * n, this.y = e.y * n, this.z = e.z * n, this.w = Math.cos(.5 * t), this } }, { key: "toAxisAngle", value: function (e) { void 0 === e && (e = new Lb), this.normalize(); var t = 2 * Math.acos(this.w), n = Math.sqrt(1 - this.w * this.w); return n < .001 ? (e.x = this.x, e.y = this.y, e.z = this.z) : (e.x = this.x / n, e.y = this.y / n, e.z = this.z / n), [e, t] } }, { key: "setFromVectors", value: function (e, t) { if (e.isAntiparallelTo(t)) { var n = Ob, i = jb; e.tangents(n, i), this.setFromAxisAngle(n, Math.PI) } else { var r = e.cross(t); this.x = r.x, this.y = r.y, this.z = r.z, this.w = Math.sqrt(Math.pow(e.length(), 2) * Math.pow(t.length(), 2)) + e.dot(t), this.normalize() } return this } }, { key: "mult", value: function (t, n) { void 0 === n && (n = new e); var i = this.x, r = this.y, a = this.z, o = this.w, s = t.x, l = t.y, g = t.z, c = t.w; return n.x = i * c + o * s + r * g - a * l, n.y = r * c + o * l + a * s - i * g, n.z = a * c + o * g + i * l - r * s, n.w = o * c - i * s - r * l - a * g, n } }, { key: "inverse", value: function (t) { void 0 === t && (t = new e); var n = this.x, i = this.y, r = this.z, a = this.w; this.conjugate(t); var o = 1 / (n * n + i * i + r * r + a * a); return t.x *= o, t.y *= o, t.z *= o, t.w *= o, t } }, { key: "conjugate", value: function (t) { return void 0 === t && (t = new e), t.x = -this.x, t.y = -this.y, t.z = -this.z, t.w = this.w, t } }, { key: "normalize", value: function () { var e = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w); return 0 === e ? (this.x = 0, this.y = 0, this.z = 0, this.w = 0) : (e = 1 / e, this.x *= e, this.y *= e, this.z *= e, this.w *= e), this } }, { key: "normalizeFast", value: function () { var e = (3 - (this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)) / 2; return 0 === e ? (this.x = 0, this.y = 0, this.z = 0, this.w = 0) : (this.x *= e, this.y *= e, this.z *= e, this.w *= e), this } }, { key: "vmult", value: function (e, t) { void 0 === t && (t = new Lb); var n = e.x, i = e.y, r = e.z, a = this.x, o = this.y, s = this.z, l = this.w, g = l * n + o * r - s * i, c = l * i + s * n - a * r, u = l * r + a * i - o * n, C = -a * n - o * i - s * r; return t.x = g * l + C * -a + c * -s - u * -o, t.y = c * l + C * -o + u * -a - g * -s, t.z = u * l + C * -s + g * -o - c * -a, t } }, { key: "copy", value: function (e) { return this.x = e.x, this.y = e.y, this.z = e.z, this.w = e.w, this } }, { key: "toEuler", value: function (e, t) { var n, i, r; void 0 === t && (t = "YZX"); var a = this.x, o = this.y, s = this.z, l = this.w; if ("YZX" !== t) throw new Error("Euler order ".concat(t, " not supported yet.")); var g = a * o + s * l; if (g > .499 && (n = 2 * Math.atan2(a, l), i = Math.PI / 2, r = 0), g < -.499 && (n = -2 * Math.atan2(a, l), i = -Math.PI / 2, r = 0), void 0 === n) { var c = a * a, u = o * o, C = s * s; n = Math.atan2(2 * o * l - 2 * a * s, 1 - 2 * u - 2 * C), i = Math.asin(2 * g), r = Math.atan2(2 * a * l - 2 * o * s, 1 - 2 * c - 2 * C) } e.y = n, e.z = i, e.x = r } }, { key: "setFromEuler", value: function (e, t, n, i) { void 0 === i && (i = "XYZ"); var r = Math.cos(e / 2), a = Math.cos(t / 2), o = Math.cos(n / 2), s = Math.sin(e / 2), l = Math.sin(t / 2), g = Math.sin(n / 2); return "XYZ" === i ? (this.x = s * a * o + r * l * g, this.y = r * l * o - s * a * g, this.z = r * a * g + s * l * o, this.w = r * a * o - s * l * g) : "YXZ" === i ? (this.x = s * a * o + r * l * g, this.y = r * l * o - s * a * g, this.z = r * a * g - s * l * o, this.w = r * a * o + s * l * g) : "ZXY" === i ? (this.x = s * a * o - r * l * g, this.y = r * l * o + s * a * g, this.z = r * a * g + s * l * o, this.w = r * a * o - s * l * g) : "ZYX" === i ? (this.x = s * a * o - r * l * g, this.y = r * l * o + s * a * g, this.z = r * a * g - s * l * o, this.w = r * a * o + s * l * g) : "YZX" === i ? (this.x = s * a * o + r * l * g, this.y = r * l * o + s * a * g, this.z = r * a * g - s * l * o, this.w = r * a * o - s * l * g) : "XZY" === i && (this.x = s * a * o - r * l * g, this.y = r * l * o - s * a * g, this.z = r * a * g + s * l * o, this.w = r * a * o + s * l * g), this } }, { key: "clone", value: function () { return new e(this.x, this.y, this.z, this.w) } }, { key: "slerp", value: function (t, n, i) { void 0 === i && (i = new e); var r, a, o, s, l, g = this.x, c = this.y, u = this.z, C = this.w, d = t.x, I = t.y, h = t.z, A = t.w; return (a = g * d + c * I + u * h + C * A) < 0 && (a = -a, d = -d, I = -I, h = -h, A = -A), 1 - a > 1e-6 ? (r = Math.acos(a), o = Math.sin(r), s = Math.sin((1 - n) * r) / o, l = Math.sin(n * r) / o) : (s = 1 - n, l = n), i.x = s * g + l * d, i.y = s * c + l * I, i.z = s * u + l * h, i.w = s * C + l * A, i } }, { key: "integrate", value: function (t, n, i, r) { void 0 === r && (r = new e); var a = t.x * i.x, o = t.y * i.y, s = t.z * i.z, l = this.x, g = this.y, c = this.z, u = this.w, C = .5 * n; return r.x += C * (a * u + o * c - s * g), r.y += C * (o * u + s * l - a * c), r.z += C * (s * u + a * g - o * l), r.w += C * (-a * l - o * g - s * c), r } }]), e }(), Ob = new Lb, jb = new Lb, Qb = function () { function e(t) { cr(this, e), void 0 === t && (t = {}), this.id = e.idCounter++, this.type = t.type || 0, this.boundingSphereRadius = 0, this.collisionResponse = !t.collisionResponse || t.collisionResponse, this.collisionFilterGroup = void 0 !== t.collisionFilterGroup ? t.collisionFilterGroup : 1, this.collisionFilterMask = void 0 !== t.collisionFilterMask ? t.collisionFilterMask : -1, this.material = t.material ? t.material : null, this.body = null } return dr(e, [{ key: "updateBoundingSphereRadius", value: function () { throw "computeBoundingSphereRadius() not implemented for shape type ".concat(this.type) } }, { key: "volume", value: function () { throw "volume() not implemented for shape type ".concat(this.type) } }, { key: "calculateLocalInertia", value: function (e, t) { throw "calculateLocalInertia() not implemented for shape type ".concat(this.type) } }, { key: "calculateWorldAABB", value: function (e, t, n, i) { throw "calculateWorldAABB() not implemented for shape type ".concat(this.type) } }]), e }(); Qb.idCounter = 0, Qb.types = { SPHERE: 1, PLANE: 2, BOX: 4, COMPOUND: 8, CONVEXPOLYHEDRON: 16, HEIGHTFIELD: 32, PARTICLE: 64, CYLINDER: 128, TRIMESH: 256 }; var qb = function () { function e(t) { cr(this, e), void 0 === t && (t = {}), this.position = new Lb, this.quaternion = new Jb, t.position && this.position.copy(t.position), t.quaternion && this.quaternion.copy(t.quaternion) } return dr(e, [{ key: "pointToLocal", value: function (t, n) { return e.pointToLocalFrame(this.position, this.quaternion, t, n) } }, { key: "pointToWorld", value: function (t, n) { return e.pointToWorldFrame(this.position, this.quaternion, t, n) } }, { key: "vectorToWorldFrame", value: function (e, t) { return void 0 === t && (t = new Lb), this.quaternion.vmult(e, t), t } }], [{ key: "pointToLocalFrame", value: function (e, t, n, i) { return void 0 === i && (i = new Lb), n.vsub(e, i), t.conjugate($b), $b.vmult(i, i), i } }, { key: "pointToWorldFrame", value: function (e, t, n, i) { return void 0 === i && (i = new Lb), t.vmult(n, i), i.vadd(e, i), i } }, { key: "vectorToWorldFrame", value: function (e, t, n) { return void 0 === n && (n = new Lb), e.vmult(t, n), n } }, { key: "vectorToLocalFrame", value: function (e, t, n, i) { return void 0 === i && (i = new Lb), t.w *= -1, t.vmult(n, i), t.w *= -1, i } }]), e }(), $b = new Jb, ey = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; cr(this, n), void 0 === e && (e = {}); var r = e, a = r.vertices, o = void 0 === a ? [] : a, s = r.faces, l = void 0 === s ? [] : s, g = r.normals, c = void 0 === g ? [] : g, u = r.axes, C = r.boundingSphereRadius; return (i = t.call(this, { type: Qb.types.CONVEXPOLYHEDRON })).vertices = o, i.faces = l, i.faceNormals = c, 0 === i.faceNormals.length && i.computeNormals(), C ? i.boundingSphereRadius = C : i.updateBoundingSphereRadius(), i.worldVertices = [], i.worldVerticesNeedsUpdate = !0, i.worldFaceNormals = [], i.worldFaceNormalsNeedsUpdate = !0, i.uniqueAxes = u ? u.slice() : null, i.uniqueEdges = [], i.computeEdges(), i } return dr(n, [{ key: "computeEdges", value: function () { var e = this.faces, t = this.vertices, n = this.uniqueEdges; n.length = 0; for (var i = new Lb, r = 0; r !== e.length; r++)for (var a = e[r], o = a.length, s = 0; s !== o; s++) { var l = (s + 1) % o; t[a[s]].vsub(t[a[l]], i), i.normalize(); for (var g = !1, c = 0; c !== n.length; c++)if (n[c].almostEquals(i) || n[c].almostEquals(i)) { g = !0; break } g || n.push(i.clone()) } } }, { key: "computeNormals", value: function () { this.faceNormals.length = this.faces.length; for (var e = 0; e < this.faces.length; e++) { for (var t = 0; t < this.faces[e].length; t++)if (!this.vertices[this.faces[e][t]]) throw new Error("Vertex ".concat(this.faces[e][t], " not found!")); var n = this.faceNormals[e] || new Lb; this.getFaceNormal(e, n), n.negate(n), this.faceNormals[e] = n; var i = this.vertices[this.faces[e][0]]; if (n.dot(i) < 0) { console.error(".faceNormals[".concat(e, "] = Vec3(").concat(n.toString(), ") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.")); for (var r = 0; r < this.faces[e].length; r++)console.warn(".vertices[".concat(this.faces[e][r], "] = Vec3(").concat(this.vertices[this.faces[e][r]].toString(), ")")) } } } }, { key: "getFaceNormal", value: function (e, t) { var i = this.faces[e], r = this.vertices[i[0]], a = this.vertices[i[1]], o = this.vertices[i[2]]; n.computeNormal(r, a, o, t) } }, { key: "clipAgainstHull", value: function (e, t, n, i, r, a, o, s, l) { for (var g = new Lb, c = -1, u = -Number.MAX_VALUE, C = 0; C < n.faces.length; C++) { g.copy(n.faceNormals[C]), r.vmult(g, g); var d = g.dot(a); d > u && (u = d, c = C) } for (var I = [], h = 0; h < n.faces[c].length; h++) { var A = n.vertices[n.faces[c][h]], p = new Lb; p.copy(A), r.vmult(p, p), i.vadd(p, p), I.push(p) } c >= 0 && this.clipFaceAgainstHull(a, e, t, I, o, s, l) } }, { key: "findSeparatingAxis", value: function (e, t, n, i, r, a, o, s) { var l = new Lb, g = new Lb, c = new Lb, u = new Lb, C = new Lb, d = new Lb, I = Number.MAX_VALUE, h = this; if (h.uniqueAxes) for (var A = 0; A !== h.uniqueAxes.length; A++) { n.vmult(h.uniqueAxes[A], l); var p = h.testSepAxis(l, e, t, n, i, r); if (!1 === p) return !1; p < I && (I = p, a.copy(l)) } else for (var f = o ? o.length : h.faces.length, m = 0; m < f; m++) { var v = o ? o[m] : m; l.copy(h.faceNormals[v]), n.vmult(l, l); var b = h.testSepAxis(l, e, t, n, i, r); if (!1 === b) return !1; b < I && (I = b, a.copy(l)) } if (e.uniqueAxes) for (var y = 0; y !== e.uniqueAxes.length; y++) { r.vmult(e.uniqueAxes[y], g); var G = h.testSepAxis(g, e, t, n, i, r); if (!1 === G) return !1; G < I && (I = G, a.copy(g)) } else for (var B = s ? s.length : e.faces.length, Z = 0; Z < B; Z++) { var w = s ? s[Z] : Z; g.copy(e.faceNormals[w]), r.vmult(g, g); var S = h.testSepAxis(g, e, t, n, i, r); if (!1 === S) return !1; S < I && (I = S, a.copy(g)) } for (var R = 0; R !== h.uniqueEdges.length; R++) { n.vmult(h.uniqueEdges[R], u); for (var x = 0; x !== e.uniqueEdges.length; x++)if (r.vmult(e.uniqueEdges[x], C), u.cross(C, d), !d.almostZero()) { d.normalize(); var W = h.testSepAxis(d, e, t, n, i, r); if (!1 === W) return !1; W < I && (I = W, a.copy(d)) } } return i.vsub(t, c), c.dot(a) > 0 && a.negate(a), !0 } }, { key: "testSepAxis", value: function (e, t, i, r, a, o) { n.project(this, e, i, r, ty), n.project(t, e, a, o, ny); var s = ty[0], l = ty[1], g = ny[0], c = ny[1]; if (s < c || g < l) return !1; var u = s - c, C = g - l; return u < C ? u : C } }, { key: "calculateLocalInertia", value: function (e, t) { var n = new Lb, i = new Lb; this.computeLocalAABB(i, n); var r = n.x - i.x, a = n.y - i.y, o = n.z - i.z; t.x = 1 / 12 * e * (2 * a * 2 * a + 2 * o * 2 * o), t.y = 1 / 12 * e * (2 * r * 2 * r + 2 * o * 2 * o), t.z = 1 / 12 * e * (2 * a * 2 * a + 2 * r * 2 * r) } }, { key: "getPlaneConstantOfFace", value: function (e) { var t = this.faces[e], n = this.faceNormals[e], i = this.vertices[t[0]]; return -n.dot(i) } }, { key: "clipFaceAgainstHull", value: function (e, t, n, i, r, a, o) { for (var s = new Lb, l = new Lb, g = new Lb, c = new Lb, u = new Lb, C = new Lb, d = new Lb, I = new Lb, h = this, A = i, p = [], f = -1, m = Number.MAX_VALUE, v = 0; v < h.faces.length; v++) { s.copy(h.faceNormals[v]), n.vmult(s, s); var b = s.dot(e); b < m && (m = b, f = v) } if (!(f < 0)) { var y = h.faces[f]; y.connectedFaces = []; for (var G = 0; G < h.faces.length; G++)for (var B = 0; B < h.faces[G].length; B++)-1 !== y.indexOf(h.faces[G][B]) && G !== f && -1 === y.connectedFaces.indexOf(G) && y.connectedFaces.push(G); for (var Z = y.length, w = 0; w < Z; w++) { var S = h.vertices[y[w]], R = h.vertices[y[(w + 1) % Z]]; S.vsub(R, l), g.copy(l), n.vmult(g, g), t.vadd(g, g), c.copy(this.faceNormals[f]), n.vmult(c, c), t.vadd(c, c), g.cross(c, u), u.negate(u), C.copy(S), n.vmult(C, C), t.vadd(C, C); var x = y.connectedFaces[w]; d.copy(this.faceNormals[x]); var W = this.getPlaneConstantOfFace(x); I.copy(d), n.vmult(I, I); var V = W - I.dot(t); for (this.clipFaceAgainstPlane(A, p, I, V); A.length;)A.shift(); for (; p.length;)A.push(p.shift()) } d.copy(this.faceNormals[f]); var k = this.getPlaneConstantOfFace(f); I.copy(d), n.vmult(I, I); for (var H = k - I.dot(t), M = 0; M < A.length; M++) { var F = I.dot(A[M]) + H; if (F <= r && (console.log("clamped: depth=".concat(F, " to minDist=").concat(r)), F = r), F <= a) { var N = A[M]; if (F <= 1e-6) { var X = { point: N, normal: I, depth: F }; o.push(X) } } } } } }, { key: "clipFaceAgainstPlane", value: function (e, t, n, i) { var r, a, o = e.length; if (o < 2) return t; var s = e[e.length - 1], l = e[0]; r = n.dot(s) + i; for (var g = 0; g < o; g++) { if (l = e[g], a = n.dot(l) + i, r < 0) if (a < 0) { var c = new Lb; c.copy(l), t.push(c) } else { var u = new Lb; s.lerp(l, r / (r - a), u), t.push(u) } else if (a < 0) { var C = new Lb; s.lerp(l, r / (r - a), C), t.push(C), t.push(l) } s = l, r = a } return t } }, { key: "computeWorldVertices", value: function (e, t) { for (; this.worldVertices.length < this.vertices.length;)this.worldVertices.push(new Lb); for (var n = this.vertices, i = this.worldVertices, r = 0; r !== this.vertices.length; r++)t.vmult(n[r], i[r]), e.vadd(i[r], i[r]); this.worldVerticesNeedsUpdate = !1 } }, { key: "computeLocalAABB", value: function (e, t) { var n = this.vertices; e.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE), t.set(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE); for (var i = 0; i < this.vertices.length; i++) { var r = n[i]; r.x < e.x ? e.x = r.x : r.x > t.x && (t.x = r.x), r.y < e.y ? e.y = r.y : r.y > t.y && (t.y = r.y), r.z < e.z ? e.z = r.z : r.z > t.z && (t.z = r.z) } } }, { key: "computeWorldFaceNormals", value: function (e) { for (var t = this.faceNormals.length; this.worldFaceNormals.length < t;)this.worldFaceNormals.push(new Lb); for (var n = this.faceNormals, i = this.worldFaceNormals, r = 0; r !== t; r++)e.vmult(n[r], i[r]); this.worldFaceNormalsNeedsUpdate = !1 } }, { key: "updateBoundingSphereRadius", value: function () { for (var e = 0, t = this.vertices, n = 0; n !== t.length; n++) { var i = t[n].lengthSquared(); i > e && (e = i) } this.boundingSphereRadius = Math.sqrt(e) } }, { key: "calculateWorldAABB", value: function (e, t, n, i) { for (var r, a, o, s, l, g, c = this.vertices, u = new Lb, C = 0; C < c.length; C++) { u.copy(c[C]), t.vmult(u, u), e.vadd(u, u); var d = u; (void 0 === r || d.x < r) && (r = d.x), (void 0 === s || d.x > s) && (s = d.x), (void 0 === a || d.y < a) && (a = d.y), (void 0 === l || d.y > l) && (l = d.y), (void 0 === o || d.z < o) && (o = d.z), (void 0 === g || d.z > g) && (g = d.z) } n.set(r, a, o), i.set(s, l, g) } }, { key: "volume", value: function () { return 4 * Math.PI * this.boundingSphereRadius / 3 } }, { key: "getAveragePointLocal", value: function (e) { void 0 === e && (e = new Lb); for (var t = this.vertices, n = 0; n < t.length; n++)e.vadd(t[n], e); return e.scale(1 / t.length, e), e } }, { key: "transformAllPoints", value: function (e, t) { var n = this.vertices.length, i = this.vertices; if (t) { for (var r = 0; r < n; r++) { var a = i[r]; t.vmult(a, a) } for (var o = 0; o < this.faceNormals.length; o++) { var s = this.faceNormals[o]; t.vmult(s, s) } } if (e) for (var l = 0; l < n; l++) { var g = i[l]; g.vadd(e, g) } } }, { key: "pointIsInside", value: function (e) { var t = this.vertices, n = this.faces, i = this.faceNormals, r = new Lb; this.getAveragePointLocal(r); for (var a = 0; a < this.faces.length; a++) { var o = i[a], s = t[n[a][0]], l = new Lb; e.vsub(s, l); var g = o.dot(l), c = new Lb; r.vsub(s, c); var u = o.dot(c); if (g < 0 && u > 0 || g > 0 && u < 0) return !1 } return -1 } }], [{ key: "computeNormal", value: function (e, t, n, i) { var r = new Lb, a = new Lb; t.vsub(e, a), n.vsub(t, r), r.cross(a, i), i.isZero() || i.normalize() } }, { key: "project", value: function (e, t, n, i, r) { var a = e.vertices.length, o = iy, s = 0, l = 0, g = ry, c = e.vertices; g.setZero(), qb.vectorToLocalFrame(n, i, t, o), qb.pointToLocalFrame(n, i, g, g); var u = g.dot(o); l = s = c[0].dot(o); for (var C = 1; C < a; C++) { var d = c[C].dot(o); d > s && (s = d), d < l && (l = d) } if ((l -= u) > (s -= u)) { var I = l; l = s, s = I } r[0] = s, r[1] = l } }]), n }(Qb), ty = [], ny = []; new Lb; var iy = new Lb, ry = new Lb, ay = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this, { type: Qb.types.BOX })).halfExtents = e, i.convexPolyhedronRepresentation = null, i.updateConvexPolyhedronRepresentation(), i.updateBoundingSphereRadius(), i } return dr(n, [{ key: "updateConvexPolyhedronRepresentation", value: function () { var e = this.halfExtents.x, t = this.halfExtents.y, n = this.halfExtents.z, i = Lb, r = [new i(-e, -t, -n), new i(e, -t, -n), new i(e, t, -n), new i(-e, t, -n), new i(-e, -t, n), new i(e, -t, n), new i(e, t, n), new i(-e, t, n)], a = [new i(0, 0, 1), new i(0, 1, 0), new i(1, 0, 0)], o = new ey({ vertices: r, faces: [[3, 2, 1, 0], [4, 5, 6, 7], [5, 4, 0, 1], [2, 3, 7, 6], [0, 4, 7, 3], [1, 2, 6, 5]], axes: a }); this.convexPolyhedronRepresentation = o, o.material = this.material } }, { key: "calculateLocalInertia", value: function (e, t) { return void 0 === t && (t = new Lb), n.calculateInertia(this.halfExtents, e, t), t } }, { key: "getSideNormals", value: function (e, t) { var n = e, i = this.halfExtents; if (n[0].set(i.x, 0, 0), n[1].set(0, i.y, 0), n[2].set(0, 0, i.z), n[3].set(-i.x, 0, 0), n[4].set(0, -i.y, 0), n[5].set(0, 0, -i.z), void 0 !== t) for (var r = 0; r !== n.length; r++)t.vmult(n[r], n[r]); return n } }, { key: "volume", value: function () { return 8 * this.halfExtents.x * this.halfExtents.y * this.halfExtents.z } }, { key: "updateBoundingSphereRadius", value: function () { this.boundingSphereRadius = this.halfExtents.length() } }, { key: "forEachWorldCorner", value: function (e, t, n) { for (var i = this.halfExtents, r = [[i.x, i.y, i.z], [-i.x, i.y, i.z], [-i.x, -i.y, i.z], [-i.x, -i.y, -i.z], [i.x, -i.y, -i.z], [i.x, i.y, -i.z], [-i.x, i.y, -i.z], [i.x, -i.y, i.z]], a = 0; a < r.length; a++)oy.set(r[a][0], r[a][1], r[a][2]), t.vmult(oy, oy), e.vadd(oy, oy), n(oy.x, oy.y, oy.z) } }, { key: "calculateWorldAABB", value: function (e, t, n, i) { var r = this.halfExtents; sy[0].set(r.x, r.y, r.z), sy[1].set(-r.x, r.y, r.z), sy[2].set(-r.x, -r.y, r.z), sy[3].set(-r.x, -r.y, -r.z), sy[4].set(r.x, -r.y, -r.z), sy[5].set(r.x, r.y, -r.z), sy[6].set(-r.x, r.y, -r.z), sy[7].set(r.x, -r.y, r.z); var a = sy[0]; t.vmult(a, a), e.vadd(a, a), i.copy(a), n.copy(a); for (var o = 1; o < 8; o++) { var s = sy[o]; t.vmult(s, s), e.vadd(s, s); var l = s.x, g = s.y, c = s.z; l > i.x && (i.x = l), g > i.y && (i.y = g), c > i.z && (i.z = c), l < n.x && (n.x = l), g < n.y && (n.y = g), c < n.z && (n.z = c) } } }], [{ key: "calculateInertia", value: function (e, t, n) { var i = e; n.x = 1 / 12 * t * (2 * i.y * 2 * i.y + 2 * i.z * 2 * i.z), n.y = 1 / 12 * t * (2 * i.x * 2 * i.x + 2 * i.z * 2 * i.z), n.z = 1 / 12 * t * (2 * i.y * 2 * i.y + 2 * i.x * 2 * i.x) } }]), n }(Qb), oy = new Lb, sy = [new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb], ly = 1, gy = 2, cy = 4, uy = 0, Cy = 1, dy = 2, Iy = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; cr(this, n), void 0 === e && (e = {}), (i = t.call(this)).id = n.idCounter++, i.index = -1, i.world = null, i.vlambda = new Lb, i.collisionFilterGroup = "number" === typeof e.collisionFilterGroup ? e.collisionFilterGroup : 1, i.collisionFilterMask = "number" === typeof e.collisionFilterMask ? e.collisionFilterMask : -1, i.collisionResponse = "boolean" !== typeof e.collisionResponse || e.collisionResponse, i.position = new Lb, i.previousPosition = new Lb, i.interpolatedPosition = new Lb, i.initPosition = new Lb, e.position && (i.position.copy(e.position), i.previousPosition.copy(e.position), i.interpolatedPosition.copy(e.position), i.initPosition.copy(e.position)), i.velocity = new Lb, e.velocity && i.velocity.copy(e.velocity), i.initVelocity = new Lb, i.force = new Lb; var r = "number" === typeof e.mass ? e.mass : 0; return i.mass = r, i.invMass = r > 0 ? 1 / r : 0, i.material = e.material || null, i.linearDamping = "number" === typeof e.linearDamping ? e.linearDamping : .01, i.type = r <= 0 ? n.STATIC : n.DYNAMIC, typeof e.type === typeof n.STATIC && (i.type = e.type), i.allowSleep = "undefined" === typeof e.allowSleep || e.allowSleep, i.sleepState = n.AWAKE, i.sleepSpeedLimit = "undefined" !== typeof e.sleepSpeedLimit ? e.sleepSpeedLimit : .1, i.sleepTimeLimit = "undefined" !== typeof e.sleepTimeLimit ? e.sleepTimeLimit : 1, i.timeLastSleepy = 0, i.wakeUpAfterNarrowphase = !1, i.torque = new Lb, i.quaternion = new Jb, i.initQuaternion = new Jb, i.previousQuaternion = new Jb, i.interpolatedQuaternion = new Jb, e.quaternion && (i.quaternion.copy(e.quaternion), i.initQuaternion.copy(e.quaternion), i.previousQuaternion.copy(e.quaternion), i.interpolatedQuaternion.copy(e.quaternion)), i.angularVelocity = new Lb, e.angularVelocity && i.angularVelocity.copy(e.angularVelocity), i.initAngularVelocity = new Lb, i.shapes = [], i.shapeOffsets = [], i.shapeOrientations = [], i.inertia = new Lb, i.invInertia = new Lb, i.invInertiaWorld = new Yb, i.invMassSolve = 0, i.invInertiaSolve = new Lb, i.invInertiaWorldSolve = new Yb, i.fixedRotation = "undefined" !== typeof e.fixedRotation && e.fixedRotation, i.angularDamping = "undefined" !== typeof e.angularDamping ? e.angularDamping : .01, i.linearFactor = new Lb(1, 1, 1), e.linearFactor && i.linearFactor.copy(e.linearFactor), i.angularFactor = new Lb(1, 1, 1), e.angularFactor && i.angularFactor.copy(e.angularFactor), i.aabb = new _b, i.aabbNeedsUpdate = !0, i.boundingRadius = 0, i.wlambda = new Lb, i.isTrigger = Boolean(e.isTrigger), e.shape && i.addShape(e.shape), i.updateMassProperties(), i } return dr(n, [{ key: "wakeUp", value: function () { var e = this.sleepState; this.sleepState = n.AWAKE, this.wakeUpAfterNarrowphase = !1, e === n.SLEEPING && this.dispatchEvent(n.wakeupEvent) } }, { key: "sleep", value: function () { this.sleepState = n.SLEEPING, this.velocity.set(0, 0, 0), this.angularVelocity.set(0, 0, 0), this.wakeUpAfterNarrowphase = !1 } }, { key: "sleepTick", value: function (e) { if (this.allowSleep) { var t = this.sleepState, i = this.velocity.lengthSquared() + this.angularVelocity.lengthSquared(), r = Math.pow(this.sleepSpeedLimit, 2); t === n.AWAKE && i < r ? (this.sleepState = n.SLEEPY, this.timeLastSleepy = e, this.dispatchEvent(n.sleepyEvent)) : t === n.SLEEPY && i > r ? this.wakeUp() : t === n.SLEEPY && e - this.timeLastSleepy > this.sleepTimeLimit && (this.sleep(), this.dispatchEvent(n.sleepEvent)) } } }, { key: "updateSolveMassProperties", value: function () { this.sleepState === n.SLEEPING || this.type === n.KINEMATIC ? (this.invMassSolve = 0, this.invInertiaSolve.setZero(), this.invInertiaWorldSolve.setZero()) : (this.invMassSolve = this.invMass, this.invInertiaSolve.copy(this.invInertia), this.invInertiaWorldSolve.copy(this.invInertiaWorld)) } }, { key: "pointToLocalFrame", value: function (e, t) { return void 0 === t && (t = new Lb), e.vsub(this.position, t), this.quaternion.conjugate().vmult(t, t), t } }, { key: "vectorToLocalFrame", value: function (e, t) { return void 0 === t && (t = new Lb), this.quaternion.conjugate().vmult(e, t), t } }, { key: "pointToWorldFrame", value: function (e, t) { return void 0 === t && (t = new Lb), this.quaternion.vmult(e, t), t.vadd(this.position, t), t } }, { key: "vectorToWorldFrame", value: function (e, t) { return void 0 === t && (t = new Lb), this.quaternion.vmult(e, t), t } }, { key: "addShape", value: function (e, t, n) { var i = new Lb, r = new Jb; return t && i.copy(t), n && r.copy(n), this.shapes.push(e), this.shapeOffsets.push(i), this.shapeOrientations.push(r), this.updateMassProperties(), this.updateBoundingRadius(), this.aabbNeedsUpdate = !0, e.body = this, this } }, { key: "removeShape", value: function (e) { var t = this.shapes.indexOf(e); return -1 === t ? (console.warn("Shape does not belong to the body"), this) : (this.shapes.splice(t, 1), this.shapeOffsets.splice(t, 1), this.shapeOrientations.splice(t, 1), this.updateMassProperties(), this.updateBoundingRadius(), this.aabbNeedsUpdate = !0, e.body = null, this) } }, { key: "updateBoundingRadius", value: function () { for (var e = this.shapes, t = this.shapeOffsets, n = e.length, i = 0, r = 0; r !== n; r++) { var a = e[r]; a.updateBoundingSphereRadius(); var o = t[r].length(), s = a.boundingSphereRadius; o + s > i && (i = o + s) } this.boundingRadius = i } }, { key: "updateAABB", value: function () { for (var e = this.shapes, t = this.shapeOffsets, n = this.shapeOrientations, i = e.length, r = hy, a = Ay, o = this.quaternion, s = this.aabb, l = py, g = 0; g !== i; g++) { var c = e[g]; o.vmult(t[g], r), r.vadd(this.position, r), o.mult(n[g], a), c.calculateWorldAABB(r, a, l.lowerBound, l.upperBound), 0 === g ? s.copy(l) : s.extend(l) } this.aabbNeedsUpdate = !1 } }, { key: "updateInertiaWorld", value: function (e) { var t = this.invInertia; if (t.x !== t.y || t.y !== t.z || e) { var n = fy, i = my; n.setRotationFromQuaternion(this.quaternion), n.transpose(i), n.scale(t, n), n.mmult(i, this.invInertiaWorld) } else; } }, { key: "applyForce", value: function (e, t) { if (void 0 === t && (t = new Lb), this.type === n.DYNAMIC) { this.sleepState === n.SLEEPING && this.wakeUp(); var i = vy; t.cross(e, i), this.force.vadd(e, this.force), this.torque.vadd(i, this.torque) } } }, { key: "applyLocalForce", value: function (e, t) { if (void 0 === t && (t = new Lb), this.type === n.DYNAMIC) { var i = by, r = yy; this.vectorToWorldFrame(e, i), this.vectorToWorldFrame(t, r), this.applyForce(i, r) } } }, { key: "applyTorque", value: function (e) { this.type === n.DYNAMIC && (this.sleepState === n.SLEEPING && this.wakeUp(), this.torque.vadd(e, this.torque)) } }, { key: "applyImpulse", value: function (e, t) { if (void 0 === t && (t = new Lb), this.type === n.DYNAMIC) { this.sleepState === n.SLEEPING && this.wakeUp(); var i = t, r = Gy; r.copy(e), r.scale(this.invMass, r), this.velocity.vadd(r, this.velocity); var a = By; i.cross(e, a), this.invInertiaWorld.vmult(a, a), this.angularVelocity.vadd(a, this.angularVelocity) } } }, { key: "applyLocalImpulse", value: function (e, t) { if (void 0 === t && (t = new Lb), this.type === n.DYNAMIC) { var i = Zy, r = wy; this.vectorToWorldFrame(e, i), this.vectorToWorldFrame(t, r), this.applyImpulse(i, r) } } }, { key: "updateMassProperties", value: function () { var e = Sy; this.invMass = this.mass > 0 ? 1 / this.mass : 0; var t = this.inertia, n = this.fixedRotation; this.updateAABB(), e.set((this.aabb.upperBound.x - this.aabb.lowerBound.x) / 2, (this.aabb.upperBound.y - this.aabb.lowerBound.y) / 2, (this.aabb.upperBound.z - this.aabb.lowerBound.z) / 2), ay.calculateInertia(e, this.mass, t), this.invInertia.set(t.x > 0 && !n ? 1 / t.x : 0, t.y > 0 && !n ? 1 / t.y : 0, t.z > 0 && !n ? 1 / t.z : 0), this.updateInertiaWorld(!0) } }, { key: "getVelocityAtWorldPoint", value: function (e, t) { var n = new Lb; return e.vsub(this.position, n), this.angularVelocity.cross(n, t), this.velocity.vadd(t, t), t } }, { key: "integrate", value: function (e, t, i) { if (this.previousPosition.copy(this.position), this.previousQuaternion.copy(this.quaternion), (this.type === n.DYNAMIC || this.type === n.KINEMATIC) && this.sleepState !== n.SLEEPING) { var r = this.velocity, a = this.angularVelocity, o = this.position, s = this.force, l = this.torque, g = this.quaternion, c = this.invMass, u = this.invInertiaWorld, C = this.linearFactor, d = c * e; r.x += s.x * d * C.x, r.y += s.y * d * C.y, r.z += s.z * d * C.z; var I = u.elements, h = this.angularFactor, A = l.x * h.x, p = l.y * h.y, f = l.z * h.z; a.x += e * (I[0] * A + I[1] * p + I[2] * f), a.y += e * (I[3] * A + I[4] * p + I[5] * f), a.z += e * (I[6] * A + I[7] * p + I[8] * f), o.x += r.x * e, o.y += r.y * e, o.z += r.z * e, g.integrate(this.angularVelocity, e, this.angularFactor, g), t && (i ? g.normalizeFast() : g.normalize()), this.aabbNeedsUpdate = !0, this.updateInertiaWorld() } } }]), n }(Pb); Iy.idCounter = 0, Iy.COLLIDE_EVENT_NAME = "collide", Iy.DYNAMIC = ly, Iy.STATIC = gy, Iy.KINEMATIC = cy, Iy.AWAKE = uy, Iy.SLEEPY = Cy, Iy.SLEEPING = dy, Iy.wakeupEvent = { type: "wakeup" }, Iy.sleepyEvent = { type: "sleepy" }, Iy.sleepEvent = { type: "sleep" }; var hy = new Lb, Ay = new Jb, py = new _b, fy = new Yb, my = new Yb; new Yb; var vy = new Lb, by = new Lb, yy = new Lb, Gy = new Lb, By = new Lb, Zy = new Lb, wy = new Lb, Sy = new Lb; new Lb, new Lb, new Jb, new Lb, new Lb, new Lb, new Lb; var Ry = function () { function e() { cr(this, e), this.rayFromWorld = new Lb, this.rayToWorld = new Lb, this.hitNormalWorld = new Lb, this.hitPointWorld = new Lb, this.hasHit = !1, this.shape = null, this.body = null, this.hitFaceIndex = -1, this.distance = -1, this.shouldStop = !1 } return dr(e, [{ key: "reset", value: function () { this.rayFromWorld.setZero(), this.rayToWorld.setZero(), this.hitNormalWorld.setZero(), this.hitPointWorld.setZero(), this.hasHit = !1, this.shape = null, this.body = null, this.hitFaceIndex = -1, this.distance = -1, this.shouldStop = !1 } }, { key: "abort", value: function () { this.shouldStop = !0 } }, { key: "set", value: function (e, t, n, i, r, a, o) { this.rayFromWorld.copy(e), this.rayToWorld.copy(t), this.hitNormalWorld.copy(n), this.hitPointWorld.copy(i), this.shape = r, this.body = a, this.distance = o } }]), e }(), xy = 1, Wy = 2, Vy = 4, ky = function (e, t, n, i, r, a, o) { function s(e, t) { cr(this, s), void 0 === e && (e = new Lb), void 0 === t && (t = new Lb), this.from = e.clone(), this.to = t.clone(), this.direction = new Lb, this.precision = 1e-4, this.checkCollisionResponse = !0, this.skipBackfaces = !1, this.collisionFilterMask = -1, this.collisionFilterGroup = -1, this.mode = s.ANY, this.result = new Ry, this.hasHit = !1, this.callback = function (e) { } } return dr(s, [{ key: e, get: function () { return this._intersectSphere } }, { key: t, get: function () { return this._intersectPlane } }, { key: n, get: function () { return this._intersectBox } }, { key: i, get: function () { return this._intersectConvex } }, { key: r, get: function () { return this._intersectConvex } }, { key: a, get: function () { return this._intersectHeightfield } }, { key: o, get: function () { return this._intersectTrimesh } }, { key: "intersectWorld", value: function (e, t) { return this.mode = t.mode || s.ANY, this.result = t.result || new Ry, this.skipBackfaces = !!t.skipBackfaces, this.collisionFilterMask = "undefined" !== typeof t.collisionFilterMask ? t.collisionFilterMask : -1, this.collisionFilterGroup = "undefined" !== typeof t.collisionFilterGroup ? t.collisionFilterGroup : -1, this.checkCollisionResponse = "undefined" === typeof t.checkCollisionResponse || t.checkCollisionResponse, t.from && this.from.copy(t.from), t.to && this.to.copy(t.to), this.callback = t.callback || function () { }, this.hasHit = !1, this.result.reset(), this.updateDirection(), this.getAABB(Hy), My.length = 0, e.broadphase.aabbQuery(e, Hy, My), this.intersectBodies(My), this.hasHit } }, { key: "intersectBody", value: function (e, t) { t && (this.result = t, this.updateDirection()); var n = this.checkCollisionResponse; if ((!n || e.collisionResponse) && 0 !== (this.collisionFilterGroup & e.collisionFilterMask) && 0 !== (e.collisionFilterGroup & this.collisionFilterMask)) for (var i = Xy, r = Yy, a = 0, o = e.shapes.length; a < o; a++) { var s = e.shapes[a]; if ((!n || s.collisionResponse) && (e.quaternion.mult(e.shapeOrientations[a], r), e.quaternion.vmult(e.shapeOffsets[a], i), i.vadd(e.position, i), this.intersectShape(s, r, i, e), this.result.shouldStop)) break } } }, { key: "intersectBodies", value: function (e, t) { t && (this.result = t, this.updateDirection()); for (var n = 0, i = e.length; !this.result.shouldStop && n < i; n++)this.intersectBody(e[n]) } }, { key: "updateDirection", value: function () { this.to.vsub(this.from, this.direction), this.direction.normalize() } }, { key: "intersectShape", value: function (e, t, n, i) { var r = function (e, t, n) { n.vsub(e, aG); var i = aG.dot(t); t.scale(i, oG), oG.vadd(e, oG); var r = n.distanceTo(oG); return r }(this.from, this.direction, n); if (!(r > e.boundingSphereRadius)) { var a = this[e.type]; a && a.call(this, e, t, n, i, e) } } }, { key: "_intersectBox", value: function (e, t, n, i, r) { return this._intersectConvex(e.convexPolyhedronRepresentation, t, n, i, r) } }, { key: "_intersectPlane", value: function (e, t, n, i, r) { var a = this.from, o = this.to, s = this.direction, l = new Lb(0, 0, 1); t.vmult(l, l); var g = new Lb; a.vsub(n, g); var c = g.dot(l); if (o.vsub(n, g), !(c * g.dot(l) > 0) && !(a.distanceTo(o) < c)) { var u = l.dot(s); if (!(Math.abs(u) < this.precision)) { var C = new Lb, d = new Lb, I = new Lb; a.vsub(n, C); var h = -l.dot(C) / u; s.scale(h, d), a.vadd(d, I), this.reportIntersection(l, I, r, i, -1) } } } }, { key: "getAABB", value: function (e) { var t = e.lowerBound, n = e.upperBound, i = this.to, r = this.from; t.x = Math.min(i.x, r.x), t.y = Math.min(i.y, r.y), t.z = Math.min(i.z, r.z), n.x = Math.max(i.x, r.x), n.y = Math.max(i.y, r.y), n.z = Math.max(i.z, r.z) } }, { key: "_intersectHeightfield", value: function (e, t, n, i, r) { e.data, e.elementSize; var a = Uy; a.from.copy(this.from), a.to.copy(this.to), qb.pointToLocalFrame(n, t, a.from, a.from), qb.pointToLocalFrame(n, t, a.to, a.to), a.updateDirection(); var o, s, l, g, c = Dy; o = s = 0, l = g = e.data.length - 1; var u = new _b; a.getAABB(u), e.getIndexOfPosition(u.lowerBound.x, u.lowerBound.y, c, !0), o = Math.max(o, c[0]), s = Math.max(s, c[1]), e.getIndexOfPosition(u.upperBound.x, u.upperBound.y, c, !0), l = Math.min(l, c[0] + 1), g = Math.min(g, c[1] + 1); for (var C = o; C < l; C++)for (var d = s; d < g; d++) { if (this.result.shouldStop) return; if (e.getAabbAtIndex(C, d, u), u.overlapsRay(a)) { if (e.getConvexTrianglePillar(C, d, !1), qb.pointToWorldFrame(n, t, e.pillarOffset, _y), this._intersectConvex(e.pillarConvex, t, _y, i, r, Ty), this.result.shouldStop) return; e.getConvexTrianglePillar(C, d, !0), qb.pointToWorldFrame(n, t, e.pillarOffset, _y), this._intersectConvex(e.pillarConvex, t, _y, i, r, Ty) } } } }, { key: "_intersectSphere", value: function (e, t, n, i, r) { var a = this.from, o = this.to, s = e.radius, l = Math.pow(o.x - a.x, 2) + Math.pow(o.y - a.y, 2) + Math.pow(o.z - a.z, 2), g = 2 * ((o.x - a.x) * (a.x - n.x) + (o.y - a.y) * (a.y - n.y) + (o.z - a.z) * (a.z - n.z)), c = Math.pow(a.x - n.x, 2) + Math.pow(a.y - n.y, 2) + Math.pow(a.z - n.z, 2) - Math.pow(s, 2), u = Math.pow(g, 2) - 4 * l * c, C = Py, d = Jy; if (!(u < 0)) if (0 === u) a.lerp(o, u, C), C.vsub(n, d), d.normalize(), this.reportIntersection(d, C, r, i, -1); else { var I = (-g - Math.sqrt(u)) / (2 * l), h = (-g + Math.sqrt(u)) / (2 * l); if (I >= 0 && I <= 1 && (a.lerp(o, I, C), C.vsub(n, d), d.normalize(), this.reportIntersection(d, C, r, i, -1)), this.result.shouldStop) return; h >= 0 && h <= 1 && (a.lerp(o, h, C), C.vsub(n, d), d.normalize(), this.reportIntersection(d, C, r, i, -1)) } } }, { key: "_intersectConvex", value: function (e, t, n, i, r, a) { for (var o = Oy, l = jy, g = a && a.faceList || null, c = e.faces, u = e.vertices, C = e.faceNormals, d = this.direction, I = this.from, h = this.to, A = I.distanceTo(h), p = g ? g.length : c.length, f = this.result, m = 0; !f.shouldStop && m < p; m++) { var v = g ? g[m] : m, b = c[v], y = C[v], G = t, B = n; l.copy(u[b[0]]), G.vmult(l, l), l.vadd(B, l), l.vsub(I, l), G.vmult(y, o); var Z = d.dot(o); if (!(Math.abs(Z) < this.precision)) { var w = o.dot(l) / Z; if (!(w < 0)) { d.scale(w, Ky), Ky.vadd(I, Ky), Ly.copy(u[b[0]]), G.vmult(Ly, Ly), B.vadd(Ly, Ly); for (var S = 1; !f.shouldStop && S < b.length - 1; S++) { zy.copy(u[b[S]]), Ey.copy(u[b[S + 1]]), G.vmult(zy, zy), G.vmult(Ey, Ey), B.vadd(zy, zy), B.vadd(Ey, Ey); var R = Ky.distanceTo(I); !s.pointInTriangle(Ky, Ly, zy, Ey) && !s.pointInTriangle(Ky, zy, Ly, Ey) || R > A || this.reportIntersection(o, Ky, r, i, v) } } } } } }, { key: "_intersectTrimesh", value: function (e, t, n, i, r, a) { var o = Qy, l = iG, g = rG, c = jy, u = qy, C = $y, d = eG, I = nG, h = tG, A = e.indices; e.vertices; var p = this.from, f = this.to, m = this.direction; g.position.copy(n), g.quaternion.copy(t), qb.vectorToLocalFrame(n, t, m, u), qb.pointToLocalFrame(n, t, p, C), qb.pointToLocalFrame(n, t, f, d), d.x *= e.scale.x, d.y *= e.scale.y, d.z *= e.scale.z, C.x *= e.scale.x, C.y *= e.scale.y, C.z *= e.scale.z, d.vsub(C, u), u.normalize(); var v = C.distanceSquared(d); e.tree.rayQuery(this, g, l); for (var b = 0, y = l.length; !this.result.shouldStop && b !== y; b++) { var G = l[b]; e.getNormal(G, o), e.getVertex(A[3 * G], Ly), Ly.vsub(C, c); var B = u.dot(o), Z = o.dot(c) / B; if (!(Z < 0)) { u.scale(Z, Ky), Ky.vadd(C, Ky), e.getVertex(A[3 * G + 1], zy), e.getVertex(A[3 * G + 2], Ey); var w = Ky.distanceSquared(C); !s.pointInTriangle(Ky, zy, Ly, Ey) && !s.pointInTriangle(Ky, Ly, zy, Ey) || w > v || (qb.vectorToWorldFrame(t, o, h), qb.pointToWorldFrame(n, t, Ky, I), this.reportIntersection(h, I, r, i, G)) } } l.length = 0 } }, { key: "reportIntersection", value: function (e, t, n, i, r) { var a = this.from, o = this.to, l = a.distanceTo(t), g = this.result; if (!(this.skipBackfaces && e.dot(this.direction) > 0)) switch (g.hitFaceIndex = "undefined" !== typeof r ? r : -1, this.mode) { case s.ALL: this.hasHit = !0, g.set(a, o, e, t, n, i, l), g.hasHit = !0, this.callback(g); break; case s.CLOSEST: (l < g.distance || !g.hasHit) && (this.hasHit = !0, g.hasHit = !0, g.set(a, o, e, t, n, i, l)); break; case s.ANY: this.hasHit = !0, g.hasHit = !0, g.set(a, o, e, t, n, i, l), g.shouldStop = !0 } } }], [{ key: "pointInTriangle", value: function (e, t, n, i) { i.vsub(t, aG), n.vsub(t, Fy), e.vsub(t, Ny); var r, a, o = aG.dot(aG), s = aG.dot(Fy), l = aG.dot(Ny), g = Fy.dot(Fy), c = Fy.dot(Ny); return (r = g * l - s * c) >= 0 && (a = o * c - s * l) >= 0 && r + a < o * g - s * s } }]), s }(Qb.types.SPHERE, Qb.types.PLANE, Qb.types.BOX, Qb.types.CYLINDER, Qb.types.CONVEXPOLYHEDRON, Qb.types.HEIGHTFIELD, Qb.types.TRIMESH); ky.CLOSEST = xy, ky.ANY = Wy, ky.ALL = Vy; var Hy = new _b, My = [], Fy = new Lb, Ny = new Lb, Xy = new Lb, Yy = new Jb, Ky = new Lb, Ly = new Lb, zy = new Lb, Ey = new Lb; new Lb, new Ry; var Ty = { faceList: [0] }, _y = new Lb, Uy = new ky, Dy = [], Py = new Lb, Jy = new Lb, Oy = new Lb; new Lb, new Lb; var jy = new Lb, Qy = new Lb, qy = new Lb, $y = new Lb, eG = new Lb, tG = new Lb, nG = new Lb; new _b; var iG = [], rG = new qb, aG = new Lb, oG = new Lb; new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb; var sG = dr((function e(t) { cr(this, e), void 0 === t && (t = {}); var n = ""; "string" === typeof t && (n = t, t = {}), this.name = n, this.id = e.idCounter++, this.friction = "undefined" !== typeof t.friction ? t.friction : -1, this.restitution = "undefined" !== typeof t.restitution ? t.restitution : -1 })); sG.idCounter = 0, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new ky, new Lb, new Lb, new Lb, new Lb(1, 0, 0), new Lb(0, 1, 0), new Lb(0, 0, 1), new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb; new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb; new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb; new Lb, new _b, new Lb, new _b, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new _b, new Lb, new qb, new _b; Qb.types.SPHERE, Qb.types.SPHERE, Qb.types.PLANE, Qb.types.BOX, Qb.types.BOX, Qb.types.SPHERE, Qb.types.BOX, Qb.types.PLANE, Qb.types.BOX, Qb.types.CONVEXPOLYHEDRON, Qb.types.SPHERE, Qb.types.CONVEXPOLYHEDRON, Qb.types.PLANE, Qb.types.CONVEXPOLYHEDRON, Qb.types.BOX, Qb.types.CONVEXPOLYHEDRON, Qb.types.SPHERE, Qb.types.HEIGHTFIELD, Qb.types.BOX, Qb.types.HEIGHTFIELD, Qb.types.CONVEXPOLYHEDRON, Qb.types.HEIGHTFIELD, Qb.types.PARTICLE, Qb.types.SPHERE, Qb.types.PLANE, Qb.types.PARTICLE, Qb.types.BOX, Qb.types.PARTICLE, Qb.types.PARTICLE, Qb.types.CONVEXPOLYHEDRON, Qb.types.CYLINDER, Qb.types.SPHERE, Qb.types.CYLINDER, Qb.types.PLANE, Qb.types.CYLINDER, Qb.types.BOX, Qb.types.CYLINDER, Qb.types.CONVEXPOLYHEDRON, Qb.types.CYLINDER, Qb.types.HEIGHTFIELD, Qb.types.CYLINDER, Qb.types.PARTICLE, Qb.types.CYLINDER, Qb.types.SPHERE, Qb.types.TRIMESH, Qb.types.PLANE, Qb.types.TRIMESH, new Lb, new Lb, new Lb, new Lb, new Lb, new Jb, new Jb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new _b, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Jb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new Lb, new _b, new ky; var lG = globalThis.performance || {}; if (!lG.now) { var gG = Date.now(); lG.timing && lG.timing.navigationStart && (gG = lG.timing.navigationStart), lG.now = function () { return Date.now() - gG } } new Lb; var cG = function () { function e(t) { cr(this, e), void 0 === t && (t = [0, 0, 0, 0, 0, 0, 0, 0, 0]), this.elements = t } return dr(e, [{ key: "identity", value: function () { var e = this.elements; e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 1, e[5] = 0, e[6] = 0, e[7] = 0, e[8] = 1 } }, { key: "setZero", value: function () { var e = this.elements; e[0] = 0, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 0, e[5] = 0, e[6] = 0, e[7] = 0, e[8] = 0 } }, { key: "setTrace", value: function (e) { var t = this.elements; t[0] = e.x, t[4] = e.y, t[8] = e.z } }, { key: "getTrace", value: function (e) { void 0 === e && (e = new CG); var t = this.elements; return e.x = t[0], e.y = t[4], e.z = t[8], e } }, { key: "vmult", value: function (e, t) { void 0 === t && (t = new CG); var n = this.elements, i = e.x, r = e.y, a = e.z; return t.x = n[0] * i + n[1] * r + n[2] * a, t.y = n[3] * i + n[4] * r + n[5] * a, t.z = n[6] * i + n[7] * r + n[8] * a, t } }, { key: "smult", value: function (e) { for (var t = 0; t < this.elements.length; t++)this.elements[t] *= e } }, { key: "mmult", value: function (t, n) { void 0 === n && (n = new e); var i = this.elements, r = t.elements, a = n.elements, o = i[0], s = i[1], l = i[2], g = i[3], c = i[4], u = i[5], C = i[6], d = i[7], I = i[8], h = r[0], A = r[1], p = r[2], f = r[3], m = r[4], v = r[5], b = r[6], y = r[7], G = r[8]; return a[0] = o * h + s * f + l * b, a[1] = o * A + s * m + l * y, a[2] = o * p + s * v + l * G, a[3] = g * h + c * f + u * b, a[4] = g * A + c * m + u * y, a[5] = g * p + c * v + u * G, a[6] = C * h + d * f + I * b, a[7] = C * A + d * m + I * y, a[8] = C * p + d * v + I * G, n } }, { key: "scale", value: function (t, n) { void 0 === n && (n = new e); for (var i = this.elements, r = n.elements, a = 0; 3 !== a; a++)r[3 * a + 0] = t.x * i[3 * a + 0], r[3 * a + 1] = t.y * i[3 * a + 1], r[3 * a + 2] = t.z * i[3 * a + 2]; return n } }, { key: "solve", value: function (e, t) { void 0 === t && (t = new CG); var n, i, r = []; for (n = 0; n < 12; n++)r.push(0); for (n = 0; n < 3; n++)for (i = 0; i < 3; i++)r[n + 4 * i] = this.elements[n + 3 * i]; r[3] = e.x, r[7] = e.y, r[11] = e.z; var a, o, s = 3, l = s; do { if (0 === r[(n = l - s) + 4 * n]) for (i = n + 1; i < l; i++)if (0 !== r[n + 4 * i]) { a = 4; do { r[(o = 4 - a) + 4 * n] += r[o + 4 * i] } while (--a); break } if (0 !== r[n + 4 * n]) for (i = n + 1; i < l; i++) { var g = r[n + 4 * i] / r[n + 4 * n]; a = 4; do { r[(o = 4 - a) + 4 * i] = o <= n ? 0 : r[o + 4 * i] - r[o + 4 * n] * g } while (--a) } } while (--s); if (t.z = r[11] / r[10], t.y = (r[7] - r[6] * t.z) / r[5], t.x = (r[3] - r[2] * t.z - r[1] * t.y) / r[0], isNaN(t.x) || isNaN(t.y) || isNaN(t.z) || t.x === 1 / 0 || t.y === 1 / 0 || t.z === 1 / 0) throw "Could not solve equation! Got x=[".concat(t.toString(), "], b=[").concat(e.toString(), "], A=[").concat(this.toString(), "]"); return t } }, { key: "e", value: function (e, t, n) { if (void 0 === n) return this.elements[t + 3 * e]; this.elements[t + 3 * e] = n } }, { key: "copy", value: function (e) { for (var t = 0; t < e.elements.length; t++)this.elements[t] = e.elements[t]; return this } }, { key: "toString", value: function () { for (var e = "", t = 0; t < 9; t++)e += this.elements[t] + ","; return e } }, { key: "reverse", value: function (t) { void 0 === t && (t = new e); var n, i, r = uG; for (n = 0; n < 3; n++)for (i = 0; i < 3; i++)r[n + 6 * i] = this.elements[n + 3 * i]; r[3] = 1, r[9] = 0, r[15] = 0, r[4] = 0, r[10] = 1, r[16] = 0, r[5] = 0, r[11] = 0, r[17] = 1; var a, o, s = 3, l = s; do { if (0 === r[(n = l - s) + 6 * n]) for (i = n + 1; i < l; i++)if (0 !== r[n + 6 * i]) { a = 6; do { r[(o = 6 - a) + 6 * n] += r[o + 6 * i] } while (--a); break } if (0 !== r[n + 6 * n]) for (i = n + 1; i < l; i++) { var g = r[n + 6 * i] / r[n + 6 * n]; a = 6; do { r[(o = 6 - a) + 6 * i] = o <= n ? 0 : r[o + 6 * i] - r[o + 6 * n] * g } while (--a) } } while (--s); n = 2; do { i = n - 1; do { var c = r[n + 6 * i] / r[n + 6 * n]; a = 6; do { r[(o = 6 - a) + 6 * i] = r[o + 6 * i] - r[o + 6 * n] * c } while (--a) } while (i--) } while (--n); n = 2; do { var u = 1 / r[n + 6 * n]; a = 6; do { r[(o = 6 - a) + 6 * n] = r[o + 6 * n] * u } while (--a) } while (n--); n = 2; do { i = 2; do { if (o = r[3 + i + 6 * n], isNaN(o) || o === 1 / 0) throw "Could not reverse! A=[".concat(this.toString(), "]"); t.e(n, i, o) } while (i--) } while (n--); return t } }, { key: "setRotationFromQuaternion", value: function (e) { var t = e.x, n = e.y, i = e.z, r = e.w, a = t + t, o = n + n, s = i + i, l = t * a, g = t * o, c = t * s, u = n * o, C = n * s, d = i * s, I = r * a, h = r * o, A = r * s, p = this.elements; return p[0] = 1 - (u + d), p[1] = g - A, p[2] = c + h, p[3] = g + A, p[4] = 1 - (l + d), p[5] = C - I, p[6] = c - h, p[7] = C + I, p[8] = 1 - (l + u), this } }, { key: "transpose", value: function (t) { void 0 === t && (t = new e); var n, i = this.elements, r = t.elements; return r[0] = i[0], r[4] = i[4], r[8] = i[8], n = i[1], r[1] = i[3], r[3] = n, n = i[2], r[2] = i[6], r[6] = n, n = i[5], r[5] = i[7], r[7] = n, t } }]), e }(), uG = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], CG = function () { function e(t, n, i) { cr(this, e), void 0 === t && (t = 0), void 0 === n && (n = 0), void 0 === i && (i = 0), this.x = t, this.y = n, this.z = i } return dr(e, [{ key: "cross", value: function (t, n) { void 0 === n && (n = new e); var i = t.x, r = t.y, a = t.z, o = this.x, s = this.y, l = this.z; return n.x = s * a - l * r, n.y = l * i - o * a, n.z = o * r - s * i, n } }, { key: "set", value: function (e, t, n) { return this.x = e, this.y = t, this.z = n, this } }, { key: "setZero", value: function () { this.x = this.y = this.z = 0 } }, { key: "vadd", value: function (t, n) { if (!n) return new e(this.x + t.x, this.y + t.y, this.z + t.z); n.x = t.x + this.x, n.y = t.y + this.y, n.z = t.z + this.z } }, { key: "vsub", value: function (t, n) { if (!n) return new e(this.x - t.x, this.y - t.y, this.z - t.z); n.x = this.x - t.x, n.y = this.y - t.y, n.z = this.z - t.z } }, { key: "crossmat", value: function () { return new cG([0, -this.z, this.y, this.z, 0, -this.x, -this.y, this.x, 0]) } }, { key: "normalize", value: function () { var e = this.x, t = this.y, n = this.z, i = Math.sqrt(e * e + t * t + n * n); if (i > 0) { var r = 1 / i; this.x *= r, this.y *= r, this.z *= r } else this.x = 0, this.y = 0, this.z = 0; return i } }, { key: "unit", value: function (t) { void 0 === t && (t = new e); var n = this.x, i = this.y, r = this.z, a = Math.sqrt(n * n + i * i + r * r); return a > 0 ? (a = 1 / a, t.x = n * a, t.y = i * a, t.z = r * a) : (t.x = 1, t.y = 0, t.z = 0), t } }, { key: "length", value: function () { var e = this.x, t = this.y, n = this.z; return Math.sqrt(e * e + t * t + n * n) } }, { key: "lengthSquared", value: function () { return this.dot(this) } }, { key: "distanceTo", value: function (e) { var t = this.x, n = this.y, i = this.z, r = e.x, a = e.y, o = e.z; return Math.sqrt((r - t) * (r - t) + (a - n) * (a - n) + (o - i) * (o - i)) } }, { key: "distanceSquared", value: function (e) { var t = this.x, n = this.y, i = this.z, r = e.x, a = e.y, o = e.z; return (r - t) * (r - t) + (a - n) * (a - n) + (o - i) * (o - i) } }, { key: "scale", value: function (t, n) { void 0 === n && (n = new e); var i = this.x, r = this.y, a = this.z; return n.x = t * i, n.y = t * r, n.z = t * a, n } }, { key: "vmul", value: function (t, n) { return void 0 === n && (n = new e), n.x = t.x * this.x, n.y = t.y * this.y, n.z = t.z * this.z, n } }, { key: "addScaledVector", value: function (t, n, i) { return void 0 === i && (i = new e), i.x = this.x + t * n.x, i.y = this.y + t * n.y, i.z = this.z + t * n.z, i } }, { key: "dot", value: function (e) { return this.x * e.x + this.y * e.y + this.z * e.z } }, { key: "isZero", value: function () { return 0 === this.x && 0 === this.y && 0 === this.z } }, { key: "negate", value: function (t) { return void 0 === t && (t = new e), t.x = -this.x, t.y = -this.y, t.z = -this.z, t } }, { key: "tangents", value: function (e, t) { var n = this.length(); if (n > 0) { var i = dG, r = 1 / n; i.set(this.x * r, this.y * r, this.z * r); var a = IG; Math.abs(i.x) < .9 ? (a.set(1, 0, 0), i.cross(a, e)) : (a.set(0, 1, 0), i.cross(a, e)), i.cross(e, t) } else e.set(1, 0, 0), t.set(0, 1, 0) } }, { key: "toString", value: function () { return "".concat(this.x, ",").concat(this.y, ",").concat(this.z) } }, { key: "toArray", value: function () { return [this.x, this.y, this.z] } }, { key: "copy", value: function (e) { return this.x = e.x, this.y = e.y, this.z = e.z, this } }, { key: "lerp", value: function (e, t, n) { var i = this.x, r = this.y, a = this.z; n.x = i + (e.x - i) * t, n.y = r + (e.y - r) * t, n.z = a + (e.z - a) * t } }, { key: "almostEquals", value: function (e, t) { return void 0 === t && (t = 1e-6), !(Math.abs(this.x - e.x) > t || Math.abs(this.y - e.y) > t || Math.abs(this.z - e.z) > t) } }, { key: "almostZero", value: function (e) { return void 0 === e && (e = 1e-6), !(Math.abs(this.x) > e || Math.abs(this.y) > e || Math.abs(this.z) > e) } }, { key: "isAntiparallelTo", value: function (e, t) { return this.negate(hG), hG.almostEquals(e, t) } }, { key: "clone", value: function () { return new e(this.x, this.y, this.z) } }]), e }(); CG.ZERO = new CG(0, 0, 0), CG.UNIT_X = new CG(1, 0, 0), CG.UNIT_Y = new CG(0, 1, 0), CG.UNIT_Z = new CG(0, 0, 1); var dG = new CG, IG = new CG, hG = new CG, AG = function () { function e(t) { cr(this, e), void 0 === t && (t = {}), this.lowerBound = new CG, this.upperBound = new CG, t.lowerBound && this.lowerBound.copy(t.lowerBound), t.upperBound && this.upperBound.copy(t.upperBound) } return dr(e, [{ key: "setFromPoints", value: function (e, t, n, i) { var r = this.lowerBound, a = this.upperBound, o = n; r.copy(e[0]), o && o.vmult(r, r), a.copy(r); for (var s = 1; s < e.length; s++) { var l = e[s]; o && (o.vmult(l, pG), l = pG), l.x > a.x && (a.x = l.x), l.x < r.x && (r.x = l.x), l.y > a.y && (a.y = l.y), l.y < r.y && (r.y = l.y), l.z > a.z && (a.z = l.z), l.z < r.z && (r.z = l.z) } return t && (t.vadd(r, r), t.vadd(a, a)), i && (r.x -= i, r.y -= i, r.z -= i, a.x += i, a.y += i, a.z += i), this } }, { key: "copy", value: function (e) { return this.lowerBound.copy(e.lowerBound), this.upperBound.copy(e.upperBound), this } }, { key: "clone", value: function () { return (new e).copy(this) } }, { key: "extend", value: function (e) { this.lowerBound.x = Math.min(this.lowerBound.x, e.lowerBound.x), this.upperBound.x = Math.max(this.upperBound.x, e.upperBound.x), this.lowerBound.y = Math.min(this.lowerBound.y, e.lowerBound.y), this.upperBound.y = Math.max(this.upperBound.y, e.upperBound.y), this.lowerBound.z = Math.min(this.lowerBound.z, e.lowerBound.z), this.upperBound.z = Math.max(this.upperBound.z, e.upperBound.z) } }, { key: "overlaps", value: function (e) { var t = this.lowerBound, n = this.upperBound, i = e.lowerBound, r = e.upperBound, a = i.x <= n.x && n.x <= r.x || t.x <= r.x && r.x <= n.x, o = i.y <= n.y && n.y <= r.y || t.y <= r.y && r.y <= n.y, s = i.z <= n.z && n.z <= r.z || t.z <= r.z && r.z <= n.z; return a && o && s } }, { key: "volume", value: function () { var e = this.lowerBound, t = this.upperBound; return (t.x - e.x) * (t.y - e.y) * (t.z - e.z) } }, { key: "contains", value: function (e) { var t = this.lowerBound, n = this.upperBound, i = e.lowerBound, r = e.upperBound; return t.x <= i.x && n.x >= r.x && t.y <= i.y && n.y >= r.y && t.z <= i.z && n.z >= r.z } }, { key: "getCorners", value: function (e, t, n, i, r, a, o, s) { var l = this.lowerBound, g = this.upperBound; e.copy(l), t.set(g.x, l.y, l.z), n.set(g.x, g.y, l.z), i.set(l.x, g.y, g.z), r.set(g.x, l.y, g.z), a.set(l.x, g.y, l.z), o.set(l.x, l.y, g.z), s.copy(g) } }, { key: "toLocalFrame", value: function (e, t) { var n = fG, i = n[0], r = n[1], a = n[2], o = n[3], s = n[4], l = n[5], g = n[6], c = n[7]; this.getCorners(i, r, a, o, s, l, g, c); for (var u = 0; 8 !== u; u++) { var C = n[u]; e.pointToLocal(C, C) } return t.setFromPoints(n) } }, { key: "toWorldFrame", value: function (e, t) { var n = fG, i = n[0], r = n[1], a = n[2], o = n[3], s = n[4], l = n[5], g = n[6], c = n[7]; this.getCorners(i, r, a, o, s, l, g, c); for (var u = 0; 8 !== u; u++) { var C = n[u]; e.pointToWorld(C, C) } return t.setFromPoints(n) } }, { key: "overlapsRay", value: function (e) { var t = e.direction, n = e.from, i = 1 / t.x, r = 1 / t.y, a = 1 / t.z, o = (this.lowerBound.x - n.x) * i, s = (this.upperBound.x - n.x) * i, l = (this.lowerBound.y - n.y) * r, g = (this.upperBound.y - n.y) * r, c = (this.lowerBound.z - n.z) * a, u = (this.upperBound.z - n.z) * a, C = Math.max(Math.max(Math.min(o, s), Math.min(l, g)), Math.min(c, u)), d = Math.min(Math.min(Math.max(o, s), Math.max(l, g)), Math.max(c, u)); return !(d < 0) && !(C > d) } }]), e }(), pG = new CG, fG = [new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG], mG = function () { function e(t, n, i, r) { cr(this, e), void 0 === t && (t = 0), void 0 === n && (n = 0), void 0 === i && (i = 0), void 0 === r && (r = 1), this.x = t, this.y = n, this.z = i, this.w = r } return dr(e, [{ key: "set", value: function (e, t, n, i) { return this.x = e, this.y = t, this.z = n, this.w = i, this } }, { key: "toString", value: function () { return "".concat(this.x, ",").concat(this.y, ",").concat(this.z, ",").concat(this.w) } }, { key: "toArray", value: function () { return [this.x, this.y, this.z, this.w] } }, { key: "setFromAxisAngle", value: function (e, t) { var n = Math.sin(.5 * t); return this.x = e.x * n, this.y = e.y * n, this.z = e.z * n, this.w = Math.cos(.5 * t), this } }, { key: "toAxisAngle", value: function (e) { void 0 === e && (e = new CG), this.normalize(); var t = 2 * Math.acos(this.w), n = Math.sqrt(1 - this.w * this.w); return n < .001 ? (e.x = this.x, e.y = this.y, e.z = this.z) : (e.x = this.x / n, e.y = this.y / n, e.z = this.z / n), [e, t] } }, { key: "setFromVectors", value: function (e, t) { if (e.isAntiparallelTo(t)) { var n = vG, i = bG; e.tangents(n, i), this.setFromAxisAngle(n, Math.PI) } else { var r = e.cross(t); this.x = r.x, this.y = r.y, this.z = r.z, this.w = Math.sqrt(Math.pow(e.length(), 2) * Math.pow(t.length(), 2)) + e.dot(t), this.normalize() } return this } }, { key: "mult", value: function (t, n) { void 0 === n && (n = new e); var i = this.x, r = this.y, a = this.z, o = this.w, s = t.x, l = t.y, g = t.z, c = t.w; return n.x = i * c + o * s + r * g - a * l, n.y = r * c + o * l + a * s - i * g, n.z = a * c + o * g + i * l - r * s, n.w = o * c - i * s - r * l - a * g, n } }, { key: "inverse", value: function (t) { void 0 === t && (t = new e); var n = this.x, i = this.y, r = this.z, a = this.w; this.conjugate(t); var o = 1 / (n * n + i * i + r * r + a * a); return t.x *= o, t.y *= o, t.z *= o, t.w *= o, t } }, { key: "conjugate", value: function (t) { return void 0 === t && (t = new e), t.x = -this.x, t.y = -this.y, t.z = -this.z, t.w = this.w, t } }, { key: "normalize", value: function () { var e = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w); return 0 === e ? (this.x = 0, this.y = 0, this.z = 0, this.w = 0) : (e = 1 / e, this.x *= e, this.y *= e, this.z *= e, this.w *= e), this } }, { key: "normalizeFast", value: function () { var e = (3 - (this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)) / 2; return 0 === e ? (this.x = 0, this.y = 0, this.z = 0, this.w = 0) : (this.x *= e, this.y *= e, this.z *= e, this.w *= e), this } }, { key: "vmult", value: function (e, t) { void 0 === t && (t = new CG); var n = e.x, i = e.y, r = e.z, a = this.x, o = this.y, s = this.z, l = this.w, g = l * n + o * r - s * i, c = l * i + s * n - a * r, u = l * r + a * i - o * n, C = -a * n - o * i - s * r; return t.x = g * l + C * -a + c * -s - u * -o, t.y = c * l + C * -o + u * -a - g * -s, t.z = u * l + C * -s + g * -o - c * -a, t } }, { key: "copy", value: function (e) { return this.x = e.x, this.y = e.y, this.z = e.z, this.w = e.w, this } }, { key: "toEuler", value: function (e, t) { var n, i, r; void 0 === t && (t = "YZX"); var a = this.x, o = this.y, s = this.z, l = this.w; if ("YZX" !== t) throw new Error("Euler order ".concat(t, " not supported yet.")); var g = a * o + s * l; if (g > .499 && (n = 2 * Math.atan2(a, l), i = Math.PI / 2, r = 0), g < -.499 && (n = -2 * Math.atan2(a, l), i = -Math.PI / 2, r = 0), void 0 === n) { var c = a * a, u = o * o, C = s * s; n = Math.atan2(2 * o * l - 2 * a * s, 1 - 2 * u - 2 * C), i = Math.asin(2 * g), r = Math.atan2(2 * a * l - 2 * o * s, 1 - 2 * c - 2 * C) } e.y = n, e.z = i, e.x = r } }, { key: "setFromEuler", value: function (e, t, n, i) { void 0 === i && (i = "XYZ"); var r = Math.cos(e / 2), a = Math.cos(t / 2), o = Math.cos(n / 2), s = Math.sin(e / 2), l = Math.sin(t / 2), g = Math.sin(n / 2); return "XYZ" === i ? (this.x = s * a * o + r * l * g, this.y = r * l * o - s * a * g, this.z = r * a * g + s * l * o, this.w = r * a * o - s * l * g) : "YXZ" === i ? (this.x = s * a * o + r * l * g, this.y = r * l * o - s * a * g, this.z = r * a * g - s * l * o, this.w = r * a * o + s * l * g) : "ZXY" === i ? (this.x = s * a * o - r * l * g, this.y = r * l * o + s * a * g, this.z = r * a * g + s * l * o, this.w = r * a * o - s * l * g) : "ZYX" === i ? (this.x = s * a * o - r * l * g, this.y = r * l * o + s * a * g, this.z = r * a * g - s * l * o, this.w = r * a * o + s * l * g) : "YZX" === i ? (this.x = s * a * o + r * l * g, this.y = r * l * o + s * a * g, this.z = r * a * g - s * l * o, this.w = r * a * o - s * l * g) : "XZY" === i && (this.x = s * a * o - r * l * g, this.y = r * l * o - s * a * g, this.z = r * a * g + s * l * o, this.w = r * a * o + s * l * g), this } }, { key: "clone", value: function () { return new e(this.x, this.y, this.z, this.w) } }, { key: "slerp", value: function (t, n, i) { void 0 === i && (i = new e); var r, a, o, s, l, g = this.x, c = this.y, u = this.z, C = this.w, d = t.x, I = t.y, h = t.z, A = t.w; return (a = g * d + c * I + u * h + C * A) < 0 && (a = -a, d = -d, I = -I, h = -h, A = -A), 1 - a > 1e-6 ? (r = Math.acos(a), o = Math.sin(r), s = Math.sin((1 - n) * r) / o, l = Math.sin(n * r) / o) : (s = 1 - n, l = n), i.x = s * g + l * d, i.y = s * c + l * I, i.z = s * u + l * h, i.w = s * C + l * A, i } }, { key: "integrate", value: function (t, n, i, r) { void 0 === r && (r = new e); var a = t.x * i.x, o = t.y * i.y, s = t.z * i.z, l = this.x, g = this.y, c = this.z, u = this.w, C = .5 * n; return r.x += C * (a * u + o * c - s * g), r.y += C * (o * u + s * l - a * c), r.z += C * (s * u + a * g - o * l), r.w += C * (-a * l - o * g - s * c), r } }]), e }(), vG = new CG, bG = new CG, yG = function () { function e(t) { cr(this, e), void 0 === t && (t = {}), this.id = e.idCounter++, this.type = t.type || 0, this.boundingSphereRadius = 0, this.collisionResponse = !t.collisionResponse || t.collisionResponse, this.collisionFilterGroup = void 0 !== t.collisionFilterGroup ? t.collisionFilterGroup : 1, this.collisionFilterMask = void 0 !== t.collisionFilterMask ? t.collisionFilterMask : -1, this.material = t.material ? t.material : null, this.body = null } return dr(e, [{ key: "updateBoundingSphereRadius", value: function () { throw "computeBoundingSphereRadius() not implemented for shape type ".concat(this.type) } }, { key: "volume", value: function () { throw "volume() not implemented for shape type ".concat(this.type) } }, { key: "calculateLocalInertia", value: function (e, t) { throw "calculateLocalInertia() not implemented for shape type ".concat(this.type) } }, { key: "calculateWorldAABB", value: function (e, t, n, i) { throw "calculateWorldAABB() not implemented for shape type ".concat(this.type) } }]), e }(); yG.idCounter = 0, yG.types = { SPHERE: 1, PLANE: 2, BOX: 4, COMPOUND: 8, CONVEXPOLYHEDRON: 16, HEIGHTFIELD: 32, PARTICLE: 64, CYLINDER: 128, TRIMESH: 256 }; var GG = function () { function e(t) { cr(this, e), void 0 === t && (t = {}), this.position = new CG, this.quaternion = new mG, t.position && this.position.copy(t.position), t.quaternion && this.quaternion.copy(t.quaternion) } return dr(e, [{ key: "pointToLocal", value: function (t, n) { return e.pointToLocalFrame(this.position, this.quaternion, t, n) } }, { key: "pointToWorld", value: function (t, n) { return e.pointToWorldFrame(this.position, this.quaternion, t, n) } }, { key: "vectorToWorldFrame", value: function (e, t) { return void 0 === t && (t = new CG), this.quaternion.vmult(e, t), t } }], [{ key: "pointToLocalFrame", value: function (e, t, n, i) { return void 0 === i && (i = new CG), n.vsub(e, i), t.conjugate(BG), BG.vmult(i, i), i } }, { key: "pointToWorldFrame", value: function (e, t, n, i) { return void 0 === i && (i = new CG), t.vmult(n, i), i.vadd(e, i), i } }, { key: "vectorToWorldFrame", value: function (e, t, n) { return void 0 === n && (n = new CG), e.vmult(t, n), n } }, { key: "vectorToLocalFrame", value: function (e, t, n, i) { return void 0 === i && (i = new CG), t.w *= -1, t.vmult(n, i), t.w *= -1, i } }]), e }(), BG = new mG; new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new mG, new AG, new cG, new cG, new cG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new mG, new CG, new CG, new CG, new CG; var ZG = function () { function e() { cr(this, e), this.rayFromWorld = new CG, this.rayToWorld = new CG, this.hitNormalWorld = new CG, this.hitPointWorld = new CG, this.hasHit = !1, this.shape = null, this.body = null, this.hitFaceIndex = -1, this.distance = -1, this.shouldStop = !1 } return dr(e, [{ key: "reset", value: function () { this.rayFromWorld.setZero(), this.rayToWorld.setZero(), this.hitNormalWorld.setZero(), this.hitPointWorld.setZero(), this.hasHit = !1, this.shape = null, this.body = null, this.hitFaceIndex = -1, this.distance = -1, this.shouldStop = !1 } }, { key: "abort", value: function () { this.shouldStop = !0 } }, { key: "set", value: function (e, t, n, i, r, a, o) { this.rayFromWorld.copy(e), this.rayToWorld.copy(t), this.hitNormalWorld.copy(n), this.hitPointWorld.copy(i), this.shape = r, this.body = a, this.distance = o } }]), e }(), wG = 1, SG = 2, RG = 4, xG = function (e, t, n, i, r, a, o) { function s(e, t) { cr(this, s), void 0 === e && (e = new CG), void 0 === t && (t = new CG), this.from = e.clone(), this.to = t.clone(), this.direction = new CG, this.precision = 1e-4, this.checkCollisionResponse = !0, this.skipBackfaces = !1, this.collisionFilterMask = -1, this.collisionFilterGroup = -1, this.mode = s.ANY, this.result = new ZG, this.hasHit = !1, this.callback = function (e) { } } return dr(s, [{ key: e, get: function () { return this._intersectSphere } }, { key: t, get: function () { return this._intersectPlane } }, { key: n, get: function () { return this._intersectBox } }, { key: i, get: function () { return this._intersectConvex } }, { key: r, get: function () { return this._intersectConvex } }, { key: a, get: function () { return this._intersectHeightfield } }, { key: o, get: function () { return this._intersectTrimesh } }, { key: "intersectWorld", value: function (e, t) { return this.mode = t.mode || s.ANY, this.result = t.result || new ZG, this.skipBackfaces = !!t.skipBackfaces, this.collisionFilterMask = "undefined" !== typeof t.collisionFilterMask ? t.collisionFilterMask : -1, this.collisionFilterGroup = "undefined" !== typeof t.collisionFilterGroup ? t.collisionFilterGroup : -1, this.checkCollisionResponse = "undefined" === typeof t.checkCollisionResponse || t.checkCollisionResponse, t.from && this.from.copy(t.from), t.to && this.to.copy(t.to), this.callback = t.callback || function () { }, this.hasHit = !1, this.result.reset(), this.updateDirection(), this.getAABB(WG), VG.length = 0, e.broadphase.aabbQuery(e, WG, VG), this.intersectBodies(VG), this.hasHit } }, { key: "intersectBody", value: function (e, t) { t && (this.result = t, this.updateDirection()); var n = this.checkCollisionResponse; if ((!n || e.collisionResponse) && 0 !== (this.collisionFilterGroup & e.collisionFilterMask) && 0 !== (e.collisionFilterGroup & this.collisionFilterMask)) for (var i = MG, r = FG, a = 0, o = e.shapes.length; a < o; a++) { var s = e.shapes[a]; if ((!n || s.collisionResponse) && (e.quaternion.mult(e.shapeOrientations[a], r), e.quaternion.vmult(e.shapeOffsets[a], i), i.vadd(e.position, i), this.intersectShape(s, r, i, e), this.result.shouldStop)) break } } }, { key: "intersectBodies", value: function (e, t) { t && (this.result = t, this.updateDirection()); for (var n = 0, i = e.length; !this.result.shouldStop && n < i; n++)this.intersectBody(e[n]) } }, { key: "updateDirection", value: function () { this.to.vsub(this.from, this.direction), this.direction.normalize() } }, { key: "intersectShape", value: function (e, t, n, i) { var r = function (e, t, n) { n.vsub(e, nB); var i = nB.dot(t); t.scale(i, iB), iB.vadd(e, iB); var r = n.distanceTo(iB); return r }(this.from, this.direction, n); if (!(r > e.boundingSphereRadius)) { var a = this[e.type]; a && a.call(this, e, t, n, i, e) } } }, { key: "_intersectBox", value: function (e, t, n, i, r) { return this._intersectConvex(e.convexPolyhedronRepresentation, t, n, i, r) } }, { key: "_intersectPlane", value: function (e, t, n, i, r) { var a = this.from, o = this.to, s = this.direction, l = new CG(0, 0, 1); t.vmult(l, l); var g = new CG; a.vsub(n, g); var c = g.dot(l); if (o.vsub(n, g), !(c * g.dot(l) > 0) && !(a.distanceTo(o) < c)) { var u = l.dot(s); if (!(Math.abs(u) < this.precision)) { var C = new CG, d = new CG, I = new CG; a.vsub(n, C); var h = -l.dot(C) / u; s.scale(h, d), a.vadd(d, I), this.reportIntersection(l, I, r, i, -1) } } } }, { key: "getAABB", value: function (e) { var t = e.lowerBound, n = e.upperBound, i = this.to, r = this.from; t.x = Math.min(i.x, r.x), t.y = Math.min(i.y, r.y), t.z = Math.min(i.z, r.z), n.x = Math.max(i.x, r.x), n.y = Math.max(i.y, r.y), n.z = Math.max(i.z, r.z) } }, { key: "_intersectHeightfield", value: function (e, t, n, i, r) { e.data, e.elementSize; var a = EG; a.from.copy(this.from), a.to.copy(this.to), GG.pointToLocalFrame(n, t, a.from, a.from), GG.pointToLocalFrame(n, t, a.to, a.to), a.updateDirection(); var o, s, l, g, c = TG; o = s = 0, l = g = e.data.length - 1; var u = new AG; a.getAABB(u), e.getIndexOfPosition(u.lowerBound.x, u.lowerBound.y, c, !0), o = Math.max(o, c[0]), s = Math.max(s, c[1]), e.getIndexOfPosition(u.upperBound.x, u.upperBound.y, c, !0), l = Math.min(l, c[0] + 1), g = Math.min(g, c[1] + 1); for (var C = o; C < l; C++)for (var d = s; d < g; d++) { if (this.result.shouldStop) return; if (e.getAabbAtIndex(C, d, u), u.overlapsRay(a)) { if (e.getConvexTrianglePillar(C, d, !1), GG.pointToWorldFrame(n, t, e.pillarOffset, zG), this._intersectConvex(e.pillarConvex, t, zG, i, r, LG), this.result.shouldStop) return; e.getConvexTrianglePillar(C, d, !0), GG.pointToWorldFrame(n, t, e.pillarOffset, zG), this._intersectConvex(e.pillarConvex, t, zG, i, r, LG) } } } }, { key: "_intersectSphere", value: function (e, t, n, i, r) { var a = this.from, o = this.to, s = e.radius, l = Math.pow(o.x - a.x, 2) + Math.pow(o.y - a.y, 2) + Math.pow(o.z - a.z, 2), g = 2 * ((o.x - a.x) * (a.x - n.x) + (o.y - a.y) * (a.y - n.y) + (o.z - a.z) * (a.z - n.z)), c = Math.pow(a.x - n.x, 2) + Math.pow(a.y - n.y, 2) + Math.pow(a.z - n.z, 2) - Math.pow(s, 2), u = Math.pow(g, 2) - 4 * l * c, C = _G, d = UG; if (!(u < 0)) if (0 === u) a.lerp(o, u, C), C.vsub(n, d), d.normalize(), this.reportIntersection(d, C, r, i, -1); else { var I = (-g - Math.sqrt(u)) / (2 * l), h = (-g + Math.sqrt(u)) / (2 * l); if (I >= 0 && I <= 1 && (a.lerp(o, I, C), C.vsub(n, d), d.normalize(), this.reportIntersection(d, C, r, i, -1)), this.result.shouldStop) return; h >= 0 && h <= 1 && (a.lerp(o, h, C), C.vsub(n, d), d.normalize(), this.reportIntersection(d, C, r, i, -1)) } } }, { key: "_intersectConvex", value: function (e, t, n, i, r, a) { for (var o = DG, l = PG, g = a && a.faceList || null, c = e.faces, u = e.vertices, C = e.faceNormals, d = this.direction, I = this.from, h = this.to, A = I.distanceTo(h), p = g ? g.length : c.length, f = this.result, m = 0; !f.shouldStop && m < p; m++) { var v = g ? g[m] : m, b = c[v], y = C[v], G = t, B = n; l.copy(u[b[0]]), G.vmult(l, l), l.vadd(B, l), l.vsub(I, l), G.vmult(y, o); var Z = d.dot(o); if (!(Math.abs(Z) < this.precision)) { var w = o.dot(l) / Z; if (!(w < 0)) { d.scale(w, NG), NG.vadd(I, NG), XG.copy(u[b[0]]), G.vmult(XG, XG), B.vadd(XG, XG); for (var S = 1; !f.shouldStop && S < b.length - 1; S++) { YG.copy(u[b[S]]), KG.copy(u[b[S + 1]]), G.vmult(YG, YG), G.vmult(KG, KG), B.vadd(YG, YG), B.vadd(KG, KG); var R = NG.distanceTo(I); !s.pointInTriangle(NG, XG, YG, KG) && !s.pointInTriangle(NG, YG, XG, KG) || R > A || this.reportIntersection(o, NG, r, i, v) } } } } } }, { key: "_intersectTrimesh", value: function (e, t, n, i, r, a) { var o = JG, l = eB, g = tB, c = PG, u = OG, C = jG, d = QG, I = $G, h = qG, A = e.indices; e.vertices; var p = this.from, f = this.to, m = this.direction; g.position.copy(n), g.quaternion.copy(t), GG.vectorToLocalFrame(n, t, m, u), GG.pointToLocalFrame(n, t, p, C), GG.pointToLocalFrame(n, t, f, d), d.x *= e.scale.x, d.y *= e.scale.y, d.z *= e.scale.z, C.x *= e.scale.x, C.y *= e.scale.y, C.z *= e.scale.z, d.vsub(C, u), u.normalize(); var v = C.distanceSquared(d); e.tree.rayQuery(this, g, l); for (var b = 0, y = l.length; !this.result.shouldStop && b !== y; b++) { var G = l[b]; e.getNormal(G, o), e.getVertex(A[3 * G], XG), XG.vsub(C, c); var B = u.dot(o), Z = o.dot(c) / B; if (!(Z < 0)) { u.scale(Z, NG), NG.vadd(C, NG), e.getVertex(A[3 * G + 1], YG), e.getVertex(A[3 * G + 2], KG); var w = NG.distanceSquared(C); !s.pointInTriangle(NG, YG, XG, KG) && !s.pointInTriangle(NG, XG, YG, KG) || w > v || (GG.vectorToWorldFrame(t, o, h), GG.pointToWorldFrame(n, t, NG, I), this.reportIntersection(h, I, r, i, G)) } } l.length = 0 } }, { key: "reportIntersection", value: function (e, t, n, i, r) { var a = this.from, o = this.to, l = a.distanceTo(t), g = this.result; if (!(this.skipBackfaces && e.dot(this.direction) > 0)) switch (g.hitFaceIndex = "undefined" !== typeof r ? r : -1, this.mode) { case s.ALL: this.hasHit = !0, g.set(a, o, e, t, n, i, l), g.hasHit = !0, this.callback(g); break; case s.CLOSEST: (l < g.distance || !g.hasHit) && (this.hasHit = !0, g.hasHit = !0, g.set(a, o, e, t, n, i, l)); break; case s.ANY: this.hasHit = !0, g.hasHit = !0, g.set(a, o, e, t, n, i, l), g.shouldStop = !0 } } }], [{ key: "pointInTriangle", value: function (e, t, n, i) { i.vsub(t, nB), n.vsub(t, kG), e.vsub(t, HG); var r, a, o = nB.dot(nB), s = nB.dot(kG), l = nB.dot(HG), g = kG.dot(kG), c = kG.dot(HG); return (r = g * l - s * c) >= 0 && (a = o * c - s * l) >= 0 && r + a < o * g - s * s } }]), s }(yG.types.SPHERE, yG.types.PLANE, yG.types.BOX, yG.types.CYLINDER, yG.types.CONVEXPOLYHEDRON, yG.types.HEIGHTFIELD, yG.types.TRIMESH); xG.CLOSEST = wG, xG.ANY = SG, xG.ALL = RG; var WG = new AG, VG = [], kG = new CG, HG = new CG, MG = new CG, FG = new mG, NG = new CG, XG = new CG, YG = new CG, KG = new CG; new CG, new ZG; var LG = { faceList: [0] }, zG = new CG, EG = new xG, TG = [], _G = new CG, UG = new CG, DG = new CG; new CG, new CG; var PG = new CG, JG = new CG, OG = new CG, jG = new CG, QG = new CG, qG = new CG, $G = new CG; new AG; var eB = [], tB = new GG, nB = new CG, iB = new CG; new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new xG, new CG, new CG, new CG, new CG(1, 0, 0), new CG(0, 1, 0), new CG(0, 0, 1), new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new AG, new CG, new AG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new AG, new CG, new GG, new AG, yG.types.SPHERE, yG.types.SPHERE, yG.types.PLANE, yG.types.BOX, yG.types.BOX, yG.types.SPHERE, yG.types.BOX, yG.types.PLANE, yG.types.BOX, yG.types.CONVEXPOLYHEDRON, yG.types.SPHERE, yG.types.CONVEXPOLYHEDRON, yG.types.PLANE, yG.types.CONVEXPOLYHEDRON, yG.types.BOX, yG.types.CONVEXPOLYHEDRON, yG.types.SPHERE, yG.types.HEIGHTFIELD, yG.types.BOX, yG.types.HEIGHTFIELD, yG.types.CONVEXPOLYHEDRON, yG.types.HEIGHTFIELD, yG.types.PARTICLE, yG.types.SPHERE, yG.types.PLANE, yG.types.PARTICLE, yG.types.BOX, yG.types.PARTICLE, yG.types.PARTICLE, yG.types.CONVEXPOLYHEDRON, yG.types.CYLINDER, yG.types.SPHERE, yG.types.CYLINDER, yG.types.PLANE, yG.types.CYLINDER, yG.types.BOX, yG.types.CYLINDER, yG.types.CONVEXPOLYHEDRON, yG.types.CYLINDER, yG.types.HEIGHTFIELD, yG.types.CYLINDER, yG.types.PARTICLE, yG.types.CYLINDER, yG.types.SPHERE, yG.types.TRIMESH, yG.types.PLANE, yG.types.TRIMESH, new CG, new CG, new CG, new CG, new CG, new mG, new mG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new AG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new mG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new CG, new AG, new xG; var rB = globalThis.performance || {}; if (!rB.now) { var aB = Date.now(); rB.timing && rB.timing.navigationStart && (aB = rB.timing.navigationStart), rB.now = function () { return Date.now() - aB } } new CG; var oB = (0, t.createContext)(null), sB = function () { return (0, t.useContext)(oB) }, lB = (0, t.createContext)(null), gB = function () { var e = (0, t.useContext)(lB); if (!e) throw new Error("Physics context not found. @react-three/cannon & components can only be used within a Physics provider"); return e }; new jl, new Ql(1, 1, 1), new Ql, new Sg; var cB = new qg; function uB(e) { var n = (0, t.useRef)(null); return e && "function" !== typeof e ? e : n } function CB(e) { return e.charAt(0).toUpperCase() + e.slice(1) } function dB(e, t) { var n = void 0 === t ? "" : "/".concat(t); return "function" === typeof e ? null : e && e.current && "".concat(e.current.uuid).concat(n) } var IB = new Xg, hB = new jl, AB = function (e) { return function (t) { return e(IB.setFromQuaternion(hB.fromArray(t)).toArray()) } }, pB = 0; function fB(e, t, n, i, r, a) { return void 0 === a && (a = "bodies"), function (o) { var s = pB++; n[s] = (0, l.Z)({}, i, o); var g = dB(e, r); return g && t.subscribe({ props: { id: s, target: a, type: i }, uuid: g }), function () { delete n[s], t.unsubscribe({ props: s }) } } } function mB(e, t) { var n, i, r = t.position, a = void 0 === r ? [0, 0, 0] : r, o = t.rotation, s = void 0 === o ? [0, 0, 0] : o, l = t.userData, g = void 0 === l ? {} : l; e.userData = g, (n = e.position).set.apply(n, (0, v.Z)(a)), (i = e.rotation).set.apply(i, (0, v.Z)(s)), e.updateMatrix() } function vB(e, t, n) { var i = t.onCollide, r = t.onCollideBegin, a = t.onCollideEnd; e[n] = { collide: i, collideBegin: r, collideEnd: a } } function bB(e, n, i, r, a) { void 0 === r && (r = null), void 0 === a && (a = []); var o = uB(r), s = gB(), g = s.events, c = s.refs, u = s.scaleOverrides, C = s.subscriptions, d = s.worker, I = sB(); (0, t.useLayoutEffect)((function () { o.current || (o.current = new qg); var t = o.current, r = d, a = t instanceof rh ? (t.instanceMatrix.setUsage(_s), t.count) : 1, s = t instanceof rh ? new Array(a).fill(0).map((function (e, n) { return "".concat(t.uuid, "/").concat(n) })) : [t.uuid], l = t instanceof rh ? s.map((function (r, a) { var o = n(a); return mB(cB, o), t.setMatrixAt(a, cB.matrix), t.instanceMatrix.needsUpdate = !0, c[r] = t, null == I || I.add(r, o, e), vB(g, o, r), ln(ln({}, o), {}, { args: i(o.args) }) })) : s.map((function (r, a) { var o = n(a); return mB(t, o), c[r] = t, null == I || I.add(r, o, e), vB(g, o, r), ln(ln({}, o), {}, { args: i(o.args) }) })); return r.addBodies({ props: l.map((function (e) { var t = e.onCollide, n = (e.onCollideBegin, e.onCollideEnd, or(e, Ib)); return ln({ onCollide: Boolean(t) }, n) })), type: e, uuid: s }), function () { s.forEach((function (e) { delete c[e], null == I || I.remove(e), delete g[e] })), r.removeBodies({ uuid: s }) } }), a); var h = (0, t.useMemo)((function () { var e = function (e, t) { var n = "set".concat(CB(e)); return { set: function (e) { var i = dB(o, t); i && d[n]({ props: e, uuid: i }) }, subscribe: fB(o, d, C, e, t) } }, t = function (e) { return { copy: function (t) { var n = t.w, i = t.x, r = t.y, a = t.z, s = dB(o, e); s && d.setQuaternion({ props: [i, r, a, n], uuid: s }) }, set: function (t, n, i, r) { var a = dB(o, e); a && d.setQuaternion({ props: [t, n, i, r], uuid: a }) }, subscribe: fB(o, d, C, "quaternion", e) } }, n = function (e) { return { copy: function (t) { var n = t.x, i = t.y, r = t.z, a = dB(o, e); a && d.setRotation({ props: [n, i, r], uuid: a }) }, set: function (t, n, i) { var r = dB(o, e); r && d.setRotation({ props: [t, n, i], uuid: r }) }, subscribe: function (t) { var n = pB++, i = "quaternion", r = dB(o, e); return C[n] = (0, l.Z)({}, i, AB(t)), r && d.subscribe({ props: { id: n, target: "bodies", type: i }, uuid: r }), function () { delete C[n], d.unsubscribe({ props: n }) } } } }, i = function (e, t) { var n = "set".concat(CB(e)); return { copy: function (e) { var i = e.x, r = e.y, a = e.z, s = dB(o, t); s && d[n]({ props: [i, r, a], uuid: s }) }, set: function (e, i, r) { var a = dB(o, t); a && d[n]({ props: [e, i, r], uuid: a }) }, subscribe: fB(o, d, C, e, t) } }; function r(r) { return { allowSleep: e("allowSleep", r), angularDamping: e("angularDamping", r), angularFactor: i("angularFactor", r), angularVelocity: i("angularVelocity", r), applyForce: function (e, t) { var n = dB(o, r); n && d.applyForce({ props: [e, t], uuid: n }) }, applyImpulse: function (e, t) { var n = dB(o, r); n && d.applyImpulse({ props: [e, t], uuid: n }) }, applyLocalForce: function (e, t) { var n = dB(o, r); n && d.applyLocalForce({ props: [e, t], uuid: n }) }, applyLocalImpulse: function (e, t) { var n = dB(o, r); n && d.applyLocalImpulse({ props: [e, t], uuid: n }) }, applyTorque: function (e) { var t = dB(o, r); t && d.applyTorque({ props: [e], uuid: t }) }, collisionFilterGroup: e("collisionFilterGroup", r), collisionFilterMask: e("collisionFilterMask", r), collisionResponse: e("collisionResponse", r), fixedRotation: e("fixedRotation", r), isTrigger: e("isTrigger", r), linearDamping: e("linearDamping", r), linearFactor: i("linearFactor", r), mass: e("mass", r), material: e("material", r), position: i("position", r), quaternion: t(r), rotation: n(r), scaleOverride: function (e) { var t = dB(o, r); t && (u[t] = lr(Ql, (0, v.Z)(e))) }, sleep: function () { var e = dB(o, r); e && d.sleep({ uuid: e }) }, sleepSpeedLimit: e("sleepSpeedLimit", r), sleepTimeLimit: e("sleepTimeLimit", r), userData: e("userData", r), velocity: i("velocity", r), wakeUp: function () { var e = dB(o, r); e && d.wakeUp({ uuid: e }) } } } var a = {}; return ln(ln({}, r(void 0)), {}, { at: function (e) { return a[e] || (a[e] = r(e)) } }) }), []); return [o, h] } var yB = new Ql, GB = new Ql(1, 1, 1), BB = new jl, ZB = new Sg; function wB(e, t, n, i, r) { return void 0 === i && (i = GB), void 0 !== e ? (ZB.compose(yB.fromArray(t, 3 * e), BB.fromArray(n, 4 * e), i), r && (r.matrixAutoUpdate = !1, r.matrix.copy(ZB)), ZB) : ZB.identity() } function SB(e) { var n = e.allowSleep, i = void 0 !== n && n, a = e.axisIndex, o = void 0 === a ? 0 : a, s = e.broadphase, l = void 0 === s ? "Naive" : s, g = e.children, c = e.defaultContactMaterial, u = void 0 === c ? { contactEquationStiffness: 1e6 } : c, C = e.frictionGravity, d = void 0 === C ? null : C, I = e.gravity, h = void 0 === I ? [0, -9.81, 0] : I, A = e.isPaused, p = void 0 !== A && A, f = e.iterations, m = void 0 === f ? 5 : f, v = e.maxSubSteps, b = void 0 === v ? 10 : v, y = e.quatNormalizeFast, G = void 0 !== y && y, B = e.quatNormalizeSkip, Z = void 0 === B ? 0 : B, w = e.shouldInvalidate, S = void 0 === w || w, R = e.size, x = void 0 === R ? 1e3 : R, W = e.solver, V = void 0 === W ? "GS" : W, k = e.stepSize, H = void 0 === k ? 1 / 60 : k, M = e.tolerance, F = void 0 === M ? .001 : M, N = jv().invalidate, X = (0, t.useState)((function () { return { bodies: {}, events: {}, refs: {}, scaleOverrides: {}, subscriptions: {}, worker: new Xb({ allowSleep: i, axisIndex: o, broadphase: l, defaultContactMaterial: u, frictionGravity: d, gravity: h, iterations: m, quatNormalizeFast: G, quatNormalizeSkip: Z, size: x, solver: V, tolerance: F }) } })), Y = (0, r.Z)(X, 1)[0], L = Y.bodies, z = Y.events, E = Y.refs, T = Y.scaleOverrides, _ = Y.subscriptions, U = Y.worker, D = 0, P = (0, t.useCallback)((function (e, t) { p || (D += t, U.step({ maxSubSteps: b, stepSize: H, timeSinceLastCalled: D }), D = 0) }), [p, b, H]), J = function (e) { var t, n = e.body, i = e.contact, r = i.bi, a = i.bj, o = or(i, hb), s = e.target, l = or(e, Ab), g = null == (t = z[s]) ? void 0 : t.collide; g && g(ln({ body: E[n], contact: ln({ bi: E[r], bj: E[a] }, o), target: E[s] }, l)) }, O = function (e) { var t, n, i = e.bodyA, r = e.bodyB, a = null == (t = z[i]) ? void 0 : t.collideBegin; a && a({ body: E[r], op: "event", target: E[i], type: "collideBegin" }); var o = null == (n = z[r]) ? void 0 : n.collideBegin; o && o({ body: E[i], op: "event", target: E[r], type: "collideBegin" }) }, j = function (e) { var t, n, i = e.bodyA, r = e.bodyB, a = null == (t = z[i]) ? void 0 : t.collideEnd; a && a({ body: E[r], op: "event", target: E[i], type: "collideEnd" }); var o = null == (n = z[r]) ? void 0 : n.collideEnd; o && o({ body: E[i], op: "event", target: E[r], type: "collideEnd" }) }, Q = function (e) { for (var t = e.active, n = e.bodies, i = void 0 === n ? [] : n, a = e.observations, o = e.positions, s = e.quaternions, l = 0; l < i.length; l++)L[i[l]] = l; if (a.forEach((function (e) { var t = (0, r.Z)(e, 3), n = t[0], i = t[1], a = t[2], o = (_[n] || {})[a]; o && o(i) })), t) { var g, c = gr(Object.values(E).filter(function () { var e = []; return function (t) { return !e.includes(t) && !!e.push(t) } }())); try { for (c.s(); !(g = c.n()).done;) { var u = g.value; if (u instanceof rh) for (var C = 0; C < u.count; C++) { var d = "".concat(u.uuid, "/").concat(C), I = L[d]; void 0 !== I && (u.setMatrixAt(C, wB(I, o, s, T[d])), u.instanceMatrix.needsUpdate = !0) } else { var h = T[u.uuid] || u.scale; wB(L[u.uuid], o, s, h, u) } } } catch (A) { c.e(A) } finally { c.f() } S && N() } }, q = function (e) { var t, n = e.body, i = e.ray, r = i.uuid, a = or(i, pb), o = or(e, fb), s = null == (t = z[r]) ? void 0 : t.rayhit; s && s(ln({ body: n ? E[n] : null, ray: ln({ uuid: r }, a) }, o)) }; Qv(P), (0, t.useEffect)((function () { return U.connect(), U.init(), U.on("collide", J), U.on("collideBegin", O), U.on("collideEnd", j), U.on("frame", Q), U.on("rayhit", q), function () { U.terminate(), U.removeAllListeners() } }), []), (0, t.useEffect)((function () { U.axisIndex = o }), [o]), (0, t.useEffect)((function () { U.broadphase = l }), [l]), (0, t.useEffect)((function () { U.gravity = h }), [h]), (0, t.useEffect)((function () { U.iterations = m }), [m]), (0, t.useEffect)((function () { U.tolerance = F }), [F]); var $ = (0, t.useMemo)((function () { return { bodies: L, events: z, refs: E, scaleOverrides: T, subscriptions: _, worker: U } }), [L, z, E, _, U]); return (0, K.jsx)(lB.Provider, { value: $, children: g }) } var RB = n(7494), xB = n.n(RB); function WB(e) { var n = void 0 === e ? { debounce: 0, scroll: !1, offsetSize: !1 } : e, i = n.debounce, a = n.scroll, o = n.polyfill, s = n.offsetSize, l = o || ("undefined" === typeof window ? dr((function e() { cr(this, e) })) : window.ResizeObserver); if (!l) throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills"); var g = (0, t.useState)({ left: 0, top: 0, width: 0, height: 0, bottom: 0, right: 0, x: 0, y: 0 }), c = (0, r.Z)(g, 2), u = c[0], C = c[1], d = (0, t.useRef)({ element: null, scrollContainers: null, resizeObserver: null, lastBounds: u }), I = i ? "number" === typeof i ? i : i.scroll : null, h = i ? "number" === typeof i ? i : i.resize : null, A = (0, t.useRef)(!1); (0, t.useEffect)((function () { return A.current = !0, function () { A.current = !1 } })); var p = (0, t.useMemo)((function () { var e = function () { if (d.current.element) { var e = d.current.element.getBoundingClientRect(), t = { left: e.left, top: e.top, width: e.width, height: e.height, bottom: e.bottom, right: e.right, x: e.x, y: e.y }; d.current.element instanceof HTMLElement && s && (t.height = d.current.element.offsetHeight, t.width = d.current.element.offsetWidth), Object.freeze(t), A.current && !HB(d.current.lastBounds, t) && C(d.current.lastBounds = t) } }; return [e, h ? xB()(e, h) : e, I ? xB()(e, I) : e] }), [C, s, I, h]), f = (0, r.Z)(p, 3), m = f[0], v = f[1], b = f[2]; function y() { d.current.scrollContainers && (d.current.scrollContainers.forEach((function (e) { return e.removeEventListener("scroll", b, !0) })), d.current.scrollContainers = null), d.current.resizeObserver && (d.current.resizeObserver.disconnect(), d.current.resizeObserver = null) } function G() { d.current.element && (d.current.resizeObserver = new l(b), d.current.resizeObserver.observe(d.current.element), a && d.current.scrollContainers && d.current.scrollContainers.forEach((function (e) { return e.addEventListener("scroll", b, { capture: !0, passive: !0 }) }))) } var B, Z, w; return B = b, Z = Boolean(a), (0, t.useEffect)((function () { if (Z) { var e = B; return window.addEventListener("scroll", e, { capture: !0, passive: !0 }), function () { window.removeEventListener("scroll", e, !0) } } }), [B, Z]), w = v, (0, t.useEffect)((function () { var e = w; return window.addEventListener("resize", e), function () { window.removeEventListener("resize", e) } }), [w]), (0, t.useEffect)((function () { y(), G() }), [a, b, v]), (0, t.useEffect)((function () { return y }), []), [function (e) { e && e !== d.current.element && (y(), d.current.element = e, d.current.scrollContainers = VB(e), G()) }, u, m] } function VB(e) { var t = []; if (!e || e === document.body) return t; var n = window.getComputedStyle(e); return [n.overflow, n.overflowX, n.overflowY].some((function (e) { return "auto" === e || "scroll" === e })) && t.push(e), [].concat(t, (0, v.Z)(VB(e.parentElement))) } var kB = ["x", "y", "top", "bottom", "left", "right", "width", "height"], HB = function (e, t) { return kB.every((function (n) { return e[n] === t[n] })) }, MB = Object.defineProperty, FB = Object.defineProperties, NB = Object.getOwnPropertyDescriptors, XB = Object.getOwnPropertySymbols, YB = Object.prototype.hasOwnProperty, KB = Object.prototype.propertyIsEnumerable, LB = function (e, t, n) { return t in e ? MB(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n }, zB = function (e, t) { for (var n in t || (t = {})) YB.call(t, n) && LB(e, n, t[n]); if (XB) { var i, r = gr(XB(t)); try { for (r.s(); !(i = r.n()).done;) { n = i.value; KB.call(t, n) && LB(e, n, t[n]) } } catch (a) { r.e(a) } finally { r.f() } } return e }; function EB(e, t, n) { if (e) { if (!0 === n(e)) return e; for (var i = t ? e.return : e.child; i;) { var r = EB(i, t, n); if (r) return r; i = t ? null : i.sibling } } } function TB(e) { try { return Object.defineProperties(e, { _currentRenderer: { get: function () { return null }, set: function () { } }, _currentRenderer2: { get: function () { return null }, set: function () { } } }) } catch (t) { return e } } var _B = TB(t.createContext(null)), UB = function (e) { Ir(i, e); var n = fr(i); function i() { return cr(this, i), n.apply(this, arguments) } return dr(i, [{ key: "render", value: function () { return t.createElement(_B.Provider, { value: this._reactInternals }, this.props.children) } }]), i }(t.Component), DB = t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED, PB = DB.ReactCurrentOwner, JB = DB.ReactCurrentDispatcher; function OB() { var e = t.useContext(_B); if (null === e) throw new Error("its-fine: useFiber must be called within a <FiberProvider />!"); var n = t.useId(); return t.useMemo((function () { for (var t = 0, i = [null == PB ? void 0 : PB.current, e, null == e ? void 0 : e.alternate]; t < i.length; t++) { var r = i[t]; if (r) { var a = EB(r, !1, (function (e) { for (var t = e.memoizedState; t;) { if (t.memoizedState === n) return !0; t = t.next } })); if (a) return a } } }), [e, n]) } function jB() { var e = function () { var e, n, i = OB(), a = t.useState((function () { return new Map })), o = (0, r.Z)(a, 1)[0]; o.clear(); for (var s = i; s;) { var l = null == (e = s.type) ? void 0 : e._context; l && l !== _B && !o.has(l) && o.set(l, null == (n = null == JB ? void 0 : JB.current) ? void 0 : n.readContext(TB(l))), s = s.return } return o }(); return t.useMemo((function () { return Array.from(e.keys()).reduce((function (n, i) { return function (r) { return t.createElement(n, null, t.createElement(i.Provider, function (e, t) { return FB(e, NB(t)) }(zB({}, r), { value: e.get(i) }))) } }), (function (e) { return t.createElement(UB, zB({}, e)) })) }), [e]) } var QB = ["children", "fallback", "resize", "style", "gl", "events", "eventSource", "eventPrefix", "shadows", "linear", "flat", "legacy", "orthographic", "frameloop", "dpr", "performance", "raycaster", "camera", "scene", "onPointerMissed", "onCreated"], qB = { onClick: ["click", !1], onContextMenu: ["contextmenu", !1], onDoubleClick: ["dblclick", !1], onWheel: ["wheel", !0], onPointerDown: ["pointerdown", !0], onPointerUp: ["pointerup", !0], onPointerLeave: ["pointerleave", !0], onPointerMove: ["pointermove", !0], onPointerCancel: ["pointercancel", !0], onLostPointerCapture: ["lostpointercapture", !0] }; function $B(e) { var t = Nv(e).handlePointer; return { priority: 1, enabled: !0, compute: function (e, t, n) { t.pointer.set(e.offsetX / t.size.width * 2 - 1, -e.offsetY / t.size.height * 2 + 1), t.raycaster.setFromCamera(t.pointer, t.camera) }, connected: void 0, handlers: Object.keys(qB).reduce((function (e, n) { return ln(ln({}, e), {}, (0, l.Z)({}, n, t(n))) }), {}), update: function () { var t, n = e.getState(), i = n.events, r = n.internal; null != (t = r.lastEvent) && t.current && i.handlers && i.handlers.onPointerMove(r.lastEvent.current) }, connect: function (t) { var n, i = e.getState(), a = i.set, o = i.events; null == o.disconnect || o.disconnect(), a((function (e) { return { events: ln(ln({}, e.events), {}, { connected: t }) } })), Object.entries(null != (n = o.handlers) ? n : []).forEach((function (e) { var n = (0, r.Z)(e, 2), i = n[0], a = n[1], o = (0, r.Z)(qB[i], 2), s = o[0], l = o[1]; t.addEventListener(s, a, { passive: l }) })) }, disconnect: function () { var t, n = e.getState(), i = n.set, a = n.events; a.connected && (Object.entries(null != (t = a.handlers) ? t : []).forEach((function (e) { var t = (0, r.Z)(e, 2), n = t[0], i = t[1]; if (a && a.connected instanceof HTMLElement) { var o = (0, r.Z)(qB[n], 1)[0]; a.connected.removeEventListener(o, i) } })), i((function (e) { return { events: ln(ln({}, e.events), {}, { connected: void 0 }) } }))) } } } var eZ = t.forwardRef((function (n, i) { var a = n.children, o = n.fallback, s = n.resize, l = n.style, g = n.gl, u = n.events, C = void 0 === u ? $B : u, d = n.eventSource, I = n.eventPrefix, h = n.shadows, A = n.linear, p = n.flat, f = n.legacy, m = n.orthographic, v = n.frameloop, b = n.dpr, y = n.performance, G = n.raycaster, B = n.camera, Z = n.scene, w = n.onPointerMissed, S = n.onCreated, R = or(n, QB); t.useMemo((function () { return t = e, void Object.assign(lv, t); var t }), []); var x = jB(), W = WB(ln({ scroll: !0, debounce: { scroll: 50, resize: 0 } }, s)), V = (0, r.Z)(W, 2), k = V[0], H = V[1], M = t.useRef(null), F = t.useRef(null); t.useImperativeHandle(i, (function () { return M.current })); var N = dv(w), X = t.useState(!1), Y = (0, r.Z)(X, 2), K = Y[0], L = Y[1], z = t.useState(!1), E = (0, r.Z)(z, 2), T = E[0], _ = E[1]; if (K) throw K; if (T) throw T; var U = t.useRef(null); Cv((function () { var e = M.current; H.width > 0 && H.height > 0 && e && (U.current || (U.current = cb(e)), U.current.configure({ gl: g, events: C, shadows: h, linear: A, flat: p, legacy: f, orthographic: m, frameloop: v, dpr: b, performance: y, raycaster: G, camera: B, scene: Z, size: H, onPointerMissed: function () { return null == N.current ? void 0 : N.current.apply(N, arguments) }, onCreated: function (e) { var t; null == e.events.connect || e.events.connect(d ? (t = d) && t.hasOwnProperty("current") ? d.current : d : F.current), I && e.setEvents({ compute: function (e, t) { var n = e[I + "X"], i = e[I + "Y"]; t.pointer.set(n / t.size.width * 2 - 1, -i / t.size.height * 2 + 1), t.raycaster.setFromCamera(t.pointer, t.camera) } }), null == S || S(e) } }), U.current.render(t.createElement(x, null, t.createElement(hv, { set: _ }, t.createElement(t.Suspense, { fallback: t.createElement(Iv, { set: L }) }, a))))) })), t.useEffect((function () { var e = M.current; if (e) return function () { return Cb(e) } }), []); var D = d ? "none" : "auto"; return t.createElement("div", (0, c.Z)({ ref: F, style: ln({ position: "relative", width: "100%", height: "100%", overflow: "hidden", pointerEvents: D }, l) }, R), t.createElement("div", { ref: k, style: { width: "100%", height: "100%" } }, t.createElement("canvas", { ref: M, style: { display: "block" } }, o))) })), tZ = t.forwardRef((function (e, n) { return t.createElement(UB, null, t.createElement(eZ, (0, c.Z)({}, e, { ref: n }))) })); function nZ() { var e = Object.create(null); function t(i, r) { var a = i.id, o = i.name, s = i.dependencies; void 0 === s && (s = []); var l = i.init; void 0 === l && (l = function () { }); var g = i.getTransferables; if (void 0 === g && (g = null), !e[a]) try { s = s.map((function (n) { return n && n.isWorkerModule && (t(n, (function (e) { if (e instanceof Error) throw e })), n = e[n.id].value), n })), l = n("<" + o + ">.init", l), g && (g = n("<" + o + ">.getTransferables", g)); var c = null; "function" === typeof l ? c = l.apply(void 0, s) : console.error("worker module init function failed to rehydrate"), e[a] = { id: a, value: c, getTransferables: g }, r(c) } catch (u) { u && u.noLog || console.error(u), r(u) } } function n(e, t) { var n = void 0; self.troikaDefine = function (e) { return n = e }; var i = URL.createObjectURL(new Blob(["/** " + e.replace(/\*/g, "") + " **/\n\ntroikaDefine(\n" + t + "\n)"], { type: "application/javascript" })); try { importScripts(i) } catch (r) { console.error(r) } return URL.revokeObjectURL(i), delete self.troikaDefine, n } self.addEventListener("message", (function (n) { var i = n.data, r = i.messageId, a = i.action, o = i.data; try { "registerModule" === a && t(o, (function (e) { e instanceof Error ? postMessage({ messageId: r, success: !1, error: e.message }) : postMessage({ messageId: r, success: !0, result: { isCallable: "function" === typeof e } }) })), "callModule" === a && function (t, n) { var i, r = t.id, a = t.args; e[r] && "function" === typeof e[r].value || n(new Error("Worker module " + r + ": not found or its 'init' did not return a function")); try { var o = (i = e[r]).value.apply(i, a); o && "function" === typeof o.then ? o.then(s, (function (e) { return n(e instanceof Error ? e : new Error("" + e)) })) : s(o) } catch (l) { n(l) } function s(t) { try { var i = e[r].getTransferables && e[r].getTransferables(t); i && Array.isArray(i) && i.length || (i = void 0), n(t, i) } catch (l) { console.error(l), n(l) } } }(o, (function (e, t) { e instanceof Error ? postMessage({ messageId: r, success: !1, error: e.message }) : postMessage({ messageId: r, success: !0, result: e }, t || void 0) })) } catch (s) { postMessage({ messageId: r, success: !1, error: s.stack }) } })) } var iZ = function () { var e = !1; if ("undefined" !== typeof window && "undefined" !== typeof window.document) try { new Worker(URL.createObjectURL(new Blob([""], { type: "application/javascript" }))).terminate(), e = !0 } catch (t) { console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: [" + t.message + "]") } return iZ = function () { return e }, e }, rZ = 0, aZ = 0, oZ = !1, sZ = Object.create(null), lZ = Object.create(null), gZ = Object.create(null); function cZ(e) { if ((!e || "function" !== typeof e.init) && !oZ) throw new Error("requires `options.init` function"); var t = e.dependencies, n = e.init, i = e.getTransferables, r = e.workerId; if (!iZ()) return function (e) { var t = function e() { for (var t = [], n = arguments.length; n--;)t[n] = arguments[n]; return e._getInitResult().then((function (e) { if ("function" === typeof e) return e.apply(void 0, t); throw new Error("Worker module function was called but `init` did not return a callable function") })) }; return t._getInitResult = function () { var n = e.dependencies, i = e.init; n = Array.isArray(n) ? n.map((function (e) { return e && e._getInitResult ? e._getInitResult() : e })) : []; var r = Promise.all(n).then((function (e) { return i.apply(null, e) })); return t._getInitResult = function () { return r }, r }, t }(e); null == r && (r = "#default"); var a = "workerModule" + ++rZ, o = e.name || a, s = null; function l() { for (var e = [], t = arguments.length; t--;)e[t] = arguments[t]; if (!s) { s = CZ(r, "registerModule", l.workerModuleData); (lZ[r] || (lZ[r] = new Set)).add((function e() { s = null, lZ[r].delete(e) })) } return s.then((function (t) { if (t.isCallable) return CZ(r, "callModule", { id: a, args: e }); throw new Error("Worker module function was called but `init` did not return a callable function") })) } return t = t && t.map((function (e) { return "function" !== typeof e || e.workerModuleData || (oZ = !0, e = cZ({ workerId: r, name: "<" + o + "> function dependency: " + e.name, init: "function(){return (\n" + uZ(e) + "\n)}" }), oZ = !1), e && e.workerModuleData && (e = e.workerModuleData), e })), l.workerModuleData = { isWorkerModule: !0, id: a, name: o, dependencies: t, init: uZ(n), getTransferables: i && uZ(i) }, l } function uZ(e) { var t = e.toString(); return !/^function/.test(t) && /^\w+\s*\(/.test(t) && (t = "function " + t), t } function CZ(e, t, n) { return new Promise((function (i, r) { var a = ++aZ; gZ[a] = function (e) { e.success ? i(e.result) : r(new Error("Error in worker " + t + " call: " + e.error)) }, function (e) { var t = sZ[e]; if (!t) { var n = uZ(nZ); (t = sZ[e] = new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: " + e.replace(/\*/g, "") + " **/\n\n;(" + n + ")()"], { type: "application/javascript" })))).onmessage = function (e) { var t = e.data, n = t.messageId, i = gZ[n]; if (!i) throw new Error("WorkerModule response with empty or unknown messageId"); delete gZ[n], i(t) } } return t }(e).postMessage({ messageId: a, action: t, data: n }) })) } function dZ() { var e = function (e) { function t(e, t, n, i, r, a, o, s) { var l = 1 - o; s.x = l * l * e + 2 * l * o * n + o * o * r, s.y = l * l * t + 2 * l * o * i + o * o * a } function n(e, t, n, i, r, a, o, s, l, g) { var c = 1 - l; g.x = c * c * c * e + 3 * c * c * l * n + 3 * c * l * l * r + l * l * l * o, g.y = c * c * c * t + 3 * c * c * l * i + 3 * c * l * l * a + l * l * l * s } function i(e, t) { for (var n, i, r, a, o, s = /([MLQCZ])([^MLQCZ]*)/g; n = s.exec(e);) { var l = n[2].replace(/^\s*|\s*$/g, "").split(/[,\s]+/).map((function (e) { return parseFloat(e) })); switch (n[1]) { case "M": a = i = l[0], o = r = l[1]; break; case "L": l[0] === a && l[1] === o || t("L", a, o, a = l[0], o = l[1]); break; case "Q": t("Q", a, o, a = l[2], o = l[3], l[0], l[1]); break; case "C": t("C", a, o, a = l[4], o = l[5], l[0], l[1], l[2], l[3]); break; case "Z": a === i && o === r || t("L", a, o, i, r) } } } function r(e, r, a) { void 0 === a && (a = 16); var o = { x: 0, y: 0 }; i(e, (function (e, i, s, l, g, c, u, C, d) { switch (e) { case "L": r(i, s, l, g); break; case "Q": for (var I = i, h = s, A = 1; A < a; A++)t(i, s, c, u, l, g, A / (a - 1), o), r(I, h, o.x, o.y), I = o.x, h = o.y; break; case "C": for (var p = i, f = s, m = 1; m < a; m++)n(i, s, c, u, C, d, l, g, m / (a - 1), o), r(p, f, o.x, o.y), p = o.x, f = o.y } })) } var a = "precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}", o = "precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}", s = new WeakMap, l = { premultipliedAlpha: !1, preserveDrawingBuffer: !0, antialias: !1, depth: !1 }; function g(e, t) { var n = e.getContext ? e.getContext("webgl", l) : e, i = s.get(n); if (!i) { var r = function (e) { var t = c[e]; if (!t && !(t = c[e] = n.getExtension(e))) throw new Error(e + " not supported"); return t }, a = function (e, t) { var i = n.createShader(t); return n.shaderSource(i, e), n.compileShader(i), i }, o = function () { c = {}, u = {}, C = {}, d = -1, I.length = 0 }, g = "undefined" !== typeof WebGL2RenderingContext && n instanceof WebGL2RenderingContext, c = {}, u = {}, C = {}, d = -1, I = []; n.canvas.addEventListener("webglcontextlost", (function (e) { o(), e.preventDefault() }), !1), s.set(n, i = { gl: n, isWebGL2: g, getExtension: r, withProgram: function (e, t, i, o) { if (!u[e]) { var s = {}, l = {}, c = n.createProgram(); n.attachShader(c, a(t, n.VERTEX_SHADER)), n.attachShader(c, a(i, n.FRAGMENT_SHADER)), n.linkProgram(c), u[e] = { program: c, transaction: function (e) { n.useProgram(c), e({ setUniform: function (e, t) { for (var i = [], r = arguments.length - 2; r-- > 0;)i[r] = arguments[r + 2]; var a = l[t] || (l[t] = n.getUniformLocation(c, t)); n["uniform" + e].apply(n, [a].concat(i)) }, setAttribute: function (e, t, i, a, o) { var l = s[e]; l || (l = s[e] = { buf: n.createBuffer(), loc: n.getAttribLocation(c, e), data: null }), n.bindBuffer(n.ARRAY_BUFFER, l.buf), n.vertexAttribPointer(l.loc, t, n.FLOAT, !1, 0, 0), n.enableVertexAttribArray(l.loc), g ? n.vertexAttribDivisor(l.loc, a) : r("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc, a), o !== l.data && (n.bufferData(n.ARRAY_BUFFER, o, i), l.data = o) } }) } } } u[e].transaction(o) }, withTexture: function (e, t) { d++; try { n.activeTexture(n.TEXTURE0 + d); var i = C[e]; i || (i = C[e] = n.createTexture(), n.bindTexture(n.TEXTURE_2D, i), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_MIN_FILTER, n.NEAREST), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_MAG_FILTER, n.NEAREST)), n.bindTexture(n.TEXTURE_2D, i), t(i, d) } finally { d-- } }, withTextureFramebuffer: function (e, t, i) { var r = n.createFramebuffer(); I.push(r), n.bindFramebuffer(n.FRAMEBUFFER, r), n.activeTexture(n.TEXTURE0 + t), n.bindTexture(n.TEXTURE_2D, e), n.framebufferTexture2D(n.FRAMEBUFFER, n.COLOR_ATTACHMENT0, n.TEXTURE_2D, e, 0); try { i(r) } finally { n.deleteFramebuffer(r), n.bindFramebuffer(n.FRAMEBUFFER, I[--I.length - 1] || null) } }, handleContextLoss: o }) } t(i) } function c(e, t, n, i, r, s, l, c) { void 0 === l && (l = 15), void 0 === c && (c = null), g(e, (function (e) { var g = e.gl, u = e.withProgram; (0, e.withTexture)("copy", (function (e, C) { g.texImage2D(g.TEXTURE_2D, 0, g.RGBA, r, s, 0, g.RGBA, g.UNSIGNED_BYTE, t), u("copy", a, o, (function (e) { var t = e.setUniform; (0, e.setAttribute)("aUV", 2, g.STATIC_DRAW, 0, new Float32Array([0, 0, 2, 0, 0, 2])), t("1i", "image", C), g.bindFramebuffer(g.FRAMEBUFFER, c || null), g.disable(g.BLEND), g.colorMask(8 & l, 4 & l, 2 & l, 1 & l), g.viewport(n, i, r, s), g.scissor(n, i, r, s), g.drawArrays(g.TRIANGLES, 0, 3) })) })) })) } var u = Object.freeze({ __proto__: null, withWebGLContext: g, renderImageData: c, resizeWebGLCanvasWithoutClearing: function (e, t, n) { var i = e.width, r = e.height; g(e, (function (a) { var o = a.gl, s = new Uint8Array(i * r * 4); o.readPixels(0, 0, i, r, o.RGBA, o.UNSIGNED_BYTE, s), e.width = t, e.height = n, c(o, s, 0, 0, i, r) })) } }); function C(e, t, n, i, a, o) { void 0 === o && (o = 1); var s = new Uint8Array(e * t), l = i[2] - i[0], g = i[3] - i[1], c = []; r(n, (function (e, t, n, i) { c.push({ x1: e, y1: t, x2: n, y2: i, minX: Math.min(e, n), minY: Math.min(t, i), maxX: Math.max(e, n), maxY: Math.max(t, i) }) })), c.sort((function (e, t) { return e.maxX - t.maxX })); for (var u = 0; u < e; u++)for (var C = 0; C < t; C++) { var d = A(i[0] + l * (u + .5) / e, i[1] + g * (C + .5) / t), I = Math.pow(1 - Math.abs(d) / a, o) / 2; d < 0 && (I = 1 - I), I = Math.max(0, Math.min(255, Math.round(255 * I))), s[C * e + u] = I } return s; function A(e, t) { for (var n = 1 / 0, i = 1 / 0, r = c.length; r--;) { var a = c[r]; if (a.maxX + i <= e) break; if (e + i > a.minX && t - i < a.maxY && t + i > a.minY) { var o = h(e, t, a.x1, a.y1, a.x2, a.y2); o < n && (n = o, i = Math.sqrt(n)) } } return function (e, t) { for (var n = 0, i = c.length; i--;) { var r = c[i]; if (r.maxX <= e) break; r.y1 > t !== r.y2 > t && e < (r.x2 - r.x1) * (t - r.y1) / (r.y2 - r.y1) + r.x1 && (n += r.y1 < r.y2 ? 1 : -1) } return 0 !== n }(e, t) && (i = -i), i } } function d(e, t, n, i, r, a, o, s, l, g) { void 0 === a && (a = 1), void 0 === s && (s = 0), void 0 === l && (l = 0), void 0 === g && (g = 0), I(e, t, n, i, r, a, o, null, s, l, g) } function I(e, t, n, i, r, a, o, s, l, g, u) { void 0 === a && (a = 1), void 0 === l && (l = 0), void 0 === g && (g = 0), void 0 === u && (u = 0); for (var d = C(e, t, n, i, r, a), I = new Uint8Array(4 * d.length), h = 0; h < d.length; h++)I[4 * h + u] = d[h]; c(o, I, l, g, e, t, 1 << 3 - u, s) } function h(e, t, n, i, r, a) { var o = r - n, s = a - i, l = o * o + s * s, g = l ? Math.max(0, Math.min(1, ((e - n) * o + (t - i) * s) / l)) : 0, c = e - (n + g * o), u = t - (i + g * s); return c * c + u * u } var A = Object.freeze({ __proto__: null, generate: C, generateIntoCanvas: d, generateIntoFramebuffer: I }), p = "precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}", f = "precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}", m = "precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}", v = new Float32Array([0, 0, 2, 0, 0, 2]), b = null, y = !1, G = {}, B = new WeakMap; function Z(e) { if (!y && !x(e)) throw new Error("WebGL generation not supported") } function w(e, t, n, i, r, a, o) { if (void 0 === a && (a = 1), void 0 === o && (o = null), !o && !(o = b)) { var s = "function" === typeof OffscreenCanvas ? new OffscreenCanvas(1, 1) : "undefined" !== typeof document ? document.createElement("canvas") : null; if (!s) throw new Error("OffscreenCanvas or DOM canvas not supported"); o = b = s.getContext("webgl", { depth: !1 }) } Z(o); var l = new Uint8Array(e * t * 4); g(o, (function (o) { var s = o.gl, g = o.withTexture, c = o.withTextureFramebuffer; g("readable", (function (o, g) { s.texImage2D(s.TEXTURE_2D, 0, s.RGBA, e, t, 0, s.RGBA, s.UNSIGNED_BYTE, null), c(o, g, (function (o) { R(e, t, n, i, r, a, s, o, 0, 0, 0), s.readPixels(0, 0, e, t, s.RGBA, s.UNSIGNED_BYTE, l) })) })) })); for (var c = new Uint8Array(e * t), u = 0, C = 0; u < l.length; u += 4)c[C++] = l[u]; return c } function S(e, t, n, i, r, a, o, s, l, g) { void 0 === a && (a = 1), void 0 === s && (s = 0), void 0 === l && (l = 0), void 0 === g && (g = 0), R(e, t, n, i, r, a, o, null, s, l, g) } function R(e, t, n, i, o, s, l, c, u, C, d) { void 0 === s && (s = 1), void 0 === u && (u = 0), void 0 === C && (C = 0), void 0 === d && (d = 0), Z(l); var I = []; r(n, (function (e, t, n, i) { I.push(e, t, n, i) })), I = new Float32Array(I), g(l, (function (n) { var r = n.gl, l = n.isWebGL2, g = n.getExtension, h = n.withProgram, A = n.withTexture, b = n.withTextureFramebuffer, y = n.handleContextLoss; if (A("rawDistances", (function (n, A) { e === n._lastWidth && t === n._lastHeight || r.texImage2D(r.TEXTURE_2D, 0, r.RGBA, n._lastWidth = e, n._lastHeight = t, 0, r.RGBA, r.UNSIGNED_BYTE, null), h("main", p, f, (function (a) { var c = a.setAttribute, u = a.setUniform, C = !l && g("ANGLE_instanced_arrays"), d = !l && g("EXT_blend_minmax"); c("aUV", 2, r.STATIC_DRAW, 0, v), c("aLineSegment", 4, r.DYNAMIC_DRAW, 1, I), u.apply(void 0, ["4f", "uGlyphBounds"].concat(i)), u("1f", "uMaxDistance", o), u("1f", "uExponent", s), b(n, A, (function (n) { r.enable(r.BLEND), r.colorMask(!0, !0, !0, !0), r.viewport(0, 0, e, t), r.scissor(0, 0, e, t), r.blendFunc(r.ONE, r.ONE), r.blendEquationSeparate(r.FUNC_ADD, l ? r.MAX : d.MAX_EXT), r.clear(r.COLOR_BUFFER_BIT), l ? r.drawArraysInstanced(r.TRIANGLES, 0, 3, I.length / 4) : C.drawArraysInstancedANGLE(r.TRIANGLES, 0, 3, I.length / 4) })) })), h("post", a, m, (function (n) { n.setAttribute("aUV", 2, r.STATIC_DRAW, 0, v), n.setUniform("1i", "tex", A), r.bindFramebuffer(r.FRAMEBUFFER, c), r.disable(r.BLEND), r.colorMask(0 === d, 1 === d, 2 === d, 3 === d), r.viewport(u, C, e, t), r.scissor(u, C, e, t), r.drawArrays(r.TRIANGLES, 0, 3) })) })), r.isContextLost()) throw y(), new Error("webgl context lost") })) } function x(e) { var t = e && e !== b ? e.canvas || e : G, n = B.get(t); if (void 0 === n) { y = !0; var i = null; try { var r = [97, 106, 97, 61, 99, 137, 118, 80, 80, 118, 137, 99, 61, 97, 106, 97], a = w(4, 4, "M8,8L16,8L24,24L16,24Z", [0, 0, 32, 32], 24, 1, e); (n = a && r.length === a.length && a.every((function (e, t) { return e === r[t] }))) || (i = "bad trial run results", console.info(r, a)) } catch (o) { n = !1, i = o.message } i && console.warn("WebGL SDF generation not supported:", i), y = !1, B.set(t, n) } return n } var W = Object.freeze({ __proto__: null, generate: w, generateIntoCanvas: S, generateIntoFramebuffer: R, isSupported: x }); return e.forEachPathCommand = i, e.generate = function (e, t, n, i, r, a) { void 0 === r && (r = Math.max(i[2] - i[0], i[3] - i[1]) / 2), void 0 === a && (a = 1); try { return w.apply(W, arguments) } catch (o) { return console.info("WebGL SDF generation failed, falling back to JS", o), C.apply(A, arguments) } }, e.generateIntoCanvas = function (e, t, n, i, r, a, o, s, l, g) { void 0 === r && (r = Math.max(i[2] - i[0], i[3] - i[1]) / 2), void 0 === a && (a = 1), void 0 === s && (s = 0), void 0 === l && (l = 0), void 0 === g && (g = 0); try { return S.apply(W, arguments) } catch (c) { return console.info("WebGL SDF generation failed, falling back to JS", c), d.apply(A, arguments) } }, e.javascript = A, e.pathToLineSegments = r, e.webgl = W, e.webglUtils = u, Object.defineProperty(e, "__esModule", { value: !0 }), e }({}); return e } var IZ = function () { var e = function (e) { var t = { R: "13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73", EN: "1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9", ES: "17,2,6dp+1,f+1,av,16vr,mx+1,4o,2", ET: "z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj", AN: "16o+5,2j+9,2+1,35,ed,1ff2+9,87+u", CS: "18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b", B: "a,3,f+2,2v,690", S: "9,2,k", WS: "c,k,4f4,1vk+a,u,1j,335", ON: "x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i", BN: "0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1", NSM: "lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n", AL: "16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d", LRO: "6ct", RLO: "6cu", LRE: "6cq", RLE: "6cr", PDF: "6cs", LRI: "6ee", RLI: "6ef", FSI: "6eg", PDI: "6eh" }, n = {}, i = {}; n.L = 1, i[1] = "L", Object.keys(t).forEach((function (e, t) { n[e] = 1 << t + 1, i[n[e]] = e })), Object.freeze(n); var r = n.LRI | n.RLI | n.FSI, a = n.L | n.R | n.AL, o = n.B | n.S | n.WS | n.ON | n.FSI | n.LRI | n.RLI | n.PDI, s = n.BN | n.RLE | n.LRE | n.RLO | n.LRO | n.PDF, l = n.S | n.WS | n.B | r | n.PDI | s, g = null; function c(e) { return function () { if (!g) { g = new Map; var e = function (e) { if (t.hasOwnProperty(e)) { var i = 0; t[e].split(",").forEach((function (t) { var r = t.split("+"), a = r[0], o = r[1]; a = parseInt(a, 36), o = o ? parseInt(o, 36) : 0, g.set(i += a, n[e]); for (var s = 0; s < o; s++)g.set(++i, n[e]) })) } }; for (var i in t) e(i) } }(), g.get(e.codePointAt(0)) || n.L } var u, C, d, I = { pairs: "14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1", canonical: "6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye" }; function h(e, t) { var n, i = 0, r = new Map, a = t && new Map; return e.split(",").forEach((function e(o) { if (-1 !== o.indexOf("+")) for (var s = +o; s--;)e(n); else { n = o; var l = o.split(">"), g = l[0], c = l[1]; g = String.fromCodePoint(i += parseInt(g, 36)), c = String.fromCodePoint(i += parseInt(c, 36)), r.set(g, c), t && a.set(c, g) } })), { map: r, reverseMap: a } } function A() { if (!u) { var e = h(I.pairs, !0), t = e.map, n = e.reverseMap; u = t, C = n, d = h(I.canonical, !1).map } } function p(e) { return A(), u.get(e) || null } function f(e) { return A(), C.get(e) || null } function m(e) { return A(), d.get(e) || null } var v = n.L, b = n.R, y = n.EN, G = n.ES, B = n.ET, Z = n.AN, w = n.CS, S = n.B, R = n.S, x = n.ON, W = n.BN, V = n.NSM, k = n.AL, H = n.LRO, M = n.RLO, F = n.LRE, N = n.RLE, X = n.PDF, Y = n.LRI, K = n.RLI, L = n.FSI, z = n.PDI; var E, T = "14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1"; function _(e) { return function () { if (!E) { var e = h(T, !0), t = e.map; e.reverseMap.forEach((function (e, n) { t.set(n, e) })), E = t } }(), E.get(e) || null } function U(e, t, n, i) { var r = e.length; n = Math.max(0, null == n ? 0 : +n), i = Math.min(r - 1, null == i ? r - 1 : +i); var a = []; return t.paragraphs.forEach((function (r) { var o = Math.max(n, r.start), s = Math.min(i, r.end); if (o < s) { for (var g = t.levels.slice(o, s + 1), u = s; u >= o && c(e[u]) & l; u--)g[u] = r.level; for (var C = r.level, d = 1 / 0, I = 0; I < g.length; I++) { var h = g[I]; h > C && (C = h), h < d && (d = 1 | h) } for (var A = C; A >= d; A--)for (var p = 0; p < g.length; p++)if (g[p] >= A) { for (var f = p; p + 1 < g.length && g[p + 1] >= A;)p++; p > f && a.push([f + o, p + o]) } } })), a } function D(e, t, n, i) { for (var r = U(e, t, n, i), a = [], o = 0; o < e.length; o++)a[o] = o; return r.forEach((function (e) { for (var t = e[0], n = e[1], i = a.slice(t, n + 1), r = i.length; r--;)a[n - r] = i[r] })), a } return e.closingToOpeningBracket = f, e.getBidiCharType = c, e.getBidiCharTypeName = function (e) { return i[c(e)] }, e.getCanonicalBracket = m, e.getEmbeddingLevels = function (e, t) { for (var n = new Uint32Array(e.length), i = 0; i < e.length; i++)n[i] = c(e[i]); var g = new Map; function u(e, t) { var i = n[e]; n[e] = t, g.set(i, g.get(i) - 1), i & o && g.set(o, g.get(o) - 1), g.set(t, (g.get(t) || 0) + 1), t & o && g.set(o, (g.get(o) || 0) + 1) } for (var C = new Uint8Array(e.length), d = new Map, I = [], h = null, A = 0; A < e.length; A++)h || I.push(h = { start: A, end: e.length - 1, level: "rtl" === t ? 1 : "ltr" === t ? 0 : zt(A, !1) }), n[A] & S && (h.end = A, h = null); for (var E = N | F | M | H | r | z | X | S, T = function (e) { return e + (1 & e ? 1 : 2) }, _ = function (e) { return e + (1 & e ? 2 : 1) }, U = 0; U < I.length; U++) { var D = [{ _level: (h = I[U]).level, _override: 0, _isolate: 0 }], P = void 0, J = 0, O = 0, j = 0; g.clear(); for (var Q = h.start; Q <= h.end; Q++) { var q = n[Q]; if (P = D[D.length - 1], g.set(q, (g.get(q) || 0) + 1), q & o && g.set(o, (g.get(o) || 0) + 1), q & E) if (q & (N | F)) { C[Q] = P._level; var $ = (q === N ? _ : T)(P._level); $ <= 125 && !J && !O ? D.push({ _level: $, _override: 0, _isolate: 0 }) : J || O++ } else if (q & (M | H)) { C[Q] = P._level; var ee = (q === M ? _ : T)(P._level); ee <= 125 && !J && !O ? D.push({ _level: ee, _override: q & M ? b : v, _isolate: 0 }) : J || O++ } else if (q & r) { q & L && (q = 1 === zt(Q + 1, !0) ? K : Y), C[Q] = P._level, P._override && u(Q, P._override); var te = (q === K ? _ : T)(P._level); te <= 125 && 0 === J && 0 === O ? (j++, D.push({ _level: te, _override: 0, _isolate: 1, _isolInitIndex: Q })) : J++ } else if (q & z) { if (J > 0) J--; else if (j > 0) { for (O = 0; !D[D.length - 1]._isolate;)D.pop(); var ne = D[D.length - 1]._isolInitIndex; null != ne && (d.set(ne, Q), d.set(Q, ne)), D.pop(), j-- } P = D[D.length - 1], C[Q] = P._level, P._override && u(Q, P._override) } else q & X ? (0 === J && (O > 0 ? O-- : !P._isolate && D.length > 1 && (D.pop(), P = D[D.length - 1])), C[Q] = P._level) : q & S && (C[Q] = h.level); else C[Q] = P._level, P._override && q !== W && u(Q, P._override) } for (var ie = [], re = null, ae = h.start; ae <= h.end; ae++) { var oe = n[ae]; if (!(oe & s)) { var se = C[ae], le = oe & r, ge = oe === z; re && se === re._level ? (re._end = ae, re._endsWithIsolInit = le) : ie.push(re = { _start: ae, _end: ae, _level: se, _startsWithPDI: ge, _endsWithIsolInit: le }) } } for (var ce = [], ue = 0; ue < ie.length; ue++) { var Ce = ie[ue]; if (!Ce._startsWithPDI || Ce._startsWithPDI && !d.has(Ce._start)) { for (var de = [re = Ce], Ie = void 0; re && re._endsWithIsolInit && null != (Ie = d.get(re._end));)for (var he = ue + 1; he < ie.length; he++)if (ie[he]._start === Ie) { de.push(re = ie[he]); break } for (var Ae = [], pe = 0; pe < de.length; pe++)for (var fe = de[pe], me = fe._start; me <= fe._end; me++)Ae.push(me); for (var ve = C[Ae[0]], be = h.level, ye = Ae[0] - 1; ye >= 0; ye--)if (!(n[ye] & s)) { be = C[ye]; break } var Ge = Ae[Ae.length - 1], Be = C[Ge], Ze = h.level; if (!(n[Ge] & r)) for (var we = Ge + 1; we <= h.end; we++)if (!(n[we] & s)) { Ze = C[we]; break } ce.push({ _seqIndices: Ae, _sosType: Math.max(be, ve) % 2 ? b : v, _eosType: Math.max(Ze, Be) % 2 ? b : v }) } } for (var Se = 0; Se < ce.length; Se++) { var Re = ce[Se], xe = Re._seqIndices, We = Re._sosType, Ve = Re._eosType, ke = 1 & C[xe[0]] ? b : v; if (g.get(V)) for (var He = 0; He < xe.length; He++) { var Me = xe[He]; if (n[Me] & V) { for (var Fe = We, Ne = He - 1; Ne >= 0; Ne--)if (!(n[xe[Ne]] & s)) { Fe = n[xe[Ne]]; break } u(Me, Fe & (r | z) ? x : Fe) } } if (g.get(y)) for (var Xe = 0; Xe < xe.length; Xe++) { var Ye = xe[Xe]; if (n[Ye] & y) for (var Ke = Xe - 1; Ke >= -1; Ke--) { var Le = -1 === Ke ? We : n[xe[Ke]]; if (Le & a) { Le === k && u(Ye, Z); break } } } if (g.get(k)) for (var ze = 0; ze < xe.length; ze++) { var Ee = xe[ze]; n[Ee] & k && u(Ee, b) } if (g.get(G) || g.get(w)) for (var Te = 1; Te < xe.length - 1; Te++) { var _e = xe[Te]; if (n[_e] & (G | w)) { for (var Ue = 0, De = 0, Pe = Te - 1; Pe >= 0 && (Ue = n[xe[Pe]]) & s; Pe--); for (var Je = Te + 1; Je < xe.length && (De = n[xe[Je]]) & s; Je++); Ue === De && (n[_e] === G ? Ue === y : Ue & (y | Z)) && u(_e, Ue) } } if (g.get(y)) for (var Oe = 0; Oe < xe.length; Oe++) { var je = xe[Oe]; if (n[je] & y) { for (var Qe = Oe - 1; Qe >= 0 && n[xe[Qe]] & (B | s); Qe--)u(xe[Qe], y); for (Oe++; Oe < xe.length && n[xe[Oe]] & (B | s | y); Oe++)n[xe[Oe]] !== y && u(xe[Oe], y) } } if (g.get(B) || g.get(G) || g.get(w)) for (var qe = 0; qe < xe.length; qe++) { var $e = xe[qe]; if (n[$e] & (B | G | w)) { u($e, x); for (var et = qe - 1; et >= 0 && n[xe[et]] & s; et--)u(xe[et], x); for (var tt = qe + 1; tt < xe.length && n[xe[tt]] & s; tt++)u(xe[tt], x) } } if (g.get(y)) for (var nt = 0, it = We; nt < xe.length; nt++) { var rt = xe[nt], at = n[rt]; at & y ? it === v && u(rt, v) : at & a && (it = at) } if (g.get(o)) { for (var ot = b | y | Z, st = ot | v, lt = [], gt = [], ct = 0; ct < xe.length; ct++)if (n[xe[ct]] & o) { var ut = e[xe[ct]], Ct = void 0; if (null !== p(ut)) { if (!(gt.length < 63)) break; gt.push({ char: ut, seqIndex: ct }) } else if (null !== (Ct = f(ut))) for (var dt = gt.length - 1; dt >= 0; dt--) { var It = gt[dt].char; if (It === Ct || It === f(m(ut)) || p(m(It)) === ut) { lt.push([gt[dt].seqIndex, ct]), gt.length = dt; break } } } lt.sort((function (e, t) { return e[0] - t[0] })); for (var ht = 0; ht < lt.length; ht++) { for (var At = lt[ht], pt = At[0], ft = At[1], mt = !1, vt = 0, bt = pt + 1; bt < ft; bt++) { var yt = xe[bt]; if (n[yt] & st) { mt = !0; var Gt = n[yt] & ot ? b : v; if (Gt === ke) { vt = Gt; break } } } if (mt && !vt) { vt = We; for (var Bt = pt - 1; Bt >= 0; Bt--) { var Zt = xe[Bt]; if (n[Zt] & st) { var wt = n[Zt] & ot ? b : v; vt = wt !== ke ? wt : ke; break } } } if (vt) { if (n[xe[pt]] = n[xe[ft]] = vt, vt !== ke) for (var St = pt + 1; St < xe.length; St++)if (!(n[xe[St]] & s)) { c(e[xe[St]]) & V && (n[xe[St]] = vt); break } if (vt !== ke) for (var Rt = ft + 1; Rt < xe.length; Rt++)if (!(n[xe[Rt]] & s)) { c(e[xe[Rt]]) & V && (n[xe[Rt]] = vt); break } } } for (var xt = 0; xt < xe.length; xt++)if (n[xe[xt]] & o) { for (var Wt = xt, Vt = xt, kt = We, Ht = xt - 1; Ht >= 0; Ht--) { if (!(n[xe[Ht]] & s)) { kt = n[xe[Ht]] & ot ? b : v; break } Wt = Ht } for (var Mt = Ve, Ft = xt + 1; Ft < xe.length; Ft++) { if (!(n[xe[Ft]] & (o | s))) { Mt = n[xe[Ft]] & ot ? b : v; break } Vt = Ft } for (var Nt = Wt; Nt <= Vt; Nt++)n[xe[Nt]] = kt === Mt ? kt : ke; xt = Vt } } } for (var Xt = h.start; Xt <= h.end; Xt++) { var Yt = C[Xt], Kt = n[Xt]; if (1 & Yt ? Kt & (v | y | Z) && C[Xt]++ : Kt & b ? C[Xt]++ : Kt & (Z | y) && (C[Xt] += 2), Kt & s && (C[Xt] = 0 === Xt ? h.level : C[Xt - 1]), Xt === h.end || c(e[Xt]) & (R | S)) for (var Lt = Xt; Lt >= 0 && c(e[Lt]) & l; Lt--)C[Lt] = h.level } } return { levels: C, paragraphs: I }; function zt(t, i) { for (var a = t; a < e.length; a++) { var o = n[a]; if (o & (b | k)) return 1; if (o & (S | v) || i && o === z) return 0; if (o & r) { var s = Et(a); a = -1 === s ? e.length : s } } return 0 } function Et(t) { for (var i = 1, a = t + 1; a < e.length; a++) { var o = n[a]; if (o & S) break; if (o & z) { if (0 === --i) return a } else o & r && i++ } return -1 } }, e.getMirroredCharacter = _, e.getMirroredCharactersMap = function (e, t, n, i) { var r = e.length; n = Math.max(0, null == n ? 0 : +n), i = Math.min(r - 1, null == i ? r - 1 : +i); for (var a = new Map, o = n; o <= i; o++)if (1 & t[o]) { var s = _(e[o]); null !== s && a.set(o, s) } return a }, e.getReorderSegments = U, e.getReorderedIndices = D, e.getReorderedString = function (e, t, n, i) { var r = D(e, t, n, i), a = [].concat(e); return r.forEach((function (n, i) { a[i] = (1 & t.levels[n] ? _(e[n]) : null) || e[n] })), a.join("") }, e.openingToClosingBracket = p, Object.defineProperty(e, "__esModule", { value: !0 }), e }({}); return e }, hZ = /\bvoid\s+main\s*\(\s*\)\s*{/g; function AZ(e) { return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm, (function (e, t) { var n = Hu[t]; return n ? AZ(n) : e })) } for (var pZ = [], fZ = 0; fZ < 256; fZ++)pZ[fZ] = (fZ < 16 ? "0" : "") + fZ.toString(16); var mZ = Object.assign || function () { for (var e = arguments[0], t = 1, n = arguments.length; t < n; t++) { var i = arguments[t]; if (i) for (var r in i) Object.prototype.hasOwnProperty.call(i, r) && (e[r] = i[r]) } return e }, vZ = Date.now(), bZ = new WeakMap, yZ = new Map, GZ = 1e10; function BZ(e, t) { var n = function (e) { var t = JSON.stringify(e, wZ), n = RZ.get(t); null == n && RZ.set(t, n = ++SZ); return n }(t), i = bZ.get(e); if (i || bZ.set(e, i = Object.create(null)), i[n]) return new i[n]; var r = "_onBeforeCompile".concat(n), a = function (i, a) { e.onBeforeCompile.call(this, i, a); var o = this.customProgramCacheKey() + "|" + i.vertexShader + "|" + i.fragmentShader, s = yZ[o]; if (!s) { var l = function (e, t, n, i) { var r = t.vertexShader, a = t.fragmentShader, o = n.vertexDefs, s = n.vertexMainIntro, l = n.vertexMainOutro, g = n.vertexTransform, c = n.fragmentDefs, u = n.fragmentMainIntro, C = n.fragmentMainOutro, d = n.fragmentColorTransform, I = n.customRewriter, h = n.timeUniform; o = o || "", s = s || "", l = l || "", c = c || "", u = u || "", C = C || "", (g || I) && (r = AZ(r)); (d || I) && (a = AZ(a = a.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm, "\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"))); if (I) { var A = I({ vertexShader: r, fragmentShader: a }); r = A.vertexShader, a = A.fragmentShader } if (d) { var p = []; a = a.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm, (function (e) { return p.push(e), "" })), C = "".concat(d, "\n").concat(p.join("\n"), "\n").concat(C) } if (h) { var f = "\nuniform float ".concat(h, ";\n"); o = f + o, c = f + c } g && (r = "vec3 troika_position_".concat(i, ";\nvec3 troika_normal_").concat(i, ";\nvec2 troika_uv_").concat(i, ";\n").concat(r, "\n"), o = "".concat(o, "\nvoid troikaVertexTransform").concat(i, "(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ").concat(g, "\n}\n"), s = "\ntroika_position_".concat(i, " = vec3(position);\ntroika_normal_").concat(i, " = vec3(normal);\ntroika_uv_").concat(i, " = vec2(uv);\ntroikaVertexTransform").concat(i, "(troika_position_").concat(i, ", troika_normal_").concat(i, ", troika_uv_").concat(i, ");\n").concat(s, "\n"), r = r.replace(/\b(position|normal|uv)\b/g, (function (e, t, n, r) { return /\battribute\s+vec[23]\s+$/.test(r.substr(0, n)) ? t : "troika_".concat(t, "_").concat(i) })), e.map && e.map.channel > 0 || (r = r.replace(/\bMAP_UV\b/g, "troika_uv_".concat(i)))); return r = ZZ(r, i, o, s, l), a = ZZ(a, i, c, u, C), { vertexShader: r, fragmentShader: a } }(this, i, t, n); s = yZ[o] = l } i.vertexShader = s.vertexShader, i.fragmentShader = s.fragmentShader, mZ(i.uniforms, this.uniforms), t.timeUniform && (i.uniforms[t.timeUniform] = { get value() { return Date.now() - vZ } }), this[r] && this[r](i) }, o = function () { return s(t.chained ? e : e.clone()) }, s = function (i) { var r = Object.create(i, l); return Object.defineProperty(r, "baseMaterial", { value: e }), Object.defineProperty(r, "id", { value: GZ++ }), r.uuid = function () { var e = 4294967295 * Math.random() | 0, t = 4294967295 * Math.random() | 0, n = 4294967295 * Math.random() | 0, i = 4294967295 * Math.random() | 0; return (pZ[255 & e] + pZ[e >> 8 & 255] + pZ[e >> 16 & 255] + pZ[e >> 24 & 255] + "-" + pZ[255 & t] + pZ[t >> 8 & 255] + "-" + pZ[t >> 16 & 15 | 64] + pZ[t >> 24 & 255] + "-" + pZ[63 & n | 128] + pZ[n >> 8 & 255] + "-" + pZ[n >> 16 & 255] + pZ[n >> 24 & 255] + pZ[255 & i] + pZ[i >> 8 & 255] + pZ[i >> 16 & 255] + pZ[i >> 24 & 255]).toUpperCase() }(), r.uniforms = mZ({}, i.uniforms, t.uniforms), r.defines = mZ({}, i.defines, t.defines), r.defines["TROIKA_DERIVED_MATERIAL_".concat(n)] = "", r.extensions = mZ({}, i.extensions, t.extensions), r._listeners = void 0, r }, l = { constructor: { value: o }, isDerivedMaterial: { value: !0 }, customProgramCacheKey: { writable: !0, configurable: !0, value: function () { return e.customProgramCacheKey() + "|" + n } }, onBeforeCompile: { get: function () { return a }, set: function (e) { this[r] = e } }, copy: { writable: !0, configurable: !0, value: function (t) { return e.copy.call(this, t), e.isShaderMaterial || e.isDerivedMaterial || (mZ(this.extensions, t.extensions), mZ(this.defines, t.defines), mZ(this.uniforms, hu.clone(t.uniforms))), this } }, clone: { writable: !0, configurable: !0, value: function () { var t = new e.constructor; return s(t).copy(this) } }, getDepthMaterial: { writable: !0, configurable: !0, value: function () { var n = this._depthMaterial; return n || ((n = this._depthMaterial = BZ(e.isDerivedMaterial ? e.getDepthMaterial() : new Jd({ depthPacking: ss }), t)).defines.IS_DEPTH_MATERIAL = "", n.uniforms = this.uniforms), n } }, getDistanceMaterial: { writable: !0, configurable: !0, value: function () { var n = this._distanceMaterial; return n || ((n = this._distanceMaterial = BZ(e.isDerivedMaterial ? e.getDistanceMaterial() : new Od, t)).defines.IS_DISTANCE_MATERIAL = "", n.uniforms = this.uniforms), n } }, dispose: { writable: !0, configurable: !0, value: function () { var t = this._depthMaterial, n = this._distanceMaterial; t && t.dispose(), n && n.dispose(), e.dispose.call(this) } } }; return i[n] = o, new o } function ZZ(e, t, n, i, r) { return (i || r || n) && (e = e.replace(hZ, "\n".concat(n, "\nvoid troikaOrigMain").concat(t, "() {")), e += "\nvoid main() {\n  ".concat(i, "\n  troikaOrigMain").concat(t, "();\n  ").concat(r, "\n}")), e } function wZ(e, t) { return "uniforms" === e ? void 0 : "function" === typeof t ? t.toString() : t } var SZ = 0, RZ = new Map; var xZ, WZ = function () { return (self.performance || Date).now() }, VZ = dZ(); var kZ = [], HZ = 0; function MZ() { for (var e = WZ(); kZ.length && WZ() - e < 5;)kZ.shift()(); HZ = kZ.length ? setTimeout(MZ, 0) : 0 } var FZ = function () { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; return new Promise((function (e, n) { kZ.push((function () { var i = WZ(); try { var r; (r = VZ.webgl).generateIntoCanvas.apply(r, t), e({ timing: WZ() - i }) } catch (a) { n(a) } })), HZ || (HZ = setTimeout(MZ, 0)) })) }, NZ = 4, XZ = 2e3, YZ = {}, KZ = 0; function LZ(e, t, n, i, r, a, o, s, l, g) { var c = "TroikaTextSDFGenerator_JS_" + KZ++ % NZ, u = YZ[c]; return u || (u = YZ[c] = { workerModule: cZ({ name: c, workerId: c, dependencies: [dZ, WZ], init: function (e, t) { var n = e().javascript.generate; return function () { var e = t(); return { textureData: n.apply(void 0, arguments), timing: t() - e } } }, getTransferables: function (e) { return [e.textureData.buffer] } }), requests: 0, idleTimer: null }), u.requests++, clearTimeout(u.idleTimer), u.workerModule(e, t, n, i, r, a).then((function (n) { for (var i = n.textureData, r = n.timing, a = WZ(), C = new Uint8Array(4 * i.length), d = 0; d < i.length; d++)C[4 * d + g] = i[d]; return VZ.webglUtils.renderImageData(o, C, s, l, e, t, 1 << 3 - g), r += WZ() - a, 0 === --u.requests && (u.idleTimer = setTimeout((function () { !function (e) { lZ[e] && lZ[e].forEach((function (e) { e() })), sZ[e] && (sZ[e].terminate(), delete sZ[e]) }(c) }), XZ)), { timing: r } })) } var zZ = VZ.webglUtils.resizeWebGLCanvasWithoutClearing; var EZ = cZ({ name: "Typr Font Parser", dependencies: [function () { return "undefined" == typeof window && (self.window = self), function (e) { var t = { parse: function (e) { var n = t._bin, i = new Uint8Array(e); if ("ttcf" == n.readASCII(i, 0, 4)) { var r = 4; n.readUshort(i, r), r += 2, n.readUshort(i, r), r += 2; var a = n.readUint(i, r); r += 4; for (var o = [], s = 0; s < a; s++) { var l = n.readUint(i, r); r += 4, o.push(t._readFont(i, l)) } return o } return [t._readFont(i, 0)] }, _readFont: function (e, n) { var i = t._bin, r = n; i.readFixed(e, n), n += 4; var a = i.readUshort(e, n); n += 2, i.readUshort(e, n), n += 2, i.readUshort(e, n), n += 2, i.readUshort(e, n), n += 2; for (var o = ["cmap", "head", "hhea", "maxp", "hmtx", "name", "OS/2", "post", "loca", "glyf", "kern", "CFF ", "GPOS", "GSUB", "SVG "], s = { _data: e, _offset: r }, l = {}, g = 0; g < a; g++) { var c = i.readASCII(e, n, 4); n += 4, i.readUint(e, n), n += 4; var u = i.readUint(e, n); n += 4; var C = i.readUint(e, n); n += 4, l[c] = { offset: u, length: C } } for (g = 0; g < o.length; g++) { var d = o[g]; l[d] && (s[d.trim()] = t[d.trim()].parse(e, l[d].offset, l[d].length, s)) } return s }, _tabOffset: function (e, n, i) { for (var r = t._bin, a = r.readUshort(e, i + 4), o = i + 12, s = 0; s < a; s++) { var l = r.readASCII(e, o, 4); o += 4, r.readUint(e, o), o += 4; var g = r.readUint(e, o); if (o += 4, r.readUint(e, o), o += 4, l == n) return g } return 0 } }; t._bin = { readFixed: function (e, t) { return (e[t] << 8 | e[t + 1]) + (e[t + 2] << 8 | e[t + 3]) / 65540 }, readF2dot14: function (e, n) { return t._bin.readShort(e, n) / 16384 }, readInt: function (e, n) { return t._bin._view(e).getInt32(n) }, readInt8: function (e, n) { return t._bin._view(e).getInt8(n) }, readShort: function (e, n) { return t._bin._view(e).getInt16(n) }, readUshort: function (e, n) { return t._bin._view(e).getUint16(n) }, readUshorts: function (e, n, i) { for (var r = [], a = 0; a < i; a++)r.push(t._bin.readUshort(e, n + 2 * a)); return r }, readUint: function (e, n) { return t._bin._view(e).getUint32(n) }, readUint64: function (e, n) { return 4294967296 * t._bin.readUint(e, n) + t._bin.readUint(e, n + 4) }, readASCII: function (e, t, n) { for (var i = "", r = 0; r < n; r++)i += String.fromCharCode(e[t + r]); return i }, readUnicode: function (e, t, n) { for (var i = "", r = 0; r < n; r++) { var a = e[t++] << 8 | e[t++]; i += String.fromCharCode(a) } return i }, _tdec: "undefined" != typeof window && window.TextDecoder ? new window.TextDecoder : null, readUTF8: function (e, n, i) { var r = t._bin._tdec; return r && 0 == n && i == e.length ? r.decode(e) : t._bin.readASCII(e, n, i) }, readBytes: function (e, t, n) { for (var i = [], r = 0; r < n; r++)i.push(e[t + r]); return i }, readASCIIArray: function (e, t, n) { for (var i = [], r = 0; r < n; r++)i.push(String.fromCharCode(e[t + r])); return i }, _view: function (e) { return e._dataView || (e._dataView = e.buffer ? new DataView(e.buffer, e.byteOffset, e.byteLength) : new DataView(new Uint8Array(e).buffer)) } }, t._lctf = {}, t._lctf.parse = function (e, n, i, r, a) { var o = t._bin, s = {}, l = n; o.readFixed(e, n), n += 4; var g = o.readUshort(e, n); n += 2; var c = o.readUshort(e, n); n += 2; var u = o.readUshort(e, n); return n += 2, s.scriptList = t._lctf.readScriptList(e, l + g), s.featureList = t._lctf.readFeatureList(e, l + c), s.lookupList = t._lctf.readLookupList(e, l + u, a), s }, t._lctf.readLookupList = function (e, n, i) { var r = t._bin, a = n, o = [], s = r.readUshort(e, n); n += 2; for (var l = 0; l < s; l++) { var g = r.readUshort(e, n); n += 2; var c = t._lctf.readLookupTable(e, a + g, i); o.push(c) } return o }, t._lctf.readLookupTable = function (e, n, i) { var r = t._bin, a = n, o = { tabs: [] }; o.ltype = r.readUshort(e, n), n += 2, o.flag = r.readUshort(e, n), n += 2; var s = r.readUshort(e, n); n += 2; for (var l = o.ltype, g = 0; g < s; g++) { var c = r.readUshort(e, n); n += 2; var u = i(e, l, a + c, o); o.tabs.push(u) } return o }, t._lctf.numOfOnes = function (e) { for (var t = 0, n = 0; n < 32; n++)0 != (e >>> n & 1) && t++; return t }, t._lctf.readClassDef = function (e, n) { var i = t._bin, r = [], a = i.readUshort(e, n); if (n += 2, 1 == a) { var o = i.readUshort(e, n); n += 2; var s = i.readUshort(e, n); n += 2; for (var l = 0; l < s; l++)r.push(o + l), r.push(o + l), r.push(i.readUshort(e, n)), n += 2 } if (2 == a) { var g = i.readUshort(e, n); for (n += 2, l = 0; l < g; l++)r.push(i.readUshort(e, n)), n += 2, r.push(i.readUshort(e, n)), n += 2, r.push(i.readUshort(e, n)), n += 2 } return r }, t._lctf.getInterval = function (e, t) { for (var n = 0; n < e.length; n += 3) { var i = e[n], r = e[n + 1]; if (e[n + 2], i <= t && t <= r) return n } return -1 }, t._lctf.readCoverage = function (e, n) { var i = t._bin, r = {}; r.fmt = i.readUshort(e, n), n += 2; var a = i.readUshort(e, n); return n += 2, 1 == r.fmt && (r.tab = i.readUshorts(e, n, a)), 2 == r.fmt && (r.tab = i.readUshorts(e, n, 3 * a)), r }, t._lctf.coverageIndex = function (e, n) { var i = e.tab; if (1 == e.fmt) return i.indexOf(n); if (2 == e.fmt) { var r = t._lctf.getInterval(i, n); if (-1 != r) return i[r + 2] + (n - i[r]) } return -1 }, t._lctf.readFeatureList = function (e, n) { var i = t._bin, r = n, a = [], o = i.readUshort(e, n); n += 2; for (var s = 0; s < o; s++) { var l = i.readASCII(e, n, 4); n += 4; var g = i.readUshort(e, n); n += 2; var c = t._lctf.readFeatureTable(e, r + g); c.tag = l.trim(), a.push(c) } return a }, t._lctf.readFeatureTable = function (e, n) { var i = t._bin, r = n, a = {}, o = i.readUshort(e, n); n += 2, o > 0 && (a.featureParams = r + o); var s = i.readUshort(e, n); n += 2, a.tab = []; for (var l = 0; l < s; l++)a.tab.push(i.readUshort(e, n + 2 * l)); return a }, t._lctf.readScriptList = function (e, n) { var i = t._bin, r = n, a = {}, o = i.readUshort(e, n); n += 2; for (var s = 0; s < o; s++) { var l = i.readASCII(e, n, 4); n += 4; var g = i.readUshort(e, n); n += 2, a[l.trim()] = t._lctf.readScriptTable(e, r + g) } return a }, t._lctf.readScriptTable = function (e, n) { var i = t._bin, r = n, a = {}, o = i.readUshort(e, n); n += 2, a.default = t._lctf.readLangSysTable(e, r + o); var s = i.readUshort(e, n); n += 2; for (var l = 0; l < s; l++) { var g = i.readASCII(e, n, 4); n += 4; var c = i.readUshort(e, n); n += 2, a[g.trim()] = t._lctf.readLangSysTable(e, r + c) } return a }, t._lctf.readLangSysTable = function (e, n) { var i = t._bin, r = {}; i.readUshort(e, n), n += 2, r.reqFeature = i.readUshort(e, n), n += 2; var a = i.readUshort(e, n); return n += 2, r.features = i.readUshorts(e, n, a), r }, t.CFF = {}, t.CFF.parse = function (e, n, i) { var r = t._bin; (e = new Uint8Array(e.buffer, n, i))[n = 0], e[++n], e[++n], e[++n], n++; var a = []; n = t.CFF.readIndex(e, n, a); for (var o = [], s = 0; s < a.length - 1; s++)o.push(r.readASCII(e, n + a[s], a[s + 1] - a[s])); n += a[a.length - 1]; var l = []; n = t.CFF.readIndex(e, n, l); var g = []; for (s = 0; s < l.length - 1; s++)g.push(t.CFF.readDict(e, n + l[s], n + l[s + 1])); n += l[l.length - 1]; var c = g[0], u = []; n = t.CFF.readIndex(e, n, u); var C = []; for (s = 0; s < u.length - 1; s++)C.push(r.readASCII(e, n + u[s], u[s + 1] - u[s])); if (n += u[u.length - 1], t.CFF.readSubrs(e, n, c), c.CharStrings) { n = c.CharStrings, u = [], n = t.CFF.readIndex(e, n, u); var d = []; for (s = 0; s < u.length - 1; s++)d.push(r.readBytes(e, n + u[s], u[s + 1] - u[s])); c.CharStrings = d } if (c.ROS) { n = c.FDArray; var I = []; for (n = t.CFF.readIndex(e, n, I), c.FDArray = [], s = 0; s < I.length - 1; s++) { var h = t.CFF.readDict(e, n + I[s], n + I[s + 1]); t.CFF._readFDict(e, h, C), c.FDArray.push(h) } n += I[I.length - 1], n = c.FDSelect, c.FDSelect = []; var A = e[n]; if (n++, 3 != A) throw A; var p = r.readUshort(e, n); for (n += 2, s = 0; s < p + 1; s++)c.FDSelect.push(r.readUshort(e, n), e[n + 2]), n += 3 } return c.Encoding && (c.Encoding = t.CFF.readEncoding(e, c.Encoding, c.CharStrings.length)), c.charset && (c.charset = t.CFF.readCharset(e, c.charset, c.CharStrings.length)), t.CFF._readFDict(e, c, C), c }, t.CFF._readFDict = function (e, n, i) { var r; for (var a in n.Private && (r = n.Private[1], n.Private = t.CFF.readDict(e, r, r + n.Private[0]), n.Private.Subrs && t.CFF.readSubrs(e, r + n.Private.Subrs, n.Private)), n) -1 != ["FamilyName", "FontName", "FullName", "Notice", "version", "Copyright"].indexOf(a) && (n[a] = i[n[a] - 426 + 35]) }, t.CFF.readSubrs = function (e, n, i) { var r = t._bin, a = []; n = t.CFF.readIndex(e, n, a); var o, s = a.length; o = s < 1240 ? 107 : s < 33900 ? 1131 : 32768, i.Bias = o, i.Subrs = []; for (var l = 0; l < a.length - 1; l++)i.Subrs.push(r.readBytes(e, n + a[l], a[l + 1] - a[l])) }, t.CFF.tableSE = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 0, 111, 112, 113, 114, 0, 115, 116, 117, 118, 119, 120, 121, 122, 0, 123, 0, 124, 125, 126, 127, 128, 129, 130, 131, 0, 132, 133, 0, 134, 135, 136, 137, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 138, 0, 139, 0, 0, 0, 0, 140, 141, 142, 143, 0, 0, 0, 0, 0, 144, 0, 0, 0, 145, 0, 0, 146, 147, 148, 149, 0, 0, 0, 0], t.CFF.glyphByUnicode = function (e, t) { for (var n = 0; n < e.charset.length; n++)if (e.charset[n] == t) return n; return -1 }, t.CFF.glyphBySE = function (e, n) { return n < 0 || n > 255 ? -1 : t.CFF.glyphByUnicode(e, t.CFF.tableSE[n]) }, t.CFF.readEncoding = function (e, n, i) { t._bin; var r = [".notdef"], a = e[n]; if (n++, 0 != a) throw "error: unknown encoding format: " + a; var o = e[n]; n++; for (var s = 0; s < o; s++)r.push(e[n + s]); return r }, t.CFF.readCharset = function (e, n, i) { var r = t._bin, a = [".notdef"], o = e[n]; if (n++, 0 == o) for (var s = 0; s < i; s++) { var l = r.readUshort(e, n); n += 2, a.push(l) } else { if (1 != o && 2 != o) throw "error: format: " + o; for (; a.length < i;) { l = r.readUshort(e, n), n += 2; var g = 0; for (1 == o ? (g = e[n], n++) : (g = r.readUshort(e, n), n += 2), s = 0; s <= g; s++)a.push(l), l++ } } return a }, t.CFF.readIndex = function (e, n, i) { var r = t._bin, a = r.readUshort(e, n) + 1, o = e[n += 2]; if (n++, 1 == o) for (var s = 0; s < a; s++)i.push(e[n + s]); else if (2 == o) for (s = 0; s < a; s++)i.push(r.readUshort(e, n + 2 * s)); else if (3 == o) for (s = 0; s < a; s++)i.push(16777215 & r.readUint(e, n + 3 * s - 1)); else if (1 != a) throw "unsupported offset size: " + o + ", count: " + a; return (n += a * o) - 1 }, t.CFF.getCharString = function (e, n, i) { var r = t._bin, a = e[n], o = e[n + 1]; e[n + 2], e[n + 3], e[n + 4]; var s = 1, l = null, g = null; a <= 20 && (l = a, s = 1), 12 == a && (l = 100 * a + o, s = 2), 21 <= a && a <= 27 && (l = a, s = 1), 28 == a && (g = r.readShort(e, n + 1), s = 3), 29 <= a && a <= 31 && (l = a, s = 1), 32 <= a && a <= 246 && (g = a - 139, s = 1), 247 <= a && a <= 250 && (g = 256 * (a - 247) + o + 108, s = 2), 251 <= a && a <= 254 && (g = 256 * -(a - 251) - o - 108, s = 2), 255 == a && (g = r.readInt(e, n + 1) / 65535, s = 5), i.val = null != g ? g : "o" + l, i.size = s }, t.CFF.readCharString = function (e, n, i) { for (var r = n + i, a = t._bin, o = []; n < r;) { var s = e[n], l = e[n + 1]; e[n + 2], e[n + 3], e[n + 4]; var g = 1, c = null, u = null; s <= 20 && (c = s, g = 1), 12 == s && (c = 100 * s + l, g = 2), 19 != s && 20 != s || (c = s, g = 2), 21 <= s && s <= 27 && (c = s, g = 1), 28 == s && (u = a.readShort(e, n + 1), g = 3), 29 <= s && s <= 31 && (c = s, g = 1), 32 <= s && s <= 246 && (u = s - 139, g = 1), 247 <= s && s <= 250 && (u = 256 * (s - 247) + l + 108, g = 2), 251 <= s && s <= 254 && (u = 256 * -(s - 251) - l - 108, g = 2), 255 == s && (u = a.readInt(e, n + 1) / 65535, g = 5), o.push(null != u ? u : "o" + c), n += g } return o }, t.CFF.readDict = function (e, n, i) { for (var r = t._bin, a = {}, o = []; n < i;) { var s = e[n], l = e[n + 1]; e[n + 2], e[n + 3], e[n + 4]; var g = 1, c = null, u = null; if (28 == s && (u = r.readShort(e, n + 1), g = 3), 29 == s && (u = r.readInt(e, n + 1), g = 5), 32 <= s && s <= 246 && (u = s - 139, g = 1), 247 <= s && s <= 250 && (u = 256 * (s - 247) + l + 108, g = 2), 251 <= s && s <= 254 && (u = 256 * -(s - 251) - l - 108, g = 2), 255 == s) throw u = r.readInt(e, n + 1) / 65535, g = 5, "unknown number"; if (30 == s) { var C = []; for (g = 1; ;) { var d = e[n + g]; g++; var I = d >> 4, h = 15 & d; if (15 != I && C.push(I), 15 != h && C.push(h), 15 == h) break } for (var A = "", p = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, ".", "e", "e-", "reserved", "-", "endOfNumber"], f = 0; f < C.length; f++)A += p[C[f]]; u = parseFloat(A) } s <= 21 && (c = ["version", "Notice", "FullName", "FamilyName", "Weight", "FontBBox", "BlueValues", "OtherBlues", "FamilyBlues", "FamilyOtherBlues", "StdHW", "StdVW", "escape", "UniqueID", "XUID", "charset", "Encoding", "CharStrings", "Private", "Subrs", "defaultWidthX", "nominalWidthX"][s], g = 1, 12 == s && (c = ["Copyright", "isFixedPitch", "ItalicAngle", "UnderlinePosition", "UnderlineThickness", "PaintType", "CharstringType", "FontMatrix", "StrokeWidth", "BlueScale", "BlueShift", "BlueFuzz", "StemSnapH", "StemSnapV", "ForceBold", 0, 0, "LanguageGroup", "ExpansionFactor", "initialRandomSeed", "SyntheticBase", "PostScript", "BaseFontName", "BaseFontBlend", 0, 0, 0, 0, 0, 0, "ROS", "CIDFontVersion", "CIDFontRevision", "CIDFontType", "CIDCount", "UIDBase", "FDArray", "FDSelect", "FontName"][l], g = 2)), null != c ? (a[c] = 1 == o.length ? o[0] : o, o = []) : o.push(u), n += g } return a }, t.cmap = {}, t.cmap.parse = function (e, n, i) { e = new Uint8Array(e.buffer, n, i), n = 0; var r = t._bin, a = {}; r.readUshort(e, n), n += 2; var o = r.readUshort(e, n); n += 2; var s = []; a.tables = []; for (var l = 0; l < o; l++) { var g = r.readUshort(e, n); n += 2; var c = r.readUshort(e, n); n += 2; var u = r.readUint(e, n); n += 4; var C = "p" + g + "e" + c, d = s.indexOf(u); if (-1 == d) { var I; d = a.tables.length, s.push(u); var h = r.readUshort(e, u); 0 == h ? I = t.cmap.parse0(e, u) : 4 == h ? I = t.cmap.parse4(e, u) : 6 == h ? I = t.cmap.parse6(e, u) : 12 == h ? I = t.cmap.parse12(e, u) : console.debug("unknown format: " + h, g, c, u), a.tables.push(I) } if (null != a[C]) throw "multiple tables for one platform+encoding"; a[C] = d } return a }, t.cmap.parse0 = function (e, n) { var i = t._bin, r = {}; r.format = i.readUshort(e, n), n += 2; var a = i.readUshort(e, n); n += 2, i.readUshort(e, n), n += 2, r.map = []; for (var o = 0; o < a - 6; o++)r.map.push(e[n + o]); return r }, t.cmap.parse4 = function (e, n) { var i = t._bin, r = n, a = {}; a.format = i.readUshort(e, n), n += 2; var o = i.readUshort(e, n); n += 2, i.readUshort(e, n), n += 2; var s = i.readUshort(e, n); n += 2; var l = s / 2; a.searchRange = i.readUshort(e, n), n += 2, a.entrySelector = i.readUshort(e, n), n += 2, a.rangeShift = i.readUshort(e, n), n += 2, a.endCount = i.readUshorts(e, n, l), n += 2 * l, n += 2, a.startCount = i.readUshorts(e, n, l), n += 2 * l, a.idDelta = []; for (var g = 0; g < l; g++)a.idDelta.push(i.readShort(e, n)), n += 2; for (a.idRangeOffset = i.readUshorts(e, n, l), n += 2 * l, a.glyphIdArray = []; n < r + o;)a.glyphIdArray.push(i.readUshort(e, n)), n += 2; return a }, t.cmap.parse6 = function (e, n) { var i = t._bin, r = {}; r.format = i.readUshort(e, n), n += 2, i.readUshort(e, n), n += 2, i.readUshort(e, n), n += 2, r.firstCode = i.readUshort(e, n), n += 2; var a = i.readUshort(e, n); n += 2, r.glyphIdArray = []; for (var o = 0; o < a; o++)r.glyphIdArray.push(i.readUshort(e, n)), n += 2; return r }, t.cmap.parse12 = function (e, n) { var i = t._bin, r = {}; r.format = i.readUshort(e, n), n += 2, n += 2, i.readUint(e, n), n += 4, i.readUint(e, n), n += 4; var a = i.readUint(e, n); n += 4, r.groups = []; for (var o = 0; o < a; o++) { var s = n + 12 * o, l = i.readUint(e, s + 0), g = i.readUint(e, s + 4), c = i.readUint(e, s + 8); r.groups.push([l, g, c]) } return r }, t.glyf = {}, t.glyf.parse = function (e, t, n, i) { for (var r = [], a = 0; a < i.maxp.numGlyphs; a++)r.push(null); return r }, t.glyf._parseGlyf = function (e, n) { var i = t._bin, r = e._data, a = t._tabOffset(r, "glyf", e._offset) + e.loca[n]; if (e.loca[n] == e.loca[n + 1]) return null; var o = {}; if (o.noc = i.readShort(r, a), a += 2, o.xMin = i.readShort(r, a), a += 2, o.yMin = i.readShort(r, a), a += 2, o.xMax = i.readShort(r, a), a += 2, o.yMax = i.readShort(r, a), a += 2, o.xMin >= o.xMax || o.yMin >= o.yMax) return null; if (o.noc > 0) { o.endPts = []; for (var s = 0; s < o.noc; s++)o.endPts.push(i.readUshort(r, a)), a += 2; var l = i.readUshort(r, a); if (a += 2, r.length - a < l) return null; o.instructions = i.readBytes(r, a, l), a += l; var g = o.endPts[o.noc - 1] + 1; for (o.flags = [], s = 0; s < g; s++) { var c = r[a]; if (a++, o.flags.push(c), 0 != (8 & c)) { var u = r[a]; a++; for (var C = 0; C < u; C++)o.flags.push(c), s++ } } for (o.xs = [], s = 0; s < g; s++) { var d = 0 != (2 & o.flags[s]), I = 0 != (16 & o.flags[s]); d ? (o.xs.push(I ? r[a] : -r[a]), a++) : I ? o.xs.push(0) : (o.xs.push(i.readShort(r, a)), a += 2) } for (o.ys = [], s = 0; s < g; s++)d = 0 != (4 & o.flags[s]), I = 0 != (32 & o.flags[s]), d ? (o.ys.push(I ? r[a] : -r[a]), a++) : I ? o.ys.push(0) : (o.ys.push(i.readShort(r, a)), a += 2); var h = 0, A = 0; for (s = 0; s < g; s++)h += o.xs[s], A += o.ys[s], o.xs[s] = h, o.ys[s] = A } else { var p; o.parts = []; do { p = i.readUshort(r, a), a += 2; var f = { m: { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 }, p1: -1, p2: -1 }; if (o.parts.push(f), f.glyphIndex = i.readUshort(r, a), a += 2, 1 & p) { var m = i.readShort(r, a); a += 2; var v = i.readShort(r, a); a += 2 } else m = i.readInt8(r, a), a++, v = i.readInt8(r, a), a++; 2 & p ? (f.m.tx = m, f.m.ty = v) : (f.p1 = m, f.p2 = v), 8 & p ? (f.m.a = f.m.d = i.readF2dot14(r, a), a += 2) : 64 & p ? (f.m.a = i.readF2dot14(r, a), a += 2, f.m.d = i.readF2dot14(r, a), a += 2) : 128 & p && (f.m.a = i.readF2dot14(r, a), a += 2, f.m.b = i.readF2dot14(r, a), a += 2, f.m.c = i.readF2dot14(r, a), a += 2, f.m.d = i.readF2dot14(r, a), a += 2) } while (32 & p); if (256 & p) { var b = i.readUshort(r, a); for (a += 2, o.instr = [], s = 0; s < b; s++)o.instr.push(r[a]), a++ } } return o }, t.GPOS = {}, t.GPOS.parse = function (e, n, i, r) { return t._lctf.parse(e, n, i, r, t.GPOS.subt) }, t.GPOS.subt = function (e, n, i, r) { var a = t._bin, o = i, s = {}; if (s.fmt = a.readUshort(e, i), i += 2, 1 == n || 2 == n || 3 == n || 7 == n || 8 == n && s.fmt <= 2) { var l = a.readUshort(e, i); i += 2, s.coverage = t._lctf.readCoverage(e, l + o) } if (1 == n && 1 == s.fmt) { var g = a.readUshort(e, i); i += 2; var c = t._lctf.numOfOnes(g); 0 != g && (s.pos = t.GPOS.readValueRecord(e, i, g)) } else if (2 == n && s.fmt >= 1 && s.fmt <= 2) { g = a.readUshort(e, i), i += 2; var u = a.readUshort(e, i); i += 2, c = t._lctf.numOfOnes(g); var C = t._lctf.numOfOnes(u); if (1 == s.fmt) { s.pairsets = []; var d = a.readUshort(e, i); i += 2; for (var I = 0; I < d; I++) { var h = o + a.readUshort(e, i); i += 2; var A = a.readUshort(e, h); h += 2; for (var p = [], f = 0; f < A; f++) { var m = a.readUshort(e, h); h += 2, 0 != g && (Z = t.GPOS.readValueRecord(e, h, g), h += 2 * c), 0 != u && (w = t.GPOS.readValueRecord(e, h, u), h += 2 * C), p.push({ gid2: m, val1: Z, val2: w }) } s.pairsets.push(p) } } if (2 == s.fmt) { var v = a.readUshort(e, i); i += 2; var b = a.readUshort(e, i); i += 2; var y = a.readUshort(e, i); i += 2; var G = a.readUshort(e, i); for (i += 2, s.classDef1 = t._lctf.readClassDef(e, o + v), s.classDef2 = t._lctf.readClassDef(e, o + b), s.matrix = [], I = 0; I < y; I++) { var B = []; for (f = 0; f < G; f++) { var Z = null, w = null; 0 != g && (Z = t.GPOS.readValueRecord(e, i, g), i += 2 * c), 0 != u && (w = t.GPOS.readValueRecord(e, i, u), i += 2 * C), B.push({ val1: Z, val2: w }) } s.matrix.push(B) } } } else { if (9 == n && 1 == s.fmt) { var S = a.readUshort(e, i); i += 2; var R = a.readUint(e, i); if (i += 4, 9 == r.ltype) r.ltype = S; else if (r.ltype != S) throw "invalid extension substitution"; return t.GPOS.subt(e, r.ltype, o + R) } console.debug("unsupported GPOS table LookupType", n, "format", s.fmt) } return s }, t.GPOS.readValueRecord = function (e, n, i) { var r = t._bin, a = []; return a.push(1 & i ? r.readShort(e, n) : 0), n += 1 & i ? 2 : 0, a.push(2 & i ? r.readShort(e, n) : 0), n += 2 & i ? 2 : 0, a.push(4 & i ? r.readShort(e, n) : 0), n += 4 & i ? 2 : 0, a.push(8 & i ? r.readShort(e, n) : 0), n += 8 & i ? 2 : 0, a }, t.GSUB = {}, t.GSUB.parse = function (e, n, i, r) { return t._lctf.parse(e, n, i, r, t.GSUB.subt) }, t.GSUB.subt = function (e, n, i, r) { var a = t._bin, o = i, s = {}; if (s.fmt = a.readUshort(e, i), i += 2, 1 != n && 4 != n && 5 != n && 6 != n) return null; if (1 == n || 4 == n || 5 == n && s.fmt <= 2 || 6 == n && s.fmt <= 2) { var l = a.readUshort(e, i); i += 2, s.coverage = t._lctf.readCoverage(e, o + l) } if (1 == n && s.fmt >= 1 && s.fmt <= 2) { if (1 == s.fmt) s.delta = a.readShort(e, i), i += 2; else if (2 == s.fmt) { var g = a.readUshort(e, i); i += 2, s.newg = a.readUshorts(e, i, g), i += 2 * s.newg.length } } else if (4 == n) { s.vals = [], g = a.readUshort(e, i), i += 2; for (var c = 0; c < g; c++) { var u = a.readUshort(e, i); i += 2, s.vals.push(t.GSUB.readLigatureSet(e, o + u)) } } else if (5 == n && 2 == s.fmt) { if (2 == s.fmt) { var C = a.readUshort(e, i); i += 2, s.cDef = t._lctf.readClassDef(e, o + C), s.scset = []; var d = a.readUshort(e, i); for (i += 2, c = 0; c < d; c++) { var I = a.readUshort(e, i); i += 2, s.scset.push(0 == I ? null : t.GSUB.readSubClassSet(e, o + I)) } } } else if (6 == n && 3 == s.fmt) { if (3 == s.fmt) { for (c = 0; c < 3; c++) { g = a.readUshort(e, i), i += 2; for (var h = [], A = 0; A < g; A++)h.push(t._lctf.readCoverage(e, o + a.readUshort(e, i + 2 * A))); i += 2 * g, 0 == c && (s.backCvg = h), 1 == c && (s.inptCvg = h), 2 == c && (s.ahedCvg = h) } g = a.readUshort(e, i), i += 2, s.lookupRec = t.GSUB.readSubstLookupRecords(e, i, g) } } else { if (7 == n && 1 == s.fmt) { var p = a.readUshort(e, i); i += 2; var f = a.readUint(e, i); if (i += 4, 9 == r.ltype) r.ltype = p; else if (r.ltype != p) throw "invalid extension substitution"; return t.GSUB.subt(e, r.ltype, o + f) } console.debug("unsupported GSUB table LookupType", n, "format", s.fmt) } return s }, t.GSUB.readSubClassSet = function (e, n) { var i = t._bin.readUshort, r = n, a = [], o = i(e, n); n += 2; for (var s = 0; s < o; s++) { var l = i(e, n); n += 2, a.push(t.GSUB.readSubClassRule(e, r + l)) } return a }, t.GSUB.readSubClassRule = function (e, n) { var i = t._bin.readUshort, r = {}, a = i(e, n), o = i(e, n += 2); n += 2, r.input = []; for (var s = 0; s < a - 1; s++)r.input.push(i(e, n)), n += 2; return r.substLookupRecords = t.GSUB.readSubstLookupRecords(e, n, o), r }, t.GSUB.readSubstLookupRecords = function (e, n, i) { for (var r = t._bin.readUshort, a = [], o = 0; o < i; o++)a.push(r(e, n), r(e, n + 2)), n += 4; return a }, t.GSUB.readChainSubClassSet = function (e, n) { var i = t._bin, r = n, a = [], o = i.readUshort(e, n); n += 2; for (var s = 0; s < o; s++) { var l = i.readUshort(e, n); n += 2, a.push(t.GSUB.readChainSubClassRule(e, r + l)) } return a }, t.GSUB.readChainSubClassRule = function (e, n) { for (var i = t._bin, r = {}, a = ["backtrack", "input", "lookahead"], o = 0; o < a.length; o++) { var s = i.readUshort(e, n); n += 2, 1 == o && s--, r[a[o]] = i.readUshorts(e, n, s), n += 2 * r[a[o]].length } return s = i.readUshort(e, n), n += 2, r.subst = i.readUshorts(e, n, 2 * s), n += 2 * r.subst.length, r }, t.GSUB.readLigatureSet = function (e, n) { var i = t._bin, r = n, a = [], o = i.readUshort(e, n); n += 2; for (var s = 0; s < o; s++) { var l = i.readUshort(e, n); n += 2, a.push(t.GSUB.readLigature(e, r + l)) } return a }, t.GSUB.readLigature = function (e, n) { var i = t._bin, r = { chain: [] }; r.nglyph = i.readUshort(e, n), n += 2; var a = i.readUshort(e, n); n += 2; for (var o = 0; o < a - 1; o++)r.chain.push(i.readUshort(e, n)), n += 2; return r }, t.head = {}, t.head.parse = function (e, n, i) { var r = t._bin, a = {}; return r.readFixed(e, n), n += 4, a.fontRevision = r.readFixed(e, n), n += 4, r.readUint(e, n), n += 4, r.readUint(e, n), n += 4, a.flags = r.readUshort(e, n), n += 2, a.unitsPerEm = r.readUshort(e, n), n += 2, a.created = r.readUint64(e, n), n += 8, a.modified = r.readUint64(e, n), n += 8, a.xMin = r.readShort(e, n), n += 2, a.yMin = r.readShort(e, n), n += 2, a.xMax = r.readShort(e, n), n += 2, a.yMax = r.readShort(e, n), n += 2, a.macStyle = r.readUshort(e, n), n += 2, a.lowestRecPPEM = r.readUshort(e, n), n += 2, a.fontDirectionHint = r.readShort(e, n), n += 2, a.indexToLocFormat = r.readShort(e, n), n += 2, a.glyphDataFormat = r.readShort(e, n), n += 2, a }, t.hhea = {}, t.hhea.parse = function (e, n, i) { var r = t._bin, a = {}; return r.readFixed(e, n), n += 4, a.ascender = r.readShort(e, n), n += 2, a.descender = r.readShort(e, n), n += 2, a.lineGap = r.readShort(e, n), n += 2, a.advanceWidthMax = r.readUshort(e, n), n += 2, a.minLeftSideBearing = r.readShort(e, n), n += 2, a.minRightSideBearing = r.readShort(e, n), n += 2, a.xMaxExtent = r.readShort(e, n), n += 2, a.caretSlopeRise = r.readShort(e, n), n += 2, a.caretSlopeRun = r.readShort(e, n), n += 2, a.caretOffset = r.readShort(e, n), n += 2, n += 8, a.metricDataFormat = r.readShort(e, n), n += 2, a.numberOfHMetrics = r.readUshort(e, n), n += 2, a }, t.hmtx = {}, t.hmtx.parse = function (e, n, i, r) { for (var a = t._bin, o = { aWidth: [], lsBearing: [] }, s = 0, l = 0, g = 0; g < r.maxp.numGlyphs; g++)g < r.hhea.numberOfHMetrics && (s = a.readUshort(e, n), n += 2, l = a.readShort(e, n), n += 2), o.aWidth.push(s), o.lsBearing.push(l); return o }, t.kern = {}, t.kern.parse = function (e, n, i, r) { var a = t._bin, o = a.readUshort(e, n); if (n += 2, 1 == o) return t.kern.parseV1(e, n - 2, i, r); var s = a.readUshort(e, n); n += 2; for (var l = { glyph1: [], rval: [] }, g = 0; g < s; g++) { n += 2, i = a.readUshort(e, n), n += 2; var c = a.readUshort(e, n); n += 2; var u = c >>> 8; if (0 != (u &= 15)) throw "unknown kern table format: " + u; n = t.kern.readFormat0(e, n, l) } return l }, t.kern.parseV1 = function (e, n, i, r) { var a = t._bin; a.readFixed(e, n), n += 4; var o = a.readUint(e, n); n += 4; for (var s = { glyph1: [], rval: [] }, l = 0; l < o; l++) { a.readUint(e, n), n += 4; var g = a.readUshort(e, n); n += 2, a.readUshort(e, n), n += 2; var c = g >>> 8; if (0 != (c &= 15)) throw "unknown kern table format: " + c; n = t.kern.readFormat0(e, n, s) } return s }, t.kern.readFormat0 = function (e, n, i) { var r = t._bin, a = -1, o = r.readUshort(e, n); n += 2, r.readUshort(e, n), n += 2, r.readUshort(e, n), n += 2, r.readUshort(e, n), n += 2; for (var s = 0; s < o; s++) { var l = r.readUshort(e, n); n += 2; var g = r.readUshort(e, n); n += 2; var c = r.readShort(e, n); n += 2, l != a && (i.glyph1.push(l), i.rval.push({ glyph2: [], vals: [] })); var u = i.rval[i.rval.length - 1]; u.glyph2.push(g), u.vals.push(c), a = l } return n }, t.loca = {}, t.loca.parse = function (e, n, i, r) { var a = t._bin, o = [], s = r.head.indexToLocFormat, l = r.maxp.numGlyphs + 1; if (0 == s) for (var g = 0; g < l; g++)o.push(a.readUshort(e, n + (g << 1)) << 1); if (1 == s) for (g = 0; g < l; g++)o.push(a.readUint(e, n + (g << 2))); return o }, t.maxp = {}, t.maxp.parse = function (e, n, i) { var r = t._bin, a = {}, o = r.readUint(e, n); return n += 4, a.numGlyphs = r.readUshort(e, n), n += 2, 65536 == o && (a.maxPoints = r.readUshort(e, n), n += 2, a.maxContours = r.readUshort(e, n), n += 2, a.maxCompositePoints = r.readUshort(e, n), n += 2, a.maxCompositeContours = r.readUshort(e, n), n += 2, a.maxZones = r.readUshort(e, n), n += 2, a.maxTwilightPoints = r.readUshort(e, n), n += 2, a.maxStorage = r.readUshort(e, n), n += 2, a.maxFunctionDefs = r.readUshort(e, n), n += 2, a.maxInstructionDefs = r.readUshort(e, n), n += 2, a.maxStackElements = r.readUshort(e, n), n += 2, a.maxSizeOfInstructions = r.readUshort(e, n), n += 2, a.maxComponentElements = r.readUshort(e, n), n += 2, a.maxComponentDepth = r.readUshort(e, n), n += 2), a }, t.name = {}, t.name.parse = function (e, n, i) { var r = t._bin, a = {}; r.readUshort(e, n), n += 2; var o = r.readUshort(e, n); n += 2, r.readUshort(e, n); for (var s, l = ["copyright", "fontFamily", "fontSubfamily", "ID", "fullName", "version", "postScriptName", "trademark", "manufacturer", "designer", "description", "urlVendor", "urlDesigner", "licence", "licenceURL", "---", "typoFamilyName", "typoSubfamilyName", "compatibleFull", "sampleText", "postScriptCID", "wwsFamilyName", "wwsSubfamilyName", "lightPalette", "darkPalette"], g = n += 2, c = 0; c < o; c++) { var u = r.readUshort(e, n); n += 2; var C = r.readUshort(e, n); n += 2; var d = r.readUshort(e, n); n += 2; var I = r.readUshort(e, n); n += 2; var h = r.readUshort(e, n); n += 2; var A = r.readUshort(e, n); n += 2; var p, f = l[I], m = g + 12 * o + A; if (0 == u) p = r.readUnicode(e, m, h / 2); else if (3 == u && 0 == C) p = r.readUnicode(e, m, h / 2); else if (0 == C) p = r.readASCII(e, m, h); else if (1 == C) p = r.readUnicode(e, m, h / 2); else if (3 == C) p = r.readUnicode(e, m, h / 2); else { if (1 != u) throw "unknown encoding " + C + ", platformID: " + u; p = r.readASCII(e, m, h), console.debug("reading unknown MAC encoding " + C + " as ASCII") } var v = "p" + u + "," + d.toString(16); null == a[v] && (a[v] = {}), a[v][void 0 !== f ? f : I] = p, a[v]._lang = d } for (var b in a) if (null != a[b].postScriptName && 1033 == a[b]._lang) return a[b]; for (var b in a) if (null != a[b].postScriptName && 0 == a[b]._lang) return a[b]; for (var b in a) if (null != a[b].postScriptName && 3084 == a[b]._lang) return a[b]; for (var b in a) if (null != a[b].postScriptName) return a[b]; for (var b in a) { s = b; break } return console.debug("returning name table with languageID " + a[s]._lang), a[s] }, t["OS/2"] = {}, t["OS/2"].parse = function (e, n, i) { var r = t._bin.readUshort(e, n); n += 2; var a = {}; if (0 == r) t["OS/2"].version0(e, n, a); else if (1 == r) t["OS/2"].version1(e, n, a); else if (2 == r || 3 == r || 4 == r) t["OS/2"].version2(e, n, a); else { if (5 != r) throw "unknown OS/2 table version: " + r; t["OS/2"].version5(e, n, a) } return a }, t["OS/2"].version0 = function (e, n, i) { var r = t._bin; return i.xAvgCharWidth = r.readShort(e, n), n += 2, i.usWeightClass = r.readUshort(e, n), n += 2, i.usWidthClass = r.readUshort(e, n), n += 2, i.fsType = r.readUshort(e, n), n += 2, i.ySubscriptXSize = r.readShort(e, n), n += 2, i.ySubscriptYSize = r.readShort(e, n), n += 2, i.ySubscriptXOffset = r.readShort(e, n), n += 2, i.ySubscriptYOffset = r.readShort(e, n), n += 2, i.ySuperscriptXSize = r.readShort(e, n), n += 2, i.ySuperscriptYSize = r.readShort(e, n), n += 2, i.ySuperscriptXOffset = r.readShort(e, n), n += 2, i.ySuperscriptYOffset = r.readShort(e, n), n += 2, i.yStrikeoutSize = r.readShort(e, n), n += 2, i.yStrikeoutPosition = r.readShort(e, n), n += 2, i.sFamilyClass = r.readShort(e, n), n += 2, i.panose = r.readBytes(e, n, 10), n += 10, i.ulUnicodeRange1 = r.readUint(e, n), n += 4, i.ulUnicodeRange2 = r.readUint(e, n), n += 4, i.ulUnicodeRange3 = r.readUint(e, n), n += 4, i.ulUnicodeRange4 = r.readUint(e, n), n += 4, i.achVendID = [r.readInt8(e, n), r.readInt8(e, n + 1), r.readInt8(e, n + 2), r.readInt8(e, n + 3)], n += 4, i.fsSelection = r.readUshort(e, n), n += 2, i.usFirstCharIndex = r.readUshort(e, n), n += 2, i.usLastCharIndex = r.readUshort(e, n), n += 2, i.sTypoAscender = r.readShort(e, n), n += 2, i.sTypoDescender = r.readShort(e, n), n += 2, i.sTypoLineGap = r.readShort(e, n), n += 2, i.usWinAscent = r.readUshort(e, n), n += 2, i.usWinDescent = r.readUshort(e, n), n + 2 }, t["OS/2"].version1 = function (e, n, i) { var r = t._bin; return n = t["OS/2"].version0(e, n, i), i.ulCodePageRange1 = r.readUint(e, n), n += 4, i.ulCodePageRange2 = r.readUint(e, n), n + 4 }, t["OS/2"].version2 = function (e, n, i) { var r = t._bin; return n = t["OS/2"].version1(e, n, i), i.sxHeight = r.readShort(e, n), n += 2, i.sCapHeight = r.readShort(e, n), n += 2, i.usDefault = r.readUshort(e, n), n += 2, i.usBreak = r.readUshort(e, n), n += 2, i.usMaxContext = r.readUshort(e, n), n + 2 }, t["OS/2"].version5 = function (e, n, i) { var r = t._bin; return n = t["OS/2"].version2(e, n, i), i.usLowerOpticalPointSize = r.readUshort(e, n), n += 2, i.usUpperOpticalPointSize = r.readUshort(e, n), n + 2 }, t.post = {}, t.post.parse = function (e, n, i) { var r = t._bin, a = {}; return a.version = r.readFixed(e, n), n += 4, a.italicAngle = r.readFixed(e, n), n += 4, a.underlinePosition = r.readShort(e, n), n += 2, a.underlineThickness = r.readShort(e, n), n += 2, a }, null == t && (t = {}), null == t.U && (t.U = {}), t.U.codeToGlyph = function (e, t) { var n = e.cmap, i = -1; if (null != n.p0e4 ? i = n.p0e4 : null != n.p3e1 ? i = n.p3e1 : null != n.p1e0 ? i = n.p1e0 : null != n.p0e3 && (i = n.p0e3), -1 == i) throw "no familiar platform and encoding!"; var r = n.tables[i]; if (0 == r.format) return t >= r.map.length ? 0 : r.map[t]; if (4 == r.format) { for (var a = -1, o = 0; o < r.endCount.length; o++)if (t <= r.endCount[o]) { a = o; break } return -1 == a || r.startCount[a] > t ? 0 : 65535 & (0 != r.idRangeOffset[a] ? r.glyphIdArray[t - r.startCount[a] + (r.idRangeOffset[a] >> 1) - (r.idRangeOffset.length - a)] : t + r.idDelta[a]) } if (12 == r.format) { if (t > r.groups[r.groups.length - 1][1]) return 0; for (o = 0; o < r.groups.length; o++) { var s = r.groups[o]; if (s[0] <= t && t <= s[1]) return s[2] + (t - s[0]) } return 0 } throw "unknown cmap table format " + r.format }, t.U.glyphToPath = function (e, n) { var i = { cmds: [], crds: [] }; if (e.SVG && e.SVG.entries[n]) { var r = e.SVG.entries[n]; return null == r ? i : ("string" == typeof r && (r = t.SVG.toPath(r), e.SVG.entries[n] = r), r) } if (e.CFF) { var a = { x: 0, y: 0, stack: [], nStems: 0, haveWidth: !1, width: e.CFF.Private ? e.CFF.Private.defaultWidthX : 0, open: !1 }, o = e.CFF, s = e.CFF.Private; if (o.ROS) { for (var l = 0; o.FDSelect[l + 2] <= n;)l += 2; s = o.FDArray[o.FDSelect[l + 1]].Private } t.U._drawCFF(e.CFF.CharStrings[n], a, o, s, i) } else e.glyf && t.U._drawGlyf(n, e, i); return i }, t.U._drawGlyf = function (e, n, i) { var r = n.glyf[e]; null == r && (r = n.glyf[e] = t.glyf._parseGlyf(n, e)), null != r && (r.noc > -1 ? t.U._simpleGlyph(r, i) : t.U._compoGlyph(r, n, i)) }, t.U._simpleGlyph = function (e, n) { for (var i = 0; i < e.noc; i++) { for (var r = 0 == i ? 0 : e.endPts[i - 1] + 1, a = e.endPts[i], o = r; o <= a; o++) { var s = o == r ? a : o - 1, l = o == a ? r : o + 1, g = 1 & e.flags[o], c = 1 & e.flags[s], u = 1 & e.flags[l], C = e.xs[o], d = e.ys[o]; if (o == r) if (g) { if (!c) { t.U.P.moveTo(n, C, d); continue } t.U.P.moveTo(n, e.xs[s], e.ys[s]) } else c ? t.U.P.moveTo(n, e.xs[s], e.ys[s]) : t.U.P.moveTo(n, (e.xs[s] + C) / 2, (e.ys[s] + d) / 2); g ? c && t.U.P.lineTo(n, C, d) : u ? t.U.P.qcurveTo(n, C, d, e.xs[l], e.ys[l]) : t.U.P.qcurveTo(n, C, d, (C + e.xs[l]) / 2, (d + e.ys[l]) / 2) } t.U.P.closePath(n) } }, t.U._compoGlyph = function (e, n, i) { for (var r = 0; r < e.parts.length; r++) { var a = { cmds: [], crds: [] }, o = e.parts[r]; t.U._drawGlyf(o.glyphIndex, n, a); for (var s = o.m, l = 0; l < a.crds.length; l += 2) { var g = a.crds[l], c = a.crds[l + 1]; i.crds.push(g * s.a + c * s.b + s.tx), i.crds.push(g * s.c + c * s.d + s.ty) } for (l = 0; l < a.cmds.length; l++)i.cmds.push(a.cmds[l]) } }, t.U._getGlyphClass = function (e, n) { var i = t._lctf.getInterval(n, e); return -1 == i ? 0 : n[i + 2] }, t.U.getPairAdjustment = function (e, n, i) { var r = !1; if (e.GPOS) for (var a = e.GPOS, o = a.lookupList, s = a.featureList, l = [], g = 0; g < s.length; g++) { var c = s[g]; if ("kern" == c.tag) { r = !0; for (var u = 0; u < c.tab.length; u++)if (!l[c.tab[u]]) { l[c.tab[u]] = !0; for (var C = o[c.tab[u]], d = 0; d < C.tabs.length; d++)if (null != C.tabs[d]) { var I, h = C.tabs[d]; if (!h.coverage || -1 != (I = t._lctf.coverageIndex(h.coverage, n))) if (1 == C.ltype); else if (2 == C.ltype) { var A = null; if (1 == h.fmt) { var p = h.pairsets[I]; for (g = 0; g < p.length; g++)p[g].gid2 == i && (A = p[g]) } else if (2 == h.fmt) { var f = t.U._getGlyphClass(n, h.classDef1), m = t.U._getGlyphClass(i, h.classDef2); A = h.matrix[f][m] } if (A) { var v = 0; return A.val1 && A.val1[2] && (v += A.val1[2]), A.val2 && A.val2[0] && (v += A.val2[0]), v } } } } } } if (e.kern && !r) { var b = e.kern.glyph1.indexOf(n); if (-1 != b) { var y = e.kern.rval[b].glyph2.indexOf(i); if (-1 != y) return e.kern.rval[b].vals[y] } } return 0 }, t.U._applySubs = function (e, n, i, r) { for (var a = e.length - n - 1, o = 0; o < i.tabs.length; o++)if (null != i.tabs[o]) { var s, l = i.tabs[o]; if (!l.coverage || -1 != (s = t._lctf.coverageIndex(l.coverage, e[n]))) if (1 == i.ltype) e[n], 1 == l.fmt ? e[n] = e[n] + l.delta : e[n] = l.newg[s]; else if (4 == i.ltype) for (var g = l.vals[s], c = 0; c < g.length; c++) { var u = g[c], C = u.chain.length; if (!(C > a)) { for (var d = !0, I = 0, h = 0; h < C; h++) { for (; -1 == e[n + I + (1 + h)];)I++; u.chain[h] != e[n + I + (1 + h)] && (d = !1) } if (d) { for (e[n] = u.nglyph, h = 0; h < C + I; h++)e[n + h + 1] = -1; break } } } else if (5 == i.ltype && 2 == l.fmt) for (var A = t._lctf.getInterval(l.cDef, e[n]), p = l.cDef[A + 2], f = l.scset[p], m = 0; m < f.length; m++) { var v = f[m], b = v.input; if (!(b.length > a)) { for (d = !0, h = 0; h < b.length; h++) { var y = t._lctf.getInterval(l.cDef, e[n + 1 + h]); if (-1 == A && l.cDef[y + 2] != b[h]) { d = !1; break } } if (d) { var G = v.substLookupRecords; for (c = 0; c < G.length; c += 2)G[c], G[c + 1] } } } else if (6 == i.ltype && 3 == l.fmt) { if (!t.U._glsCovered(e, l.backCvg, n - l.backCvg.length)) continue; if (!t.U._glsCovered(e, l.inptCvg, n)) continue; if (!t.U._glsCovered(e, l.ahedCvg, n + l.inptCvg.length)) continue; var B = l.lookupRec; for (m = 0; m < B.length; m += 2) { A = B[m]; var Z = r[B[m + 1]]; t.U._applySubs(e, n + A, Z, r) } } } }, t.U._glsCovered = function (e, n, i) { for (var r = 0; r < n.length; r++)if (-1 == t._lctf.coverageIndex(n[r], e[i + r])) return !1; return !0 }, t.U.glyphsToPath = function (e, n, i) { for (var r = { cmds: [], crds: [] }, a = 0, o = 0; o < n.length; o++) { var s = n[o]; if (-1 != s) { for (var l = o < n.length - 1 && -1 != n[o + 1] ? n[o + 1] : 0, g = t.U.glyphToPath(e, s), c = 0; c < g.crds.length; c += 2)r.crds.push(g.crds[c] + a), r.crds.push(g.crds[c + 1]); for (i && r.cmds.push(i), c = 0; c < g.cmds.length; c++)r.cmds.push(g.cmds[c]); i && r.cmds.push("X"), a += e.hmtx.aWidth[s], o < n.length - 1 && (a += t.U.getPairAdjustment(e, s, l)) } } return r }, t.U.P = {}, t.U.P.moveTo = function (e, t, n) { e.cmds.push("M"), e.crds.push(t, n) }, t.U.P.lineTo = function (e, t, n) { e.cmds.push("L"), e.crds.push(t, n) }, t.U.P.curveTo = function (e, t, n, i, r, a, o) { e.cmds.push("C"), e.crds.push(t, n, i, r, a, o) }, t.U.P.qcurveTo = function (e, t, n, i, r) { e.cmds.push("Q"), e.crds.push(t, n, i, r) }, t.U.P.closePath = function (e) { e.cmds.push("Z") }, t.U._drawCFF = function (e, n, i, r, a) { for (var o = n.stack, s = n.nStems, l = n.haveWidth, g = n.width, c = n.open, u = 0, C = n.x, d = n.y, I = 0, h = 0, A = 0, p = 0, f = 0, m = 0, v = 0, b = 0, y = 0, G = 0, B = { val: 0, size: 0 }; u < e.length;) { t.CFF.getCharString(e, u, B); var Z = B.val; if (u += B.size, "o1" == Z || "o18" == Z) o.length % 2 != 0 && !l && (g = o.shift() + r.nominalWidthX), s += o.length >> 1, o.length = 0, l = !0; else if ("o3" == Z || "o23" == Z) o.length % 2 != 0 && !l && (g = o.shift() + r.nominalWidthX), s += o.length >> 1, o.length = 0, l = !0; else if ("o4" == Z) o.length > 1 && !l && (g = o.shift() + r.nominalWidthX, l = !0), c && t.U.P.closePath(a), d += o.pop(), t.U.P.moveTo(a, C, d), c = !0; else if ("o5" == Z) for (; o.length > 0;)C += o.shift(), d += o.shift(), t.U.P.lineTo(a, C, d); else if ("o6" == Z || "o7" == Z) for (var w = o.length, S = "o6" == Z, R = 0; R < w; R++) { var x = o.shift(); S ? C += x : d += x, S = !S, t.U.P.lineTo(a, C, d) } else if ("o8" == Z || "o24" == Z) { w = o.length; for (var W = 0; W + 6 <= w;)I = C + o.shift(), h = d + o.shift(), A = I + o.shift(), p = h + o.shift(), C = A + o.shift(), d = p + o.shift(), t.U.P.curveTo(a, I, h, A, p, C, d), W += 6; "o24" == Z && (C += o.shift(), d += o.shift(), t.U.P.lineTo(a, C, d)) } else { if ("o11" == Z) break; if ("o1234" == Z || "o1235" == Z || "o1236" == Z || "o1237" == Z) "o1234" == Z && (h = d, A = (I = C + o.shift()) + o.shift(), G = p = h + o.shift(), m = p, b = d, C = (v = (f = (y = A + o.shift()) + o.shift()) + o.shift()) + o.shift(), t.U.P.curveTo(a, I, h, A, p, y, G), t.U.P.curveTo(a, f, m, v, b, C, d)), "o1235" == Z && (I = C + o.shift(), h = d + o.shift(), A = I + o.shift(), p = h + o.shift(), y = A + o.shift(), G = p + o.shift(), f = y + o.shift(), m = G + o.shift(), v = f + o.shift(), b = m + o.shift(), C = v + o.shift(), d = b + o.shift(), o.shift(), t.U.P.curveTo(a, I, h, A, p, y, G), t.U.P.curveTo(a, f, m, v, b, C, d)), "o1236" == Z && (I = C + o.shift(), h = d + o.shift(), A = I + o.shift(), G = p = h + o.shift(), m = p, v = (f = (y = A + o.shift()) + o.shift()) + o.shift(), b = m + o.shift(), C = v + o.shift(), t.U.P.curveTo(a, I, h, A, p, y, G), t.U.P.curveTo(a, f, m, v, b, C, d)), "o1237" == Z && (I = C + o.shift(), h = d + o.shift(), A = I + o.shift(), p = h + o.shift(), y = A + o.shift(), G = p + o.shift(), f = y + o.shift(), m = G + o.shift(), v = f + o.shift(), b = m + o.shift(), Math.abs(v - C) > Math.abs(b - d) ? C = v + o.shift() : d = b + o.shift(), t.U.P.curveTo(a, I, h, A, p, y, G), t.U.P.curveTo(a, f, m, v, b, C, d)); else if ("o14" == Z) { if (o.length > 0 && !l && (g = o.shift() + i.nominalWidthX, l = !0), 4 == o.length) { var V = o.shift(), k = o.shift(), H = o.shift(), M = o.shift(), F = t.CFF.glyphBySE(i, H), N = t.CFF.glyphBySE(i, M); t.U._drawCFF(i.CharStrings[F], n, i, r, a), n.x = V, n.y = k, t.U._drawCFF(i.CharStrings[N], n, i, r, a) } c && (t.U.P.closePath(a), c = !1) } else if ("o19" == Z || "o20" == Z) o.length % 2 != 0 && !l && (g = o.shift() + r.nominalWidthX), s += o.length >> 1, o.length = 0, l = !0, u += s + 7 >> 3; else if ("o21" == Z) o.length > 2 && !l && (g = o.shift() + r.nominalWidthX, l = !0), d += o.pop(), C += o.pop(), c && t.U.P.closePath(a), t.U.P.moveTo(a, C, d), c = !0; else if ("o22" == Z) o.length > 1 && !l && (g = o.shift() + r.nominalWidthX, l = !0), C += o.pop(), c && t.U.P.closePath(a), t.U.P.moveTo(a, C, d), c = !0; else if ("o25" == Z) { for (; o.length > 6;)C += o.shift(), d += o.shift(), t.U.P.lineTo(a, C, d); I = C + o.shift(), h = d + o.shift(), A = I + o.shift(), p = h + o.shift(), C = A + o.shift(), d = p + o.shift(), t.U.P.curveTo(a, I, h, A, p, C, d) } else if ("o26" == Z) for (o.length % 2 && (C += o.shift()); o.length > 0;)I = C, h = d + o.shift(), C = A = I + o.shift(), d = (p = h + o.shift()) + o.shift(), t.U.P.curveTo(a, I, h, A, p, C, d); else if ("o27" == Z) for (o.length % 2 && (d += o.shift()); o.length > 0;)h = d, A = (I = C + o.shift()) + o.shift(), p = h + o.shift(), C = A + o.shift(), d = p, t.U.P.curveTo(a, I, h, A, p, C, d); else if ("o10" == Z || "o29" == Z) { var X = "o10" == Z ? r : i; if (0 == o.length) console.debug("error: empty stack"); else { var Y = o.pop(), K = X.Subrs[Y + X.Bias]; n.x = C, n.y = d, n.nStems = s, n.haveWidth = l, n.width = g, n.open = c, t.U._drawCFF(K, n, i, r, a), C = n.x, d = n.y, s = n.nStems, l = n.haveWidth, g = n.width, c = n.open } } else if ("o30" == Z || "o31" == Z) { var L = o.length, z = (W = 0, "o31" == Z); for (W += L - (w = -3 & L); W < w;)z ? (h = d, A = (I = C + o.shift()) + o.shift(), d = (p = h + o.shift()) + o.shift(), w - W == 5 ? (C = A + o.shift(), W++) : C = A, z = !1) : (I = C, h = d + o.shift(), A = I + o.shift(), p = h + o.shift(), C = A + o.shift(), w - W == 5 ? (d = p + o.shift(), W++) : d = p, z = !0), t.U.P.curveTo(a, I, h, A, p, C, d), W += 4 } else { if ("o" == (Z + "").charAt(0)) throw console.debug("Unknown operation: " + Z, e), Z; o.push(Z) } } } n.x = C, n.y = d, n.nStems = s, n.haveWidth = l, n.width = g, n.open = c }; var n = t, i = { Typr: n }; return e.Typr = n, e.default = i, Object.defineProperty(e, "__esModule", { value: !0 }), e }({}).Typr }, function () { return function (e) { var t = Uint8Array, n = Uint16Array, i = Uint32Array, r = new t([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0]), a = new t([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0]), o = new t([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]), s = function (e, t) { for (var r = new n(31), a = 0; a < 31; ++a)r[a] = t += 1 << e[a - 1]; var o = new i(r[30]); for (a = 1; a < 30; ++a)for (var s = r[a]; s < r[a + 1]; ++s)o[s] = s - r[a] << 5 | a; return [r, o] }, l = s(r, 2), g = l[0], c = l[1]; g[28] = 258, c[258] = 28; for (var u = s(a, 0)[0], C = new n(32768), d = 0; d < 32768; ++d) { var I = (43690 & d) >>> 1 | (21845 & d) << 1; I = (61680 & (I = (52428 & I) >>> 2 | (13107 & I) << 2)) >>> 4 | (3855 & I) << 4, C[d] = ((65280 & I) >>> 8 | (255 & I) << 8) >>> 1 } var h = function (e, t, i) { for (var r = e.length, a = 0, o = new n(t); a < r; ++a)++o[e[a] - 1]; var s, l = new n(t); for (a = 0; a < t; ++a)l[a] = l[a - 1] + o[a - 1] << 1; if (i) { s = new n(1 << t); var g = 15 - t; for (a = 0; a < r; ++a)if (e[a]) for (var c = a << 4 | e[a], u = t - e[a], d = l[e[a] - 1]++ << u, I = d | (1 << u) - 1; d <= I; ++d)s[C[d] >>> g] = c } else for (s = new n(r), a = 0; a < r; ++a)e[a] && (s[a] = C[l[e[a] - 1]++] >>> 15 - e[a]); return s }, A = new t(288); for (d = 0; d < 144; ++d)A[d] = 8; for (d = 144; d < 256; ++d)A[d] = 9; for (d = 256; d < 280; ++d)A[d] = 7; for (d = 280; d < 288; ++d)A[d] = 8; var p = new t(32); for (d = 0; d < 32; ++d)p[d] = 5; var f = h(A, 9, 1), m = h(p, 5, 1), v = function (e) { for (var t = e[0], n = 1; n < e.length; ++n)e[n] > t && (t = e[n]); return t }, b = function (e, t, n) { var i = t / 8 | 0; return (e[i] | e[i + 1] << 8) >> (7 & t) & n }, y = function (e, t) { var n = t / 8 | 0; return (e[n] | e[n + 1] << 8 | e[n + 2] << 16) >> (7 & t) }, G = ["unexpected EOF", "invalid block type", "invalid length/literal", "invalid distance", "stream finished", "no stream handler", , "no callback", "invalid UTF-8 data", "extra field too long", "date not in range 1980-2099", "filename too long", "stream finishing", "invalid zip data"], B = function e(t, n, i) { var r = new Error(n || G[t]); if (r.code = t, Error.captureStackTrace && Error.captureStackTrace(r, e), !i) throw r; return r }, Z = function (e, s, l) { var c = e.length; if (!c || l && !l.l && c < 5) return s || new t(0); var C = !s || l, d = !l || l.i; l || (l = {}), s || (s = new t(3 * c)); var I, A = function (e) { var n = s.length; if (e > n) { var i = new t(Math.max(2 * n, e)); i.set(s), s = i } }, p = l.f || 0, G = l.p || 0, Z = l.b || 0, w = l.l, S = l.d, R = l.m, x = l.n, W = 8 * c; do { if (!w) { l.f = p = b(e, G, 1); var V = b(e, G + 1, 3); if (G += 3, !V) { var k = e[(T = ((I = G) / 8 | 0) + (7 & I && 1) + 4) - 4] | e[T - 3] << 8, H = T + k; if (H > c) { d && B(0); break } C && A(Z + k), s.set(e.subarray(T, H), Z), l.b = Z += k, l.p = G = 8 * H; continue } if (1 == V) w = f, S = m, R = 9, x = 5; else if (2 == V) { var M = b(e, G, 31) + 257, F = b(e, G + 10, 15) + 4, N = M + b(e, G + 5, 31) + 1; G += 14; for (var X = new t(N), Y = new t(19), K = 0; K < F; ++K)Y[o[K]] = b(e, G + 3 * K, 7); G += 3 * F; var L = v(Y), z = (1 << L) - 1, E = h(Y, L, 1); for (K = 0; K < N;) { var T, _ = E[b(e, G, z)]; if (G += 15 & _, (T = _ >>> 4) < 16) X[K++] = T; else { var U = 0, D = 0; for (16 == T ? (D = 3 + b(e, G, 3), G += 2, U = X[K - 1]) : 17 == T ? (D = 3 + b(e, G, 7), G += 3) : 18 == T && (D = 11 + b(e, G, 127), G += 7); D--;)X[K++] = U } } var P = X.subarray(0, M), J = X.subarray(M); R = v(P), x = v(J), w = h(P, R, 1), S = h(J, x, 1) } else B(1); if (G > W) { d && B(0); break } } C && A(Z + 131072); for (var O = (1 << R) - 1, j = (1 << x) - 1, Q = G; ; Q = G) { var q = (U = w[y(e, G) & O]) >>> 4; if ((G += 15 & U) > W) { d && B(0); break } if (U || B(2), q < 256) s[Z++] = q; else { if (256 == q) { Q = G, w = null; break } var $ = q - 254; if (q > 264) { var ee = r[K = q - 257]; $ = b(e, G, (1 << ee) - 1) + g[K], G += ee } var te = S[y(e, G) & j], ne = te >>> 4; if (te || B(3), G += 15 & te, J = u[ne], ne > 3 && (ee = a[ne], J += y(e, G) & (1 << ee) - 1, G += ee), G > W) { d && B(0); break } C && A(Z + 131072); for (var ie = Z + $; Z < ie; Z += 4)s[Z] = s[Z - J], s[Z + 1] = s[Z + 1 - J], s[Z + 2] = s[Z + 2 - J], s[Z + 3] = s[Z + 3 - J]; Z = ie } } l.l = w, l.p = Q, l.b = Z, w && (p = 1, l.m = R, l.d = S, l.n = x) } while (!p); return Z == s.length ? s : function (e, r, a) { (null == r || r < 0) && (r = 0), (null == a || a > e.length) && (a = e.length); var o = new (e instanceof n ? n : e instanceof i ? i : t)(a - r); return o.set(e.subarray(r, a)), o }(s, 0, Z) }, w = new t(0), S = "undefined" != typeof TextDecoder && new TextDecoder; try { S.decode(w, { stream: !0 }) } catch (e) { } return e.convert_streams = function (e) { var t = new DataView(e), n = 0; function i() { var e = t.getUint16(n); return n += 2, e } function r() { var e = t.getUint32(n); return n += 4, e } function a(e) { p.setUint16(f, e), f += 2 } function o(e) { p.setUint32(f, e), f += 4 } for (var s = { signature: r(), flavor: r(), length: r(), numTables: i(), reserved: i(), totalSfntSize: r(), majorVersion: i(), minorVersion: i(), metaOffset: r(), metaLength: r(), metaOrigLength: r(), privOffset: r(), privLength: r() }, l = 0; Math.pow(2, l) <= s.numTables;)l++; l--; for (var g = 16 * Math.pow(2, l), c = 16 * s.numTables - g, u = 12, C = [], d = 0; d < s.numTables; d++)C.push({ tag: r(), offset: r(), compLength: r(), origLength: r(), origChecksum: r() }), u += 16; var I, h = new Uint8Array(12 + 16 * C.length + C.reduce((function (e, t) { return e + t.origLength + 4 }), 0)), A = h.buffer, p = new DataView(A), f = 0; return o(s.flavor), a(s.numTables), a(g), a(l), a(c), C.forEach((function (e) { o(e.tag), o(e.origChecksum), o(u), o(e.origLength), e.outOffset = u, (u += e.origLength) % 4 != 0 && (u += 4 - u % 4) })), C.forEach((function (t) { var n, i = e.slice(t.offset, t.offset + t.compLength); if (t.compLength != t.origLength) { var r = new Uint8Array(t.origLength); n = new Uint8Array(i, 2), Z(n, r) } else r = new Uint8Array(i); h.set(r, t.outOffset); var a = 0; (u = t.outOffset + t.origLength) % 4 != 0 && (a = 4 - u % 4), h.set(new Uint8Array(a).buffer, t.outOffset + t.origLength), I = u + a })), A.slice(0, I) }, Object.defineProperty(e, "__esModule", { value: !0 }), e }({}).convert_streams }, function (e, t) { var n, i = { M: 2, L: 2, Q: 4, C: 6, Z: 0 }, a = { C: "18g,ca,368,1kz", D: "17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v", R: "17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6", L: "x9u,jff,a,fd,jv", T: "4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n" }, o = 1, s = 2, l = 4, g = 8, c = 16, u = 32; function C(e) { if (!n) { var t = { R: s, L: o, D: l, C: c, U: u, T: g }; n = new Map; var i = function (e) { var i = 0; a[e].split(",").forEach((function (a) { var o = a.split("+"), s = (0, r.Z)(o, 2), l = s[0], g = s[1]; l = parseInt(l, 36), g = g ? parseInt(g, 36) : 0, n.set(i += l, t[e]); for (var c = g; c--;)n.set(++i, t[e]) })) }; for (var C in a) i(C) } return n.get(e) || u } var d = 1, I = 2, h = 3, A = 4, p = [null, "isol", "init", "fina", "medi"]; function f(e) { for (var t = new Uint8Array(e.length), n = u, i = d, r = -1, a = 0; a < e.length; a++) { var p = e.codePointAt(a), f = 0 | C(p), m = d; f & g || (n & (o | l | c) ? f & (s | l | c) ? (m = h, i !== d && i !== h || t[r]++) : f & (o | u) && (i !== I && i !== A || t[r]--) : n & (s | u) && (i !== I && i !== A || t[r]--), i = t[a] = m, n = f, r = a, p > 65535 && a++) } return t } function m() { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; for (var i = 0; i < t.length; i++)if ("number" === typeof t[i]) return t[i] } function v(t) { var n = Object.create(null), r = t["OS/2"], a = t.hhea, o = t.head.unitsPerEm, s = m(r && r.sTypoAscender, a && a.ascender, o), l = { unitsPerEm: o, ascender: s, descender: m(r && r.sTypoDescender, a && a.descender, 0), capHeight: m(r && r.sCapHeight, s), xHeight: m(r && r.sxHeight, s), lineGap: m(r && r.sTypoLineGap, a && a.lineGap), forEachGlyph: function (r, a, o, s) { var g = 0, c = 1 / l.unitsPerEm * a, u = function (t, n) { for (var i = [], r = 0; r < n.length; r++) { var a = n.codePointAt(r); a > 65535 && r++, i.push(e.U.codeToGlyph(t, a)) } var o = t.GSUB; if (o) { var s, l = o.lookupList, g = o.featureList, c = /^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/, u = []; g.forEach((function (t) { if (c.test(t.tag)) for (var r = 0; r < t.tab.length; r++)if (!u[t.tab[r]]) { u[t.tab[r]] = !0; var a = l[t.tab[r]], o = /^(isol|init|fina|medi)$/.test(t.tag); o && !s && (s = f(n)); for (var g = 0; g < i.length; g++)s && o && p[s[g]] !== t.tag || e.U._applySubs(i, g, a, l) } })) } return i }(t, r), C = 0, d = -1; return u.forEach((function (l, u) { if (-1 !== l) { var I = n[l]; if (!I) { for (var h, A, p, f, m = e.U.glyphToPath(t, l), v = m.cmds, b = m.crds, y = "", G = 0, B = 0, Z = v.length; B < Z; B++) { var w = i[v[B]]; y += v[B]; for (var S = 1; S <= w; S++)y += (S > 1 ? "," : "") + b[G++] } if (b.length) { h = A = 1 / 0, p = f = -1 / 0; for (var R = 0, x = b.length; R < x; R += 2) { var W = b[R], V = b[R + 1]; W < h && (h = W), V < A && (A = V), W > p && (p = W), V > f && (f = V) } } else h = p = A = f = 0; I = n[l] = { index: l, advanceWidth: t.hmtx.aWidth[l], xMin: h, yMin: A, xMax: p, yMax: f, path: y, pathCommandCount: v.length } } -1 !== d && (g += e.U.getPairAdjustment(t, d, l) * c), s.call(null, I, g, C), I.advanceWidth && (g += I.advanceWidth * c), o && (g += o * a), d = l } C += r.codePointAt(C) > 65535 ? 2 : 1 })), g } }; return l } return function (n) { var i = new Uint8Array(n, 0, 4), r = e._bin.readASCII(i, 0, 4); if ("wOFF" === r) n = t(n); else if ("wOF2" === r) throw new Error("woff2 fonts not supported"); return v(e.parse(n)[0]) } }], init: function (e, t, n) { return n(e(), t()) } }), TZ = { defaultFontURL: "https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff", sdfGlyphSize: 64, sdfMargin: 1 / 16, sdfExponent: 9, textureWidth: 2048 }, _Z = new pc; function UZ() { return (self.performance || Date).now() } var DZ, PZ = Object.create(null); function JZ(e, t) { !0, e = jZ({}, e); var n = UZ(); if (e.font = function (e) { DZ || (DZ = "undefined" === typeof document ? {} : document.createElement("a")); return DZ.href = e, DZ.href }(e.font || TZ.defaultFontURL), e.text = "" + e.text, e.sdfGlyphSize = e.sdfGlyphSize || TZ.sdfGlyphSize, null != e.colorRanges) { var i = {}; for (var r in e.colorRanges) if (e.colorRanges.hasOwnProperty(r)) { var a = e.colorRanges[r]; "number" !== typeof a && (a = _Z.set(a).getHex()), i[r] = a } e.colorRanges = i } Object.freeze(e); var o = TZ.textureWidth, s = TZ.sdfExponent, l = e.sdfGlyphSize, g = o / l * 4, c = PZ[l]; if (!c) { var u = document.createElement("canvas"); u.width = o, u.height = 256 * l / g, (c = PZ[l] = { glyphCount: 0, sdfGlyphSize: l, sdfCanvas: u, sdfTexture: new zl(u, void 0, void 0, void 0, Ya, Ya), contextLost: !1, glyphsByFont: new Map }).sdfTexture.generateMipmaps = !1, function (e) { var t = e.sdfCanvas; t.addEventListener("webglcontextlost", (function (t) { console.log("Context Lost", t), t.preventDefault(), e.contextLost = !0 })), t.addEventListener("webglcontextrestored", (function (t) { console.log("Context Restored", t), e.contextLost = !1; var n = []; e.glyphsByFont.forEach((function (t) { t.forEach((function (t) { n.push(OZ(t, e, !0)) })) })), Promise.all(n).then((function () { QZ(e), e.sdfTexture.needsUpdate = !0 })) })) }(c) } var C = c, d = C.sdfTexture, I = C.sdfCanvas, h = c.glyphsByFont.get(e.font); h || c.glyphsByFont.set(e.font, h = new Map), $Z(e).then((function (i) { var r = i.glyphIds, a = i.glyphPositions, u = i.fontSize, C = i.unitsPerEm, A = i.timings, p = [], f = new Float32Array(4 * r.length), m = u / C, v = 0, b = 0, y = UZ(); r.forEach((function (e, t) { var n = h.get(e); if (!n) { var o = i.glyphData[e], s = o.path, g = o.pathBounds, u = Math.max(g[2] - g[0], g[3] - g[1]) / l * (TZ.sdfMargin * l + .5), C = c.glyphCount++, d = [g[0] - u, g[1] - u, g[2] + u, g[3] + u]; h.set(e, n = { path: s, atlasIndex: C, sdfViewBox: d }), p.push(n) } var I = n.sdfViewBox, A = a[b++], y = a[b++]; f[v++] = A + I[0] * m, f[v++] = y + I[1] * m, f[v++] = A + I[2] * m, f[v++] = y + I[3] * m, r[t] = n.atlasIndex })), A.quads = (A.quads || 0) + (UZ() - y); var G = UZ(); A.sdf = {}; var B = I.height, Z = Math.ceil(c.glyphCount / g), w = Math.pow(2, Math.ceil(Math.log2(Z * l))); w > B && (console.info("Increasing SDF texture size ".concat(B, "->").concat(w)), zZ(I, o, w), d.dispose()), Promise.all(p.map((function (t) { return OZ(t, c, e.gpuAccelerateSDF).then((function (e) { var n = e.timing; A.sdf[t.atlasIndex] = n })) }))).then((function () { p.length && !c.contextLost && (QZ(c), d.needsUpdate = !0), A.sdfTotal = UZ() - G, A.total = UZ() - n, t(Object.freeze({ parameters: e, sdfTexture: d, sdfGlyphSize: l, sdfExponent: s, glyphBounds: f, glyphAtlasIndices: r, glyphColors: i.glyphColors, caretPositions: i.caretPositions, caretHeight: i.caretHeight, chunkedBounds: i.chunkedBounds, ascender: i.ascender, descender: i.descender, lineHeight: i.lineHeight, capHeight: i.capHeight, xHeight: i.xHeight, topBaseline: i.topBaseline, blockBounds: i.blockBounds, visibleBounds: i.visibleBounds, timings: i.timings })) })) })), Promise.resolve().then((function () { c.contextLost || function (e) { e._warm || (VZ.webgl.isSupported(e), e._warm = !0) }(I) })) } function OZ(e, t, n) { var i = e.path, r = e.atlasIndex, a = e.sdfViewBox, o = t.sdfGlyphSize, s = t.sdfCanvas; if (t.contextLost) return Promise.resolve({ timing: -1 }); var l = TZ.textureWidth, g = TZ.sdfExponent, c = Math.max(a[2] - a[0], a[3] - a[1]), u = Math.floor(r / 4); return function (e, t, n, i, r, a, o, s, l, g) { return arguments.length > 10 && void 0 !== arguments[10] && !arguments[10] ? LZ(e, t, n, i, r, a, o, s, l, g) : FZ(e, t, n, i, r, a, o, s, l, g).then(null, (function (c) { return xZ || (console.warn("WebGL SDF generation failed, falling back to JS", c), xZ = !0), LZ(e, t, n, i, r, a, o, s, l, g) })) }(o, o, i, a, c, g, s, u % (l / o) * o, Math.floor(u / (l / o)) * o, r % 4, n) } function jZ(e, t) { for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]); return e } function QZ(e) { if ("function" !== typeof createImageBitmap) { console.info("Safari<15: applying SDF canvas workaround"); var t = e.sdfCanvas, n = e.sdfTexture, i = t.width, r = t.height, a = e.sdfCanvas.getContext("webgl"), o = n.image.data; o && o.length === i * r * 4 || (o = new Uint8Array(i * r * 4), n.image = { width: i, height: r, data: o }, n.flipY = !1, n.isDataTexture = !0), a.readPixels(0, 0, i, r, a.RGBA, a.UNSIGNED_BYTE, o) } } var qZ = cZ({ name: "Typesetter", dependencies: [TZ, EZ, function (e, t, n) { var i = n.defaultFontURL, a = Object.create(null), o = 1 / 0, s = /[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/, l = "[^\\S\\u00A0]", g = new RegExp("".concat(l, "|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]")); function c(t, n) { t || (t = i); var r = a[t]; r ? r.pending ? r.pending.push(n) : n(r) : (a[t] = { pending: [n] }, function (t, n) { !function r() { var a = function (e) { console.error("Failure loading font ".concat(t).concat(t === i ? "" : "; trying fallback"), e), t !== i && (t = i, r()) }; try { var o = new XMLHttpRequest; o.open("get", t, !0), o.responseType = "arraybuffer", o.onload = function () { if (o.status >= 400) a(new Error(o.statusText)); else if (o.status > 0) try { var t = e(o.response); n(t) } catch (i) { a(i) } }, o.onerror = a, o.send() } catch (s) { a(s) } }() }(t, (function (e) { var n = a[t].pending; a[t] = e, n.forEach((function (t) { return t(e) })) }))) } function u(e, n) { var a = e.text, u = void 0 === a ? "" : a, A = e.font, p = void 0 === A ? i : A, f = (e.sdfGlyphSize, e.fontSize), m = void 0 === f ? 1 : f, v = e.letterSpacing, b = void 0 === v ? 0 : v, y = e.lineHeight, G = void 0 === y ? "normal" : y, B = e.maxWidth, Z = void 0 === B ? o : B, w = e.direction, S = e.textAlign, R = void 0 === S ? "left" : S, x = e.textIndent, W = void 0 === x ? 0 : x, V = e.whiteSpace, k = void 0 === V ? "normal" : V, H = e.overflowWrap, M = void 0 === H ? "normal" : H, F = e.anchorX, N = void 0 === F ? 0 : F, X = e.anchorY, Y = void 0 === X ? 0 : X, K = e.includeCaretPositions, L = void 0 !== K && K, z = e.chunkedBoundsSize, E = void 0 === z ? 8192 : z, T = e.colorRanges, _ = void 0 === T ? null : T, U = arguments.length > 2 && void 0 !== arguments[2] && arguments[2], D = I(), P = { fontLoad: 0, typesetting: 0 }; u.indexOf("\r") > -1 && (console.info("Typesetter: got text with \\r chars; normalizing to \\n"), u = u.replace(/\r\n/g, "\n").replace(/\r/g, "\n")), m = +m, b = +b, Z = +Z, G = G || "normal", W = +W, c(p, (function (e) { var i = isFinite(Z), a = null, c = null, A = null, p = null, f = null, v = null, y = null, B = 0, S = 0, x = "nowrap" !== k, V = e.ascender, H = e.descender, F = e.unitsPerEm, X = e.lineGap, K = e.capHeight, z = e.xHeight; P.fontLoad = I() - D; var T = I(), J = m / F; "normal" === G && (G = (V - H + X) / F); var O = ((G *= m) - (V - H) * J) / 2, j = -(V * J + O), Q = Math.min(G, (V - H) * J), q = (V + H) / 2 * J - Q / 2, $ = W, ee = new h, te = [ee]; e.forEachGlyph(u, m, b, (function (e, t, n) { var r, a = u.charAt(n), o = e.advanceWidth * J, c = ee.count; if ("isEmpty" in e || (e.isWhitespace = !!a && new RegExp(l).test(a), e.canBreakAfter = !!a && g.test(a), e.isEmpty = e.xMin === e.xMax || e.yMin === e.yMax || s.test(a)), e.isWhitespace || e.isEmpty || S++, x && i && !e.isWhitespace && t + o + $ > Z && c) { if (ee.glyphAt(c - 1).glyphObj.canBreakAfter) r = new h, $ = -t; else for (var C = c; C--;) { if (0 === C && "break-word" === M) { r = new h, $ = -t; break } if (ee.glyphAt(C).glyphObj.canBreakAfter) { var d = (r = ee.splitAt(C + 1)).glyphAt(0).x; $ -= d; for (var I = r.count; I--;)r.glyphAt(I).x -= d; break } } r && (ee.isSoftWrapped = !0, ee = r, te.push(ee), B = Z) } var A = ee.glyphAt(ee.count); A.glyphObj = e, A.x = t + $, A.width = o, A.charIndex = n, "\n" === a && (ee = new h, te.push(ee), $ = -(t + o + b * m) + W) })), te.forEach((function (e) { for (var t = e.count; t--;) { var n = e.glyphAt(t), i = n.glyphObj, r = n.x, a = n.width; if (!i.isWhitespace) return e.width = r + a, void (e.width > B && (B = e.width)) } })); var ne = 0, ie = 0; if (N && ("number" === typeof N ? ne = -N : "string" === typeof N && (ne = -B * ("left" === N ? 0 : "center" === N ? .5 : "right" === N ? 1 : C(N)))), Y) if ("number" === typeof Y) ie = -Y; else if ("string" === typeof Y) { var re = te.length * G; ie = "top" === Y ? 0 : "top-baseline" === Y ? -j : "top-cap" === Y ? -j - K * J : "top-ex" === Y ? -j - z * J : "middle" === Y ? re / 2 : "bottom" === Y ? re : "bottom-baseline" === Y ? re - O + H * J : C(Y) * re } if (!U) { var ae = t.getEmbeddingLevels(u, w); a = new Uint16Array(S), c = new Float32Array(2 * S), A = {}, v = [o, o, -o, -o], y = []; var oe = j; L && (f = new Float32Array(3 * u.length)), _ && (p = new Uint8Array(3 * S)); var se, le, ge = 0, ce = -1, ue = -1; if (te.forEach((function (n, i) { var s = n.count, l = n.width; if (s > 0) { for (var g = 0, C = s; C-- && n.glyphAt(C).glyphObj.isWhitespace;)g++; var I = 0, h = 0; if ("center" === R) I = (B - l) / 2; else if ("right" === R) I = B - l; else if ("justify" === R && n.isSoftWrapped) { for (var m = 0, b = s - g; b--;)n.glyphAt(b).glyphObj.isWhitespace && m++; h = (B - l) / m } if (h || I) for (var Z = 0, w = 0; w < s; w++) { var S = n.glyphAt(w), x = S.glyphObj; S.x += I + Z, 0 !== h && x.isWhitespace && w < s - g && (Z += h, S.width += h) } for (var W, V = t.getReorderSegments(u, ae, n.glyphAt(0).charIndex, n.glyphAt(n.count - 1).charIndex), k = 0; k < V.length; k++)for (var H = (0, r.Z)(V[k], 2), M = H[0], F = H[1], N = 1 / 0, X = -1 / 0, Y = 0; Y < s; Y++)if (n.glyphAt(Y).charIndex >= M) { for (var K = Y, z = Y; z < s; z++) { var T = n.glyphAt(z); if (T.charIndex > F) break; z < s - g && (N = Math.min(N, T.x), X = Math.max(X, T.x + T.width)) } for (var U = K; U < z; U++) { var D = n.glyphAt(U); D.x = X - (D.x + D.width - N) } break } for (var P = function (e) { return W = e }, O = 0; O < s; O++) { var j = n.glyphAt(O), Q = (W = j.glyphObj).index, $ = 1 & ae.levels[j.charIndex]; if ($) { var ee = t.getMirroredCharacter(u[j.charIndex]); ee && e.forEachGlyph(ee, 0, 0, P) } if (L) { var te = j.charIndex, re = j.x + ne, Ce = j.x + j.width + ne; f[3 * te] = $ ? Ce : re, f[3 * te + 1] = $ ? re : Ce, f[3 * te + 2] = oe + q + ie; var de = te - ce; de > 1 && d(f, ce, de), ce = te } if (_) for (var Ie = j.charIndex; Ie > ue;)ue++, _.hasOwnProperty(ue) && (le = _[ue]); if (!W.isWhitespace && !W.isEmpty) { var he = ge++; A[Q] || (A[Q] = { path: W.path, pathBounds: [W.xMin, W.yMin, W.xMax, W.yMax] }); var Ae = j.x + ne, pe = oe + ie; c[2 * he] = Ae, c[2 * he + 1] = pe; var fe = Ae + W.xMin * J, me = pe + W.yMin * J, ve = Ae + W.xMax * J, be = pe + W.yMax * J; fe < v[0] && (v[0] = fe), me < v[1] && (v[1] = me), ve > v[2] && (v[2] = ve), be > v[3] && (v[3] = be), he % E === 0 && (se = { start: he, end: he, rect: [o, o, -o, -o] }, y.push(se)), se.end++; var ye = se.rect; if (fe < ye[0] && (ye[0] = fe), me < ye[1] && (ye[1] = me), ve > ye[2] && (ye[2] = ve), be > ye[3] && (ye[3] = be), a[he] = Q, _) { var Ge = 3 * he; p[Ge] = le >> 16 & 255, p[Ge + 1] = le >> 8 & 255, p[Ge + 2] = 255 & le } } } } oe -= G })), f) { var Ce = u.length - ce; Ce > 1 && d(f, ce, Ce) } } P.typesetting = I() - T, n({ glyphIds: a, glyphPositions: c, glyphData: A, caretPositions: f, caretHeight: Q, glyphColors: p, chunkedBounds: y, fontSize: m, unitsPerEm: F, ascender: V * J, descender: H * J, capHeight: K * J, xHeight: z * J, lineHeight: G, topBaseline: j, blockBounds: [ne, ie - te.length * G, ne + B, ie], visibleBounds: v, timings: P }) })) } function C(e) { var t = e.match(/^([\d.]+)%$/), n = t ? parseFloat(t[1]) : NaN; return isNaN(n) ? 0 : n / 100 } function d(e, t, n) { for (var i = e[3 * t], r = e[3 * t + 1], a = e[3 * t + 2], o = (r - i) / n, s = 0; s < n; s++) { var l = 3 * (t + s); e[l] = i + o * s, e[l + 1] = i + o * (s + 1), e[l + 2] = a } } function I() { return (self.performance || Date).now() } function h() { this.data = [] } var A = ["glyphObj", "x", "width", "charIndex"]; return h.prototype = { width: 0, isSoftWrapped: !1, get count() { return Math.ceil(this.data.length / A.length) }, glyphAt: function (e) { var t = h.flyweight; return t.data = this.data, t.index = e, t }, splitAt: function (e) { var t = new h; return t.data = this.data.splice(e * A.length), t } }, h.flyweight = A.reduce((function (e, t, n, i) { return Object.defineProperty(e, t, { get: function () { return this.data[this.index * A.length + n] }, set: function (e) { this.data[this.index * A.length + n] = e } }), e }), { data: null, index: 0 }), { typeset: u, measure: function (e, t) { u(e, (function (e) { var n = (0, r.Z)(e.blockBounds, 4), i = n[0], a = n[1], o = n[2], s = n[3]; t({ width: o - i, height: s - a }) }), { metricsOnly: !0 }) }, loadFont: c } }, IZ], init: function (e, t, n, i) { var r = e.defaultFontURL; return n(t, i(), { defaultFontURL: r }) } }), $Z = cZ({ name: "Typesetter", dependencies: [qZ], init: function (e) { return function (t) { return new Promise((function (n) { e.typeset(t, n) })) } }, getTransferables: function (e) { var t = [e.glyphPositions.buffer, e.glyphIds.buffer]; return e.caretPositions && t.push(e.caretPositions.buffer), e.glyphColors && t.push(e.glyphColors.buffer), t } }); var ew = {}; var tw = "aTroikaGlyphIndex", nw = function (e) { Ir(n, e); var t = fr(n); function n() { var e; return cr(this, n), (e = t.call(this)).detail = 1, e.curveRadius = 0, e.groups = [{ start: 0, count: 1 / 0, materialIndex: 0 }, { start: 0, count: 1 / 0, materialIndex: 1 }], e.boundingSphere = new fg, e.boundingBox = new eg, e } return dr(n, [{ key: "computeBoundingSphere", value: function () { } }, { key: "computeBoundingBox", value: function () { } }, { key: "setSide", value: function (e) { var t = this.getIndex().count; this.setDrawRange(e === Nr ? t / 2 : 0, e === Xr ? t : t / 2) } }, { key: "detail", get: function () { return this._detail }, set: function (e) { var t = this; if (e !== this._detail) { this._detail = e, ("number" !== typeof e || e < 1) && (e = 1); var n = function (e) { var t = ew[e]; if (!t) { for (var n = new ku(1, 1, e, e), i = n.clone(), r = n.attributes, a = i.attributes, o = new Uc, s = r.uv.count, l = 0; l < s; l++)a.position.array[3 * l] *= -1, a.normal.array[3 * l + 2] *= -1;["position", "normal", "uv"].forEach((function (e) { o.setAttribute(e, new Nc([].concat((0, v.Z)(r[e].array), (0, v.Z)(a[e].array)), r[e].itemSize)) })), o.setIndex([].concat((0, v.Z)(n.index.array), (0, v.Z)(i.index.array.map((function (e) { return e + s }))))), o.translate(.5, .5, 0), t = ew[e] = o } return t }(e);["position", "normal", "uv"].forEach((function (e) { t.attributes[e] = n.attributes[e].clone() })), this.setIndex(n.getIndex().clone()) } } }, { key: "curveRadius", get: function () { return this._curveRadius }, set: function (e) { e !== this._curveRadius && (this._curveRadius = e, this._updateBounds()) } }, { key: "updateGlyphs", value: function (e, t, n, i, r) { iw(this, "aTroikaGlyphBounds", e, 4), iw(this, tw, t, 1), iw(this, "aTroikaGlyphColor", r, 3), this._blockBounds = n, this._chunkedBounds = i, this.instanceCount = t.length, this._updateBounds() } }, { key: "_updateBounds", value: function () { var e = this._blockBounds; if (e) { var t = this.curveRadius, n = this.boundingBox; if (t) { var i = Math.PI, r = Math.floor, a = Math.min, o = Math.max, s = Math.sin, l = Math.cos, g = i / 2, c = 2 * i, u = Math.abs(t), C = e[0] / u, d = e[2] / u, I = r((C + g) / c) !== r((d + g) / c) ? -u : a(s(C) * u, s(d) * u), h = r((C - g) / c) !== r((d - g) / c) ? u : o(s(C) * u, s(d) * u), A = r((C + i) / c) !== r((d + i) / c) ? 2 * u : o(u - l(C) * u, u - l(d) * u); n.min.set(I, e[1], t < 0 ? -A : 0), n.max.set(h, e[3], t < 0 ? 0 : A) } else n.min.set(e[0], e[1], 0), n.max.set(e[2], e[3], 0); n.getBoundingSphere(this.boundingSphere) } } }, { key: "applyClipRect", value: function (e) { var t = this.getAttribute(tw).count, n = this._chunkedBounds; if (n) for (var i = n.length; i--;) { t = n[i].end; var r = n[i].rect; if (r[1] < e.w && r[3] > e.y && r[0] < e.z && r[2] > e.x) break } this.instanceCount = t } }]), n }(cf); function iw(e, t, n, i) { var r = e.getAttribute(t); n ? r && r.array.length === n.length ? (r.array.set(n), r.needsUpdate = !0) : (e.setAttribute(t, new jI(n, i)), delete e._maxInstanceCount, e.dispose()) : r && e.deleteAttribute(t) } var rw = "\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n".concat("\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n"), aw = "\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  ".concat("\n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  ", "\n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  ", "\n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n"); var ow = new mc({ color: 16777215, side: Xr, transparent: !0 }), sw = 8421504, lw = new Sg, gw = new Ql, cw = new Ql, uw = [], Cw = new Ql, dw = "+x+y"; function Iw(e) { return Array.isArray(e) ? e[0] : e } var hw = function () { var e = new gu(new ku(1, 1), ow); return hw = function () { return e }, e }, Aw = function () { var e = new gu(new ku(1, 1, 32, 1), ow); return Aw = function () { return e }, e }, pw = { type: "syncstart" }, fw = { type: "synccomplete" }, mw = ["font", "fontSize", "letterSpacing", "lineHeight", "maxWidth", "overflowWrap", "text", "direction", "textAlign", "textIndent", "whiteSpace", "anchorX", "anchorY", "colorRanges", "sdfGlyphSize"], vw = mw.concat("material", "color", "depthOffset", "clipRect", "curveRadius", "orientation", "glyphGeometryDetail"), bw = function (e) { Ir(n, e); var t = fr(n); function n() { var e; cr(this, n); var i = new nw; return (e = t.call(this, i, null)).text = "", e.anchorX = 0, e.anchorY = 0, e.curveRadius = 0, e.direction = "auto", e.font = null, e.fontSize = .1, e.letterSpacing = 0, e.lineHeight = "normal", e.maxWidth = 1 / 0, e.overflowWrap = "normal", e.textAlign = "left", e.textIndent = 0, e.whiteSpace = "normal", e.material = null, e.color = null, e.colorRanges = null, e.outlineWidth = 0, e.outlineColor = 0, e.outlineOpacity = 1, e.outlineBlur = 0, e.outlineOffsetX = 0, e.outlineOffsetY = 0, e.strokeWidth = 0, e.strokeColor = sw, e.strokeOpacity = 1, e.fillOpacity = 1, e.depthOffset = 0, e.clipRect = null, e.orientation = dw, e.glyphGeometryDetail = 1, e.sdfGlyphSize = null, e.gpuAccelerateSDF = !0, e.debugSDF = !1, e } return dr(n, [{ key: "sync", value: function (e) { var t = this; this._needsSync && (this._needsSync = !1, this._isSyncing ? (this._queuedSyncs || (this._queuedSyncs = [])).push(e) : (this._isSyncing = !0, this.dispatchEvent(pw), JZ({ text: this.text, font: this.font, fontSize: this.fontSize || .1, letterSpacing: this.letterSpacing || 0, lineHeight: this.lineHeight || "normal", maxWidth: this.maxWidth, direction: this.direction || "auto", textAlign: this.textAlign, textIndent: this.textIndent, whiteSpace: this.whiteSpace, overflowWrap: this.overflowWrap, anchorX: this.anchorX, anchorY: this.anchorY, colorRanges: this.colorRanges, includeCaretPositions: !0, sdfGlyphSize: this.sdfGlyphSize, gpuAccelerateSDF: this.gpuAccelerateSDF }, (function (n) { t._isSyncing = !1, t._textRenderInfo = n, t.geometry.updateGlyphs(n.glyphBounds, n.glyphAtlasIndices, n.blockBounds, n.chunkedBounds, n.glyphColors); var i = t._queuedSyncs; i && (t._queuedSyncs = null, t._needsSync = !0, t.sync((function () { i.forEach((function (e) { return e && e() })) }))), t.dispatchEvent(fw), e && e() })))) } }, { key: "onBeforeRender", value: function (e, t, n, i, r, a) { this.sync(), r.isTroikaTextMaterial && this._prepareForRender(r), r._hadOwnSide = r.hasOwnProperty("side"), this.geometry.setSide(r._actualSide = r.side), r.side = Fr } }, { key: "onAfterRender", value: function (e, t, n, i, r, a) { r._hadOwnSide ? r.side = r._actualSide : delete r.side } }, { key: "dispose", value: function () { this.geometry.dispose() } }, { key: "textRenderInfo", get: function () { return this._textRenderInfo || null } }, { key: "material", get: function () { var e = this._derivedMaterial, t = this._baseMaterial || this._defaultMaterial || (this._defaultMaterial = ow.clone()); if (e && e.baseMaterial === t || (e = this._derivedMaterial = function (e) { var t = BZ(e, { chained: !0, extensions: { derivatives: !0 }, uniforms: { uTroikaSDFTexture: { value: null }, uTroikaSDFTextureSize: { value: new fl }, uTroikaSDFGlyphSize: { value: 0 }, uTroikaSDFExponent: { value: 0 }, uTroikaTotalBounds: { value: new El(0, 0, 0, 0) }, uTroikaClipRect: { value: new El(0, 0, 0, 0) }, uTroikaDistanceOffset: { value: 0 }, uTroikaOutlineOpacity: { value: 0 }, uTroikaFillOpacity: { value: 1 }, uTroikaPositionOffset: { value: new fl }, uTroikaCurveRadius: { value: 0 }, uTroikaBlurRadius: { value: 0 }, uTroikaStrokeWidth: { value: 0 }, uTroikaStrokeColor: { value: new pc }, uTroikaStrokeOpacity: { value: 1 }, uTroikaOrient: { value: new ml }, uTroikaUseGlyphColors: { value: !0 }, uTroikaSDFDebug: { value: !1 } }, vertexDefs: "\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n", vertexTransform: rw, fragmentDefs: aw, fragmentColorTransform: "\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n", customRewriter: function (e) { var t = e.vertexShader, n = e.fragmentShader, i = /\buniform\s+vec3\s+diffuse\b/; return i.test(n) && (n = n.replace(i, "varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g, "vTroikaGlyphColor"), i.test(t) || (t = t.replace(hZ, "uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))), { vertexShader: t, fragmentShader: n } } }); return t.transparent = !0, Object.defineProperties(t, { isTroikaTextMaterial: { value: !0 }, shadowSide: { get: function () { return this.side }, set: function () { } } }), t }(t), t.addEventListener("dispose", (function n() { t.removeEventListener("dispose", n), e.dispose() }))), this.outlineWidth || this.outlineBlur || this.outlineOffsetX || this.outlineOffsetY) { var n = e._outlineMtl; return n || ((n = e._outlineMtl = Object.create(e, { id: { value: e.id + .1 } })).isTextOutlineMaterial = !0, n.depthWrite = !1, n.map = null, e.addEventListener("dispose", (function t() { e.removeEventListener("dispose", t), n.dispose() }))), [n, e] } return e }, set: function (e) { e && e.isTroikaTextMaterial ? (this._derivedMaterial = e, this._baseMaterial = e.baseMaterial) : this._baseMaterial = e } }, { key: "glyphGeometryDetail", get: function () { return this.geometry.detail }, set: function (e) { this.geometry.detail = e } }, { key: "curveRadius", get: function () { return this.geometry.curveRadius }, set: function (e) { this.geometry.curveRadius = e } }, { key: "customDepthMaterial", get: function () { return Iw(this.material).getDepthMaterial() } }, { key: "customDistanceMaterial", get: function () { return Iw(this.material).getDistanceMaterial() } }, { key: "_prepareForRender", value: function (e) { var t = e.isTextOutlineMaterial, n = e.uniforms, i = this.textRenderInfo; if (i) { var a = i.sdfTexture, o = i.blockBounds; n.uTroikaSDFTexture.value = a, n.uTroikaSDFTextureSize.value.set(a.image.width, a.image.height), n.uTroikaSDFGlyphSize.value = i.sdfGlyphSize, n.uTroikaSDFExponent.value = i.sdfExponent, n.uTroikaTotalBounds.value.fromArray(o), n.uTroikaUseGlyphColors.value = !t && !!i.glyphColors; var s, l, g, c = 0, u = 0, C = 0, d = 0, I = 0; if (t) { var h = this.outlineWidth, A = this.outlineOffsetX, p = this.outlineOffsetY, f = this.outlineBlur, m = this.outlineOpacity; c = this._parsePercent(h) || 0, u = Math.max(0, this._parsePercent(f) || 0), s = m, d = this._parsePercent(A) || 0, I = this._parsePercent(p) || 0 } else (C = Math.max(0, this._parsePercent(this.strokeWidth) || 0)) && (g = this.strokeColor, n.uTroikaStrokeColor.value.set(null == g ? sw : g), null == (l = this.strokeOpacity) && (l = 1)), s = this.fillOpacity; n.uTroikaDistanceOffset.value = c, n.uTroikaPositionOffset.value.set(d, I), n.uTroikaBlurRadius.value = u, n.uTroikaStrokeWidth.value = C, n.uTroikaStrokeOpacity.value = l, n.uTroikaFillOpacity.value = null == s ? 1 : s, n.uTroikaCurveRadius.value = this.curveRadius || 0; var v = this.clipRect; if (v && Array.isArray(v) && 4 === v.length) n.uTroikaClipRect.value.fromArray(v); else { var b = 100 * (this.fontSize || .1); n.uTroikaClipRect.value.set(o[0] - b, o[1] - b, o[2] + b, o[3] + b) } this.geometry.applyClipRect(n.uTroikaClipRect.value) } n.uTroikaSDFDebug.value = !!this.debugSDF, e.polygonOffset = !!this.depthOffset, e.polygonOffsetFactor = e.polygonOffsetUnits = this.depthOffset || 0; var y = t ? this.outlineColor || 0 : this.color; if (null == y) delete e.color; else { var G = e.hasOwnProperty("color") ? e.color : e.color = new pc; y === G._input && "object" !== typeof y || G.set(G._input = y) } var B = this.orientation || dw; if (B !== e._orientation) { var Z = n.uTroikaOrient.value, w = (B = B.replace(/[^-+xyz]/g, "")) !== dw && B.match(/^([-+])([xyz])([-+])([xyz])$/); if (w) { var S = (0, r.Z)(w, 5), R = S[1], x = S[2], W = S[3], V = S[4]; gw.set(0, 0, 0)[x] = "-" === R ? 1 : -1, cw.set(0, 0, 0)[V] = "-" === W ? -1 : 1, lw.lookAt(Cw, gw.cross(cw), cw), Z.setFromMatrix4(lw) } else Z.identity(); e._orientation = B } } }, { key: "_parsePercent", value: function (e) { if ("string" === typeof e) { var t = e.match(/^(-?[\d.]+)%$/), n = t ? parseFloat(t[1]) : NaN; e = (isNaN(n) ? 0 : n / 100) * this.fontSize } return e } }, { key: "localPositionToTextCoords", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new fl; t.copy(e); var n = this.curveRadius; return n && (t.x = Math.atan2(e.x, Math.abs(n) - Math.abs(e.z)) * Math.abs(n)), t } }, { key: "worldPositionToTextCoords", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new fl; return gw.copy(e), this.localPositionToTextCoords(this.worldToLocal(gw), t) } }, { key: "raycast", value: function (e, t) { var n = this.textRenderInfo, i = this.curveRadius; if (n) { for (var r = n.blockBounds, a = i ? Aw() : hw(), o = a.geometry, s = o.attributes, l = s.position, g = s.uv, c = 0; c < g.count; c++) { var u = r[0] + g.getX(c) * (r[2] - r[0]), C = r[1] + g.getY(c) * (r[3] - r[1]), d = 0; i && (d = i - Math.cos(u / i) * i, u = Math.sin(u / i) * i), l.setXYZ(c, u, C, d) } o.boundingSphere = this.geometry.boundingSphere, o.boundingBox = this.geometry.boundingBox, a.matrixWorld = this.matrixWorld, a.material.side = this.material.side, uw.length = 0, a.raycast(e, uw); for (var I = 0; I < uw.length; I++)uw[I].object = this, t.push(uw[I]) } } }, { key: "copy", value: function (e) { var t = this, i = this.geometry; return yr(hr(n.prototype), "copy", this).call(this, e), this.geometry = i, vw.forEach((function (n) { t[n] = e[n] })), this } }, { key: "clone", value: function () { return (new this.constructor).copy(this) } }]), n }(gu); mw.forEach((function (e) { var t = "_private_" + e; Object.defineProperty(bw.prototype, e, { get: function () { return this[t] }, set: function (e) { e !== this[t] && (this[t] = e, this._needsSync = !0) } }) })); new WeakMap; new WeakMap; var yw, Gw = ["sdfGlyphSize", "anchorX", "anchorY", "font", "fontSize", "children", "characters", "onSync"], Bw = t.forwardRef((function (e, n) { var i = e.sdfGlyphSize, a = void 0 === i ? 64 : i, o = e.anchorX, s = void 0 === o ? "center" : o, l = e.anchorY, g = void 0 === l ? "middle" : l, u = e.font, C = e.fontSize, d = void 0 === C ? 1 : C, I = e.children, h = e.characters, A = e.onSync, p = or(e, Gw), f = jv((function (e) { return e.invalidate })), m = t.useState((function () { return new bw })), v = (0, r.Z)(m, 1)[0], b = t.useMemo((function () { var e = [], n = ""; return t.Children.forEach(I, (function (t) { "string" === typeof t || "number" === typeof t ? n += t : e.push(t) })), [e, n] }), [I]), y = (0, r.Z)(b, 2), G = y[0], B = y[1]; return tv((function () { return new Promise((function (e) { return function (e, t) { var n = e.font, i = e.characters; JZ({ font: n, sdfGlyphSize: e.sdfGlyphSize, text: Array.isArray(i) ? i.join("\n") : "" + i }, t) }({ font: u, characters: h }, e) })) }), ["troika-text", u, h]), t.useLayoutEffect((function () { v.sync((function () { f(), A && A(v) })) })), t.useEffect((function () { return function () { return v.dispose() } }), [v]), t.createElement("primitive", (0, c.Z)({ object: v, ref: n, font: u, text: B, anchorX: s, anchorY: g, fontSize: d, sdfGlyphSize: a }, p), G) })), Zw = Object.defineProperty, ww = function (e, t, n) { return function (e, t, n) { t in e ? Zw(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n }(e, "symbol" !== typeof t ? t + "" : t, n), n }, Sw = new wg, Rw = new wu, xw = Math.cos(Math.PI / 180 * 70), Ww = function (e, t) { return (e % t + t) % t }, Vw = function (e) { Ir(n, e); var t = fr(n); function n(e, i) { var r; cr(this, n), r = t.call(this), ww(y(r), "object"), ww(y(r), "domElement"), ww(y(r), "enabled", !0), ww(y(r), "target", new Ql), ww(y(r), "minDistance", 0), ww(y(r), "maxDistance", 1 / 0), ww(y(r), "minZoom", 0), ww(y(r), "maxZoom", 1 / 0), ww(y(r), "minPolarAngle", 0), ww(y(r), "maxPolarAngle", Math.PI), ww(y(r), "minAzimuthAngle", -1 / 0), ww(y(r), "maxAzimuthAngle", 1 / 0), ww(y(r), "enableDamping", !1), ww(y(r), "dampingFactor", .05), ww(y(r), "enableZoom", !0), ww(y(r), "zoomSpeed", 1), ww(y(r), "enableRotate", !0), ww(y(r), "rotateSpeed", 1), ww(y(r), "enablePan", !0), ww(y(r), "panSpeed", 1), ww(y(r), "screenSpacePanning", !0), ww(y(r), "keyPanSpeed", 7), ww(y(r), "zoomToCursor", !1), ww(y(r), "autoRotate", !1), ww(y(r), "autoRotateSpeed", 2), ww(y(r), "reverseOrbit", !1), ww(y(r), "reverseHorizontalOrbit", !1), ww(y(r), "reverseVerticalOrbit", !1), ww(y(r), "keys", { LEFT: "ArrowLeft", UP: "ArrowUp", RIGHT: "ArrowRight", BOTTOM: "ArrowDown" }), ww(y(r), "mouseButtons", { LEFT: Zr.ROTATE, MIDDLE: Zr.DOLLY, RIGHT: Zr.PAN }), ww(y(r), "touches", { ONE: wr.ROTATE, TWO: wr.DOLLY_PAN }), ww(y(r), "target0"), ww(y(r), "position0"), ww(y(r), "zoom0"), ww(y(r), "_domElementKeyEvents", null), ww(y(r), "getPolarAngle"), ww(y(r), "getAzimuthalAngle"), ww(y(r), "setPolarAngle"), ww(y(r), "setAzimuthalAngle"), ww(y(r), "getDistance"), ww(y(r), "listenToKeyEvents"), ww(y(r), "stopListenToKeyEvents"), ww(y(r), "saveState"), ww(y(r), "reset"), ww(y(r), "update"), ww(y(r), "connect"), ww(y(r), "dispose"), r.object = e, r.domElement = i, r.target0 = r.target.clone(), r.position0 = r.object.position.clone(), r.zoom0 = r.object.zoom, r.getPolarAngle = function () { return C.phi }, r.getAzimuthalAngle = function () { return C.theta }, r.setPolarAngle = function (e) { var t = Ww(e, 2 * Math.PI), n = C.phi; n < 0 && (n += 2 * Math.PI), t < 0 && (t += 2 * Math.PI); var i = Math.abs(t - n); 2 * Math.PI - i < i && (t < n ? t += 2 * Math.PI : n += 2 * Math.PI), d.phi = t - n, a.update() }, r.setAzimuthalAngle = function (e) { var t = Ww(e, 2 * Math.PI), n = C.theta; n < 0 && (n += 2 * Math.PI), t < 0 && (t += 2 * Math.PI); var i = Math.abs(t - n); 2 * Math.PI - i < i && (t < n ? t += 2 * Math.PI : n += 2 * Math.PI), d.theta = t - n, a.update() }, r.getDistance = function () { return a.object.position.distanceTo(a.target) }, r.listenToKeyEvents = function (e) { e.addEventListener("keydown", ee), r._domElementKeyEvents = e }, r.stopListenToKeyEvents = function () { r._domElementKeyEvents.removeEventListener("keydown", ee), r._domElementKeyEvents = null }, r.saveState = function () { a.target0.copy(a.target), a.position0.copy(a.object.position), a.zoom0 = a.object.zoom }, r.reset = function () { a.target.copy(a.target0), a.object.position.copy(a.position0), a.object.zoom = a.zoom0, a.object.updateProjectionMatrix(), a.dispatchEvent(o), a.update(), c = g.NONE }, r.update = function () { var t = new Ql, n = new Ql(0, 1, 0), i = (new jl).setFromUnitVectors(e.up, n), r = i.clone().invert(), s = new Ql, l = new jl, A = 2 * Math.PI; return function () { var p = a.object.position; i.setFromUnitVectors(e.up, n), r.copy(i).invert(), t.copy(p).sub(a.target), t.applyQuaternion(i), C.setFromVector3(t), a.autoRotate && c === g.NONE && k(2 * Math.PI / 60 / 60 * a.autoRotateSpeed), a.enableDamping ? (C.theta += d.theta * a.dampingFactor, C.phi += d.phi * a.dampingFactor) : (C.theta += d.theta, C.phi += d.phi); var f = a.minAzimuthAngle, m = a.maxAzimuthAngle; isFinite(f) && isFinite(m) && (f < -Math.PI ? f += A : f > Math.PI && (f -= A), m < -Math.PI ? m += A : m > Math.PI && (m -= A), C.theta = f <= m ? Math.max(f, Math.min(m, C.theta)) : C.theta > (f + m) / 2 ? Math.max(f, C.theta) : Math.min(m, C.theta)), C.phi = Math.max(a.minPolarAngle, Math.min(a.maxPolarAngle, C.phi)), C.makeSafe(), !0 === a.enableDamping ? a.target.addScaledVector(h, a.dampingFactor) : a.target.add(h), a.zoomToCursor && R || a.object.isOrthographicCamera ? C.radius = L(C.radius) : C.radius = L(C.radius * I), t.setFromSpherical(C), t.applyQuaternion(r), p.copy(a.target).add(t), a.object.lookAt(a.target), !0 === a.enableDamping ? (d.theta *= 1 - a.dampingFactor, d.phi *= 1 - a.dampingFactor, h.multiplyScalar(1 - a.dampingFactor)) : (d.set(0, 0, 0), h.set(0, 0, 0)); var v = !1; if (a.zoomToCursor && R) { var b = null; if (a.object instanceof fu && a.object.isPerspectiveCamera) { var y = t.length(), G = y - (b = L(y * I)); a.object.position.addScaledVector(w, G), a.object.updateMatrixWorld() } else if (a.object.isOrthographicCamera) { var B = new Ql(S.x, S.y, 0); B.unproject(a.object), a.object.zoom = Math.max(a.minZoom, Math.min(a.maxZoom, a.object.zoom / I)), a.object.updateProjectionMatrix(), v = !0; var Z = new Ql(S.x, S.y, 0); Z.unproject(a.object), a.object.position.sub(Z).add(B), a.object.updateMatrixWorld(), b = t.length() } else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."), a.zoomToCursor = !1; null !== b && (a.screenSpacePanning ? a.target.set(0, 0, -1).transformDirection(a.object.matrix).multiplyScalar(b).add(a.object.position) : (Sw.origin.copy(a.object.position), Sw.direction.set(0, 0, -1).transformDirection(a.object.matrix), Math.abs(a.object.up.dot(Sw.direction)) < xw ? e.lookAt(a.target) : (Rw.setFromNormalAndCoplanarPoint(a.object.up, a.target), Sw.intersectPlane(Rw, a.target)))) } else a.object instanceof Tu && a.object.isOrthographicCamera && (a.object.zoom = Math.max(a.minZoom, Math.min(a.maxZoom, a.object.zoom / I)), a.object.updateProjectionMatrix(), v = !0); return I = 1, R = !1, !!(v || s.distanceToSquared(a.object.position) > u || 8 * (1 - l.dot(a.object.quaternion)) > u) && (a.dispatchEvent(o), s.copy(a.object.position), l.copy(a.object.quaternion), v = !1, !0) } }(), r.connect = function (e) { e === document && console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'), a.domElement = e, a.domElement.style.touchAction = "none", a.domElement.addEventListener("contextmenu", te), a.domElement.addEventListener("pointerdown", O), a.domElement.addEventListener("pointercancel", q), a.domElement.addEventListener("wheel", $) }, r.dispose = function () { var e, t, n, i, r, o; null == (e = a.domElement) || e.removeEventListener("contextmenu", te), null == (t = a.domElement) || t.removeEventListener("pointerdown", O), null == (n = a.domElement) || n.removeEventListener("pointercancel", q), null == (i = a.domElement) || i.removeEventListener("wheel", $), null == (r = a.domElement) || r.ownerDocument.removeEventListener("pointermove", j), null == (o = a.domElement) || o.ownerDocument.removeEventListener("pointerup", Q), null !== a._domElementKeyEvents && a._domElementKeyEvents.removeEventListener("keydown", ee) }; var a = y(r), o = { type: "change" }, s = { type: "start" }, l = { type: "end" }, g = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_PAN: 4, TOUCH_DOLLY_PAN: 5, TOUCH_DOLLY_ROTATE: 6 }, c = g.NONE, u = 1e-6, C = new rm, d = new rm, I = 1, h = new Ql, A = new fl, p = new fl, f = new fl, m = new fl, v = new fl, b = new fl, G = new fl, B = new fl, Z = new fl, w = new Ql, S = new fl, R = !1, x = [], W = {}; function V() { return Math.pow(.95, a.zoomSpeed) } function k(e) { a.reverseOrbit || a.reverseHorizontalOrbit ? d.theta += e : d.theta -= e } function H(e) { a.reverseOrbit || a.reverseVerticalOrbit ? d.phi += e : d.phi -= e } var M = function () { var e = new Ql; return function (t, n) { e.setFromMatrixColumn(n, 0), e.multiplyScalar(-t), h.add(e) } }(), F = function () { var e = new Ql; return function (t, n) { !0 === a.screenSpacePanning ? e.setFromMatrixColumn(n, 1) : (e.setFromMatrixColumn(n, 0), e.crossVectors(a.object.up, e)), e.multiplyScalar(t), h.add(e) } }(), N = function () { var e = new Ql; return function (t, n) { var i = a.domElement; if (i && a.object instanceof fu && a.object.isPerspectiveCamera) { var r = a.object.position; e.copy(r).sub(a.target); var o = e.length(); o *= Math.tan(a.object.fov / 2 * Math.PI / 180), M(2 * t * o / i.clientHeight, a.object.matrix), F(2 * n * o / i.clientHeight, a.object.matrix) } else i && a.object instanceof Tu && a.object.isOrthographicCamera ? (M(t * (a.object.right - a.object.left) / a.object.zoom / i.clientWidth, a.object.matrix), F(n * (a.object.top - a.object.bottom) / a.object.zoom / i.clientHeight, a.object.matrix)) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."), a.enablePan = !1) } }(); function X(e) { a.object instanceof fu && a.object.isPerspectiveCamera || a.object instanceof Tu && a.object.isOrthographicCamera ? I /= e : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."), a.enableZoom = !1) } function Y(e) { a.object instanceof fu && a.object.isPerspectiveCamera || a.object instanceof Tu && a.object.isOrthographicCamera ? I *= e : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."), a.enableZoom = !1) } function K(e) { if (a.zoomToCursor && a.domElement) { R = !0; var t = a.domElement.getBoundingClientRect(), n = e.clientX - t.left, i = e.clientY - t.top, r = t.width, o = t.height; S.x = n / r * 2 - 1, S.y = -i / o * 2 + 1, w.set(S.x, S.y, 1).unproject(a.object).sub(a.object.position).normalize() } } function L(e) { return Math.max(a.minDistance, Math.min(a.maxDistance, e)) } function z(e) { A.set(e.clientX, e.clientY) } function E(e) { m.set(e.clientX, e.clientY) } function T() { if (1 == x.length) A.set(x[0].pageX, x[0].pageY); else { var e = .5 * (x[0].pageX + x[1].pageX), t = .5 * (x[0].pageY + x[1].pageY); A.set(e, t) } } function _() { if (1 == x.length) m.set(x[0].pageX, x[0].pageY); else { var e = .5 * (x[0].pageX + x[1].pageX), t = .5 * (x[0].pageY + x[1].pageY); m.set(e, t) } } function U() { var e = x[0].pageX - x[1].pageX, t = x[0].pageY - x[1].pageY, n = Math.sqrt(e * e + t * t); G.set(0, n) } function D(e) { if (1 == x.length) p.set(e.pageX, e.pageY); else { var t = re(e), n = .5 * (e.pageX + t.x), i = .5 * (e.pageY + t.y); p.set(n, i) } f.subVectors(p, A).multiplyScalar(a.rotateSpeed); var r = a.domElement; r && (k(2 * Math.PI * f.x / r.clientHeight), H(2 * Math.PI * f.y / r.clientHeight)), A.copy(p) } function P(e) { if (1 == x.length) v.set(e.pageX, e.pageY); else { var t = re(e), n = .5 * (e.pageX + t.x), i = .5 * (e.pageY + t.y); v.set(n, i) } b.subVectors(v, m).multiplyScalar(a.panSpeed), N(b.x, b.y), m.copy(v) } function J(e) { var t = re(e), n = e.pageX - t.x, i = e.pageY - t.y, r = Math.sqrt(n * n + i * i); B.set(0, r), Z.set(0, Math.pow(B.y / G.y, a.zoomSpeed)), X(Z.y), G.copy(B) } function O(e) { var t, n; !1 !== a.enabled && (0 === x.length && (null == (t = a.domElement) || t.ownerDocument.addEventListener("pointermove", j), null == (n = a.domElement) || n.ownerDocument.addEventListener("pointerup", Q)), function (e) { x.push(e) }(e), "touch" === e.pointerType ? function (e) { switch (ie(e), x.length) { case 1: switch (a.touches.ONE) { case wr.ROTATE: if (!1 === a.enableRotate) return; T(), c = g.TOUCH_ROTATE; break; case wr.PAN: if (!1 === a.enablePan) return; _(), c = g.TOUCH_PAN; break; default: c = g.NONE }break; case 2: switch (a.touches.TWO) { case wr.DOLLY_PAN: if (!1 === a.enableZoom && !1 === a.enablePan) return; a.enableZoom && U(), a.enablePan && _(), c = g.TOUCH_DOLLY_PAN; break; case wr.DOLLY_ROTATE: if (!1 === a.enableZoom && !1 === a.enableRotate) return; a.enableZoom && U(), a.enableRotate && T(), c = g.TOUCH_DOLLY_ROTATE; break; default: c = g.NONE }break; default: c = g.NONE }c !== g.NONE && a.dispatchEvent(s) }(e) : function (e) { var t; switch (e.button) { case 0: t = a.mouseButtons.LEFT; break; case 1: t = a.mouseButtons.MIDDLE; break; case 2: t = a.mouseButtons.RIGHT; break; default: t = -1 }switch (t) { case Zr.DOLLY: if (!1 === a.enableZoom) return; !function (e) { K(e), G.set(e.clientX, e.clientY) }(e), c = g.DOLLY; break; case Zr.ROTATE: if (e.ctrlKey || e.metaKey || e.shiftKey) { if (!1 === a.enablePan) return; E(e), c = g.PAN } else { if (!1 === a.enableRotate) return; z(e), c = g.ROTATE } break; case Zr.PAN: if (e.ctrlKey || e.metaKey || e.shiftKey) { if (!1 === a.enableRotate) return; z(e), c = g.ROTATE } else { if (!1 === a.enablePan) return; E(e), c = g.PAN } break; default: c = g.NONE }c !== g.NONE && a.dispatchEvent(s) }(e)) } function j(e) { !1 !== a.enabled && ("touch" === e.pointerType ? function (e) { switch (ie(e), c) { case g.TOUCH_ROTATE: if (!1 === a.enableRotate) return; D(e), a.update(); break; case g.TOUCH_PAN: if (!1 === a.enablePan) return; P(e), a.update(); break; case g.TOUCH_DOLLY_PAN: if (!1 === a.enableZoom && !1 === a.enablePan) return; !function (e) { a.enableZoom && J(e), a.enablePan && P(e) }(e), a.update(); break; case g.TOUCH_DOLLY_ROTATE: if (!1 === a.enableZoom && !1 === a.enableRotate) return; !function (e) { a.enableZoom && J(e), a.enableRotate && D(e) }(e), a.update(); break; default: c = g.NONE } }(e) : function (e) { if (!1 === a.enabled) return; switch (c) { case g.ROTATE: if (!1 === a.enableRotate) return; !function (e) { p.set(e.clientX, e.clientY), f.subVectors(p, A).multiplyScalar(a.rotateSpeed); var t = a.domElement; t && (k(2 * Math.PI * f.x / t.clientHeight), H(2 * Math.PI * f.y / t.clientHeight)), A.copy(p), a.update() }(e); break; case g.DOLLY: if (!1 === a.enableZoom) return; !function (e) { B.set(e.clientX, e.clientY), Z.subVectors(B, G), Z.y > 0 ? X(V()) : Z.y < 0 && Y(V()), G.copy(B), a.update() }(e); break; case g.PAN: if (!1 === a.enablePan) return; !function (e) { v.set(e.clientX, e.clientY), b.subVectors(v, m).multiplyScalar(a.panSpeed), N(b.x, b.y), m.copy(v), a.update() }(e) } }(e)) } function Q(e) { var t, n, i; ne(e), 0 === x.length && (null == (t = a.domElement) || t.releasePointerCapture(e.pointerId), null == (n = a.domElement) || n.ownerDocument.removeEventListener("pointermove", j), null == (i = a.domElement) || i.ownerDocument.removeEventListener("pointerup", Q)), a.dispatchEvent(l), c = g.NONE } function q(e) { ne(e) } function $(e) { !1 === a.enabled || !1 === a.enableZoom || c !== g.NONE && c !== g.ROTATE || (e.preventDefault(), a.dispatchEvent(s), function (e) { K(e), e.deltaY < 0 ? Y(V()) : e.deltaY > 0 && X(V()), a.update() }(e), a.dispatchEvent(l)) } function ee(e) { !1 !== a.enabled && !1 !== a.enablePan && function (e) { var t = !1; switch (e.code) { case a.keys.UP: N(0, a.keyPanSpeed), t = !0; break; case a.keys.BOTTOM: N(0, -a.keyPanSpeed), t = !0; break; case a.keys.LEFT: N(a.keyPanSpeed, 0), t = !0; break; case a.keys.RIGHT: N(-a.keyPanSpeed, 0), t = !0 }t && (e.preventDefault(), a.update()) }(e) } function te(e) { !1 !== a.enabled && e.preventDefault() } function ne(e) { delete W[e.pointerId]; for (var t = 0; t < x.length; t++)if (x[t].pointerId == e.pointerId) return void x.splice(t, 1) } function ie(e) { var t = W[e.pointerId]; void 0 === t && (t = new fl, W[e.pointerId] = t), t.set(e.pageX, e.pageY) } function re(e) { var t = e.pointerId === x[0].pointerId ? x[1] : x[0]; return W[t.pointerId] } return void 0 !== i && r.connect(i), r.update(), r } return dr(n) }(il), kw = ["makeDefault", "camera", "regress", "domElement", "enableDamping", "keyEvents", "onChange", "onStart", "onEnd"], Hw = t.forwardRef((function (e, n) { var i = e.makeDefault, r = e.camera, a = e.regress, o = e.domElement, s = e.enableDamping, l = void 0 === s || s, g = e.keyEvents, u = void 0 !== g && g, C = e.onChange, d = e.onStart, I = e.onEnd, h = or(e, kw), A = jv((function (e) { return e.invalidate })), p = jv((function (e) { return e.camera })), f = jv((function (e) { return e.gl })), m = jv((function (e) { return e.events })), v = jv((function (e) { return e.setEvents })), b = jv((function (e) { return e.set })), y = jv((function (e) { return e.get })), G = jv((function (e) { return e.performance })), B = r || p, Z = o || m.connected || f.domElement, w = t.useMemo((function () { return new Vw(B) }), [B]); return Qv((function () { w.enabled && w.update() }), -1), t.useEffect((function () { return u && w.connect(!0 === u ? Z : u), w.connect(Z), function () { w.dispose() } }), [u, Z, a, w, A]), t.useEffect((function () { var e = function (e) { A(), a && G.regress(), C && C(e) }, t = function (e) { d && d(e) }, n = function (e) { I && I(e) }; return w.addEventListener("change", e), w.addEventListener("start", t), w.addEventListener("end", n), function () { w.removeEventListener("start", t), w.removeEventListener("end", n), w.removeEventListener("change", e) } }), [C, d, I, w, A, v]), t.useEffect((function () { if (i) { var e = y().controls; return b({ controls: w }), function () { return b({ controls: e }) } } }), [i, w]), t.createElement("primitive", (0, c.Z)({ ref: n, object: w, enableDamping: l }, h)) })), Mw = new WeakMap, Fw = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this, e)).decoderPath = "", i.decoderConfig = {}, i.decoderBinary = null, i.decoderPending = null, i.workerLimit = 4, i.workerPool = [], i.workerNextTaskID = 1, i.workerSourceURL = "", i.defaultAttributeIDs = { position: "POSITION", normal: "NORMAL", color: "COLOR", uv: "TEX_COORD" }, i.defaultAttributeTypes = { position: "Float32Array", normal: "Float32Array", color: "Float32Array", uv: "Float32Array" }, i } return dr(n, [{ key: "setDecoderPath", value: function (e) { return this.decoderPath = e, this } }, { key: "setDecoderConfig", value: function (e) { return this.decoderConfig = e, this } }, { key: "setWorkerLimit", value: function (e) { return this.workerLimit = e, this } }, { key: "load", value: function (e, t, n, i) { var r = this, a = new Fp(this.manager); a.setPath(this.path), a.setResponseType("arraybuffer"), a.setRequestHeader(this.requestHeader), a.setWithCredentials(this.withCredentials), a.load(e, (function (e) { var n = { attributeIDs: r.defaultAttributeIDs, attributeTypes: r.defaultAttributeTypes, useUniqueIDs: !1 }; r.decodeGeometry(e, n).then(t).catch(i) }), n, i) } }, { key: "decodeDracoFile", value: function (e, t, n, i) { var r = { attributeIDs: n || this.defaultAttributeIDs, attributeTypes: i || this.defaultAttributeTypes, useUniqueIDs: !!n }; this.decodeGeometry(e, r).then(t) } }, { key: "decodeGeometry", value: function (e, t) { var n = this; for (var i in t.attributeTypes) { var r = t.attributeTypes[i]; void 0 !== r.BYTES_PER_ELEMENT && (t.attributeTypes[i] = r.name) } var a, o = JSON.stringify(t); if (Mw.has(e)) { var s = Mw.get(e); if (s.key === o) return s.promise; if (0 === e.byteLength) throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.") } var l = this.workerNextTaskID++, g = e.byteLength, c = this._getWorker(l, g).then((function (n) { return a = n, new Promise((function (n, i) { a._callbacks[l] = { resolve: n, reject: i }, a.postMessage({ type: "decode", id: l, taskConfig: t, buffer: e }, [e]) })) })).then((function (e) { return n._createGeometry(e.geometry) })); return c.catch((function () { return !0 })).then((function () { a && l && n._releaseTask(a, l) })), Mw.set(e, { key: o, promise: c }), c } }, { key: "_createGeometry", value: function (e) { var t = new Uc; e.index && t.setIndex(new Sc(e.index.array, 1)); for (var n = 0; n < e.attributes.length; n++) { var i = e.attributes[n], r = i.name, a = i.array, o = i.itemSize; t.setAttribute(r, new Sc(a, o)) } return t } }, { key: "_loadLibrary", value: function (e, t) { var n = new Fp(this.manager); return n.setPath(this.decoderPath), n.setResponseType(t), n.setWithCredentials(this.withCredentials), new Promise((function (t, i) { n.load(e, t, void 0, i) })) } }, { key: "preload", value: function () { return this._initDecoder(), this } }, { key: "_initDecoder", value: function () { var e = this; if (this.decoderPending) return this.decoderPending; var t = "object" !== typeof WebAssembly || "js" === this.decoderConfig.type, n = []; return t ? n.push(this._loadLibrary("draco_decoder.js", "text")) : (n.push(this._loadLibrary("draco_wasm_wrapper.js", "text")), n.push(this._loadLibrary("draco_decoder.wasm", "arraybuffer"))), this.decoderPending = Promise.all(n).then((function (n) { var i = n[0]; t || (e.decoderConfig.wasmBinary = n[1]); var r = Nw.toString(), a = ["/* draco decoder */", i, "", "/* worker */", r.substring(r.indexOf("{") + 1, r.lastIndexOf("}"))].join("\n"); e.workerSourceURL = URL.createObjectURL(new Blob([a])) })), this.decoderPending } }, { key: "_getWorker", value: function (e, t) { var n = this; return this._initDecoder().then((function () { if (n.workerPool.length < n.workerLimit) { var i = new Worker(n.workerSourceURL); i._callbacks = {}, i._taskCosts = {}, i._taskLoad = 0, i.postMessage({ type: "init", decoderConfig: n.decoderConfig }), i.onmessage = function (e) { var t = e.data; switch (t.type) { case "decode": i._callbacks[t.id].resolve(t); break; case "error": i._callbacks[t.id].reject(t); break; default: console.error('THREE.DRACOLoader: Unexpected message, "' + t.type + '"') } }, n.workerPool.push(i) } else n.workerPool.sort((function (e, t) { return e._taskLoad > t._taskLoad ? -1 : 1 })); var r = n.workerPool[n.workerPool.length - 1]; return r._taskCosts[e] = t, r._taskLoad += t, r })) } }, { key: "_releaseTask", value: function (e, t) { e._taskLoad -= e._taskCosts[t], delete e._callbacks[t], delete e._taskCosts[t] } }, { key: "debug", value: function () { console.log("Task load: ", this.workerPool.map((function (e) { return e._taskLoad }))) } }, { key: "dispose", value: function () { for (var e = 0; e < this.workerPool.length; ++e)this.workerPool[e].terminate(); return this.workerPool.length = 0, this } }]), n }(Vp); function Nw() { var e, t; function n(e, t, n, i, r, a) { var o = a.num_components(), s = n.num_points() * o, l = s * r.BYTES_PER_ELEMENT, g = function (e, t) { switch (t) { case Float32Array: return e.DT_FLOAT32; case Int8Array: return e.DT_INT8; case Int16Array: return e.DT_INT16; case Int32Array: return e.DT_INT32; case Uint8Array: return e.DT_UINT8; case Uint16Array: return e.DT_UINT16; case Uint32Array: return e.DT_UINT32 } }(e, r), c = e._malloc(l); t.GetAttributeDataArrayForAllPoints(n, a, g, l, c); var u = new r(e.HEAPF32.buffer, c, s).slice(); return e._free(c), { name: i, array: u, itemSize: o } } onmessage = function (i) { var r = i.data; switch (r.type) { case "init": e = r.decoderConfig, t = new Promise((function (t) { e.onModuleLoaded = function (e) { t({ draco: e }) }, DracoDecoderModule(e) })); break; case "decode": var a = r.buffer, o = r.taskConfig; t.then((function (e) { var t = e.draco, i = new t.Decoder, s = new t.DecoderBuffer; s.Init(new Int8Array(a), a.byteLength); try { var l = function (e, t, i, r) { var a, o, s = r.attributeIDs, l = r.attributeTypes, g = t.GetEncodedGeometryType(i); if (g === e.TRIANGULAR_MESH) a = new e.Mesh, o = t.DecodeBufferToMesh(i, a); else { if (g !== e.POINT_CLOUD) throw new Error("THREE.DRACOLoader: Unexpected geometry type."); a = new e.PointCloud, o = t.DecodeBufferToPointCloud(i, a) } if (!o.ok() || 0 === a.ptr) throw new Error("THREE.DRACOLoader: Decoding failed: " + o.error_msg()); var c = { index: null, attributes: [] }; for (var u in s) { var C = self[l[u]], d = void 0, I = void 0; if (r.useUniqueIDs) I = s[u], d = t.GetAttributeByUniqueId(a, I); else { if (-1 === (I = t.GetAttributeId(a, e[s[u]]))) continue; d = t.GetAttribute(a, I) } c.attributes.push(n(e, t, a, u, C, d)) } g === e.TRIANGULAR_MESH && (c.index = function (e, t, n) { var i = n.num_faces(), r = 3 * i, a = 4 * r, o = e._malloc(a); t.GetTrianglesUInt32Array(n, a, o); var s = new Uint32Array(e.HEAPF32.buffer, o, r).slice(); return e._free(o), { array: s, itemSize: 1 } }(e, t, a)); return e.destroy(a), c }(t, i, s, o), g = l.attributes.map((function (e) { return e.array.buffer })); l.index && g.push(l.index.array.buffer), self.postMessage({ type: "decode", id: r.id, geometry: l }, g) } catch (c) { console.error(c), self.postMessage({ type: "error", id: r.id, error: c.message }) } finally { t.destroy(s), t.destroy(i) } })) } } } var Xw = function () { if (yw) return yw; var e = new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 4, 1, 96, 0, 0, 3, 3, 2, 0, 0, 5, 3, 1, 0, 1, 12, 1, 0, 10, 22, 2, 12, 0, 65, 0, 65, 0, 65, 0, 252, 10, 0, 0, 11, 7, 0, 65, 0, 253, 15, 26, 11]), t = new Uint8Array([32, 0, 65, 253, 3, 1, 2, 34, 4, 106, 6, 5, 11, 8, 7, 20, 13, 33, 12, 16, 128, 9, 116, 64, 19, 113, 127, 15, 10, 21, 22, 14, 255, 66, 24, 54, 136, 107, 18, 23, 192, 26, 114, 118, 132, 17, 77, 101, 130, 144, 27, 87, 131, 44, 45, 74, 156, 154, 70, 167]); if ("object" !== typeof WebAssembly) return { supported: !1 }; var n, i = "B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB"; WebAssembly.validate(e) && (i = "B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB"); var r = WebAssembly.instantiate(function (e) { for (var n = new Uint8Array(e.length), i = 0; i < e.length; ++i) { var r = e.charCodeAt(i); n[i] = r > 96 ? r - 71 : r > 64 ? r - 65 : r > 47 ? r + 4 : r > 46 ? 63 : 62 } for (var a = 0, o = 0; o < e.length; ++o)n[a++] = n[o] < 60 ? t[n[o]] : 64 * (n[o] - 60) + n[++o]; return n.buffer.slice(0, a) }(i), {}).then((function (e) { (n = e.instance).exports.__wasm_call_ctors() })); function a(e, t, i, r, a, o) { var s = n.exports.sbrk, l = i + 3 & -4, g = s(l * r), c = s(a.length), u = new Uint8Array(n.exports.memory.buffer); u.set(a, c); var C = e(g, i, r, c, a.length); if (0 === C && o && o(g, l, r), t.set(u.subarray(g, g + i * r)), s(g - s(0)), 0 !== C) throw new Error("Malformed buffer data: ".concat(C)) } var o = { 0: "", 1: "meshopt_decodeFilterOct", 2: "meshopt_decodeFilterQuat", 3: "meshopt_decodeFilterExp", NONE: "", OCTAHEDRAL: "meshopt_decodeFilterOct", QUATERNION: "meshopt_decodeFilterQuat", EXPONENTIAL: "meshopt_decodeFilterExp" }, s = { 0: "meshopt_decodeVertexBuffer", 1: "meshopt_decodeIndexBuffer", 2: "meshopt_decodeIndexSequence", ATTRIBUTES: "meshopt_decodeVertexBuffer", TRIANGLES: "meshopt_decodeIndexBuffer", INDICES: "meshopt_decodeIndexSequence" }; return yw = { ready: r, supported: !0, decodeVertexBuffer: function (e, t, i, r, s) { a(n.exports.meshopt_decodeVertexBuffer, e, t, i, r, n.exports[o[s]]) }, decodeIndexBuffer: function (e, t, i, r) { a(n.exports.meshopt_decodeIndexBuffer, e, t, i, r) }, decodeIndexSequence: function (e, t, i, r) { a(n.exports.meshopt_decodeIndexSequence, e, t, i, r) }, decodeGltfBuffer: function (e, t, i, r, l, g) { a(n.exports[s[l]], e, t, i, r, n.exports[o[g]]) } } }; function Yw(e, t) { if (t === ts) return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."), e; if (t === is || t === ns) { var n = e.getIndex(); if (null === n) { var i = [], r = e.getAttribute("position"); if (void 0 === r) return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."), e; for (var a = 0; a < r.count; a++)i.push(a); e.setIndex(i), n = e.getIndex() } var o = n.count - 2, s = []; if (n) if (t === is) for (var l = 1; l <= o; l++)s.push(n.getX(0)), s.push(n.getX(l)), s.push(n.getX(l + 1)); else for (var g = 0; g < o; g++)g % 2 === 0 ? (s.push(n.getX(g)), s.push(n.getX(g + 1)), s.push(n.getX(g + 2))) : (s.push(n.getX(g + 2)), s.push(n.getX(g + 1)), s.push(n.getX(g))); s.length / 3 !== o && console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles."); var c = e.clone(); return c.setIndex(s), c.clearGroups(), c } return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:", t), e } var Kw = parseInt(Br.replace(/\D+/g, "")), Lw = function (e) { Ir(n, e); var t = fr(n); function n(e) { var i; return cr(this, n), (i = t.call(this, e)).dracoLoader = null, i.ktx2Loader = null, i.meshoptDecoder = null, i.pluginCallbacks = [], i.register((function (e) { return new Dw(e) })), i.register((function (e) { return new eS(e) })), i.register((function (e) { return new tS(e) })), i.register((function (e) { return new nS(e) })), i.register((function (e) { return new Jw(e) })), i.register((function (e) { return new Ow(e) })), i.register((function (e) { return new jw(e) })), i.register((function (e) { return new Qw(e) })), i.register((function (e) { return new Uw(e) })), i.register((function (e) { return new qw(e) })), i.register((function (e) { return new Pw(e) })), i.register((function (e) { return new $w(e) })), i.register((function (e) { return new Tw(e) })), i.register((function (e) { return new iS(e) })), i.register((function (e) { return new rS(e) })), i } return dr(n, [{ key: "load", value: function (e, t, n, i) { var r, a = this; r = "" !== this.resourcePath ? this.resourcePath : "" !== this.path ? this.path : gf.extractUrlBase(e), this.manager.itemStart(e); var o = function (t) { i ? i(t) : console.error(t), a.manager.itemError(e), a.manager.itemEnd(e) }, s = new Fp(this.manager); s.setPath(this.path), s.setResponseType("arraybuffer"), s.setRequestHeader(this.requestHeader), s.setWithCredentials(this.withCredentials), s.load(e, (function (n) { try { a.parse(n, r, (function (n) { t(n), a.manager.itemEnd(e) }), o) } catch (i) { o(i) } }), n, o) } }, { key: "setDRACOLoader", value: function (e) { return this.dracoLoader = e, this } }, { key: "setDDSLoader", value: function () { throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".') } }, { key: "setKTX2Loader", value: function (e) { return this.ktx2Loader = e, this } }, { key: "setMeshoptDecoder", value: function (e) { return this.meshoptDecoder = e, this } }, { key: "register", value: function (e) { return -1 === this.pluginCallbacks.indexOf(e) && this.pluginCallbacks.push(e), this } }, { key: "unregister", value: function (e) { return -1 !== this.pluginCallbacks.indexOf(e) && this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e), 1), this } }, { key: "parse", value: function (e, t, n, i) { var r, a = {}, o = {}; if ("string" === typeof e) r = JSON.parse(e); else if (e instanceof ArrayBuffer) { if (gf.decodeText(new Uint8Array(e.slice(0, 4))) === aS) { try { a[Ew.KHR_BINARY_GLTF] = new lS(e) } catch (d) { return void (i && i(d)) } r = JSON.parse(a[Ew.KHR_BINARY_GLTF].content) } else r = JSON.parse(gf.decodeText(new Uint8Array(e))) } else r = e; if (void 0 === r.asset || r.asset.version[0] < 2) i && i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")); else { var s = new MS(r, { path: t || this.resourcePath || "", crossOrigin: this.crossOrigin, requestHeader: this.requestHeader, manager: this.manager, ktx2Loader: this.ktx2Loader, meshoptDecoder: this.meshoptDecoder }); s.fileLoader.setRequestHeader(this.requestHeader); for (var l = 0; l < this.pluginCallbacks.length; l++) { var g = this.pluginCallbacks[l](s); o[g.name] = g, a[g.name] = !0 } if (r.extensionsUsed) for (var c = 0; c < r.extensionsUsed.length; ++c) { var u = r.extensionsUsed[c], C = r.extensionsRequired || []; switch (u) { case Ew.KHR_MATERIALS_UNLIT: a[u] = new _w; break; case Ew.KHR_DRACO_MESH_COMPRESSION: a[u] = new gS(r, this.dracoLoader); break; case Ew.KHR_TEXTURE_TRANSFORM: a[u] = new cS; break; case Ew.KHR_MESH_QUANTIZATION: a[u] = new uS; break; default: C.indexOf(u) >= 0 && void 0 === o[u] && console.warn('THREE.GLTFLoader: Unknown extension "' + u + '".') } } s.setExtensions(a), s.setPlugins(o), s.parse(n, i) } } }, { key: "parseAsync", value: function (e, t) { var n = this; return new Promise((function (i, r) { n.parse(e, t, i, r) })) } }]), n }(Vp); function zw() { var e = {}; return { get: function (t) { return e[t] }, add: function (t, n) { e[t] = n }, remove: function (t) { delete e[t] }, removeAll: function () { e = {} } } } var Ew = { KHR_BINARY_GLTF: "KHR_binary_glTF", KHR_DRACO_MESH_COMPRESSION: "KHR_draco_mesh_compression", KHR_LIGHTS_PUNCTUAL: "KHR_lights_punctual", KHR_MATERIALS_CLEARCOAT: "KHR_materials_clearcoat", KHR_MATERIALS_IOR: "KHR_materials_ior", KHR_MATERIALS_SHEEN: "KHR_materials_sheen", KHR_MATERIALS_SPECULAR: "KHR_materials_specular", KHR_MATERIALS_TRANSMISSION: "KHR_materials_transmission", KHR_MATERIALS_IRIDESCENCE: "KHR_materials_iridescence", KHR_MATERIALS_ANISOTROPY: "KHR_materials_anisotropy", KHR_MATERIALS_UNLIT: "KHR_materials_unlit", KHR_MATERIALS_VOLUME: "KHR_materials_volume", KHR_TEXTURE_BASISU: "KHR_texture_basisu", KHR_TEXTURE_TRANSFORM: "KHR_texture_transform", KHR_MESH_QUANTIZATION: "KHR_mesh_quantization", KHR_MATERIALS_EMISSIVE_STRENGTH: "KHR_materials_emissive_strength", EXT_TEXTURE_WEBP: "EXT_texture_webp", EXT_TEXTURE_AVIF: "EXT_texture_avif", EXT_MESHOPT_COMPRESSION: "EXT_meshopt_compression", EXT_MESH_GPU_INSTANCING: "EXT_mesh_gpu_instancing" }, Tw = function () { function e(t) { cr(this, e), this.parser = t, this.name = Ew.KHR_LIGHTS_PUNCTUAL, this.cache = { refs: {}, uses: {} } } return dr(e, [{ key: "_markDefs", value: function () { for (var e = this.parser, t = this.parser.json.nodes || [], n = 0, i = t.length; n < i; n++) { var r = t[n]; r.extensions && r.extensions[this.name] && void 0 !== r.extensions[this.name].light && e._addNodeRef(this.cache, r.extensions[this.name].light) } } }, { key: "_loadLight", value: function (e) { var t = this.parser, n = "light:" + e, i = t.cache.get(n); if (i) return i; var r, a = t.json, o = ((a.extensions && a.extensions[this.name] || {}).lights || [])[e], s = new pc(16777215); void 0 !== o.color && s.fromArray(o.color); var l = void 0 !== o.range ? o.range : 0; switch (o.type) { case "directional": (r = new nf(s)).target.position.set(0, 0, -1), r.add(r.target); break; case "point": (r = new ef(s)).distance = l; break; case "spot": (r = new Op(s)).distance = l, o.spot = o.spot || {}, o.spot.innerConeAngle = void 0 !== o.spot.innerConeAngle ? o.spot.innerConeAngle : 0, o.spot.outerConeAngle = void 0 !== o.spot.outerConeAngle ? o.spot.outerConeAngle : Math.PI / 4, r.angle = o.spot.outerConeAngle, r.penumbra = 1 - o.spot.innerConeAngle / o.spot.outerConeAngle, r.target.position.set(0, 0, -1), r.add(r.target); break; default: throw new Error("THREE.GLTFLoader: Unexpected light type: " + o.type) }return r.position.set(0, 0, 0), r.decay = 2, RS(r, o), void 0 !== o.intensity && (r.intensity = o.intensity), r.name = t.createUniqueName(o.name || "light_" + e), i = Promise.resolve(r), t.cache.add(n, i), i } }, { key: "getDependency", value: function (e, t) { if ("light" === e) return this._loadLight(t) } }, { key: "createNodeAttachment", value: function (e) { var t = this, n = this.parser, i = n.json.nodes[e], r = (i.extensions && i.extensions[this.name] || {}).light; return void 0 === r ? null : this._loadLight(r).then((function (e) { return n._getNodeRef(t.cache, r, e) })) } }]), e }(), _w = function () { function e() { cr(this, e), this.name = Ew.KHR_MATERIALS_UNLIT } return dr(e, [{ key: "getMaterialType", value: function () { return mc } }, { key: "extendParams", value: function (e, t, n) { var i = []; e.color = new pc(1, 1, 1), e.opacity = 1; var r = t.pbrMetallicRoughness; if (r) { if (Array.isArray(r.baseColorFactor)) { var a = r.baseColorFactor; e.color.fromArray(a), e.opacity = a[3] } void 0 !== r.baseColorTexture && i.push(n.assignTexture(e, "map", r.baseColorTexture, 3001)) } return Promise.all(i) } }]), e }(), Uw = function () { function e(t) { cr(this, e), this.parser = t, this.name = Ew.KHR_MATERIALS_EMISSIVE_STRENGTH } return dr(e, [{ key: "extendMaterialParams", value: function (e, t) { var n = this.parser.json.materials[e]; if (!n.extensions || !n.extensions[this.name]) return Promise.resolve(); var i = n.extensions[this.name].emissiveStrength; return void 0 !== i && (t.emissiveIntensity = i), Promise.resolve() } }]), e }(), Dw = function () { function e(t) { cr(this, e), this.parser = t, this.name = Ew.KHR_MATERIALS_CLEARCOAT } return dr(e, [{ key: "getMaterialType", value: function (e) { var t = this.parser.json.materials[e]; return t.extensions && t.extensions[this.name] ? tp : null } }, { key: "extendMaterialParams", value: function (e, t) { var n = this.parser, i = n.json.materials[e]; if (!i.extensions || !i.extensions[this.name]) return Promise.resolve(); var r = [], a = i.extensions[this.name]; if (void 0 !== a.clearcoatFactor && (t.clearcoat = a.clearcoatFactor), void 0 !== a.clearcoatTexture && r.push(n.assignTexture(t, "clearcoatMap", a.clearcoatTexture)), void 0 !== a.clearcoatRoughnessFactor && (t.clearcoatRoughness = a.clearcoatRoughnessFactor), void 0 !== a.clearcoatRoughnessTexture && r.push(n.assignTexture(t, "clearcoatRoughnessMap", a.clearcoatRoughnessTexture)), void 0 !== a.clearcoatNormalTexture && (r.push(n.assignTexture(t, "clearcoatNormalMap", a.clearcoatNormalTexture)), void 0 !== a.clearcoatNormalTexture.scale)) { var o = a.clearcoatNormalTexture.scale; t.clearcoatNormalScale = new fl(o, o) } return Promise.all(r) } }]), e }(), Pw = function () { function e(t) { cr(this, e), this.parser = t, this.name = Ew.KHR_MATERIALS_IRIDESCENCE } return dr(e, [{ key: "getMaterialType", value: function (e) { var t = this.parser.json.materials[e]; return t.extensions && t.extensions[this.name] ? tp : null } }, { key: "extendMaterialParams", value: function (e, t) { var n = this.parser, i = n.json.materials[e]; if (!i.extensions || !i.extensions[this.name]) return Promise.resolve(); var r = [], a = i.extensions[this.name]; return void 0 !== a.iridescenceFactor && (t.iridescence = a.iridescenceFactor), void 0 !== a.iridescenceTexture && r.push(n.assignTexture(t, "iridescenceMap", a.iridescenceTexture)), void 0 !== a.iridescenceIor && (t.iridescenceIOR = a.iridescenceIor), void 0 === t.iridescenceThicknessRange && (t.iridescenceThicknessRange = [100, 400]), void 0 !== a.iridescenceThicknessMinimum && (t.iridescenceThicknessRange[0] = a.iridescenceThicknessMinimum), void 0 !== a.iridescenceThicknessMaximum && (t.iridescenceThicknessRange[1] = a.iridescenceThicknessMaximum), void 0 !== a.iridescenceThicknessTexture && r.push(n.assignTexture(t, "iridescenceThicknessMap", a.iridescenceThicknessTexture)), Promise.all(r) } }]), e }(), Jw = function () { function e(t) { cr(this, e), this.parser = t, this.name = Ew.KHR_MATERIALS_SHEEN } return dr(e, [{ key: "getMaterialType", value: function (e) { var t = this.parser.json.materials[e]; return t.extensions && t.extensions[this.name] ? tp : null } }, { key: "extendMaterialParams", value: function (e, t) { var n = this.parser, i = n.json.materials[e]; if (!i.extensions || !i.extensions[this.name]) return Promise.resolve(); var r = []; t.sheenColor = new pc(0, 0, 0), t.sheenRoughness = 0, t.sheen = 1; var a = i.extensions[this.name]; return void 0 !== a.sheenColorFactor && t.sheenColor.fromArray(a.sheenColorFactor), void 0 !== a.sheenRoughnessFactor && (t.sheenRoughness = a.sheenRoughnessFactor), void 0 !== a.sheenColorTexture && r.push(n.assignTexture(t, "sheenColorMap", a.sheenColorTexture, 3001)), void 0 !== a.sheenRoughnessTexture && r.push(n.assignTexture(t, "sheenRoughnessMap", a.sheenRoughnessTexture)), Promise.all(r) } }]), e }(), Ow = function () { function e(t) { cr(this, e), this.parser = t, this.name = Ew.KHR_MATERIALS_TRANSMISSION } return dr(e, [{ key: "getMaterialType", value: function (e) { var t = this.parser.json.materials[e]; return t.extensions && t.extensions[this.name] ? tp : null } }, { key: "extendMaterialParams", value: function (e, t) { var n = this.parser, i = n.json.materials[e]; if (!i.extensions || !i.extensions[this.name]) return Promise.resolve(); var r = [], a = i.extensions[this.name]; return void 0 !== a.transmissionFactor && (t.transmission = a.transmissionFactor), void 0 !== a.transmissionTexture && r.push(n.assignTexture(t, "transmissionMap", a.transmissionTexture)), Promise.all(r) } }]), e }(), jw = function () { function e(t) { cr(this, e), this.parser = t, this.name = Ew.KHR_MATERIALS_VOLUME } return dr(e, [{ key: "getMaterialType", value: function (e) { var t = this.parser.json.materials[e]; return t.extensions && t.extensions[this.name] ? tp : null } }, { key: "extendMaterialParams", value: function (e, t) { var n = this.parser, i = n.json.materials[e]; if (!i.extensions || !i.extensions[this.name]) return Promise.resolve(); var r = [], a = i.extensions[this.name]; t.thickness = void 0 !== a.thicknessFactor ? a.thicknessFactor : 0, void 0 !== a.thicknessTexture && r.push(n.assignTexture(t, "thicknessMap", a.thicknessTexture)), t.attenuationDistance = a.attenuationDistance || 1 / 0; var o = a.attenuationColor || [1, 1, 1]; return t.attenuationColor = new pc(o[0], o[1], o[2]), Promise.all(r) } }]), e }(), Qw = function () { function e(t) { cr(this, e), this.parser = t, this.name = Ew.KHR_MATERIALS_IOR } return dr(e, [{ key: "getMaterialType", value: function (e) { var t = this.parser.json.materials[e]; return t.extensions && t.extensions[this.name] ? tp : null } }, { key: "extendMaterialParams", value: function (e, t) { var n = this.parser.json.materials[e]; if (!n.extensions || !n.extensions[this.name]) return Promise.resolve(); var i = n.extensions[this.name]; return t.ior = void 0 !== i.ior ? i.ior : 1.5, Promise.resolve() } }]), e }(), qw = function () { function e(t) { cr(this, e), this.parser = t, this.name = Ew.KHR_MATERIALS_SPECULAR } return dr(e, [{ key: "getMaterialType", value: function (e) { var t = this.parser.json.materials[e]; return t.extensions && t.extensions[this.name] ? tp : null } }, { key: "extendMaterialParams", value: function (e, t) { var n = this.parser, i = n.json.materials[e]; if (!i.extensions || !i.extensions[this.name]) return Promise.resolve(); var r = [], a = i.extensions[this.name]; t.specularIntensity = void 0 !== a.specularFactor ? a.specularFactor : 1, void 0 !== a.specularTexture && r.push(n.assignTexture(t, "specularIntensityMap", a.specularTexture)); var o = a.specularColorFactor || [1, 1, 1]; return t.specularColor = new pc(o[0], o[1], o[2]), void 0 !== a.specularColorTexture && r.push(n.assignTexture(t, "specularColorMap", a.specularColorTexture, 3001)), Promise.all(r) } }]), e }(), $w = function () { function e(t) { cr(this, e), this.parser = t, this.name = Ew.KHR_MATERIALS_ANISOTROPY } return dr(e, [{ key: "getMaterialType", value: function (e) { var t = this.parser.json.materials[e]; return t.extensions && t.extensions[this.name] ? tp : null } }, { key: "extendMaterialParams", value: function (e, t) { var n = this.parser, i = n.json.materials[e]; if (!i.extensions || !i.extensions[this.name]) return Promise.resolve(); var r = [], a = i.extensions[this.name]; return void 0 !== a.anisotropyStrength && (t.anisotropy = a.anisotropyStrength), void 0 !== a.anisotropyRotation && (t.anisotropyRotation = a.anisotropyRotation), void 0 !== a.anisotropyTexture && r.push(n.assignTexture(t, "anisotropyMap", a.anisotropyTexture)), Promise.all(r) } }]), e }(), eS = function () { function e(t) { cr(this, e), this.parser = t, this.name = Ew.KHR_TEXTURE_BASISU } return dr(e, [{ key: "loadTexture", value: function (e) { var t = this.parser, n = t.json, i = n.textures[e]; if (!i.extensions || !i.extensions[this.name]) return null; var r = i.extensions[this.name], a = t.options.ktx2Loader; if (!a) { if (n.extensionsRequired && n.extensionsRequired.indexOf(this.name) >= 0) throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures"); return null } return t.loadTextureImage(e, r.source, a) } }]), e }(), tS = function () { function e(t) { cr(this, e), this.parser = t, this.name = Ew.EXT_TEXTURE_WEBP, this.isSupported = null } return dr(e, [{ key: "loadTexture", value: function (e) { var t = this.name, n = this.parser, i = n.json, r = i.textures[e]; if (!r.extensions || !r.extensions[t]) return null; var a = r.extensions[t], o = i.images[a.source], s = n.textureLoader; if (o.uri) { var l = n.options.manager.getHandler(o.uri); null !== l && (s = l) } return this.detectSupport().then((function (r) { if (r) return n.loadTextureImage(e, a.source, s); if (i.extensionsRequired && i.extensionsRequired.indexOf(t) >= 0) throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported."); return n.loadTexture(e) })) } }, { key: "detectSupport", value: function () { return this.isSupported || (this.isSupported = new Promise((function (e) { var t = new Image; t.src = "data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA", t.onload = t.onerror = function () { e(1 === t.height) } }))), this.isSupported } }]), e }(), nS = function () { function e(t) { cr(this, e), this.parser = t, this.name = Ew.EXT_TEXTURE_AVIF, this.isSupported = null } return dr(e, [{ key: "loadTexture", value: function (e) { var t = this.name, n = this.parser, i = n.json, r = i.textures[e]; if (!r.extensions || !r.extensions[t]) return null; var a = r.extensions[t], o = i.images[a.source], s = n.textureLoader; if (o.uri) { var l = n.options.manager.getHandler(o.uri); null !== l && (s = l) } return this.detectSupport().then((function (r) { if (r) return n.loadTextureImage(e, a.source, s); if (i.extensionsRequired && i.extensionsRequired.indexOf(t) >= 0) throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported."); return n.loadTexture(e) })) } }, { key: "detectSupport", value: function () { return this.isSupported || (this.isSupported = new Promise((function (e) { var t = new Image; t.src = "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=", t.onload = t.onerror = function () { e(1 === t.height) } }))), this.isSupported } }]), e }(), iS = function () { function e(t) { cr(this, e), this.name = Ew.EXT_MESHOPT_COMPRESSION, this.parser = t } return dr(e, [{ key: "loadBufferView", value: function (e) { var t = this.parser.json, n = t.bufferViews[e]; if (n.extensions && n.extensions[this.name]) { var i = n.extensions[this.name], r = this.parser.getDependency("buffer", i.buffer), a = this.parser.options.meshoptDecoder; if (!a || !a.supported) { if (t.extensionsRequired && t.extensionsRequired.indexOf(this.name) >= 0) throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files"); return null } return r.then((function (e) { var t = i.byteOffset || 0, n = i.byteLength || 0, r = i.count, o = i.byteStride, s = new Uint8Array(e, t, n); return a.decodeGltfBufferAsync ? a.decodeGltfBufferAsync(r, o, s, i.mode, i.filter).then((function (e) { return e.buffer })) : a.ready.then((function () { var e = new ArrayBuffer(r * o); return a.decodeGltfBuffer(new Uint8Array(e), r, o, s, i.mode, i.filter), e })) })) } return null } }]), e }(), rS = function () { function e(t) { cr(this, e), this.name = Ew.EXT_MESH_GPU_INSTANCING, this.parser = t } return dr(e, [{ key: "createNodeMesh", value: function (e) { var t = this, n = this.parser.json, i = n.nodes[e]; if (!i.extensions || !i.extensions[this.name] || void 0 === i.mesh) return null; var r, a = gr(n.meshes[i.mesh].primitives); try { for (a.s(); !(r = a.n()).done;) { var o = r.value; if (o.mode !== hS.TRIANGLES && o.mode !== hS.TRIANGLE_STRIP && o.mode !== hS.TRIANGLE_FAN && void 0 !== o.mode) return null } } catch (C) { a.e(C) } finally { a.f() } var s = i.extensions[this.name].attributes, l = [], g = {}, c = function (e) { l.push(t.parser.getDependency("accessor", s[e]).then((function (t) { return g[e] = t, g[e] }))) }; for (var u in s) c(u); return l.length < 1 ? null : (l.push(this.parser.createNodeMesh(e)), Promise.all(l).then((function (e) { var n, i = e.pop(), r = i.isGroup ? i.children : [i], a = e[0].count, o = [], s = gr(r); try { for (s.s(); !(n = s.n()).done;) { for (var l = n.value, c = new Sg, u = new Ql, d = new jl, I = new Ql(1, 1, 1), h = new rh(l.geometry, l.material, a), A = 0; A < a; A++)g.TRANSLATION && u.fromBufferAttribute(g.TRANSLATION, A), g.ROTATION && d.fromBufferAttribute(g.ROTATION, A), g.SCALE && I.fromBufferAttribute(g.SCALE, A), h.setMatrixAt(A, c.compose(u, d, I)); for (var p in g) "TRANSLATION" !== p && "ROTATION" !== p && "SCALE" !== p && l.geometry.setAttribute(p, g[p]); qg.prototype.copy.call(h, l), t.parser.assignFinalMaterial(h), o.push(h) } } catch (C) { s.e(C) } finally { s.f() } return i.isGroup ? (i.clear(), i.add.apply(i, o), i) : o[0] }))) } }]), e }(), aS = "glTF", oS = 1313821514, sS = 5130562, lS = dr((function e(t) { cr(this, e), this.name = Ew.KHR_BINARY_GLTF, this.content = null, this.body = null; var n = new DataView(t, 0, 12); if (this.header = { magic: gf.decodeText(new Uint8Array(t.slice(0, 4))), version: n.getUint32(4, !0), length: n.getUint32(8, !0) }, this.header.magic !== aS) throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header."); if (this.header.version < 2) throw new Error("THREE.GLTFLoader: Legacy binary file detected."); for (var i = this.header.length - 12, r = new DataView(t, 12), a = 0; a < i;) { var o = r.getUint32(a, !0); a += 4; var s = r.getUint32(a, !0); if (a += 4, s === oS) { var l = new Uint8Array(t, 12 + a, o); this.content = gf.decodeText(l) } else if (s === sS) { var g = 12 + a; this.body = t.slice(g, g + o) } a += o } if (null === this.content) throw new Error("THREE.GLTFLoader: JSON content not found.") })), gS = function () { function e(t, n) { if (cr(this, e), !n) throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided."); this.name = Ew.KHR_DRACO_MESH_COMPRESSION, this.json = t, this.dracoLoader = n, this.dracoLoader.preload() } return dr(e, [{ key: "decodePrimitive", value: function (e, t) { var n = this.json, i = this.dracoLoader, r = e.extensions[this.name].bufferView, a = e.extensions[this.name].attributes, o = {}, s = {}, l = {}; for (var g in a) { var c = vS[g] || g.toLowerCase(); o[c] = a[g] } for (var u in e.attributes) { var C = vS[u] || u.toLowerCase(); if (void 0 !== a[u]) { var d = n.accessors[e.attributes[u]], I = AS[d.componentType]; l[C] = I.name, s[C] = !0 === d.normalized } } return t.getDependency("bufferView", r).then((function (e) { return new Promise((function (t) { i.decodeDracoFile(e, (function (e) { for (var n in e.attributes) { var i = e.attributes[n], r = s[n]; void 0 !== r && (i.normalized = r) } t(e) }), o, l) })) })) } }]), e }(), cS = function () { function e() { cr(this, e), this.name = Ew.KHR_TEXTURE_TRANSFORM } return dr(e, [{ key: "extendTexture", value: function (e, t) { return void 0 !== t.texCoord && t.texCoord !== e.channel || void 0 !== t.offset || void 0 !== t.rotation || void 0 !== t.scale ? (e = e.clone(), void 0 !== t.texCoord && (e.channel = t.texCoord), void 0 !== t.offset && e.offset.fromArray(t.offset), void 0 !== t.rotation && (e.rotation = t.rotation), void 0 !== t.scale && e.repeat.fromArray(t.scale), e.needsUpdate = !0, e) : e } }]), e }(), uS = dr((function e() { cr(this, e), this.name = Ew.KHR_MESH_QUANTIZATION })), CS = function (e) { Ir(n, e); var t = fr(n); function n(e, i, r, a) { return cr(this, n), t.call(this, e, i, r, a) } return dr(n, [{ key: "copySampleValue_", value: function (e) { for (var t = this.resultBuffer, n = this.sampleValues, i = this.valueSize, r = e * i * 3 + i, a = 0; a !== i; a++)t[a] = n[r + a]; return t } }, { key: "interpolate_", value: function (e, t, n, i) { for (var r = this.resultBuffer, a = this.sampleValues, o = this.valueSize, s = 2 * o, l = 3 * o, g = i - t, c = (n - t) / g, u = c * c, C = u * c, d = e * l, I = d - l, h = -2 * C + 3 * u, A = C - u, p = 1 - h, f = A - u + c, m = 0; m !== o; m++) { var v = a[I + m + o], b = a[I + m + s] * g, y = a[d + m + o], G = a[d + m] * g; r[m] = p * v + f * b + h * y + A * G } return r } }]), n }(Ip), dS = new jl, IS = function (e) { Ir(n, e); var t = fr(n); function n() { return cr(this, n), t.apply(this, arguments) } return dr(n, [{ key: "interpolate_", value: function (e, t, i, r) { var a = yr(hr(n.prototype), "interpolate_", this).call(this, e, t, i, r); return dS.fromArray(a).normalize().toArray(a), a } }]), n }(CS), hS = { FLOAT: 5126, FLOAT_MAT3: 35675, FLOAT_MAT4: 35676, FLOAT_VEC2: 35664, FLOAT_VEC3: 35665, FLOAT_VEC4: 35666, LINEAR: 9729, REPEAT: 10497, SAMPLER_2D: 35678, POINTS: 0, LINES: 1, LINE_LOOP: 2, LINE_STRIP: 3, TRIANGLES: 4, TRIANGLE_STRIP: 5, TRIANGLE_FAN: 6, UNSIGNED_BYTE: 5121, UNSIGNED_SHORT: 5123 }, AS = { 5120: Int8Array, 5121: Uint8Array, 5122: Int16Array, 5123: Uint16Array, 5125: Uint32Array, 5126: Float32Array }, pS = { 9728: Ha, 9729: Ya, 9984: Ma, 9985: Ka, 9986: Na, 9987: za }, fS = { 33071: Va, 33648: ka, 10497: Wa }, mS = { SCALAR: 1, VEC2: 2, VEC3: 3, VEC4: 4, MAT2: 4, MAT3: 9, MAT4: 16 }, vS = ln(ln({ POSITION: "position", NORMAL: "normal", TANGENT: "tangent" }, Kw >= 152 ? { TEXCOORD_0: "uv", TEXCOORD_1: "uv1", TEXCOORD_2: "uv2", TEXCOORD_3: "uv3" } : { TEXCOORD_0: "uv", TEXCOORD_1: "uv2" }), {}, { COLOR_0: "color", WEIGHTS_0: "skinWeight", JOINTS_0: "skinIndex" }), bS = { scale: "scale", translation: "position", rotation: "quaternion", weights: "morphTargetInfluences" }, yS = { CUBICSPLINE: void 0, LINEAR: Jo, STEP: Po }, GS = "OPAQUE", BS = "MASK", ZS = "BLEND"; function wS(e) { return void 0 === e.DefaultMaterial && (e.DefaultMaterial = new ep({ color: 16777215, emissive: 0, metalness: 1, roughness: 1, transparent: !1, depthTest: !0, side: Fr })), e.DefaultMaterial } function SS(e, t, n) { for (var i in n.extensions) void 0 === e[i] && (t.userData.gltfExtensions = t.userData.gltfExtensions || {}, t.userData.gltfExtensions[i] = n.extensions[i]) } function RS(e, t) { void 0 !== t.extras && ("object" === typeof t.extras ? Object.assign(e.userData, t.extras) : console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, " + t.extras)) } function xS(e, t) { if (e.updateMorphTargets(), void 0 !== t.weights) for (var n = 0, i = t.weights.length; n < i; n++)e.morphTargetInfluences[n] = t.weights[n]; if (t.extras && Array.isArray(t.extras.targetNames)) { var r = t.extras.targetNames; if (e.morphTargetInfluences.length === r.length) { e.morphTargetDictionary = {}; for (var a = 0, o = r.length; a < o; a++)e.morphTargetDictionary[r[a]] = a } else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.") } } function WS(e) { var t, n = e.extensions && e.extensions[Ew.KHR_DRACO_MESH_COMPRESSION]; if (t = n ? "draco:" + n.bufferView + ":" + n.indices + ":" + VS(n.attributes) : e.indices + ":" + VS(e.attributes) + ":" + e.mode, void 0 !== e.targets) for (var i = 0, r = e.targets.length; i < r; i++)t += ":" + VS(e.targets[i]); return t } function VS(e) { for (var t = "", n = Object.keys(e).sort(), i = 0, r = n.length; i < r; i++)t += n[i] + ":" + e[n[i]] + ";"; return t } function kS(e) { switch (e) { case Int8Array: return 1 / 127; case Uint8Array: return 1 / 255; case Int16Array: return 1 / 32767; case Uint16Array: return 1 / 65535; default: throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.") } } var HS = new Sg, MS = function () { function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; cr(this, e), this.json = t, this.extensions = {}, this.plugins = {}, this.options = n, this.cache = new zw, this.associations = new Map, this.primitiveCache = {}, this.nodeCache = {}, this.meshCache = { refs: {}, uses: {} }, this.cameraCache = { refs: {}, uses: {} }, this.lightCache = { refs: {}, uses: {} }, this.sourceCache = {}, this.textureCache = {}, this.nodeNamesUsed = {}; var i = !1, r = !1, a = -1; "undefined" !== typeof navigator && "undefined" !== typeof navigator.userAgent && (i = !0 === /^((?!chrome|android).)*safari/i.test(navigator.userAgent), a = (r = navigator.userAgent.indexOf("Firefox") > -1) ? navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1] : -1), "undefined" === typeof createImageBitmap || i || r && a < 98 ? this.textureLoader = new zp(this.options.manager) : this.textureLoader = new Af(this.options.manager), this.textureLoader.setCrossOrigin(this.options.crossOrigin), this.textureLoader.setRequestHeader(this.options.requestHeader), this.fileLoader = new Fp(this.options.manager), this.fileLoader.setResponseType("arraybuffer"), "use-credentials" === this.options.crossOrigin && this.fileLoader.setWithCredentials(!0) } return dr(e, [{ key: "setExtensions", value: function (e) { this.extensions = e } }, { key: "setPlugins", value: function (e) { this.plugins = e } }, { key: "parse", value: function (e, t) { var n = this, i = this.json, r = this.extensions; this.cache.removeAll(), this.nodeCache = {}, this._invokeAll((function (e) { return e._markDefs && e._markDefs() })), Promise.all(this._invokeAll((function (e) { return e.beforeRoot && e.beforeRoot() }))).then((function () { return Promise.all([n.getDependencies("scene"), n.getDependencies("animation"), n.getDependencies("camera")]) })).then((function (t) { var a = { scene: t[0][i.scene || 0], scenes: t[0], animations: t[1], cameras: t[2], asset: i.asset, parser: n, userData: {} }; SS(r, a, i), RS(a, i), Promise.all(n._invokeAll((function (e) { return e.afterRoot && e.afterRoot(a) }))).then((function () { e(a) })) })).catch(t) } }, { key: "_markDefs", value: function () { for (var e = this.json.nodes || [], t = this.json.skins || [], n = this.json.meshes || [], i = 0, r = t.length; i < r; i++)for (var a = t[i].joints, o = 0, s = a.length; o < s; o++)e[a[o]].isBone = !0; for (var l = 0, g = e.length; l < g; l++) { var c = e[l]; void 0 !== c.mesh && (this._addNodeRef(this.meshCache, c.mesh), void 0 !== c.skin && (n[c.mesh].isSkinnedMesh = !0)), void 0 !== c.camera && this._addNodeRef(this.cameraCache, c.camera) } } }, { key: "_addNodeRef", value: function (e, t) { void 0 !== t && (void 0 === e.refs[t] && (e.refs[t] = e.uses[t] = 0), e.refs[t]++) } }, { key: "_getNodeRef", value: function (e, t, n) { var i = this; if (e.refs[t] <= 1) return n; var a = n.clone(); return function e(t, n) { var a = i.associations.get(t); null != a && i.associations.set(n, a); var o, s = gr(t.children.entries()); try { for (s.s(); !(o = s.n()).done;) { var l = (0, r.Z)(o.value, 2), g = l[0]; e(l[1], n.children[g]) } } catch (c) { s.e(c) } finally { s.f() } }(n, a), a.name += "_instance_" + e.uses[t]++, a } }, { key: "_invokeOne", value: function (e) { var t = Object.values(this.plugins); t.push(this); for (var n = 0; n < t.length; n++) { var i = e(t[n]); if (i) return i } return null } }, { key: "_invokeAll", value: function (e) { var t = Object.values(this.plugins); t.unshift(this); for (var n = [], i = 0; i < t.length; i++) { var r = e(t[i]); r && n.push(r) } return n } }, { key: "getDependency", value: function (e, t) { var n = e + ":" + t, i = this.cache.get(n); if (!i) { switch (e) { case "scene": i = this.loadScene(t); break; case "node": i = this._invokeOne((function (e) { return e.loadNode && e.loadNode(t) })); break; case "mesh": i = this._invokeOne((function (e) { return e.loadMesh && e.loadMesh(t) })); break; case "accessor": i = this.loadAccessor(t); break; case "bufferView": i = this._invokeOne((function (e) { return e.loadBufferView && e.loadBufferView(t) })); break; case "buffer": i = this.loadBuffer(t); break; case "material": i = this._invokeOne((function (e) { return e.loadMaterial && e.loadMaterial(t) })); break; case "texture": i = this._invokeOne((function (e) { return e.loadTexture && e.loadTexture(t) })); break; case "skin": i = this.loadSkin(t); break; case "animation": i = this._invokeOne((function (e) { return e.loadAnimation && e.loadAnimation(t) })); break; case "camera": i = this.loadCamera(t); break; default: if (!(i = this._invokeOne((function (n) { return n != this && n.getDependency && n.getDependency(e, t) })))) throw new Error("Unknown type: " + e) }this.cache.add(n, i) } return i } }, { key: "getDependencies", value: function (e) { var t = this.cache.get(e); if (!t) { var n = this, i = this.json[e + ("mesh" === e ? "es" : "s")] || []; t = Promise.all(i.map((function (t, i) { return n.getDependency(e, i) }))), this.cache.add(e, t) } return t } }, { key: "loadBuffer", value: function (e) { var t = this.json.buffers[e], n = this.fileLoader; if (t.type && "arraybuffer" !== t.type) throw new Error("THREE.GLTFLoader: " + t.type + " buffer type is not supported."); if (void 0 === t.uri && 0 === e) return Promise.resolve(this.extensions[Ew.KHR_BINARY_GLTF].body); var i = this.options; return new Promise((function (e, r) { n.load(gf.resolveURL(t.uri, i.path), e, void 0, (function () { r(new Error('THREE.GLTFLoader: Failed to load buffer "' + t.uri + '".')) })) })) } }, { key: "loadBufferView", value: function (e) { var t = this.json.bufferViews[e]; return this.getDependency("buffer", t.buffer).then((function (e) { var n = t.byteLength || 0, i = t.byteOffset || 0; return e.slice(i, i + n) })) } }, { key: "loadAccessor", value: function (e) { var t = this, n = this.json, i = this.json.accessors[e]; if (void 0 === i.bufferView && void 0 === i.sparse) { var r = mS[i.type], a = AS[i.componentType], o = !0 === i.normalized, s = new a(i.count * r); return Promise.resolve(new Sc(s, r, o)) } var l = []; return void 0 !== i.bufferView ? l.push(this.getDependency("bufferView", i.bufferView)) : l.push(null), void 0 !== i.sparse && (l.push(this.getDependency("bufferView", i.sparse.indices.bufferView)), l.push(this.getDependency("bufferView", i.sparse.values.bufferView))), Promise.all(l).then((function (e) { var r, a, o = e[0], s = mS[i.type], l = AS[i.componentType], g = l.BYTES_PER_ELEMENT, c = g * s, u = i.byteOffset || 0, C = void 0 !== i.bufferView ? n.bufferViews[i.bufferView].byteStride : void 0, d = !0 === i.normalized; if (C && C !== c) { var I = Math.floor(u / C), h = "InterleavedBuffer:" + i.bufferView + ":" + i.componentType + ":" + I + ":" + i.count, A = t.cache.get(h); A || (r = new l(o, I * C, i.count * C / g), A = new II(r, C / g), t.cache.add(h, A)), a = new AI(A, s, u % C / g, d) } else r = null === o ? new l(i.count * s) : new l(o, u, i.count * s), a = new Sc(r, s, d); if (void 0 !== i.sparse) { var p = mS.SCALAR, f = AS[i.sparse.indices.componentType], m = i.sparse.indices.byteOffset || 0, v = i.sparse.values.byteOffset || 0, b = new f(e[1], m, i.sparse.count * p), y = new l(e[2], v, i.sparse.count * s); null !== o && (a = new Sc(a.array.slice(), a.itemSize, a.normalized)); for (var G = 0, B = b.length; G < B; G++) { var Z = b[G]; if (a.setX(Z, y[G * s]), s >= 2 && a.setY(Z, y[G * s + 1]), s >= 3 && a.setZ(Z, y[G * s + 2]), s >= 4 && a.setW(Z, y[G * s + 3]), s >= 5) throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.") } } return a })) } }, { key: "loadTexture", value: function (e) { var t = this.json, n = this.options, i = t.textures[e].source, r = t.images[i], a = this.textureLoader; if (r.uri) { var o = n.manager.getHandler(r.uri); null !== o && (a = o) } return this.loadTextureImage(e, i, a) } }, { key: "loadTextureImage", value: function (e, t, n) { var i = this, r = this.json, a = r.textures[e], o = r.images[t], s = (o.uri || o.bufferView) + ":" + a.sampler; if (this.textureCache[s]) return this.textureCache[s]; var l = this.loadImageSource(t, n).then((function (t) { t.flipY = !1, t.name = a.name || o.name || "", "" === t.name && "string" === typeof o.uri && !1 === o.uri.startsWith("data:image/") && (t.name = o.uri); var n = (r.samplers || {})[a.sampler] || {}; return t.magFilter = pS[n.magFilter] || Ya, t.minFilter = pS[n.minFilter] || za, t.wrapS = fS[n.wrapS] || Wa, t.wrapT = fS[n.wrapT] || Wa, i.associations.set(t, { textures: e }), t })).catch((function () { return null })); return this.textureCache[s] = l, l } }, { key: "loadImageSource", value: function (e, t) { var n = this.json, i = this.options; if (void 0 !== this.sourceCache[e]) return this.sourceCache[e].then((function (e) { return e.clone() })); var r = n.images[e], a = self.URL || self.webkitURL, o = r.uri || "", s = !1; if (void 0 !== r.bufferView) o = this.getDependency("bufferView", r.bufferView).then((function (e) { s = !0; var t = new Blob([e], { type: r.mimeType }); return o = a.createObjectURL(t) })); else if (void 0 === r.uri) throw new Error("THREE.GLTFLoader: Image " + e + " is missing URI and bufferView"); var l = Promise.resolve(o).then((function (e) { return new Promise((function (n, r) { var a = n; !0 === t.isImageBitmapLoader && (a = function (e) { var t = new zl(e); t.needsUpdate = !0, n(t) }), t.load(gf.resolveURL(e, i.path), a, void 0, r) })) })).then((function (e) { var t; return !0 === s && a.revokeObjectURL(o), e.userData.mimeType = r.mimeType || ((t = r.uri).search(/\.jpe?g($|\?)/i) > 0 || 0 === t.search(/^data\:image\/jpeg/) ? "image/jpeg" : t.search(/\.webp($|\?)/i) > 0 || 0 === t.search(/^data\:image\/webp/) ? "image/webp" : "image/png"), e })).catch((function (e) { throw console.error("THREE.GLTFLoader: Couldn't load texture", o), e })); return this.sourceCache[e] = l, l } }, { key: "assignTexture", value: function (e, t, n, i) { var r = this; return this.getDependency("texture", n.index).then((function (a) { if (!a) return null; if (void 0 !== n.texCoord && n.texCoord > 0 && ((a = a.clone()).channel = n.texCoord), r.extensions[Ew.KHR_TEXTURE_TRANSFORM]) { var o = void 0 !== n.extensions ? n.extensions[Ew.KHR_TEXTURE_TRANSFORM] : void 0; if (o) { var s = r.associations.get(a); a = r.extensions[Ew.KHR_TEXTURE_TRANSFORM].extendTexture(a, o), r.associations.set(a, s) } } return void 0 !== i && ("colorSpace" in a ? a.colorSpace = 3001 === i ? "srgb" : "srgb-linear" : a.encoding = i), e[t] = a, a })) } }, { key: "assignFinalMaterial", value: function (e) { var t = e.geometry, n = e.material, i = void 0 === t.attributes.tangent, r = void 0 !== t.attributes.color, a = void 0 === t.attributes.normal; if (e.isPoints) { var o = "PointsMaterial:" + n.uuid, s = this.cache.get(o); s || (s = new Ah, Cc.prototype.copy.call(s, n), s.color.copy(n.color), s.map = n.map, s.sizeAttenuation = !1, this.cache.add(o, s)), n = s } else if (e.isLine) { var l = "LineBasicMaterial:" + n.uuid, g = this.cache.get(l); g || (g = new ah, Cc.prototype.copy.call(g, n), g.color.copy(n.color), g.map = n.map, this.cache.add(l, g)), n = g } if (i || r || a) { var c = "ClonedMaterial:" + n.uuid + ":"; i && (c += "derivative-tangents:"), r && (c += "vertex-colors:"), a && (c += "flat-shading:"); var u = this.cache.get(c); u || (u = n.clone(), r && (u.vertexColors = !0), a && (u.flatShading = !0), i && (u.normalScale && (u.normalScale.y *= -1), u.clearcoatNormalScale && (u.clearcoatNormalScale.y *= -1)), this.cache.add(c, u), this.associations.set(u, this.associations.get(n))), n = u } e.material = n } }, { key: "getMaterialType", value: function () { return ep } }, { key: "loadMaterial", value: function (e) { var t, n = this, i = this.json, r = this.extensions, a = i.materials[e], o = {}, s = []; if ((a.extensions || {})[Ew.KHR_MATERIALS_UNLIT]) { var l = r[Ew.KHR_MATERIALS_UNLIT]; t = l.getMaterialType(), s.push(l.extendParams(o, a, n)) } else { var g = a.pbrMetallicRoughness || {}; if (o.color = new pc(1, 1, 1), o.opacity = 1, Array.isArray(g.baseColorFactor)) { var c = g.baseColorFactor; o.color.fromArray(c), o.opacity = c[3] } void 0 !== g.baseColorTexture && s.push(n.assignTexture(o, "map", g.baseColorTexture, 3001)), o.metalness = void 0 !== g.metallicFactor ? g.metallicFactor : 1, o.roughness = void 0 !== g.roughnessFactor ? g.roughnessFactor : 1, void 0 !== g.metallicRoughnessTexture && (s.push(n.assignTexture(o, "metalnessMap", g.metallicRoughnessTexture)), s.push(n.assignTexture(o, "roughnessMap", g.metallicRoughnessTexture))), t = this._invokeOne((function (t) { return t.getMaterialType && t.getMaterialType(e) })), s.push(Promise.all(this._invokeAll((function (t) { return t.extendMaterialParams && t.extendMaterialParams(e, o) })))) } !0 === a.doubleSided && (o.side = Xr); var u = a.alphaMode || GS; if (u === ZS ? (o.transparent = !0, o.depthWrite = !1) : (o.transparent = !1, u === BS && (o.alphaTest = void 0 !== a.alphaCutoff ? a.alphaCutoff : .5)), void 0 !== a.normalTexture && t !== mc && (s.push(n.assignTexture(o, "normalMap", a.normalTexture)), o.normalScale = new fl(1, 1), void 0 !== a.normalTexture.scale)) { var C = a.normalTexture.scale; o.normalScale.set(C, C) } return void 0 !== a.occlusionTexture && t !== mc && (s.push(n.assignTexture(o, "aoMap", a.occlusionTexture)), void 0 !== a.occlusionTexture.strength && (o.aoMapIntensity = a.occlusionTexture.strength)), void 0 !== a.emissiveFactor && t !== mc && (o.emissive = (new pc).fromArray(a.emissiveFactor)), void 0 !== a.emissiveTexture && t !== mc && s.push(n.assignTexture(o, "emissiveMap", a.emissiveTexture, 3001)), Promise.all(s).then((function () { var i = new t(o); return a.name && (i.name = a.name), RS(i, a), n.associations.set(i, { materials: e }), a.extensions && SS(r, i, a), i })) } }, { key: "createUniqueName", value: function (e) { var t = Uf.sanitizeNodeName(e || ""); return t in this.nodeNamesUsed ? t + "_" + ++this.nodeNamesUsed[t] : (this.nodeNamesUsed[t] = 0, t) } }, { key: "loadGeometries", value: function (e) { var t = this, n = this.extensions, i = this.primitiveCache; function r(e) { return n[Ew.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e, t).then((function (n) { return FS(n, e, t) })) } for (var a = [], o = 0, s = e.length; o < s; o++) { var l = e[o], g = WS(l), c = i[g]; if (c) a.push(c.promise); else { var u = void 0; u = l.extensions && l.extensions[Ew.KHR_DRACO_MESH_COMPRESSION] ? r(l) : FS(new Uc, l, t), i[g] = { primitive: l, promise: u }, a.push(u) } } return Promise.all(a) } }, { key: "loadMesh", value: function (e) { for (var t = this, n = this.json, i = this.extensions, r = n.meshes[e], a = r.primitives, o = [], s = 0, l = a.length; s < l; s++) { var g = void 0 === a[s].material ? wS(this.cache) : this.getDependency("material", a[s].material); o.push(g) } return o.push(t.loadGeometries(a)), Promise.all(o).then((function (n) { for (var o = n.slice(0, n.length - 1), s = n[n.length - 1], l = [], g = 0, c = s.length; g < c; g++) { var u = s[g], C = a[g], d = void 0, I = o[g]; if (C.mode === hS.TRIANGLES || C.mode === hS.TRIANGLE_STRIP || C.mode === hS.TRIANGLE_FAN || void 0 === C.mode) !0 === (d = !0 === r.isSkinnedMesh ? new _I(u, I) : new gu(u, I)).isSkinnedMesh && d.normalizeSkinWeights(), C.mode === hS.TRIANGLE_STRIP ? d.geometry = Yw(d.geometry, ns) : C.mode === hS.TRIANGLE_FAN && (d.geometry = Yw(d.geometry, is)); else if (C.mode === hS.LINES) d = new Ih(u, I); else if (C.mode === hS.LINE_STRIP) d = new uh(u, I); else if (C.mode === hS.LINE_LOOP) d = new hh(u, I); else { if (C.mode !== hS.POINTS) throw new Error("THREE.GLTFLoader: Primitive mode unsupported: " + C.mode); d = new bh(u, I) } Object.keys(d.geometry.morphAttributes).length > 0 && xS(d, r), d.name = t.createUniqueName(r.name || "mesh_" + e), RS(d, r), C.extensions && SS(i, d, C), t.assignFinalMaterial(d), l.push(d) } for (var h = 0, A = l.length; h < A; h++)t.associations.set(l[h], { meshes: e, primitives: h }); if (1 === l.length) return r.extensions && SS(i, l[0], r), l[0]; var p = new tI; r.extensions && SS(i, p, r), t.associations.set(p, { meshes: e }); for (var f = 0, m = l.length; f < m; f++)p.add(l[f]); return p })) } }, { key: "loadCamera", value: function (e) { var t, n = this.json.cameras[e], i = n[n.type]; if (i) return "perspective" === n.type ? t = new fu(pl.radToDeg(i.yfov), i.aspectRatio || 1, i.znear || 1, i.zfar || 2e6) : "orthographic" === n.type && (t = new Tu(-i.xmag, i.xmag, i.ymag, -i.ymag, i.znear, i.zfar)), n.name && (t.name = this.createUniqueName(n.name)), RS(t, n), Promise.resolve(t); console.warn("THREE.GLTFLoader: Missing camera parameters.") } }, { key: "loadSkin", value: function (e) { for (var t = this.json.skins[e], n = [], i = 0, r = t.joints.length; i < r; i++)n.push(this._loadNodeShallow(t.joints[i])); return void 0 !== t.inverseBindMatrices ? n.push(this.getDependency("accessor", t.inverseBindMatrices)) : n.push(null), Promise.all(n).then((function (e) { for (var n = e.pop(), i = e, r = [], a = [], o = 0, s = i.length; o < s; o++) { var l = i[o]; if (l) { r.push(l); var g = new Sg; null !== n && g.fromArray(n.array, 16 * o), a.push(g) } else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.', t.joints[o]) } return new OI(r, a) })) } }, { key: "loadAnimation", value: function (e) { for (var t = this.json.animations[e], n = t.name ? t.name : "animation_" + e, i = [], r = [], a = [], o = [], s = [], l = 0, g = t.channels.length; l < g; l++) { var c = t.channels[l], u = t.samplers[c.sampler], C = c.target, d = C.node, I = void 0 !== t.parameters ? t.parameters[u.input] : u.input, h = void 0 !== t.parameters ? t.parameters[u.output] : u.output; void 0 !== C.node && (i.push(this.getDependency("node", d)), r.push(this.getDependency("accessor", I)), a.push(this.getDependency("accessor", h)), o.push(u), s.push(C)) } return Promise.all([Promise.all(i), Promise.all(r), Promise.all(a), Promise.all(o), Promise.all(s)]).then((function (e) { for (var t = e[0], i = e[1], r = e[2], a = e[3], o = e[4], s = [], l = function () { var e, n = t[g], l = i[g], c = r[g], u = a[g], C = o[g]; if (void 0 === n) return 1; switch (n.updateMatrix(), bS[C.path]) { case bS.weights: e = bp; break; case bS.rotation: e = Gp; break; default: e = Zp }var d = n.name ? n.name : n.uuid, I = void 0 !== u.interpolation ? yS[u.interpolation] : Jo, h = []; bS[C.path] === bS.weights ? n.traverse((function (e) { e.morphTargetInfluences && h.push(e.name ? e.name : e.uuid) })) : h.push(d); var A = c.array; if (c.normalized) { for (var p = kS(A.constructor), f = new Float32Array(A.length), m = 0, v = A.length; m < v; m++)f[m] = A[m] * p; A = f } for (var b = 0, y = h.length; b < y; b++) { var G = new e(h[b] + "." + bS[C.path], l.array, A, I); "CUBICSPLINE" === u.interpolation && (G.createInterpolant = function (e) { return new (this instanceof Gp ? IS : CS)(this.times, this.values, this.getValueSize() / 3, e) }, G.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = !0), s.push(G) } }, g = 0, c = t.length; g < c; g++)l(); return new wp(n, void 0, s) })) } }, { key: "createNodeMesh", value: function (e) { var t = this.json, n = this, i = t.nodes[e]; return void 0 === i.mesh ? null : n.getDependency("mesh", i.mesh).then((function (e) { var t = n._getNodeRef(n.meshCache, i.mesh, e); return void 0 !== i.weights && t.traverse((function (e) { if (e.isMesh) for (var t = 0, n = i.weights.length; t < n; t++)e.morphTargetInfluences[t] = i.weights[t] })), t })) } }, { key: "loadNode", value: function (e) { for (var t = this, n = this.json.nodes[e], i = t._loadNodeShallow(e), r = [], a = n.children || [], o = 0, s = a.length; o < s; o++)r.push(t.getDependency("node", a[o])); var l = void 0 === n.skin ? Promise.resolve(null) : t.getDependency("skin", n.skin); return Promise.all([i, Promise.all(r), l]).then((function (e) { var t = e[0], n = e[1], i = e[2]; null !== i && t.traverse((function (e) { e.isSkinnedMesh && e.bind(i, HS) })); for (var r = 0, a = n.length; r < a; r++)t.add(n[r]); return t })) } }, { key: "_loadNodeShallow", value: function (e) { var t = this.json, n = this.extensions, i = this; if (void 0 !== this.nodeCache[e]) return this.nodeCache[e]; var r = t.nodes[e], a = r.name ? i.createUniqueName(r.name) : "", o = [], s = i._invokeOne((function (t) { return t.createNodeMesh && t.createNodeMesh(e) })); return s && o.push(s), void 0 !== r.camera && o.push(i.getDependency("camera", r.camera).then((function (e) { return i._getNodeRef(i.cameraCache, r.camera, e) }))), i._invokeAll((function (t) { return t.createNodeAttachment && t.createNodeAttachment(e) })).forEach((function (e) { o.push(e) })), this.nodeCache[e] = Promise.all(o).then((function (t) { var o; if ((o = !0 === r.isBone ? new UI : t.length > 1 ? new tI : 1 === t.length ? t[0] : new qg) !== t[0]) for (var s = 0, l = t.length; s < l; s++)o.add(t[s]); if (r.name && (o.userData.name = r.name, o.name = a), RS(o, r), r.extensions && SS(n, o, r), void 0 !== r.matrix) { var g = new Sg; g.fromArray(r.matrix), o.applyMatrix4(g) } else void 0 !== r.translation && o.position.fromArray(r.translation), void 0 !== r.rotation && o.quaternion.fromArray(r.rotation), void 0 !== r.scale && o.scale.fromArray(r.scale); return i.associations.has(o) || i.associations.set(o, {}), i.associations.get(o).nodes = e, o })), this.nodeCache[e] } }, { key: "loadScene", value: function (e) { var t = this.extensions, n = this.json.scenes[e], i = this, a = new tI; n.name && (a.name = i.createUniqueName(n.name)), RS(a, n), n.extensions && SS(t, a, n); for (var o = n.nodes || [], s = [], l = 0, g = o.length; l < g; l++)s.push(i.getDependency("node", o[l])); return Promise.all(s).then((function (e) { for (var t = 0, n = e.length; t < n; t++)a.add(e[t]); return i.associations = function (e) { var t, n = new Map, a = gr(i.associations); try { for (a.s(); !(t = a.n()).done;) { var o = (0, r.Z)(t.value, 2), s = o[0], l = o[1]; (s instanceof Cc || s instanceof zl) && n.set(s, l) } } catch (g) { a.e(g) } finally { a.f() } return e.traverse((function (e) { var t = i.associations.get(e); null != t && n.set(e, t) })), n }(a), a })) } }]), e }(); function FS(e, t, n) { var i = t.attributes, r = []; function a(t, i) { return n.getDependency("accessor", t).then((function (t) { e.setAttribute(i, t) })) } for (var o in i) { var s = vS[o] || o.toLowerCase(); s in e.attributes || r.push(a(i[o], s)) } if (void 0 !== t.indices && !e.index) { var l = n.getDependency("accessor", t.indices).then((function (t) { e.setIndex(t) })); r.push(l) } return RS(e, t), function (e, t, n) { var i = t.attributes, r = new eg; if (void 0 !== i.POSITION) { var a = n.json.accessors[i.POSITION], o = a.min, s = a.max; if (void 0 !== o && void 0 !== s) { if (r.set(new Ql(o[0], o[1], o[2]), new Ql(s[0], s[1], s[2])), a.normalized) { var l = kS(AS[a.componentType]); r.min.multiplyScalar(l), r.max.multiplyScalar(l) } var g = t.targets; if (void 0 !== g) { for (var c = new Ql, u = new Ql, C = 0, d = g.length; C < d; C++) { var I = g[C]; if (void 0 !== I.POSITION) { var h = n.json.accessors[I.POSITION], A = h.min, p = h.max; if (void 0 !== A && void 0 !== p) { if (u.setX(Math.max(Math.abs(A[0]), Math.abs(p[0]))), u.setY(Math.max(Math.abs(A[1]), Math.abs(p[1]))), u.setZ(Math.max(Math.abs(A[2]), Math.abs(p[2]))), h.normalized) { var f = kS(AS[h.componentType]); u.multiplyScalar(f) } c.max(u) } else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.") } } r.expandByVector(c) } e.boundingBox = r; var m = new fg; r.getCenter(m.center), m.radius = r.min.distanceTo(r.max) / 2, e.boundingSphere = m } else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.") } }(e, t, n), Promise.all(r).then((function () { return void 0 !== t.targets ? function (e, t, n) { for (var i = !1, r = !1, a = !1, o = 0, s = t.length; o < s; o++) { var l = t[o]; if (void 0 !== l.POSITION && (i = !0), void 0 !== l.NORMAL && (r = !0), void 0 !== l.COLOR_0 && (a = !0), i && r && a) break } if (!i && !r && !a) return Promise.resolve(e); for (var g = [], c = [], u = [], C = 0, d = t.length; C < d; C++) { var I = t[C]; if (i) { var h = void 0 !== I.POSITION ? n.getDependency("accessor", I.POSITION) : e.attributes.position; g.push(h) } if (r) { var A = void 0 !== I.NORMAL ? n.getDependency("accessor", I.NORMAL) : e.attributes.normal; c.push(A) } if (a) { var p = void 0 !== I.COLOR_0 ? n.getDependency("accessor", I.COLOR_0) : e.attributes.color; u.push(p) } } return Promise.all([Promise.all(g), Promise.all(c), Promise.all(u)]).then((function (t) { var n = t[0], o = t[1], s = t[2]; return i && (e.morphAttributes.position = n), r && (e.morphAttributes.normal = o), a && (e.morphAttributes.color = s), e.morphTargetsRelative = !0, e })) }(e, t.targets, n) : e })) } var NS = null, XS = "https://www.gstatic.com/draco/versioned/decoders/1.5.5/"; function YS(e, t, n) { return function (i) { n && n(i), e && (NS || (NS = new Fw), NS.setDecoderPath("string" === typeof e ? e : XS), i.setDRACOLoader(NS)), t && i.setMeshoptDecoder("function" === typeof Xw ? Xw() : Xw) } } function KS(e) { return eb(Lw, e, YS(!(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], arguments.length > 3 ? arguments[3] : void 0)) } KS.preload = function (e) { var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], i = arguments.length > 3 ? arguments[3] : void 0; return eb.preload(Lw, e, YS(t, n, i)) }, KS.clear = function (e) { return eb.clear(Lw, e) }, KS.setDecoderPath = function (e) { XS = e }; var LS = function (e) { var n = t.useState([-10, -2, 2.6]), i = (0, r.Z)(n, 2), a = i[0], o = i[1], s = t.useState([0, 190, 0]), l = (0, r.Z)(s, 2), g = l[0], c = l[1], u = (0, t.useRef)(), C = KS("images/character2.glb"), d = C.nodes, I = C.materials, h = C.animations, A = Je((function (e) { return e.BlockChainReducer })), p = A.userIntract, f = A.ifClickLeft, m = function (e, n) { var i = t.useRef(), a = t.useState((function () { return n ? n instanceof qg ? { current: n } : n : i })), o = (0, r.Z)(a, 1)[0], s = t.useState((function () { return new Of(void 0) })), l = (0, r.Z)(s, 1)[0]; t.useLayoutEffect((function () { n && (o.current = n instanceof qg ? n : n.current), l._root = o.current })); var g = t.useRef({}), c = t.useMemo((function () { var t = {}; return e.forEach((function (e) { return Object.defineProperty(t, e.name, { enumerable: !0, get: function () { if (o.current) return g.current[e.name] || (g.current[e.name] = l.clipAction(e, o.current)) }, configurable: !0 }) })), { ref: o, clips: e, actions: t, names: e.map((function (e) { return e.name })), mixer: l } }), [e]); return Qv((function (e, t) { return l.update(t) })), t.useEffect((function () { var e = o.current; return function () { g.current = {}, l.stopAllAction(), Object.values(c.actions).forEach((function (t) { e && l.uncacheAction(t, e) })) } }), [e]), c }(h, u), b = m.actions, y = m.names; return t.useEffect((function () { b[y[3]].reset().fadeIn(.5).play() }), []), t.useEffect((function () { if (p) { var e = [a[0] + 1, a[1], a[2]]; o(e), c([0, 60, 0]) } else { var t = (0, v.Z)(a); o(t), c([0, 190, 0]) } }), [p]), console.log(a, g, "hh"), Qv((function () { var e, t, n = (0, v.Z)(a); u.current && ((e = u.current.position).set.apply(e, (0, v.Z)(a)), (t = u.current.rotation).set.apply(t, (0, v.Z)(g))); f || b[y[1]].reset().fadeIn(.5).play(), f && (n[0] += .02, o(n)) })), (0, K.jsx)("group", { children: (0, K.jsx)("group", ln(ln({ ref: u }, e), {}, { dispose: null, children: (0, K.jsx)("group", { name: "Scene", children: (0, K.jsxs)("group", { name: "Armature", position: [.21, 0, 0], rotation: [Math.PI / 2, 0, 0], scale: .01, children: [(0, K.jsx)("primitive", { object: d.mixamorig7Hips }), (0, K.jsx)("skinnedMesh", { name: "Ch33_Belt", geometry: d.Ch33_Belt.geometry, material: I["Ch33_body.003"], skeleton: d.Ch33_Belt.skeleton }), (0, K.jsx)("skinnedMesh", { name: "Ch33_Body", geometry: d.Ch33_Body.geometry, material: I["Ch33_body.003"], skeleton: d.Ch33_Body.skeleton }), (0, K.jsx)("skinnedMesh", { name: "Ch33_Eyelashes", geometry: d.Ch33_Eyelashes.geometry, material: I["Ch33_hair.003"], skeleton: d.Ch33_Eyelashes.skeleton }), (0, K.jsx)("skinnedMesh", { name: "Ch33_Hair", geometry: d.Ch33_Hair.geometry, material: I["Ch33_hair.003"], skeleton: d.Ch33_Hair.skeleton }), (0, K.jsx)("skinnedMesh", { name: "Ch33_Pants", geometry: d.Ch33_Pants.geometry, material: I["Ch33_body.003"], skeleton: d.Ch33_Pants.skeleton }), (0, K.jsx)("skinnedMesh", { name: "Ch33_Shirt", geometry: d.Ch33_Shirt.geometry, material: I["Ch33_body.003"], skeleton: d.Ch33_Shirt.skeleton }), (0, K.jsx)("skinnedMesh", { name: "Ch33_Shoes", geometry: d.Ch33_Shoes.geometry, material: I["Ch33_body.003"], skeleton: d.Ch33_Shoes.skeleton }), (0, K.jsx)("skinnedMesh", { name: "Ch33_Suit", geometry: d.Ch33_Suit.geometry, material: I["Ch33_body.003"], skeleton: d.Ch33_Suit.skeleton }), (0, K.jsx)("skinnedMesh", { name: "Ch33_Tie", geometry: d.Ch33_Tie.geometry, material: I["Ch33_body.003"], skeleton: d.Ch33_Tie.skeleton })] }) }) })) }) }, zS = (0, t.memo)(LS); KS.preload("/textures/character2.glb"); var ES = n.p + "images/terrain.f50803c60dcb23fa2fff.jpg", TS = n.p + "images/wall.07c904a687c2be0d03e2.jpg", _S = function (e) { var t = function (e, t, n) { return bB("Plane", e, (function () { return [] }), t, n) }((function () { return { position: [0, -2, 0], type: "Static", rotation: [-Math.PI / 2, 0, 0], mass: 1 } })), n = (0, r.Z)(t, 2), i = n[0], a = (n[1], eb(zp, ES)), o = eb(zp, TS); return (0, K.jsxs)("group", { children: [(0, K.jsxs)("mesh", { ref: i, position: [0, -10, 0], rotation: [Math.PI / 2, 0, 0], scale: [22, 18, 20], children: [(0, K.jsx)("boxGeometry", { args: [.97, .97, .01] }), (0, K.jsx)("meshBasicMaterial", { map: a })] }), (0, K.jsxs)("mesh", { position: [10.5, 2.1, 0], children: [(0, K.jsx)("boxGeometry", { args: [.5, 8, 17.5] }), (0, K.jsx)("meshBasicMaterial", { map: o })] }), (0, K.jsxs)("mesh", { position: [-.08, 2.1, -8.25], children: [(0, K.jsx)("boxGeometry", { args: [21.3, 8, 1] }), (0, K.jsx)("meshBasicMaterial", { map: o })] })] }) }; KS.preload("/textures/table.glb"); var US = function () { var e = eb(zp, "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxITEhMSEhIVFRUSFRYXFRUVDw8VEhUVFxcWFhUSFRUYHSggGBolHRgVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDQ0NDw0NDisZFRkrKy0rKysrKysrKysrKystKysrKysrKysrKysrLSsrKysrKysrKysrKysrKysrKysrK//AABEIAOAA4AMBIgACEQEDEQH/xAAYAAEBAQEBAAAAAAAAAAAAAAADAgEABP/EACsQAAIAAwcEAgIDAQAAAAAAAAABAgMxIUFRcYHB8BGRsdFhoTLCEiJC4f/EABcBAQEBAQAAAAAAAAAAAAAAAAABBQL/xAAVEQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEQMRAD8AF357MLpX56FshuuhlNQ0CqLgFC7GK2QeSa7VzA46bXnwYqFEoWCjC600GgowFjJlFRc+jJXsgOX7Oh/IqWtzP9FHR0QbFjVgSvyAWYq5g4jTLwXeBUDtRuOhMFUX/wAAm9aeSI1Zz4Nb28nTaAS66sqAh+y4PYFmy6aEqp0tkEw0Lgr32IVxUt112KNjdq18GQq1Zejpuz8HX6AUg/8AheIcIDwU1EbCVNS2wBjqYjoqnPECIaDS6dgULBQBW6ZejpPPozng6Tz6IOh3ZL/LUqVTVkR/kiio7gsRHRBY8wAWZEE7y4w+tdNwKgVqLu58EQu0R058AE1t5OmKwrAyYBLRUG7JbsEg3A7padLXjyjXUqWtgAhuzZUur1/U7DNmyq9/1AyNeNjbzpj8bGKoFO/MOH1uL7DhW24CQ012LatZCuzLV+gAup0x2M6IydeBK3Fl+gvY0r0BUJUhc7EplyiDpVAo/wAkJKdmoUx/258lFRUB6+BW+agw7eQHmryC7+YjzVzuFEq8xA2XUuHn0TL2ESCj6fiZFQp3EMIkuDcj2XL3QFFwUIfPouCmgBNUzNlV7/qZ1tWbKkrf9SjJi38EpWrL0XO2fgzpbo9iDU6hrn2LiElb23Ar+VMy1eQlZqXiAKqbOdTr9To8QJTs58CygkhYOdwKLlPnYhmyorXkQdLdiz9hTa8+SpdCZqtKNYcOwiCgVMgPVGqBRX8xEdEEvIFwV0EdCJexd2vsgiKocXPouOq1Ji3KIRcO5C3EgpqB3SnMC4XZpszHcaqabAGt35Zcm/N7Ee2VJdr1/Uo2at/B1/Pg2OvfwzHdr5RB3UO/X2L0DvA3DNGujMXOxuIB36mzOdjOtpsV4EdK5Cy+dwugsvncDWVLVpPUSTz6AiXDYiJlRYKa+gplcgKweQMN2Q3SgUN2XoD0xADdQcfgBJW3su4iVfkilTuQHGrUdHfmzo3auYmRXlEK8uHdELc32gFw5gdCrHlsc3TL0XArOYAD08vyXKVr12exhUp1z2A2YuaMl3cwLnc+yFzuB0XPoNVKiZHWoFw77Gu8xHPcCVXsZ0sOdTYlYBIsAXWuXsSHZ+QNbqJJYV4kmmhBqVgUyoqViImVXLyiYrsyIHTL0I1QKFUy9AJ1Jd5TDxAWVfkUqGSbyrlzAgKOpzfk6ZVGRX6lEJ80Lg3Ih52ElLbyBd6y9CS6cwDapkXKoAMO7LluuexECoVBfmBc187hwvbcuY+dw4FTl4GshXjRILHUCutOYHRGYFRXgGqlRErc2K4CU6lQOmpEO+xcFwG45Cyl/XQOG8SW7NCDk7ETHU5uw6KpRkx0Ia8ehIlQKG7L0AjQT/1zEd38uYP8agNLVS+lhMtVFwIPLHVcwMd50yq5gcUQmJA9g4fQsNGBfShsCKiVCZRAUuiNl11exsr2dD+Xco2O4Nc7lzHYiOfYCOLnYLrXNjRKwHEC1XU72ZCzcdAITtWa3Oidi5gUnb289CI6c+AMddX4LhIat1ZUAFsqXTQnn2bKdmgGdbFzE2/Rhw0RcuvfYDY3TlxEN2XoqY9/BkN2XoCuvOZkN10LDYDwuxitgw01EbIPNNVpioVMqYqFEL0NArGCqDS6dvICxc+jJa3Od2Xo6TzuQTAtzEv7FQbsn/RRsasCXO4sdwSvAWMFiTGE7wKgqi16IhVvMS2rOfABN7eUbNdhru08mTFYBLKguMZUC8gbedLoaq8+DZa8L7QBq4qU99iIbs2VLq9f1A2Zb2fg7rbodGvGxl/YC3eHCXiHC9gGVNS2w1TUt1YAxVOZzqdMdjKIQstBLcWX6IL54Nkc+jIdipK52IMl01Ijf9kLKoFH+SKNdEFiJE7EH1AuMPHTcaYgWq8xAqB2iXc+CJatLXPoCMPlmTCn/kyKgEOhcO5HPJcG4FNWly1Z2ILgpoQDhmzZVe/6nNUzNlX6/qUZMfjYxVKm36+CelunoC/YcKt7biK8NX8xAtXZsRVegfWmZSv5gAcRk6jMVTZzqUT08jSgIXZqhpZKLRckPrUuVz6A6U7NQpj/ALFy3Yswprt58gW3YDA6ZeRXzuFDsB6JnOzCiVdNxplwTv5iBsC8exOnkiCugjpr7AOK4hiOpEXvYCBIN0GhIdwOfOwkFNEHhzAuGmmwBYZlyVv+pPtlyb83sBk/Z+DOlvfYuYuv34Mv58Ac6sJK3tuK7w73zEDv42aiK8nA10YBqup0eOXg6/U2YuaFEJCy+dw8chIOdyUUzZUVryRLNlq3MCZbs1Imq3nyLLhsImVA4KFUyHwzQMF2QHpdECPGgAEl7F3c+SJOy3LVOfIBzKrUmLc2OqOjvANVEgoGty1ugLw0NVNNjHdy41Kx5bAH18sqTV6/qT08vyXKVddvQGx3cuZLu18iTFzRkYcvQGtB3iRBXgUrs9jbmZDvsa7yA7zY7zFXsc1YdDBJfO4fQWAg4uTz6IxEksgyCiz9BTKiwqwOZUo3AKFUy9CROmZEF2XoB2wcfgtvmobvAWU65IpUIl35FKgERu1cxMivOjqd7Ahb+jfaJXOxcG4CdaZei4FZzAi9ZehJdOYAF1KlOuewcO7KluuewCTefZCfNWVN59hQumgFRPnYPrURoJXgJDcdE65nYcwOi9ARea6GKpUTsAjHmIkOzDTLgdNQNYkqmgeIklf10A1UREyq08lp2IiOoGRXBQqmS2FmOhDVvMUBUW4eI0V+YL/0A0m8q5cwMl3ifxsIPPHVGRXmxu1cwMZREPOwsv15CQkDrowLwKl0O6UOlogKBUNgvz2MlUXLjYK6vYouN87hQ3cvEmBrncBYoQuldRYnvsF1rr4A3DmBUd5irqcBEO5r3OTtWfs6J87ARDvsXDcRf38FoClfy9lyqaEMqB2aAa6GRfkT1Ov0YGtUDgqsvQsd3MQoLsvQH//Z"); return (0, K.jsxs)("group", { children: [(0, K.jsxs)("mesh", { position: [-4.3, .5, -3], children: [(0, K.jsx)("boxGeometry", { args: [.1, 5, 5] }), (0, K.jsx)("meshStandardMaterial", { map: e })] }), (0, K.jsxs)("mesh", { position: [.05, .5, -3], children: [(0, K.jsx)("boxGeometry", { args: [.1, 5, 5] }), (0, K.jsx)("meshStandardMaterial", { map: e })] }), (0, K.jsxs)("mesh", { position: [4.5, .5, -3], children: [(0, K.jsx)("boxGeometry", { args: [.1, 5, 5] }), (0, K.jsx)("meshStandardMaterial", { map: e })] })] }) }, DS = [{ id: 1, tablePosition: [4.4, 2, 0], Board: [{ id: 1, title: "Verification", position: [-1.2, 6, -9.6] }], divider: [{ id: 1, position: [1.6, .1, 0] }] }, { id: 2, tablePosition: [8.9, 2, 0], Board: [{ id: 1, title: "Prevent Double Voting", position: [3.7, 6, -9.6] }], divider: [{ id: 1, position: [5.9, .1, 0] }] }, { id: 3, tablePosition: [13.25, 2, 0], Board: [{ id: 1, title: " Securing the Electoral Process ", position: [8.3, 6, -9.6] }], divider: [{ id: 1, position: [10.4, .1, 0] }] }, { id: 4, tablePosition: [17.9, 2, 0], Board: [{ id: 1, title: "Public Verification", position: [13, 6, -9.6] }], divider: [] }], PS = function () { var e = (0, t.useState)({ isLeft: !1, id: 0, color: "red" }), n = (0, r.Z)(e, 2), i = n[0], a = n[1], o = i.id; console.log(i.id); var s = rt(), l = Je((function (e) { return e.BlockChainReducer })), g = l.selectedCardIndex, c = l.ifClickLeft; return t.useEffect((function () { if (c) { var e = setTimeout((function () { a((function (e) { return ln(ln({}, e), {}, { id: 1 }) })), s(ni(!c)) }), 2900); return function () { clearTimeout(e) } } }), [c]), (0, t.useEffect)((function () { o > 0 && !c && (a((function (e) { return ln(ln({}, e), {}, { color: "green" }) })), s(ei(!0))) }), [o, c]), console.log(c), (0, K.jsxs)(tZ, { style: { background: "#022027", height: "81vh", marginTop: 19, width: "100%" }, camera: { fov: 15, position: [-5, 10, 70] }, children: [(0, K.jsx)("ambientLight", {}), (0, K.jsx)("pointLight", { position: [10, 10, 10] }), (0, K.jsxs)(SB, { children: [(0, K.jsxs)("group", { position: [-1, 0, 0], children: [(0, K.jsxs)("group", { position: [0, .05, 0], children: [(0, K.jsx)("spotLight", { color: "white", intensity: 50, angle: 60, penumbra: 0, position: [-1, 1, 9], rotation: [0, 0, 0], castShadow: !0 }), (0, K.jsx)(zS, { isLeft: c, state: i, scale: [3, 3, 3] })] }), DS.map((function (e, t) { return (0, K.jsx)("group", { position: [-8, -2, 1], children: (0, K.jsxs)("group", { position: [2.1, 0, 1], children: [e.Board.map((function (e, t) { return (0, K.jsx)("group", { children: (0, K.jsxs)("mesh", { position: e.position, children: [(0, K.jsx)("boxGeometry", { args: [4, 1, 0] }), (0, K.jsx)("meshBasicMaterial", {}), (0, K.jsx)(Bw, { position: [0, .2, .1], color: "black", anchorX: "center", anchorY: "center", fontSize: .27, strokeWidth: 30, children: e.title })] }) }) })), e.divider.map((function (e) { return (0, K.jsx)("group", { children: (0, K.jsxs)("mesh", { position: e.position, children: [(0, K.jsx)("boxGeometry", { args: [.2, .1, 5] }), (0, K.jsx)("meshBasicMaterial", { color: g.includes(t) ? "green" : "red" })] }, t) }) }))] }) }) })), (0, K.jsx)(US, {}), [1, 2, 3, 4].map((function (e) { return (0, K.jsx)("group", { position: [-8.5, -.5, 2] }) })), (0, K.jsx)(_S, {})] }), (0, K.jsx)(Hw, {}), (0, K.jsx)("color", { args: ["#022027"], attach: "background" })] })] }) }, JS = function () { var e = (0, t.useState)(null), n = (0, r.Z)(e, 2), i = n[0], a = n[1]; return (0, K.jsx)("div", { children: (0, K.jsxs)("svg", { width: "300", height: "500", viewBox: "0 0 455 591", fill: "none", xmlns: "http://www.w3.org/2000/svg", children: [(0, K.jsxs)("g", { "clip-path": "url(#clip0_40_7)", children: [(0, K.jsxs)("g", { filter: "url(#filter0_d_40_7)", children: [(0, K.jsx)("path", { d: "M435.517 2.38306H19.582C10.4123 2.38306 2.9787 8.33011 2.9787 15.6661V575.507C2.9787 582.843 10.4123 588.79 19.582 588.79H435.517C444.687 588.79 452.12 582.843 452.12 575.507V15.6661C452.12 8.33011 444.687 2.38306 435.517 2.38306Z", fill: "#E8EDE9" }), (0, K.jsx)("path", { d: "M435.517 2.38306H19.582C10.4123 2.38306 2.9787 8.33011 2.9787 15.6661V575.507C2.9787 582.843 10.4123 588.79 19.582 588.79H435.517C444.687 588.79 452.12 582.843 452.12 575.507V15.6661C452.12 8.33011 444.687 2.38306 435.517 2.38306Z", stroke: "#B6B6B6", "stroke-width": "6.18278" })] }), (0, K.jsx)("path", { d: "M268.026 40.3025H21.5959C11.3185 40.3025 2.98706 46.9679 2.98706 55.19V572.426C2.98706 580.649 11.3185 587.314 21.5959 587.314H268.026C278.304 587.314 286.635 580.649 286.635 572.426V55.19C286.635 46.9679 278.304 40.3025 268.026 40.3025Z", stroke: "#B6B6B6", "stroke-width": "6.28681" }), (0, K.jsx)("path", { d: "M157.358 31.8231C162.296 31.8231 166.299 28.8793 166.299 25.2479C166.299 21.6165 162.296 18.6726 157.358 18.6726C152.42 18.6726 148.416 21.6165 148.416 25.2479C148.416 28.8793 152.42 31.8231 157.358 31.8231Z", fill: "green" }), (0, K.jsx)("path", { d: "M104.625 27.4603V20.2451H107.673C108.378 20.2451 108.956 20.3415 109.408 20.534C109.86 20.7242 110.195 20.9861 110.412 21.3196C110.629 21.6531 110.738 22.0325 110.738 22.4576C110.738 22.8827 110.629 23.2597 110.412 23.5885C110.195 23.9173 109.861 24.1757 109.412 24.3636C108.963 24.5491 108.389 24.6419 107.691 24.6419H105.225V23.8527H107.656C108.137 23.8527 108.525 23.7964 108.818 23.6836C109.114 23.5709 109.329 23.4112 109.461 23.2045C109.596 22.9955 109.663 22.7465 109.663 22.4576C109.663 22.1687 109.596 21.9162 109.461 21.7002C109.326 21.4841 109.11 21.3173 108.814 21.1999C108.517 21.0801 108.125 21.0202 107.638 21.0202H105.718V27.4603H104.625ZM108.871 24.2191L111.09 27.4603H109.822L107.638 24.2191H108.871ZM115.18 27.573C114.528 27.573 113.966 27.458 113.494 27.2278C113.024 26.9953 112.661 26.6712 112.406 26.2554C112.153 25.8374 112.027 25.3512 112.027 24.7969C112.027 24.2426 112.153 23.7541 112.406 23.3313C112.661 22.9062 113.017 22.575 113.472 22.3378C113.929 22.0982 114.463 21.9784 115.074 21.9784C115.427 21.9784 115.775 22.0254 116.118 22.1194C116.461 22.2133 116.774 22.366 117.056 22.5774C117.338 22.7864 117.563 23.0636 117.73 23.4088C117.897 23.7541 117.981 24.1792 117.981 24.6842V25.0364H112.767V24.3178H116.924C116.924 24.0124 116.848 23.74 116.695 23.5004C116.546 23.2608 116.331 23.0718 116.052 22.9332C115.776 22.7946 115.45 22.7253 115.074 22.7253C114.661 22.7253 114.303 22.8076 114 22.9719C113.7 23.134 113.47 23.3454 113.308 23.6061C113.147 23.8668 113.066 24.1463 113.066 24.4446V24.9237C113.066 25.3324 113.154 25.6789 113.331 25.963C113.509 26.2449 113.757 26.4598 114.075 26.6077C114.392 26.7534 114.761 26.8262 115.18 26.8262C115.453 26.8262 115.7 26.7956 115.92 26.7346C116.143 26.6712 116.336 26.5772 116.497 26.4528C116.658 26.3259 116.783 26.1685 116.871 25.9806L117.875 26.2061C117.77 26.4786 117.592 26.7181 117.342 26.9248C117.093 27.1291 116.785 27.2889 116.417 27.404C116.05 27.5167 115.638 27.573 115.18 27.573ZM121.552 27.5872C121.124 27.5872 120.734 27.5226 120.385 27.3934C120.036 27.2619 119.758 27.0728 119.553 26.8262C119.348 26.5772 119.245 26.2766 119.245 25.9243C119.245 25.6142 119.321 25.3629 119.474 25.1704C119.626 24.9754 119.83 24.8227 120.086 24.7123C120.341 24.602 120.623 24.5197 120.931 24.4658C121.242 24.4093 121.555 24.3647 121.869 24.3318C122.28 24.2896 122.613 24.2579 122.869 24.2367C123.127 24.2133 123.315 24.1745 123.432 24.1205C123.553 24.0665 123.613 23.9725 123.613 23.8387V23.8105C123.613 23.4628 123.494 23.1927 123.257 23.0002C123.021 22.8076 122.665 22.7112 122.186 22.7112C121.69 22.7112 121.301 22.7982 121.02 22.9719C120.737 23.1458 120.539 23.3313 120.425 23.5286L119.439 23.2468C119.614 22.918 119.85 22.662 120.143 22.4788C120.439 22.2932 120.763 22.164 121.112 22.0912C121.464 22.016 121.81 21.9784 122.151 21.9784C122.368 21.9784 122.618 21.9996 122.9 22.0419C123.184 22.0818 123.459 22.1652 123.724 22.292C123.99 22.4188 124.212 22.6102 124.388 22.8662C124.564 23.1223 124.652 23.4652 124.652 23.895V27.4603H123.613V26.7275H123.56C123.49 26.845 123.372 26.9706 123.208 27.1045C123.044 27.2384 122.825 27.3523 122.552 27.4463C122.279 27.5402 121.945 27.5872 121.552 27.5872ZM121.711 26.8402C122.122 26.8402 122.468 26.7757 122.75 26.6465C123.035 26.5173 123.249 26.3506 123.393 26.1462C123.54 25.9419 123.613 25.727 123.613 25.5015V24.7405C123.569 24.7828 123.472 24.8216 123.322 24.8568C123.175 24.8896 123.006 24.919 122.811 24.9449C122.621 24.9684 122.434 24.9895 122.252 25.0083C122.073 25.0247 121.928 25.0388 121.816 25.0506C121.546 25.0787 121.294 25.1246 121.059 25.1879C120.827 25.249 120.639 25.3418 120.495 25.4663C120.355 25.5884 120.284 25.7552 120.284 25.9666C120.284 26.2554 120.418 26.4739 120.684 26.6218C120.955 26.7674 121.297 26.8402 121.711 26.8402ZM129.103 27.573C128.539 27.573 128.042 27.4591 127.611 27.2313C127.179 27.0012 126.842 26.677 126.598 26.259C126.354 25.8385 126.232 25.3418 126.232 24.7687C126.232 24.2003 126.354 23.7071 126.598 23.2891C126.842 22.871 127.18 22.548 127.615 22.3202C128.049 22.0923 128.551 21.9784 129.121 21.9784C129.561 21.9784 129.909 22.0372 130.164 22.1546C130.423 22.2697 130.62 22.4013 130.755 22.5492C130.893 22.6948 131 22.8146 131.076 22.9085H131.164V20.2451H132.203V27.4603H131.199V26.6289H131.076C131 26.7275 130.891 26.852 130.75 27.0024C130.61 27.1503 130.409 27.283 130.147 27.4004C129.886 27.5155 129.538 27.573 129.103 27.573ZM129.245 26.8262C129.661 26.8262 130.013 26.7393 130.301 26.5655C130.589 26.3893 130.808 26.1462 130.957 25.8362C131.107 25.5238 131.181 25.1633 131.181 24.7546C131.181 24.3507 131.109 23.9972 130.962 23.6942C130.815 23.3889 130.598 23.1516 130.31 22.9825C130.022 22.8111 129.667 22.7253 129.245 22.7253C128.804 22.7253 128.437 22.8158 128.143 22.9966C127.853 23.1752 127.634 23.4182 127.487 23.7259C127.343 24.0312 127.271 24.3741 127.271 24.7546C127.271 25.1398 127.345 25.4898 127.492 25.8045C127.641 26.1169 127.862 26.3658 128.152 26.5514C128.446 26.7346 128.81 26.8262 129.245 26.8262ZM134.921 29.4896C134.744 29.4896 134.588 29.4779 134.449 29.4543C134.311 29.4333 134.216 29.4121 134.163 29.391L134.428 28.6582C134.68 28.7098 134.903 28.7286 135.097 28.7145C135.291 28.7004 135.462 28.6312 135.612 28.5067C135.764 28.3845 135.904 28.1861 136.03 27.9113L136.224 27.4885L133.723 22.0489H134.85L136.717 26.3611H136.787L138.655 22.0489H139.783L136.911 28.2495C136.782 28.529 136.622 28.7603 136.431 28.9435C136.24 29.1291 136.018 29.2664 135.766 29.3558C135.516 29.445 135.235 29.4896 134.921 29.4896Z", fill: "black" }), (0, K.jsx)("path", { d: "M298.013 42.6178V34.2001H301.692C302.425 34.2001 303.029 34.3014 303.506 34.5042C303.982 34.7043 304.336 34.9742 304.569 35.3139C304.802 35.651 304.918 36.025 304.918 36.4361C304.918 36.7978 304.838 37.0964 304.677 37.332C304.519 37.5677 304.31 37.754 304.05 37.8911C303.793 38.0281 303.514 38.1295 303.212 38.1952V38.2774C303.535 38.2938 303.858 38.3843 304.183 38.5487C304.509 38.7131 304.781 38.9488 305 39.2557C305.22 39.5625 305.33 39.9379 305.33 40.3818C305.33 40.8038 305.21 41.1834 304.97 41.5204C304.73 41.8574 304.352 42.1246 303.834 42.3219C303.317 42.5191 302.644 42.6178 301.815 42.6178H298.013ZM299.287 41.7135H301.815C302.647 41.7135 303.238 41.5848 303.588 41.3272C303.941 41.0669 304.117 40.7518 304.117 40.3818C304.117 40.0969 304.026 39.8338 303.845 39.5927C303.663 39.3488 303.405 39.1543 303.069 39.0091C302.733 38.8611 302.336 38.7871 301.877 38.7871H299.287V41.7135ZM299.287 37.8993H301.651C302.034 37.8993 302.381 37.839 302.689 37.7185C303 37.5979 303.247 37.428 303.428 37.2088C303.613 36.9895 303.706 36.732 303.706 36.4361C303.706 36.0661 303.545 35.7524 303.223 35.4948C302.901 35.2345 302.39 35.1044 301.692 35.1044H299.287V37.8993ZM309.581 42.7658C309.081 42.7658 308.627 42.6904 308.219 42.5397C307.812 42.3863 307.488 42.1657 307.249 41.878C307.009 41.5875 306.889 41.2368 306.889 40.8257C306.889 40.464 306.978 40.1709 307.156 39.9461C307.334 39.7187 307.572 39.5406 307.87 39.4119C308.168 39.2831 308.497 39.1871 308.856 39.1241C309.219 39.0583 309.584 39.0063 309.95 38.968C310.43 38.9186 310.819 38.8816 311.117 38.857C311.418 38.8296 311.638 38.7843 311.775 38.7213C311.915 38.6583 311.985 38.5487 311.985 38.3925V38.3596C311.985 37.9541 311.846 37.639 311.569 37.4143C311.295 37.1896 310.879 37.0772 310.32 37.0772C309.742 37.0772 309.288 37.1786 308.959 37.3814C308.63 37.5842 308.399 37.8006 308.266 38.0308L307.115 37.702C307.32 37.3183 307.594 37.0197 307.937 36.806C308.283 36.5895 308.659 36.4388 309.067 36.3539C309.478 36.2662 309.882 36.2223 310.279 36.2223C310.533 36.2223 310.824 36.247 311.153 36.2963C311.485 36.3429 311.805 36.4402 312.114 36.5881C312.425 36.7361 312.684 36.9594 312.89 37.2581C313.095 37.5568 313.198 37.9568 313.198 38.4583V42.6178H311.985V41.7629H311.924C311.841 41.8999 311.704 42.0465 311.513 42.2027C311.321 42.3589 311.066 42.4918 310.747 42.6014C310.428 42.711 310.04 42.7658 309.581 42.7658ZM309.766 41.8944C310.245 41.8944 310.65 41.8191 310.978 41.6683C311.31 41.5177 311.56 41.3231 311.728 41.0847C311.899 40.8463 311.985 40.5956 311.985 40.3326V39.4447C311.933 39.494 311.821 39.5392 311.646 39.5803C311.475 39.6187 311.276 39.653 311.05 39.6831C310.828 39.7105 310.61 39.7352 310.398 39.7571C310.189 39.7763 310.019 39.7927 309.889 39.8064C309.573 39.8393 309.279 39.8928 309.005 39.9667C308.735 40.038 308.515 40.1462 308.348 40.2915C308.183 40.4339 308.101 40.6285 308.101 40.8751C308.101 41.2121 308.257 41.467 308.569 41.6396C308.884 41.8095 309.283 41.8944 309.766 41.8944ZM316.623 34.2001V42.6178H315.41V34.2001H316.623ZM320.056 34.2001V42.6178H318.844V34.2001H320.056ZM325.483 42.7493C324.77 42.7493 324.145 42.6137 323.608 42.3424C323.073 42.0712 322.655 41.6916 322.354 41.2039C322.056 40.7162 321.907 40.1462 321.907 39.494C321.907 38.8364 322.056 38.2623 322.354 37.7718C322.655 37.2814 323.073 36.9005 323.608 36.6292C324.145 36.358 324.77 36.2223 325.483 36.2223C326.196 36.2223 326.819 36.358 327.353 36.6292C327.89 36.9005 328.308 37.2814 328.607 37.7718C328.908 38.2623 329.059 38.8364 329.059 39.494C329.059 40.1462 328.908 40.7162 328.607 41.2039C328.308 41.6916 327.89 42.0712 327.353 42.3424C326.819 42.6137 326.196 42.7493 325.483 42.7493ZM325.483 41.878C326.024 41.878 326.47 41.767 326.819 41.5451C327.168 41.3231 327.426 41.0313 327.594 40.6696C327.762 40.3079 327.846 39.916 327.846 39.494C327.846 39.072 327.762 38.6788 327.594 38.3144C327.426 37.95 327.168 37.6554 326.819 37.4307C326.47 37.206 326.024 37.0937 325.483 37.0937C324.941 37.0937 324.496 37.206 324.147 37.4307C323.798 37.6554 323.539 37.95 323.371 38.3144C323.203 38.6788 323.119 39.072 323.119 39.494C323.119 39.916 323.203 40.3079 323.371 40.6696C323.539 41.0313 323.798 41.3231 324.147 41.5451C324.496 41.767 324.941 41.878 325.483 41.878ZM334.342 36.3045V37.1266H330.252V36.3045H334.342ZM331.444 34.7919H332.656V40.8093C332.656 41.0833 332.706 41.2888 332.805 41.4259C332.908 41.5601 333.038 41.6505 333.196 41.6971C333.356 41.741 333.526 41.7629 333.704 41.7629C333.838 41.7629 333.948 41.7574 334.033 41.7464C334.119 41.7327 334.187 41.7218 334.239 41.7135L334.485 42.5849C334.403 42.6096 334.288 42.6342 334.141 42.6589C333.994 42.6863 333.807 42.7 333.581 42.7C333.239 42.7 332.903 42.6411 332.574 42.5233C332.248 42.4055 331.978 42.226 331.762 41.9849C331.55 41.7437 331.444 41.4396 331.444 41.0724V34.7919ZM347.303 34.2001H348.578V39.7736C348.578 40.3489 348.408 40.8627 348.069 41.3149C347.733 41.7642 347.259 42.1191 346.646 42.3794C346.033 42.637 345.314 42.7658 344.488 42.7658C343.663 42.7658 342.943 42.637 342.331 42.3794C341.717 42.1191 341.241 41.7642 340.902 41.3149C340.566 40.8627 340.399 40.3489 340.399 39.7736V34.2001H341.673V39.6913C341.673 40.1024 341.785 40.4682 342.012 40.7887C342.238 41.1066 342.56 41.3573 342.978 41.541C343.399 41.7218 343.903 41.8122 344.488 41.8122C345.074 41.8122 345.577 41.7218 345.999 41.541C346.42 41.3573 346.742 41.1066 346.965 40.7887C347.19 40.4682 347.303 40.1024 347.303 39.6913V34.2001ZM352.17 38.82V42.6178H350.958V36.3045H352.129V37.291H352.232C352.416 36.9704 352.697 36.7128 353.074 36.5182C353.451 36.321 353.937 36.2223 354.534 36.2223C355.068 36.2223 355.535 36.31 355.936 36.4853C356.336 36.658 356.648 36.921 356.871 37.2746C357.094 37.6253 357.205 38.0692 357.205 38.6063V42.6178H355.992V38.672C355.992 38.1761 355.832 37.7897 355.509 37.5129C355.187 37.2334 354.746 37.0937 354.184 37.0937C353.797 37.0937 353.451 37.1608 353.146 37.2951C352.845 37.4293 352.607 37.6253 352.432 37.8828C352.257 38.1404 352.17 38.4528 352.17 38.82ZM359.42 42.6178V36.3045H360.633V42.6178H359.42ZM360.037 35.2523C359.801 35.2523 359.597 35.1879 359.425 35.0591C359.258 34.9303 359.174 34.7755 359.174 34.5947C359.174 34.4138 359.258 34.259 359.425 34.1302C359.597 34.0014 359.801 33.937 360.037 33.937C360.274 33.937 360.475 34.0014 360.643 34.1302C360.814 34.259 360.9 34.4138 360.9 34.5947C360.9 34.7755 360.814 34.9303 360.643 35.0591C360.475 35.1879 360.274 35.2523 360.037 35.2523ZM366.285 36.3045V37.1266H362.196V36.3045H366.285ZM363.388 34.7919H364.6V40.8093C364.6 41.0833 364.65 41.2888 364.749 41.4259C364.852 41.5601 364.982 41.6505 365.14 41.6971C365.301 41.741 365.471 41.7629 365.649 41.7629C365.782 41.7629 365.891 41.7574 365.977 41.7464C366.063 41.7327 366.131 41.7218 366.183 41.7135L366.429 42.5849C366.347 42.6096 366.233 42.6342 366.085 42.6589C365.938 42.6863 365.751 42.7 365.525 42.7C365.183 42.7 364.847 42.6411 364.518 42.5233C364.193 42.4055 363.923 42.226 363.707 41.9849C363.494 41.7437 363.388 41.4396 363.388 41.0724V34.7919Z", fill: "black" }), (0, K.jsx)("path", { d: "M432.439 2.9436H344.778V15.3205H432.439V2.9436Z", fill: "#2C6A90" }), (0, K.jsx)("path", { d: "M449.295 125.865H289.702V161.485H449.295V125.865Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 131.782H365.291C356.456 131.782 349.294 137.049 349.294 143.546C349.294 150.042 356.456 155.309 365.291 155.309H398.602C407.437 155.309 414.598 150.042 414.598 143.546C414.598 137.049 407.437 131.782 398.602 131.782Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 151.926C319.458 151.926 324.09 148.52 324.09 144.32C324.09 140.118 319.458 136.713 313.746 136.713C308.033 136.713 303.402 140.118 303.402 144.32C303.402 148.52 308.033 151.926 313.746 151.926Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M388.952 32.7178H387.932C384.727 32.7178 382.13 34.7957 382.13 37.3591V42.774C382.13 45.3374 384.727 47.4154 387.932 47.4154H388.952C392.156 47.4154 394.754 45.3374 394.754 42.774V37.3591C394.754 34.7957 392.156 32.7178 388.952 32.7178Z", fill: "black", "fill-opacity": "0.953975" }), (0, K.jsx)("path", { d: "M449.295 54.625H289.702V90.2448H449.295V54.625Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { onClick: function () { i || (document.getElementById("light1").style.fill = "red", a("test1")) }, disabled: i && "test1" !== i, d: "M398.602 60.543H365.291C356.456 60.543 349.294 65.8095 349.294 72.3064C349.294 78.8026 356.456 84.0692 365.291 84.0692H398.602C407.437 84.0692 414.598 78.8026 414.598 72.3064C414.598 65.8095 407.437 60.543 398.602 60.543Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { id: "light1", d: "M313.746 80.6864C319.458 80.6864 324.09 77.2804 324.09 73.0796C324.09 68.8783 319.458 65.4729 313.746 65.4729C308.033 65.4729 303.402 68.8783 303.402 73.0796C303.402 77.2804 308.033 80.6864 313.746 80.6864Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 90.2449H289.702V125.865H449.295V90.2449Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { onClick: function () { i || (document.getElementById("light2").style.fill = "red", a("test2")) }, disabled: i && "test2" !== i, d: "M398.602 96.1626H365.291C356.456 96.1626 349.294 101.429 349.294 107.926C349.294 114.423 356.456 119.689 365.291 119.689H398.602C407.437 119.689 414.598 114.423 414.598 107.926C414.598 101.429 407.437 96.1626 398.602 96.1626Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { id: " light2", d: "M313.746 116.306C319.458 116.306 324.09 112.901 324.09 108.699C324.09 104.499 319.458 101.093 313.746 101.093C308.033 101.093 303.402 104.499 303.402 108.699C303.402 112.901 308.033 116.306 313.746 116.306Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 161.485H289.702V197.105H449.295V161.485Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 167.403H365.291C356.456 167.403 349.294 172.669 349.294 179.166C349.294 185.662 356.456 190.929 365.291 190.929H398.602C407.437 190.929 414.598 185.662 414.598 179.166C414.598 172.669 407.437 167.403 398.602 167.403Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 187.546C319.458 187.546 324.09 184.141 324.09 179.939C324.09 175.739 319.458 172.333 313.746 172.333C308.033 172.333 303.402 175.739 303.402 179.939C303.402 184.141 308.033 187.546 313.746 187.546Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 197.104H289.702V232.725H449.295V197.104Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 203.022H365.291C356.456 203.022 349.294 208.289 349.294 214.786C349.294 221.282 356.456 226.549 365.291 226.549H398.602C407.437 226.549 414.598 221.282 414.598 214.786C414.598 208.289 407.437 203.022 398.602 203.022Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 223.166C319.458 223.166 324.09 219.76 324.09 215.559C324.09 211.358 319.458 207.953 313.746 207.953C308.033 207.953 303.402 211.358 303.402 215.559C303.402 219.76 308.033 223.166 313.746 223.166Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 232.725H289.702V268.344H449.295V232.725Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 238.643H365.291C356.456 238.643 349.294 243.909 349.294 250.405C349.294 256.902 356.456 262.169 365.291 262.169H398.602C407.437 262.169 414.598 256.902 414.598 250.405C414.598 243.909 407.437 238.643 398.602 238.643Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 258.786C319.458 258.786 324.09 255.38 324.09 251.179C324.09 246.978 319.458 243.573 313.746 243.573C308.033 243.573 303.402 246.978 303.402 251.179C303.402 255.38 308.033 258.786 313.746 258.786Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 268.344H289.702V303.964H449.295V268.344Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 274.262H365.291C356.456 274.262 349.294 279.529 349.294 286.026C349.294 292.522 356.456 297.788 365.291 297.788H398.602C407.437 297.788 414.598 292.522 414.598 286.026C414.598 279.529 407.437 274.262 398.602 274.262Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 294.406C319.458 294.406 324.09 291 324.09 286.799C324.09 282.598 319.458 279.192 313.746 279.192C308.033 279.192 303.402 282.598 303.402 286.799C303.402 291 308.033 294.406 313.746 294.406Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 303.964H289.702V339.584H449.295V303.964Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 309.882H365.291C356.456 309.882 349.294 315.149 349.294 321.645C349.294 328.142 356.456 333.409 365.291 333.409H398.602C407.437 333.409 414.598 328.142 414.598 321.645C414.598 315.149 407.437 309.882 398.602 309.882Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 330.026C319.458 330.026 324.09 326.62 324.09 322.419C324.09 318.218 319.458 314.812 313.746 314.812C308.033 314.812 303.402 318.218 303.402 322.419C303.402 326.62 308.033 330.026 313.746 330.026Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 339.584H289.702V375.204H449.295V339.584Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 345.502H365.291C356.456 345.502 349.294 350.769 349.294 357.265C349.294 363.762 356.456 369.028 365.291 369.028H398.602C407.437 369.028 414.598 363.762 414.598 357.265C414.598 350.769 407.437 345.502 398.602 345.502Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 365.646C319.458 365.646 324.09 362.24 324.09 358.039C324.09 353.838 319.458 350.432 313.746 350.432C308.033 350.432 303.402 353.838 303.402 358.039C303.402 362.24 308.033 365.646 313.746 365.646Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 375.204H289.702V410.824H449.295V375.204Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 381.122H365.291C356.456 381.122 349.294 386.388 349.294 392.885C349.294 399.382 356.456 404.648 365.291 404.648H398.602C407.437 404.648 414.598 399.382 414.598 392.885C414.598 386.388 407.437 381.122 398.602 381.122Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 401.265C319.458 401.265 324.09 397.86 324.09 393.658C324.09 389.458 319.458 386.052 313.746 386.052C308.033 386.052 303.402 389.458 303.402 393.658C303.402 397.86 308.033 401.265 313.746 401.265Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 410.824H289.702V446.444H449.295V410.824Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 416.742H365.291C356.456 416.742 349.294 422.009 349.294 428.505C349.294 435.002 356.456 440.268 365.291 440.268H398.602C407.437 440.268 414.598 435.002 414.598 428.505C414.598 422.009 407.437 416.742 398.602 416.742Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 436.885C319.458 436.885 324.09 433.479 324.09 429.279C324.09 425.077 319.458 421.672 313.746 421.672C308.033 421.672 303.402 425.077 303.402 429.279C303.402 433.479 308.033 436.885 313.746 436.885Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M268.133 40.22H28.4278C18.1474 40.22 9.81342 46.8874 9.81342 55.112V572.505C9.81342 580.729 18.1474 587.396 28.4278 587.396H268.133C278.413 587.396 286.747 580.729 286.747 572.505V55.112C286.747 46.8874 278.413 40.22 268.133 40.22Z", fill: "#D6DFD9", stroke: "#B6B6B6", "stroke-width": "6.2129" }), (0, K.jsx)("path", { d: "M33.782 57.8231C33.782 49.0011 26.8884 41.8496 18.3846 41.8496C9.88077 41.8496 2.98706 49.0011 2.98706 57.8231V571.34C2.98706 580.162 9.88077 587.314 18.3846 587.314C26.8884 587.314 33.782 580.162 33.782 571.34V57.8231Z", fill: "#C6C9C6" }), (0, K.jsx)("path", { d: "M449.295 446.444H289.702V482.063H449.295V446.444Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 452.362H365.291C356.456 452.362 349.294 457.628 349.294 464.125C349.294 470.622 356.456 475.888 365.291 475.888H398.602C407.437 475.888 414.598 470.622 414.598 464.125C414.598 457.628 407.437 452.362 398.602 452.362Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 472.505C319.458 472.505 324.09 469.1 324.09 464.898C324.09 460.698 319.458 457.292 313.746 457.292C308.033 457.292 303.402 460.698 303.402 464.898C303.402 469.1 308.033 472.505 313.746 472.505Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 482.063H289.702V517.684H449.295V482.063Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 487.982H365.291C356.456 487.982 349.294 493.249 349.294 499.745C349.294 506.242 356.456 511.508 365.291 511.508H398.602C407.437 511.508 414.598 506.242 414.598 499.745C414.598 493.249 407.437 487.982 398.602 487.982Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 508.125C319.458 508.125 324.09 504.719 324.09 500.519C324.09 496.317 319.458 492.912 313.746 492.912C308.033 492.912 303.402 496.317 303.402 500.519C303.402 504.719 308.033 508.125 313.746 508.125Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M147.497 90.5435H283.547", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.189 196.003H282.239", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M147.497 125.013H283.547", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.965 159.907H283.015", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.721 231.323H282.772", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.987 266.431H283.038", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M147.252 302.39H283.303", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.124 337.295H282.175", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.5 373.103H282.551", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M145.748 408.911H281.798", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M145.748 444.418H281.798", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.124 480.226H282.175", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.124 515.733H282.175", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M84.358 80H82.5114L87.8523 65.4545H89.6705L95.0114 80H93.1648L88.8182 67.7557H88.7045L84.358 80ZM85.0398 74.3182H92.483V75.8807H85.0398V74.3182ZM97.0497 80V69.0909H98.669V70.7955H98.8111C99.0384 70.2131 99.4053 69.7609 99.9119 69.4389C100.419 69.1122 101.027 68.9489 101.737 68.9489C102.457 68.9489 103.056 69.1122 103.534 69.4389C104.017 69.7609 104.393 70.2131 104.663 70.7955H104.777C105.056 70.232 105.475 69.7846 106.034 69.4531C106.593 69.117 107.263 68.9489 108.044 68.9489C109.019 68.9489 109.817 69.2543 110.438 69.8651C111.058 70.4711 111.368 71.4157 111.368 72.6989V80H109.692V72.6989C109.692 71.8939 109.472 71.3187 109.031 70.973C108.591 70.6274 108.072 70.4545 107.476 70.4545C106.709 70.4545 106.115 70.6866 105.693 71.1506C105.272 71.6098 105.061 72.1922 105.061 72.8977V80H103.357V72.5284C103.357 71.9081 103.155 71.4086 102.753 71.0298C102.35 70.6463 101.832 70.4545 101.197 70.4545C100.762 70.4545 100.355 70.5705 99.9759 70.8026C99.6018 71.0346 99.2988 71.3565 99.0668 71.7685C98.8395 72.1757 98.7259 72.6468 98.7259 73.1818V80H97.0497ZM114.433 80V69.0909H116.109V80H114.433ZM115.285 67.2727C114.958 67.2727 114.676 67.1615 114.44 66.9389C114.208 66.7164 114.092 66.4489 114.092 66.1364C114.092 65.8239 114.208 65.5563 114.44 65.3338C114.676 65.1113 114.958 65 115.285 65C115.612 65 115.891 65.1113 116.123 65.3338C116.36 65.5563 116.478 65.8239 116.478 66.1364C116.478 66.4489 116.36 66.7164 116.123 66.9389C115.891 67.1615 115.612 67.2727 115.285 67.2727ZM123.923 69.0909V70.5114H118.27V69.0909H123.923ZM119.917 66.4773H121.593V76.875C121.593 77.3485 121.662 77.7036 121.799 77.9403C121.941 78.1723 122.121 78.3286 122.339 78.4091C122.562 78.4848 122.796 78.5227 123.042 78.5227C123.227 78.5227 123.378 78.5133 123.497 78.4943C123.615 78.4706 123.71 78.4517 123.781 78.4375L124.122 79.9432C124.008 79.9858 123.85 80.0284 123.646 80.071C123.442 80.1184 123.184 80.142 122.872 80.142C122.398 80.142 121.934 80.0402 121.48 79.8366C121.03 79.633 120.656 79.3229 120.358 78.9062C120.064 78.4896 119.917 77.964 119.917 77.3295V66.4773ZM131.501 67.017V65.4545H142.41V67.017H137.836V80H136.075V67.017H131.501ZM143.768 80V69.0909H145.388V70.7386H145.501C145.7 70.1989 146.06 69.7609 146.581 69.4247C147.102 69.0885 147.689 68.9205 148.342 68.9205C148.465 68.9205 148.619 68.9228 148.804 68.9276C148.989 68.9323 149.128 68.9394 149.223 68.9489V70.6534C149.166 70.6392 149.036 70.6179 148.832 70.5895C148.634 70.5563 148.423 70.5398 148.2 70.5398C147.67 70.5398 147.196 70.651 146.78 70.8736C146.368 71.0914 146.041 71.3944 145.8 71.7827C145.563 72.1662 145.445 72.6042 145.445 73.0966V80H143.768ZM151.21 80V69.0909H152.886V80H151.21ZM152.062 67.2727C151.735 67.2727 151.454 67.1615 151.217 66.9389C150.985 66.7164 150.869 66.4489 150.869 66.1364C150.869 65.8239 150.985 65.5563 151.217 65.3338C151.454 65.1113 151.735 65 152.062 65C152.389 65 152.668 65.1113 152.9 65.3338C153.137 65.5563 153.255 65.8239 153.255 66.1364C153.255 66.4489 153.137 66.7164 152.9 66.9389C152.668 67.1615 152.389 67.2727 152.062 67.2727ZM164.876 69.0909L160.842 80H159.138L155.104 69.0909H156.922L159.933 77.7841H160.047L163.058 69.0909H164.876ZM171.272 80.2273C170.221 80.2273 169.314 79.9953 168.552 79.5312C167.794 79.0625 167.21 78.4091 166.798 77.571C166.39 76.7282 166.187 75.7481 166.187 74.6307C166.187 73.5133 166.39 72.5284 166.798 71.6761C167.21 70.8191 167.782 70.1515 168.516 69.6733C169.255 69.1903 170.117 68.9489 171.102 68.9489C171.67 68.9489 172.231 69.0436 172.785 69.233C173.339 69.4223 173.843 69.7301 174.298 70.1562C174.752 70.5777 175.114 71.1364 175.384 71.8324C175.654 72.5284 175.789 73.3854 175.789 74.4034V75.1136H167.38V73.6648H174.085C174.085 73.0492 173.961 72.5 173.715 72.017C173.474 71.5341 173.128 71.1529 172.678 70.8736C172.233 70.5942 171.708 70.4545 171.102 70.4545C170.434 70.4545 169.856 70.6203 169.369 70.9517C168.886 71.2784 168.514 71.7045 168.254 72.2301C167.993 72.7557 167.863 73.3191 167.863 73.9205V74.8864C167.863 75.7102 168.005 76.4086 168.289 76.9815C168.578 77.5497 168.978 77.983 169.489 78.2812C170.001 78.5748 170.595 78.7216 171.272 78.7216C171.712 78.7216 172.11 78.66 172.465 78.5369C172.825 78.4091 173.135 78.2197 173.396 77.9688C173.656 77.7131 173.857 77.3958 173.999 77.017L175.619 77.4716C175.448 78.0208 175.162 78.5038 174.759 78.9205C174.357 79.3324 173.86 79.6544 173.268 79.8864C172.676 80.1136 172.011 80.2273 171.272 80.2273ZM182.458 80.2273C181.549 80.2273 180.746 79.9976 180.05 79.5384C179.354 79.0743 178.81 78.4209 178.417 77.5781C178.024 76.7306 177.827 75.7292 177.827 74.5739C177.827 73.428 178.024 72.4337 178.417 71.5909C178.81 70.7481 179.357 70.0971 180.058 69.6378C180.758 69.1785 181.568 68.9489 182.487 68.9489C183.197 68.9489 183.758 69.0672 184.17 69.304C184.586 69.536 184.904 69.8011 185.121 70.0994C185.344 70.393 185.517 70.6345 185.64 70.8239H185.782V65.4545H187.458V80H185.839V78.3239H185.64C185.517 78.5227 185.342 78.7737 185.114 79.0767C184.887 79.375 184.563 79.6425 184.141 79.8793C183.72 80.1113 183.159 80.2273 182.458 80.2273ZM182.685 78.7216C183.358 78.7216 183.926 78.5464 184.39 78.196C184.854 77.8409 185.207 77.3509 185.448 76.7259C185.69 76.0961 185.81 75.3693 185.81 74.5455C185.81 73.7311 185.692 73.0185 185.455 72.4077C185.219 71.7921 184.868 71.3139 184.404 70.973C183.94 70.6274 183.367 70.4545 182.685 70.4545C181.975 70.4545 181.383 70.6368 180.91 71.0014C180.441 71.3613 180.088 71.8513 179.852 72.4716C179.62 73.0871 179.504 73.7784 179.504 74.5455C179.504 75.322 179.622 76.0275 179.859 76.6619C180.1 77.2917 180.455 77.7936 180.924 78.1676C181.397 78.5369 181.985 78.7216 182.685 78.7216ZM190.761 80V69.0909H192.437V80H190.761ZM191.613 67.2727C191.286 67.2727 191.004 67.1615 190.768 66.9389C190.536 66.7164 190.42 66.4489 190.42 66.1364C190.42 65.8239 190.536 65.5563 190.768 65.3338C191.004 65.1113 191.286 65 191.613 65C191.94 65 192.219 65.1113 192.451 65.3338C192.688 65.5563 192.806 65.8239 192.806 66.1364C192.806 66.4489 192.688 66.7164 192.451 66.9389C192.219 67.1615 191.94 67.2727 191.613 67.2727Z", fill: "black" }), (0, K.jsx)("path", { d: "M84.358 97.4545L88.6761 109.699H88.8466L93.1648 97.4545H95.0114L89.6705 112H87.8523L82.5114 97.4545H84.358ZM97.0497 112V101.091H98.7259V112H97.0497ZM97.902 99.2727C97.5753 99.2727 97.2936 99.1615 97.0568 98.9389C96.8248 98.7164 96.7088 98.4489 96.7088 98.1364C96.7088 97.8239 96.8248 97.5563 97.0568 97.3338C97.2936 97.1113 97.5753 97 97.902 97C98.2287 97 98.508 97.1113 98.7401 97.3338C98.9768 97.5563 99.0952 97.8239 99.0952 98.1364C99.0952 98.4489 98.9768 98.7164 98.7401 98.9389C98.508 99.1615 98.2287 99.2727 97.902 99.2727ZM103.358 108.023L103.33 105.949H103.671L108.444 101.091H110.517L105.432 106.233H105.29L103.358 108.023ZM101.796 112V97.4545H103.472V112H101.796ZM108.728 112L104.466 106.602L105.659 105.438L110.858 112H108.728ZM112.675 112V101.091H114.294V102.739H114.408C114.607 102.199 114.966 101.761 115.487 101.425C116.008 101.089 116.595 100.92 117.249 100.92C117.372 100.92 117.526 100.923 117.71 100.928C117.895 100.932 118.035 100.939 118.129 100.949V102.653C118.072 102.639 117.942 102.618 117.739 102.589C117.54 102.556 117.329 102.54 117.107 102.54C116.576 102.54 116.103 102.651 115.686 102.874C115.274 103.091 114.947 103.394 114.706 103.783C114.469 104.166 114.351 104.604 114.351 105.097V112H112.675ZM123.326 112.256C122.635 112.256 122.008 112.125 121.444 111.865C120.881 111.6 120.433 111.219 120.102 110.722C119.77 110.22 119.605 109.614 119.605 108.903C119.605 108.278 119.728 107.772 119.974 107.384C120.22 106.991 120.549 106.683 120.961 106.46C121.373 106.238 121.828 106.072 122.325 105.963C122.827 105.849 123.331 105.759 123.838 105.693C124.501 105.608 125.038 105.544 125.45 105.501C125.867 105.454 126.17 105.376 126.359 105.267C126.553 105.158 126.65 104.969 126.65 104.699V104.642C126.65 103.941 126.458 103.397 126.075 103.009C125.696 102.62 125.121 102.426 124.349 102.426C123.549 102.426 122.922 102.601 122.467 102.952C122.012 103.302 121.693 103.676 121.508 104.074L119.917 103.506C120.201 102.843 120.58 102.327 121.054 101.957C121.532 101.583 122.053 101.323 122.616 101.176C123.184 101.025 123.743 100.949 124.292 100.949C124.643 100.949 125.045 100.991 125.5 101.077C125.959 101.157 126.402 101.325 126.828 101.581C127.259 101.837 127.616 102.223 127.9 102.739C128.184 103.255 128.326 103.946 128.326 104.812V112H126.65V110.523H126.565C126.451 110.759 126.262 111.013 125.997 111.283C125.732 111.553 125.379 111.782 124.939 111.972C124.498 112.161 123.961 112.256 123.326 112.256ZM123.582 110.75C124.245 110.75 124.804 110.62 125.258 110.359C125.717 110.099 126.063 109.763 126.295 109.351C126.532 108.939 126.65 108.506 126.65 108.051V106.517C126.579 106.602 126.423 106.68 126.181 106.751C125.945 106.818 125.67 106.877 125.358 106.929C125.05 106.976 124.749 107.019 124.456 107.057C124.167 107.09 123.932 107.118 123.752 107.142C123.317 107.199 122.91 107.291 122.531 107.419C122.157 107.542 121.854 107.729 121.622 107.98C121.395 108.226 121.281 108.562 121.281 108.989C121.281 109.571 121.496 110.011 121.927 110.31C122.363 110.603 122.914 110.75 123.582 110.75ZM131.386 112V101.091H133.005V102.795H133.147C133.374 102.213 133.741 101.761 134.248 101.439C134.754 101.112 135.363 100.949 136.073 100.949C136.793 100.949 137.392 101.112 137.87 101.439C138.353 101.761 138.729 102.213 138.999 102.795H139.113C139.392 102.232 139.811 101.785 140.37 101.453C140.929 101.117 141.599 100.949 142.38 100.949C143.355 100.949 144.153 101.254 144.773 101.865C145.394 102.471 145.704 103.416 145.704 104.699V112H144.028V104.699C144.028 103.894 143.808 103.319 143.367 102.973C142.927 102.627 142.408 102.455 141.812 102.455C141.045 102.455 140.451 102.687 140.029 103.151C139.608 103.61 139.397 104.192 139.397 104.898V112H137.692V104.528C137.692 103.908 137.491 103.409 137.089 103.03C136.686 102.646 136.168 102.455 135.533 102.455C135.098 102.455 134.691 102.571 134.312 102.803C133.938 103.035 133.635 103.357 133.403 103.768C133.175 104.176 133.062 104.647 133.062 105.182V112H131.386ZM154.621 112V97.4545H159.536C160.677 97.4545 161.609 97.6605 162.334 98.0724C163.063 98.4796 163.603 99.0312 163.953 99.7273C164.304 100.423 164.479 101.2 164.479 102.057C164.479 102.914 164.304 103.693 163.953 104.393C163.607 105.094 163.072 105.653 162.348 106.07C161.624 106.482 160.696 106.688 159.564 106.688H156.041V105.125H159.507C160.288 105.125 160.916 104.99 161.389 104.72C161.863 104.45 162.206 104.086 162.419 103.626C162.637 103.162 162.746 102.639 162.746 102.057C162.746 101.474 162.637 100.954 162.419 100.494C162.206 100.035 161.86 99.6752 161.382 99.4148C160.904 99.1496 160.269 99.017 159.479 99.017H156.382V112H154.621ZM170.299 112.256C169.608 112.256 168.98 112.125 168.417 111.865C167.853 111.6 167.406 111.219 167.075 110.722C166.743 110.22 166.577 109.614 166.577 108.903C166.577 108.278 166.701 107.772 166.947 107.384C167.193 106.991 167.522 106.683 167.934 106.46C168.346 106.238 168.8 106.072 169.298 105.963C169.799 105.849 170.304 105.759 170.81 105.693C171.473 105.608 172.011 105.544 172.423 105.501C172.839 105.454 173.142 105.376 173.332 105.267C173.526 105.158 173.623 104.969 173.623 104.699V104.642C173.623 103.941 173.431 103.397 173.048 103.009C172.669 102.62 172.094 102.426 171.322 102.426C170.522 102.426 169.894 102.601 169.44 102.952C168.985 103.302 168.665 103.676 168.481 104.074L166.89 103.506C167.174 102.843 167.553 102.327 168.026 101.957C168.504 101.583 169.025 101.323 169.589 101.176C170.157 101.025 170.716 100.949 171.265 100.949C171.615 100.949 172.018 100.991 172.472 101.077C172.932 101.157 173.374 101.325 173.8 101.581C174.231 101.837 174.589 102.223 174.873 102.739C175.157 103.255 175.299 103.946 175.299 104.812V112H173.623V110.523H173.538C173.424 110.759 173.235 111.013 172.969 111.283C172.704 111.553 172.352 111.782 171.911 111.972C171.471 112.161 170.933 112.256 170.299 112.256ZM170.555 110.75C171.218 110.75 171.776 110.62 172.231 110.359C172.69 110.099 173.036 109.763 173.268 109.351C173.504 108.939 173.623 108.506 173.623 108.051V106.517C173.552 106.602 173.396 106.68 173.154 106.751C172.917 106.818 172.643 106.877 172.33 106.929C172.022 106.976 171.722 107.019 171.428 107.057C171.139 107.09 170.905 107.118 170.725 107.142C170.29 107.199 169.882 107.291 169.504 107.419C169.129 107.542 168.826 107.729 168.594 107.98C168.367 108.226 168.254 108.562 168.254 108.989C168.254 109.571 168.469 110.011 168.9 110.31C169.335 110.603 169.887 110.75 170.555 110.75ZM183.103 101.091V102.511H177.449V101.091H183.103ZM179.097 98.4773H180.773V108.875C180.773 109.348 180.842 109.704 180.979 109.94C181.121 110.172 181.301 110.329 181.519 110.409C181.741 110.485 181.976 110.523 182.222 110.523C182.407 110.523 182.558 110.513 182.676 110.494C182.795 110.471 182.89 110.452 182.961 110.438L183.301 111.943C183.188 111.986 183.029 112.028 182.826 112.071C182.622 112.118 182.364 112.142 182.051 112.142C181.578 112.142 181.114 112.04 180.659 111.837C180.21 111.633 179.836 111.323 179.537 110.906C179.244 110.49 179.097 109.964 179.097 109.33V98.4773ZM190.081 112.227C189.029 112.227 188.123 111.995 187.36 111.531C186.603 111.062 186.018 110.409 185.606 109.571C185.199 108.728 184.995 107.748 184.995 106.631C184.995 105.513 185.199 104.528 185.606 103.676C186.018 102.819 186.591 102.152 187.325 101.673C188.064 101.19 188.925 100.949 189.91 100.949C190.478 100.949 191.039 101.044 191.593 101.233C192.147 101.422 192.652 101.73 193.106 102.156C193.561 102.578 193.923 103.136 194.193 103.832C194.463 104.528 194.598 105.385 194.598 106.403V107.114H186.189V105.665H192.893C192.893 105.049 192.77 104.5 192.524 104.017C192.282 103.534 191.937 103.153 191.487 102.874C191.042 102.594 190.516 102.455 189.91 102.455C189.243 102.455 188.665 102.62 188.177 102.952C187.694 103.278 187.323 103.705 187.062 104.23C186.802 104.756 186.672 105.319 186.672 105.92V106.886C186.672 107.71 186.814 108.409 187.098 108.982C187.386 109.55 187.787 109.983 188.298 110.281C188.809 110.575 189.404 110.722 190.081 110.722C190.521 110.722 190.919 110.66 191.274 110.537C191.634 110.409 191.944 110.22 192.204 109.969C192.465 109.713 192.666 109.396 192.808 109.017L194.427 109.472C194.257 110.021 193.97 110.504 193.568 110.92C193.165 111.332 192.668 111.654 192.076 111.886C191.484 112.114 190.819 112.227 190.081 112.227ZM198.824 97.4545V112H197.147V97.4545H198.824Z", fill: "black" }), (0, K.jsx)("path", { d: "M46.3991 111V109.409L51.321 104.31C51.8466 103.756 52.2798 103.27 52.6207 102.854C52.9664 102.432 53.2244 102.032 53.3949 101.653C53.5653 101.275 53.6506 100.872 53.6506 100.446C53.6506 99.9631 53.5369 99.5464 53.3097 99.196C53.0824 98.8409 52.7723 98.5687 52.3793 98.3793C51.9863 98.1851 51.5436 98.0881 51.0511 98.0881C50.5303 98.0881 50.0758 98.1946 49.6875 98.4077C49.2992 98.6207 49.0009 98.9214 48.7926 99.3097C48.5843 99.6979 48.4801 100.152 48.4801 100.673H46.3849C46.3849 99.7879 46.5885 99.0137 46.9957 98.3509C47.4029 97.688 47.9616 97.1742 48.6719 96.8097C49.3821 96.4403 50.1894 96.2557 51.0938 96.2557C52.0076 96.2557 52.8125 96.438 53.5085 96.8026C54.2093 97.1624 54.7562 97.6548 55.1491 98.2798C55.5421 98.9001 55.7386 99.6009 55.7386 100.382C55.7386 100.922 55.6368 101.45 55.4332 101.966C55.2344 102.482 54.8864 103.057 54.3892 103.692C53.892 104.321 53.2008 105.086 52.3153 105.986L49.4247 109.011V109.118H55.973V111H46.3991ZM60.0923 111.135C59.7041 111.135 59.3703 110.998 59.0909 110.723C58.8116 110.444 58.6719 110.107 58.6719 109.714C58.6719 109.326 58.8116 108.995 59.0909 108.72C59.3703 108.441 59.7041 108.301 60.0923 108.301C60.4806 108.301 60.8144 108.441 61.0938 108.72C61.3731 108.995 61.5128 109.326 61.5128 109.714C61.5128 109.975 61.4465 110.214 61.3139 110.432C61.1861 110.645 61.0156 110.815 60.8026 110.943C60.5895 111.071 60.3527 111.135 60.0923 111.135Z", fill: "black" }), (0, K.jsx)("path", { d: "M255.053 95.9185C256.021 95.9185 256.803 96.5674 256.803 97.3706V100.275H263.366C265.542 100.275 267.303 101.736 267.303 103.542V115.886C267.303 117.692 265.542 119.153 263.366 119.153H246.741C244.564 119.153 242.803 117.692 242.803 115.886V103.542C242.803 101.736 244.564 100.275 246.741 100.275H253.303V97.3706C253.303 96.5674 254.085 95.9185 255.053 95.9185ZM248.928 113.345C248.447 113.345 248.053 113.671 248.053 114.071C248.053 114.47 248.447 114.797 248.928 114.797H250.678C251.159 114.797 251.553 114.47 251.553 114.071C251.553 113.671 251.159 113.345 250.678 113.345H248.928ZM254.178 113.345C253.697 113.345 253.303 113.671 253.303 114.071C253.303 114.47 253.697 114.797 254.178 114.797H255.928C256.409 114.797 256.803 114.47 256.803 114.071C256.803 113.671 256.409 113.345 255.928 113.345H254.178ZM259.428 113.345C258.947 113.345 258.553 113.671 258.553 114.071C258.553 114.47 258.947 114.797 259.428 114.797H261.178C261.659 114.797 262.053 114.47 262.053 114.071C262.053 113.671 261.659 113.345 261.178 113.345H259.428ZM251.991 107.536C251.991 107.054 251.76 106.593 251.35 106.252C250.94 105.912 250.383 105.721 249.803 105.721C249.223 105.721 248.667 105.912 248.256 106.252C247.846 106.593 247.616 107.054 247.616 107.536C247.616 108.017 247.846 108.479 248.256 108.819C248.667 109.16 249.223 109.351 249.803 109.351C250.383 109.351 250.94 109.16 251.35 108.819C251.76 108.479 251.991 108.017 251.991 107.536ZM260.303 109.351C260.883 109.351 261.44 109.16 261.85 108.819C262.26 108.479 262.491 108.017 262.491 107.536C262.491 107.054 262.26 106.593 261.85 106.252C261.44 105.912 260.883 105.721 260.303 105.721C259.723 105.721 259.167 105.912 258.756 106.252C258.346 106.593 258.116 107.054 258.116 107.536C258.116 108.017 258.346 108.479 258.756 108.819C259.167 109.16 259.723 109.351 260.303 109.351ZM240.178 106.084H241.053V114.797H240.178C238.729 114.797 237.553 113.821 237.553 112.619V108.262C237.553 107.059 238.729 106.084 240.178 106.084ZM269.928 106.084C271.377 106.084 272.553 107.059 272.553 108.262V112.619C272.553 113.821 271.377 114.797 269.928 114.797H269.053V106.084H269.928Z", fill: "#B53333" }), (0, K.jsx)("path", { d: "M258.241 63.8351C253.554 63.8351 249.589 66.3002 248.241 69.6987C250.245 68.885 252.505 68.4302 254.902 68.4302H260.15C260.674 68.4302 261.104 68.7749 261.104 69.1961C261.104 69.6173 260.674 69.9619 260.15 69.9619H259.195H254.902C253.912 69.9619 252.952 70.0529 252.028 70.2204C250.483 70.5028 249.046 71.0054 247.77 71.6899C244.305 73.5423 242.021 76.7063 242.021 80.301V81.0669C242.021 81.7035 242.659 82.2156 243.452 82.2156C244.246 82.2156 244.884 81.7035 244.884 81.0669V80.301C244.884 77.9699 246.118 75.8734 248.092 74.4039C249.273 78.0178 253.369 80.6839 258.241 80.6839H258.301C266.178 80.6504 272.553 74.4183 272.553 66.7358C272.553 64.6967 272.106 62.7581 271.295 61.011C271.14 60.6807 270.538 60.6951 270.329 61.0062C269.208 62.6911 266.989 63.8351 264.443 63.8351H258.241Z", fill: "#49923D" }), (0, K.jsx)("path", { d: "M351.009 3.81818L353.842 12.1108H353.957L356.79 3.81818H358.451L354.787 14H353.012L349.348 3.81818H351.009ZM359.921 3.81818H361.786L365.027 11.733H365.146L368.388 3.81818H370.252V14H368.791V6.6321H368.696L365.693 13.9851H364.48L361.477 6.62713H361.383V14H359.921V3.81818ZM378.039 6.4929C377.986 6.02225 377.767 5.65767 377.383 5.39915C376.998 5.13731 376.514 5.00639 375.931 5.00639C375.513 5.00639 375.152 5.07268 374.847 5.20526C374.542 5.33452 374.305 5.51349 374.136 5.74219C373.971 5.96757 373.888 6.22443 373.888 6.51278C373.888 6.75473 373.944 6.96354 374.057 7.1392C374.173 7.31487 374.324 7.46236 374.509 7.58168C374.698 7.69768 374.9 7.79545 375.116 7.875C375.331 7.95123 375.538 8.0142 375.737 8.06392L376.732 8.32244C377.056 8.40199 377.389 8.50971 377.731 8.6456C378.072 8.78149 378.389 8.96046 378.68 9.18253C378.972 9.40459 379.207 9.67969 379.386 10.0078C379.569 10.3359 379.66 10.7287 379.66 11.1861C379.66 11.7628 379.511 12.2749 379.212 12.7223C378.917 13.1697 378.488 13.5227 377.925 13.7812C377.365 14.0398 376.687 14.169 375.891 14.169C375.129 14.169 374.469 14.0481 373.913 13.8061C373.356 13.5642 372.92 13.2211 372.605 12.777C372.29 12.3295 372.116 11.7992 372.083 11.1861H373.624C373.654 11.554 373.773 11.8606 373.982 12.1058C374.194 12.3478 374.464 12.5284 374.793 12.6477C375.124 12.7637 375.487 12.8217 375.881 12.8217C376.316 12.8217 376.702 12.7538 377.04 12.6179C377.381 12.4787 377.65 12.2865 377.845 12.0412C378.041 11.7926 378.138 11.5026 378.138 11.1712C378.138 10.8696 378.052 10.6226 377.88 10.4304C377.711 10.2382 377.481 10.0791 377.189 9.95312C376.901 9.82718 376.574 9.71615 376.21 9.62003L375.006 9.2919C374.191 9.06984 373.545 8.74337 373.067 8.3125C372.594 7.88163 372.357 7.31155 372.357 6.60227C372.357 6.01562 372.516 5.50355 372.834 5.06605C373.152 4.62855 373.583 4.28883 374.126 4.04688C374.67 3.80161 375.283 3.67898 375.966 3.67898C376.655 3.67898 377.263 3.79995 377.79 4.0419C378.321 4.28385 378.738 4.61695 379.043 5.04119C379.348 5.46212 379.507 5.94602 379.521 6.4929H378.039ZM389.714 3.81818V14H388.302L383.126 6.53267H383.032V14H381.496V3.81818H382.917L388.098 11.2955H388.192V3.81818H389.714ZM391.602 12.0114V10.7685L396.001 3.81818H396.981V5.64773H396.359L393.212 10.6293V10.7088H399.243V12.0114H391.602ZM396.429 14V11.6335L396.439 11.0668V3.81818H397.896V14H396.429ZM404.52 14.1392C403.837 14.1392 403.228 14.0215 402.691 13.7862C402.157 13.5509 401.734 13.2244 401.423 12.8068C401.115 12.3859 400.949 11.8987 400.926 11.3452H402.487C402.507 11.6468 402.608 11.9086 402.79 12.1307C402.976 12.3494 403.218 12.5185 403.516 12.6378C403.814 12.7571 404.146 12.8168 404.51 12.8168C404.911 12.8168 405.266 12.7472 405.574 12.608C405.886 12.4687 406.129 12.2749 406.305 12.0263C406.481 11.7744 406.569 11.4844 406.569 11.1562C406.569 10.8149 406.481 10.5149 406.305 10.2564C406.133 9.99455 405.879 9.78906 405.544 9.63991C405.213 9.49077 404.812 9.41619 404.341 9.41619H403.481V8.16335H404.341C404.719 8.16335 405.051 8.09541 405.336 7.95952C405.624 7.82363 405.849 7.63471 406.012 7.39276C406.174 7.14749 406.255 6.8608 406.255 6.53267C406.255 6.2178 406.184 5.94437 406.042 5.71236C405.902 5.47704 405.703 5.29309 405.445 5.16051C405.19 5.02794 404.888 4.96165 404.54 4.96165C404.209 4.96165 403.899 5.02296 403.61 5.1456C403.325 5.26491 403.093 5.43726 402.914 5.66264C402.735 5.88471 402.639 6.15151 402.626 6.46307H401.14C401.156 5.91288 401.319 5.42898 401.627 5.01136C401.938 4.59375 402.349 4.26728 402.86 4.03196C403.37 3.79664 403.937 3.67898 404.56 3.67898C405.213 3.67898 405.776 3.80658 406.25 4.06179C406.728 4.31368 407.096 4.65009 407.354 5.07102C407.616 5.49195 407.745 5.95265 407.742 6.45312C407.745 7.0232 407.586 7.5071 407.265 7.90483C406.946 8.30256 406.522 8.56937 405.992 8.70526V8.7848C406.668 8.88755 407.192 9.15601 407.563 9.5902C407.937 10.0244 408.123 10.563 408.12 11.206C408.123 11.7661 407.967 12.2682 407.652 12.7124C407.341 13.1565 406.915 13.5062 406.375 13.7614C405.834 14.0133 405.216 14.1392 404.52 14.1392ZM409.999 14V12.8864L413.444 9.31676C413.812 8.92898 414.115 8.58925 414.354 8.29759C414.596 8.0026 414.777 7.72254 414.896 7.45739C415.015 7.19223 415.075 6.91051 415.075 6.61222C415.075 6.27415 414.995 5.98248 414.836 5.73722C414.677 5.48864 414.46 5.29806 414.185 5.16548C413.91 5.02959 413.6 4.96165 413.255 4.96165C412.891 4.96165 412.573 5.03622 412.301 5.18537C412.029 5.33452 411.82 5.54498 411.674 5.81676C411.529 6.08854 411.456 6.40672 411.456 6.77131H409.989C409.989 6.15151 410.132 5.60961 410.417 5.1456C410.702 4.68158 411.093 4.32197 411.59 4.06676C412.087 3.80824 412.652 3.67898 413.285 3.67898C413.925 3.67898 414.488 3.80658 414.975 4.06179C415.466 4.31368 415.849 4.65838 416.124 5.09588C416.399 5.53007 416.537 6.0206 416.537 6.56747C416.537 6.94531 416.465 7.31487 416.323 7.67614C416.184 8.0374 415.94 8.4401 415.592 8.88423C415.244 9.32505 414.76 9.86032 414.14 10.4901L412.117 12.608V12.6825H416.701V14H409.999ZM422.448 3.81818V14H420.907V5.35938H420.847L418.411 6.95028V5.47869L420.951 3.81818H422.448Z", fill: "white" }), (0, K.jsx)("path", { d: "M50.9176 64.4545V79H48.7159V66.6562H48.6307L45.1506 68.929V66.8267L48.7798 64.4545H50.9176ZM55.44 79.1349C55.0517 79.1349 54.7179 78.9976 54.4386 78.723C54.1592 78.4437 54.0195 78.1075 54.0195 77.7145C54.0195 77.3262 54.1592 76.9948 54.4386 76.7202C54.7179 76.4408 55.0517 76.3011 55.44 76.3011C55.8282 76.3011 56.1621 76.4408 56.4414 76.7202C56.7208 76.9948 56.8604 77.3262 56.8604 77.7145C56.8604 77.9749 56.7942 78.214 56.6616 78.4318C56.5337 78.6449 56.3633 78.8153 56.1502 78.9432C55.9371 79.071 55.7004 79.1349 55.44 79.1349Z", fill: "black" })] }), (0, K.jsxs)("defs", { children: [(0, K.jsxs)("filter", { id: "filter0_d_40_7", x: "-4.11267", y: "-0.708252", width: "463.324", height: "600.59", filterUnits: "userSpaceOnUse", "color-interpolation-filters": "sRGB", children: [(0, K.jsx)("feFlood", { "flood-opacity": "0", result: "BackgroundImageFix" }), (0, K.jsx)("feColorMatrix", { in: "SourceAlpha", type: "matrix", values: "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0", result: "hardAlpha" }), (0, K.jsx)("feOffset", { dy: "4" }), (0, K.jsx)("feGaussianBlur", { stdDeviation: "2" }), (0, K.jsx)("feComposite", { in2: "hardAlpha", operator: "out" }), (0, K.jsx)("feColorMatrix", { type: "matrix", values: "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" }), (0, K.jsx)("feBlend", { mode: "normal", in2: "BackgroundImageFix", result: "effect1_dropShadow_40_7" }), (0, K.jsx)("feBlend", { mode: "normal", in: "SourceGraphic", in2: "effect1_dropShadow_40_7", result: "shape" })] }), (0, K.jsx)("clipPath", { id: "clip0_40_7", children: (0, K.jsx)("rect", { width: "455", height: "591", fill: "white" }) })] })] }) }) }, OS = function () { var e = (0, t.useState)(null), n = (0, r.Z)(e, 2), i = n[0], a = n[1]; return (0, K.jsx)("div", { children: (0, K.jsxs)("svg", { width: "300", height: "500", viewBox: "0 0 455 591", fill: "none", xmlns: "http://www.w3.org/2000/svg", children: [(0, K.jsxs)("g", { "clip-path": "url(#clip0_40_7)", children: [(0, K.jsxs)("g", { filter: "url(#filter0_d_40_7)", children: [(0, K.jsx)("path", { d: "M435.517 2.38306H19.582C10.4123 2.38306 2.9787 8.33011 2.9787 15.6661V575.507C2.9787 582.843 10.4123 588.79 19.582 588.79H435.517C444.687 588.79 452.12 582.843 452.12 575.507V15.6661C452.12 8.33011 444.687 2.38306 435.517 2.38306Z", fill: "#E8EDE9" }), (0, K.jsx)("path", { d: "M435.517 2.38306H19.582C10.4123 2.38306 2.9787 8.33011 2.9787 15.6661V575.507C2.9787 582.843 10.4123 588.79 19.582 588.79H435.517C444.687 588.79 452.12 582.843 452.12 575.507V15.6661C452.12 8.33011 444.687 2.38306 435.517 2.38306Z", stroke: "#B6B6B6", "stroke-width": "6.18278" })] }), (0, K.jsx)("path", { d: "M268.026 40.3025H21.5959C11.3185 40.3025 2.98706 46.9679 2.98706 55.19V572.426C2.98706 580.649 11.3185 587.314 21.5959 587.314H268.026C278.304 587.314 286.635 580.649 286.635 572.426V55.19C286.635 46.9679 278.304 40.3025 268.026 40.3025Z", stroke: "#B6B6B6", "stroke-width": "6.28681" }), (0, K.jsx)("path", { d: "M157.358 31.8231C162.296 31.8231 166.299 28.8793 166.299 25.2479C166.299 21.6165 162.296 18.6726 157.358 18.6726C152.42 18.6726 148.416 21.6165 148.416 25.2479C148.416 28.8793 152.42 31.8231 157.358 31.8231Z", fill: "green" }), (0, K.jsx)("path", { d: "M104.625 27.4603V20.2451H107.673C108.378 20.2451 108.956 20.3415 109.408 20.534C109.86 20.7242 110.195 20.9861 110.412 21.3196C110.629 21.6531 110.738 22.0325 110.738 22.4576C110.738 22.8827 110.629 23.2597 110.412 23.5885C110.195 23.9173 109.861 24.1757 109.412 24.3636C108.963 24.5491 108.389 24.6419 107.691 24.6419H105.225V23.8527H107.656C108.137 23.8527 108.525 23.7964 108.818 23.6836C109.114 23.5709 109.329 23.4112 109.461 23.2045C109.596 22.9955 109.663 22.7465 109.663 22.4576C109.663 22.1687 109.596 21.9162 109.461 21.7002C109.326 21.4841 109.11 21.3173 108.814 21.1999C108.517 21.0801 108.125 21.0202 107.638 21.0202H105.718V27.4603H104.625ZM108.871 24.2191L111.09 27.4603H109.822L107.638 24.2191H108.871ZM115.18 27.573C114.528 27.573 113.966 27.458 113.494 27.2278C113.024 26.9953 112.661 26.6712 112.406 26.2554C112.153 25.8374 112.027 25.3512 112.027 24.7969C112.027 24.2426 112.153 23.7541 112.406 23.3313C112.661 22.9062 113.017 22.575 113.472 22.3378C113.929 22.0982 114.463 21.9784 115.074 21.9784C115.427 21.9784 115.775 22.0254 116.118 22.1194C116.461 22.2133 116.774 22.366 117.056 22.5774C117.338 22.7864 117.563 23.0636 117.73 23.4088C117.897 23.7541 117.981 24.1792 117.981 24.6842V25.0364H112.767V24.3178H116.924C116.924 24.0124 116.848 23.74 116.695 23.5004C116.546 23.2608 116.331 23.0718 116.052 22.9332C115.776 22.7946 115.45 22.7253 115.074 22.7253C114.661 22.7253 114.303 22.8076 114 22.9719C113.7 23.134 113.47 23.3454 113.308 23.6061C113.147 23.8668 113.066 24.1463 113.066 24.4446V24.9237C113.066 25.3324 113.154 25.6789 113.331 25.963C113.509 26.2449 113.757 26.4598 114.075 26.6077C114.392 26.7534 114.761 26.8262 115.18 26.8262C115.453 26.8262 115.7 26.7956 115.92 26.7346C116.143 26.6712 116.336 26.5772 116.497 26.4528C116.658 26.3259 116.783 26.1685 116.871 25.9806L117.875 26.2061C117.77 26.4786 117.592 26.7181 117.342 26.9248C117.093 27.1291 116.785 27.2889 116.417 27.404C116.05 27.5167 115.638 27.573 115.18 27.573ZM121.552 27.5872C121.124 27.5872 120.734 27.5226 120.385 27.3934C120.036 27.2619 119.758 27.0728 119.553 26.8262C119.348 26.5772 119.245 26.2766 119.245 25.9243C119.245 25.6142 119.321 25.3629 119.474 25.1704C119.626 24.9754 119.83 24.8227 120.086 24.7123C120.341 24.602 120.623 24.5197 120.931 24.4658C121.242 24.4093 121.555 24.3647 121.869 24.3318C122.28 24.2896 122.613 24.2579 122.869 24.2367C123.127 24.2133 123.315 24.1745 123.432 24.1205C123.553 24.0665 123.613 23.9725 123.613 23.8387V23.8105C123.613 23.4628 123.494 23.1927 123.257 23.0002C123.021 22.8076 122.665 22.7112 122.186 22.7112C121.69 22.7112 121.301 22.7982 121.02 22.9719C120.737 23.1458 120.539 23.3313 120.425 23.5286L119.439 23.2468C119.614 22.918 119.85 22.662 120.143 22.4788C120.439 22.2932 120.763 22.164 121.112 22.0912C121.464 22.016 121.81 21.9784 122.151 21.9784C122.368 21.9784 122.618 21.9996 122.9 22.0419C123.184 22.0818 123.459 22.1652 123.724 22.292C123.99 22.4188 124.212 22.6102 124.388 22.8662C124.564 23.1223 124.652 23.4652 124.652 23.895V27.4603H123.613V26.7275H123.56C123.49 26.845 123.372 26.9706 123.208 27.1045C123.044 27.2384 122.825 27.3523 122.552 27.4463C122.279 27.5402 121.945 27.5872 121.552 27.5872ZM121.711 26.8402C122.122 26.8402 122.468 26.7757 122.75 26.6465C123.035 26.5173 123.249 26.3506 123.393 26.1462C123.54 25.9419 123.613 25.727 123.613 25.5015V24.7405C123.569 24.7828 123.472 24.8216 123.322 24.8568C123.175 24.8896 123.006 24.919 122.811 24.9449C122.621 24.9684 122.434 24.9895 122.252 25.0083C122.073 25.0247 121.928 25.0388 121.816 25.0506C121.546 25.0787 121.294 25.1246 121.059 25.1879C120.827 25.249 120.639 25.3418 120.495 25.4663C120.355 25.5884 120.284 25.7552 120.284 25.9666C120.284 26.2554 120.418 26.4739 120.684 26.6218C120.955 26.7674 121.297 26.8402 121.711 26.8402ZM129.103 27.573C128.539 27.573 128.042 27.4591 127.611 27.2313C127.179 27.0012 126.842 26.677 126.598 26.259C126.354 25.8385 126.232 25.3418 126.232 24.7687C126.232 24.2003 126.354 23.7071 126.598 23.2891C126.842 22.871 127.18 22.548 127.615 22.3202C128.049 22.0923 128.551 21.9784 129.121 21.9784C129.561 21.9784 129.909 22.0372 130.164 22.1546C130.423 22.2697 130.62 22.4013 130.755 22.5492C130.893 22.6948 131 22.8146 131.076 22.9085H131.164V20.2451H132.203V27.4603H131.199V26.6289H131.076C131 26.7275 130.891 26.852 130.75 27.0024C130.61 27.1503 130.409 27.283 130.147 27.4004C129.886 27.5155 129.538 27.573 129.103 27.573ZM129.245 26.8262C129.661 26.8262 130.013 26.7393 130.301 26.5655C130.589 26.3893 130.808 26.1462 130.957 25.8362C131.107 25.5238 131.181 25.1633 131.181 24.7546C131.181 24.3507 131.109 23.9972 130.962 23.6942C130.815 23.3889 130.598 23.1516 130.31 22.9825C130.022 22.8111 129.667 22.7253 129.245 22.7253C128.804 22.7253 128.437 22.8158 128.143 22.9966C127.853 23.1752 127.634 23.4182 127.487 23.7259C127.343 24.0312 127.271 24.3741 127.271 24.7546C127.271 25.1398 127.345 25.4898 127.492 25.8045C127.641 26.1169 127.862 26.3658 128.152 26.5514C128.446 26.7346 128.81 26.8262 129.245 26.8262ZM134.921 29.4896C134.744 29.4896 134.588 29.4779 134.449 29.4543C134.311 29.4333 134.216 29.4121 134.163 29.391L134.428 28.6582C134.68 28.7098 134.903 28.7286 135.097 28.7145C135.291 28.7004 135.462 28.6312 135.612 28.5067C135.764 28.3845 135.904 28.1861 136.03 27.9113L136.224 27.4885L133.723 22.0489H134.85L136.717 26.3611H136.787L138.655 22.0489H139.783L136.911 28.2495C136.782 28.529 136.622 28.7603 136.431 28.9435C136.24 29.1291 136.018 29.2664 135.766 29.3558C135.516 29.445 135.235 29.4896 134.921 29.4896Z", fill: "black" }), (0, K.jsx)("path", { d: "M298.013 42.6178V34.2001H301.692C302.425 34.2001 303.029 34.3014 303.506 34.5042C303.982 34.7043 304.336 34.9742 304.569 35.3139C304.802 35.651 304.918 36.025 304.918 36.4361C304.918 36.7978 304.838 37.0964 304.677 37.332C304.519 37.5677 304.31 37.754 304.05 37.8911C303.793 38.0281 303.514 38.1295 303.212 38.1952V38.2774C303.535 38.2938 303.858 38.3843 304.183 38.5487C304.509 38.7131 304.781 38.9488 305 39.2557C305.22 39.5625 305.33 39.9379 305.33 40.3818C305.33 40.8038 305.21 41.1834 304.97 41.5204C304.73 41.8574 304.352 42.1246 303.834 42.3219C303.317 42.5191 302.644 42.6178 301.815 42.6178H298.013ZM299.287 41.7135H301.815C302.647 41.7135 303.238 41.5848 303.588 41.3272C303.941 41.0669 304.117 40.7518 304.117 40.3818C304.117 40.0969 304.026 39.8338 303.845 39.5927C303.663 39.3488 303.405 39.1543 303.069 39.0091C302.733 38.8611 302.336 38.7871 301.877 38.7871H299.287V41.7135ZM299.287 37.8993H301.651C302.034 37.8993 302.381 37.839 302.689 37.7185C303 37.5979 303.247 37.428 303.428 37.2088C303.613 36.9895 303.706 36.732 303.706 36.4361C303.706 36.0661 303.545 35.7524 303.223 35.4948C302.901 35.2345 302.39 35.1044 301.692 35.1044H299.287V37.8993ZM309.581 42.7658C309.081 42.7658 308.627 42.6904 308.219 42.5397C307.812 42.3863 307.488 42.1657 307.249 41.878C307.009 41.5875 306.889 41.2368 306.889 40.8257C306.889 40.464 306.978 40.1709 307.156 39.9461C307.334 39.7187 307.572 39.5406 307.87 39.4119C308.168 39.2831 308.497 39.1871 308.856 39.1241C309.219 39.0583 309.584 39.0063 309.95 38.968C310.43 38.9186 310.819 38.8816 311.117 38.857C311.418 38.8296 311.638 38.7843 311.775 38.7213C311.915 38.6583 311.985 38.5487 311.985 38.3925V38.3596C311.985 37.9541 311.846 37.639 311.569 37.4143C311.295 37.1896 310.879 37.0772 310.32 37.0772C309.742 37.0772 309.288 37.1786 308.959 37.3814C308.63 37.5842 308.399 37.8006 308.266 38.0308L307.115 37.702C307.32 37.3183 307.594 37.0197 307.937 36.806C308.283 36.5895 308.659 36.4388 309.067 36.3539C309.478 36.2662 309.882 36.2223 310.279 36.2223C310.533 36.2223 310.824 36.247 311.153 36.2963C311.485 36.3429 311.805 36.4402 312.114 36.5881C312.425 36.7361 312.684 36.9594 312.89 37.2581C313.095 37.5568 313.198 37.9568 313.198 38.4583V42.6178H311.985V41.7629H311.924C311.841 41.8999 311.704 42.0465 311.513 42.2027C311.321 42.3589 311.066 42.4918 310.747 42.6014C310.428 42.711 310.04 42.7658 309.581 42.7658ZM309.766 41.8944C310.245 41.8944 310.65 41.8191 310.978 41.6683C311.31 41.5177 311.56 41.3231 311.728 41.0847C311.899 40.8463 311.985 40.5956 311.985 40.3326V39.4447C311.933 39.494 311.821 39.5392 311.646 39.5803C311.475 39.6187 311.276 39.653 311.05 39.6831C310.828 39.7105 310.61 39.7352 310.398 39.7571C310.189 39.7763 310.019 39.7927 309.889 39.8064C309.573 39.8393 309.279 39.8928 309.005 39.9667C308.735 40.038 308.515 40.1462 308.348 40.2915C308.183 40.4339 308.101 40.6285 308.101 40.8751C308.101 41.2121 308.257 41.467 308.569 41.6396C308.884 41.8095 309.283 41.8944 309.766 41.8944ZM316.623 34.2001V42.6178H315.41V34.2001H316.623ZM320.056 34.2001V42.6178H318.844V34.2001H320.056ZM325.483 42.7493C324.77 42.7493 324.145 42.6137 323.608 42.3424C323.073 42.0712 322.655 41.6916 322.354 41.2039C322.056 40.7162 321.907 40.1462 321.907 39.494C321.907 38.8364 322.056 38.2623 322.354 37.7718C322.655 37.2814 323.073 36.9005 323.608 36.6292C324.145 36.358 324.77 36.2223 325.483 36.2223C326.196 36.2223 326.819 36.358 327.353 36.6292C327.89 36.9005 328.308 37.2814 328.607 37.7718C328.908 38.2623 329.059 38.8364 329.059 39.494C329.059 40.1462 328.908 40.7162 328.607 41.2039C328.308 41.6916 327.89 42.0712 327.353 42.3424C326.819 42.6137 326.196 42.7493 325.483 42.7493ZM325.483 41.878C326.024 41.878 326.47 41.767 326.819 41.5451C327.168 41.3231 327.426 41.0313 327.594 40.6696C327.762 40.3079 327.846 39.916 327.846 39.494C327.846 39.072 327.762 38.6788 327.594 38.3144C327.426 37.95 327.168 37.6554 326.819 37.4307C326.47 37.206 326.024 37.0937 325.483 37.0937C324.941 37.0937 324.496 37.206 324.147 37.4307C323.798 37.6554 323.539 37.95 323.371 38.3144C323.203 38.6788 323.119 39.072 323.119 39.494C323.119 39.916 323.203 40.3079 323.371 40.6696C323.539 41.0313 323.798 41.3231 324.147 41.5451C324.496 41.767 324.941 41.878 325.483 41.878ZM334.342 36.3045V37.1266H330.252V36.3045H334.342ZM331.444 34.7919H332.656V40.8093C332.656 41.0833 332.706 41.2888 332.805 41.4259C332.908 41.5601 333.038 41.6505 333.196 41.6971C333.356 41.741 333.526 41.7629 333.704 41.7629C333.838 41.7629 333.948 41.7574 334.033 41.7464C334.119 41.7327 334.187 41.7218 334.239 41.7135L334.485 42.5849C334.403 42.6096 334.288 42.6342 334.141 42.6589C333.994 42.6863 333.807 42.7 333.581 42.7C333.239 42.7 332.903 42.6411 332.574 42.5233C332.248 42.4055 331.978 42.226 331.762 41.9849C331.55 41.7437 331.444 41.4396 331.444 41.0724V34.7919ZM347.303 34.2001H348.578V39.7736C348.578 40.3489 348.408 40.8627 348.069 41.3149C347.733 41.7642 347.259 42.1191 346.646 42.3794C346.033 42.637 345.314 42.7658 344.488 42.7658C343.663 42.7658 342.943 42.637 342.331 42.3794C341.717 42.1191 341.241 41.7642 340.902 41.3149C340.566 40.8627 340.399 40.3489 340.399 39.7736V34.2001H341.673V39.6913C341.673 40.1024 341.785 40.4682 342.012 40.7887C342.238 41.1066 342.56 41.3573 342.978 41.541C343.399 41.7218 343.903 41.8122 344.488 41.8122C345.074 41.8122 345.577 41.7218 345.999 41.541C346.42 41.3573 346.742 41.1066 346.965 40.7887C347.19 40.4682 347.303 40.1024 347.303 39.6913V34.2001ZM352.17 38.82V42.6178H350.958V36.3045H352.129V37.291H352.232C352.416 36.9704 352.697 36.7128 353.074 36.5182C353.451 36.321 353.937 36.2223 354.534 36.2223C355.068 36.2223 355.535 36.31 355.936 36.4853C356.336 36.658 356.648 36.921 356.871 37.2746C357.094 37.6253 357.205 38.0692 357.205 38.6063V42.6178H355.992V38.672C355.992 38.1761 355.832 37.7897 355.509 37.5129C355.187 37.2334 354.746 37.0937 354.184 37.0937C353.797 37.0937 353.451 37.1608 353.146 37.2951C352.845 37.4293 352.607 37.6253 352.432 37.8828C352.257 38.1404 352.17 38.4528 352.17 38.82ZM359.42 42.6178V36.3045H360.633V42.6178H359.42ZM360.037 35.2523C359.801 35.2523 359.597 35.1879 359.425 35.0591C359.258 34.9303 359.174 34.7755 359.174 34.5947C359.174 34.4138 359.258 34.259 359.425 34.1302C359.597 34.0014 359.801 33.937 360.037 33.937C360.274 33.937 360.475 34.0014 360.643 34.1302C360.814 34.259 360.9 34.4138 360.9 34.5947C360.9 34.7755 360.814 34.9303 360.643 35.0591C360.475 35.1879 360.274 35.2523 360.037 35.2523ZM366.285 36.3045V37.1266H362.196V36.3045H366.285ZM363.388 34.7919H364.6V40.8093C364.6 41.0833 364.65 41.2888 364.749 41.4259C364.852 41.5601 364.982 41.6505 365.14 41.6971C365.301 41.741 365.471 41.7629 365.649 41.7629C365.782 41.7629 365.891 41.7574 365.977 41.7464C366.063 41.7327 366.131 41.7218 366.183 41.7135L366.429 42.5849C366.347 42.6096 366.233 42.6342 366.085 42.6589C365.938 42.6863 365.751 42.7 365.525 42.7C365.183 42.7 364.847 42.6411 364.518 42.5233C364.193 42.4055 363.923 42.226 363.707 41.9849C363.494 41.7437 363.388 41.4396 363.388 41.0724V34.7919Z", fill: "black" }), (0, K.jsx)("path", { d: "M432.439 2.9436H344.778V15.3205H432.439V2.9436Z", fill: "#2C6A90" }), (0, K.jsx)("path", { d: "M449.295 125.865H289.702V161.485H449.295V125.865Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { onClick: function () { i || (document.getElementById("light3").style.fill = "red", a("test3")) }, disabled: i && "test3" !== i, d: "M398.602 131.782H365.291C356.456 131.782 349.294 137.049 349.294 143.546C349.294 150.042 356.456 155.309 365.291 155.309H398.602C407.437 155.309 414.598 150.042 414.598 143.546C414.598 137.049 407.437 131.782 398.602 131.782Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { id: "light3", d: "M313.746 151.926C319.458 151.926 324.09 148.52 324.09 144.32C324.09 140.118 319.458 136.713 313.746 136.713C308.033 136.713 303.402 140.118 303.402 144.32C303.402 148.52 308.033 151.926 313.746 151.926Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M388.952 32.7178H387.932C384.727 32.7178 382.13 34.7957 382.13 37.3591V42.774C382.13 45.3374 384.727 47.4154 387.932 47.4154H388.952C392.156 47.4154 394.754 45.3374 394.754 42.774V37.3591C394.754 34.7957 392.156 32.7178 388.952 32.7178Z", fill: "black", "fill-opacity": "0.953975" }), (0, K.jsx)("path", { d: "M449.295 54.625H289.702V90.2448H449.295V54.625Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { onClick: function () { i || (document.getElementById("light1").style.fill = "red", a("test1")) }, disabled: i && "test1" !== i, d: "M398.602 60.543H365.291C356.456 60.543 349.294 65.8095 349.294 72.3064C349.294 78.8026 356.456 84.0692 365.291 84.0692H398.602C407.437 84.0692 414.598 78.8026 414.598 72.3064C414.598 65.8095 407.437 60.543 398.602 60.543Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { id: "light1", d: "M313.746 80.6864C319.458 80.6864 324.09 77.2804 324.09 73.0796C324.09 68.8783 319.458 65.4729 313.746 65.4729C308.033 65.4729 303.402 68.8783 303.402 73.0796C303.402 77.2804 308.033 80.6864 313.746 80.6864Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 90.2449H289.702V125.865H449.295V90.2449Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { onClick: function () { i || (document.getElementById("light2").style.fill = "red", a("test2")) }, disabled: i && "test2" !== i, d: "M398.602 96.1626H365.291C356.456 96.1626 349.294 101.429 349.294 107.926C349.294 114.423 356.456 119.689 365.291 119.689H398.602C407.437 119.689 414.598 114.423 414.598 107.926C414.598 101.429 407.437 96.1626 398.602 96.1626Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { id: "light2", d: "M313.746 116.306C319.458 116.306 324.09 112.901 324.09 108.699C324.09 104.499 319.458 101.093 313.746 101.093C308.033 101.093 303.402 104.499 303.402 108.699C303.402 112.901 308.033 116.306 313.746 116.306Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 161.485H289.702V197.105H449.295V161.485Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 167.403H365.291C356.456 167.403 349.294 172.669 349.294 179.166C349.294 185.662 356.456 190.929 365.291 190.929H398.602C407.437 190.929 414.598 185.662 414.598 179.166C414.598 172.669 407.437 167.403 398.602 167.403Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 187.546C319.458 187.546 324.09 184.141 324.09 179.939C324.09 175.739 319.458 172.333 313.746 172.333C308.033 172.333 303.402 175.739 303.402 179.939C303.402 184.141 308.033 187.546 313.746 187.546Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 197.104H289.702V232.725H449.295V197.104Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 203.022H365.291C356.456 203.022 349.294 208.289 349.294 214.786C349.294 221.282 356.456 226.549 365.291 226.549H398.602C407.437 226.549 414.598 221.282 414.598 214.786C414.598 208.289 407.437 203.022 398.602 203.022Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 223.166C319.458 223.166 324.09 219.76 324.09 215.559C324.09 211.358 319.458 207.953 313.746 207.953C308.033 207.953 303.402 211.358 303.402 215.559C303.402 219.76 308.033 223.166 313.746 223.166Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 232.725H289.702V268.344H449.295V232.725Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 238.643H365.291C356.456 238.643 349.294 243.909 349.294 250.405C349.294 256.902 356.456 262.169 365.291 262.169H398.602C407.437 262.169 414.598 256.902 414.598 250.405C414.598 243.909 407.437 238.643 398.602 238.643Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 258.786C319.458 258.786 324.09 255.38 324.09 251.179C324.09 246.978 319.458 243.573 313.746 243.573C308.033 243.573 303.402 246.978 303.402 251.179C303.402 255.38 308.033 258.786 313.746 258.786Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 268.344H289.702V303.964H449.295V268.344Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 274.262H365.291C356.456 274.262 349.294 279.529 349.294 286.026C349.294 292.522 356.456 297.788 365.291 297.788H398.602C407.437 297.788 414.598 292.522 414.598 286.026C414.598 279.529 407.437 274.262 398.602 274.262Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 294.406C319.458 294.406 324.09 291 324.09 286.799C324.09 282.598 319.458 279.192 313.746 279.192C308.033 279.192 303.402 282.598 303.402 286.799C303.402 291 308.033 294.406 313.746 294.406Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 303.964H289.702V339.584H449.295V303.964Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 309.882H365.291C356.456 309.882 349.294 315.149 349.294 321.645C349.294 328.142 356.456 333.409 365.291 333.409H398.602C407.437 333.409 414.598 328.142 414.598 321.645C414.598 315.149 407.437 309.882 398.602 309.882Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 330.026C319.458 330.026 324.09 326.62 324.09 322.419C324.09 318.218 319.458 314.812 313.746 314.812C308.033 314.812 303.402 318.218 303.402 322.419C303.402 326.62 308.033 330.026 313.746 330.026Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 339.584H289.702V375.204H449.295V339.584Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 345.502H365.291C356.456 345.502 349.294 350.769 349.294 357.265C349.294 363.762 356.456 369.028 365.291 369.028H398.602C407.437 369.028 414.598 363.762 414.598 357.265C414.598 350.769 407.437 345.502 398.602 345.502Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 365.646C319.458 365.646 324.09 362.24 324.09 358.039C324.09 353.838 319.458 350.432 313.746 350.432C308.033 350.432 303.402 353.838 303.402 358.039C303.402 362.24 308.033 365.646 313.746 365.646Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 375.204H289.702V410.824H449.295V375.204Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 381.122H365.291C356.456 381.122 349.294 386.388 349.294 392.885C349.294 399.382 356.456 404.648 365.291 404.648H398.602C407.437 404.648 414.598 399.382 414.598 392.885C414.598 386.388 407.437 381.122 398.602 381.122Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 401.265C319.458 401.265 324.09 397.86 324.09 393.658C324.09 389.458 319.458 386.052 313.746 386.052C308.033 386.052 303.402 389.458 303.402 393.658C303.402 397.86 308.033 401.265 313.746 401.265Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 410.824H289.702V446.444H449.295V410.824Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 416.742H365.291C356.456 416.742 349.294 422.009 349.294 428.505C349.294 435.002 356.456 440.268 365.291 440.268H398.602C407.437 440.268 414.598 435.002 414.598 428.505C414.598 422.009 407.437 416.742 398.602 416.742Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 436.885C319.458 436.885 324.09 433.479 324.09 429.279C324.09 425.077 319.458 421.672 313.746 421.672C308.033 421.672 303.402 425.077 303.402 429.279C303.402 433.479 308.033 436.885 313.746 436.885Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M268.133 40.22H28.4278C18.1474 40.22 9.81342 46.8874 9.81342 55.112V572.505C9.81342 580.729 18.1474 587.396 28.4278 587.396H268.133C278.413 587.396 286.747 580.729 286.747 572.505V55.112C286.747 46.8874 278.413 40.22 268.133 40.22Z", fill: "#D6DFD9", stroke: "#B6B6B6", "stroke-width": "6.2129" }), (0, K.jsx)("path", { d: "M33.782 57.8231C33.782 49.0011 26.8884 41.8496 18.3846 41.8496C9.88077 41.8496 2.98706 49.0011 2.98706 57.8231V571.34C2.98706 580.162 9.88077 587.314 18.3846 587.314C26.8884 587.314 33.782 580.162 33.782 571.34V57.8231Z", fill: "#C6C9C6" }), (0, K.jsx)("path", { d: "M449.295 446.444H289.702V482.063H449.295V446.444Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 452.362H365.291C356.456 452.362 349.294 457.628 349.294 464.125C349.294 470.622 356.456 475.888 365.291 475.888H398.602C407.437 475.888 414.598 470.622 414.598 464.125C414.598 457.628 407.437 452.362 398.602 452.362Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 472.505C319.458 472.505 324.09 469.1 324.09 464.898C324.09 460.698 319.458 457.292 313.746 457.292C308.033 457.292 303.402 460.698 303.402 464.898C303.402 469.1 308.033 472.505 313.746 472.505Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 482.063H289.702V517.684H449.295V482.063Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 487.982H365.291C356.456 487.982 349.294 493.249 349.294 499.745C349.294 506.242 356.456 511.508 365.291 511.508H398.602C407.437 511.508 414.598 506.242 414.598 499.745C414.598 493.249 407.437 487.982 398.602 487.982Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 508.125C319.458 508.125 324.09 504.719 324.09 500.519C324.09 496.317 319.458 492.912 313.746 492.912C308.033 492.912 303.402 496.317 303.402 500.519C303.402 504.719 308.033 508.125 313.746 508.125Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M147.497 90.5435H283.547", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.189 196.003H282.239", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M147.497 125.013H283.547", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.965 159.907H283.015", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.721 231.323H282.772", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.987 266.431H283.038", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M147.252 302.39H283.303", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.124 337.295H282.175", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.5 373.103H282.551", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M145.748 408.911H281.798", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M145.748 444.418H281.798", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.124 480.226H282.175", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.124 515.733H282.175", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M84.8267 80H82.4972L87.7315 65.4545H90.267L95.5014 80H93.1719L89.0597 68.0966H88.946L84.8267 80ZM85.2173 74.304H92.7741V76.1506H85.2173V74.304ZM97.4315 80V69.0909H99.4698V70.8665H99.6048C99.832 70.2652 100.204 69.7964 100.72 69.4602C101.236 69.1193 101.854 68.9489 102.574 68.9489C103.303 68.9489 103.913 69.1193 104.406 69.4602C104.903 69.8011 105.27 70.2699 105.507 70.8665H105.62C105.881 70.2841 106.295 69.8201 106.863 69.4744C107.431 69.1241 108.109 68.9489 108.895 68.9489C109.884 68.9489 110.691 69.259 111.316 69.8793C111.946 70.4995 112.261 71.4347 112.261 72.6847V80H110.137V72.8835C110.137 72.1449 109.936 71.6098 109.534 71.2784C109.131 70.947 108.651 70.7812 108.092 70.7812C107.401 70.7812 106.863 70.9943 106.48 71.4205C106.096 71.8419 105.904 72.384 105.904 73.0469V80H103.788V72.7486C103.788 72.1567 103.603 71.6809 103.234 71.321C102.865 70.9612 102.384 70.7812 101.792 70.7812C101.39 70.7812 101.018 70.8878 100.677 71.1009C100.341 71.3092 100.069 71.6004 99.8604 71.9744C99.6568 72.3485 99.555 72.7817 99.555 73.2741V80H97.4315ZM115.107 80V69.0909H117.231V80H115.107ZM116.18 67.4077C115.81 67.4077 115.493 67.2846 115.228 67.0384C114.968 66.7874 114.837 66.4891 114.837 66.1435C114.837 65.7931 114.968 65.4948 115.228 65.2486C115.493 64.9976 115.81 64.8722 116.18 64.8722C116.549 64.8722 116.864 64.9976 117.124 65.2486C117.389 65.4948 117.522 65.7931 117.522 66.1435C117.522 66.4891 117.389 66.7874 117.124 67.0384C116.864 67.2846 116.549 67.4077 116.18 67.4077ZM125.18 69.0909V70.7955H119.221V69.0909H125.18ZM120.819 66.4773H122.943V76.7969C122.943 77.2088 123.004 77.5189 123.127 77.7273C123.251 77.9309 123.409 78.0705 123.603 78.1463C123.802 78.2173 124.018 78.2528 124.25 78.2528C124.42 78.2528 124.569 78.241 124.697 78.2173C124.825 78.1937 124.924 78.1747 124.995 78.1605L125.379 79.9148C125.256 79.9621 125.081 80.0095 124.853 80.0568C124.626 80.1089 124.342 80.1373 124.001 80.142C123.442 80.1515 122.922 80.0521 122.439 79.8438C121.956 79.6354 121.565 79.3134 121.267 78.8778C120.968 78.4422 120.819 77.8954 120.819 77.2372V66.4773ZM132.275 67.3438V65.4545H143.532V67.3438H138.994V80H136.806V67.3438H132.275ZM144.717 80V69.0909H146.769V70.8239H146.883C147.082 70.2367 147.432 69.7751 147.934 69.4389C148.441 69.098 149.013 68.9276 149.653 68.9276C149.785 68.9276 149.942 68.9323 150.121 68.9418C150.306 68.9512 150.451 68.9631 150.555 68.9773V71.0085C150.469 70.9848 150.318 70.9588 150.1 70.9304C149.882 70.8973 149.665 70.8807 149.447 70.8807C148.945 70.8807 148.497 70.9872 148.104 71.2003C147.716 71.4086 147.408 71.6998 147.181 72.0739C146.954 72.4432 146.84 72.8646 146.84 73.3381V80H144.717ZM152.392 80V69.0909H154.516V80H152.392ZM153.465 67.4077C153.096 67.4077 152.778 67.2846 152.513 67.0384C152.253 66.7874 152.123 66.4891 152.123 66.1435C152.123 65.7931 152.253 65.4948 152.513 65.2486C152.778 64.9976 153.096 64.8722 153.465 64.8722C153.834 64.8722 154.149 64.9976 154.409 65.2486C154.675 65.4948 154.807 65.7931 154.807 66.1435C154.807 66.4891 154.675 66.7874 154.409 67.0384C154.149 67.2846 153.834 67.4077 153.465 67.4077ZM166.705 69.0909L162.749 80H160.477L156.513 69.0909H158.793L161.556 77.4858H161.67L164.425 69.0909H166.705ZM173.032 80.2202C171.957 80.2202 171.031 79.9905 170.255 79.5312C169.483 79.0672 168.886 78.4162 168.465 77.5781C168.048 76.7353 167.84 75.7481 167.84 74.6165C167.84 73.4991 168.048 72.5142 168.465 71.6619C168.886 70.8097 169.473 70.1444 170.226 69.6662C170.984 69.188 171.869 68.9489 172.882 68.9489C173.498 68.9489 174.095 69.0507 174.672 69.2543C175.25 69.4579 175.768 69.7775 176.228 70.2131C176.687 70.6487 177.049 71.2145 177.314 71.9105C177.579 72.6018 177.712 73.4422 177.712 74.4318V75.1847H169.04V73.5938H175.631C175.631 73.035 175.517 72.5402 175.29 72.1094C175.063 71.6738 174.743 71.3305 174.331 71.0795C173.924 70.8286 173.446 70.7031 172.897 70.7031C172.3 70.7031 171.779 70.8499 171.334 71.1435C170.894 71.4323 170.553 71.8111 170.311 72.2798C170.075 72.7438 169.956 73.2481 169.956 73.7926V75.0355C169.956 75.7647 170.084 76.3849 170.34 76.8963C170.6 77.4077 170.962 77.7983 171.426 78.0682C171.891 78.3333 172.433 78.4659 173.053 78.4659C173.455 78.4659 173.822 78.4091 174.154 78.2955C174.485 78.1771 174.772 78.0019 175.013 77.7699C175.255 77.5379 175.439 77.2514 175.567 76.9105L177.577 77.2727C177.416 77.8646 177.127 78.383 176.711 78.8281C176.299 79.2685 175.78 79.6117 175.155 79.858C174.535 80.0994 173.827 80.2202 173.032 80.2202ZM184.152 80.2131C183.271 80.2131 182.485 79.9882 181.794 79.5384C181.107 79.0838 180.568 78.4375 180.175 77.5994C179.786 76.7566 179.592 75.7457 179.592 74.5668C179.592 73.3878 179.789 72.3793 180.182 71.5412C180.58 70.7031 181.124 70.0616 181.815 69.6165C182.507 69.1714 183.29 68.9489 184.166 68.9489C184.843 68.9489 185.388 69.0625 185.8 69.2898C186.216 69.5123 186.538 69.7727 186.766 70.071C186.998 70.3693 187.178 70.6321 187.305 70.8594H187.433V65.4545H189.557V80H187.483V78.3026H187.305C187.178 78.5346 186.993 78.7997 186.751 79.098C186.515 79.3963 186.188 79.6567 185.771 79.8793C185.355 80.1018 184.815 80.2131 184.152 80.2131ZM184.621 78.402C185.232 78.402 185.748 78.241 186.169 77.919C186.595 77.5923 186.917 77.1402 187.135 76.5625C187.357 75.9848 187.469 75.3125 187.469 74.5455C187.469 73.7879 187.36 73.125 187.142 72.5568C186.924 71.9886 186.605 71.5459 186.183 71.2287C185.762 70.9115 185.241 70.7528 184.621 70.7528C183.982 70.7528 183.449 70.9186 183.023 71.25C182.597 71.5814 182.275 72.0336 182.057 72.6065C181.844 73.1795 181.737 73.8258 181.737 74.5455C181.737 75.2746 181.846 75.9304 182.064 76.5128C182.282 77.0952 182.604 77.5568 183.03 77.8977C183.461 78.2339 183.991 78.402 184.621 78.402ZM192.588 80V69.0909H194.711V80H192.588ZM193.66 67.4077C193.291 67.4077 192.974 67.2846 192.708 67.0384C192.448 66.7874 192.318 66.4891 192.318 66.1435C192.318 65.7931 192.448 65.4948 192.708 65.2486C192.974 64.9976 193.291 64.8722 193.66 64.8722C194.029 64.8722 194.344 64.9976 194.605 65.2486C194.87 65.4948 195.002 65.7931 195.002 66.1435C195.002 66.4891 194.87 66.7874 194.605 67.0384C194.344 67.2846 194.029 67.4077 193.66 67.4077Z", fill: "black" }), (0, K.jsx)("path", { d: "M84.8693 97.4545L88.9176 109.301H89.081L93.1293 97.4545H95.5014L90.267 112H87.7315L82.4972 97.4545H84.8693ZM97.4315 112V101.091H99.555V112H97.4315ZM98.5039 99.4077C98.1346 99.4077 97.8174 99.2846 97.5522 99.0384C97.2918 98.7874 97.1616 98.4891 97.1616 98.1435C97.1616 97.7931 97.2918 97.4948 97.5522 97.2486C97.8174 96.9976 98.1346 96.8722 98.5039 96.8722C98.8732 96.8722 99.1881 96.9976 99.4485 97.2486C99.7137 97.4948 99.8462 97.7931 99.8462 98.1435C99.8462 98.4891 99.7137 98.7874 99.4485 99.0384C99.1881 99.2846 98.8732 99.4077 98.5039 99.4077ZM104.365 108.3L104.351 105.707H104.72L109.067 101.091H111.609L106.652 106.347H106.318L104.365 108.3ZM102.412 112V97.4545H104.536V112H102.412ZM109.301 112L105.395 106.815L106.858 105.331L111.908 112H109.301ZM113.545 112V101.091H115.597V102.824H115.711C115.91 102.237 116.26 101.775 116.762 101.439C117.269 101.098 117.842 100.928 118.481 100.928C118.613 100.928 118.77 100.932 118.95 100.942C119.134 100.951 119.279 100.963 119.383 100.977V103.009C119.298 102.985 119.146 102.959 118.928 102.93C118.71 102.897 118.493 102.881 118.275 102.881C117.773 102.881 117.326 102.987 116.933 103.2C116.544 103.409 116.237 103.7 116.009 104.074C115.782 104.443 115.668 104.865 115.668 105.338V112H113.545ZM124.298 112.241C123.606 112.241 122.981 112.114 122.423 111.858C121.864 111.598 121.421 111.221 121.094 110.729C120.772 110.236 120.612 109.633 120.612 108.918C120.612 108.302 120.73 107.795 120.967 107.398C121.203 107 121.523 106.685 121.925 106.453C122.328 106.221 122.778 106.046 123.275 105.928C123.772 105.809 124.279 105.719 124.795 105.658C125.448 105.582 125.978 105.52 126.386 105.473C126.793 105.421 127.089 105.338 127.273 105.224C127.458 105.111 127.55 104.926 127.55 104.67V104.621C127.55 104 127.375 103.52 127.025 103.179C126.679 102.838 126.163 102.668 125.477 102.668C124.762 102.668 124.198 102.826 123.786 103.143C123.379 103.456 123.097 103.804 122.941 104.188L120.945 103.733C121.182 103.07 121.528 102.535 121.982 102.128C122.442 101.716 122.969 101.418 123.566 101.233C124.163 101.044 124.79 100.949 125.448 100.949C125.884 100.949 126.345 101.001 126.833 101.105C127.326 101.205 127.785 101.389 128.211 101.659C128.642 101.929 128.995 102.315 129.269 102.817C129.544 103.314 129.681 103.96 129.681 104.756V112H127.607V110.509H127.522C127.385 110.783 127.179 111.053 126.904 111.318C126.629 111.583 126.277 111.804 125.846 111.979C125.415 112.154 124.899 112.241 124.298 112.241ZM124.759 110.537C125.346 110.537 125.848 110.421 126.265 110.189C126.686 109.957 127.006 109.654 127.224 109.28C127.446 108.901 127.558 108.496 127.558 108.065V106.659C127.482 106.735 127.335 106.806 127.117 106.872C126.904 106.934 126.66 106.988 126.386 107.036C126.111 107.078 125.844 107.118 125.583 107.156C125.323 107.189 125.105 107.218 124.93 107.241C124.518 107.294 124.141 107.381 123.8 107.504C123.464 107.627 123.194 107.805 122.991 108.037C122.792 108.264 122.692 108.567 122.692 108.946C122.692 109.472 122.887 109.869 123.275 110.139C123.663 110.404 124.158 110.537 124.759 110.537ZM132.51 112V101.091H134.548V102.866H134.683C134.91 102.265 135.282 101.796 135.798 101.46C136.314 101.119 136.932 100.949 137.652 100.949C138.381 100.949 138.992 101.119 139.484 101.46C139.981 101.801 140.348 102.27 140.585 102.866H140.699C140.959 102.284 141.373 101.82 141.941 101.474C142.51 101.124 143.187 100.949 143.973 100.949C144.962 100.949 145.77 101.259 146.395 101.879C147.024 102.5 147.339 103.435 147.339 104.685V112H145.216V104.884C145.216 104.145 145.014 103.61 144.612 103.278C144.209 102.947 143.729 102.781 143.17 102.781C142.479 102.781 141.941 102.994 141.558 103.42C141.174 103.842 140.983 104.384 140.983 105.047V112H138.866V104.749C138.866 104.157 138.681 103.681 138.312 103.321C137.943 102.961 137.462 102.781 136.87 102.781C136.468 102.781 136.096 102.888 135.755 103.101C135.419 103.309 135.147 103.6 134.939 103.974C134.735 104.348 134.633 104.782 134.633 105.274V112H132.51ZM155.649 112V97.4545H160.833C161.965 97.4545 162.903 97.6605 163.646 98.0724C164.389 98.4844 164.946 99.0478 165.315 99.7628C165.684 100.473 165.869 101.273 165.869 102.163C165.869 103.058 165.682 103.863 165.308 104.578C164.939 105.288 164.38 105.852 163.632 106.268C162.888 106.68 161.953 106.886 160.826 106.886H157.261V105.026H160.627C161.342 105.026 161.922 104.902 162.368 104.656C162.813 104.405 163.139 104.064 163.348 103.634C163.556 103.203 163.66 102.713 163.66 102.163C163.66 101.614 163.556 101.126 163.348 100.7C163.139 100.274 162.81 99.9403 162.36 99.6989C161.915 99.4574 161.328 99.3366 160.599 99.3366H157.843V112H155.649ZM171.348 112.241C170.657 112.241 170.032 112.114 169.473 111.858C168.915 111.598 168.472 111.221 168.145 110.729C167.823 110.236 167.662 109.633 167.662 108.918C167.662 108.302 167.781 107.795 168.017 107.398C168.254 107 168.574 106.685 168.976 106.453C169.379 106.221 169.828 106.046 170.326 105.928C170.823 105.809 171.329 105.719 171.846 105.658C172.499 105.582 173.029 105.52 173.436 105.473C173.844 105.421 174.14 105.338 174.324 105.224C174.509 105.111 174.601 104.926 174.601 104.67V104.621C174.601 104 174.426 103.52 174.076 103.179C173.73 102.838 173.214 102.668 172.527 102.668C171.812 102.668 171.249 102.826 170.837 103.143C170.43 103.456 170.148 103.804 169.992 104.188L167.996 103.733C168.233 103.07 168.578 102.535 169.033 102.128C169.492 101.716 170.02 101.418 170.617 101.233C171.213 101.044 171.841 100.949 172.499 100.949C172.935 100.949 173.396 101.001 173.884 101.105C174.376 101.205 174.836 101.389 175.262 101.659C175.693 101.929 176.045 102.315 176.32 102.817C176.595 103.314 176.732 103.96 176.732 104.756V112H174.658V110.509H174.573C174.435 110.783 174.23 111.053 173.955 111.318C173.68 111.583 173.328 111.804 172.897 111.979C172.466 112.154 171.95 112.241 171.348 112.241ZM171.81 110.537C172.397 110.537 172.899 110.421 173.316 110.189C173.737 109.957 174.057 109.654 174.275 109.28C174.497 108.901 174.608 108.496 174.608 108.065V106.659C174.533 106.735 174.386 106.806 174.168 106.872C173.955 106.934 173.711 106.988 173.436 107.036C173.162 107.078 172.894 107.118 172.634 107.156C172.373 107.189 172.156 107.218 171.98 107.241C171.569 107.294 171.192 107.381 170.851 107.504C170.515 107.627 170.245 107.805 170.042 108.037C169.843 108.264 169.743 108.567 169.743 108.946C169.743 109.472 169.937 109.869 170.326 110.139C170.714 110.404 171.209 110.537 171.81 110.537ZM184.653 101.091V102.795H178.694V101.091H184.653ZM180.292 98.4773H182.415V108.797C182.415 109.209 182.477 109.519 182.6 109.727C182.723 109.931 182.882 110.071 183.076 110.146C183.275 110.217 183.49 110.253 183.722 110.253C183.893 110.253 184.042 110.241 184.17 110.217C184.298 110.194 184.397 110.175 184.468 110.161L184.852 111.915C184.728 111.962 184.553 112.009 184.326 112.057C184.099 112.109 183.815 112.137 183.474 112.142C182.915 112.152 182.394 112.052 181.911 111.844C181.428 111.635 181.038 111.313 180.739 110.878C180.441 110.442 180.292 109.895 180.292 109.237V98.4773ZM191.586 112.22C190.511 112.22 189.586 111.991 188.809 111.531C188.038 111.067 187.441 110.416 187.02 109.578C186.603 108.735 186.395 107.748 186.395 106.616C186.395 105.499 186.603 104.514 187.02 103.662C187.441 102.81 188.028 102.144 188.781 101.666C189.538 101.188 190.424 100.949 191.437 100.949C192.053 100.949 192.649 101.051 193.227 101.254C193.805 101.458 194.323 101.777 194.782 102.213C195.242 102.649 195.604 103.214 195.869 103.911C196.134 104.602 196.267 105.442 196.267 106.432V107.185H187.595V105.594H194.186C194.186 105.035 194.072 104.54 193.845 104.109C193.618 103.674 193.298 103.33 192.886 103.08C192.479 102.829 192.001 102.703 191.451 102.703C190.855 102.703 190.334 102.85 189.889 103.143C189.449 103.432 189.108 103.811 188.866 104.28C188.629 104.744 188.511 105.248 188.511 105.793V107.036C188.511 107.765 188.639 108.385 188.895 108.896C189.155 109.408 189.517 109.798 189.981 110.068C190.445 110.333 190.987 110.466 191.608 110.466C192.01 110.466 192.377 110.409 192.708 110.295C193.04 110.177 193.326 110.002 193.568 109.77C193.809 109.538 193.994 109.251 194.122 108.911L196.132 109.273C195.971 109.865 195.682 110.383 195.265 110.828C194.853 111.268 194.335 111.612 193.71 111.858C193.09 112.099 192.382 112.22 191.586 112.22ZM200.746 97.4545V112H198.623V97.4545H200.746Z", fill: "black" }), (0, K.jsx)("path", { d: "M92.4418 135.05C92.3045 134.619 92.1198 134.233 91.8878 133.892C91.6605 133.546 91.3883 133.253 91.071 133.011C90.7538 132.765 90.3916 132.578 89.9844 132.45C89.5819 132.322 89.1392 132.259 88.6562 132.259C87.8371 132.259 87.0985 132.469 86.4403 132.891C85.7822 133.312 85.2614 133.93 84.8778 134.744C84.4991 135.554 84.3097 136.546 84.3097 137.72C84.3097 138.899 84.5014 139.896 84.8849 140.71C85.2685 141.525 85.794 142.143 86.4616 142.564C87.1293 142.985 87.8892 143.196 88.7415 143.196C89.5322 143.196 90.2211 143.035 90.8082 142.713C91.4001 142.391 91.857 141.937 92.179 141.349C92.5057 140.758 92.669 140.062 92.669 139.261L93.2372 139.368H89.0753V137.557H94.7926V139.212C94.7926 140.433 94.5322 141.494 94.0114 142.393C93.4953 143.288 92.7803 143.98 91.8665 144.467C90.9574 144.955 89.9157 145.199 88.7415 145.199C87.4252 145.199 86.2699 144.896 85.2756 144.29C84.286 143.684 83.5142 142.824 82.9602 141.712C82.4063 140.594 82.1293 139.268 82.1293 137.734C82.1293 136.574 82.2902 135.533 82.6122 134.609C82.9342 133.686 83.3864 132.902 83.9688 132.259C84.5559 131.61 85.2448 131.115 86.0355 130.774C86.831 130.429 87.6998 130.256 88.642 130.256C89.428 130.256 90.1596 130.372 90.8366 130.604C91.5185 130.836 92.1245 131.165 92.6548 131.591C93.1899 132.017 93.6326 132.524 93.983 133.111C94.3333 133.693 94.5701 134.339 94.6932 135.05H92.4418ZM102.11 145.22C101.035 145.22 100.109 144.991 99.3327 144.531C98.561 144.067 97.9644 143.416 97.543 142.578C97.1263 141.735 96.918 140.748 96.918 139.616C96.918 138.499 97.1263 137.514 97.543 136.662C97.9644 135.81 98.5515 135.144 99.3043 134.666C100.062 134.188 100.947 133.949 101.961 133.949C102.576 133.949 103.173 134.051 103.75 134.254C104.328 134.458 104.846 134.777 105.306 135.213C105.765 135.649 106.127 136.214 106.392 136.911C106.658 137.602 106.79 138.442 106.79 139.432V140.185H98.1183V138.594H104.709C104.709 138.035 104.596 137.54 104.368 137.109C104.141 136.674 103.821 136.33 103.409 136.08C103.002 135.829 102.524 135.703 101.975 135.703C101.378 135.703 100.857 135.85 100.412 136.143C99.9719 136.432 99.631 136.811 99.3896 137.28C99.1528 137.744 99.0344 138.248 99.0344 138.793V140.036C99.0344 140.765 99.1623 141.385 99.418 141.896C99.6784 142.408 100.041 142.798 100.505 143.068C100.969 143.333 101.511 143.466 102.131 143.466C102.533 143.466 102.9 143.409 103.232 143.295C103.563 143.177 103.85 143.002 104.091 142.77C104.333 142.538 104.517 142.251 104.645 141.911L106.655 142.273C106.494 142.865 106.205 143.383 105.789 143.828C105.377 144.268 104.858 144.612 104.233 144.858C103.613 145.099 102.905 145.22 102.11 145.22ZM113.848 145.22C112.773 145.22 111.848 144.991 111.071 144.531C110.299 144.067 109.703 143.416 109.281 142.578C108.865 141.735 108.656 140.748 108.656 139.616C108.656 138.499 108.865 137.514 109.281 136.662C109.703 135.81 110.29 135.144 111.043 134.666C111.8 134.188 112.686 133.949 113.699 133.949C114.314 133.949 114.911 134.051 115.489 134.254C116.066 134.458 116.585 134.777 117.044 135.213C117.503 135.649 117.866 136.214 118.131 136.911C118.396 137.602 118.528 138.442 118.528 139.432V140.185H109.857V138.594H116.447C116.447 138.035 116.334 137.54 116.107 137.109C115.879 136.674 115.56 136.33 115.148 136.08C114.741 135.829 114.262 135.703 113.713 135.703C113.116 135.703 112.596 135.85 112.151 136.143C111.71 136.432 111.369 136.811 111.128 137.28C110.891 137.744 110.773 138.248 110.773 138.793V140.036C110.773 140.765 110.901 141.385 111.156 141.896C111.417 142.408 111.779 142.798 112.243 143.068C112.707 143.333 113.249 143.466 113.869 143.466C114.272 143.466 114.639 143.409 114.97 143.295C115.302 143.177 115.588 143.002 115.83 142.77C116.071 142.538 116.256 142.251 116.384 141.911L118.393 142.273C118.232 142.865 117.944 143.383 117.527 143.828C117.115 144.268 116.597 144.612 115.972 144.858C115.351 145.099 114.643 145.22 113.848 145.22ZM125.977 134.091V135.795H120.018V134.091H125.977ZM121.616 131.477H123.74V141.797C123.74 142.209 123.801 142.519 123.924 142.727C124.047 142.931 124.206 143.071 124.4 143.146C124.599 143.217 124.815 143.253 125.047 143.253C125.217 143.253 125.366 143.241 125.494 143.217C125.622 143.194 125.721 143.175 125.792 143.161L126.176 144.915C126.053 144.962 125.877 145.009 125.65 145.057C125.423 145.109 125.139 145.137 124.798 145.142C124.239 145.152 123.718 145.052 123.235 144.844C122.752 144.635 122.362 144.313 122.064 143.878C121.765 143.442 121.616 142.895 121.616 142.237V131.477ZM130.684 138.523V145H128.56V130.455H130.656V135.866H130.79C131.046 135.279 131.437 134.813 131.962 134.467C132.488 134.122 133.174 133.949 134.022 133.949C134.77 133.949 135.424 134.103 135.982 134.411C136.546 134.718 136.981 135.178 137.289 135.788C137.602 136.394 137.758 137.152 137.758 138.061V145H135.634V138.317C135.634 137.517 135.428 136.896 135.016 136.456C134.604 136.011 134.031 135.788 133.298 135.788C132.796 135.788 132.346 135.895 131.948 136.108C131.555 136.321 131.245 136.634 131.018 137.045C130.795 137.453 130.684 137.945 130.684 138.523ZM143.766 145.241C143.075 145.241 142.45 145.114 141.891 144.858C141.333 144.598 140.89 144.221 140.563 143.729C140.241 143.236 140.08 142.633 140.08 141.918C140.08 141.302 140.199 140.795 140.435 140.398C140.672 140 140.992 139.685 141.394 139.453C141.797 139.221 142.246 139.046 142.744 138.928C143.241 138.809 143.747 138.719 144.263 138.658C144.917 138.582 145.447 138.52 145.854 138.473C146.262 138.421 146.558 138.338 146.742 138.224C146.927 138.111 147.019 137.926 147.019 137.67V137.621C147.019 137 146.844 136.52 146.494 136.179C146.148 135.838 145.632 135.668 144.945 135.668C144.23 135.668 143.667 135.826 143.255 136.143C142.848 136.456 142.566 136.804 142.41 137.188L140.414 136.733C140.651 136.07 140.996 135.535 141.451 135.128C141.91 134.716 142.438 134.418 143.035 134.233C143.631 134.044 144.259 133.949 144.917 133.949C145.353 133.949 145.814 134.001 146.302 134.105C146.794 134.205 147.254 134.389 147.68 134.659C148.111 134.929 148.463 135.315 148.738 135.817C149.013 136.314 149.15 136.96 149.15 137.756V145H147.076V143.509H146.991C146.853 143.783 146.647 144.053 146.373 144.318C146.098 144.583 145.746 144.804 145.315 144.979C144.884 145.154 144.368 145.241 143.766 145.241ZM144.228 143.537C144.815 143.537 145.317 143.421 145.734 143.189C146.155 142.957 146.475 142.654 146.692 142.28C146.915 141.901 147.026 141.496 147.026 141.065V139.659C146.951 139.735 146.804 139.806 146.586 139.872C146.373 139.934 146.129 139.988 145.854 140.036C145.58 140.078 145.312 140.118 145.052 140.156C144.791 140.189 144.574 140.218 144.398 140.241C143.987 140.294 143.61 140.381 143.269 140.504C142.933 140.627 142.663 140.805 142.46 141.037C142.261 141.264 142.161 141.567 142.161 141.946C142.161 142.472 142.355 142.869 142.744 143.139C143.132 143.404 143.627 143.537 144.228 143.537ZM157.271 134.091H159.395V145.71C159.395 146.439 159.262 147.055 158.997 147.557C158.737 148.059 158.348 148.44 157.832 148.7C157.321 148.961 156.689 149.091 155.936 149.091C155.86 149.091 155.789 149.091 155.723 149.091C155.652 149.091 155.579 149.089 155.503 149.084V147.259C155.569 147.259 155.628 147.259 155.68 147.259C155.728 147.259 155.782 147.259 155.844 147.259C156.346 147.259 156.708 147.124 156.93 146.854C157.158 146.589 157.271 146.203 157.271 145.696V134.091ZM158.322 132.408C157.953 132.408 157.636 132.285 157.371 132.038C157.11 131.787 156.98 131.489 156.98 131.143C156.98 130.793 157.11 130.495 157.371 130.249C157.636 129.998 157.953 129.872 158.322 129.872C158.692 129.872 159.007 129.998 159.267 130.249C159.532 130.495 159.665 130.793 159.665 131.143C159.665 131.489 159.532 131.787 159.267 132.038C159.007 132.285 158.692 132.408 158.322 132.408ZM166.953 145.22C165.879 145.22 164.953 144.991 164.176 144.531C163.405 144.067 162.808 143.416 162.387 142.578C161.97 141.735 161.762 140.748 161.762 139.616C161.762 138.499 161.97 137.514 162.387 136.662C162.808 135.81 163.395 135.144 164.148 134.666C164.906 134.188 165.791 133.949 166.804 133.949C167.42 133.949 168.016 134.051 168.594 134.254C169.172 134.458 169.69 134.777 170.15 135.213C170.609 135.649 170.971 136.214 171.236 136.911C171.501 137.602 171.634 138.442 171.634 139.432V140.185H162.962V138.594H169.553C169.553 138.035 169.439 137.54 169.212 137.109C168.985 136.674 168.665 136.33 168.253 136.08C167.846 135.829 167.368 135.703 166.819 135.703C166.222 135.703 165.701 135.85 165.256 136.143C164.816 136.432 164.475 136.811 164.233 137.28C163.997 137.744 163.878 138.248 163.878 138.793V140.036C163.878 140.765 164.006 141.385 164.262 141.896C164.522 142.408 164.884 142.798 165.348 143.068C165.812 143.333 166.355 143.466 166.975 143.466C167.377 143.466 167.744 143.409 168.076 143.295C168.407 143.177 168.694 143.002 168.935 142.77C169.176 142.538 169.361 142.251 169.489 141.911L171.499 142.273C171.338 142.865 171.049 143.383 170.632 143.828C170.221 144.268 169.702 144.612 169.077 144.858C168.457 145.099 167.749 145.22 166.953 145.22ZM178.692 145.22C177.617 145.22 176.691 144.991 175.915 144.531C175.143 144.067 174.546 143.416 174.125 142.578C173.708 141.735 173.5 140.748 173.5 139.616C173.5 138.499 173.708 137.514 174.125 136.662C174.546 135.81 175.134 135.144 175.886 134.666C176.644 134.188 177.529 133.949 178.543 133.949C179.158 133.949 179.755 134.051 180.332 134.254C180.91 134.458 181.429 134.777 181.888 135.213C182.347 135.649 182.709 136.214 182.974 136.911C183.24 137.602 183.372 138.442 183.372 139.432V140.185H174.7V138.594H181.291C181.291 138.035 181.178 137.54 180.95 137.109C180.723 136.674 180.403 136.33 179.991 136.08C179.584 135.829 179.106 135.703 178.557 135.703C177.96 135.703 177.439 135.85 176.994 136.143C176.554 136.432 176.213 136.811 175.972 137.28C175.735 137.744 175.616 138.248 175.616 138.793V140.036C175.616 140.765 175.744 141.385 176 141.896C176.26 142.408 176.623 142.798 177.087 143.068C177.551 143.333 178.093 143.466 178.713 143.466C179.116 143.466 179.482 143.409 179.814 143.295C180.145 143.177 180.432 143.002 180.673 142.77C180.915 142.538 181.099 142.251 181.227 141.911L183.237 142.273C183.076 142.865 182.787 143.383 182.371 143.828C181.959 144.268 181.44 144.612 180.815 144.858C180.195 145.099 179.487 145.22 178.692 145.22ZM194.748 134.091L190.792 145H188.52L184.556 134.091H186.836L189.599 142.486H189.713L192.468 134.091H194.748ZM199.606 145.241C198.915 145.241 198.29 145.114 197.731 144.858C197.172 144.598 196.73 144.221 196.403 143.729C196.081 143.236 195.92 142.633 195.92 141.918C195.92 141.302 196.038 140.795 196.275 140.398C196.512 140 196.832 139.685 197.234 139.453C197.636 139.221 198.086 139.046 198.583 138.928C199.081 138.809 199.587 138.719 200.103 138.658C200.757 138.582 201.287 138.52 201.694 138.473C202.101 138.421 202.397 138.338 202.582 138.224C202.767 138.111 202.859 137.926 202.859 137.67V137.621C202.859 137 202.684 136.52 202.333 136.179C201.988 135.838 201.472 135.668 200.785 135.668C200.07 135.668 199.507 135.826 199.095 136.143C198.688 136.456 198.406 136.804 198.25 137.188L196.254 136.733C196.491 136.07 196.836 135.535 197.291 135.128C197.75 134.716 198.278 134.418 198.875 134.233C199.471 134.044 200.099 133.949 200.757 133.949C201.192 133.949 201.654 134.001 202.142 134.105C202.634 134.205 203.093 134.389 203.52 134.659C203.95 134.929 204.303 135.315 204.578 135.817C204.852 136.314 204.99 136.96 204.99 137.756V145H202.916V143.509H202.831C202.693 143.783 202.487 144.053 202.213 144.318C201.938 144.583 201.585 144.804 201.154 144.979C200.724 145.154 200.208 145.241 199.606 145.241ZM200.068 143.537C200.655 143.537 201.157 143.421 201.574 143.189C201.995 142.957 202.315 142.654 202.532 142.28C202.755 141.901 202.866 141.496 202.866 141.065V139.659C202.79 139.735 202.644 139.806 202.426 139.872C202.213 139.934 201.969 139.988 201.694 140.036C201.42 140.078 201.152 140.118 200.892 140.156C200.631 140.189 200.413 140.218 200.238 140.241C199.826 140.294 199.45 140.381 199.109 140.504C198.773 140.627 198.503 140.805 198.299 141.037C198.1 141.264 198.001 141.567 198.001 141.946C198.001 142.472 198.195 142.869 198.583 143.139C198.972 143.404 199.467 143.537 200.068 143.537Z", fill: "black" }), (0, K.jsx)("path", { d: "M46.3991 111V109.409L51.321 104.31C51.8466 103.756 52.2798 103.27 52.6207 102.854C52.9664 102.432 53.2244 102.032 53.3949 101.653C53.5653 101.275 53.6506 100.872 53.6506 100.446C53.6506 99.9631 53.5369 99.5464 53.3097 99.196C53.0824 98.8409 52.7723 98.5687 52.3793 98.3793C51.9863 98.1851 51.5436 98.0881 51.0511 98.0881C50.5303 98.0881 50.0758 98.1946 49.6875 98.4077C49.2992 98.6207 49.0009 98.9214 48.7926 99.3097C48.5843 99.6979 48.4801 100.152 48.4801 100.673H46.3849C46.3849 99.7879 46.5885 99.0137 46.9957 98.3509C47.4029 97.688 47.9616 97.1742 48.6719 96.8097C49.3821 96.4403 50.1894 96.2557 51.0938 96.2557C52.0076 96.2557 52.8125 96.438 53.5085 96.8026C54.2093 97.1624 54.7562 97.6548 55.1491 98.2798C55.5421 98.9001 55.7386 99.6009 55.7386 100.382C55.7386 100.922 55.6368 101.45 55.4332 101.966C55.2344 102.482 54.8864 103.057 54.3892 103.692C53.892 104.321 53.2008 105.086 52.3153 105.986L49.4247 109.011V109.118H55.973V111H46.3991ZM60.0923 111.135C59.7041 111.135 59.3703 110.998 59.0909 110.723C58.8116 110.444 58.6719 110.107 58.6719 109.714C58.6719 109.326 58.8116 108.995 59.0909 108.72C59.3703 108.441 59.7041 108.301 60.0923 108.301C60.4806 108.301 60.8144 108.441 61.0938 108.72C61.3731 108.995 61.5128 109.326 61.5128 109.714C61.5128 109.975 61.4465 110.214 61.3139 110.432C61.1861 110.645 61.0156 110.815 60.8026 110.943C60.5895 111.071 60.3527 111.135 60.0923 111.135Z", fill: "black" }), (0, K.jsx)("path", { d: "M52.4631 148.199C51.4877 148.199 50.6165 148.031 49.8494 147.695C49.0871 147.358 48.4834 146.892 48.0384 146.295C47.598 145.694 47.3613 144.998 47.3281 144.207H49.5582C49.5866 144.638 49.7311 145.012 49.9915 145.33C50.2566 145.642 50.6023 145.884 51.0284 146.054C51.4545 146.224 51.928 146.31 52.4489 146.31C53.0218 146.31 53.5284 146.21 53.9688 146.011C54.4138 145.812 54.7618 145.536 55.0128 145.18C55.2637 144.821 55.3892 144.406 55.3892 143.938C55.3892 143.45 55.2637 143.021 55.0128 142.652C54.7666 142.278 54.4044 141.984 53.9261 141.771C53.4527 141.558 52.8797 141.452 52.2074 141.452H50.9787V139.662H52.2074C52.7472 139.662 53.2206 139.565 53.6278 139.371C54.0398 139.177 54.3617 138.907 54.5938 138.561C54.8258 138.211 54.9418 137.801 54.9418 137.332C54.9418 136.883 54.84 136.492 54.6364 136.161C54.4375 135.824 54.1534 135.562 53.7841 135.372C53.4195 135.183 52.9886 135.088 52.4915 135.088C52.018 135.088 51.5753 135.176 51.1634 135.351C50.7562 135.521 50.4247 135.768 50.169 136.089C49.9134 136.407 49.776 136.788 49.7571 137.233H47.6335C47.6572 136.447 47.8892 135.756 48.3295 135.159C48.7746 134.562 49.3617 134.096 50.0909 133.76C50.8201 133.424 51.6297 133.256 52.5199 133.256C53.4527 133.256 54.2576 133.438 54.9347 133.803C55.6165 134.162 56.142 134.643 56.5114 135.244C56.8854 135.846 57.0701 136.504 57.0653 137.219C57.0701 138.033 56.8428 138.724 56.3835 139.293C55.929 139.861 55.3229 140.242 54.5653 140.436V140.55C55.5313 140.696 56.2794 141.08 56.8097 141.7C57.3447 142.321 57.6098 143.09 57.6051 144.009C57.6098 144.809 57.3873 145.526 56.9375 146.161C56.4924 146.795 55.884 147.295 55.1122 147.659C54.3404 148.019 53.4574 148.199 52.4631 148.199ZM61.2876 148.135C60.8994 148.135 60.5656 147.998 60.2862 147.723C60.0069 147.444 59.8672 147.107 59.8672 146.714C59.8672 146.326 60.0069 145.995 60.2862 145.72C60.5656 145.441 60.8994 145.301 61.2876 145.301C61.6759 145.301 62.0097 145.441 62.2891 145.72C62.5684 145.995 62.7081 146.326 62.7081 146.714C62.7081 146.975 62.6418 147.214 62.5092 147.432C62.3814 147.645 62.2109 147.815 61.9979 147.943C61.7848 148.071 61.5481 148.135 61.2876 148.135Z", fill: "black" }), (0, K.jsx)("path", { d: "M247.021 137.845C247.021 137.063 246.071 136.43 244.894 136.43C243.717 136.43 242.766 137.063 242.766 137.845V139.26V152.702V157.655C242.766 158.437 243.717 159.07 244.894 159.07C246.071 159.07 247.021 158.437 247.021 157.655V151.995L251.297 151.283C254.029 150.827 256.922 151.04 259.442 151.875C262.38 152.853 265.791 152.972 268.863 152.203L271.17 151.628C272.001 151.42 272.553 150.894 272.553 150.301V139.353C272.553 138.336 270.944 137.673 269.575 138.128L268.936 138.341C265.858 139.366 262.234 139.366 259.156 138.341C256.822 137.562 254.142 137.368 251.609 137.788L247.021 138.553V137.845Z", fill: "#59478C" }), (0, K.jsx)("path", { d: "M255.053 95.9185C256.021 95.9185 256.803 96.5674 256.803 97.3706V100.275H263.366C265.542 100.275 267.303 101.736 267.303 103.542V115.886C267.303 117.692 265.542 119.153 263.366 119.153H246.741C244.564 119.153 242.803 117.692 242.803 115.886V103.542C242.803 101.736 244.564 100.275 246.741 100.275H253.303V97.3706C253.303 96.5674 254.085 95.9185 255.053 95.9185ZM248.928 113.345C248.447 113.345 248.053 113.671 248.053 114.071C248.053 114.47 248.447 114.797 248.928 114.797H250.678C251.159 114.797 251.553 114.47 251.553 114.071C251.553 113.671 251.159 113.345 250.678 113.345H248.928ZM254.178 113.345C253.697 113.345 253.303 113.671 253.303 114.071C253.303 114.47 253.697 114.797 254.178 114.797H255.928C256.409 114.797 256.803 114.47 256.803 114.071C256.803 113.671 256.409 113.345 255.928 113.345H254.178ZM259.428 113.345C258.947 113.345 258.553 113.671 258.553 114.071C258.553 114.47 258.947 114.797 259.428 114.797H261.178C261.659 114.797 262.053 114.47 262.053 114.071C262.053 113.671 261.659 113.345 261.178 113.345H259.428ZM251.991 107.536C251.991 107.054 251.76 106.593 251.35 106.252C250.94 105.912 250.383 105.721 249.803 105.721C249.223 105.721 248.667 105.912 248.256 106.252C247.846 106.593 247.616 107.054 247.616 107.536C247.616 108.017 247.846 108.479 248.256 108.819C248.667 109.16 249.223 109.351 249.803 109.351C250.383 109.351 250.94 109.16 251.35 108.819C251.76 108.479 251.991 108.017 251.991 107.536ZM260.303 109.351C260.883 109.351 261.44 109.16 261.85 108.819C262.26 108.479 262.491 108.017 262.491 107.536C262.491 107.054 262.26 106.593 261.85 106.252C261.44 105.912 260.883 105.721 260.303 105.721C259.723 105.721 259.167 105.912 258.756 106.252C258.346 106.593 258.116 107.054 258.116 107.536C258.116 108.017 258.346 108.479 258.756 108.819C259.167 109.16 259.723 109.351 260.303 109.351ZM240.178 106.084H241.053V114.797H240.178C238.729 114.797 237.553 113.821 237.553 112.619V108.262C237.553 107.059 238.729 106.084 240.178 106.084ZM269.928 106.084C271.377 106.084 272.553 107.059 272.553 108.262V112.619C272.553 113.821 271.377 114.797 269.928 114.797H269.053V106.084H269.928Z", fill: "#B53333" }), (0, K.jsx)("path", { d: "M258.241 63.8351C253.554 63.8351 249.589 66.3002 248.241 69.6987C250.245 68.885 252.505 68.4302 254.902 68.4302H260.15C260.674 68.4302 261.104 68.7749 261.104 69.1961C261.104 69.6173 260.674 69.9619 260.15 69.9619H259.195H254.902C253.912 69.9619 252.952 70.0529 252.028 70.2204C250.483 70.5028 249.046 71.0054 247.77 71.6899C244.305 73.5423 242.021 76.7063 242.021 80.301V81.0669C242.021 81.7035 242.659 82.2156 243.452 82.2156C244.246 82.2156 244.884 81.7035 244.884 81.0669V80.301C244.884 77.9699 246.118 75.8734 248.092 74.4039C249.273 78.0178 253.369 80.6839 258.241 80.6839H258.301C266.178 80.6504 272.553 74.4183 272.553 66.7358C272.553 64.6967 272.106 62.7581 271.295 61.011C271.14 60.6807 270.538 60.6951 270.329 61.0062C269.208 62.6911 266.989 63.8351 264.443 63.8351H258.241Z", fill: "#49923D" }), (0, K.jsx)("path", { d: "M351.009 3.81818L353.842 12.1108H353.957L356.79 3.81818H358.451L354.787 14H353.012L349.348 3.81818H351.009ZM359.921 3.81818H361.786L365.027 11.733H365.146L368.388 3.81818H370.252V14H368.791V6.6321H368.696L365.693 13.9851H364.48L361.477 6.62713H361.383V14H359.921V3.81818ZM378.039 6.4929C377.986 6.02225 377.767 5.65767 377.383 5.39915C376.998 5.13731 376.514 5.00639 375.931 5.00639C375.513 5.00639 375.152 5.07268 374.847 5.20526C374.542 5.33452 374.305 5.51349 374.136 5.74219C373.971 5.96757 373.888 6.22443 373.888 6.51278C373.888 6.75473 373.944 6.96354 374.057 7.1392C374.173 7.31487 374.324 7.46236 374.509 7.58168C374.698 7.69768 374.9 7.79545 375.116 7.875C375.331 7.95123 375.538 8.0142 375.737 8.06392L376.732 8.32244C377.056 8.40199 377.389 8.50971 377.731 8.6456C378.072 8.78149 378.389 8.96046 378.68 9.18253C378.972 9.40459 379.207 9.67969 379.386 10.0078C379.569 10.3359 379.66 10.7287 379.66 11.1861C379.66 11.7628 379.511 12.2749 379.212 12.7223C378.917 13.1697 378.488 13.5227 377.925 13.7812C377.365 14.0398 376.687 14.169 375.891 14.169C375.129 14.169 374.469 14.0481 373.913 13.8061C373.356 13.5642 372.92 13.2211 372.605 12.777C372.29 12.3295 372.116 11.7992 372.083 11.1861H373.624C373.654 11.554 373.773 11.8606 373.982 12.1058C374.194 12.3478 374.464 12.5284 374.793 12.6477C375.124 12.7637 375.487 12.8217 375.881 12.8217C376.316 12.8217 376.702 12.7538 377.04 12.6179C377.381 12.4787 377.65 12.2865 377.845 12.0412C378.041 11.7926 378.138 11.5026 378.138 11.1712C378.138 10.8696 378.052 10.6226 377.88 10.4304C377.711 10.2382 377.481 10.0791 377.189 9.95312C376.901 9.82718 376.574 9.71615 376.21 9.62003L375.006 9.2919C374.191 9.06984 373.545 8.74337 373.067 8.3125C372.594 7.88163 372.357 7.31155 372.357 6.60227C372.357 6.01562 372.516 5.50355 372.834 5.06605C373.152 4.62855 373.583 4.28883 374.126 4.04688C374.67 3.80161 375.283 3.67898 375.966 3.67898C376.655 3.67898 377.263 3.79995 377.79 4.0419C378.321 4.28385 378.738 4.61695 379.043 5.04119C379.348 5.46212 379.507 5.94602 379.521 6.4929H378.039ZM389.714 3.81818V14H388.302L383.126 6.53267H383.032V14H381.496V3.81818H382.917L388.098 11.2955H388.192V3.81818H389.714ZM391.602 12.0114V10.7685L396.001 3.81818H396.981V5.64773H396.359L393.212 10.6293V10.7088H399.243V12.0114H391.602ZM396.429 14V11.6335L396.439 11.0668V3.81818H397.896V14H396.429ZM404.52 14.1392C403.837 14.1392 403.228 14.0215 402.691 13.7862C402.157 13.5509 401.734 13.2244 401.423 12.8068C401.115 12.3859 400.949 11.8987 400.926 11.3452H402.487C402.507 11.6468 402.608 11.9086 402.79 12.1307C402.976 12.3494 403.218 12.5185 403.516 12.6378C403.814 12.7571 404.146 12.8168 404.51 12.8168C404.911 12.8168 405.266 12.7472 405.574 12.608C405.886 12.4687 406.129 12.2749 406.305 12.0263C406.481 11.7744 406.569 11.4844 406.569 11.1562C406.569 10.8149 406.481 10.5149 406.305 10.2564C406.133 9.99455 405.879 9.78906 405.544 9.63991C405.213 9.49077 404.812 9.41619 404.341 9.41619H403.481V8.16335H404.341C404.719 8.16335 405.051 8.09541 405.336 7.95952C405.624 7.82363 405.849 7.63471 406.012 7.39276C406.174 7.14749 406.255 6.8608 406.255 6.53267C406.255 6.2178 406.184 5.94437 406.042 5.71236C405.902 5.47704 405.703 5.29309 405.445 5.16051C405.19 5.02794 404.888 4.96165 404.54 4.96165C404.209 4.96165 403.899 5.02296 403.61 5.1456C403.325 5.26491 403.093 5.43726 402.914 5.66264C402.735 5.88471 402.639 6.15151 402.626 6.46307H401.14C401.156 5.91288 401.319 5.42898 401.627 5.01136C401.938 4.59375 402.349 4.26728 402.86 4.03196C403.37 3.79664 403.937 3.67898 404.56 3.67898C405.213 3.67898 405.776 3.80658 406.25 4.06179C406.728 4.31368 407.096 4.65009 407.354 5.07102C407.616 5.49195 407.745 5.95265 407.742 6.45312C407.745 7.0232 407.586 7.5071 407.265 7.90483C406.946 8.30256 406.522 8.56937 405.992 8.70526V8.7848C406.668 8.88755 407.192 9.15601 407.563 9.5902C407.937 10.0244 408.123 10.563 408.12 11.206C408.123 11.7661 407.967 12.2682 407.652 12.7124C407.341 13.1565 406.915 13.5062 406.375 13.7614C405.834 14.0133 405.216 14.1392 404.52 14.1392ZM409.999 14V12.8864L413.444 9.31676C413.812 8.92898 414.115 8.58925 414.354 8.29759C414.596 8.0026 414.777 7.72254 414.896 7.45739C415.015 7.19223 415.075 6.91051 415.075 6.61222C415.075 6.27415 414.995 5.98248 414.836 5.73722C414.677 5.48864 414.46 5.29806 414.185 5.16548C413.91 5.02959 413.6 4.96165 413.255 4.96165C412.891 4.96165 412.573 5.03622 412.301 5.18537C412.029 5.33452 411.82 5.54498 411.674 5.81676C411.529 6.08854 411.456 6.40672 411.456 6.77131H409.989C409.989 6.15151 410.132 5.60961 410.417 5.1456C410.702 4.68158 411.093 4.32197 411.59 4.06676C412.087 3.80824 412.652 3.67898 413.285 3.67898C413.925 3.67898 414.488 3.80658 414.975 4.06179C415.466 4.31368 415.849 4.65838 416.124 5.09588C416.399 5.53007 416.537 6.0206 416.537 6.56747C416.537 6.94531 416.465 7.31487 416.323 7.67614C416.184 8.0374 415.94 8.4401 415.592 8.88423C415.244 9.32505 414.76 9.86032 414.14 10.4901L412.117 12.608V12.6825H416.701V14H409.999ZM422.448 3.81818V14H420.907V5.35938H420.847L418.411 6.95028V5.47869L420.951 3.81818H422.448Z", fill: "white" }), (0, K.jsx)("path", { d: "M50.9176 64.4545V79H48.7159V66.6562H48.6307L45.1506 68.929V66.8267L48.7798 64.4545H50.9176ZM55.44 79.1349C55.0517 79.1349 54.7179 78.9976 54.4386 78.723C54.1592 78.4437 54.0195 78.1075 54.0195 77.7145C54.0195 77.3262 54.1592 76.9948 54.4386 76.7202C54.7179 76.4408 55.0517 76.3011 55.44 76.3011C55.8282 76.3011 56.1621 76.4408 56.4414 76.7202C56.7208 76.9948 56.8604 77.3262 56.8604 77.7145C56.8604 77.9749 56.7942 78.214 56.6616 78.4318C56.5337 78.6449 56.3633 78.8153 56.1502 78.9432C55.9371 79.071 55.7004 79.1349 55.44 79.1349Z", fill: "black" })] }), (0, K.jsxs)("defs", { children: [(0, K.jsxs)("filter", { id: "filter0_d_40_7", x: "-4.11267", y: "-0.708252", width: "463.324", height: "600.59", filterUnits: "userSpaceOnUse", "color-interpolation-filters": "sRGB", children: [(0, K.jsx)("feFlood", { "flood-opacity": "0", result: "BackgroundImageFix" }), (0, K.jsx)("feColorMatrix", { in: "SourceAlpha", type: "matrix", values: "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0", result: "hardAlpha" }), (0, K.jsx)("feOffset", { dy: "4" }), (0, K.jsx)("feGaussianBlur", { stdDeviation: "2" }), (0, K.jsx)("feComposite", { in2: "hardAlpha", operator: "out" }), (0, K.jsx)("feColorMatrix", { type: "matrix", values: "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" }), (0, K.jsx)("feBlend", { mode: "normal", in2: "BackgroundImageFix", result: "effect1_dropShadow_40_7" }), (0, K.jsx)("feBlend", { mode: "normal", in: "SourceGraphic", in2: "effect1_dropShadow_40_7", result: "shape" })] }), (0, K.jsx)("clipPath", { id: "clip0_40_7", children: (0, K.jsx)("rect", { width: "455", height: "591", fill: "white" }) })] })] }) }) }, jS = function (e) { var t = Je((function (e) { return e.BlockChainReducer })).candidatesList; return console.log(t[2]), (0, K.jsx)("center", { children: (0, K.jsxs)("div", { children: [t[2].verified ? (0, K.jsx)(OS, {}) : (0, K.jsx)(JS, {}), (0, K.jsx)("div", { className: "next-button", children: (0, K.jsx)("button", { style: { borderColor: "#22eff1", marginTop: "-10%" }, type: "button", className: "btn btn-outline-light details-btn", onClick: function () { e.onCloseClick(), e.onStepChange(), e.onActiveAccordionChange() }, children: "Close" }) })] }) }) }, QS = function (e) { var n = (0, t.useState)(!1), i = (0, r.Z)(n, 2), a = i[0], o = i[1], s = (0, t.useState)(!1), l = (0, r.Z)(s, 2), g = l[0], c = l[1], u = (0, t.useState)(""), C = (0, r.Z)(u, 2), d = C[0], I = C[1], h = (0, t.useState)(""), A = (0, r.Z)(h, 2), p = A[0], f = A[1], m = (0, t.useState)(""), v = (0, r.Z)(m, 2), b = v[0], y = v[1]; return (0, K.jsxs)(K.Fragment, { children: [(0, K.jsx)("div", {}), (0, K.jsxs)("center", { children: [(0, K.jsx)("h5", { style: { color: "white" }, children: "Vote Count Verification" }), (0, K.jsx)(Ge, { onClick: function () { I("VMSN4321") }, children: "Get Serial Number" }), (0, K.jsxs)("div", { className: "input-group mb-3", children: [(0, K.jsx)("input", { type: "text", className: "form-control vote-ip", placeholder: "Serial No", value: d, onChange: function (e) { return I(e.target.value) }, "aria-label": "Serial Number", "aria-describedby": "button-addon2" }), (0, K.jsx)("button", { className: "btn btn-outline-secondary ", type: "button", id: "button-addon2", onClick: function (e) { e.preventDefault(), "VMSN4321" === d ? (o(!0), y("")) : (y("Invalid Serial Number. Please check and try again."), o(!1)) }, children: "Count" })] }), b && (0, K.jsx)("div", { style: { color: "red" }, children: b }), a && (0, K.jsxs)("div", { className: "vote", children: [(0, K.jsx)("h6", { style: { padding: "5px" }, children: "Initial Count" }), (0, K.jsx)("p", { children: "Amit Trived:100" }), (0, K.jsx)("p", { children: "Vikram Patel:123" }), (0, K.jsx)("p", { children: "Geetha Jeeva:88" })] }), (0, K.jsx)(Ge, { onClick: function () { f("VMSN4321") }, children: "Get Serial Number" }), (0, K.jsxs)("div", { className: "input-group mb-3", children: [(0, K.jsx)("input", { type: "text", className: "form-control vote-ip", placeholder: "Serial Number", value: p, onChange: function (e) { return f(e.target.value) }, "aria-label": "Re-enter Serial Number", "aria-describedby": "button-addon3" }), (0, K.jsx)("button", { className: "btn btn-outline-secondary", type: "button", id: "button-addon3", onClick: function (e) { e.preventDefault(), "VMSN4321" === p ? (c(!0), y("")) : (y("Invalid Serial Number. Please check and try again."), c(!1)) }, children: "Re-Count" })] }), g && (0, K.jsxs)(K.Fragment, { children: [(0, K.jsxs)("div", { className: "vote", children: [(0, K.jsx)("h6", { style: { padding: "5px" }, children: "Re Count" }), (0, K.jsx)("p", { children: "Amit Trived:100" }), (0, K.jsx)("p", { children: "Vikram Patel:123" }), (0, K.jsx)("p", { children: "Geetha Jeeva:88" })] }), (0, K.jsx)("h6", { style: { color: "green", marginTop: "3%" }, children: "Vote Count Verified" })] })] }), (0, K.jsx)("div", { className: "next-button", children: (0, K.jsx)("button", { style: { borderColor: "#22eff1" }, type: "button", className: "btn btn-outline-light details-btn", onClick: function () { e.onCloseClick(), e.onStepChange(), e.onActiveAccordionChange() }, children: "Close" }) })] }) }; var qS = function (e) { var n = e.onSuccessfulLogin, i = (0, t.useState)(""), a = (0, r.Z)(i, 2), o = a[0], s = a[1], l = (0, t.useState)(""), g = (0, r.Z)(l, 2), c = g[0], u = g[1], C = (0, t.useState)(""), d = (0, r.Z)(C, 2), I = d[0], h = d[1]; return (0, K.jsxs)("div", { className: "login-container", children: [(0, K.jsxs)("form", { onSubmit: function (e) { e.preventDefault(); /^[A-Za-z]{4}\d{6}$/.test(c) ? (h(""), n()) : h("Invalid Voter ID. ID Should Start With 4 Letters Followed With 6 Numbers.") }, children: [(0, K.jsxs)("div", { className: "form-group", children: [(0, K.jsx)("label", { children: "Authority Name:" }), (0, K.jsx)("input", { type: "text", className: "form-control", placeholder: "Enter Name", value: o, onChange: function (e) { s(e.target.value) }, required: !0 })] }), (0, K.jsxs)("div", { className: "form-group", children: [(0, K.jsx)("label", { children: "Reg ID:" }), (0, K.jsx)("input", { type: "text", className: "form-control", placeholder: "E.g; ABXD123456", value: c, onChange: function (e) { u(e.target.value) }, required: !0 })] }), (0, K.jsx)("center", { children: (0, K.jsx)("button", { type: "submit", className: "btn btn-primary", children: "Verify" }) })] }), I && (0, K.jsx)("div", { className: "alert alert-danger mt-3", children: I })] }) }, $S = function (e) { var t = e.onSubmitClick, n = Je((function (e) { return e.BlockChainReducer })).candidatesList, i = rt(), r = ["Resident of the State", "Minimum Age Requirement", "No Criminal Record", "Completed Education", "Pays Taxes"]; return (0, K.jsxs)(K.Fragment, { children: [(0, K.jsxs)("div", { style: { color: "white" }, children: [(0, K.jsx)("h3", { children: "Candidates Verification" }), n.map((function (e, t) { return (0, K.jsxs)("div", { children: [(0, K.jsx)("h4", { children: e.name }), t > 1 && e.checks.map((function (t, n) { return (0, K.jsx)("div", { children: (0, K.jsxs)("label", { children: [(0, K.jsx)("input", { style: { marginRight: "20px" }, type: "checkbox", checked: t, onChange: function () { return t = e.id, void i(ri({ candidateId: t, checkIndex: n })); var t } }), r[n]] }) }, n) })), (0, K.jsx)("div", { children: t < 2 || e.verified ? (0, K.jsx)("span", { style: { color: "green" }, children: "Verified" }) : (0, K.jsx)("span", { style: { color: "red" }, children: "Not Verified" }) }), (0, K.jsx)("hr", {})] }, e.id) }))] }), (0, K.jsx)("button", { type: "submit", className: "btn btn-primary", onClick: t, children: "Submit" })] }) }, eR = function (e) { var t = Je((function (e) { return e.BlockChainReducer })).candidatesList; return console.log(t), (0, K.jsxs)("div", { style: { color: "white", marginLeft: "20px" }, children: [(0, K.jsx)("h4", { children: "Candidate verificarion Status" }), t.map((function (e) { return (0, K.jsxs)("div", { children: [(0, K.jsx)("p", { children: e.name }), (0, K.jsx)("p", { children: e.verified ? (0, K.jsx)("span", { style: { color: "green" }, children: "Candidate is verified for the election process" }) : (0, K.jsx)("span", { style: { color: "red" }, children: "Candidate is not verified for the election process" }) })] }, e.id) })), (0, K.jsx)("div", { className: "next-button", children: (0, K.jsx)("button", { style: { borderColor: "#22eff1", marginRight: "10%" }, type: "button", className: "btn btn-outline-light details-btn", onClick: function () { e.onCloseClick(), e.onStepChange(), e.onActiveAccordionChange() }, children: "Close" }) }), (0, K.jsx)("a", { style: { color: "#007bff" }, onClick: e.onAuthorityLoginClick, className: "authority-login-link", children: "Login as Authority" })] }) }, tR = (n(9803), function (e) { var n = e.title, i = e.text, a = e.time, o = (0, t.useState)(!1), s = (0, r.Z)(o, 2), l = (s[0], s[1]), g = (rt(), Je((function (e) { return e.BlockChainReducer }))); g.ifClickLeft, g.userIntract; return (0, t.useEffect)((function () { var e = setTimeout((function () { l(!0) }), a); return function () { clearTimeout(e) } }), []), (0, K.jsxs)("div", { style: { color: "white" }, children: [(0, K.jsx)("h5", { style: { marginLeft: 20 }, children: n }), (0, K.jsx)("div", { style: { marginTop: "35px", marginBottom: "30px" }, children: (0, K.jsx)("ul", { children: i.map((function (e, t) { return (0, K.jsx)("li", { children: e }, t) })) }) })] }) }); function nR(e) { var t, n = e.activeIndex, i = (t = { background: "Gray", borderColor: "#22eff1", borderWidth: "1px", borderStyle: "solid", borderRadius: "30px", marginTop: "5%", color: "white", height: "45px", display: "flex", width: "500px" }, (0, l.Z)(t, "display", "flex"), (0, l.Z)(t, "padding", "20px"), t), r = ln(ln({}, i), {}, { background: "Green" }); return (0, K.jsx)("div", { children: [{ title: "1.StakeHolder Influence" }, { title: "2.Incentivizing Participation" }, { title: "3.Avoiding Concentration of Power" }, { title: "4.Validation and Verification" }, { title: "5.Security and Trust" }].map((function (e, t) { return (0, K.jsx)(Ui, { style: t === n ? r : i, disabled: !0, children: (0, K.jsx)(He, { style: { display: "flex", alignItems: "center" }, children: e.title }) }, t) })) }) } var iR = n.p + "images/step1.d47898d4c5d82d956ea8f3e3edba827f.svg"; function rR(e) { return (0, ae.Z)("MuiCircularProgress", e) } (0, z.Z)("MuiCircularProgress", ["root", "determinate", "indeterminate", "colorPrimary", "colorSecondary", "svg", "circle", "circleDeterminate", "circleIndeterminate", "circleDisableShrink"]); var aR, oR, sR, lR, gR, cR, uR, CR, dR = ["className", "color", "disableShrink", "size", "style", "thickness", "value", "variant"], IR = 44, hR = Y(gR || (gR = aR || (aR = b(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))), AR = Y(cR || (cR = oR || (oR = b(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))), pR = (0, h.ZP)("span", { name: "MuiCircularProgress", slot: "Root", overridesResolver: function (e, t) { var n = e.ownerState; return [t.root, t[n.variant], t["color".concat((0, de.Z)(n.color))]] } })((function (e) { var t = e.ownerState, n = e.theme; return (0, c.Z)({ display: "inline-block" }, "determinate" === t.variant && { transition: n.transitions.create("transform") }, "inherit" !== t.color && { color: (n.vars || n).palette[t.color].main }) }), (function (e) { return "indeterminate" === e.ownerState.variant && X(uR || (uR = sR || (sR = b(["\n      animation: ", " 1.4s linear infinite;\n    "]))), hR) })), fR = (0, h.ZP)("svg", { name: "MuiCircularProgress", slot: "Svg", overridesResolver: function (e, t) { return t.svg } })({ display: "block" }), mR = (0, h.ZP)("circle", { name: "MuiCircularProgress", slot: "Circle", overridesResolver: function (e, t) { var n = e.ownerState; return [t.circle, t["circle".concat((0, de.Z)(n.variant))], n.disableShrink && t.circleDisableShrink] } })((function (e) { var t = e.ownerState, n = e.theme; return (0, c.Z)({ stroke: "currentColor" }, "determinate" === t.variant && { transition: n.transitions.create("stroke-dashoffset") }, "indeterminate" === t.variant && { strokeDasharray: "80px, 200px", strokeDashoffset: 0 }) }), (function (e) { var t = e.ownerState; return "indeterminate" === t.variant && !t.disableShrink && X(CR || (CR = lR || (lR = b(["\n      animation: ", " 1.4s ease-in-out infinite;\n    "]))), AR) })), vR = t.forwardRef((function (e, t) { var n = (0, A.Z)({ props: e, name: "MuiCircularProgress" }), i = n.className, r = n.color, a = void 0 === r ? "primary" : r, o = n.disableShrink, s = void 0 !== o && o, l = n.size, C = void 0 === l ? 40 : l, I = n.style, h = n.thickness, p = void 0 === h ? 3.6 : h, f = n.value, m = void 0 === f ? 0 : f, v = n.variant, b = void 0 === v ? "indeterminate" : v, y = (0, g.Z)(n, dR), G = (0, c.Z)({}, n, { color: a, disableShrink: s, size: C, thickness: p, value: m, variant: b }), B = function (e) { var t = e.classes, n = e.variant, i = e.color, r = e.disableShrink, a = { root: ["root", n, "color".concat((0, de.Z)(i))], svg: ["svg"], circle: ["circle", "circle".concat((0, de.Z)(n)), r && "circleDisableShrink"] }; return (0, d.Z)(a, rR, t) }(G), Z = {}, w = {}, S = {}; if ("determinate" === b) { var R = 2 * Math.PI * ((IR - p) / 2); Z.strokeDasharray = R.toFixed(3), S["aria-valuenow"] = Math.round(m), Z.strokeDashoffset = "".concat(((100 - m) / 100 * R).toFixed(3), "px"), w.transform = "rotate(-90deg)" } return (0, K.jsx)(pR, (0, c.Z)({ className: (0, u.Z)(B.root, i), style: (0, c.Z)({ width: C, height: C }, w, I), ownerState: G, ref: t, role: "progressbar" }, S, y, { children: (0, K.jsx)(fR, { className: B.svg, ownerState: G, viewBox: "".concat(22, " ").concat(22, " ").concat(IR, " ").concat(IR), children: (0, K.jsx)(mR, { className: B.circle, style: Z, ownerState: G, cx: IR, cy: IR, r: (IR - p) / 2, fill: "none", strokeWidth: p }) }) })) })), bR = vR, yR = function (e) { var n = e.onContinueClick, i = (0, t.useState)(!1), a = (0, r.Z)(i, 2), o = (a[0], a[1]), s = (0, t.useState)(!0), l = (0, r.Z)(s, 2), g = l[0], c = l[1], u = (0, t.useState)(!0), C = (0, r.Z)(u, 2), d = C[0], I = C[1]; (0, t.useEffect)((function () { var e = setTimeout((function () { I(!1), o(!0) }), 1e3); return function () { clearTimeout(e) } }), []); var h = (0, t.useState)(!1), A = (0, r.Z)(h, 2); A[0], A[1]; return (0, K.jsxs)(K.Fragment, { children: [(0, K.jsxs)("div", { className: "row", children: [(0, K.jsx)("div", { className: "col-md-4", children: d ? (0, K.jsx)(bR, { style: { color: "white" } }) : (0, K.jsxs)(K.Fragment, { children: [(0, K.jsx)("div", { className: "info-message", children: (0, K.jsx)("p", { style: { color: "yellow", paddingTop: "20px" }, children: (0, K.jsx)("ul", { children: (0, K.jsx)("li", { children: 'Validators are chosen to create new blocks and validate transactions based on the amount of cryptocurrency they hold or "stake" in the network.' }) }) }) }), (0, K.jsxs)("div", { className: "color-indicate", style: { height: "200px" }, children: [(0, K.jsxs)("div", { class: "container", children: [" ", (0, K.jsx)("div", { class: "box square1" }), (0, K.jsx)("div", { class: "label", children: "Active" })] }), (0, K.jsxs)("div", { class: "container", children: [" ", (0, K.jsx)("div", { class: "box square2" }), (0, K.jsx)("div", { class: "label", children: "Visited" })] }), (0, K.jsxs)("div", { class: "container", children: [" ", (0, K.jsx)("div", { class: "box square3" }), (0, K.jsx)("div", { class: "label", children: "Not valid" })] })] })] }) }), (0, K.jsxs)("div", { className: "col-md-8", children: [(0, K.jsx)("h4", { style: { textAlign: "start", color: "white" }, children: "1. StakeHolder Influence" }), (0, K.jsx)("div", { style: { marginTop: "-110px", marginLeft: "-210px" }, children: (0, K.jsx)("img", { src: iR, alt: "" }) }), (0, K.jsx)("div", { className: "continue", style: { marginTop: "-160px", marginLeft: "450px" }, children: g && (0, K.jsxs)(K.Fragment, { children: [(0, K.jsxs)("span", { children: [(0, K.jsx)("p", { style: { display: "inline-block", marginRight: "20px", color: "white" }, children: "Let's Start" }), (0, K.jsx)("i", { className: "fa-solid fa-arrow-right fa-beat-fade fa-2xl", style: { color: "#1adbce", display: "inline-block" } })] }), (0, K.jsx)("span", { children: (0, K.jsx)(Ge, { style: { borderColor: " #22eff1", color: "white", marginLeft: "10px" }, variant: "outlined", onClick: function () { o(!1), c(!1), n() }, children: "Start" }) })] }) })] })] }), (0, K.jsx)("center", {})] }) }, GR = function (e) { var n = e.onContinueClick, i = (0, t.useState)(!1), a = (0, r.Z)(i, 2), o = (a[0], a[1]), s = (0, t.useState)(!0), l = (0, r.Z)(s, 2), g = l[0], c = l[1], u = (0, t.useState)(!0), C = (0, r.Z)(u, 2), d = C[0], I = C[1]; (0, t.useEffect)((function () { var e = setTimeout((function () { I(!1), o(!0) }), 1e3); return function () { clearTimeout(e) } }), []); var h = (0, t.useState)(!1), A = (0, r.Z)(h, 2); A[0], A[1]; return (0, K.jsxs)(K.Fragment, { children: [(0, K.jsxs)("div", { className: "row", children: [(0, K.jsx)("div", { className: "col-md-4", children: d ? (0, K.jsx)(bR, { style: { color: "white" } }) : (0, K.jsxs)(K.Fragment, { children: [(0, K.jsx)("div", { className: "info-message", children: (0, K.jsx)("p", { style: { color: "yellow", paddingTop: "20px" }, children: (0, K.jsx)("ul", { children: (0, K.jsxs)("li", { children: [" ", "Validators are incentivized to act honestly and in the best interest of the network, as their stakes are at risk."] }) }) }) }), (0, K.jsxs)("div", { className: "color-indicate", style: { height: "200px" }, children: [(0, K.jsxs)("div", { div: !0, class: "container", children: [" ", (0, K.jsx)("div", { class: "box square1" }), (0, K.jsx)("div", { class: "label", children: "Active" })] }), (0, K.jsxs)("div", { div: !0, class: "container", children: [" ", (0, K.jsx)("div", { class: "box square2" }), (0, K.jsx)("div", { class: "label", children: "Visited" })] }), (0, K.jsxs)("div", { div: !0, class: "container", children: [" ", (0, K.jsx)("div", { class: "box square3" }), (0, K.jsx)("div", { class: "label", children: "Not valid" })] })] })] }) }), (0, K.jsxs)("div", { className: "col-md-8", children: [(0, K.jsx)("h4", { style: { textAlign: "start", color: "white" }, children: "2. Incentivizing Participation" }), (0, K.jsx)("div", { style: { marginTop: "-110px", marginLeft: "-210px" }, children: (0, K.jsx)("img", { src: iR, alt: "" }) }), (0, K.jsx)("div", { className: "continue", style: { marginTop: "-160px", marginLeft: "450px" }, children: g && (0, K.jsxs)(K.Fragment, { children: [(0, K.jsxs)("span", { children: [(0, K.jsx)("p", { style: { display: "inline-block", marginRight: "20px", color: "white" }, children: "Click here to Continue" }), (0, K.jsx)("i", { className: "fa-solid fa-arrow-right fa-beat-fade fa-2xl", style: { color: "#1adbce", display: "inline-block" } })] }), (0, K.jsx)("span", { children: (0, K.jsx)(Ge, { style: { borderColor: " #22eff1", color: "white", marginLeft: "10px" }, variant: "outlined", onClick: function () { o(!1), c(!1), n() }, children: "Continue" }) })] }) })] })] }), (0, K.jsx)("center", {})] }) }, BR = function (e) { var n = e.onContinueClick, i = (0, t.useState)(!1), a = (0, r.Z)(i, 2), o = (a[0], a[1]), s = (0, t.useState)(!0), l = (0, r.Z)(s, 2), g = l[0], c = l[1], u = (0, t.useState)(!0), C = (0, r.Z)(u, 2), d = C[0], I = C[1]; (0, t.useEffect)((function () { var e = setTimeout((function () { I(!1), o(!0) }), 1e3); return function () { clearTimeout(e) } }), []); var h = (0, t.useState)(!1), A = (0, r.Z)(h, 2); A[0], A[1]; return (0, K.jsxs)(K.Fragment, { children: [(0, K.jsxs)("div", { className: "row", children: [(0, K.jsx)("div", { className: "col-md-4", children: d ? (0, K.jsx)(bR, { style: { color: "white" } }) : (0, K.jsxs)(K.Fragment, { children: [(0, K.jsx)("div", { className: "info-message", children: (0, K.jsx)("p", { style: { color: "yellow", paddingTop: "20px" }, children: (0, K.jsx)("ul", { children: (0, K.jsx)("li", { children: "Proof-of-Stake (PoS) prevents concentration of power by distributing influence based on holdings, ensuring that no small group controls a significant portion of the network." }) }) }) }), (0, K.jsxs)("div", { className: "color-indicate", style: { height: "200px" }, children: [(0, K.jsxs)("div", { div: !0, class: "container", children: [" ", (0, K.jsx)("div", { class: "box square1" }), (0, K.jsx)("div", { class: "label", children: "Active" })] }), (0, K.jsxs)("div", { div: !0, class: "container", children: [" ", (0, K.jsx)("div", { class: "box square2" }), (0, K.jsx)("div", { class: "label", children: "Visited" })] }), (0, K.jsxs)("div", { div: !0, class: "container", children: [" ", (0, K.jsx)("div", { class: "box square3" }), (0, K.jsx)("div", { class: "label", children: "Not valid" })] })] })] }) }), (0, K.jsxs)("div", { className: "col-md-8", children: [(0, K.jsx)("h4", { style: { textAlign: "start", color: "white" }, children: "3. Avoiding Concentration of Power" }), (0, K.jsx)("div", { style: { marginTop: "-110px", marginLeft: "-210px" }, children: (0, K.jsx)("img", { src: iR, alt: "" }) }), (0, K.jsx)("div", { className: "continue", style: { marginTop: "-160px", marginLeft: "450px" }, children: g && (0, K.jsxs)(K.Fragment, { children: [(0, K.jsxs)("span", { children: [(0, K.jsx)("p", { style: { display: "inline-block", marginRight: "20px", color: "white" }, children: "Click here to Continue" }), (0, K.jsx)("i", { className: "fa-solid fa-arrow-right fa-beat-fade fa-2xl", style: { color: "#1adbce", display: "inline-block" } })] }), (0, K.jsx)("span", { children: (0, K.jsx)(Ge, { style: { borderColor: " #22eff1", color: "white", marginLeft: "10px" }, variant: "outlined", onClick: function () { o(!1), c(!1), n() }, children: "Continue" }) })] }) })] })] }), (0, K.jsx)("center", {})] }) }; var ZR = n.p + "images/Step4.f57233f6e87fe7c4b93e8d93f536dda5.svg", wR = function (e) { var n = e.onContinueClick, i = (0, t.useState)(!1), a = (0, r.Z)(i, 2), o = (a[0], a[1]), s = (0, t.useState)(!0), l = (0, r.Z)(s, 2), g = l[0], c = l[1], u = (0, t.useState)(!0), C = (0, r.Z)(u, 2), d = C[0], I = C[1]; (0, t.useEffect)((function () { var e = setTimeout((function () { I(!1), o(!0) }), 1e3); return function () { clearTimeout(e) } }), []); var h = (0, t.useState)(!1), A = (0, r.Z)(h, 2); A[0], A[1]; return (0, K.jsxs)(K.Fragment, { children: [(0, K.jsxs)("div", { className: "row", children: [(0, K.jsx)("div", { className: "col-md-4", children: d ? (0, K.jsx)(bR, { style: { color: "white" } }) : (0, K.jsxs)(K.Fragment, { children: [(0, K.jsx)("div", { className: "info-message", children: (0, K.jsx)("p", { style: { color: "yellow", paddingTop: "20px" }, children: (0, K.jsxs)("ul", { children: [(0, K.jsx)("li", { children: "Validators are responsible for validating transactions and maintaining the integrity of the blockchain." }), (0, K.jsx)("li", { children: "This allows participants to verify the legitimacy of transactions and the overall state of the blockchain." })] }) }) }), (0, K.jsxs)("div", { className: "color-indicate", style: { height: "200px" }, children: [(0, K.jsxs)("div", { div: !0, class: "container", children: [" ", (0, K.jsx)("div", { class: "box square1" }), (0, K.jsx)("div", { class: "label", children: "Active" })] }), (0, K.jsxs)("div", { div: !0, class: "container", children: [" ", (0, K.jsx)("div", { class: "box square2" }), (0, K.jsx)("div", { class: "label", children: "Visited" })] }), (0, K.jsxs)("div", { div: !0, class: "container", children: [" ", (0, K.jsx)("div", { class: "box square3" }), (0, K.jsx)("div", { class: "label", children: "Not valid" })] })] })] }) }), (0, K.jsxs)("div", { className: "col-md-8", children: [(0, K.jsx)("h4", { style: { textAlign: "start", color: "white" }, children: "4. Validation and Verification" }), (0, K.jsx)("div", { style: { marginTop: "-110px", marginLeft: "-210px" }, children: (0, K.jsx)("img", { src: ZR, alt: "" }) }), (0, K.jsx)("div", { className: "continue", style: { marginTop: "-160px", marginLeft: "450px" }, children: g && (0, K.jsxs)(K.Fragment, { children: [(0, K.jsxs)("span", { children: [(0, K.jsx)("p", { style: { display: "inline-block", marginRight: "20px", color: "white" }, children: "Click here to Continue" }), (0, K.jsx)("i", { className: "fa-solid fa-arrow-right fa-beat-fade fa-2xl", style: { color: "#1adbce", display: "inline-block" } })] }), (0, K.jsx)("span", { children: (0, K.jsx)(Ge, { style: { borderColor: " #22eff1", color: "white", marginLeft: "10px" }, variant: "outlined", onClick: function () { o(!1), c(!1), n() }, children: "Continue" }) })] }) })] })] }), (0, K.jsx)("center", {})] }) }; var SR = n.p + "images/step5.f65740f685de4f314e80538d687b47cc.svg", RR = function (e) { var n = e.onContinueClick, i = (0, t.useState)(!1), a = (0, r.Z)(i, 2), o = (a[0], a[1]), s = (0, t.useState)(!0), l = (0, r.Z)(s, 2), g = l[0], c = l[1], u = (0, t.useState)(!0), C = (0, r.Z)(u, 2), d = C[0], I = C[1]; (0, t.useEffect)((function () { var e = setTimeout((function () { I(!1), o(!0) }), 1e3); return function () { clearTimeout(e) } }), []); var h = (0, t.useState)(!1), A = (0, r.Z)(h, 2); A[0], A[1]; return (0, K.jsxs)(K.Fragment, { children: [(0, K.jsxs)("div", { className: "row", children: [(0, K.jsx)("div", { className: "col-md-4", children: d ? (0, K.jsx)(bR, { style: { color: "white" } }) : (0, K.jsxs)(K.Fragment, { children: [(0, K.jsx)("div", { className: "info-message", children: (0, K.jsx)("p", { style: { color: "yellow", paddingTop: "20px" }, children: (0, K.jsx)("ul", { children: (0, K.jsx)("li", { children: "Validators are individuals or entities trusted with the responsibility of validating transactions and maintaining the integrity of the blockchain." }) }) }) }), (0, K.jsxs)("div", { className: "color-indicate", style: { height: "200px" }, children: [(0, K.jsxs)("div", { div: !0, class: "container", children: [" ", (0, K.jsx)("div", { class: "box square1" }), (0, K.jsx)("div", { class: "label", children: "Active" })] }), (0, K.jsxs)("div", { div: !0, class: "container", children: [" ", (0, K.jsx)("div", { class: "box square2" }), (0, K.jsx)("div", { class: "label", children: "Visited" })] }), (0, K.jsxs)("div", { div: !0, class: "container", children: [" ", (0, K.jsx)("div", { class: "box square3" }), (0, K.jsx)("div", { class: "label", children: "Not valid" })] })] })] }) }), (0, K.jsxs)("div", { className: "col-md-8", children: [(0, K.jsx)("h4", { style: { textAlign: "start", color: "white" }, children: "5. Security and Trust" }), (0, K.jsx)("div", { style: { marginTop: "-110px", marginLeft: "-210px" }, children: (0, K.jsx)("img", { src: SR, alt: "" }) }), (0, K.jsx)("div", { className: "continue", style: { marginTop: "-160px", marginLeft: "450px" }, children: g && (0, K.jsxs)(K.Fragment, { children: [(0, K.jsxs)("span", { children: [(0, K.jsx)("p", { style: { display: "inline-block", marginRight: "20px", color: "white" }, children: "Click here to Continue" }), (0, K.jsx)("i", { className: "fa-solid fa-arrow-right fa-beat-fade fa-2xl", style: { color: "#1adbce", display: "inline-block" } })] }), (0, K.jsx)("span", { children: (0, K.jsx)(Ge, { style: { borderColor: " #22eff1", color: "white", marginLeft: "10px" }, variant: "outlined", onClick: function () { o(!1), c(!1), n() }, children: "Continue" }) })] }) })] })] }), (0, K.jsx)("center", {})] }) }; n.p; var xR = function (e) { e.onContinueClick; var n = (0, t.useState)(!1), i = (0, r.Z)(n, 2), a = (i[0], i[1]); return (0, t.useEffect)((function () { var e = setTimeout((function () { a(!0) }), 10); return function () { clearTimeout(e) } }), []), (0, K.jsx)("div", { className: "animate-text-container", children: (0, K.jsxs)("center", { children: [(0, K.jsx)(He, { sx: { fontSize: 25, marginTop: "200px" }, color: "#22eff1", gutterBottom: !0, children: (0, K.jsx)("span", { className: "animate-text", children: "You have successfully completed the Election Simulation" }) }), (0, K.jsx)(He, { sx: { fontSize: 25 }, color: "#22eff1", gutterBottom: !0, children: (0, K.jsx)("span", { className: "animate-text", children: "Based on the concepts of Proof of Stake!" }) })] }) }) }, WR = function () { var e = (0, t.useState)(1), n = (0, r.Z)(e, 2), i = n[0], a = n[1], o = function () { a((function (e) { return e + 1 })) }, s = (0, t.useState)(null), l = (0, r.Z)(s, 2), g = l[0], c = l[1], u = (0, t.useState)(!0), C = (0, r.Z)(u, 2), d = C[0], I = C[1], h = (0, t.useState)(!1), A = (0, r.Z)(h, 2), p = A[0], f = (A[1], (0, t.useState)(!1)), m = (0, r.Z)(f, 2), v = m[0], b = m[1], y = (0, t.useState)(0), G = (0, r.Z)(y, 2), B = G[0], Z = G[1], w = function () { Z((function (e) { return e + 1 })) }, S = function (e) { switch (I(!1), e) { case 1: c("accordionDetails"); break; case 2: c("manifesto"); break; case 3: c("candidate"); break; case 4: c("login"); break; case 5: c("counting"); break; default: c(null) } }, R = function () { I(!0), c(null) }, x = { accordionDetails: 10, manifesto: 10, candidate: 10, login: 10, voting: 10, counting: 10 }; (0, t.useEffect)((function () { if (g) { var e = setTimeout((function () { b(!0) }), x[g] || 10); return function () { return clearTimeout(e) } } b(!1) }), [g]); var W = { accordionDetails: { title: " Stakeholder Influence in Election Process", content: [" Election process based on the concept of Proof of Stake.", "Here stakeholders act as voters.", "Review the election news of 3 different channels below to gain insights into a party's influence."] }, manifesto: { title: "Incentivizing Participation in Election Process", content: ["In election manifestos, parties make promises accountable by voters.", "Review the election manifestos and select the corresponding party."] }, candidate: { title: "Avoiding Concentration of Power in Election Process", content: ["Here Authority can unverify the candidate.", "Click the 'Login as Authority' link to access the authority login page."] }, login: { title: "Validation and Verification in Election Process", content: ["To cast your vote, proceed to the voter verification page.", "Enter your name and voter ID for authentication."] }, voting: { title: "Validation and Verification in Election Process", content: ["This is the voting machine interface to make your selection.", "Vote for the corresponding candidate.", "Click the close button to exit."] }, counting: { title: "Security and Trust in Election Process", content: ["Voters trust that their votes will be counted accurately and the electoral process will be fair.", "To count the vote, click 'Get serial number' and 'Count' buttons."] }, candidateVerification: { title: "Avoiding Concentration of Power in Election Process", content: ["This is the Verification page where Authority can verify and unverify a candidate.", "After making selections, click 'Submit' to update the verification status for the candidates."] }, "auth-login": { title: "Avoiding Concentration of Power in Election Process", content: ["Access the Authority Verification portal using your credentials.", "Once logged in, you'll be directed to the Verification page."] } }; return (0, K.jsxs)(K.Fragment, { children: [(0, K.jsx)("div", { className: "heading" }), (0, K.jsx)("div", { className: "container-fluid container-full-height", children: (0, K.jsxs)("div", { className: "row", children: [(0, K.jsxs)("div", { className: "col-md-8 left-column", children: [1 === i && (0, K.jsx)(yR, { onContinueClick: function () { return S(1) } }), 2 === i && (0, K.jsx)(GR, { onContinueClick: function () { return S(2) } }), 3 === i && (0, K.jsx)(BR, { onContinueClick: function () { return S(3) } }), 4 === i && (0, K.jsx)(wR, { onContinueClick: function () { return S(4) } }), 5 === i && (0, K.jsx)(RR, { onContinueClick: function () { return S(5) } }), 6 === i && (0, K.jsx)(xR, { onContinueClick: function () { return S(6) } })] }), (0, K.jsxs)("div", { className: "col-md-4 right-column", children: [d && (0, K.jsx)(nR, { onSelect: S, activeIndex: B }), g && (0, K.jsx)(tR, { title: W[g].title, text: W[g].content, time: 10, style: { marginBottom: "10%" } }), v && (0, K.jsxs)(K.Fragment, { children: ["accordionDetails" === g && (0, K.jsx)(si, { onCloseClick: R, onStepChange: o, onActiveAccordionChange: w }), "manifesto" === g && (0, K.jsx)(rr, { onCloseClick: R, onStepChange: o, onActiveAccordionChange: w }), "candidate" === g && (0, K.jsx)(eR, { onCloseClick: R, onAuthorityLoginClick: function () { c("auth-login") }, onStepChange: o, onActiveAccordionChange: w }), "auth-login" === g && !p && (0, K.jsx)(qS, { onSuccessfulLogin: function () { c("candidateVerification") } }), "candidateVerification" === g && (0, K.jsx)($S, { onSubmitClick: function () { c("candidate") }, onActiveAccordionChange: w }), "login" === g && (0, K.jsx)(ar, { onNextClick: function () { c("voting") } }), "voting" === g && (0, K.jsx)(jS, { onCloseClick: R, onStepChange: o, onActiveAccordionChange: w }), "counting" === g && (0, K.jsx)(QS, { onCloseClick: R, onStepChange: o, onActiveAccordionChange: w })] })] })] }) })] }) }; var VR = function (e) { var n = e.onButtonClick, i = (0, t.useState)(""), a = (0, r.Z)(i, 2), o = a[0], s = a[1], l = (0, t.useState)(""), g = (0, r.Z)(l, 2), c = g[0], u = g[1], C = (0, t.useState)(""), d = (0, r.Z)(C, 2), I = d[0], h = d[1], A = (0, t.useState)(""), p = (0, r.Z)(A, 2), f = p[0], m = p[1]; return (0, K.jsxs)("div", { className: "login-container", children: [(0, K.jsxs)("form", { onSubmit: function (e) { e.preventDefault(); /^[A-Za-z]{4}\d{6}$/.test(c) ? (h(""), m(!0), setTimeout((function () { m(""), n({ name: o }) }), 3e3)) : h("Your voter ID is invalid. Please enter a voter ID that starts with four letters and is followed by six numbers.") }, children: [(0, K.jsxs)("div", { className: "form-group", children: [(0, K.jsx)("h4", { className: "logins", children: "Voter Verification" }), (0, K.jsx)("label", { children: "Name:" }), (0, K.jsx)("input", { type: "text", className: "form-control", placeholder: "Enter Name", value: o, onChange: function (e) { s(e.target.value) }, required: !0 })] }), (0, K.jsxs)("div", { className: "form-group", children: [(0, K.jsx)("label", { children: "Voter ID:" }), (0, K.jsx)("input", { type: "text", className: "form-control", placeholder: "E.g; ABXD123456", value: c, onChange: function (e) { u(e.target.value) }, required: !0 })] }), (0, K.jsx)("button", { type: "submit", className: "btn btns ", children: "Login" })] }), f && (0, K.jsx)("div", { style: { color: "green", font: "large" }, className: "alert alert-success mt-3", children: "Your voter ID has been validated. Login successful" }), I && (0, K.jsx)("div", { className: "alert alert-danger mt-3", children: I })] }) }; var kR = function (e) { var n = e.initialTime, i = (0, t.useState)(n), a = (0, r.Z)(i, 2), o = a[0], s = a[1]; return (0, t.useEffect)((function () { if (o > 0) { var e = setInterval((function () { s(o - 1) }), 1e3); return function () { return clearInterval(e) } } }), [o]), (0, K.jsx)("div", { className: "timer", children: o > 0 ? "Time Left: ".concat(Math.floor(o / 60), ":").concat((o % 60).toString().padStart(2, "0")) : "Timer Expired" }) }; var HR = function (e) { var t = e.onClose; return e.showTimer, (0, K.jsx)("div", { className: "card tokencard", children: (0, K.jsxs)("div", { className: "card-body", children: [(0, K.jsx)("h5", { className: "card-title tokenhead", children: "Your token has been successfully generated! " }), (0, K.jsx)("p", { className: "card-text" }), (0, K.jsx)("button", { className: "btn btns", onClick: t, children: "Close" })] }) }) }, MR = n.p + "images/beep.641649085c370e5624a7.mp3"; function FR(e) { var t, n, i = ""; if ("string" == typeof e || "number" == typeof e) i += e; else if ("object" == typeof e) if (Array.isArray(e)) for (t = 0; t < e.length; t++)e[t] && (n = FR(e[t])) && (i && (i += " "), i += n); else for (t in e) e[t] && (i && (i += " "), i += t); return i } var NR = function () { for (var e, t, n = 0, i = ""; n < arguments.length;)(e = arguments[n++]) && (t = FR(e)) && (i && (i += " "), i += t); return i }, XR = "function" === typeof Symbol && "symbol" === typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" === typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, YR = "object" === ("undefined" === typeof window ? "undefined" : XR(window)) && "object" === ("undefined" === typeof document ? "undefined" : XR(document)) && 9 === document.nodeType, KR = {}.constructor; function LR(e) { if (null == e || "object" !== typeof e) return e; if (Array.isArray(e)) return e.map(LR); if (e.constructor !== KR) return e; var t = {}; for (var n in e) t[n] = LR(e[n]); return t } function zR(e, t, n) { void 0 === e && (e = "unnamed"); var i = n.jss, r = LR(t), a = i.plugins.onCreateRule(e, r, n); return a || (e[0], null) } var ER = function (e, t) { for (var n = "", i = 0; i < e.length && "!important" !== e[i]; i++)n && (n += t), n += e[i]; return n }, TR = function (e) { if (!Array.isArray(e)) return e; var t = ""; if (Array.isArray(e[0])) for (var n = 0; n < e.length && "!important" !== e[n]; n++)t && (t += ", "), t += ER(e[n], " "); else t = ER(e, ", "); return "!important" === e[e.length - 1] && (t += " !important"), t }; function _R(e) { return e && !1 === e.format ? { linebreak: "", space: "" } : { linebreak: "\n", space: " " } } function UR(e, t) { for (var n = "", i = 0; i < t; i++)n += "  "; return n + e } function DR(e, t, n) { void 0 === n && (n = {}); var i = ""; if (!t) return i; var r = n.indent, a = void 0 === r ? 0 : r, o = t.fallbacks; !1 === n.format && (a = -1 / 0); var s = _R(n), l = s.linebreak, g = s.space; if (e && a++, o) if (Array.isArray(o)) for (var c = 0; c < o.length; c++) { var u = o[c]; for (var C in u) { var d = u[C]; null != d && (i && (i += l), i += UR(C + ":" + g + TR(d) + ";", a)) } } else for (var I in o) { var h = o[I]; null != h && (i && (i += l), i += UR(I + ":" + g + TR(h) + ";", a)) } for (var A in t) { var p = t[A]; null != p && "fallbacks" !== A && (i && (i += l), i += UR(A + ":" + g + TR(p) + ";", a)) } return (i || n.allowEmpty) && e ? (i && (i = "" + l + i + l), UR("" + e + g + "{" + i, --a) + UR("}", a)) : i } var PR = /([[\].#*$><+~=|^:(),"'`\s])/g, JR = "undefined" !== typeof CSS && CSS.escape, OR = function (e) { return JR ? JR(e) : e.replace(PR, "\\$1") }, jR = function () { function e(e, t, n) { this.type = "style", this.isProcessed = !1; var i = n.sheet, r = n.Renderer; this.key = e, this.options = n, this.style = t, i ? this.renderer = i.renderer : r && (this.renderer = new r) } return e.prototype.prop = function (e, t, n) { if (void 0 === t) return this.style[e]; var i = !!n && n.force; if (!i && this.style[e] === t) return this; var r = t; n && !1 === n.process || (r = this.options.jss.plugins.onChangeValue(t, e, this)); var a = null == r || !1 === r, o = e in this.style; if (a && !o && !i) return this; var s = a && o; if (s ? delete this.style[e] : this.style[e] = r, this.renderable && this.renderer) return s ? this.renderer.removeProperty(this.renderable, e) : this.renderer.setProperty(this.renderable, e, r), this; var l = this.options.sheet; return l && l.attached, this }, e }(), QR = function (e) { function t(t, n, i) { var r; r = e.call(this, t, n, i) || this; var a = i.selector, o = i.scoped, s = i.sheet, l = i.generateId; return a ? r.selectorText = a : !1 !== o && (r.id = l(y(y(r)), s), r.selectorText = "." + OR(r.id)), r } B(t, e); var n = t.prototype; return n.applyTo = function (e) { var t = this.renderer; if (t) { var n = this.toJSON(); for (var i in n) t.setProperty(e, i, n[i]) } return this }, n.toJSON = function () { var e = {}; for (var t in this.style) { var n = this.style[t]; "object" !== typeof n ? e[t] = n : Array.isArray(n) && (e[t] = TR(n)) } return e }, n.toString = function (e) { var t = this.options.sheet, n = !!t && t.options.link ? (0, c.Z)({}, e, { allowEmpty: !0 }) : e; return DR(this.selectorText, this.style, n) }, dr(t, [{ key: "selector", set: function (e) { if (e !== this.selectorText) { this.selectorText = e; var t = this.renderer, n = this.renderable; if (n && t) t.setSelector(n, e) || t.replaceRule(n, this) } }, get: function () { return this.selectorText } }]), t }(jR), qR = { onCreateRule: function (e, t, n) { return "@" === e[0] || n.parent && "keyframes" === n.parent.type ? null : new QR(e, t, n) } }, $R = { indent: 1, children: !0 }, ex = /@([\w-]+)/, tx = function () { function e(e, t, n) { this.type = "conditional", this.isProcessed = !1, this.key = e; var i = e.match(ex); for (var r in this.at = i ? i[1] : "unknown", this.query = n.name || "@" + this.at, this.options = n, this.rules = new Zx((0, c.Z)({}, n, { parent: this })), t) this.rules.add(r, t[r]); this.rules.process() } var t = e.prototype; return t.getRule = function (e) { return this.rules.get(e) }, t.indexOf = function (e) { return this.rules.indexOf(e) }, t.addRule = function (e, t, n) { var i = this.rules.add(e, t, n); return i ? (this.options.jss.plugins.onProcessRule(i), i) : null }, t.replaceRule = function (e, t, n) { var i = this.rules.replace(e, t, n); return i && this.options.jss.plugins.onProcessRule(i), i }, t.toString = function (e) { void 0 === e && (e = $R); var t = _R(e).linebreak; if (null == e.indent && (e.indent = $R.indent), null == e.children && (e.children = $R.children), !1 === e.children) return this.query + " {}"; var n = this.rules.toString(e); return n ? this.query + " {" + t + n + t + "}" : "" }, e }(), nx = /@container|@media|@supports\s+/, ix = { onCreateRule: function (e, t, n) { return nx.test(e) ? new tx(e, t, n) : null } }, rx = { indent: 1, children: !0 }, ax = /@keyframes\s+([\w-]+)/, ox = function () { function e(e, t, n) { this.type = "keyframes", this.at = "@keyframes", this.isProcessed = !1; var i = e.match(ax); i && i[1] ? this.name = i[1] : this.name = "noname", this.key = this.type + "-" + this.name, this.options = n; var r = n.scoped, a = n.sheet, o = n.generateId; for (var s in this.id = !1 === r ? this.name : OR(o(this, a)), this.rules = new Zx((0, c.Z)({}, n, { parent: this })), t) this.rules.add(s, t[s], (0, c.Z)({}, n, { parent: this })); this.rules.process() } return e.prototype.toString = function (e) { void 0 === e && (e = rx); var t = _R(e).linebreak; if (null == e.indent && (e.indent = rx.indent), null == e.children && (e.children = rx.children), !1 === e.children) return this.at + " " + this.id + " {}"; var n = this.rules.toString(e); return n && (n = "" + t + n + t), this.at + " " + this.id + " {" + n + "}" }, e }(), sx = /@keyframes\s+/, lx = /\$([\w-]+)/g, gx = function (e, t) { return "string" === typeof e ? e.replace(lx, (function (e, n) { return n in t ? t[n] : e })) : e }, cx = function (e, t, n) { var i = e[t], r = gx(i, n); r !== i && (e[t] = r) }, ux = { onCreateRule: function (e, t, n) { return "string" === typeof e && sx.test(e) ? new ox(e, t, n) : null }, onProcessStyle: function (e, t, n) { return "style" === t.type && n ? ("animation-name" in e && cx(e, "animation-name", n.keyframes), "animation" in e && cx(e, "animation", n.keyframes), e) : e }, onChangeValue: function (e, t, n) { var i = n.options.sheet; if (!i) return e; switch (t) { case "animation": case "animation-name": return gx(e, i.keyframes); default: return e } } }, Cx = function (e) { function t() { return e.apply(this, arguments) || this } return B(t, e), t.prototype.toString = function (e) { var t = this.options.sheet, n = !!t && t.options.link ? (0, c.Z)({}, e, { allowEmpty: !0 }) : e; return DR(this.key, this.style, n) }, t }(jR), dx = { onCreateRule: function (e, t, n) { return n.parent && "keyframes" === n.parent.type ? new Cx(e, t, n) : null } }, Ix = function () { function e(e, t, n) { this.type = "font-face", this.at = "@font-face", this.isProcessed = !1, this.key = e, this.style = t, this.options = n } return e.prototype.toString = function (e) { var t = _R(e).linebreak; if (Array.isArray(this.style)) { for (var n = "", i = 0; i < this.style.length; i++)n += DR(this.at, this.style[i]), this.style[i + 1] && (n += t); return n } return DR(this.at, this.style, e) }, e }(), hx = /@font-face/, Ax = { onCreateRule: function (e, t, n) { return hx.test(e) ? new Ix(e, t, n) : null } }, px = function () { function e(e, t, n) { this.type = "viewport", this.at = "@viewport", this.isProcessed = !1, this.key = e, this.style = t, this.options = n } return e.prototype.toString = function (e) { return DR(this.key, this.style, e) }, e }(), fx = { onCreateRule: function (e, t, n) { return "@viewport" === e || "@-ms-viewport" === e ? new px(e, t, n) : null } }, mx = function () { function e(e, t, n) { this.type = "simple", this.isProcessed = !1, this.key = e, this.value = t, this.options = n } return e.prototype.toString = function (e) { if (Array.isArray(this.value)) { for (var t = "", n = 0; n < this.value.length; n++)t += this.key + " " + this.value[n] + ";", this.value[n + 1] && (t += "\n"); return t } return this.key + " " + this.value + ";" }, e }(), vx = { "@charset": !0, "@import": !0, "@namespace": !0 }, bx = { onCreateRule: function (e, t, n) { return e in vx ? new mx(e, t, n) : null } }, yx = [qR, ix, ux, dx, Ax, fx, bx], Gx = { process: !0 }, Bx = { force: !0, process: !0 }, Zx = function () { function e(e) { this.map = {}, this.raw = {}, this.index = [], this.counter = 0, this.options = e, this.classes = e.classes, this.keyframes = e.keyframes } var t = e.prototype; return t.add = function (e, t, n) { var i = this.options, r = i.parent, a = i.sheet, o = i.jss, s = i.Renderer, l = i.generateId, g = i.scoped, u = (0, c.Z)({ classes: this.classes, parent: r, sheet: a, jss: o, Renderer: s, generateId: l, scoped: g, name: e, keyframes: this.keyframes, selector: void 0 }, n), C = e; e in this.raw && (C = e + "-d" + this.counter++), this.raw[C] = t, C in this.classes && (u.selector = "." + OR(this.classes[C])); var d = zR(C, t, u); if (!d) return null; this.register(d); var I = void 0 === u.index ? this.index.length : u.index; return this.index.splice(I, 0, d), d }, t.replace = function (e, t, n) { var i = this.get(e), r = this.index.indexOf(i); i && this.remove(i); var a = n; return -1 !== r && (a = (0, c.Z)({}, n, { index: r })), this.add(e, t, a) }, t.get = function (e) { return this.map[e] }, t.remove = function (e) { this.unregister(e), delete this.raw[e.key], this.index.splice(this.index.indexOf(e), 1) }, t.indexOf = function (e) { return this.index.indexOf(e) }, t.process = function () { var e = this.options.jss.plugins; this.index.slice(0).forEach(e.onProcessRule, e) }, t.register = function (e) { this.map[e.key] = e, e instanceof QR ? (this.map[e.selector] = e, e.id && (this.classes[e.key] = e.id)) : e instanceof ox && this.keyframes && (this.keyframes[e.name] = e.id) }, t.unregister = function (e) { delete this.map[e.key], e instanceof QR ? (delete this.map[e.selector], delete this.classes[e.key]) : e instanceof ox && delete this.keyframes[e.name] }, t.update = function () { var e, t, n; if ("string" === typeof (arguments.length <= 0 ? void 0 : arguments[0]) ? (e = arguments.length <= 0 ? void 0 : arguments[0], t = arguments.length <= 1 ? void 0 : arguments[1], n = arguments.length <= 2 ? void 0 : arguments[2]) : (t = arguments.length <= 0 ? void 0 : arguments[0], n = arguments.length <= 1 ? void 0 : arguments[1], e = null), e) this.updateOne(this.get(e), t, n); else for (var i = 0; i < this.index.length; i++)this.updateOne(this.index[i], t, n) }, t.updateOne = function (t, n, i) { void 0 === i && (i = Gx); var r = this.options, a = r.jss.plugins, o = r.sheet; if (t.rules instanceof e) t.rules.update(n, i); else { var s = t.style; if (a.onUpdate(n, t, o, i), i.process && s && s !== t.style) { for (var l in a.onProcessStyle(t.style, t, o), t.style) { var g = t.style[l]; g !== s[l] && t.prop(l, g, Bx) } for (var c in s) { var u = t.style[c], C = s[c]; null == u && u !== C && t.prop(c, null, Bx) } } } }, t.toString = function (e) { for (var t = "", n = this.options.sheet, i = !!n && n.options.link, r = _R(e).linebreak, a = 0; a < this.index.length; a++) { var o = this.index[a].toString(e); (o || i) && (t && (t += r), t += o) } return t }, e }(), wx = function () { function e(e, t) { for (var n in this.attached = !1, this.deployed = !1, this.classes = {}, this.keyframes = {}, this.options = (0, c.Z)({}, t, { sheet: this, parent: this, classes: this.classes, keyframes: this.keyframes }), t.Renderer && (this.renderer = new t.Renderer(this)), this.rules = new Zx(this.options), e) this.rules.add(n, e[n]); this.rules.process() } var t = e.prototype; return t.attach = function () { return this.attached || (this.renderer && this.renderer.attach(), this.attached = !0, this.deployed || this.deploy()), this }, t.detach = function () { return this.attached ? (this.renderer && this.renderer.detach(), this.attached = !1, this) : this }, t.addRule = function (e, t, n) { var i = this.queue; this.attached && !i && (this.queue = []); var r = this.rules.add(e, t, n); return r ? (this.options.jss.plugins.onProcessRule(r), this.attached ? this.deployed ? (i ? i.push(r) : (this.insertRule(r), this.queue && (this.queue.forEach(this.insertRule, this), this.queue = void 0)), r) : r : (this.deployed = !1, r)) : null }, t.replaceRule = function (e, t, n) { var i = this.rules.get(e); if (!i) return this.addRule(e, t, n); var r = this.rules.replace(e, t, n); return r && this.options.jss.plugins.onProcessRule(r), this.attached ? this.deployed ? (this.renderer && (r ? i.renderable && this.renderer.replaceRule(i.renderable, r) : this.renderer.deleteRule(i)), r) : r : (this.deployed = !1, r) }, t.insertRule = function (e) { this.renderer && this.renderer.insertRule(e) }, t.addRules = function (e, t) { var n = []; for (var i in e) { var r = this.addRule(i, e[i], t); r && n.push(r) } return n }, t.getRule = function (e) { return this.rules.get(e) }, t.deleteRule = function (e) { var t = "object" === typeof e ? e : this.rules.get(e); return !(!t || this.attached && !t.renderable) && (this.rules.remove(t), !(this.attached && t.renderable && this.renderer) || this.renderer.deleteRule(t.renderable)) }, t.indexOf = function (e) { return this.rules.indexOf(e) }, t.deploy = function () { return this.renderer && this.renderer.deploy(), this.deployed = !0, this }, t.update = function () { var e; return (e = this.rules).update.apply(e, arguments), this }, t.updateOne = function (e, t, n) { return this.rules.updateOne(e, t, n), this }, t.toString = function (e) { return this.rules.toString(e) }, e }(), Sx = function () { function e() { this.plugins = { internal: [], external: [] }, this.registry = {} } var t = e.prototype; return t.onCreateRule = function (e, t, n) { for (var i = 0; i < this.registry.onCreateRule.length; i++) { var r = this.registry.onCreateRule[i](e, t, n); if (r) return r } return null }, t.onProcessRule = function (e) { if (!e.isProcessed) { for (var t = e.options.sheet, n = 0; n < this.registry.onProcessRule.length; n++)this.registry.onProcessRule[n](e, t); e.style && this.onProcessStyle(e.style, e, t), e.isProcessed = !0 } }, t.onProcessStyle = function (e, t, n) { for (var i = 0; i < this.registry.onProcessStyle.length; i++)t.style = this.registry.onProcessStyle[i](t.style, t, n) }, t.onProcessSheet = function (e) { for (var t = 0; t < this.registry.onProcessSheet.length; t++)this.registry.onProcessSheet[t](e) }, t.onUpdate = function (e, t, n, i) { for (var r = 0; r < this.registry.onUpdate.length; r++)this.registry.onUpdate[r](e, t, n, i) }, t.onChangeValue = function (e, t, n) { for (var i = e, r = 0; r < this.registry.onChangeValue.length; r++)i = this.registry.onChangeValue[r](i, t, n); return i }, t.use = function (e, t) { void 0 === t && (t = { queue: "external" }); var n = this.plugins[t.queue]; -1 === n.indexOf(e) && (n.push(e), this.registry = [].concat(this.plugins.external, this.plugins.internal).reduce((function (e, t) { for (var n in t) n in e && e[n].push(t[n]); return e }), { onCreateRule: [], onProcessRule: [], onProcessStyle: [], onProcessSheet: [], onChangeValue: [], onUpdate: [] })) }, e }(), Rx = function () { function e() { this.registry = [] } var t = e.prototype; return t.add = function (e) { var t = this.registry, n = e.options.index; if (-1 === t.indexOf(e)) if (0 === t.length || n >= this.index) t.push(e); else for (var i = 0; i < t.length; i++)if (t[i].options.index > n) return void t.splice(i, 0, e) }, t.reset = function () { this.registry = [] }, t.remove = function (e) { var t = this.registry.indexOf(e); this.registry.splice(t, 1) }, t.toString = function (e) { for (var t = void 0 === e ? {} : e, n = t.attached, i = (0, g.Z)(t, ["attached"]), r = _R(i).linebreak, a = "", o = 0; o < this.registry.length; o++) { var s = this.registry[o]; null != n && s.attached !== n || (a && (a += r), a += s.toString(i)) } return a }, dr(e, [{ key: "index", get: function () { return 0 === this.registry.length ? 0 : this.registry[this.registry.length - 1].options.index } }]), e }(), xx = new Rx, Wx = "undefined" !== typeof globalThis ? globalThis : "undefined" !== typeof window && window.Math === Math ? window : "undefined" !== typeof self && self.Math === Math ? self : Function("return this")(), Vx = "2f1acc6c3a606b082e5eef5e54414ffb"; null == Wx[Vx] && (Wx[Vx] = 0); var kx = Wx[Vx]++, Hx = function (e) { void 0 === e && (e = {}); var t = 0; return function (n, i) { t += 1; var r = "", a = ""; return i && (i.options.classNamePrefix && (a = i.options.classNamePrefix), null != i.options.jss.id && (r = String(i.options.jss.id))), e.minify ? "" + (a || "c") + kx + r + t : a + n.key + "-" + kx + (r ? "-" + r : "") + "-" + t } }, Mx = function (e) { var t; return function () { return t || (t = e()), t } }, Fx = function (e, t) { try { return e.attributeStyleMap ? e.attributeStyleMap.get(t) : e.style.getPropertyValue(t) } catch (n) { return "" } }, Nx = function (e, t, n) { try { var i = n; if (Array.isArray(n) && (i = TR(n)), e.attributeStyleMap) e.attributeStyleMap.set(t, i); else { var r = i ? i.indexOf("!important") : -1, a = r > -1 ? i.substr(0, r - 1) : i; e.style.setProperty(t, a, r > -1 ? "important" : "") } } catch (o) { return !1 } return !0 }, Xx = function (e, t) { try { e.attributeStyleMap ? e.attributeStyleMap.delete(t) : e.style.removeProperty(t) } catch (n) { } }, Yx = function (e, t) { return e.selectorText = t, e.selectorText === t }, Kx = Mx((function () { return document.querySelector("head") })); function Lx(e) { var t = xx.registry; if (t.length > 0) { var n = function (e, t) { for (var n = 0; n < e.length; n++) { var i = e[n]; if (i.attached && i.options.index > t.index && i.options.insertionPoint === t.insertionPoint) return i } return null }(t, e); if (n && n.renderer) return { parent: n.renderer.element.parentNode, node: n.renderer.element }; if (n = function (e, t) { for (var n = e.length - 1; n >= 0; n--) { var i = e[n]; if (i.attached && i.options.insertionPoint === t.insertionPoint) return i } return null }(t, e), n && n.renderer) return { parent: n.renderer.element.parentNode, node: n.renderer.element.nextSibling } } var i = e.insertionPoint; if (i && "string" === typeof i) { var r = function (e) { for (var t = Kx(), n = 0; n < t.childNodes.length; n++) { var i = t.childNodes[n]; if (8 === i.nodeType && i.nodeValue.trim() === e) return i } return null }(i); if (r) return { parent: r.parentNode, node: r.nextSibling } } return !1 } var zx = Mx((function () { var e = document.querySelector('meta[property="csp-nonce"]'); return e ? e.getAttribute("content") : null })), Ex = function (e, t, n) { try { "insertRule" in e ? e.insertRule(t, n) : "appendRule" in e && e.appendRule(t) } catch (i) { return !1 } return e.cssRules[n] }, Tx = function (e, t) { var n = e.cssRules.length; return void 0 === t || t > n ? n : t }, _x = function () { function e(e) { this.getPropertyValue = Fx, this.setProperty = Nx, this.removeProperty = Xx, this.setSelector = Yx, this.hasInsertedRules = !1, this.cssRules = [], e && xx.add(e), this.sheet = e; var t = this.sheet ? this.sheet.options : {}, n = t.media, i = t.meta, r = t.element; this.element = r || function () { var e = document.createElement("style"); return e.textContent = "\n", e }(), this.element.setAttribute("data-jss", ""), n && this.element.setAttribute("media", n), i && this.element.setAttribute("data-meta", i); var a = zx(); a && this.element.setAttribute("nonce", a) } var t = e.prototype; return t.attach = function () { if (!this.element.parentNode && this.sheet) { !function (e, t) { var n = t.insertionPoint, i = Lx(t); if (!1 !== i && i.parent) i.parent.insertBefore(e, i.node); else if (n && "number" === typeof n.nodeType) { var r = n, a = r.parentNode; a && a.insertBefore(e, r.nextSibling) } else Kx().appendChild(e) }(this.element, this.sheet.options); var e = Boolean(this.sheet && this.sheet.deployed); this.hasInsertedRules && e && (this.hasInsertedRules = !1, this.deploy()) } }, t.detach = function () { if (this.sheet) { var e = this.element.parentNode; e && e.removeChild(this.element), this.sheet.options.link && (this.cssRules = [], this.element.textContent = "\n") } }, t.deploy = function () { var e = this.sheet; e && (e.options.link ? this.insertRules(e.rules) : this.element.textContent = "\n" + e.toString() + "\n") }, t.insertRules = function (e, t) { for (var n = 0; n < e.index.length; n++)this.insertRule(e.index[n], n, t) }, t.insertRule = function (e, t, n) { if (void 0 === n && (n = this.element.sheet), e.rules) { var i = e, r = n; if ("conditional" === e.type || "keyframes" === e.type) { var a = Tx(n, t); if (!1 === (r = Ex(n, i.toString({ children: !1 }), a))) return !1; this.refCssRule(e, a, r) } return this.insertRules(i.rules, r), r } var o = e.toString(); if (!o) return !1; var s = Tx(n, t), l = Ex(n, o, s); return !1 !== l && (this.hasInsertedRules = !0, this.refCssRule(e, s, l), l) }, t.refCssRule = function (e, t, n) { e.renderable = n, e.options.parent instanceof wx && this.cssRules.splice(t, 0, n) }, t.deleteRule = function (e) { var t = this.element.sheet, n = this.indexOf(e); return -1 !== n && (t.deleteRule(n), this.cssRules.splice(n, 1), !0) }, t.indexOf = function (e) { return this.cssRules.indexOf(e) }, t.replaceRule = function (e, t) { var n = this.indexOf(e); return -1 !== n && (this.element.sheet.deleteRule(n), this.cssRules.splice(n, 1), this.insertRule(t, n)) }, t.getRules = function () { return this.element.sheet.cssRules }, e }(), Ux = 0, Dx = function () { function e(e) { this.id = Ux++, this.version = "10.10.0", this.plugins = new Sx, this.options = { id: { minify: !1 }, createGenerateId: Hx, Renderer: YR ? _x : null, plugins: [] }, this.generateId = Hx({ minify: !1 }); for (var t = 0; t < yx.length; t++)this.plugins.use(yx[t], { queue: "internal" }); this.setup(e) } var t = e.prototype; return t.setup = function (e) { return void 0 === e && (e = {}), e.createGenerateId && (this.options.createGenerateId = e.createGenerateId), e.id && (this.options.id = (0, c.Z)({}, this.options.id, e.id)), (e.createGenerateId || e.id) && (this.generateId = this.options.createGenerateId(this.options.id)), null != e.insertionPoint && (this.options.insertionPoint = e.insertionPoint), "Renderer" in e && (this.options.Renderer = e.Renderer), e.plugins && this.use.apply(this, e.plugins), this }, t.createStyleSheet = function (e, t) { void 0 === t && (t = {}); var n = t.index; "number" !== typeof n && (n = 0 === xx.index ? 0 : xx.index + 1); var i = new wx(e, (0, c.Z)({}, t, { jss: this, generateId: t.generateId || this.generateId, insertionPoint: this.options.insertionPoint, Renderer: this.options.Renderer, index: n })); return this.plugins.onProcessSheet(i), i }, t.removeStyleSheet = function (e) { return e.detach(), xx.remove(e), this }, t.createRule = function (e, t, n) { if (void 0 === t && (t = {}), void 0 === n && (n = {}), "object" === typeof e) return this.createRule(void 0, e, t); var i = (0, c.Z)({}, n, { name: e, jss: this, Renderer: this.options.Renderer }); i.generateId || (i.generateId = this.generateId), i.classes || (i.classes = {}), i.keyframes || (i.keyframes = {}); var r = zR(e, t, i); return r && this.plugins.onProcessRule(r), r }, t.use = function () { for (var e = this, t = arguments.length, n = new Array(t), i = 0; i < t; i++)n[i] = arguments[i]; return n.forEach((function (t) { e.plugins.use(t) })), this }, e }(), Px = function (e) { return new Dx(e) }, Jx = "object" === typeof CSS && null != CSS && "number" in CSS; function Ox(e) { var t = null; for (var n in e) { var i = e[n], r = typeof i; if ("function" === r) t || (t = {}), t[n] = i; else if ("object" === r && null !== i && !Array.isArray(i)) { var a = Ox(i); a && (t || (t = {}), t[n] = a) } } return t } Px(); function jx() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.baseClasses, n = e.newClasses; e.Component; if (!n) return t; var i = (0, c.Z)({}, t); return Object.keys(n).forEach((function (e) { n[e] && (i[e] = "".concat(t[e], " ").concat(n[e])) })), i } var Qx = { set: function (e, t, n, i) { var r = e.get(t); r || (r = new Map, e.set(t, r)), r.set(n, i) }, get: function (e, t, n) { var i = e.get(t); return i ? i.get(n) : void 0 }, delete: function (e, t, n) { e.get(t).delete(n) } }, qx = Qx; var $x = t.createContext(null); function eW() { return t.useContext($x) } var tW = "function" === typeof Symbol && Symbol.for ? Symbol.for("mui.nested") : "__THEME_NESTED__", nW = ["checked", "disabled", "error", "focused", "focusVisible", "required", "expanded", "selected"]; var iW = Date.now(), rW = "fnValues" + iW, aW = "fnStyle" + ++iW, oW = function () { return { onCreateRule: function (e, t, n) { if ("function" !== typeof t) return null; var i = zR(e, {}, n); return i[aW] = t, i }, onProcessStyle: function (e, t) { if (rW in t || aW in t) return e; var n = {}; for (var i in e) { var r = e[i]; "function" === typeof r && (delete e[i], n[i] = r) } return t[rW] = n, e }, onUpdate: function (e, t, n, i) { var r = t, a = r[aW]; a && (r.style = a(e) || {}); var o = r[rW]; if (o) for (var s in o) r.prop(s, o[s](e), i) } } }, sW = "@global", lW = "@global ", gW = function () { function e(e, t, n) { for (var i in this.type = "global", this.at = sW, this.isProcessed = !1, this.key = e, this.options = n, this.rules = new Zx((0, c.Z)({}, n, { parent: this })), t) this.rules.add(i, t[i]); this.rules.process() } var t = e.prototype; return t.getRule = function (e) { return this.rules.get(e) }, t.addRule = function (e, t, n) { var i = this.rules.add(e, t, n); return i && this.options.jss.plugins.onProcessRule(i), i }, t.replaceRule = function (e, t, n) { var i = this.rules.replace(e, t, n); return i && this.options.jss.plugins.onProcessRule(i), i }, t.indexOf = function (e) { return this.rules.indexOf(e) }, t.toString = function (e) { return this.rules.toString(e) }, e }(), cW = function () { function e(e, t, n) { this.type = "global", this.at = sW, this.isProcessed = !1, this.key = e, this.options = n; var i = e.substr(8); this.rule = n.jss.createRule(i, t, (0, c.Z)({}, n, { parent: this })) } return e.prototype.toString = function (e) { return this.rule ? this.rule.toString(e) : "" }, e }(), uW = /\s*,\s*/g; function CW(e, t) { for (var n = e.split(uW), i = "", r = 0; r < n.length; r++)i += t + " " + n[r].trim(), n[r + 1] && (i += ", "); return i } var dW = function () { return { onCreateRule: function (e, t, n) { if (!e) return null; if (e === sW) return new gW(e, t, n); if ("@" === e[0] && e.substr(0, 8) === lW) return new cW(e, t, n); var i = n.parent; return i && ("global" === i.type || i.options.parent && "global" === i.options.parent.type) && (n.scoped = !1), n.selector || !1 !== n.scoped || (n.selector = e), null }, onProcessRule: function (e, t) { "style" === e.type && t && (function (e, t) { var n = e.options, i = e.style, r = i ? i[sW] : null; if (r) { for (var a in r) t.addRule(a, r[a], (0, c.Z)({}, n, { selector: CW(a, e.selector) })); delete i[sW] } }(e, t), function (e, t) { var n = e.options, i = e.style; for (var r in i) if ("@" === r[0] && r.substr(0, sW.length) === sW) { var a = CW(r.substr(sW.length), e.selector); t.addRule(a, i[r], (0, c.Z)({}, n, { selector: a })), delete i[r] } }(e, t)) } } }, IW = /\s*,\s*/g, hW = /&/g, AW = /\$([\w-]+)/g; var pW = function () { function e(e, t) { return function (n, i) { var r = e.getRule(i) || t && t.getRule(i); return r ? r.selector : i } } function t(e, t) { for (var n = t.split(IW), i = e.split(IW), r = "", a = 0; a < n.length; a++)for (var o = n[a], s = 0; s < i.length; s++) { var l = i[s]; r && (r += ", "), r += -1 !== l.indexOf("&") ? l.replace(hW, o) : o + " " + l } return r } function n(e, t, n) { if (n) return (0, c.Z)({}, n, { index: n.index + 1 }); var i = e.options.nestingLevel; i = void 0 === i ? 1 : i + 1; var r = (0, c.Z)({}, e.options, { nestingLevel: i, index: t.indexOf(e) + 1 }); return delete r.name, r } return { onProcessStyle: function (i, r, a) { if ("style" !== r.type) return i; var o, s, l = r, g = l.options.parent; for (var u in i) { var C = -1 !== u.indexOf("&"), d = "@" === u[0]; if (C || d) { if (o = n(l, g, o), C) { var I = t(u, l.selector); s || (s = e(g, a)), I = I.replace(AW, s); var h = l.key + "-" + u; "replaceRule" in g ? g.replaceRule(h, i[u], (0, c.Z)({}, o, { selector: I })) : g.addRule(h, i[u], (0, c.Z)({}, o, { selector: I })) } else d && g.addRule(u, {}, o).addRule(l.key, i[u], { selector: l.selector }); delete i[u] } } return i } } }, fW = /[A-Z]/g, mW = /^ms-/, vW = {}; function bW(e) { return "-" + e.toLowerCase() } var yW = function (e) { if (vW.hasOwnProperty(e)) return vW[e]; var t = e.replace(fW, bW); return vW[e] = mW.test(t) ? "-" + t : t }; function GW(e) { var t = {}; for (var n in e) { t[0 === n.indexOf("--") ? n : yW(n)] = e[n] } return e.fallbacks && (Array.isArray(e.fallbacks) ? t.fallbacks = e.fallbacks.map(GW) : t.fallbacks = GW(e.fallbacks)), t } var BW = function () { return { onProcessStyle: function (e) { if (Array.isArray(e)) { for (var t = 0; t < e.length; t++)e[t] = GW(e[t]); return e } return GW(e) }, onChangeValue: function (e, t, n) { if (0 === t.indexOf("--")) return e; var i = yW(t); return t === i ? e : (n.prop(i, e), null) } } }, ZW = Jx && CSS ? CSS.px : "px", wW = Jx && CSS ? CSS.ms : "ms", SW = Jx && CSS ? CSS.percent : "%"; function RW(e) { var t = /(-[a-z])/g, n = function (e) { return e[1].toUpperCase() }, i = {}; for (var r in e) i[r] = e[r], i[r.replace(t, n)] = e[r]; return i } var xW = RW({ "animation-delay": wW, "animation-duration": wW, "background-position": ZW, "background-position-x": ZW, "background-position-y": ZW, "background-size": ZW, border: ZW, "border-bottom": ZW, "border-bottom-left-radius": ZW, "border-bottom-right-radius": ZW, "border-bottom-width": ZW, "border-left": ZW, "border-left-width": ZW, "border-radius": ZW, "border-right": ZW, "border-right-width": ZW, "border-top": ZW, "border-top-left-radius": ZW, "border-top-right-radius": ZW, "border-top-width": ZW, "border-width": ZW, "border-block": ZW, "border-block-end": ZW, "border-block-end-width": ZW, "border-block-start": ZW, "border-block-start-width": ZW, "border-block-width": ZW, "border-inline": ZW, "border-inline-end": ZW, "border-inline-end-width": ZW, "border-inline-start": ZW, "border-inline-start-width": ZW, "border-inline-width": ZW, "border-start-start-radius": ZW, "border-start-end-radius": ZW, "border-end-start-radius": ZW, "border-end-end-radius": ZW, margin: ZW, "margin-bottom": ZW, "margin-left": ZW, "margin-right": ZW, "margin-top": ZW, "margin-block": ZW, "margin-block-end": ZW, "margin-block-start": ZW, "margin-inline": ZW, "margin-inline-end": ZW, "margin-inline-start": ZW, padding: ZW, "padding-bottom": ZW, "padding-left": ZW, "padding-right": ZW, "padding-top": ZW, "padding-block": ZW, "padding-block-end": ZW, "padding-block-start": ZW, "padding-inline": ZW, "padding-inline-end": ZW, "padding-inline-start": ZW, "mask-position-x": ZW, "mask-position-y": ZW, "mask-size": ZW, height: ZW, width: ZW, "min-height": ZW, "max-height": ZW, "min-width": ZW, "max-width": ZW, bottom: ZW, left: ZW, top: ZW, right: ZW, inset: ZW, "inset-block": ZW, "inset-block-end": ZW, "inset-block-start": ZW, "inset-inline": ZW, "inset-inline-end": ZW, "inset-inline-start": ZW, "box-shadow": ZW, "text-shadow": ZW, "column-gap": ZW, "column-rule": ZW, "column-rule-width": ZW, "column-width": ZW, "font-size": ZW, "font-size-delta": ZW, "letter-spacing": ZW, "text-decoration-thickness": ZW, "text-indent": ZW, "text-stroke": ZW, "text-stroke-width": ZW, "word-spacing": ZW, motion: ZW, "motion-offset": ZW, outline: ZW, "outline-offset": ZW, "outline-width": ZW, perspective: ZW, "perspective-origin-x": SW, "perspective-origin-y": SW, "transform-origin": SW, "transform-origin-x": SW, "transform-origin-y": SW, "transform-origin-z": SW, "transition-delay": wW, "transition-duration": wW, "vertical-align": ZW, "flex-basis": ZW, "shape-margin": ZW, size: ZW, gap: ZW, grid: ZW, "grid-gap": ZW, "row-gap": ZW, "grid-row-gap": ZW, "grid-column-gap": ZW, "grid-template-rows": ZW, "grid-template-columns": ZW, "grid-auto-rows": ZW, "grid-auto-columns": ZW, "box-shadow-x": ZW, "box-shadow-y": ZW, "box-shadow-blur": ZW, "box-shadow-spread": ZW, "font-line-height": ZW, "text-shadow-x": ZW, "text-shadow-y": ZW, "text-shadow-blur": ZW }); function WW(e, t, n) { if (null == t) return t; if (Array.isArray(t)) for (var i = 0; i < t.length; i++)t[i] = WW(e, t[i], n); else if ("object" === typeof t) if ("fallbacks" === e) for (var r in t) t[r] = WW(r, t[r], n); else for (var a in t) t[a] = WW(e + "-" + a, t[a], n); else if ("number" === typeof t && !1 === isNaN(t)) { var o = n[e] || xW[e]; return !o || 0 === t && o === ZW ? t.toString() : "function" === typeof o ? o(t).toString() : "" + t + o } return t } var VW = function (e) { void 0 === e && (e = {}); var t = RW(e); return { onProcessStyle: function (e, n) { if ("style" !== n.type) return e; for (var i in e) e[i] = WW(i, e[i], t); return e }, onChangeValue: function (e, n) { return WW(n, e, t) } } }, kW = "", HW = "", MW = "", FW = "", NW = YR && "ontouchstart" in document.documentElement; if (YR) { var XW = { Moz: "-moz-", ms: "-ms-", O: "-o-", Webkit: "-webkit-" }, YW = document.createElement("p").style; for (var KW in XW) if (KW + "Transform" in YW) { kW = KW, HW = XW[KW]; break } "Webkit" === kW && "msHyphens" in YW && (kW = "ms", HW = XW.ms, FW = "edge"), "Webkit" === kW && "-apple-trailing-word" in YW && (MW = "apple") } var LW = { js: kW, css: HW, vendor: MW, browser: FW, isTouch: NW }; var zW = { noPrefill: ["appearance"], supportedProperty: function (e) { return "appearance" === e && ("ms" === LW.js ? "-webkit-" + e : LW.css + e) } }, EW = { noPrefill: ["color-adjust"], supportedProperty: function (e) { return "color-adjust" === e && ("Webkit" === LW.js ? LW.css + "print-" + e : e) } }, TW = /[-\s]+(.)?/g; function _W(e, t) { return t ? t.toUpperCase() : "" } function UW(e) { return e.replace(TW, _W) } function DW(e) { return UW("-" + e) } var PW, JW = { noPrefill: ["mask"], supportedProperty: function (e, t) { if (!/^mask/.test(e)) return !1; if ("Webkit" === LW.js) { var n = "mask-image"; if (UW(n) in t) return e; if (LW.js + DW(n) in t) return LW.css + e } return e } }, OW = { noPrefill: ["text-orientation"], supportedProperty: function (e) { return "text-orientation" === e && ("apple" !== LW.vendor || LW.isTouch ? e : LW.css + e) } }, jW = { noPrefill: ["transform"], supportedProperty: function (e, t, n) { return "transform" === e && (n.transform ? e : LW.css + e) } }, QW = { noPrefill: ["transition"], supportedProperty: function (e, t, n) { return "transition" === e && (n.transition ? e : LW.css + e) } }, qW = { noPrefill: ["writing-mode"], supportedProperty: function (e) { return "writing-mode" === e && ("Webkit" === LW.js || "ms" === LW.js && "edge" !== LW.browser ? LW.css + e : e) } }, $W = { noPrefill: ["user-select"], supportedProperty: function (e) { return "user-select" === e && ("Moz" === LW.js || "ms" === LW.js || "apple" === LW.vendor ? LW.css + e : e) } }, eV = { supportedProperty: function (e, t) { return !!/^break-/.test(e) && ("Webkit" === LW.js ? "WebkitColumn" + DW(e) in t && LW.css + "column-" + e : "Moz" === LW.js && ("page" + DW(e) in t && "page-" + e)) } }, tV = { supportedProperty: function (e, t) { if (!/^(border|margin|padding)-inline/.test(e)) return !1; if ("Moz" === LW.js) return e; var n = e.replace("-inline", ""); return LW.js + DW(n) in t && LW.css + n } }, nV = { supportedProperty: function (e, t) { return UW(e) in t && e } }, iV = { supportedProperty: function (e, t) { var n = DW(e); return "-" === e[0] || "-" === e[0] && "-" === e[1] ? e : LW.js + n in t ? LW.css + e : "Webkit" !== LW.js && "Webkit" + n in t && "-webkit-" + e } }, rV = { supportedProperty: function (e) { return "scroll-snap" === e.substring(0, 11) && ("ms" === LW.js ? "" + LW.css + e : e) } }, aV = { supportedProperty: function (e) { return "overscroll-behavior" === e && ("ms" === LW.js ? LW.css + "scroll-chaining" : e) } }, oV = { "flex-grow": "flex-positive", "flex-shrink": "flex-negative", "flex-basis": "flex-preferred-size", "justify-content": "flex-pack", order: "flex-order", "align-items": "flex-align", "align-content": "flex-line-pack" }, sV = { supportedProperty: function (e, t) { var n = oV[e]; return !!n && (LW.js + DW(n) in t && LW.css + n) } }, lV = { flex: "box-flex", "flex-grow": "box-flex", "flex-direction": ["box-orient", "box-direction"], order: "box-ordinal-group", "align-items": "box-align", "flex-flow": ["box-orient", "box-direction"], "justify-content": "box-pack" }, gV = Object.keys(lV), cV = function (e) { return LW.css + e }, uV = { supportedProperty: function (e, t, n) { var i = n.multiple; if (gV.indexOf(e) > -1) { var r = lV[e]; if (!Array.isArray(r)) return LW.js + DW(r) in t && LW.css + r; if (!i) return !1; for (var a = 0; a < r.length; a++)if (!(LW.js + DW(r[0]) in t)) return !1; return r.map(cV) } return !1 } }, CV = [zW, EW, JW, OW, jW, QW, qW, $W, eV, tV, nV, iV, rV, aV, sV, uV], dV = CV.filter((function (e) { return e.supportedProperty })).map((function (e) { return e.supportedProperty })), IV = CV.filter((function (e) { return e.noPrefill })).reduce((function (e, t) { return e.push.apply(e, (0, v.Z)(t.noPrefill)), e }), []), hV = {}; if (YR) { PW = document.createElement("p"); var AV = window.getComputedStyle(document.documentElement, ""); for (var pV in AV) isNaN(pV) || (hV[AV[pV]] = AV[pV]); IV.forEach((function (e) { return delete hV[e] })) } function fV(e, t) { if (void 0 === t && (t = {}), !PW) return e; if (null != hV[e]) return hV[e]; "transition" !== e && "transform" !== e || (t[e] = e in PW.style); for (var n = 0; n < dV.length && (hV[e] = dV[n](e, PW.style, t), !hV[e]); n++); try { PW.style[e] = "" } catch (i) { return !1 } return hV[e] } var mV, vV = {}, bV = { transition: 1, "transition-property": 1, "-webkit-transition": 1, "-webkit-transition-property": 1 }, yV = /(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g; function GV(e, t, n) { if ("var" === t) return "var"; if ("all" === t) return "all"; if ("all" === n) return ", all"; var i = t ? fV(t) : ", " + fV(n); return i || (t || n) } function BV(e, t) { var n = t; if (!mV || "content" === e) return t; if ("string" !== typeof n || !isNaN(parseInt(n, 10))) return n; var i = e + n; if (null != vV[i]) return vV[i]; try { mV.style[e] = n } catch (r) { return vV[i] = !1, !1 } if (bV[e]) n = n.replace(yV, GV); else if ("" === mV.style[e] && ("-ms-flex" === (n = LW.css + n) && (mV.style[e] = "-ms-flexbox"), mV.style[e] = n, "" === mV.style[e])) return vV[i] = !1, !1; return mV.style[e] = "", vV[i] = n, vV[i] } YR && (mV = document.createElement("p")); var ZV = function () { function e(t) { for (var n in t) { var i = t[n]; if ("fallbacks" === n && Array.isArray(i)) t[n] = i.map(e); else { var r = !1, a = fV(n); a && a !== n && (r = !0); var o = !1, s = BV(a, TR(i)); s && s !== i && (o = !0), (r || o) && (r && delete t[n], t[a || n] = s || i) } } return t } return { onProcessRule: function (e) { if ("keyframes" === e.type) { var t = e; t.at = function (e) { return "-" === e[1] || "ms" === LW.js ? e : "@" + LW.css + "keyframes" + e.substr(10) }(t.at) } }, onProcessStyle: function (t, n) { return "style" !== n.type ? t : e(t) }, onChangeValue: function (e, t) { return BV(t, TR(e)) || e } } }; var wV = function () { var e = function (e, t) { return e.length === t.length ? e > t ? 1 : -1 : e.length - t.length }; return { onProcessStyle: function (t, n) { if ("style" !== n.type) return t; for (var i = {}, r = Object.keys(t).sort(e), a = 0; a < r.length; a++)i[r[a]] = t[r[a]]; return i } } }; var SV = Px({ plugins: [oW(), dW(), pW(), BW(), VW(), "undefined" === typeof window ? null : ZV(), wV()] }), RV = function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.disableGlobal, n = void 0 !== t && t, i = e.productionPrefix, r = void 0 === i ? "jss" : i, a = e.seed, o = void 0 === a ? "" : a, s = "" === o ? "" : "".concat(o, "-"), l = 0, g = function () { return l += 1 }; return function (e, t) { var i = t.options.name; if (i && 0 === i.indexOf("Mui") && !t.options.link && !n) { if (-1 !== nW.indexOf(e.key)) return "Mui-".concat(e.key); var a = "".concat(s).concat(i, "-").concat(e.key); return t.options.theme[tW] && "" === o ? "".concat(a, "-").concat(g()) : a } return "".concat(s).concat(r).concat(g()) } }(), xV = { disableGeneration: !1, generateClassName: RV, jss: SV, sheetsCache: null, sheetsManager: new Map, sheetsRegistry: null }, WV = t.createContext(xV); var VV = -1e9; function kV(e) { return e && "object" === (0, pr.Z)(e) && e.constructor === Object } function HV(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : { clone: !0 }, i = n.clone ? (0, c.Z)({}, e) : e; return kV(e) && kV(t) && Object.keys(t).forEach((function (r) { "__proto__" !== r && (kV(t[r]) && r in e ? i[r] = HV(e[r], t[r], n) : i[r] = t[r]) })), i } var MV = {}; function FV(e, t) { var n = e.state, i = e.theme, r = e.stylesOptions, a = e.stylesCreator, o = e.name; if (!r.disableGeneration) { var s = qx.get(r.sheetsManager, a, i); s || (s = { refs: 0, staticSheet: null, dynamicStyles: null }, qx.set(r.sheetsManager, a, i, s)); var l = (0, c.Z)({}, a.options, r, { theme: i, flip: "boolean" === typeof r.flip ? r.flip : "rtl" === i.direction }); l.generateId = l.serverGenerateClassName || l.generateClassName; var g = r.sheetsRegistry; if (0 === s.refs) { var u; r.sheetsCache && (u = qx.get(r.sheetsCache, a, i)); var C = a.create(i, o); u || ((u = r.jss.createStyleSheet(C, (0, c.Z)({ link: !1 }, l))).attach(), r.sheetsCache && qx.set(r.sheetsCache, a, i, u)), g && g.add(u), s.staticSheet = u, s.dynamicStyles = Ox(C) } if (s.dynamicStyles) { var d = r.jss.createStyleSheet(s.dynamicStyles, (0, c.Z)({ link: !0 }, l)); d.update(t), d.attach(), n.dynamicSheet = d, n.classes = jx({ baseClasses: s.staticSheet.classes, newClasses: d.classes }), g && g.add(d) } else n.classes = s.staticSheet.classes; s.refs += 1 } } function NV(e) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, i = n.name, r = n.classNamePrefix, a = n.Component, o = n.defaultTheme, s = void 0 === o ? MV : o, l = or(n, ["name", "classNamePrefix", "Component", "defaultTheme"]), g = function (e) { var t = "function" === typeof e; return { create: function (n, i) { var r; try { r = t ? e(n) : e } catch (s) { throw s } if (!i || !n.overrides || !n.overrides[i]) return r; var a = n.overrides[i], o = (0, c.Z)({}, r); return Object.keys(a).forEach((function (e) { o[e] = HV(o[e], a[e]) })), o }, options: {} } }(e), u = i || r || "makeStyles"; g.options = { index: VV += 1, name: i, meta: u, classNamePrefix: u }; return function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = eW() || s, r = (0, c.Z)({}, t.useContext(WV), l), o = t.useRef(), u = t.useRef(); !function (e, n) { var i, r = t.useRef([]), a = t.useMemo((function () { return {} }), n); r.current !== a && (r.current = a, i = e()), t.useEffect((function () { return function () { i && i() } }), [a]) }((function () { var t = { name: i, state: {}, stylesCreator: g, stylesOptions: r, theme: n }; return FV(t, e), u.current = !1, o.current = t, function () { !function (e) { var t = e.state, n = e.theme, i = e.stylesOptions, r = e.stylesCreator; if (!i.disableGeneration) { var a = qx.get(i.sheetsManager, r, n); a.refs -= 1; var o = i.sheetsRegistry; 0 === a.refs && (qx.delete(i.sheetsManager, r, n), i.jss.removeStyleSheet(a.staticSheet), o && o.remove(a.staticSheet)), t.dynamicSheet && (i.jss.removeStyleSheet(t.dynamicSheet), o && o.remove(t.dynamicSheet)) } }(t) } }), [n, g]), t.useEffect((function () { u.current && function (e, t) { var n = e.state; n.dynamicSheet && n.dynamicSheet.update(t) }(o.current, e), u.current = !0 })); var C = function (e, t, n) { var i = e.state; if (e.stylesOptions.disableGeneration) return t || {}; i.cacheClasses || (i.cacheClasses = { value: null, lastProp: null, lastJSS: {} }); var r = !1; return i.classes !== i.cacheClasses.lastJSS && (i.cacheClasses.lastJSS = i.classes, r = !0), t !== i.cacheClasses.lastProp && (i.cacheClasses.lastProp = t, r = !0), r && (i.cacheClasses.value = jx({ baseClasses: i.cacheClasses.lastJSS, newClasses: t, Component: n })), i.cacheClasses.value }(o.current, e.classes, a); return C } } var XV = function (e) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return function (i) { var r = n.defaultTheme, a = n.withTheme, o = void 0 !== a && a, s = n.name, l = or(n, ["defaultTheme", "withTheme", "name"]); var g = s, u = NV(e, (0, c.Z)({ defaultTheme: r, Component: i, name: s || i.displayName, classNamePrefix: g }, l)), C = t.forwardRef((function (e, n) { e.classes; var a, l = e.innerRef, g = or(e, ["classes", "innerRef"]), C = u((0, c.Z)({}, i.defaultProps, e)), d = g; return ("string" === typeof s || o) && (a = eW() || r, s && (d = function (e) { var t = e.theme, n = e.name, i = e.props; if (!t || !t.props || !t.props[n]) return i; var r, a = t.props[n]; for (r in a) void 0 === i[r] && (i[r] = a[r]); return i }({ theme: a, name: s, props: g })), o && !d.theme && (d.theme = a)), t.createElement(i, (0, c.Z)({ ref: l || n, classes: C }, d)) })); return F()(C, i), C } }, YV = ["xs", "sm", "md", "lg", "xl"]; function KV(e, t, n) { var i; return (0, c.Z)({ gutters: function () { var n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.", "You can use the source of the mixin directly:", "\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")), (0, c.Z)({ paddingLeft: t(2), paddingRight: t(2) }, n, (0, l.Z)({}, e.up("sm"), (0, c.Z)({ paddingLeft: t(3), paddingRight: t(3) }, n[e.up("sm")]))) }, toolbar: (i = { minHeight: 56 }, (0, l.Z)(i, "".concat(e.up("xs"), " and (orientation: landscape)"), { minHeight: 48 }), (0, l.Z)(i, e.up("sm"), { minHeight: 64 }), i) }, n) } function LV(e) { for (var t = "https://mui.com/production-error/?code=" + e, n = 1; n < arguments.length; n += 1)t += "&args[]=" + encodeURIComponent(arguments[n]); return "Minified Material-UI error #" + e + "; visit " + t + " for the full message." } var zV = { black: "#000", white: "#fff" }, EV = { 50: "#fafafa", 100: "#f5f5f5", 200: "#eeeeee", 300: "#e0e0e0", 400: "#bdbdbd", 500: "#9e9e9e", 600: "#757575", 700: "#616161", 800: "#424242", 900: "#212121", A100: "#d5d5d5", A200: "#aaaaaa", A400: "#303030", A700: "#616161" }, TV = { 50: "#e8eaf6", 100: "#c5cae9", 200: "#9fa8da", 300: "#7986cb", 400: "#5c6bc0", 500: "#3f51b5", 600: "#3949ab", 700: "#303f9f", 800: "#283593", 900: "#1a237e", A100: "#8c9eff", A200: "#536dfe", A400: "#3d5afe", A700: "#304ffe" }, _V = { 50: "#fce4ec", 100: "#f8bbd0", 200: "#f48fb1", 300: "#f06292", 400: "#ec407a", 500: "#e91e63", 600: "#d81b60", 700: "#c2185b", 800: "#ad1457", 900: "#880e4f", A100: "#ff80ab", A200: "#ff4081", A400: "#f50057", A700: "#c51162" }, UV = { 50: "#ffebee", 100: "#ffcdd2", 200: "#ef9a9a", 300: "#e57373", 400: "#ef5350", 500: "#f44336", 600: "#e53935", 700: "#d32f2f", 800: "#c62828", 900: "#b71c1c", A100: "#ff8a80", A200: "#ff5252", A400: "#ff1744", A700: "#d50000" }, DV = { 50: "#fff3e0", 100: "#ffe0b2", 200: "#ffcc80", 300: "#ffb74d", 400: "#ffa726", 500: "#ff9800", 600: "#fb8c00", 700: "#f57c00", 800: "#ef6c00", 900: "#e65100", A100: "#ffd180", A200: "#ffab40", A400: "#ff9100", A700: "#ff6d00" }, PV = { 50: "#e3f2fd", 100: "#bbdefb", 200: "#90caf9", 300: "#64b5f6", 400: "#42a5f5", 500: "#2196f3", 600: "#1e88e5", 700: "#1976d2", 800: "#1565c0", 900: "#0d47a1", A100: "#82b1ff", A200: "#448aff", A400: "#2979ff", A700: "#2962ff" }, JV = { 50: "#e8f5e9", 100: "#c8e6c9", 200: "#a5d6a7", 300: "#81c784", 400: "#66bb6a", 500: "#4caf50", 600: "#43a047", 700: "#388e3c", 800: "#2e7d32", 900: "#1b5e20", A100: "#b9f6ca", A200: "#69f0ae", A400: "#00e676", A700: "#00c853" }; function OV(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1; return Math.min(Math.max(t, e), n) } function jV(e) { if (e.type) return e; if ("#" === e.charAt(0)) return jV(function (e) { e = e.substr(1); var t = new RegExp(".{1,".concat(e.length >= 6 ? 2 : 1, "}"), "g"), n = e.match(t); return n && 1 === n[0].length && (n = n.map((function (e) { return e + e }))), n ? "rgb".concat(4 === n.length ? "a" : "", "(").concat(n.map((function (e, t) { return t < 3 ? parseInt(e, 16) : Math.round(parseInt(e, 16) / 255 * 1e3) / 1e3 })).join(", "), ")") : "" }(e)); var t = e.indexOf("("), n = e.substring(0, t); if (-1 === ["rgb", "rgba", "hsl", "hsla"].indexOf(n)) throw new Error(LV(3, e)); var i = e.substring(t + 1, e.length - 1).split(","); return { type: n, values: i = i.map((function (e) { return parseFloat(e) })) } } function QV(e) { var t = e.type, n = e.values; return -1 !== t.indexOf("rgb") ? n = n.map((function (e, t) { return t < 3 ? parseInt(e, 10) : e })) : -1 !== t.indexOf("hsl") && (n[1] = "".concat(n[1], "%"), n[2] = "".concat(n[2], "%")), "".concat(t, "(").concat(n.join(", "), ")") } function qV(e) { var t = "hsl" === (e = jV(e)).type ? jV(function (e) { var t = (e = jV(e)).values, n = t[0], i = t[1] / 100, r = t[2] / 100, a = i * Math.min(r, 1 - r), o = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : (e + n / 30) % 12; return r - a * Math.max(Math.min(t - 3, 9 - t, 1), -1) }, s = "rgb", l = [Math.round(255 * o(0)), Math.round(255 * o(8)), Math.round(255 * o(4))]; return "hsla" === e.type && (s += "a", l.push(t[3])), QV({ type: s, values: l }) }(e)).values : e.values; return t = t.map((function (e) { return (e /= 255) <= .03928 ? e / 12.92 : Math.pow((e + .055) / 1.055, 2.4) })), Number((.2126 * t[0] + .7152 * t[1] + .0722 * t[2]).toFixed(3)) } function $V(e, t) { if (e = jV(e), t = OV(t), -1 !== e.type.indexOf("hsl")) e.values[2] *= 1 - t; else if (-1 !== e.type.indexOf("rgb")) for (var n = 0; n < 3; n += 1)e.values[n] *= 1 - t; return QV(e) } function ek(e, t) { if (e = jV(e), t = OV(t), -1 !== e.type.indexOf("hsl")) e.values[2] += (100 - e.values[2]) * t; else if (-1 !== e.type.indexOf("rgb")) for (var n = 0; n < 3; n += 1)e.values[n] += (255 - e.values[n]) * t; return QV(e) } var tk = { text: { primary: "rgba(0, 0, 0, 0.87)", secondary: "rgba(0, 0, 0, 0.54)", disabled: "rgba(0, 0, 0, 0.38)", hint: "rgba(0, 0, 0, 0.38)" }, divider: "rgba(0, 0, 0, 0.12)", background: { paper: zV.white, default: EV[50] }, action: { active: "rgba(0, 0, 0, 0.54)", hover: "rgba(0, 0, 0, 0.04)", hoverOpacity: .04, selected: "rgba(0, 0, 0, 0.08)", selectedOpacity: .08, disabled: "rgba(0, 0, 0, 0.26)", disabledBackground: "rgba(0, 0, 0, 0.12)", disabledOpacity: .38, focus: "rgba(0, 0, 0, 0.12)", focusOpacity: .12, activatedOpacity: .12 } }, nk = { text: { primary: zV.white, secondary: "rgba(255, 255, 255, 0.7)", disabled: "rgba(255, 255, 255, 0.5)", hint: "rgba(255, 255, 255, 0.5)", icon: "rgba(255, 255, 255, 0.5)" }, divider: "rgba(255, 255, 255, 0.12)", background: { paper: EV[800], default: "#303030" }, action: { active: zV.white, hover: "rgba(255, 255, 255, 0.08)", hoverOpacity: .08, selected: "rgba(255, 255, 255, 0.16)", selectedOpacity: .16, disabled: "rgba(255, 255, 255, 0.3)", disabledBackground: "rgba(255, 255, 255, 0.12)", disabledOpacity: .38, focus: "rgba(255, 255, 255, 0.12)", focusOpacity: .12, activatedOpacity: .24 } }; function ik(e, t, n, i) { var r = i.light || i, a = i.dark || 1.5 * i; e[t] || (e.hasOwnProperty(n) ? e[t] = e[n] : "light" === t ? e.light = ek(e.main, r) : "dark" === t && (e.dark = $V(e.main, a))) } function rk(e) { var t = e.primary, n = void 0 === t ? { light: TV[300], main: TV[500], dark: TV[700] } : t, i = e.secondary, r = void 0 === i ? { light: _V.A200, main: _V.A400, dark: _V.A700 } : i, a = e.error, o = void 0 === a ? { light: UV[300], main: UV[500], dark: UV[700] } : a, s = e.warning, l = void 0 === s ? { light: DV[300], main: DV[500], dark: DV[700] } : s, g = e.info, u = void 0 === g ? { light: PV[300], main: PV[500], dark: PV[700] } : g, C = e.success, d = void 0 === C ? { light: JV[300], main: JV[500], dark: JV[700] } : C, I = e.type, h = void 0 === I ? "light" : I, A = e.contrastThreshold, p = void 0 === A ? 3 : A, f = e.tonalOffset, m = void 0 === f ? .2 : f, v = or(e, ["primary", "secondary", "error", "warning", "info", "success", "type", "contrastThreshold", "tonalOffset"]); function b(e) { var t = function (e, t) { var n = qV(e), i = qV(t); return (Math.max(n, i) + .05) / (Math.min(n, i) + .05) }(e, nk.text.primary) >= p ? nk.text.primary : tk.text.primary; return t } var y = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 500, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 300, i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 700; if (!(e = (0, c.Z)({}, e)).main && e[t] && (e.main = e[t]), !e.main) throw new Error(LV(4, t)); if ("string" !== typeof e.main) throw new Error(LV(5, JSON.stringify(e.main))); return ik(e, "light", n, m), ik(e, "dark", i, m), e.contrastText || (e.contrastText = b(e.main)), e }, G = { dark: nk, light: tk }; return HV((0, c.Z)({ common: zV, type: h, primary: y(n), secondary: y(r, "A400", "A200", "A700"), error: y(o), warning: y(l), info: y(u), success: y(d), grey: EV, contrastThreshold: p, getContrastText: b, augmentColor: y, tonalOffset: m }, G[h]), v) } function ak(e) { return Math.round(1e5 * e) / 1e5 } function ok(e) { return ak(e) } var sk = { textTransform: "uppercase" }, lk = '"Roboto", "Helvetica", "Arial", sans-serif'; function gk(e, t) { var n = "function" === typeof t ? t(e) : t, i = n.fontFamily, r = void 0 === i ? lk : i, a = n.fontSize, o = void 0 === a ? 14 : a, s = n.fontWeightLight, l = void 0 === s ? 300 : s, g = n.fontWeightRegular, u = void 0 === g ? 400 : g, C = n.fontWeightMedium, d = void 0 === C ? 500 : C, I = n.fontWeightBold, h = void 0 === I ? 700 : I, A = n.htmlFontSize, p = void 0 === A ? 16 : A, f = n.allVariants, m = n.pxToRem, v = or(n, ["fontFamily", "fontSize", "fontWeightLight", "fontWeightRegular", "fontWeightMedium", "fontWeightBold", "htmlFontSize", "allVariants", "pxToRem"]); var b = o / 14, y = m || function (e) { return "".concat(e / p * b, "rem") }, G = function (e, t, n, i, a) { return (0, c.Z)({ fontFamily: r, fontWeight: e, fontSize: y(t), lineHeight: n }, r === lk ? { letterSpacing: "".concat(ak(i / t), "em") } : {}, a, f) }, B = { h1: G(l, 96, 1.167, -1.5), h2: G(l, 60, 1.2, -.5), h3: G(u, 48, 1.167, 0), h4: G(u, 34, 1.235, .25), h5: G(u, 24, 1.334, 0), h6: G(d, 20, 1.6, .15), subtitle1: G(u, 16, 1.75, .15), subtitle2: G(d, 14, 1.57, .1), body1: G(u, 16, 1.5, .15), body2: G(u, 14, 1.43, .15), button: G(d, 14, 1.75, .4, sk), caption: G(u, 12, 1.66, .4), overline: G(u, 12, 2.66, 1, sk) }; return HV((0, c.Z)({ htmlFontSize: p, pxToRem: y, round: ok, fontFamily: r, fontSize: o, fontWeightLight: l, fontWeightRegular: u, fontWeightMedium: d, fontWeightBold: h }, B), v, { clone: !1 }) } function ck() { return ["".concat(arguments.length <= 0 ? void 0 : arguments[0], "px ").concat(arguments.length <= 1 ? void 0 : arguments[1], "px ").concat(arguments.length <= 2 ? void 0 : arguments[2], "px ").concat(arguments.length <= 3 ? void 0 : arguments[3], "px rgba(0,0,0,").concat(.2, ")"), "".concat(arguments.length <= 4 ? void 0 : arguments[4], "px ").concat(arguments.length <= 5 ? void 0 : arguments[5], "px ").concat(arguments.length <= 6 ? void 0 : arguments[6], "px ").concat(arguments.length <= 7 ? void 0 : arguments[7], "px rgba(0,0,0,").concat(.14, ")"), "".concat(arguments.length <= 8 ? void 0 : arguments[8], "px ").concat(arguments.length <= 9 ? void 0 : arguments[9], "px ").concat(arguments.length <= 10 ? void 0 : arguments[10], "px ").concat(arguments.length <= 11 ? void 0 : arguments[11], "px rgba(0,0,0,").concat(.12, ")")].join(",") } var uk = ["none", ck(0, 2, 1, -1, 0, 1, 1, 0, 0, 1, 3, 0), ck(0, 3, 1, -2, 0, 2, 2, 0, 0, 1, 5, 0), ck(0, 3, 3, -2, 0, 3, 4, 0, 0, 1, 8, 0), ck(0, 2, 4, -1, 0, 4, 5, 0, 0, 1, 10, 0), ck(0, 3, 5, -1, 0, 5, 8, 0, 0, 1, 14, 0), ck(0, 3, 5, -1, 0, 6, 10, 0, 0, 1, 18, 0), ck(0, 4, 5, -2, 0, 7, 10, 1, 0, 2, 16, 1), ck(0, 5, 5, -3, 0, 8, 10, 1, 0, 3, 14, 2), ck(0, 5, 6, -3, 0, 9, 12, 1, 0, 3, 16, 2), ck(0, 6, 6, -3, 0, 10, 14, 1, 0, 4, 18, 3), ck(0, 6, 7, -4, 0, 11, 15, 1, 0, 4, 20, 3), ck(0, 7, 8, -4, 0, 12, 17, 2, 0, 5, 22, 4), ck(0, 7, 8, -4, 0, 13, 19, 2, 0, 5, 24, 4), ck(0, 7, 9, -4, 0, 14, 21, 2, 0, 5, 26, 4), ck(0, 8, 9, -5, 0, 15, 22, 2, 0, 6, 28, 5), ck(0, 8, 10, -5, 0, 16, 24, 2, 0, 6, 30, 5), ck(0, 8, 11, -5, 0, 17, 26, 2, 0, 6, 32, 5), ck(0, 9, 11, -5, 0, 18, 28, 2, 0, 7, 34, 6), ck(0, 9, 12, -6, 0, 19, 29, 2, 0, 7, 36, 6), ck(0, 10, 13, -6, 0, 20, 31, 3, 0, 8, 38, 7), ck(0, 10, 13, -6, 0, 21, 33, 3, 0, 8, 40, 7), ck(0, 10, 14, -6, 0, 22, 35, 3, 0, 8, 42, 7), ck(0, 11, 14, -7, 0, 23, 36, 3, 0, 9, 44, 8), ck(0, 11, 15, -7, 0, 24, 38, 3, 0, 9, 46, 8)], Ck = { borderRadius: 4 }, dk = { xs: 0, sm: 600, md: 960, lg: 1280, xl: 1920 }, Ik = { keys: ["xs", "sm", "md", "lg", "xl"], up: function (e) { return "@media (min-width:".concat(dk[e], "px)") } }; var hk = function (e, t) { return t ? HV(e, t, { clone: !1 }) : e }; var Ak = { m: "margin", p: "padding" }, pk = { t: "Top", r: "Right", b: "Bottom", l: "Left", x: ["Left", "Right"], y: ["Top", "Bottom"] }, fk = { marginX: "mx", marginY: "my", paddingX: "px", paddingY: "py" }, mk = function (e) { var t = {}; return function (n) { return void 0 === t[n] && (t[n] = e(n)), t[n] } }((function (e) { if (e.length > 2) { if (!fk[e]) return [e]; e = fk[e] } var t = e.split(""), n = (0, r.Z)(t, 2), i = n[0], a = n[1], o = Ak[i], s = pk[a] || ""; return Array.isArray(s) ? s.map((function (e) { return o + e })) : [o + s] })), vk = ["m", "mt", "mr", "mb", "ml", "mx", "my", "p", "pt", "pr", "pb", "pl", "px", "py", "margin", "marginTop", "marginRight", "marginBottom", "marginLeft", "marginX", "marginY", "padding", "paddingTop", "paddingRight", "paddingBottom", "paddingLeft", "paddingX", "paddingY"]; function bk(e) { var t = e.spacing || 8; return "number" === typeof t ? function (e) { return t * e } : Array.isArray(t) ? function (e) { return t[e] } : "function" === typeof t ? t : function () { } } function yk(e, t) { return function (n) { return e.reduce((function (e, i) { return e[i] = function (e, t) { if ("string" === typeof t || null == t) return t; var n = e(Math.abs(t)); return t >= 0 ? n : "number" === typeof n ? -n : "-".concat(n) }(t, n), e }), {}) } } function Gk(e) { var t = bk(e.theme); return Object.keys(e).map((function (n) { if (-1 === vk.indexOf(n)) return null; var i = yk(mk(n), t), r = e[n]; return function (e, t, n) { if (Array.isArray(t)) { var i = e.theme.breakpoints || Ik; return t.reduce((function (e, r, a) { return e[i.up(i.keys[a])] = n(t[a]), e }), {}) } if ("object" === (0, pr.Z)(t)) { var r = e.theme.breakpoints || Ik; return Object.keys(t).reduce((function (e, i) { return e[r.up(i)] = n(t[i]), e }), {}) } return n(t) }(e, r, i) })).reduce(hk, {}) } Gk.propTypes = {}, Gk.filterProps = vk; var Bk = { easeInOut: "cubic-bezier(0.4, 0, 0.2, 1)", easeOut: "cubic-bezier(0.0, 0, 0.2, 1)", easeIn: "cubic-bezier(0.4, 0, 1, 1)", sharp: "cubic-bezier(0.4, 0, 0.6, 1)" }, Zk = { shortest: 150, shorter: 200, short: 250, standard: 300, complex: 375, enteringScreen: 225, leavingScreen: 195 }; function wk(e) { return "".concat(Math.round(e), "ms") } var Sk = { easing: Bk, duration: Zk, create: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ["all"], t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = t.duration, i = void 0 === n ? Zk.standard : n, r = t.easing, a = void 0 === r ? Bk.easeInOut : r, o = t.delay, s = void 0 === o ? 0 : o; or(t, ["duration", "easing", "delay"]); return (Array.isArray(e) ? e : [e]).map((function (e) { return "".concat(e, " ").concat("string" === typeof i ? i : wk(i), " ").concat(a, " ").concat("string" === typeof s ? s : wk(s)) })).join(",") }, getAutoHeightDuration: function (e) { if (!e) return 0; var t = e / 36; return Math.round(10 * (4 + 15 * Math.pow(t, .25) + t / 5)) } }, Rk = { mobileStepper: 1e3, speedDial: 1050, appBar: 1100, drawer: 1200, modal: 1300, snackbar: 1400, tooltip: 1500 }; function xk() { for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.breakpoints, n = void 0 === t ? {} : t, i = e.mixins, r = void 0 === i ? {} : i, a = e.palette, o = void 0 === a ? {} : a, s = e.spacing, l = e.typography, g = void 0 === l ? {} : l, u = or(e, ["breakpoints", "mixins", "palette", "spacing", "typography"]), C = rk(o), d = function (e) { var t = e.values, n = void 0 === t ? { xs: 0, sm: 600, md: 960, lg: 1280, xl: 1920 } : t, i = e.unit, r = void 0 === i ? "px" : i, a = e.step, o = void 0 === a ? 5 : a, s = or(e, ["values", "unit", "step"]); function l(e) { var t = "number" === typeof n[e] ? n[e] : e; return "@media (min-width:".concat(t).concat(r, ")") } function g(e, t) { var i = YV.indexOf(t); return i === YV.length - 1 ? l(e) : "@media (min-width:".concat("number" === typeof n[e] ? n[e] : e).concat(r, ") and ") + "(max-width:".concat((-1 !== i && "number" === typeof n[YV[i + 1]] ? n[YV[i + 1]] : t) - o / 100).concat(r, ")") } return (0, c.Z)({ keys: YV, values: n, up: l, down: function (e) { var t = YV.indexOf(e) + 1, i = n[YV[t]]; return t === YV.length ? l("xs") : "@media (max-width:".concat(("number" === typeof i && t > 0 ? i : e) - o / 100).concat(r, ")") }, between: g, only: function (e) { return g(e, e) }, width: function (e) { return n[e] } }, s) }(n), I = function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 8; if (e.mui) return e; var t = bk({ spacing: e }), n = function () { for (var e = arguments.length, n = new Array(e), i = 0; i < e; i++)n[i] = arguments[i]; return 0 === n.length ? t(1) : 1 === n.length ? t(n[0]) : n.map((function (e) { if ("string" === typeof e) return e; var n = t(e); return "number" === typeof n ? "".concat(n, "px") : n })).join(" ") }; return Object.defineProperty(n, "unit", { get: function () { return e } }), n.mui = !0, n }(s), h = HV({ breakpoints: d, direction: "ltr", mixins: KV(d, I, r), overrides: {}, palette: C, props: {}, shadows: uk, typography: gk(C, g), spacing: I, shape: Ck, transitions: Sk, zIndex: Rk }, u), A = arguments.length, p = new Array(A > 1 ? A - 1 : 0), f = 1; f < A; f++)p[f - 1] = arguments[f]; return h = p.reduce((function (e, t) { return HV(e, t) }), h) } var Wk = xk(); var Vk = function (e, t) { return XV(e, (0, c.Z)({ defaultTheme: Wk }, t)) }, kk = t.forwardRef((function (e, n) { var i = e.classes, r = e.className, a = e.component, o = void 0 === a ? "div" : a, s = e.square, l = void 0 !== s && s, g = e.elevation, u = void 0 === g ? 1 : g, C = e.variant, d = void 0 === C ? "elevation" : C, I = or(e, ["classes", "className", "component", "square", "elevation", "variant"]); return t.createElement(o, (0, c.Z)({ className: NR(i.root, r, "outlined" === d ? i.outlined : i["elevation".concat(u)], !l && i.rounded), ref: n }, I)) })), Hk = Vk((function (e) { var t = {}; return e.shadows.forEach((function (e, n) { t["elevation".concat(n)] = { boxShadow: e } })), (0, c.Z)({ root: { backgroundColor: e.palette.background.paper, color: e.palette.text.primary, transition: e.transitions.create("box-shadow") }, rounded: { borderRadius: e.shape.borderRadius }, outlined: { border: "1px solid ".concat(e.palette.divider) } }, t) }), { name: "MuiPaper" })(kk), Mk = t.forwardRef((function (e, n) { var i = e.active, r = e.alternativeLabel, a = void 0 !== r && r, o = e.classes, s = e.className, l = e.completed, g = e.disabled, u = (e.index, e.orientation), C = void 0 === u ? "horizontal" : u, d = or(e, ["active", "alternativeLabel", "classes", "className", "completed", "disabled", "index", "orientation"]); return t.createElement("div", (0, c.Z)({ className: NR(o.root, o[C], s, a && o.alternativeLabel, i && o.active, l && o.completed, g && o.disabled), ref: n }, d), t.createElement("span", { className: NR(o.line, { horizontal: o.lineHorizontal, vertical: o.lineVertical }[C]) })) })), Fk = Vk((function (e) { return { root: { flex: "1 1 auto" }, horizontal: {}, vertical: { marginLeft: 12, padding: "0 0 8px" }, alternativeLabel: { position: "absolute", top: 12, left: "calc(-50% + 20px)", right: "calc(50% + 20px)" }, active: {}, completed: {}, disabled: {}, line: { display: "block", borderColor: "light" === e.palette.type ? e.palette.grey[400] : e.palette.grey[600] }, lineHorizontal: { borderTopStyle: "solid", borderTopWidth: 1 }, lineVertical: { borderLeftStyle: "solid", borderLeftWidth: 1, minHeight: 24 } } }), { name: "MuiStepConnector" })(Mk), Nk = t.createElement(Fk, null), Xk = t.forwardRef((function (e, n) { var i = e.activeStep, r = void 0 === i ? 0 : i, a = e.alternativeLabel, o = void 0 !== a && a, s = e.children, l = e.classes, g = e.className, u = e.connector, C = void 0 === u ? Nk : u, d = e.nonLinear, I = void 0 !== d && d, h = e.orientation, A = void 0 === h ? "horizontal" : h, p = or(e, ["activeStep", "alternativeLabel", "children", "classes", "className", "connector", "nonLinear", "orientation"]), f = t.isValidElement(C) ? t.cloneElement(C, { orientation: A }) : null, m = t.Children.toArray(s), v = m.map((function (e, n) { var i = { index: n, active: !1, completed: !1, disabled: !1 }; return r === n ? i.active = !0 : !I && r > n ? i.completed = !0 : !I && r < n && (i.disabled = !0), t.cloneElement(e, (0, c.Z)({ alternativeLabel: o, connector: f, last: n + 1 === m.length, orientation: A }, i, e.props)) })); return t.createElement(Hk, (0, c.Z)({ square: !0, elevation: 0, className: NR(l.root, l[A], g, o && l.alternativeLabel), ref: n }, p), v) })), Yk = Vk({ root: { display: "flex", padding: 24 }, horizontal: { flexDirection: "row", alignItems: "center" }, vertical: { flexDirection: "column" }, alternativeLabel: { alignItems: "flex-start" } }, { name: "MuiStepper" })(Xk), Kk = (n(3413), t.forwardRef((function (e, n) { var i = e.active, r = void 0 !== i && i, a = e.alternativeLabel, o = e.children, s = e.classes, l = e.className, g = e.completed, u = void 0 !== g && g, C = e.connector, d = e.disabled, I = void 0 !== d && d, h = e.expanded, A = void 0 !== h && h, p = e.index, f = e.last, m = e.orientation, v = or(e, ["active", "alternativeLabel", "children", "classes", "className", "completed", "connector", "disabled", "expanded", "index", "last", "orientation"]), b = C ? t.cloneElement(C, { orientation: m, alternativeLabel: a, index: p, active: r, completed: u, disabled: I }) : null, y = t.createElement("div", (0, c.Z)({ className: NR(s.root, s[m], l, a && s.alternativeLabel, u && s.completed), ref: n }, v), b && a && 0 !== p ? b : null, t.Children.map(o, (function (e) { return t.isValidElement(e) ? t.cloneElement(e, (0, c.Z)({ active: r, alternativeLabel: a, completed: u, disabled: I, expanded: A, last: f, icon: p + 1, orientation: m }, e.props)) : null }))); return b && !a && 0 !== p ? t.createElement(t.Fragment, null, b, y) : y }))), Lk = Vk({ root: {}, horizontal: { paddingLeft: 8, paddingRight: 8 }, vertical: {}, alternativeLabel: { flex: 1, position: "relative" }, completed: {} }, { name: "MuiStep" })(Kk); function zk(e) { if ("string" !== typeof e) throw new Error(LV(7)); return e.charAt(0).toUpperCase() + e.slice(1) } var Ek = { h1: "h1", h2: "h2", h3: "h3", h4: "h4", h5: "h5", h6: "h6", subtitle1: "h6", subtitle2: "h6", body1: "p", body2: "p" }, Tk = t.forwardRef((function (e, n) { var i = e.align, r = void 0 === i ? "inherit" : i, a = e.classes, o = e.className, s = e.color, l = void 0 === s ? "initial" : s, g = e.component, u = e.display, C = void 0 === u ? "initial" : u, d = e.gutterBottom, I = void 0 !== d && d, h = e.noWrap, A = void 0 !== h && h, p = e.paragraph, f = void 0 !== p && p, m = e.variant, v = void 0 === m ? "body1" : m, b = e.variantMapping, y = void 0 === b ? Ek : b, G = or(e, ["align", "classes", "className", "color", "component", "display", "gutterBottom", "noWrap", "paragraph", "variant", "variantMapping"]), B = g || (f ? "p" : y[v] || Ek[v]) || "span"; return t.createElement(B, (0, c.Z)({ className: NR(a.root, o, "inherit" !== v && a[v], "initial" !== l && a["color".concat(zk(l))], A && a.noWrap, I && a.gutterBottom, f && a.paragraph, "inherit" !== r && a["align".concat(zk(r))], "initial" !== C && a["display".concat(zk(C))]), ref: n }, G)) })), _k = Vk((function (e) { return { root: { margin: 0 }, body2: e.typography.body2, body1: e.typography.body1, caption: e.typography.caption, button: e.typography.button, h1: e.typography.h1, h2: e.typography.h2, h3: e.typography.h3, h4: e.typography.h4, h5: e.typography.h5, h6: e.typography.h6, subtitle1: e.typography.subtitle1, subtitle2: e.typography.subtitle2, overline: e.typography.overline, srOnly: { position: "absolute", height: 1, width: 1, overflow: "hidden" }, alignLeft: { textAlign: "left" }, alignCenter: { textAlign: "center" }, alignRight: { textAlign: "right" }, alignJustify: { textAlign: "justify" }, noWrap: { overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }, gutterBottom: { marginBottom: "0.35em" }, paragraph: { marginBottom: 16 }, colorInherit: { color: "inherit" }, colorPrimary: { color: e.palette.primary.main }, colorSecondary: { color: e.palette.secondary.main }, colorTextPrimary: { color: e.palette.text.primary }, colorTextSecondary: { color: e.palette.text.secondary }, colorError: { color: e.palette.error.main }, displayInline: { display: "inline" }, displayBlock: { display: "block" } } }), { name: "MuiTypography" })(Tk), Uk = t.forwardRef((function (e, n) { var i = e.children, r = e.classes, a = e.className, o = e.color, s = void 0 === o ? "inherit" : o, l = e.component, g = void 0 === l ? "svg" : l, u = e.fontSize, C = void 0 === u ? "medium" : u, d = e.htmlColor, I = e.titleAccess, h = e.viewBox, A = void 0 === h ? "0 0 24 24" : h, p = or(e, ["children", "classes", "className", "color", "component", "fontSize", "htmlColor", "titleAccess", "viewBox"]); return t.createElement(g, (0, c.Z)({ className: NR(r.root, a, "inherit" !== s && r["color".concat(zk(s))], "default" !== C && "medium" !== C && r["fontSize".concat(zk(C))]), focusable: "false", viewBox: A, color: d, "aria-hidden": !I || void 0, role: I ? "img" : void 0, ref: n }, p), i, I ? t.createElement("title", null, I) : null) })); Uk.muiName = "SvgIcon"; var Dk = Vk((function (e) { return { root: { userSelect: "none", width: "1em", height: "1em", display: "inline-block", fill: "currentColor", flexShrink: 0, fontSize: e.typography.pxToRem(24), transition: e.transitions.create("fill", { duration: e.transitions.duration.shorter }) }, colorPrimary: { color: e.palette.primary.main }, colorSecondary: { color: e.palette.secondary.main }, colorAction: { color: e.palette.action.active }, colorError: { color: e.palette.error.main }, colorDisabled: { color: e.palette.action.disabled }, fontSizeInherit: { fontSize: "inherit" }, fontSizeSmall: { fontSize: e.typography.pxToRem(20) }, fontSizeLarge: { fontSize: e.typography.pxToRem(35) } } }), { name: "MuiSvgIcon" })(Uk); function Pk(e, n) { var i = function (n, i) { return t.createElement(Dk, (0, c.Z)({ ref: i }, n), e) }; return i.muiName = Dk.muiName, t.memo(t.forwardRef(i)) } var Jk = Pk(t.createElement("path", { d: "M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z" })), Ok = Pk(t.createElement("path", { d: "M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z" })), jk = t.createElement("circle", { cx: "12", cy: "12", r: "12" }), Qk = t.forwardRef((function (e, n) { var i = e.completed, r = void 0 !== i && i, a = e.icon, o = e.active, s = void 0 !== o && o, l = e.error, g = void 0 !== l && l, c = e.classes; if ("number" === typeof a || "string" === typeof a) { var u = NR(c.root, s && c.active, g && c.error, r && c.completed); return g ? t.createElement(Ok, { className: u, ref: n }) : r ? t.createElement(Jk, { className: u, ref: n }) : t.createElement(Dk, { className: u, ref: n }, jk, t.createElement("text", { className: c.text, x: "12", y: "16", textAnchor: "middle" }, a)) } return a })), qk = Vk((function (e) { return { root: { display: "block", color: e.palette.text.disabled, "&$completed": { color: e.palette.primary.main }, "&$active": { color: e.palette.primary.main }, "&$error": { color: e.palette.error.main } }, text: { fill: e.palette.primary.contrastText, fontSize: e.typography.caption.fontSize, fontFamily: e.typography.fontFamily }, active: {}, completed: {}, error: {} } }), { name: "MuiStepIcon" })(Qk), $k = t.forwardRef((function (e, n) { var i = e.active, r = void 0 !== i && i, a = e.alternativeLabel, o = void 0 !== a && a, s = e.children, l = e.classes, g = e.className, u = e.completed, C = void 0 !== u && u, d = e.disabled, I = void 0 !== d && d, h = e.error, A = void 0 !== h && h, p = (e.expanded, e.icon), f = (e.last, e.optional), m = e.orientation, v = void 0 === m ? "horizontal" : m, b = e.StepIconComponent, y = e.StepIconProps, G = or(e, ["active", "alternativeLabel", "children", "classes", "className", "completed", "disabled", "error", "expanded", "icon", "last", "optional", "orientation", "StepIconComponent", "StepIconProps"]), B = b; return p && !B && (B = qk), t.createElement("span", (0, c.Z)({ className: NR(l.root, l[v], g, I && l.disabled, o && l.alternativeLabel, A && l.error), ref: n }, G), p || B ? t.createElement("span", { className: NR(l.iconContainer, o && l.alternativeLabel) }, t.createElement(B, (0, c.Z)({ completed: C, active: r, error: A, icon: p }, y))) : null, t.createElement("span", { className: l.labelContainer }, s ? t.createElement(_k, { variant: "body2", component: "span", display: "block", className: NR(l.label, o && l.alternativeLabel, C && l.completed, r && l.active, A && l.error) }, s) : null, f)) })); $k.muiName = "StepLabel"; var eH = Vk((function (e) { return { root: { display: "flex", alignItems: "center", "&$alternativeLabel": { flexDirection: "column" }, "&$disabled": { cursor: "default" } }, horizontal: {}, vertical: {}, label: { color: e.palette.text.secondary, "&$active": { color: e.palette.text.primary, fontWeight: 500 }, "&$completed": { color: e.palette.text.primary, fontWeight: 500 }, "&$alternativeLabel": { textAlign: "center", marginTop: 16 }, "&$error": { color: e.palette.error.main } }, active: {}, completed: {}, error: {}, disabled: {}, iconContainer: { flexShrink: 0, display: "flex", paddingRight: 8, "&$alternativeLabel": { paddingRight: 0 } }, alternativeLabel: {}, labelContainer: { width: "100%" } } }), { name: "MuiStepLabel" })($k), tH = function () { var e = (0, t.useState)(!1), n = (0, r.Z)(e, 2), i = n[0], a = n[1], o = (0, t.useState)(!1), s = (0, r.Z)(o, 2), l = s[0], g = s[1], c = (0, t.useState)(0), u = (0, r.Z)(c, 2), C = u[0], d = u[1]; (0, t.useEffect)((function () { var e = setTimeout((function () { a(!0), d(1) }), 1e3), t = setTimeout((function () { g(!0), d(2) }), 4e3), n = setTimeout((function () { d(3) }), 7e3), i = setTimeout((function () { d(4) }), 1e4); return function () { clearTimeout(e), clearTimeout(t), clearTimeout(n), clearTimeout(i) } }), []); var I = function (e, t) { return e.map((function (n, i) { return (0, K.jsxs)("div", { className: "point ".concat(t ? "show" : ""), style: { animationDelay: "".concat(2 * i, "s"), color: "white" }, children: [n, i < e.length - 1 && (0, K.jsx)("hr", {}), " "] }, i) })) }; return (0, K.jsxs)("div", { className: "container mt-4", children: [(0, K.jsx)(Yk, { activeStep: C, alternativeLabel: !0, style: { backgroundColor: "#022027", color: "white", marginBottom: "20px" }, children: ["Verification ", "Preventing double voting", "Securing electoral process", "Public verification"].map((function (e, t) { return (0, K.jsx)(Lk, { children: (0, K.jsx)(eH, { children: (0, K.jsx)("span", { style: { color: "white" }, children: e }) }) }, e) })) }), (0, K.jsx)("div", { className: "table-container", children: (0, K.jsxs)("table", { className: "custom-table", children: [(0, K.jsx)("thead", { className: "custom-thead", children: (0, K.jsxs)("tr", { children: [(0, K.jsx)("th", { className: "heads", children: "Election Process" }), (0, K.jsx)("th", { className: "heads", children: "Proof of Work" })] }) }), (0, K.jsx)("tbody", { children: (0, K.jsxs)("tr", { children: [(0, K.jsx)("td", { className: "points-cell", children: (0, K.jsx)("div", { className: "point-container", children: I(["1. Verification: Voters enter credentials for legitimacy check.", "2. Preventing Double Voting: Voters receive a token and a timer to avoid double voting.", "3. Securing Electoral Process: Indicators like green/red lights check for system tampering.", "4. Public Verification: Displaying a table with voter names and status for transparency."], i) }) }), (0, K.jsx)("td", { className: "points-cell", children: (0, K.jsx)("div", { className: "point-container", children: I(["1. Verification: Nodes undergo verification to participate in the network.", "2. Preventing Double Spending: Participants solve a computational puzzle before adding a block to prevent duplicate transactions.", "3. Securing the Blockchain: Miners solve complex problems to validate transactions, preventing malicious actors.", "4. Transparency and Trust: Broadcasting the addition of a block to all nodes for a transparent and trustworthy blockchain."], l) }) })] }) })] }) }), (0, K.jsx)("style", { jsx: !0, children: "\n        .container {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          margin-left:30%;\n        }\n\n        .custom-table {\n          width: 100%;\n          max-width: 800px;\n          margin: 20px 0;\n          border-collapse: collapse;\n        }\n\n        .custom-thead {\n          background-color: #022027;\n          color: #fff;\n          font-weight: bold;\n        }\n\n        .points-cell {\n          border: 2px solid #22eff1;\n          padding: 15px;\n          text-align: left;\n        }\n\n        .point-container {\n          display: flex;\n          flex-direction: column;\n        }\n\n        .point {\n          opacity: 0;\n          animation: showPoint 3s forwards;\n          margin-bottom: 10px;\n        }\n\n        hr {\n          border: 0;\n          height: 1px;\n          background-color: #22eff1; /* Horizontal line color */\n         /* Margin for spacing */\n        }\n\n        @keyframes showPoint {\n          to {\n            height: 70%;\n            opacity: 1;\n          }\n        }\n      " })] }) }; var nH = function (e) { var n = e.userName, i = e.time, a = e.status, o = (e.onClick, Je((function (e) { return e.BlockChainReducer }))), s = (o.userIntract, o.task, o.selectedCardIndex), l = rt(), g = s.length > 0 ? (s[s.length - 1] + 1) % 4 : 0, c = (0, t.useState)(!1), u = (0, r.Z)(c, 2), C = u[0]; return u[1], t.useEffect((function () { var e; return e = setTimeout((function () { l($n([].concat((0, v.Z)(s), [g]))), l(ei(!1)), l(ti(5)) }), 2e3), function () { clearTimeout(e) } }), []), (0, K.jsxs)(K.Fragment, { children: [!C && (0, K.jsxs)(K.Fragment, { children: [(0, K.jsx)("h2", { style: { color: "#22eff1" }, children: "4. Public verification" }), (0, K.jsxs)("table", { className: "table", children: [(0, K.jsxs)("thead", { children: [(0, K.jsx)("tr", { children: (0, K.jsx)("th", { colSpan: "3", className: "thank-you-note", children: "Thank you for voting!" }) }), (0, K.jsxs)("tr", { children: [(0, K.jsx)("th", { scope: "col", children: "Voter Name" }), (0, K.jsx)("th", { scope: "col", children: "Time of Vote" }), (0, K.jsx)("th", { scope: "col", children: "Vote Status" })] })] }), (0, K.jsx)("tbody", { children: (0, K.jsxs)("tr", { children: [(0, K.jsx)("td", { children: n }), (0, K.jsx)("td", { children: i }), (0, K.jsx)("td", { children: a ? (0, K.jsx)("i", { className: "fa-regular fa-circle-check fa-xl" }) : (0, K.jsx)("i", { className: "fa-regular fa-circle-times fa-xl" }) })] }) })] })] }), C && (0, K.jsx)(tH, {})] }) }, iH = ["defaultInputValue", "defaultMenuIsOpen", "defaultValue", "inputValue", "menuIsOpen", "onChange", "onInputChange", "onMenuClose", "onMenuOpen", "value"]; var rH = Math.min, aH = Math.max, oH = Math.round, sH = Math.floor, lH = function (e) { return { x: e, y: e } }; function gH(e) { return ln(ln({}, e), {}, { top: e.y, left: e.x, right: e.x + e.width, bottom: e.y + e.height }) } function cH(e) { return dH(e) ? (e.nodeName || "").toLowerCase() : "#document" } function uH(e) { var t; return (null == e || null == (t = e.ownerDocument) ? void 0 : t.defaultView) || window } function CH(e) { var t; return null == (t = (dH(e) ? e.ownerDocument : e.document) || window.document) ? void 0 : t.documentElement } function dH(e) { return e instanceof Node || e instanceof uH(e).Node } function IH(e) { return e instanceof Element || e instanceof uH(e).Element } function hH(e) { return e instanceof HTMLElement || e instanceof uH(e).HTMLElement } function AH(e) { return "undefined" !== typeof ShadowRoot && (e instanceof ShadowRoot || e instanceof uH(e).ShadowRoot) } function pH(e) { var t = vH(e), n = t.overflow, i = t.overflowX, r = t.overflowY, a = t.display; return /auto|scroll|overlay|hidden|clip/.test(n + r + i) && !["inline", "contents"].includes(a) } function fH() { return !("undefined" === typeof CSS || !CSS.supports) && CSS.supports("-webkit-backdrop-filter", "none") } function mH(e) { return ["html", "body", "#document"].includes(cH(e)) } function vH(e) { return uH(e).getComputedStyle(e) } function bH(e) { if ("html" === cH(e)) return e; var t = e.assignedSlot || e.parentNode || AH(e) && e.host || CH(e); return AH(t) ? t.host : t } function yH(e) { var t = bH(e); return mH(t) ? e.ownerDocument ? e.ownerDocument.body : e.body : hH(t) && pH(t) ? t : yH(t) } function GH(e, t, n) { var i; void 0 === t && (t = []), void 0 === n && (n = !0); var r = yH(e), a = r === (null == (i = e.ownerDocument) ? void 0 : i.body), o = uH(r); return a ? t.concat(o, o.visualViewport || [], pH(r) ? r : [], o.frameElement && n ? GH(o.frameElement) : []) : t.concat(r, GH(r, [], n)) } function BH(e) { var t = vH(e), n = parseFloat(t.width) || 0, i = parseFloat(t.height) || 0, r = hH(e), a = r ? e.offsetWidth : n, o = r ? e.offsetHeight : i, s = oH(n) !== a || oH(i) !== o; return s && (n = a, i = o), { width: n, height: i, $: s } } function ZH(e) { return IH(e) ? e : e.contextElement } function wH(e) { var t = ZH(e); if (!hH(t)) return lH(1); var n = t.getBoundingClientRect(), i = BH(t), r = i.width, a = i.height, o = i.$, s = (o ? oH(n.width) : n.width) / r, l = (o ? oH(n.height) : n.height) / a; return s && Number.isFinite(s) || (s = 1), l && Number.isFinite(l) || (l = 1), { x: s, y: l } } var SH = lH(0); function RH(e) { var t = uH(e); return fH() && t.visualViewport ? { x: t.visualViewport.offsetLeft, y: t.visualViewport.offsetTop } : SH } function xH(e, t, n, i) { void 0 === t && (t = !1), void 0 === n && (n = !1); var r = e.getBoundingClientRect(), a = ZH(e), o = lH(1); t && (i ? IH(i) && (o = wH(i)) : o = wH(e)); var s = function (e, t, n) { return void 0 === t && (t = !1), !(!n || t && n !== uH(e)) && t }(a, n, i) ? RH(a) : lH(0), l = (r.left + s.x) / o.x, g = (r.top + s.y) / o.y, c = r.width / o.x, u = r.height / o.y; if (a) for (var C = uH(a), d = i && IH(i) ? uH(i) : i, I = C.frameElement; I && i && d !== C;) { var h = wH(I), A = I.getBoundingClientRect(), p = vH(I), f = A.left + (I.clientLeft + parseFloat(p.paddingLeft)) * h.x, m = A.top + (I.clientTop + parseFloat(p.paddingTop)) * h.y; l *= h.x, g *= h.y, c *= h.x, u *= h.y, l += f, g += m, I = uH(I).frameElement } return gH({ width: c, height: u, x: l, y: g }) } function WH(e, t, n, i) { void 0 === i && (i = {}); var a = i, o = a.ancestorScroll, s = void 0 === o || o, l = a.ancestorResize, g = void 0 === l || l, c = a.elementResize, u = void 0 === c ? "function" === typeof ResizeObserver : c, C = a.layoutShift, d = void 0 === C ? "function" === typeof IntersectionObserver : C, I = a.animationFrame, h = void 0 !== I && I, A = ZH(e), p = s || g ? [].concat((0, v.Z)(A ? GH(A) : []), (0, v.Z)(GH(t))) : []; p.forEach((function (e) { s && e.addEventListener("scroll", n, { passive: !0 }), g && e.addEventListener("resize", n) })); var f, m = A && d ? function (e, t) { var n, i = null, r = CH(e); function a() { clearTimeout(n), i && i.disconnect(), i = null } return function o(s, l) { void 0 === s && (s = !1), void 0 === l && (l = 1), a(); var g = e.getBoundingClientRect(), c = g.left, u = g.top, C = g.width, d = g.height; if (s || t(), C && d) { var I = { rootMargin: -sH(u) + "px " + -sH(r.clientWidth - (c + C)) + "px " + -sH(r.clientHeight - (u + d)) + "px " + -sH(c) + "px", threshold: aH(0, rH(1, l)) || 1 }, h = !0; try { i = new IntersectionObserver(A, ln(ln({}, I), {}, { root: r.ownerDocument })) } catch (p) { i = new IntersectionObserver(A, I) } i.observe(e) } function A(e) { var t = e[0].intersectionRatio; if (t !== l) { if (!h) return o(); t ? o(!1, t) : n = setTimeout((function () { o(!1, 1e-7) }), 100) } h = !1 } }(!0), a }(A, n) : null, b = -1, y = null; u && (y = new ResizeObserver((function (e) { var i = (0, r.Z)(e, 1)[0]; i && i.target === A && y && (y.unobserve(t), cancelAnimationFrame(b), b = requestAnimationFrame((function () { y && y.observe(t) }))), n() })), A && !h && y.observe(A), y.observe(t)); var G = h ? xH(e) : null; return h && function t() { var i = xH(e); !G || i.x === G.x && i.y === G.y && i.width === G.width && i.height === G.height || n(); G = i, f = requestAnimationFrame(t) }(), n(), function () { p.forEach((function (e) { s && e.removeEventListener("scroll", n), g && e.removeEventListener("resize", n) })), m && m(), y && y.disconnect(), y = null, h && cancelAnimationFrame(f) } } var VH = t.useLayoutEffect, kH = ["className", "clearValue", "cx", "getStyles", "getClassNames", "getValue", "hasValue", "isMulti", "isRtl", "options", "selectOption", "selectProps", "setValue", "theme"], HH = function () { }; function MH(e, t) { return t ? "-" === t[0] ? e + t : e + "__" + t : e } function FH(e, t) { for (var n = arguments.length, i = new Array(n > 2 ? n - 2 : 0), r = 2; r < n; r++)i[r - 2] = arguments[r]; var a = [].concat(i); if (t && e) for (var o in t) t.hasOwnProperty(o) && t[o] && a.push("".concat(MH(e, o))); return a.filter((function (e) { return e })).map((function (e) { return String(e).trim() })).join(" ") } var NH = function (e) { return t = e, Array.isArray(t) ? e.filter(Boolean) : "object" === (0, pr.Z)(e) && null !== e ? [e] : []; var t }, XH = function (e) { return e.className, e.clearValue, e.cx, e.getStyles, e.getClassNames, e.getValue, e.hasValue, e.isMulti, e.isRtl, e.options, e.selectOption, e.selectProps, e.setValue, e.theme, ln({}, or(e, kH)) }, YH = function (e, t, n) { var i = e.cx, r = e.getStyles, a = e.getClassNames, o = e.className; return { css: r(t, e), className: i(null !== n && void 0 !== n ? n : {}, a(t, e), o) } }; function KH(e) { return [document.documentElement, document.body, window].indexOf(e) > -1 } function LH(e) { return KH(e) ? window.pageYOffset : e.scrollTop } function zH(e, t) { KH(e) ? window.scrollTo(0, t) : e.scrollTop = t } function EH(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 200, i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : HH, r = LH(e), a = t - r, o = 0; !function t() { var s = function (e, t, n, i) { return n * ((e = e / i - 1) * e * e + 1) + t }(o += 10, r, a, n); zH(e, s), o < n ? window.requestAnimationFrame(t) : i(e) }() } function TH(e, t) { var n = e.getBoundingClientRect(), i = t.getBoundingClientRect(), r = t.offsetHeight / 3; i.bottom + r > n.bottom ? zH(e, Math.min(t.offsetTop + t.clientHeight - e.offsetHeight + r, e.scrollHeight)) : i.top - r < n.top && zH(e, Math.max(t.offsetTop - r, 0)) } function _H() { try { return document.createEvent("TouchEvent"), !0 } catch (e) { return !1 } } var UH = !1, DH = { get passive() { return UH = !0 } }, PH = "undefined" !== typeof window ? window : {}; PH.addEventListener && PH.removeEventListener && (PH.addEventListener("p", HH, DH), PH.removeEventListener("p", HH, !1)); var JH = UH; function OH(e) { return null != e } function jH(e, t, n) { return e ? t : n } var QH = ["children", "innerProps"], qH = ["children", "innerProps"]; function $H(e) { var t = e.maxHeight, n = e.menuEl, i = e.minHeight, r = e.placement, a = e.shouldScroll, o = e.isFixedPosition, s = e.controlHeight, l = function (e) { var t = getComputedStyle(e), n = "absolute" === t.position, i = /(auto|scroll)/; if ("fixed" === t.position) return document.documentElement; for (var r = e; r = r.parentElement;)if (t = getComputedStyle(r), (!n || "static" !== t.position) && i.test(t.overflow + t.overflowY + t.overflowX)) return r; return document.documentElement }(n), g = { placement: "bottom", maxHeight: t }; if (!n || !n.offsetParent) return g; var c = l.getBoundingClientRect().height, u = n.getBoundingClientRect(), C = u.bottom, d = u.height, I = u.top, h = n.offsetParent.getBoundingClientRect().top, A = o ? window.innerHeight : function (e) { return KH(e) ? window.innerHeight : e.clientHeight }(l), p = LH(l), f = parseInt(getComputedStyle(n).marginBottom, 10), m = parseInt(getComputedStyle(n).marginTop, 10), v = h - m, b = A - I, y = v + p, G = c - p - I, B = C - A + p + f, Z = p + I - m, w = 160; switch (r) { case "auto": case "bottom": if (b >= d) return { placement: "bottom", maxHeight: t }; if (G >= d && !o) return a && EH(l, B, w), { placement: "bottom", maxHeight: t }; if (!o && G >= i || o && b >= i) return a && EH(l, B, w), { placement: "bottom", maxHeight: o ? b - f : G - f }; if ("auto" === r || o) { var S = t, R = o ? v : y; return R >= i && (S = Math.min(R - f - s, t)), { placement: "top", maxHeight: S } } if ("bottom" === r) return a && zH(l, B), { placement: "bottom", maxHeight: t }; break; case "top": if (v >= d) return { placement: "top", maxHeight: t }; if (y >= d && !o) return a && EH(l, Z, w), { placement: "top", maxHeight: t }; if (!o && y >= i || o && v >= i) { var x = t; return (!o && y >= i || o && v >= i) && (x = o ? v - m : y - m), a && EH(l, Z, w), { placement: "top", maxHeight: x } } return { placement: "bottom", maxHeight: t }; default: throw new Error('Invalid placement provided "'.concat(r, '".')) }return g } var eM, tM = function (e) { return "auto" === e ? "bottom" : e }, nM = (0, t.createContext)(null), iM = function (e) { var n = e.children, i = e.minMenuHeight, a = e.maxMenuHeight, o = e.menuPlacement, s = e.menuPosition, l = e.menuShouldScrollIntoView, g = e.theme, c = ((0, t.useContext)(nM) || {}).setPortalPlacement, u = (0, t.useRef)(null), C = (0, t.useState)(a), d = (0, r.Z)(C, 2), I = d[0], h = d[1], A = (0, t.useState)(null), p = (0, r.Z)(A, 2), f = p[0], m = p[1], v = g.spacing.controlHeight; return VH((function () { var e = u.current; if (e) { var t = "fixed" === s, n = $H({ maxHeight: a, menuEl: e, minHeight: i, placement: o, shouldScroll: l && !t, isFixedPosition: t, controlHeight: v }); h(n.maxHeight), m(n.placement), null === c || void 0 === c || c(n.placement) } }), [a, o, s, l, i, c, v]), n({ ref: u, placerProps: ln(ln({}, e), {}, { placement: f || tM(o), maxHeight: I }) }) }, rM = function (e) { var t = e.children, n = e.innerRef, i = e.innerProps; return N("div", (0, c.Z)({}, YH(e, "menu", { menu: !0 }), { ref: n }, i), t) }, aM = function (e, t) { var n = e.theme, i = n.spacing.baseUnit, r = n.colors; return ln({ textAlign: "center" }, t ? {} : { color: r.neutral40, padding: "".concat(2 * i, "px ").concat(3 * i, "px") }) }, oM = aM, sM = aM, lM = ["size"], gM = ["innerProps", "isRtl", "size"]; var cM = { name: "8mmkcg", styles: "display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0" }, uM = function (e) { var t = e.size, n = or(e, lM); return N("svg", (0, c.Z)({ height: t, width: t, viewBox: "0 0 20 20", "aria-hidden": "true", focusable: "false", css: cM }, n)) }, CM = function (e) { return N(uM, (0, c.Z)({ size: 20 }, e), N("path", { d: "M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z" })) }, dM = function (e) { return N(uM, (0, c.Z)({ size: 20 }, e), N("path", { d: "M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z" })) }, IM = function (e, t) { var n = e.isFocused, i = e.theme, r = i.spacing.baseUnit, a = i.colors; return ln({ label: "indicatorContainer", display: "flex", transition: "color 150ms" }, t ? {} : { color: n ? a.neutral60 : a.neutral20, padding: 2 * r, ":hover": { color: n ? a.neutral80 : a.neutral40 } }) }, hM = IM, AM = IM, pM = Y(eM || (eM = b(["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"]))), fM = function (e) { var t = e.delay, n = e.offset; return N("span", { css: X({ animation: "".concat(pM, " 1s ease-in-out ").concat(t, "ms infinite;"), backgroundColor: "currentColor", borderRadius: "1em", display: "inline-block", marginLeft: n ? "1em" : void 0, height: "1em", verticalAlign: "top", width: "1em" }, "", "") }) }, mM = function (e) { var t = e.children, n = e.isDisabled, i = e.isFocused, r = e.innerRef, a = e.innerProps, o = e.menuIsOpen; return N("div", (0, c.Z)({ ref: r }, YH(e, "control", { control: !0, "control--is-disabled": n, "control--is-focused": i, "control--menu-is-open": o }), a, { "aria-disabled": n || void 0 }), t) }, vM = ["data"], bM = function (e) { var t = e.children, n = e.cx, i = e.getStyles, r = e.getClassNames, a = e.Heading, o = e.headingProps, s = e.innerProps, l = e.label, g = e.theme, u = e.selectProps; return N("div", (0, c.Z)({}, YH(e, "group", { group: !0 }), s), N(a, (0, c.Z)({}, o, { selectProps: u, theme: g, getStyles: i, getClassNames: r, cx: n }), l), N("div", null, t)) }, yM = ["innerRef", "isDisabled", "isHidden", "inputClassName"], GM = { gridArea: "1 / 2", font: "inherit", minWidth: "2px", border: 0, margin: 0, outline: 0, padding: 0 }, BM = { flex: "1 1 auto", display: "inline-grid", gridArea: "1 / 1 / 2 / 3", gridTemplateColumns: "0 min-content", "&:after": ln({ content: 'attr(data-value) " "', visibility: "hidden", whiteSpace: "pre" }, GM) }, ZM = function (e) { return ln({ label: "input", color: "inherit", background: 0, opacity: e ? 0 : 1, width: "100%" }, GM) }, wM = function (e) { var t = e.children, n = e.innerProps; return N("div", n, t) }; var SM = function (e) { var t = e.children, n = e.components, i = e.data, r = e.innerProps, a = e.isDisabled, o = e.removeProps, s = e.selectProps, l = n.Container, g = n.Label, c = n.Remove; return N(l, { data: i, innerProps: ln(ln({}, YH(e, "multiValue", { "multi-value": !0, "multi-value--is-disabled": a })), r), selectProps: s }, N(g, { data: i, innerProps: ln({}, YH(e, "multiValueLabel", { "multi-value__label": !0 })), selectProps: s }, t), N(c, { data: i, innerProps: ln(ln({}, YH(e, "multiValueRemove", { "multi-value__remove": !0 })), {}, { "aria-label": "Remove ".concat(t || "option") }, o), selectProps: s })) }, RM = { ClearIndicator: function (e) { var t = e.children, n = e.innerProps; return N("div", (0, c.Z)({}, YH(e, "clearIndicator", { indicator: !0, "clear-indicator": !0 }), n), t || N(CM, null)) }, Control: mM, DropdownIndicator: function (e) { var t = e.children, n = e.innerProps; return N("div", (0, c.Z)({}, YH(e, "dropdownIndicator", { indicator: !0, "dropdown-indicator": !0 }), n), t || N(dM, null)) }, DownChevron: dM, CrossIcon: CM, Group: bM, GroupHeading: function (e) { var t = XH(e); t.data; var n = or(t, vM); return N("div", (0, c.Z)({}, YH(e, "groupHeading", { "group-heading": !0 }), n)) }, IndicatorsContainer: function (e) { var t = e.children, n = e.innerProps; return N("div", (0, c.Z)({}, YH(e, "indicatorsContainer", { indicators: !0 }), n), t) }, IndicatorSeparator: function (e) { var t = e.innerProps; return N("span", (0, c.Z)({}, t, YH(e, "indicatorSeparator", { "indicator-separator": !0 }))) }, Input: function (e) { var t = e.cx, n = e.value, i = XH(e), r = i.innerRef, a = i.isDisabled, o = i.isHidden, s = i.inputClassName, l = or(i, yM); return N("div", (0, c.Z)({}, YH(e, "input", { "input-container": !0 }), { "data-value": n || "" }), N("input", (0, c.Z)({ className: t({ input: !0 }, s), ref: r, style: ZM(o), disabled: a }, l))) }, LoadingIndicator: function (e) { var t = e.innerProps, n = e.isRtl, i = e.size, r = void 0 === i ? 4 : i, a = or(e, gM); return N("div", (0, c.Z)({}, YH(ln(ln({}, a), {}, { innerProps: t, isRtl: n, size: r }), "loadingIndicator", { indicator: !0, "loading-indicator": !0 }), t), N(fM, { delay: 0, offset: n }), N(fM, { delay: 160, offset: !0 }), N(fM, { delay: 320, offset: !n })) }, Menu: rM, MenuList: function (e) { var t = e.children, n = e.innerProps, i = e.innerRef, r = e.isMulti; return N("div", (0, c.Z)({}, YH(e, "menuList", { "menu-list": !0, "menu-list--is-multi": r }), { ref: i }, n), t) }, MenuPortal: function (e) { var n = e.appendTo, a = e.children, o = e.controlElement, s = e.innerProps, l = e.menuPlacement, g = e.menuPosition, u = (0, t.useRef)(null), C = (0, t.useRef)(null), d = (0, t.useState)(tM(l)), I = (0, r.Z)(d, 2), h = I[0], A = I[1], p = (0, t.useMemo)((function () { return { setPortalPlacement: A } }), []), f = (0, t.useState)(null), m = (0, r.Z)(f, 2), v = m[0], b = m[1], y = (0, t.useCallback)((function () { if (o) { var e = function (e) { var t = e.getBoundingClientRect(); return { bottom: t.bottom, height: t.height, left: t.left, right: t.right, top: t.top, width: t.width } }(o), t = "fixed" === g ? 0 : window.pageYOffset, n = e[h] + t; n === (null === v || void 0 === v ? void 0 : v.offset) && e.left === (null === v || void 0 === v ? void 0 : v.rect.left) && e.width === (null === v || void 0 === v ? void 0 : v.rect.width) || b({ offset: n, rect: e }) } }), [o, g, h, null === v || void 0 === v ? void 0 : v.offset, null === v || void 0 === v ? void 0 : v.rect.left, null === v || void 0 === v ? void 0 : v.rect.width]); VH((function () { y() }), [y]); var G = (0, t.useCallback)((function () { "function" === typeof C.current && (C.current(), C.current = null), o && u.current && (C.current = WH(o, u.current, y, { elementResize: "ResizeObserver" in window })) }), [o, y]); VH((function () { G() }), [G]); var B = (0, t.useCallback)((function (e) { u.current = e, G() }), [G]); if (!n && "fixed" !== g || !v) return null; var Z = N("div", (0, c.Z)({ ref: B }, YH(ln(ln({}, e), {}, { offset: v.offset, position: g, rect: v.rect }), "menuPortal", { "menu-portal": !0 }), s), a); return N(nM.Provider, { value: p }, n ? (0, i.createPortal)(Z, n) : Z) }, LoadingMessage: function (e) { var t = e.children, n = void 0 === t ? "Loading..." : t, i = e.innerProps, r = or(e, qH); return N("div", (0, c.Z)({}, YH(ln(ln({}, r), {}, { children: n, innerProps: i }), "loadingMessage", { "menu-notice": !0, "menu-notice--loading": !0 }), i), n) }, NoOptionsMessage: function (e) { var t = e.children, n = void 0 === t ? "No options" : t, i = e.innerProps, r = or(e, QH); return N("div", (0, c.Z)({}, YH(ln(ln({}, r), {}, { children: n, innerProps: i }), "noOptionsMessage", { "menu-notice": !0, "menu-notice--no-options": !0 }), i), n) }, MultiValue: SM, MultiValueContainer: wM, MultiValueLabel: wM, MultiValueRemove: function (e) { var t = e.children, n = e.innerProps; return N("div", (0, c.Z)({ role: "button" }, n), t || N(CM, { size: 14 })) }, Option: function (e) { var t = e.children, n = e.isDisabled, i = e.isFocused, r = e.isSelected, a = e.innerRef, o = e.innerProps; return N("div", (0, c.Z)({}, YH(e, "option", { option: !0, "option--is-disabled": n, "option--is-focused": i, "option--is-selected": r }), { ref: a, "aria-disabled": n }, o), t) }, Placeholder: function (e) { var t = e.children, n = e.innerProps; return N("div", (0, c.Z)({}, YH(e, "placeholder", { placeholder: !0 }), n), t) }, SelectContainer: function (e) { var t = e.children, n = e.innerProps, i = e.isDisabled, r = e.isRtl; return N("div", (0, c.Z)({}, YH(e, "container", { "--is-disabled": i, "--is-rtl": r }), n), t) }, SingleValue: function (e) { var t = e.children, n = e.isDisabled, i = e.innerProps; return N("div", (0, c.Z)({}, YH(e, "singleValue", { "single-value": !0, "single-value--is-disabled": n }), i), t) }, ValueContainer: function (e) { var t = e.children, n = e.innerProps, i = e.isMulti, r = e.hasValue; return N("div", (0, c.Z)({}, YH(e, "valueContainer", { "value-container": !0, "value-container--is-multi": i, "value-container--has-value": r }), n), t) } }, xM = Number.isNaN || function (e) { return "number" === typeof e && e !== e }; function WM(e, t) { return e === t || !(!xM(e) || !xM(t)) } function VM(e, t) { if (e.length !== t.length) return !1; for (var n = 0; n < e.length; n++)if (!WM(e[n], t[n])) return !1; return !0 } for (var kM = { name: "7pg0cj-a11yText", styles: "label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap" }, HM = function (e) { return N("span", (0, c.Z)({ css: kM }, e)) }, MM = { guidance: function (e) { var t = e.isSearchable, n = e.isMulti, i = e.isDisabled, r = e.tabSelectsValue; switch (e.context) { case "menu": return "Use Up and Down to choose options".concat(i ? "" : ", press Enter to select the currently focused option", ", press Escape to exit the menu").concat(r ? ", press Tab to select the option and exit the menu" : "", "."); case "input": return "".concat(e["aria-label"] || "Select", " is focused ").concat(t ? ",type to refine list" : "", ", press Down to open the menu, ").concat(n ? " press left to focus selected values" : ""); case "value": return "Use left and right to toggle between focused values, press Backspace to remove the currently focused value"; default: return "" } }, onChange: function (e) { var t = e.action, n = e.label, i = void 0 === n ? "" : n, r = e.labels, a = e.isDisabled; switch (t) { case "deselect-option": case "pop-value": case "remove-value": return "option ".concat(i, ", deselected."); case "clear": return "All selected options have been cleared."; case "initial-input-focus": return "option".concat(r.length > 1 ? "s" : "", " ").concat(r.join(","), ", selected."); case "select-option": return "option ".concat(i, a ? " is disabled. Select another option." : ", selected."); default: return "" } }, onFocus: function (e) { var t = e.context, n = e.focused, i = e.options, r = e.label, a = void 0 === r ? "" : r, o = e.selectValue, s = e.isDisabled, l = e.isSelected, g = function (e, t) { return e && e.length ? "".concat(e.indexOf(t) + 1, " of ").concat(e.length) : "" }; if ("value" === t && o) return "value ".concat(a, " focused, ").concat(g(o, n), "."); if ("menu" === t) { var c = s ? " disabled" : "", u = "".concat(l ? "selected" : "focused").concat(c); return "option ".concat(a, " ").concat(u, ", ").concat(g(i, n), ".") } return "" }, onFilter: function (e) { var t = e.inputValue, n = e.resultsMessage; return "".concat(n).concat(t ? " for search term " + t : "", ".") } }, FM = function (e) { var n = e.ariaSelection, i = e.focusedOption, r = e.focusedValue, a = e.focusableOptions, o = e.isFocused, s = e.selectValue, l = e.selectProps, g = e.id, c = l.ariaLiveMessages, u = l.getOptionLabel, C = l.inputValue, d = l.isMulti, I = l.isOptionDisabled, h = l.isSearchable, A = l.menuIsOpen, p = l.options, f = l.screenReaderStatus, m = l.tabSelectsValue, v = l["aria-label"], b = l["aria-live"], y = (0, t.useMemo)((function () { return ln(ln({}, MM), c || {}) }), [c]), G = (0, t.useMemo)((function () { var e, t = ""; if (n && y.onChange) { var i = n.option, r = n.options, a = n.removedValue, o = n.removedValues, l = n.value, g = a || i || (e = l, Array.isArray(e) ? null : e), c = g ? u(g) : "", C = r || o || void 0, d = C ? C.map(u) : [], h = ln({ isDisabled: g && I(g, s), label: c, labels: d }, n); t = y.onChange(h) } return t }), [n, y, I, s, u]), B = (0, t.useMemo)((function () { var e = "", t = i || r, n = !!(i && s && s.includes(i)); if (t && y.onFocus) { var o = { focused: t, label: u(t), isDisabled: I(t, s), isSelected: n, options: a, context: t === i ? "menu" : "value", selectValue: s }; e = y.onFocus(o) } return e }), [i, r, u, I, y, a, s]), Z = (0, t.useMemo)((function () { var e = ""; if (A && p.length && y.onFilter) { var t = f({ count: a.length }); e = y.onFilter({ inputValue: C, resultsMessage: t }) } return e }), [a, C, A, y, p, f]), w = (0, t.useMemo)((function () { var e = ""; if (y.guidance) { var t = r ? "value" : A ? "menu" : "input"; e = y.guidance({ "aria-label": v, context: t, isDisabled: i && I(i, s), isMulti: d, isSearchable: h, tabSelectsValue: m }) } return e }), [v, i, r, d, I, h, A, y, s, m]), S = "".concat(B, " ").concat(Z, " ").concat(w), R = N(t.Fragment, null, N("span", { id: "aria-selection" }, G), N("span", { id: "aria-context" }, S)), x = "initial-input-focus" === (null === n || void 0 === n ? void 0 : n.action); return N(t.Fragment, null, N(HM, { id: g }, x && R), N(HM, { "aria-live": b, "aria-atomic": "false", "aria-relevant": "additions text" }, o && !x && R)) }, NM = [{ base: "A", letters: "A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f" }, { base: "AA", letters: "\ua732" }, { base: "AE", letters: "\xc6\u01fc\u01e2" }, { base: "AO", letters: "\ua734" }, { base: "AU", letters: "\ua736" }, { base: "AV", letters: "\ua738\ua73a" }, { base: "AY", letters: "\ua73c" }, { base: "B", letters: "B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181" }, { base: "C", letters: "C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e" }, { base: "D", letters: "D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779" }, { base: "DZ", letters: "\u01f1\u01c4" }, { base: "Dz", letters: "\u01f2\u01c5" }, { base: "E", letters: "E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e" }, { base: "F", letters: "F\u24bb\uff26\u1e1e\u0191\ua77b" }, { base: "G", letters: "G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e" }, { base: "H", letters: "H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d" }, { base: "I", letters: "I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197" }, { base: "J", letters: "J\u24bf\uff2a\u0134\u0248" }, { base: "K", letters: "K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2" }, { base: "L", letters: "L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780" }, { base: "LJ", letters: "\u01c7" }, { base: "Lj", letters: "\u01c8" }, { base: "M", letters: "M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c" }, { base: "N", letters: "N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4" }, { base: "NJ", letters: "\u01ca" }, { base: "Nj", letters: "\u01cb" }, { base: "O", letters: "O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c" }, { base: "OI", letters: "\u01a2" }, { base: "OO", letters: "\ua74e" }, { base: "OU", letters: "\u0222" }, { base: "P", letters: "P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754" }, { base: "Q", letters: "Q\u24c6\uff31\ua756\ua758\u024a" }, { base: "R", letters: "R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782" }, { base: "S", letters: "S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784" }, { base: "T", letters: "T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786" }, { base: "TZ", letters: "\ua728" }, { base: "U", letters: "U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244" }, { base: "V", letters: "V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245" }, { base: "VY", letters: "\ua760" }, { base: "W", letters: "W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72" }, { base: "X", letters: "X\u24cd\uff38\u1e8a\u1e8c" }, { base: "Y", letters: "Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe" }, { base: "Z", letters: "Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762" }, { base: "a", letters: "a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250" }, { base: "aa", letters: "\ua733" }, { base: "ae", letters: "\xe6\u01fd\u01e3" }, { base: "ao", letters: "\ua735" }, { base: "au", letters: "\ua737" }, { base: "av", letters: "\ua739\ua73b" }, { base: "ay", letters: "\ua73d" }, { base: "b", letters: "b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253" }, { base: "c", letters: "c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184" }, { base: "d", letters: "d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a" }, { base: "dz", letters: "\u01f3\u01c6" }, { base: "e", letters: "e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd" }, { base: "f", letters: "f\u24d5\uff46\u1e1f\u0192\ua77c" }, { base: "g", letters: "g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f" }, { base: "h", letters: "h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265" }, { base: "hv", letters: "\u0195" }, { base: "i", letters: "i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131" }, { base: "j", letters: "j\u24d9\uff4a\u0135\u01f0\u0249" }, { base: "k", letters: "k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3" }, { base: "l", letters: "l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747" }, { base: "lj", letters: "\u01c9" }, { base: "m", letters: "m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f" }, { base: "n", letters: "n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5" }, { base: "nj", letters: "\u01cc" }, { base: "o", letters: "o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275" }, { base: "oi", letters: "\u01a3" }, { base: "ou", letters: "\u0223" }, { base: "oo", letters: "\ua74f" }, { base: "p", letters: "p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755" }, { base: "q", letters: "q\u24e0\uff51\u024b\ua757\ua759" }, { base: "r", letters: "r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783" }, { base: "s", letters: "s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b" }, { base: "t", letters: "t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787" }, { base: "tz", letters: "\ua729" }, { base: "u", letters: "u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289" }, { base: "v", letters: "v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c" }, { base: "vy", letters: "\ua761" }, { base: "w", letters: "w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73" }, { base: "x", letters: "x\u24e7\uff58\u1e8b\u1e8d" }, { base: "y", letters: "y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff" }, { base: "z", letters: "z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763" }], XM = new RegExp("[" + NM.map((function (e) { return e.letters })).join("") + "]", "g"), YM = {}, KM = 0; KM < NM.length; KM++)for (var LM = NM[KM], zM = 0; zM < LM.letters.length; zM++)YM[LM.letters[zM]] = LM.base; var EM = function (e) { return e.replace(XM, (function (e) { return YM[e] })) }, TM = function (e, t) { void 0 === t && (t = VM); var n = null; function i() { for (var i = [], r = 0; r < arguments.length; r++)i[r] = arguments[r]; if (n && n.lastThis === this && t(i, n.lastArgs)) return n.lastResult; var a = e.apply(this, i); return n = { lastResult: a, lastArgs: i, lastThis: this }, a } return i.clear = function () { n = null }, i }(EM), _M = function (e) { return e.replace(/^\s+|\s+$/g, "") }, UM = function (e) { return "".concat(e.label, " ").concat(e.value) }, DM = ["innerRef"]; function PM(e) { var t = e.innerRef, n = function (e) { for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++)n[i - 1] = arguments[i]; var a = Object.entries(e).filter((function (e) { var t = (0, r.Z)(e, 1)[0]; return !n.includes(t) })); return a.reduce((function (e, t) { var n = (0, r.Z)(t, 2), i = n[0], a = n[1]; return e[i] = a, e }), {}) }(or(e, DM), "onExited", "in", "enter", "exit", "appear"); return N("input", (0, c.Z)({ ref: t }, n, { css: X({ label: "dummyInput", background: 0, border: 0, caretColor: "transparent", fontSize: "inherit", gridArea: "1 / 1 / 2 / 3", outline: 0, padding: 0, width: 1, color: "transparent", left: -100, opacity: 0, position: "relative", transform: "scale(.01)" }, "", "") })) } var JM = function (e) { e.cancelable && e.preventDefault(), e.stopPropagation() }; var OM = ["boxSizing", "height", "overflow", "paddingRight", "position"], jM = { boxSizing: "border-box", overflow: "hidden", position: "relative", height: "100%" }; function QM(e) { e.preventDefault() } function qM(e) { e.stopPropagation() } function $M() { var e = this.scrollTop, t = this.scrollHeight, n = e + this.offsetHeight; 0 === e ? this.scrollTop = 1 : n === t && (this.scrollTop = e - 1) } function eF() { return "ontouchstart" in window || navigator.maxTouchPoints } var tF = !("undefined" === typeof window || !window.document || !window.document.createElement), nF = 0, iF = { capture: !1, passive: !1 }; var rF = function (e) { var t = e.target; return t.ownerDocument.activeElement && t.ownerDocument.activeElement.blur() }, aF = { name: "1kfdb0e", styles: "position:fixed;left:0;bottom:0;right:0;top:0" }; function oF(e) { var n = e.children, i = e.lockEnabled, r = e.captureEnabled, a = function (e) { var n = e.isEnabled, i = e.onBottomArrive, r = e.onBottomLeave, a = e.onTopArrive, o = e.onTopLeave, s = (0, t.useRef)(!1), l = (0, t.useRef)(!1), g = (0, t.useRef)(0), c = (0, t.useRef)(null), u = (0, t.useCallback)((function (e, t) { if (null !== c.current) { var n = c.current, g = n.scrollTop, u = n.scrollHeight, C = n.clientHeight, d = c.current, I = t > 0, h = u - C - g, A = !1; h > t && s.current && (r && r(e), s.current = !1), I && l.current && (o && o(e), l.current = !1), I && t > h ? (i && !s.current && i(e), d.scrollTop = u, A = !0, s.current = !0) : !I && -t > g && (a && !l.current && a(e), d.scrollTop = 0, A = !0, l.current = !0), A && JM(e) } }), [i, r, a, o]), C = (0, t.useCallback)((function (e) { u(e, e.deltaY) }), [u]), d = (0, t.useCallback)((function (e) { g.current = e.changedTouches[0].clientY }), []), I = (0, t.useCallback)((function (e) { var t = g.current - e.changedTouches[0].clientY; u(e, t) }), [u]), h = (0, t.useCallback)((function (e) { if (e) { var t = !!JH && { passive: !1 }; e.addEventListener("wheel", C, t), e.addEventListener("touchstart", d, t), e.addEventListener("touchmove", I, t) } }), [I, d, C]), A = (0, t.useCallback)((function (e) { e && (e.removeEventListener("wheel", C, !1), e.removeEventListener("touchstart", d, !1), e.removeEventListener("touchmove", I, !1)) }), [I, d, C]); return (0, t.useEffect)((function () { if (n) { var e = c.current; return h(e), function () { A(e) } } }), [n, h, A]), function (e) { c.current = e } }({ isEnabled: void 0 === r || r, onBottomArrive: e.onBottomArrive, onBottomLeave: e.onBottomLeave, onTopArrive: e.onTopArrive, onTopLeave: e.onTopLeave }), o = function (e) { var n = e.isEnabled, i = e.accountForScrollbars, r = void 0 === i || i, a = (0, t.useRef)({}), o = (0, t.useRef)(null), s = (0, t.useCallback)((function (e) { if (tF) { var t = document.body, n = t && t.style; if (r && OM.forEach((function (e) { var t = n && n[e]; a.current[e] = t })), r && nF < 1) { var i = parseInt(a.current.paddingRight, 10) || 0, o = document.body ? document.body.clientWidth : 0, s = window.innerWidth - o + i || 0; Object.keys(jM).forEach((function (e) { var t = jM[e]; n && (n[e] = t) })), n && (n.paddingRight = "".concat(s, "px")) } t && eF() && (t.addEventListener("touchmove", QM, iF), e && (e.addEventListener("touchstart", $M, iF), e.addEventListener("touchmove", qM, iF))), nF += 1 } }), [r]), l = (0, t.useCallback)((function (e) { if (tF) { var t = document.body, n = t && t.style; nF = Math.max(nF - 1, 0), r && nF < 1 && OM.forEach((function (e) { var t = a.current[e]; n && (n[e] = t) })), t && eF() && (t.removeEventListener("touchmove", QM, iF), e && (e.removeEventListener("touchstart", $M, iF), e.removeEventListener("touchmove", qM, iF))) } }), [r]); return (0, t.useEffect)((function () { if (n) { var e = o.current; return s(e), function () { l(e) } } }), [n, s, l]), function (e) { o.current = e } }({ isEnabled: i }); return N(t.Fragment, null, i && N("div", { onClick: rF, css: aF }), n((function (e) { a(e), o(e) }))) } var sF = { name: "1a0ro4n-requiredInput", styles: "label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%" }, lF = function (e) { var t = e.name, n = e.onFocus; return N("input", { required: !0, name: t, tabIndex: -1, "aria-hidden": "true", onFocus: n, css: sF, value: "", onChange: function () { } }) }, gF = { clearIndicator: AM, container: function (e) { var t = e.isDisabled; return { label: "container", direction: e.isRtl ? "rtl" : void 0, pointerEvents: t ? "none" : void 0, position: "relative" } }, control: function (e, t) { var n = e.isDisabled, i = e.isFocused, r = e.theme, a = r.colors, o = r.borderRadius; return ln({ label: "control", alignItems: "center", cursor: "default", display: "flex", flexWrap: "wrap", justifyContent: "space-between", minHeight: r.spacing.controlHeight, outline: "0 !important", position: "relative", transition: "all 100ms" }, t ? {} : { backgroundColor: n ? a.neutral5 : a.neutral0, borderColor: n ? a.neutral10 : i ? a.primary : a.neutral20, borderRadius: o, borderStyle: "solid", borderWidth: 1, boxShadow: i ? "0 0 0 1px ".concat(a.primary) : void 0, "&:hover": { borderColor: i ? a.primary : a.neutral30 } }) }, dropdownIndicator: hM, group: function (e, t) { var n = e.theme.spacing; return t ? {} : { paddingBottom: 2 * n.baseUnit, paddingTop: 2 * n.baseUnit } }, groupHeading: function (e, t) { var n = e.theme, i = n.colors, r = n.spacing; return ln({ label: "group", cursor: "default", display: "block" }, t ? {} : { color: i.neutral40, fontSize: "75%", fontWeight: 500, marginBottom: "0.25em", paddingLeft: 3 * r.baseUnit, paddingRight: 3 * r.baseUnit, textTransform: "uppercase" }) }, indicatorsContainer: function () { return { alignItems: "center", alignSelf: "stretch", display: "flex", flexShrink: 0 } }, indicatorSeparator: function (e, t) { var n = e.isDisabled, i = e.theme, r = i.spacing.baseUnit, a = i.colors; return ln({ label: "indicatorSeparator", alignSelf: "stretch", width: 1 }, t ? {} : { backgroundColor: n ? a.neutral10 : a.neutral20, marginBottom: 2 * r, marginTop: 2 * r }) }, input: function (e, t) { var n = e.isDisabled, i = e.value, r = e.theme, a = r.spacing, o = r.colors; return ln(ln({ visibility: n ? "hidden" : "visible", transform: i ? "translateZ(0)" : "" }, BM), t ? {} : { margin: a.baseUnit / 2, paddingBottom: a.baseUnit / 2, paddingTop: a.baseUnit / 2, color: o.neutral80 }) }, loadingIndicator: function (e, t) { var n = e.isFocused, i = e.size, r = e.theme, a = r.colors, o = r.spacing.baseUnit; return ln({ label: "loadingIndicator", display: "flex", transition: "color 150ms", alignSelf: "center", fontSize: i, lineHeight: 1, marginRight: i, textAlign: "center", verticalAlign: "middle" }, t ? {} : { color: n ? a.neutral60 : a.neutral20, padding: 2 * o }) }, loadingMessage: sM, menu: function (e, t) { var n, i = e.placement, r = e.theme, a = r.borderRadius, o = r.spacing, s = r.colors; return ln((n = { label: "menu" }, (0, l.Z)(n, function (e) { return e ? { bottom: "top", top: "bottom" }[e] : "bottom" }(i), "100%"), (0, l.Z)(n, "position", "absolute"), (0, l.Z)(n, "width", "100%"), (0, l.Z)(n, "zIndex", 1), n), t ? {} : { backgroundColor: s.neutral0, borderRadius: a, boxShadow: "0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)", marginBottom: o.menuGutter, marginTop: o.menuGutter }) }, menuList: function (e, t) { var n = e.maxHeight, i = e.theme.spacing.baseUnit; return ln({ maxHeight: n, overflowY: "auto", position: "relative", WebkitOverflowScrolling: "touch" }, t ? {} : { paddingBottom: i, paddingTop: i }) }, menuPortal: function (e) { var t = e.rect, n = e.offset, i = e.position; return { left: t.left, position: i, top: n, width: t.width, zIndex: 1 } }, multiValue: function (e, t) { var n = e.theme, i = n.spacing, r = n.borderRadius, a = n.colors; return ln({ label: "multiValue", display: "flex", minWidth: 0 }, t ? {} : { backgroundColor: a.neutral10, borderRadius: r / 2, margin: i.baseUnit / 2 }) }, multiValueLabel: function (e, t) { var n = e.theme, i = n.borderRadius, r = n.colors, a = e.cropWithEllipsis; return ln({ overflow: "hidden", textOverflow: a || void 0 === a ? "ellipsis" : void 0, whiteSpace: "nowrap" }, t ? {} : { borderRadius: i / 2, color: r.neutral80, fontSize: "85%", padding: 3, paddingLeft: 6 }) }, multiValueRemove: function (e, t) { var n = e.theme, i = n.spacing, r = n.borderRadius, a = n.colors, o = e.isFocused; return ln({ alignItems: "center", display: "flex" }, t ? {} : { borderRadius: r / 2, backgroundColor: o ? a.dangerLight : void 0, paddingLeft: i.baseUnit, paddingRight: i.baseUnit, ":hover": { backgroundColor: a.dangerLight, color: a.danger } }) }, noOptionsMessage: oM, option: function (e, t) { var n = e.isDisabled, i = e.isFocused, r = e.isSelected, a = e.theme, o = a.spacing, s = a.colors; return ln({ label: "option", cursor: "default", display: "block", fontSize: "inherit", width: "100%", userSelect: "none", WebkitTapHighlightColor: "rgba(0, 0, 0, 0)" }, t ? {} : { backgroundColor: r ? s.primary : i ? s.primary25 : "transparent", color: n ? s.neutral20 : r ? s.neutral0 : "inherit", padding: "".concat(2 * o.baseUnit, "px ").concat(3 * o.baseUnit, "px"), ":active": { backgroundColor: n ? void 0 : r ? s.primary : s.primary50 } }) }, placeholder: function (e, t) { var n = e.theme, i = n.spacing, r = n.colors; return ln({ label: "placeholder", gridArea: "1 / 1 / 2 / 3" }, t ? {} : { color: r.neutral50, marginLeft: i.baseUnit / 2, marginRight: i.baseUnit / 2 }) }, singleValue: function (e, t) { var n = e.isDisabled, i = e.theme, r = i.spacing, a = i.colors; return ln({ label: "singleValue", gridArea: "1 / 1 / 2 / 3", maxWidth: "100%", overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }, t ? {} : { color: n ? a.neutral40 : a.neutral80, marginLeft: r.baseUnit / 2, marginRight: r.baseUnit / 2 }) }, valueContainer: function (e, t) { var n = e.theme.spacing, i = e.isMulti, r = e.hasValue, a = e.selectProps.controlShouldRenderValue; return ln({ alignItems: "center", display: i && r && a ? "flex" : "grid", flex: 1, flexWrap: "wrap", WebkitOverflowScrolling: "touch", position: "relative", overflow: "hidden" }, t ? {} : { padding: "".concat(n.baseUnit / 2, "px ").concat(2 * n.baseUnit, "px") }) } }; var cF = { borderRadius: 4, colors: { primary: "#2684FF", primary75: "#4C9AFF", primary50: "#B2D4FF", primary25: "#DEEBFF", danger: "#DE350B", dangerLight: "#FFBDAD", neutral0: "hsl(0, 0%, 100%)", neutral5: "hsl(0, 0%, 95%)", neutral10: "hsl(0, 0%, 90%)", neutral20: "hsl(0, 0%, 80%)", neutral30: "hsl(0, 0%, 70%)", neutral40: "hsl(0, 0%, 60%)", neutral50: "hsl(0, 0%, 50%)", neutral60: "hsl(0, 0%, 40%)", neutral70: "hsl(0, 0%, 30%)", neutral80: "hsl(0, 0%, 20%)", neutral90: "hsl(0, 0%, 10%)" }, spacing: { baseUnit: 4, controlHeight: 38, menuGutter: 8 } }, uF = { "aria-live": "polite", backspaceRemovesValue: !0, blurInputOnSelect: _H(), captureMenuScroll: !_H(), classNames: {}, closeMenuOnSelect: !0, closeMenuOnScroll: !1, components: {}, controlShouldRenderValue: !0, escapeClearsValue: !1, filterOption: function (e) { return function (t, n) { if (t.data.__isNew__) return !0; var i = ln({ ignoreCase: !0, ignoreAccents: !0, stringify: UM, trim: !0, matchFrom: "any" }, e), r = i.ignoreCase, a = i.ignoreAccents, o = i.stringify, s = i.trim, l = i.matchFrom, g = s ? _M(n) : n, c = s ? _M(o(t)) : o(t); return r && (g = g.toLowerCase(), c = c.toLowerCase()), a && (g = TM(g), c = EM(c)), "start" === l ? c.substr(0, g.length) === g : c.indexOf(g) > -1 } }(), formatGroupLabel: function (e) { return e.label }, getOptionLabel: function (e) { return e.label }, getOptionValue: function (e) { return e.value }, isDisabled: !1, isLoading: !1, isMulti: !1, isRtl: !1, isSearchable: !0, isOptionDisabled: function (e) { return !!e.isDisabled }, loadingMessage: function () { return "Loading..." }, maxMenuHeight: 300, minMenuHeight: 140, menuIsOpen: !1, menuPlacement: "bottom", menuPosition: "absolute", menuShouldBlockScroll: !1, menuShouldScrollIntoView: !function () { try { return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) } catch (e) { return !1 } }(), noOptionsMessage: function () { return "No options" }, openMenuOnFocus: !1, openMenuOnClick: !0, options: [], pageSize: 5, placeholder: "Select...", screenReaderStatus: function (e) { var t = e.count; return "".concat(t, " result").concat(1 !== t ? "s" : "", " available") }, styles: {}, tabIndex: 0, tabSelectsValue: !0, unstyled: !1 }; function CF(e, t, n, i) { return { type: "option", data: t, isDisabled: fF(e, t, n), isSelected: mF(e, t, n), label: AF(e, t), value: pF(e, t), index: i } } function dF(e, t) { return e.options.map((function (n, i) { if ("options" in n) { var r = n.options.map((function (n, i) { return CF(e, n, t, i) })).filter((function (t) { return hF(e, t) })); return r.length > 0 ? { type: "group", data: n, options: r, index: i } : void 0 } var a = CF(e, n, t, i); return hF(e, a) ? a : void 0 })).filter(OH) } function IF(e) { return e.reduce((function (e, t) { return "group" === t.type ? e.push.apply(e, (0, v.Z)(t.options.map((function (e) { return e.data })))) : e.push(t.data), e }), []) } function hF(e, t) { var n = e.inputValue, i = void 0 === n ? "" : n, r = t.data, a = t.isSelected, o = t.label, s = t.value; return (!bF(e) || !a) && vF(e, { label: o, value: s, data: r }, i) } var AF = function (e, t) { return e.getOptionLabel(t) }, pF = function (e, t) { return e.getOptionValue(t) }; function fF(e, t, n) { return "function" === typeof e.isOptionDisabled && e.isOptionDisabled(t, n) } function mF(e, t, n) { if (n.indexOf(t) > -1) return !0; if ("function" === typeof e.isOptionSelected) return e.isOptionSelected(t, n); var i = pF(e, t); return n.some((function (t) { return pF(e, t) === i })) } function vF(e, t, n) { return !e.filterOption || e.filterOption(t, n) } var bF = function (e) { var t = e.hideSelectedOptions, n = e.isMulti; return void 0 === t ? n : t }, yF = 1, GF = function (e) { Ir(i, e); var n = fr(i); function i(e) { var t; if (cr(this, i), (t = n.call(this, e)).state = { ariaSelection: null, focusedOption: null, focusedValue: null, inputIsHidden: !1, isFocused: !1, selectValue: [], clearFocusValueOnUpdate: !1, prevWasFocused: !1, inputIsHiddenAfterUpdate: void 0, prevProps: void 0 }, t.blockOptionHover = !1, t.isComposing = !1, t.commonProps = void 0, t.initialTouchX = 0, t.initialTouchY = 0, t.instancePrefix = "", t.openAfterFocus = !1, t.scrollToFocusedOptionOnUpdate = !1, t.userIsDragging = void 0, t.controlRef = null, t.getControlRef = function (e) { t.controlRef = e }, t.focusedOptionRef = null, t.getFocusedOptionRef = function (e) { t.focusedOptionRef = e }, t.menuListRef = null, t.getMenuListRef = function (e) { t.menuListRef = e }, t.inputRef = null, t.getInputRef = function (e) { t.inputRef = e }, t.focus = t.focusInput, t.blur = t.blurInput, t.onChange = function (e, n) { var i = t.props, r = i.onChange, a = i.name; n.name = a, t.ariaOnChange(e, n), r(e, n) }, t.setValue = function (e, n, i) { var r = t.props, a = r.closeMenuOnSelect, o = r.isMulti, s = r.inputValue; t.onInputChange("", { action: "set-value", prevInputValue: s }), a && (t.setState({ inputIsHiddenAfterUpdate: !o }), t.onMenuClose()), t.setState({ clearFocusValueOnUpdate: !0 }), t.onChange(e, { action: n, option: i }) }, t.selectOption = function (e) { var n = t.props, i = n.blurInputOnSelect, r = n.isMulti, a = n.name, o = t.state.selectValue, s = r && t.isOptionSelected(e, o), l = t.isOptionDisabled(e, o); if (s) { var g = t.getOptionValue(e); t.setValue(o.filter((function (e) { return t.getOptionValue(e) !== g })), "deselect-option", e) } else { if (l) return void t.ariaOnChange(e, { action: "select-option", option: e, name: a }); r ? t.setValue([].concat((0, v.Z)(o), [e]), "select-option", e) : t.setValue(e, "select-option") } i && t.blurInput() }, t.removeValue = function (e) { var n = t.props.isMulti, i = t.state.selectValue, r = t.getOptionValue(e), a = i.filter((function (e) { return t.getOptionValue(e) !== r })), o = jH(n, a, a[0] || null); t.onChange(o, { action: "remove-value", removedValue: e }), t.focusInput() }, t.clearValue = function () { var e = t.state.selectValue; t.onChange(jH(t.props.isMulti, [], null), { action: "clear", removedValues: e }) }, t.popValue = function () { var e = t.props.isMulti, n = t.state.selectValue, i = n[n.length - 1], r = n.slice(0, n.length - 1), a = jH(e, r, r[0] || null); t.onChange(a, { action: "pop-value", removedValue: i }) }, t.getValue = function () { return t.state.selectValue }, t.cx = function () { for (var e = arguments.length, n = new Array(e), i = 0; i < e; i++)n[i] = arguments[i]; return FH.apply(void 0, [t.props.classNamePrefix].concat(n)) }, t.getOptionLabel = function (e) { return AF(t.props, e) }, t.getOptionValue = function (e) { return pF(t.props, e) }, t.getStyles = function (e, n) { var i = t.props.unstyled, r = gF[e](n, i); r.boxSizing = "border-box"; var a = t.props.styles[e]; return a ? a(r, n) : r }, t.getClassNames = function (e, n) { var i, r; return null === (i = (r = t.props.classNames)[e]) || void 0 === i ? void 0 : i.call(r, n) }, t.getElementId = function (e) { return "".concat(t.instancePrefix, "-").concat(e) }, t.getComponents = function () { return e = t.props, ln(ln({}, RM), e.components); var e }, t.buildCategorizedOptions = function () { return dF(t.props, t.state.selectValue) }, t.getCategorizedOptions = function () { return t.props.menuIsOpen ? t.buildCategorizedOptions() : [] }, t.buildFocusableOptions = function () { return IF(t.buildCategorizedOptions()) }, t.getFocusableOptions = function () { return t.props.menuIsOpen ? t.buildFocusableOptions() : [] }, t.ariaOnChange = function (e, n) { t.setState({ ariaSelection: ln({ value: e }, n) }) }, t.onMenuMouseDown = function (e) { 0 === e.button && (e.stopPropagation(), e.preventDefault(), t.focusInput()) }, t.onMenuMouseMove = function (e) { t.blockOptionHover = !1 }, t.onControlMouseDown = function (e) { if (!e.defaultPrevented) { var n = t.props.openMenuOnClick; t.state.isFocused ? t.props.menuIsOpen ? "INPUT" !== e.target.tagName && "TEXTAREA" !== e.target.tagName && t.onMenuClose() : n && t.openMenu("first") : (n && (t.openAfterFocus = !0), t.focusInput()), "INPUT" !== e.target.tagName && "TEXTAREA" !== e.target.tagName && e.preventDefault() } }, t.onDropdownIndicatorMouseDown = function (e) { if ((!e || "mousedown" !== e.type || 0 === e.button) && !t.props.isDisabled) { var n = t.props, i = n.isMulti, r = n.menuIsOpen; t.focusInput(), r ? (t.setState({ inputIsHiddenAfterUpdate: !i }), t.onMenuClose()) : t.openMenu("first"), e.preventDefault() } }, t.onClearIndicatorMouseDown = function (e) { e && "mousedown" === e.type && 0 !== e.button || (t.clearValue(), e.preventDefault(), t.openAfterFocus = !1, "touchend" === e.type ? t.focusInput() : setTimeout((function () { return t.focusInput() }))) }, t.onScroll = function (e) { "boolean" === typeof t.props.closeMenuOnScroll ? e.target instanceof HTMLElement && KH(e.target) && t.props.onMenuClose() : "function" === typeof t.props.closeMenuOnScroll && t.props.closeMenuOnScroll(e) && t.props.onMenuClose() }, t.onCompositionStart = function () { t.isComposing = !0 }, t.onCompositionEnd = function () { t.isComposing = !1 }, t.onTouchStart = function (e) { var n = e.touches, i = n && n.item(0); i && (t.initialTouchX = i.clientX, t.initialTouchY = i.clientY, t.userIsDragging = !1) }, t.onTouchMove = function (e) { var n = e.touches, i = n && n.item(0); if (i) { var r = Math.abs(i.clientX - t.initialTouchX), a = Math.abs(i.clientY - t.initialTouchY); t.userIsDragging = r > 5 || a > 5 } }, t.onTouchEnd = function (e) { t.userIsDragging || (t.controlRef && !t.controlRef.contains(e.target) && t.menuListRef && !t.menuListRef.contains(e.target) && t.blurInput(), t.initialTouchX = 0, t.initialTouchY = 0) }, t.onControlTouchEnd = function (e) { t.userIsDragging || t.onControlMouseDown(e) }, t.onClearIndicatorTouchEnd = function (e) { t.userIsDragging || t.onClearIndicatorMouseDown(e) }, t.onDropdownIndicatorTouchEnd = function (e) { t.userIsDragging || t.onDropdownIndicatorMouseDown(e) }, t.handleInputChange = function (e) { var n = t.props.inputValue, i = e.currentTarget.value; t.setState({ inputIsHiddenAfterUpdate: !1 }), t.onInputChange(i, { action: "input-change", prevInputValue: n }), t.props.menuIsOpen || t.onMenuOpen() }, t.onInputFocus = function (e) { t.props.onFocus && t.props.onFocus(e), t.setState({ inputIsHiddenAfterUpdate: !1, isFocused: !0 }), (t.openAfterFocus || t.props.openMenuOnFocus) && t.openMenu("first"), t.openAfterFocus = !1 }, t.onInputBlur = function (e) { var n = t.props.inputValue; t.menuListRef && t.menuListRef.contains(document.activeElement) ? t.inputRef.focus() : (t.props.onBlur && t.props.onBlur(e), t.onInputChange("", { action: "input-blur", prevInputValue: n }), t.onMenuClose(), t.setState({ focusedValue: null, isFocused: !1 })) }, t.onOptionHover = function (e) { t.blockOptionHover || t.state.focusedOption === e || t.setState({ focusedOption: e }) }, t.shouldHideSelectedOptions = function () { return bF(t.props) }, t.onValueInputFocus = function (e) { e.preventDefault(), e.stopPropagation(), t.focus() }, t.onKeyDown = function (e) { var n = t.props, i = n.isMulti, r = n.backspaceRemovesValue, a = n.escapeClearsValue, o = n.inputValue, s = n.isClearable, l = n.isDisabled, g = n.menuIsOpen, c = n.onKeyDown, u = n.tabSelectsValue, C = n.openMenuOnFocus, d = t.state, I = d.focusedOption, h = d.focusedValue, A = d.selectValue; if (!l && ("function" !== typeof c || (c(e), !e.defaultPrevented))) { switch (t.blockOptionHover = !0, e.key) { case "ArrowLeft": if (!i || o) return; t.focusValue("previous"); break; case "ArrowRight": if (!i || o) return; t.focusValue("next"); break; case "Delete": case "Backspace": if (o) return; if (h) t.removeValue(h); else { if (!r) return; i ? t.popValue() : s && t.clearValue() } break; case "Tab": if (t.isComposing) return; if (e.shiftKey || !g || !u || !I || C && t.isOptionSelected(I, A)) return; t.selectOption(I); break; case "Enter": if (229 === e.keyCode) break; if (g) { if (!I) return; if (t.isComposing) return; t.selectOption(I); break } return; case "Escape": g ? (t.setState({ inputIsHiddenAfterUpdate: !1 }), t.onInputChange("", { action: "menu-close", prevInputValue: o }), t.onMenuClose()) : s && a && t.clearValue(); break; case " ": if (o) return; if (!g) { t.openMenu("first"); break } if (!I) return; t.selectOption(I); break; case "ArrowUp": g ? t.focusOption("up") : t.openMenu("last"); break; case "ArrowDown": g ? t.focusOption("down") : t.openMenu("first"); break; case "PageUp": if (!g) return; t.focusOption("pageup"); break; case "PageDown": if (!g) return; t.focusOption("pagedown"); break; case "Home": if (!g) return; t.focusOption("first"); break; case "End": if (!g) return; t.focusOption("last"); break; default: return }e.preventDefault() } }, t.instancePrefix = "react-select-" + (t.props.instanceId || ++yF), t.state.selectValue = NH(e.value), e.menuIsOpen && t.state.selectValue.length) { var r = t.buildFocusableOptions(), a = r.indexOf(t.state.selectValue[0]); t.state.focusedOption = r[a] } return t } return dr(i, [{ key: "componentDidMount", value: function () { this.startListeningComposition(), this.startListeningToTouch(), this.props.closeMenuOnScroll && document && document.addEventListener && document.addEventListener("scroll", this.onScroll, !0), this.props.autoFocus && this.focusInput(), this.props.menuIsOpen && this.state.focusedOption && this.menuListRef && this.focusedOptionRef && TH(this.menuListRef, this.focusedOptionRef) } }, { key: "componentDidUpdate", value: function (e) { var t = this.props, n = t.isDisabled, i = t.menuIsOpen, r = this.state.isFocused; (r && !n && e.isDisabled || r && i && !e.menuIsOpen) && this.focusInput(), r && n && !e.isDisabled ? this.setState({ isFocused: !1 }, this.onMenuClose) : r || n || !e.isDisabled || this.inputRef !== document.activeElement || this.setState({ isFocused: !0 }), this.menuListRef && this.focusedOptionRef && this.scrollToFocusedOptionOnUpdate && (TH(this.menuListRef, this.focusedOptionRef), this.scrollToFocusedOptionOnUpdate = !1) } }, { key: "componentWillUnmount", value: function () { this.stopListeningComposition(), this.stopListeningToTouch(), document.removeEventListener("scroll", this.onScroll, !0) } }, { key: "onMenuOpen", value: function () { this.props.onMenuOpen() } }, { key: "onMenuClose", value: function () { this.onInputChange("", { action: "menu-close", prevInputValue: this.props.inputValue }), this.props.onMenuClose() } }, { key: "onInputChange", value: function (e, t) { this.props.onInputChange(e, t) } }, { key: "focusInput", value: function () { this.inputRef && this.inputRef.focus() } }, { key: "blurInput", value: function () { this.inputRef && this.inputRef.blur() } }, { key: "openMenu", value: function (e) { var t = this, n = this.state, i = n.selectValue, r = n.isFocused, a = this.buildFocusableOptions(), o = "first" === e ? 0 : a.length - 1; if (!this.props.isMulti) { var s = a.indexOf(i[0]); s > -1 && (o = s) } this.scrollToFocusedOptionOnUpdate = !(r && this.menuListRef), this.setState({ inputIsHiddenAfterUpdate: !1, focusedValue: null, focusedOption: a[o] }, (function () { return t.onMenuOpen() })) } }, { key: "focusValue", value: function (e) { var t = this.state, n = t.selectValue, i = t.focusedValue; if (this.props.isMulti) { this.setState({ focusedOption: null }); var r = n.indexOf(i); i || (r = -1); var a = n.length - 1, o = -1; if (n.length) { switch (e) { case "previous": o = 0 === r ? 0 : -1 === r ? a : r - 1; break; case "next": r > -1 && r < a && (o = r + 1) }this.setState({ inputIsHidden: -1 !== o, focusedValue: n[o] }) } } } }, { key: "focusOption", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "first", t = this.props.pageSize, n = this.state.focusedOption, i = this.getFocusableOptions(); if (i.length) { var r = 0, a = i.indexOf(n); n || (a = -1), "up" === e ? r = a > 0 ? a - 1 : i.length - 1 : "down" === e ? r = (a + 1) % i.length : "pageup" === e ? (r = a - t) < 0 && (r = 0) : "pagedown" === e ? (r = a + t) > i.length - 1 && (r = i.length - 1) : "last" === e && (r = i.length - 1), this.scrollToFocusedOptionOnUpdate = !0, this.setState({ focusedOption: i[r], focusedValue: null }) } } }, { key: "getTheme", value: function () { return this.props.theme ? "function" === typeof this.props.theme ? this.props.theme(cF) : ln(ln({}, cF), this.props.theme) : cF } }, { key: "getCommonProps", value: function () { var e = this.clearValue, t = this.cx, n = this.getStyles, i = this.getClassNames, r = this.getValue, a = this.selectOption, o = this.setValue, s = this.props, l = s.isMulti, g = s.isRtl, c = s.options; return { clearValue: e, cx: t, getStyles: n, getClassNames: i, getValue: r, hasValue: this.hasValue(), isMulti: l, isRtl: g, options: c, selectOption: a, selectProps: s, setValue: o, theme: this.getTheme() } } }, { key: "hasValue", value: function () { return this.state.selectValue.length > 0 } }, { key: "hasOptions", value: function () { return !!this.getFocusableOptions().length } }, { key: "isClearable", value: function () { var e = this.props, t = e.isClearable, n = e.isMulti; return void 0 === t ? n : t } }, { key: "isOptionDisabled", value: function (e, t) { return fF(this.props, e, t) } }, { key: "isOptionSelected", value: function (e, t) { return mF(this.props, e, t) } }, { key: "filterOption", value: function (e, t) { return vF(this.props, e, t) } }, { key: "formatOptionLabel", value: function (e, t) { if ("function" === typeof this.props.formatOptionLabel) { var n = this.props.inputValue, i = this.state.selectValue; return this.props.formatOptionLabel(e, { context: t, inputValue: n, selectValue: i }) } return this.getOptionLabel(e) } }, { key: "formatGroupLabel", value: function (e) { return this.props.formatGroupLabel(e) } }, { key: "startListeningComposition", value: function () { document && document.addEventListener && (document.addEventListener("compositionstart", this.onCompositionStart, !1), document.addEventListener("compositionend", this.onCompositionEnd, !1)) } }, { key: "stopListeningComposition", value: function () { document && document.removeEventListener && (document.removeEventListener("compositionstart", this.onCompositionStart), document.removeEventListener("compositionend", this.onCompositionEnd)) } }, { key: "startListeningToTouch", value: function () { document && document.addEventListener && (document.addEventListener("touchstart", this.onTouchStart, !1), document.addEventListener("touchmove", this.onTouchMove, !1), document.addEventListener("touchend", this.onTouchEnd, !1)) } }, { key: "stopListeningToTouch", value: function () { document && document.removeEventListener && (document.removeEventListener("touchstart", this.onTouchStart), document.removeEventListener("touchmove", this.onTouchMove), document.removeEventListener("touchend", this.onTouchEnd)) } }, { key: "renderInput", value: function () { var e = this.props, n = e.isDisabled, i = e.isSearchable, r = e.inputId, a = e.inputValue, o = e.tabIndex, s = e.form, l = e.menuIsOpen, g = e.required, u = this.getComponents().Input, C = this.state, d = C.inputIsHidden, I = C.ariaSelection, h = this.commonProps, A = r || this.getElementId("input"), p = ln(ln(ln({ "aria-autocomplete": "list", "aria-expanded": l, "aria-haspopup": !0, "aria-errormessage": this.props["aria-errormessage"], "aria-invalid": this.props["aria-invalid"], "aria-label": this.props["aria-label"], "aria-labelledby": this.props["aria-labelledby"], "aria-required": g, role: "combobox" }, l && { "aria-controls": this.getElementId("listbox"), "aria-owns": this.getElementId("listbox") }), !i && { "aria-readonly": !0 }), this.hasValue() ? "initial-input-focus" === (null === I || void 0 === I ? void 0 : I.action) && { "aria-describedby": this.getElementId("live-region") } : { "aria-describedby": this.getElementId("placeholder") }); return i ? t.createElement(u, (0, c.Z)({}, h, { autoCapitalize: "none", autoComplete: "off", autoCorrect: "off", id: A, innerRef: this.getInputRef, isDisabled: n, isHidden: d, onBlur: this.onInputBlur, onChange: this.handleInputChange, onFocus: this.onInputFocus, spellCheck: "false", tabIndex: o, form: s, type: "text", value: a }, p)) : t.createElement(PM, (0, c.Z)({ id: A, innerRef: this.getInputRef, onBlur: this.onInputBlur, onChange: HH, onFocus: this.onInputFocus, disabled: n, tabIndex: o, inputMode: "none", form: s, value: "" }, p)) } }, { key: "renderPlaceholderOrValue", value: function () { var e = this, n = this.getComponents(), i = n.MultiValue, r = n.MultiValueContainer, a = n.MultiValueLabel, o = n.MultiValueRemove, s = n.SingleValue, l = n.Placeholder, g = this.commonProps, u = this.props, C = u.controlShouldRenderValue, d = u.isDisabled, I = u.isMulti, h = u.inputValue, A = u.placeholder, p = this.state, f = p.selectValue, m = p.focusedValue, v = p.isFocused; if (!this.hasValue() || !C) return h ? null : t.createElement(l, (0, c.Z)({}, g, { key: "placeholder", isDisabled: d, isFocused: v, innerProps: { id: this.getElementId("placeholder") } }), A); if (I) return f.map((function (n, s) { var l = n === m, u = "".concat(e.getOptionLabel(n), "-").concat(e.getOptionValue(n)); return t.createElement(i, (0, c.Z)({}, g, { components: { Container: r, Label: a, Remove: o }, isFocused: l, isDisabled: d, key: u, index: s, removeProps: { onClick: function () { return e.removeValue(n) }, onTouchEnd: function () { return e.removeValue(n) }, onMouseDown: function (e) { e.preventDefault() } }, data: n }), e.formatOptionLabel(n, "value")) })); if (h) return null; var b = f[0]; return t.createElement(s, (0, c.Z)({}, g, { data: b, isDisabled: d }), this.formatOptionLabel(b, "value")) } }, { key: "renderClearIndicator", value: function () { var e = this.getComponents().ClearIndicator, n = this.commonProps, i = this.props, r = i.isDisabled, a = i.isLoading, o = this.state.isFocused; if (!this.isClearable() || !e || r || !this.hasValue() || a) return null; var s = { onMouseDown: this.onClearIndicatorMouseDown, onTouchEnd: this.onClearIndicatorTouchEnd, "aria-hidden": "true" }; return t.createElement(e, (0, c.Z)({}, n, { innerProps: s, isFocused: o })) } }, { key: "renderLoadingIndicator", value: function () { var e = this.getComponents().LoadingIndicator, n = this.commonProps, i = this.props, r = i.isDisabled, a = i.isLoading, o = this.state.isFocused; if (!e || !a) return null; return t.createElement(e, (0, c.Z)({}, n, { innerProps: { "aria-hidden": "true" }, isDisabled: r, isFocused: o })) } }, { key: "renderIndicatorSeparator", value: function () { var e = this.getComponents(), n = e.DropdownIndicator, i = e.IndicatorSeparator; if (!n || !i) return null; var r = this.commonProps, a = this.props.isDisabled, o = this.state.isFocused; return t.createElement(i, (0, c.Z)({}, r, { isDisabled: a, isFocused: o })) } }, { key: "renderDropdownIndicator", value: function () { var e = this.getComponents().DropdownIndicator; if (!e) return null; var n = this.commonProps, i = this.props.isDisabled, r = this.state.isFocused, a = { onMouseDown: this.onDropdownIndicatorMouseDown, onTouchEnd: this.onDropdownIndicatorTouchEnd, "aria-hidden": "true" }; return t.createElement(e, (0, c.Z)({}, n, { innerProps: a, isDisabled: i, isFocused: r })) } }, { key: "renderMenu", value: function () { var e = this, n = this.getComponents(), i = n.Group, r = n.GroupHeading, a = n.Menu, o = n.MenuList, s = n.MenuPortal, l = n.LoadingMessage, g = n.NoOptionsMessage, u = n.Option, C = this.commonProps, d = this.state.focusedOption, I = this.props, h = I.captureMenuScroll, A = I.inputValue, p = I.isLoading, f = I.loadingMessage, m = I.minMenuHeight, v = I.maxMenuHeight, b = I.menuIsOpen, y = I.menuPlacement, G = I.menuPosition, B = I.menuPortalTarget, Z = I.menuShouldBlockScroll, w = I.menuShouldScrollIntoView, S = I.noOptionsMessage, R = I.onMenuScrollToTop, x = I.onMenuScrollToBottom; if (!b) return null; var W, V = function (n, i) { var r = n.type, a = n.data, o = n.isDisabled, s = n.isSelected, l = n.label, g = n.value, I = d === a, h = o ? void 0 : function () { return e.onOptionHover(a) }, A = o ? void 0 : function () { return e.selectOption(a) }, p = "".concat(e.getElementId("option"), "-").concat(i), f = { id: p, onClick: A, onMouseMove: h, onMouseOver: h, tabIndex: -1 }; return t.createElement(u, (0, c.Z)({}, C, { innerProps: f, data: a, isDisabled: o, isSelected: s, key: p, label: l, type: r, value: g, isFocused: I, innerRef: I ? e.getFocusedOptionRef : void 0 }), e.formatOptionLabel(n.data, "menu")) }; if (this.hasOptions()) W = this.getCategorizedOptions().map((function (n) { if ("group" === n.type) { var a = n.data, o = n.options, s = n.index, l = "".concat(e.getElementId("group"), "-").concat(s), g = "".concat(l, "-heading"); return t.createElement(i, (0, c.Z)({}, C, { key: l, data: a, options: o, Heading: r, headingProps: { id: g, data: n.data }, label: e.formatGroupLabel(n.data) }), n.options.map((function (e) { return V(e, "".concat(s, "-").concat(e.index)) }))) } if ("option" === n.type) return V(n, "".concat(n.index)) })); else if (p) { var k = f({ inputValue: A }); if (null === k) return null; W = t.createElement(l, C, k) } else { var H = S({ inputValue: A }); if (null === H) return null; W = t.createElement(g, C, H) } var M = { minMenuHeight: m, maxMenuHeight: v, menuPlacement: y, menuPosition: G, menuShouldScrollIntoView: w }, F = t.createElement(iM, (0, c.Z)({}, C, M), (function (n) { var i = n.ref, r = n.placerProps, s = r.placement, l = r.maxHeight; return t.createElement(a, (0, c.Z)({}, C, M, { innerRef: i, innerProps: { onMouseDown: e.onMenuMouseDown, onMouseMove: e.onMenuMouseMove, id: e.getElementId("listbox") }, isLoading: p, placement: s }), t.createElement(oF, { captureEnabled: h, onTopArrive: R, onBottomArrive: x, lockEnabled: Z }, (function (n) { return t.createElement(o, (0, c.Z)({}, C, { innerRef: function (t) { e.getMenuListRef(t), n(t) }, isLoading: p, maxHeight: l, focusedOption: d }), W) }))) })); return B || "fixed" === G ? t.createElement(s, (0, c.Z)({}, C, { appendTo: B, controlElement: this.controlRef, menuPlacement: y, menuPosition: G }), F) : F } }, { key: "renderFormField", value: function () { var e = this, n = this.props, i = n.delimiter, r = n.isDisabled, a = n.isMulti, o = n.name, s = n.required, l = this.state.selectValue; if (s && !this.hasValue() && !r) return t.createElement(lF, { name: o, onFocus: this.onValueInputFocus }); if (o && !r) { if (a) { if (i) { var g = l.map((function (t) { return e.getOptionValue(t) })).join(i); return t.createElement("input", { name: o, type: "hidden", value: g }) } var c = l.length > 0 ? l.map((function (n, i) { return t.createElement("input", { key: "i-".concat(i), name: o, type: "hidden", value: e.getOptionValue(n) }) })) : t.createElement("input", { name: o, type: "hidden", value: "" }); return t.createElement("div", null, c) } var u = l[0] ? this.getOptionValue(l[0]) : ""; return t.createElement("input", { name: o, type: "hidden", value: u }) } } }, { key: "renderLiveRegion", value: function () { var e = this.commonProps, n = this.state, i = n.ariaSelection, r = n.focusedOption, a = n.focusedValue, o = n.isFocused, s = n.selectValue, l = this.getFocusableOptions(); return t.createElement(FM, (0, c.Z)({}, e, { id: this.getElementId("live-region"), ariaSelection: i, focusedOption: r, focusedValue: a, isFocused: o, selectValue: s, focusableOptions: l })) } }, { key: "render", value: function () { var e = this.getComponents(), n = e.Control, i = e.IndicatorsContainer, r = e.SelectContainer, a = e.ValueContainer, o = this.props, s = o.className, l = o.id, g = o.isDisabled, u = o.menuIsOpen, C = this.state.isFocused, d = this.commonProps = this.getCommonProps(); return t.createElement(r, (0, c.Z)({}, d, { className: s, innerProps: { id: l, onKeyDown: this.onKeyDown }, isDisabled: g, isFocused: C }), this.renderLiveRegion(), t.createElement(n, (0, c.Z)({}, d, { innerRef: this.getControlRef, innerProps: { onMouseDown: this.onControlMouseDown, onTouchEnd: this.onControlTouchEnd }, isDisabled: g, isFocused: C, menuIsOpen: u }), t.createElement(a, (0, c.Z)({}, d, { isDisabled: g }), this.renderPlaceholderOrValue(), this.renderInput()), t.createElement(i, (0, c.Z)({}, d, { isDisabled: g }), this.renderClearIndicator(), this.renderLoadingIndicator(), this.renderIndicatorSeparator(), this.renderDropdownIndicator())), this.renderMenu(), this.renderFormField()) } }], [{ key: "getDerivedStateFromProps", value: function (e, t) { var n = t.prevProps, i = t.clearFocusValueOnUpdate, r = t.inputIsHiddenAfterUpdate, a = t.ariaSelection, o = t.isFocused, s = t.prevWasFocused, l = e.options, g = e.value, c = e.menuIsOpen, u = e.inputValue, C = e.isMulti, d = NH(g), I = {}; if (n && (g !== n.value || l !== n.options || c !== n.menuIsOpen || u !== n.inputValue)) { var h = c ? function (e, t) { return IF(dF(e, t)) }(e, d) : [], A = i ? function (e, t) { var n = e.focusedValue, i = e.selectValue.indexOf(n); if (i > -1) { if (t.indexOf(n) > -1) return n; if (i < t.length) return t[i] } return null }(t, d) : null, p = function (e, t) { var n = e.focusedOption; return n && t.indexOf(n) > -1 ? n : t[0] }(t, h); I = { selectValue: d, focusedOption: p, focusedValue: A, clearFocusValueOnUpdate: !1 } } var f = null != r && e !== n ? { inputIsHidden: r, inputIsHiddenAfterUpdate: void 0 } : {}, m = a, v = o && s; return o && !v && (m = { value: jH(C, d, d[0] || null), options: d, action: "initial-input-focus" }, v = !s), "initial-input-focus" === (null === a || void 0 === a ? void 0 : a.action) && (m = null), ln(ln(ln({}, I), f), {}, { prevProps: e, ariaSelection: m, prevWasFocused: v }) } }]), i }(t.Component); GF.defaultProps = uF; var BF = (0, t.forwardRef)((function (e, n) { var i = function (e) { var n = e.defaultInputValue, i = void 0 === n ? "" : n, a = e.defaultMenuIsOpen, o = void 0 !== a && a, s = e.defaultValue, l = void 0 === s ? null : s, g = e.inputValue, c = e.menuIsOpen, u = e.onChange, C = e.onInputChange, d = e.onMenuClose, I = e.onMenuOpen, h = e.value, A = or(e, iH), p = (0, t.useState)(void 0 !== g ? g : i), f = (0, r.Z)(p, 2), m = f[0], v = f[1], b = (0, t.useState)(void 0 !== c ? c : o), y = (0, r.Z)(b, 2), G = y[0], B = y[1], Z = (0, t.useState)(void 0 !== h ? h : l), w = (0, r.Z)(Z, 2), S = w[0], R = w[1], x = (0, t.useCallback)((function (e, t) { "function" === typeof u && u(e, t), R(e) }), [u]), W = (0, t.useCallback)((function (e, t) { var n; "function" === typeof C && (n = C(e, t)), v(void 0 !== n ? n : e) }), [C]), V = (0, t.useCallback)((function () { "function" === typeof I && I(), B(!0) }), [I]), k = (0, t.useCallback)((function () { "function" === typeof d && d(), B(!1) }), [d]), H = void 0 !== g ? g : m, M = void 0 !== c ? c : G, F = void 0 !== h ? h : S; return ln(ln({}, A), {}, { inputValue: H, menuIsOpen: M, onChange: x, onInputChange: W, onMenuClose: k, onMenuOpen: V, value: F }) }(e); return t.createElement(GF, (0, c.Z)({ ref: n }, i)) })), ZF = BF, wF = function (e) { var t = e.text, n = e.heading; return (0, K.jsxs)("div", { style: { marginTop: "20px", marginBottom: "20px", color: "white" }, children: [(0, K.jsx)("h2", { style: { marginLeft: -1, color: "#22eff1" }, children: n }), (0, K.jsx)("ul", { children: t.map((function (e, t) { return (0, K.jsx)("li", { style: { marginTop: "25px" }, children: e }, t) })) })] }) }; function SF(e) { var n = e.onClick, i = (0, t.useState)(!1), a = (0, r.Z)(i, 2), o = a[0]; a[1]; return (0, K.jsxs)(K.Fragment, { children: [(0, K.jsx)(wF, { text: ["To continue voting with the newly replaced secure voting machine, simply click the 'Continuing' button, similar to how validated transactions are added to the blockchain."], heading: "3.Securing Electoral Process" }), (0, K.jsx)("div", { className: "alerts", children: (0, K.jsxs)("div", { className: "card alerts", style: { width: "20rem", marginLeft: 30 }, children: [(0, K.jsx)("i", { className: "fa-solid fa-square-check", style: { fontSize: "5em", textAlign: "center", display: "block", margin: "5% auto" } }), (0, K.jsxs)("div", { className: "card-body", children: [(0, K.jsx)("h5", { className: "alerthead", children: "Success!" }), (0, K.jsx)("p", { className: "card-text", children: "Secruity check completed successfully, voting machine is secure to use , continue with your voting process." }), (0, K.jsx)("button", { onClick: n, className: "btn btnss", children: "Continue" }), o && (0, K.jsx)(HF, {})] })] }) })] }) } var RF = function (e) { var n = e.onClick, i = (0, t.useState)(!1), a = (0, r.Z)(i, 2), o = a[0], s = a[1], l = (0, t.useState)(!1), g = (0, r.Z)(l, 2), c = g[0], u = g[1], C = (0, t.useState)(!1), d = (0, r.Z)(C, 2), I = d[0], h = d[1], A = (0, t.useState)(!1), p = (0, r.Z)(A, 2), f = p[0], m = (p[1], (0, t.useState)(!0)), v = (0, r.Z)(m, 2), b = v[0], y = v[1]; return (0, t.useEffect)((function () { y(!(o && c && I)) }), [o, c, I]), (0, K.jsxs)(K.Fragment, { children: [(0, K.jsx)(wF, { text: ["Just as miners in PoW must solve complex puzzles to secure the blockchain, all three checkboxes must be ticked to trigger voting machine replacement."], heading: "3.Securing Electoral Process" }), (0, K.jsxs)("div", { className: "card checkbox", style: { marginTop: 30 }, children: [(0, K.jsx)("div", { className: "card-header" }), (0, K.jsx)("div", { className: "card-tittle", children: (0, K.jsx)("h5", { children: "Criteria for Secure Voting Machine" }) }), (0, K.jsxs)("div", { className: "form-check", children: [(0, K.jsx)("input", { type: "checkbox", className: "form-check-input", id: "greenLightCheckbox", checked: o, onChange: function () { s(!o) } }), (0, K.jsx)("label", { className: "form-check-label", htmlFor: "greenLightCheckbox", children: "Green Light Indication" }), (0, K.jsx)("br", {}), (0, K.jsx)("input", { type: "checkbox", className: "form-check-input", id: "serialNumberCheckbox", checked: c, onChange: function () { u(!c) } }), (0, K.jsx)("label", { className: "form-check-label", htmlFor: "serialNumberCheckbox", children: "Serial Number Matching" }), (0, K.jsx)("br", {}), (0, K.jsx)("input", { type: "checkbox", className: "form-check-input", id: "beepSoundCheckbox", checked: I, onChange: function () { h(!I) } }), (0, K.jsx)("label", { className: "form-check-label", htmlFor: "beepSoundCheckbox", children: "Beep Sound Indication" }), (0, K.jsx)("br", {}), (0, K.jsx)("button", { onClick: n, className: "btn checkbox-button", disabled: b, children: " Submit " }), f && (0, K.jsx)(SF, {})] })] })] }) }; var xF = function (e) { var n = e.onClick, i = (0, t.useState)(""), a = (0, r.Z)(i, 2), o = a[0], s = a[1], l = (0, t.useState)(""), g = (0, r.Z)(l, 2), c = g[0], u = g[1], C = (0, t.useState)(""), d = (0, r.Z)(C, 2), I = d[0], h = d[1], A = (0, t.useState)(!1), p = (0, r.Z)(A, 2), f = p[0]; return p[1], (0, K.jsxs)(K.Fragment, { children: [(0, K.jsx)(wF, { text: ["The 'Authority Panel' manages and replaces tampered voting machines, ensuring election integrity.", "The Authority Panel resembles nodes and miners in a blockchain network, verifying transactions for integrity."], heading: "3.Securing Electoral Process" }), (0, K.jsxs)("div", { className: "login-container", style: { marginTop: 30 }, children: [(0, K.jsxs)("form", { onSubmit: function (e) { e.preventDefault(); /^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[\W_]).{6,}$/.test(c) ? h("") : h("Invalid official ID. ID should contain a mix of uppercase and lowercase letters, numbers, and special characters, with a minimum length of 6 characters.") }, children: [(0, K.jsxs)("div", { className: "form-group", children: [(0, K.jsx)("h4", { className: "logins", children: "Authority Login" }), (0, K.jsx)("label", { children: "Name:" }), (0, K.jsx)("input", { type: "text", className: "form-control", placeholder: "Enter Name", value: o, onChange: function (e) { s(e.target.value) }, required: !0 })] }), (0, K.jsxs)("div", { className: "form-group", children: [(0, K.jsx)("label", { children: "Official ID:" }), (0, K.jsx)("input", { type: "text", className: "form-control", placeholder: "E.g; Ab1$cd", value: c, onChange: function (e) { u(e.target.value) }, required: !0 })] }), (0, K.jsx)("button", { onClick: n, type: "submit", className: "btn btns", children: "Login" }), f && (0, K.jsx)(RF, {})] }), I && (0, K.jsx)("div", { className: "alert alert-danger mt-3", children: I })] })] }) }; var WF = function (e) { var n = e.onClick, i = e.onLoginClick, a = (0, t.useState)(!1), o = (0, r.Z)(a, 2), s = o[0]; return o[1], (0, K.jsx)("div", { className: "modal fade show", style: { display: "block" }, tabIndex: "-1", role: "dialog", children: (0, K.jsx)("div", { className: "modal-dialog modal-dialog-centered", children: (0, K.jsxs)("div", { className: "modal-content", children: [(0, K.jsxs)("div", { className: "modal-header", children: [(0, K.jsx)("h5", { className: "modal-title", children: " Official's Notification" }), (0, K.jsx)("button", { type: "button", className: "close", onClick: i, children: (0, K.jsx)("span", { children: "\xd7" }) })] }), (0, K.jsx)("div", { className: "modal-body", children: (0, K.jsx)("p", { children: "you have one issue reported !" }) }), (0, K.jsxs)("div", { className: "modal-footer", children: [(0, K.jsx)("button", { type: "button", className: "btn reportbtn", onClick: n, children: "Login" }), s && (0, K.jsx)(xF, {})] })] }) }) }) }; function VF(e) { var n = e.onClick, i = (0, t.useState)(!1), a = (0, r.Z)(i, 2), o = a[0]; a[1]; return (0, K.jsxs)(K.Fragment, { children: [(0, K.jsx)(wF, { text: ["select from the option to report the issue so that the voting machine can be replaced"], heading: "3.Securing Electoral Process" }), (0, K.jsx)("div", { className: "container", children: (0, K.jsx)("div", { className: "mt-5 mx-auto ", children: (0, K.jsx)("div", { className: "card reportcards ", children: (0, K.jsxs)("div", { className: "card-body reportcard", children: [(0, K.jsx)("h5", { className: "card-title", children: "Report Issue" }), (0, K.jsx)(ZF, { options: [{ value: "light", label: "green light detection failed " }, { value: "sound", label: "Sound detection failed" }, { value: "serial", label: "Serial number mismatched" }] }), (0, K.jsx)("button", { className: "btn btn-primary mt-2", onClick: n, children: "Fix the issue" }), o && (0, K.jsx)(WF, {})] }) }) }) })] }) } var kF = function (e) { e.show; var t = e.onClose, n = e.message; return (0, K.jsx)("div", { className: "modal fade show", style: { display: "block" }, tabIndex: "-1", role: "dialog", children: (0, K.jsx)("div", { className: "modal-dialog modal-dialog-centered", children: (0, K.jsx)("div", { className: "modal-dialog", children: (0, K.jsxs)("div", { className: "modal-content", style: { background: "red" }, children: [(0, K.jsxs)("div", { className: "modal-header", children: [(0, K.jsx)("i", { className: "fa fa-close", style: { fontSize: "48px", color: "white", marginRight: "10px" } }), (0, K.jsx)("h2", { className: "modal-title", style: { color: "white" }, children: "ERROR!" }), (0, K.jsx)("button", { type: " button", className: "close", onClick: t, children: (0, K.jsx)("span", { "aria-hidden": "true", children: "\xd7" }) })] }), (0, K.jsx)("div", { className: "modal-body errors", children: n })] }) }) }) }) }, HF = function (e) { var n = e.onClick, i = e.onChange, a = e.time, o = e.status, s = e.userName, l = e.showTables, g = e.currentColor, c = (e.onClose, Je((function (e) { return e.BlockChainReducer }))), u = (c.userIntract, c.task, c.selectedCardIndex), C = rt(), d = (new Audio(MR), (0, t.useState)(!1)), I = (0, r.Z)(d, 2), h = I[0], A = (I[1], (0, t.useState)(null)), p = (0, r.Z)(A, 2), f = (p[0], p[1], (0, t.useState)(null)), m = (0, r.Z)(f, 2), b = (m[0], m[1], (0, t.useState)(!1)), y = (0, r.Z)(b, 2), G = y[0], B = (y[1], (0, t.useState)(!1)), Z = (0, r.Z)(B, 2), w = Z[0], S = Z[1], R = u.length > 0 ? (u[u.length - 1] + 1) % 4 : 0, x = function () { if ("green" === g) { var e = (new Date).toLocaleTimeString(); C($n([].concat((0, v.Z)(u), [R]))), C(ei(!1)), C(ti(4)), l({ userName: s, time: e, status: !0 }) } else S(!0) }, W = ["green" === g ? " green light indicates that the machine is tamper-free, and the voter can cast their vote without concern" : "A red light on a voting machine signals potential tampering, requiring prompt notification to election officials for rectification, similar to how a faulty node in a PoW network is identified and removed"]; return (0, K.jsxs)(K.Fragment, { children: [(0, K.jsx)(wF, { text: W, heading: " 3. Securing Electoral Process" }), (0, K.jsxs)(K.Fragment, { children: [(0, K.jsxs)("svg", { width: "300", height: "400", viewBox: "0 0 455 591", fill: "none", xmlns: "http://www.w3.org/2000/svg", children: [(0, K.jsxs)("g", { "clip-path": "url(#clip0_40_7)", children: [(0, K.jsxs)("g", { filter: "url(#filter0_d_40_7)", children: [(0, K.jsx)("path", { d: "M435.517 2.38306H19.582C10.4123 2.38306 2.9787 8.33011 2.9787 15.6661V575.507C2.9787 582.843 10.4123 588.79 19.582 588.79H435.517C444.687 588.79 452.12 582.843 452.12 575.507V15.6661C452.12 8.33011 444.687 2.38306 435.517 2.38306Z", fill: "#E8EDE9" }), (0, K.jsx)("path", { d: "M435.517 2.38306H19.582C10.4123 2.38306 2.9787 8.33011 2.9787 15.6661V575.507C2.9787 582.843 10.4123 588.79 19.582 588.79H435.517C444.687 588.79 452.12 582.843 452.12 575.507V15.6661C452.12 8.33011 444.687 2.38306 435.517 2.38306Z", stroke: "#B6B6B6", "stroke-width": "6.18278" })] }), (0, K.jsx)("path", { d: "M268.026 40.3025H21.5959C11.3185 40.3025 2.98706 46.9679 2.98706 55.19V572.426C2.98706 580.649 11.3185 587.314 21.5959 587.314H268.026C278.304 587.314 286.635 580.649 286.635 572.426V55.19C286.635 46.9679 278.304 40.3025 268.026 40.3025Z", stroke: "#B6B6B6", "stroke-width": "6.28681" }), (0, K.jsx)("path", { d: "M157.358 31.8231C162.296 31.8231 166.299 28.8793 166.299 25.2479C166.299 21.6165 162.296 18.6726 157.358 18.6726C152.42 18.6726 148.416 21.6165 148.416 25.2479C148.416 28.8793 152.42 31.8231 157.358 31.8231Z", fill: g }), (0, K.jsx)("path", { d: "M104.625 27.4603V20.2451H107.673C108.378 20.2451 108.956 20.3415 109.408 20.534C109.86 20.7242 110.195 20.9861 110.412 21.3196C110.629 21.6531 110.738 22.0325 110.738 22.4576C110.738 22.8827 110.629 23.2597 110.412 23.5885C110.195 23.9173 109.861 24.1757 109.412 24.3636C108.963 24.5491 108.389 24.6419 107.691 24.6419H105.225V23.8527H107.656C108.137 23.8527 108.525 23.7964 108.818 23.6836C109.114 23.5709 109.329 23.4112 109.461 23.2045C109.596 22.9955 109.663 22.7465 109.663 22.4576C109.663 22.1687 109.596 21.9162 109.461 21.7002C109.326 21.4841 109.11 21.3173 108.814 21.1999C108.517 21.0801 108.125 21.0202 107.638 21.0202H105.718V27.4603H104.625ZM108.871 24.2191L111.09 27.4603H109.822L107.638 24.2191H108.871ZM115.18 27.573C114.528 27.573 113.966 27.458 113.494 27.2278C113.024 26.9953 112.661 26.6712 112.406 26.2554C112.153 25.8374 112.027 25.3512 112.027 24.7969C112.027 24.2426 112.153 23.7541 112.406 23.3313C112.661 22.9062 113.017 22.575 113.472 22.3378C113.929 22.0982 114.463 21.9784 115.074 21.9784C115.427 21.9784 115.775 22.0254 116.118 22.1194C116.461 22.2133 116.774 22.366 117.056 22.5774C117.338 22.7864 117.563 23.0636 117.73 23.4088C117.897 23.7541 117.981 24.1792 117.981 24.6842V25.0364H112.767V24.3178H116.924C116.924 24.0124 116.848 23.74 116.695 23.5004C116.546 23.2608 116.331 23.0718 116.052 22.9332C115.776 22.7946 115.45 22.7253 115.074 22.7253C114.661 22.7253 114.303 22.8076 114 22.9719C113.7 23.134 113.47 23.3454 113.308 23.6061C113.147 23.8668 113.066 24.1463 113.066 24.4446V24.9237C113.066 25.3324 113.154 25.6789 113.331 25.963C113.509 26.2449 113.757 26.4598 114.075 26.6077C114.392 26.7534 114.761 26.8262 115.18 26.8262C115.453 26.8262 115.7 26.7956 115.92 26.7346C116.143 26.6712 116.336 26.5772 116.497 26.4528C116.658 26.3259 116.783 26.1685 116.871 25.9806L117.875 26.2061C117.77 26.4786 117.592 26.7181 117.342 26.9248C117.093 27.1291 116.785 27.2889 116.417 27.404C116.05 27.5167 115.638 27.573 115.18 27.573ZM121.552 27.5872C121.124 27.5872 120.734 27.5226 120.385 27.3934C120.036 27.2619 119.758 27.0728 119.553 26.8262C119.348 26.5772 119.245 26.2766 119.245 25.9243C119.245 25.6142 119.321 25.3629 119.474 25.1704C119.626 24.9754 119.83 24.8227 120.086 24.7123C120.341 24.602 120.623 24.5197 120.931 24.4658C121.242 24.4093 121.555 24.3647 121.869 24.3318C122.28 24.2896 122.613 24.2579 122.869 24.2367C123.127 24.2133 123.315 24.1745 123.432 24.1205C123.553 24.0665 123.613 23.9725 123.613 23.8387V23.8105C123.613 23.4628 123.494 23.1927 123.257 23.0002C123.021 22.8076 122.665 22.7112 122.186 22.7112C121.69 22.7112 121.301 22.7982 121.02 22.9719C120.737 23.1458 120.539 23.3313 120.425 23.5286L119.439 23.2468C119.614 22.918 119.85 22.662 120.143 22.4788C120.439 22.2932 120.763 22.164 121.112 22.0912C121.464 22.016 121.81 21.9784 122.151 21.9784C122.368 21.9784 122.618 21.9996 122.9 22.0419C123.184 22.0818 123.459 22.1652 123.724 22.292C123.99 22.4188 124.212 22.6102 124.388 22.8662C124.564 23.1223 124.652 23.4652 124.652 23.895V27.4603H123.613V26.7275H123.56C123.49 26.845 123.372 26.9706 123.208 27.1045C123.044 27.2384 122.825 27.3523 122.552 27.4463C122.279 27.5402 121.945 27.5872 121.552 27.5872ZM121.711 26.8402C122.122 26.8402 122.468 26.7757 122.75 26.6465C123.035 26.5173 123.249 26.3506 123.393 26.1462C123.54 25.9419 123.613 25.727 123.613 25.5015V24.7405C123.569 24.7828 123.472 24.8216 123.322 24.8568C123.175 24.8896 123.006 24.919 122.811 24.9449C122.621 24.9684 122.434 24.9895 122.252 25.0083C122.073 25.0247 121.928 25.0388 121.816 25.0506C121.546 25.0787 121.294 25.1246 121.059 25.1879C120.827 25.249 120.639 25.3418 120.495 25.4663C120.355 25.5884 120.284 25.7552 120.284 25.9666C120.284 26.2554 120.418 26.4739 120.684 26.6218C120.955 26.7674 121.297 26.8402 121.711 26.8402ZM129.103 27.573C128.539 27.573 128.042 27.4591 127.611 27.2313C127.179 27.0012 126.842 26.677 126.598 26.259C126.354 25.8385 126.232 25.3418 126.232 24.7687C126.232 24.2003 126.354 23.7071 126.598 23.2891C126.842 22.871 127.18 22.548 127.615 22.3202C128.049 22.0923 128.551 21.9784 129.121 21.9784C129.561 21.9784 129.909 22.0372 130.164 22.1546C130.423 22.2697 130.62 22.4013 130.755 22.5492C130.893 22.6948 131 22.8146 131.076 22.9085H131.164V20.2451H132.203V27.4603H131.199V26.6289H131.076C131 26.7275 130.891 26.852 130.75 27.0024C130.61 27.1503 130.409 27.283 130.147 27.4004C129.886 27.5155 129.538 27.573 129.103 27.573ZM129.245 26.8262C129.661 26.8262 130.013 26.7393 130.301 26.5655C130.589 26.3893 130.808 26.1462 130.957 25.8362C131.107 25.5238 131.181 25.1633 131.181 24.7546C131.181 24.3507 131.109 23.9972 130.962 23.6942C130.815 23.3889 130.598 23.1516 130.31 22.9825C130.022 22.8111 129.667 22.7253 129.245 22.7253C128.804 22.7253 128.437 22.8158 128.143 22.9966C127.853 23.1752 127.634 23.4182 127.487 23.7259C127.343 24.0312 127.271 24.3741 127.271 24.7546C127.271 25.1398 127.345 25.4898 127.492 25.8045C127.641 26.1169 127.862 26.3658 128.152 26.5514C128.446 26.7346 128.81 26.8262 129.245 26.8262ZM134.921 29.4896C134.744 29.4896 134.588 29.4779 134.449 29.4543C134.311 29.4333 134.216 29.4121 134.163 29.391L134.428 28.6582C134.68 28.7098 134.903 28.7286 135.097 28.7145C135.291 28.7004 135.462 28.6312 135.612 28.5067C135.764 28.3845 135.904 28.1861 136.03 27.9113L136.224 27.4885L133.723 22.0489H134.85L136.717 26.3611H136.787L138.655 22.0489H139.783L136.911 28.2495C136.782 28.529 136.622 28.7603 136.431 28.9435C136.24 29.1291 136.018 29.2664 135.766 29.3558C135.516 29.445 135.235 29.4896 134.921 29.4896Z", fill: "black" }), (0, K.jsx)("path", { d: "M298.013 42.6178V34.2001H301.692C302.425 34.2001 303.029 34.3014 303.506 34.5042C303.982 34.7043 304.336 34.9742 304.569 35.3139C304.802 35.651 304.918 36.025 304.918 36.4361C304.918 36.7978 304.838 37.0964 304.677 37.332C304.519 37.5677 304.31 37.754 304.05 37.8911C303.793 38.0281 303.514 38.1295 303.212 38.1952V38.2774C303.535 38.2938 303.858 38.3843 304.183 38.5487C304.509 38.7131 304.781 38.9488 305 39.2557C305.22 39.5625 305.33 39.9379 305.33 40.3818C305.33 40.8038 305.21 41.1834 304.97 41.5204C304.73 41.8574 304.352 42.1246 303.834 42.3219C303.317 42.5191 302.644 42.6178 301.815 42.6178H298.013ZM299.287 41.7135H301.815C302.647 41.7135 303.238 41.5848 303.588 41.3272C303.941 41.0669 304.117 40.7518 304.117 40.3818C304.117 40.0969 304.026 39.8338 303.845 39.5927C303.663 39.3488 303.405 39.1543 303.069 39.0091C302.733 38.8611 302.336 38.7871 301.877 38.7871H299.287V41.7135ZM299.287 37.8993H301.651C302.034 37.8993 302.381 37.839 302.689 37.7185C303 37.5979 303.247 37.428 303.428 37.2088C303.613 36.9895 303.706 36.732 303.706 36.4361C303.706 36.0661 303.545 35.7524 303.223 35.4948C302.901 35.2345 302.39 35.1044 301.692 35.1044H299.287V37.8993ZM309.581 42.7658C309.081 42.7658 308.627 42.6904 308.219 42.5397C307.812 42.3863 307.488 42.1657 307.249 41.878C307.009 41.5875 306.889 41.2368 306.889 40.8257C306.889 40.464 306.978 40.1709 307.156 39.9461C307.334 39.7187 307.572 39.5406 307.87 39.4119C308.168 39.2831 308.497 39.1871 308.856 39.1241C309.219 39.0583 309.584 39.0063 309.95 38.968C310.43 38.9186 310.819 38.8816 311.117 38.857C311.418 38.8296 311.638 38.7843 311.775 38.7213C311.915 38.6583 311.985 38.5487 311.985 38.3925V38.3596C311.985 37.9541 311.846 37.639 311.569 37.4143C311.295 37.1896 310.879 37.0772 310.32 37.0772C309.742 37.0772 309.288 37.1786 308.959 37.3814C308.63 37.5842 308.399 37.8006 308.266 38.0308L307.115 37.702C307.32 37.3183 307.594 37.0197 307.937 36.806C308.283 36.5895 308.659 36.4388 309.067 36.3539C309.478 36.2662 309.882 36.2223 310.279 36.2223C310.533 36.2223 310.824 36.247 311.153 36.2963C311.485 36.3429 311.805 36.4402 312.114 36.5881C312.425 36.7361 312.684 36.9594 312.89 37.2581C313.095 37.5568 313.198 37.9568 313.198 38.4583V42.6178H311.985V41.7629H311.924C311.841 41.8999 311.704 42.0465 311.513 42.2027C311.321 42.3589 311.066 42.4918 310.747 42.6014C310.428 42.711 310.04 42.7658 309.581 42.7658ZM309.766 41.8944C310.245 41.8944 310.65 41.8191 310.978 41.6683C311.31 41.5177 311.56 41.3231 311.728 41.0847C311.899 40.8463 311.985 40.5956 311.985 40.3326V39.4447C311.933 39.494 311.821 39.5392 311.646 39.5803C311.475 39.6187 311.276 39.653 311.05 39.6831C310.828 39.7105 310.61 39.7352 310.398 39.7571C310.189 39.7763 310.019 39.7927 309.889 39.8064C309.573 39.8393 309.279 39.8928 309.005 39.9667C308.735 40.038 308.515 40.1462 308.348 40.2915C308.183 40.4339 308.101 40.6285 308.101 40.8751C308.101 41.2121 308.257 41.467 308.569 41.6396C308.884 41.8095 309.283 41.8944 309.766 41.8944ZM316.623 34.2001V42.6178H315.41V34.2001H316.623ZM320.056 34.2001V42.6178H318.844V34.2001H320.056ZM325.483 42.7493C324.77 42.7493 324.145 42.6137 323.608 42.3424C323.073 42.0712 322.655 41.6916 322.354 41.2039C322.056 40.7162 321.907 40.1462 321.907 39.494C321.907 38.8364 322.056 38.2623 322.354 37.7718C322.655 37.2814 323.073 36.9005 323.608 36.6292C324.145 36.358 324.77 36.2223 325.483 36.2223C326.196 36.2223 326.819 36.358 327.353 36.6292C327.89 36.9005 328.308 37.2814 328.607 37.7718C328.908 38.2623 329.059 38.8364 329.059 39.494C329.059 40.1462 328.908 40.7162 328.607 41.2039C328.308 41.6916 327.89 42.0712 327.353 42.3424C326.819 42.6137 326.196 42.7493 325.483 42.7493ZM325.483 41.878C326.024 41.878 326.47 41.767 326.819 41.5451C327.168 41.3231 327.426 41.0313 327.594 40.6696C327.762 40.3079 327.846 39.916 327.846 39.494C327.846 39.072 327.762 38.6788 327.594 38.3144C327.426 37.95 327.168 37.6554 326.819 37.4307C326.47 37.206 326.024 37.0937 325.483 37.0937C324.941 37.0937 324.496 37.206 324.147 37.4307C323.798 37.6554 323.539 37.95 323.371 38.3144C323.203 38.6788 323.119 39.072 323.119 39.494C323.119 39.916 323.203 40.3079 323.371 40.6696C323.539 41.0313 323.798 41.3231 324.147 41.5451C324.496 41.767 324.941 41.878 325.483 41.878ZM334.342 36.3045V37.1266H330.252V36.3045H334.342ZM331.444 34.7919H332.656V40.8093C332.656 41.0833 332.706 41.2888 332.805 41.4259C332.908 41.5601 333.038 41.6505 333.196 41.6971C333.356 41.741 333.526 41.7629 333.704 41.7629C333.838 41.7629 333.948 41.7574 334.033 41.7464C334.119 41.7327 334.187 41.7218 334.239 41.7135L334.485 42.5849C334.403 42.6096 334.288 42.6342 334.141 42.6589C333.994 42.6863 333.807 42.7 333.581 42.7C333.239 42.7 332.903 42.6411 332.574 42.5233C332.248 42.4055 331.978 42.226 331.762 41.9849C331.55 41.7437 331.444 41.4396 331.444 41.0724V34.7919ZM347.303 34.2001H348.578V39.7736C348.578 40.3489 348.408 40.8627 348.069 41.3149C347.733 41.7642 347.259 42.1191 346.646 42.3794C346.033 42.637 345.314 42.7658 344.488 42.7658C343.663 42.7658 342.943 42.637 342.331 42.3794C341.717 42.1191 341.241 41.7642 340.902 41.3149C340.566 40.8627 340.399 40.3489 340.399 39.7736V34.2001H341.673V39.6913C341.673 40.1024 341.785 40.4682 342.012 40.7887C342.238 41.1066 342.56 41.3573 342.978 41.541C343.399 41.7218 343.903 41.8122 344.488 41.8122C345.074 41.8122 345.577 41.7218 345.999 41.541C346.42 41.3573 346.742 41.1066 346.965 40.7887C347.19 40.4682 347.303 40.1024 347.303 39.6913V34.2001ZM352.17 38.82V42.6178H350.958V36.3045H352.129V37.291H352.232C352.416 36.9704 352.697 36.7128 353.074 36.5182C353.451 36.321 353.937 36.2223 354.534 36.2223C355.068 36.2223 355.535 36.31 355.936 36.4853C356.336 36.658 356.648 36.921 356.871 37.2746C357.094 37.6253 357.205 38.0692 357.205 38.6063V42.6178H355.992V38.672C355.992 38.1761 355.832 37.7897 355.509 37.5129C355.187 37.2334 354.746 37.0937 354.184 37.0937C353.797 37.0937 353.451 37.1608 353.146 37.2951C352.845 37.4293 352.607 37.6253 352.432 37.8828C352.257 38.1404 352.17 38.4528 352.17 38.82ZM359.42 42.6178V36.3045H360.633V42.6178H359.42ZM360.037 35.2523C359.801 35.2523 359.597 35.1879 359.425 35.0591C359.258 34.9303 359.174 34.7755 359.174 34.5947C359.174 34.4138 359.258 34.259 359.425 34.1302C359.597 34.0014 359.801 33.937 360.037 33.937C360.274 33.937 360.475 34.0014 360.643 34.1302C360.814 34.259 360.9 34.4138 360.9 34.5947C360.9 34.7755 360.814 34.9303 360.643 35.0591C360.475 35.1879 360.274 35.2523 360.037 35.2523ZM366.285 36.3045V37.1266H362.196V36.3045H366.285ZM363.388 34.7919H364.6V40.8093C364.6 41.0833 364.65 41.2888 364.749 41.4259C364.852 41.5601 364.982 41.6505 365.14 41.6971C365.301 41.741 365.471 41.7629 365.649 41.7629C365.782 41.7629 365.891 41.7574 365.977 41.7464C366.063 41.7327 366.131 41.7218 366.183 41.7135L366.429 42.5849C366.347 42.6096 366.233 42.6342 366.085 42.6589C365.938 42.6863 365.751 42.7 365.525 42.7C365.183 42.7 364.847 42.6411 364.518 42.5233C364.193 42.4055 363.923 42.226 363.707 41.9849C363.494 41.7437 363.388 41.4396 363.388 41.0724V34.7919Z", fill: "black" }), (0, K.jsx)("path", { d: "M432.439 2.9436H344.778V15.3205H432.439V2.9436Z", fill: "#2C6A90" }), (0, K.jsx)("path", { d: "M449.295 125.865H289.702V161.485H449.295V125.865Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { onClick: function () { return x() }, d: "M398.602 131.782H365.291C356.456 131.782 349.294 137.049 349.294 143.546C349.294 150.042 356.456 155.309 365.291 155.309H398.602C407.437 155.309 414.598 150.042 414.598 143.546C414.598 137.049 407.437 131.782 398.602 131.782Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 151.926C319.458 151.926 324.09 148.52 324.09 144.32C324.09 140.118 319.458 136.713 313.746 136.713C308.033 136.713 303.402 140.118 303.402 144.32C303.402 148.52 308.033 151.926 313.746 151.926Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M388.952 32.7178H387.932C384.727 32.7178 382.13 34.7957 382.13 37.3591V42.774C382.13 45.3374 384.727 47.4154 387.932 47.4154H388.952C392.156 47.4154 394.754 45.3374 394.754 42.774V37.3591C394.754 34.7957 392.156 32.7178 388.952 32.7178Z", fill: "black", "fill-opacity": "0.953975" }), (0, K.jsx)("path", { d: "M449.295 54.625H289.702V90.2448H449.295V54.625Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { onClick: function () { return x() }, d: "M398.602 60.543H365.291C356.456 60.543 349.294 65.8095 349.294 72.3064C349.294 78.8026 356.456 84.0692 365.291 84.0692H398.602C407.437 84.0692 414.598 78.8026 414.598 72.3064C414.598 65.8095 407.437 60.543 398.602 60.543Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 80.6864C319.458 80.6864 324.09 77.2804 324.09 73.0796C324.09 68.8783 319.458 65.4729 313.746 65.4729C308.033 65.4729 303.402 68.8783 303.402 73.0796C303.402 77.2804 308.033 80.6864 313.746 80.6864Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 90.2449H289.702V125.865H449.295V90.2449Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { onClick: function () { return x() }, d: "M398.602 96.1626H365.291C356.456 96.1626 349.294 101.429 349.294 107.926C349.294 114.423 356.456 119.689 365.291 119.689H398.602C407.437 119.689 414.598 114.423 414.598 107.926C414.598 101.429 407.437 96.1626 398.602 96.1626Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 116.306C319.458 116.306 324.09 112.901 324.09 108.699C324.09 104.499 319.458 101.093 313.746 101.093C308.033 101.093 303.402 104.499 303.402 108.699C303.402 112.901 308.033 116.306 313.746 116.306Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 161.485H289.702V197.105H449.295V161.485Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 167.403H365.291C356.456 167.403 349.294 172.669 349.294 179.166C349.294 185.662 356.456 190.929 365.291 190.929H398.602C407.437 190.929 414.598 185.662 414.598 179.166C414.598 172.669 407.437 167.403 398.602 167.403Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 187.546C319.458 187.546 324.09 184.141 324.09 179.939C324.09 175.739 319.458 172.333 313.746 172.333C308.033 172.333 303.402 175.739 303.402 179.939C303.402 184.141 308.033 187.546 313.746 187.546Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 197.104H289.702V232.725H449.295V197.104Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 203.022H365.291C356.456 203.022 349.294 208.289 349.294 214.786C349.294 221.282 356.456 226.549 365.291 226.549H398.602C407.437 226.549 414.598 221.282 414.598 214.786C414.598 208.289 407.437 203.022 398.602 203.022Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 223.166C319.458 223.166 324.09 219.76 324.09 215.559C324.09 211.358 319.458 207.953 313.746 207.953C308.033 207.953 303.402 211.358 303.402 215.559C303.402 219.76 308.033 223.166 313.746 223.166Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 232.725H289.702V268.344H449.295V232.725Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 238.643H365.291C356.456 238.643 349.294 243.909 349.294 250.405C349.294 256.902 356.456 262.169 365.291 262.169H398.602C407.437 262.169 414.598 256.902 414.598 250.405C414.598 243.909 407.437 238.643 398.602 238.643Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 258.786C319.458 258.786 324.09 255.38 324.09 251.179C324.09 246.978 319.458 243.573 313.746 243.573C308.033 243.573 303.402 246.978 303.402 251.179C303.402 255.38 308.033 258.786 313.746 258.786Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 268.344H289.702V303.964H449.295V268.344Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 274.262H365.291C356.456 274.262 349.294 279.529 349.294 286.026C349.294 292.522 356.456 297.788 365.291 297.788H398.602C407.437 297.788 414.598 292.522 414.598 286.026C414.598 279.529 407.437 274.262 398.602 274.262Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 294.406C319.458 294.406 324.09 291 324.09 286.799C324.09 282.598 319.458 279.192 313.746 279.192C308.033 279.192 303.402 282.598 303.402 286.799C303.402 291 308.033 294.406 313.746 294.406Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 303.964H289.702V339.584H449.295V303.964Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 309.882H365.291C356.456 309.882 349.294 315.149 349.294 321.645C349.294 328.142 356.456 333.409 365.291 333.409H398.602C407.437 333.409 414.598 328.142 414.598 321.645C414.598 315.149 407.437 309.882 398.602 309.882Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 330.026C319.458 330.026 324.09 326.62 324.09 322.419C324.09 318.218 319.458 314.812 313.746 314.812C308.033 314.812 303.402 318.218 303.402 322.419C303.402 326.62 308.033 330.026 313.746 330.026Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 339.584H289.702V375.204H449.295V339.584Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 345.502H365.291C356.456 345.502 349.294 350.769 349.294 357.265C349.294 363.762 356.456 369.028 365.291 369.028H398.602C407.437 369.028 414.598 363.762 414.598 357.265C414.598 350.769 407.437 345.502 398.602 345.502Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 365.646C319.458 365.646 324.09 362.24 324.09 358.039C324.09 353.838 319.458 350.432 313.746 350.432C308.033 350.432 303.402 353.838 303.402 358.039C303.402 362.24 308.033 365.646 313.746 365.646Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 375.204H289.702V410.824H449.295V375.204Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 381.122H365.291C356.456 381.122 349.294 386.388 349.294 392.885C349.294 399.382 356.456 404.648 365.291 404.648H398.602C407.437 404.648 414.598 399.382 414.598 392.885C414.598 386.388 407.437 381.122 398.602 381.122Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 401.265C319.458 401.265 324.09 397.86 324.09 393.658C324.09 389.458 319.458 386.052 313.746 386.052C308.033 386.052 303.402 389.458 303.402 393.658C303.402 397.86 308.033 401.265 313.746 401.265Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 410.824H289.702V446.444H449.295V410.824Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 416.742H365.291C356.456 416.742 349.294 422.009 349.294 428.505C349.294 435.002 356.456 440.268 365.291 440.268H398.602C407.437 440.268 414.598 435.002 414.598 428.505C414.598 422.009 407.437 416.742 398.602 416.742Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 436.885C319.458 436.885 324.09 433.479 324.09 429.279C324.09 425.077 319.458 421.672 313.746 421.672C308.033 421.672 303.402 425.077 303.402 429.279C303.402 433.479 308.033 436.885 313.746 436.885Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M268.133 40.22H28.4278C18.1474 40.22 9.81342 46.8874 9.81342 55.112V572.505C9.81342 580.729 18.1474 587.396 28.4278 587.396H268.133C278.413 587.396 286.747 580.729 286.747 572.505V55.112C286.747 46.8874 278.413 40.22 268.133 40.22Z", fill: "#D6DFD9", stroke: "#B6B6B6", "stroke-width": "6.2129" }), (0, K.jsx)("path", { d: "M33.782 57.8231C33.782 49.0011 26.8884 41.8496 18.3846 41.8496C9.88077 41.8496 2.98706 49.0011 2.98706 57.8231V571.34C2.98706 580.162 9.88077 587.314 18.3846 587.314C26.8884 587.314 33.782 580.162 33.782 571.34V57.8231Z", fill: "#C6C9C6" }), (0, K.jsx)("path", { d: "M449.295 446.444H289.702V482.063H449.295V446.444Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 452.362H365.291C356.456 452.362 349.294 457.628 349.294 464.125C349.294 470.622 356.456 475.888 365.291 475.888H398.602C407.437 475.888 414.598 470.622 414.598 464.125C414.598 457.628 407.437 452.362 398.602 452.362Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 472.505C319.458 472.505 324.09 469.1 324.09 464.898C324.09 460.698 319.458 457.292 313.746 457.292C308.033 457.292 303.402 460.698 303.402 464.898C303.402 469.1 308.033 472.505 313.746 472.505Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M449.295 482.063H289.702V517.684H449.295V482.063Z", fill: "#F4F4F4", "fill-opacity": "0.953975", stroke: "#C6BEBC", "stroke-width": "2.01815" }), (0, K.jsx)("path", { d: "M398.602 487.982H365.291C356.456 487.982 349.294 493.249 349.294 499.745C349.294 506.242 356.456 511.508 365.291 511.508H398.602C407.437 511.508 414.598 506.242 414.598 499.745C414.598 493.249 407.437 487.982 398.602 487.982Z", fill: "#2C6A90", stroke: "#264D74", "stroke-width": "1.97324" }), (0, K.jsx)("path", { d: "M313.746 508.125C319.458 508.125 324.09 504.719 324.09 500.519C324.09 496.317 319.458 492.912 313.746 492.912C308.033 492.912 303.402 496.317 303.402 500.519C303.402 504.719 308.033 508.125 313.746 508.125Z", fill: "#642043", stroke: "#2F1117", "stroke-width": "2.08154" }), (0, K.jsx)("path", { d: "M147.497 90.5435H283.547", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.189 196.003H282.239", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M147.497 125.013H283.547", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.965 159.907H283.015", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.721 231.323H282.772", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.987 266.431H283.038", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M147.252 302.39H283.303", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.124 337.295H282.175", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.5 373.103H282.551", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M145.748 408.911H281.798", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M145.748 444.418H281.798", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.124 480.226H282.175", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M146.124 515.733H282.175", stroke: "white", "stroke-width": "4.16308" }), (0, K.jsx)("path", { d: "M84.8267 80H82.4972L87.7315 65.4545H90.267L95.5014 80H93.1719L89.0597 68.0966H88.946L84.8267 80ZM85.2173 74.304H92.7741V76.1506H85.2173V74.304ZM97.4315 80V69.0909H99.4698V70.8665H99.6048C99.832 70.2652 100.204 69.7964 100.72 69.4602C101.236 69.1193 101.854 68.9489 102.574 68.9489C103.303 68.9489 103.913 69.1193 104.406 69.4602C104.903 69.8011 105.27 70.2699 105.507 70.8665H105.62C105.881 70.2841 106.295 69.8201 106.863 69.4744C107.431 69.1241 108.109 68.9489 108.895 68.9489C109.884 68.9489 110.691 69.259 111.316 69.8793C111.946 70.4995 112.261 71.4347 112.261 72.6847V80H110.137V72.8835C110.137 72.1449 109.936 71.6098 109.534 71.2784C109.131 70.947 108.651 70.7812 108.092 70.7812C107.401 70.7812 106.863 70.9943 106.48 71.4205C106.096 71.8419 105.904 72.384 105.904 73.0469V80H103.788V72.7486C103.788 72.1567 103.603 71.6809 103.234 71.321C102.865 70.9612 102.384 70.7812 101.792 70.7812C101.39 70.7812 101.018 70.8878 100.677 71.1009C100.341 71.3092 100.069 71.6004 99.8604 71.9744C99.6568 72.3485 99.555 72.7817 99.555 73.2741V80H97.4315ZM115.107 80V69.0909H117.231V80H115.107ZM116.18 67.4077C115.81 67.4077 115.493 67.2846 115.228 67.0384C114.968 66.7874 114.837 66.4891 114.837 66.1435C114.837 65.7931 114.968 65.4948 115.228 65.2486C115.493 64.9976 115.81 64.8722 116.18 64.8722C116.549 64.8722 116.864 64.9976 117.124 65.2486C117.389 65.4948 117.522 65.7931 117.522 66.1435C117.522 66.4891 117.389 66.7874 117.124 67.0384C116.864 67.2846 116.549 67.4077 116.18 67.4077ZM125.18 69.0909V70.7955H119.221V69.0909H125.18ZM120.819 66.4773H122.943V76.7969C122.943 77.2088 123.004 77.5189 123.127 77.7273C123.251 77.9309 123.409 78.0705 123.603 78.1463C123.802 78.2173 124.018 78.2528 124.25 78.2528C124.42 78.2528 124.569 78.241 124.697 78.2173C124.825 78.1937 124.924 78.1747 124.995 78.1605L125.379 79.9148C125.256 79.9621 125.081 80.0095 124.853 80.0568C124.626 80.1089 124.342 80.1373 124.001 80.142C123.442 80.1515 122.922 80.0521 122.439 79.8438C121.956 79.6354 121.565 79.3134 121.267 78.8778C120.968 78.4422 120.819 77.8954 120.819 77.2372V66.4773ZM132.275 67.3438V65.4545H143.532V67.3438H138.994V80H136.806V67.3438H132.275ZM144.717 80V69.0909H146.769V70.8239H146.883C147.082 70.2367 147.432 69.7751 147.934 69.4389C148.441 69.098 149.013 68.9276 149.653 68.9276C149.785 68.9276 149.942 68.9323 150.121 68.9418C150.306 68.9512 150.451 68.9631 150.555 68.9773V71.0085C150.469 70.9848 150.318 70.9588 150.1 70.9304C149.882 70.8973 149.665 70.8807 149.447 70.8807C148.945 70.8807 148.497 70.9872 148.104 71.2003C147.716 71.4086 147.408 71.6998 147.181 72.0739C146.954 72.4432 146.84 72.8646 146.84 73.3381V80H144.717ZM152.392 80V69.0909H154.516V80H152.392ZM153.465 67.4077C153.096 67.4077 152.778 67.2846 152.513 67.0384C152.253 66.7874 152.123 66.4891 152.123 66.1435C152.123 65.7931 152.253 65.4948 152.513 65.2486C152.778 64.9976 153.096 64.8722 153.465 64.8722C153.834 64.8722 154.149 64.9976 154.409 65.2486C154.675 65.4948 154.807 65.7931 154.807 66.1435C154.807 66.4891 154.675 66.7874 154.409 67.0384C154.149 67.2846 153.834 67.4077 153.465 67.4077ZM166.705 69.0909L162.749 80H160.477L156.513 69.0909H158.793L161.556 77.4858H161.67L164.425 69.0909H166.705ZM173.032 80.2202C171.957 80.2202 171.031 79.9905 170.255 79.5312C169.483 79.0672 168.886 78.4162 168.465 77.5781C168.048 76.7353 167.84 75.7481 167.84 74.6165C167.84 73.4991 168.048 72.5142 168.465 71.6619C168.886 70.8097 169.473 70.1444 170.226 69.6662C170.984 69.188 171.869 68.9489 172.882 68.9489C173.498 68.9489 174.095 69.0507 174.672 69.2543C175.25 69.4579 175.768 69.7775 176.228 70.2131C176.687 70.6487 177.049 71.2145 177.314 71.9105C177.579 72.6018 177.712 73.4422 177.712 74.4318V75.1847H169.04V73.5938H175.631C175.631 73.035 175.517 72.5402 175.29 72.1094C175.063 71.6738 174.743 71.3305 174.331 71.0795C173.924 70.8286 173.446 70.7031 172.897 70.7031C172.3 70.7031 171.779 70.8499 171.334 71.1435C170.894 71.4323 170.553 71.8111 170.311 72.2798C170.075 72.7438 169.956 73.2481 169.956 73.7926V75.0355C169.956 75.7647 170.084 76.3849 170.34 76.8963C170.6 77.4077 170.962 77.7983 171.426 78.0682C171.891 78.3333 172.433 78.4659 173.053 78.4659C173.455 78.4659 173.822 78.4091 174.154 78.2955C174.485 78.1771 174.772 78.0019 175.013 77.7699C175.255 77.5379 175.439 77.2514 175.567 76.9105L177.577 77.2727C177.416 77.8646 177.127 78.383 176.711 78.8281C176.299 79.2685 175.78 79.6117 175.155 79.858C174.535 80.0994 173.827 80.2202 173.032 80.2202ZM184.152 80.2131C183.271 80.2131 182.485 79.9882 181.794 79.5384C181.107 79.0838 180.568 78.4375 180.175 77.5994C179.786 76.7566 179.592 75.7457 179.592 74.5668C179.592 73.3878 179.789 72.3793 180.182 71.5412C180.58 70.7031 181.124 70.0616 181.815 69.6165C182.507 69.1714 183.29 68.9489 184.166 68.9489C184.843 68.9489 185.388 69.0625 185.8 69.2898C186.216 69.5123 186.538 69.7727 186.766 70.071C186.998 70.3693 187.178 70.6321 187.305 70.8594H187.433V65.4545H189.557V80H187.483V78.3026H187.305C187.178 78.5346 186.993 78.7997 186.751 79.098C186.515 79.3963 186.188 79.6567 185.771 79.8793C185.355 80.1018 184.815 80.2131 184.152 80.2131ZM184.621 78.402C185.232 78.402 185.748 78.241 186.169 77.919C186.595 77.5923 186.917 77.1402 187.135 76.5625C187.357 75.9848 187.469 75.3125 187.469 74.5455C187.469 73.7879 187.36 73.125 187.142 72.5568C186.924 71.9886 186.605 71.5459 186.183 71.2287C185.762 70.9115 185.241 70.7528 184.621 70.7528C183.982 70.7528 183.449 70.9186 183.023 71.25C182.597 71.5814 182.275 72.0336 182.057 72.6065C181.844 73.1795 181.737 73.8258 181.737 74.5455C181.737 75.2746 181.846 75.9304 182.064 76.5128C182.282 77.0952 182.604 77.5568 183.03 77.8977C183.461 78.2339 183.991 78.402 184.621 78.402ZM192.588 80V69.0909H194.711V80H192.588ZM193.66 67.4077C193.291 67.4077 192.974 67.2846 192.708 67.0384C192.448 66.7874 192.318 66.4891 192.318 66.1435C192.318 65.7931 192.448 65.4948 192.708 65.2486C192.974 64.9976 193.291 64.8722 193.66 64.8722C194.029 64.8722 194.344 64.9976 194.605 65.2486C194.87 65.4948 195.002 65.7931 195.002 66.1435C195.002 66.4891 194.87 66.7874 194.605 67.0384C194.344 67.2846 194.029 67.4077 193.66 67.4077Z", fill: "black" }), (0, K.jsx)("path", { d: "M84.8693 97.4545L88.9176 109.301H89.081L93.1293 97.4545H95.5014L90.267 112H87.7315L82.4972 97.4545H84.8693ZM97.4315 112V101.091H99.555V112H97.4315ZM98.5039 99.4077C98.1346 99.4077 97.8174 99.2846 97.5522 99.0384C97.2918 98.7874 97.1616 98.4891 97.1616 98.1435C97.1616 97.7931 97.2918 97.4948 97.5522 97.2486C97.8174 96.9976 98.1346 96.8722 98.5039 96.8722C98.8732 96.8722 99.1881 96.9976 99.4485 97.2486C99.7137 97.4948 99.8462 97.7931 99.8462 98.1435C99.8462 98.4891 99.7137 98.7874 99.4485 99.0384C99.1881 99.2846 98.8732 99.4077 98.5039 99.4077ZM104.365 108.3L104.351 105.707H104.72L109.067 101.091H111.609L106.652 106.347H106.318L104.365 108.3ZM102.412 112V97.4545H104.536V112H102.412ZM109.301 112L105.395 106.815L106.858 105.331L111.908 112H109.301ZM113.545 112V101.091H115.597V102.824H115.711C115.91 102.237 116.26 101.775 116.762 101.439C117.269 101.098 117.842 100.928 118.481 100.928C118.613 100.928 118.77 100.932 118.95 100.942C119.134 100.951 119.279 100.963 119.383 100.977V103.009C119.298 102.985 119.146 102.959 118.928 102.93C118.71 102.897 118.493 102.881 118.275 102.881C117.773 102.881 117.326 102.987 116.933 103.2C116.544 103.409 116.237 103.7 116.009 104.074C115.782 104.443 115.668 104.865 115.668 105.338V112H113.545ZM124.298 112.241C123.606 112.241 122.981 112.114 122.423 111.858C121.864 111.598 121.421 111.221 121.094 110.729C120.772 110.236 120.612 109.633 120.612 108.918C120.612 108.302 120.73 107.795 120.967 107.398C121.203 107 121.523 106.685 121.925 106.453C122.328 106.221 122.778 106.046 123.275 105.928C123.772 105.809 124.279 105.719 124.795 105.658C125.448 105.582 125.978 105.52 126.386 105.473C126.793 105.421 127.089 105.338 127.273 105.224C127.458 105.111 127.55 104.926 127.55 104.67V104.621C127.55 104 127.375 103.52 127.025 103.179C126.679 102.838 126.163 102.668 125.477 102.668C124.762 102.668 124.198 102.826 123.786 103.143C123.379 103.456 123.097 103.804 122.941 104.188L120.945 103.733C121.182 103.07 121.528 102.535 121.982 102.128C122.442 101.716 122.969 101.418 123.566 101.233C124.163 101.044 124.79 100.949 125.448 100.949C125.884 100.949 126.345 101.001 126.833 101.105C127.326 101.205 127.785 101.389 128.211 101.659C128.642 101.929 128.995 102.315 129.269 102.817C129.544 103.314 129.681 103.96 129.681 104.756V112H127.607V110.509H127.522C127.385 110.783 127.179 111.053 126.904 111.318C126.629 111.583 126.277 111.804 125.846 111.979C125.415 112.154 124.899 112.241 124.298 112.241ZM124.759 110.537C125.346 110.537 125.848 110.421 126.265 110.189C126.686 109.957 127.006 109.654 127.224 109.28C127.446 108.901 127.558 108.496 127.558 108.065V106.659C127.482 106.735 127.335 106.806 127.117 106.872C126.904 106.934 126.66 106.988 126.386 107.036C126.111 107.078 125.844 107.118 125.583 107.156C125.323 107.189 125.105 107.218 124.93 107.241C124.518 107.294 124.141 107.381 123.8 107.504C123.464 107.627 123.194 107.805 122.991 108.037C122.792 108.264 122.692 108.567 122.692 108.946C122.692 109.472 122.887 109.869 123.275 110.139C123.663 110.404 124.158 110.537 124.759 110.537ZM132.51 112V101.091H134.548V102.866H134.683C134.91 102.265 135.282 101.796 135.798 101.46C136.314 101.119 136.932 100.949 137.652 100.949C138.381 100.949 138.992 101.119 139.484 101.46C139.981 101.801 140.348 102.27 140.585 102.866H140.699C140.959 102.284 141.373 101.82 141.941 101.474C142.51 101.124 143.187 100.949 143.973 100.949C144.962 100.949 145.77 101.259 146.395 101.879C147.024 102.5 147.339 103.435 147.339 104.685V112H145.216V104.884C145.216 104.145 145.014 103.61 144.612 103.278C144.209 102.947 143.729 102.781 143.17 102.781C142.479 102.781 141.941 102.994 141.558 103.42C141.174 103.842 140.983 104.384 140.983 105.047V112H138.866V104.749C138.866 104.157 138.681 103.681 138.312 103.321C137.943 102.961 137.462 102.781 136.87 102.781C136.468 102.781 136.096 102.888 135.755 103.101C135.419 103.309 135.147 103.6 134.939 103.974C134.735 104.348 134.633 104.782 134.633 105.274V112H132.51ZM155.649 112V97.4545H160.833C161.965 97.4545 162.903 97.6605 163.646 98.0724C164.389 98.4844 164.946 99.0478 165.315 99.7628C165.684 100.473 165.869 101.273 165.869 102.163C165.869 103.058 165.682 103.863 165.308 104.578C164.939 105.288 164.38 105.852 163.632 106.268C162.888 106.68 161.953 106.886 160.826 106.886H157.261V105.026H160.627C161.342 105.026 161.922 104.902 162.368 104.656C162.813 104.405 163.139 104.064 163.348 103.634C163.556 103.203 163.66 102.713 163.66 102.163C163.66 101.614 163.556 101.126 163.348 100.7C163.139 100.274 162.81 99.9403 162.36 99.6989C161.915 99.4574 161.328 99.3366 160.599 99.3366H157.843V112H155.649ZM171.348 112.241C170.657 112.241 170.032 112.114 169.473 111.858C168.915 111.598 168.472 111.221 168.145 110.729C167.823 110.236 167.662 109.633 167.662 108.918C167.662 108.302 167.781 107.795 168.017 107.398C168.254 107 168.574 106.685 168.976 106.453C169.379 106.221 169.828 106.046 170.326 105.928C170.823 105.809 171.329 105.719 171.846 105.658C172.499 105.582 173.029 105.52 173.436 105.473C173.844 105.421 174.14 105.338 174.324 105.224C174.509 105.111 174.601 104.926 174.601 104.67V104.621C174.601 104 174.426 103.52 174.076 103.179C173.73 102.838 173.214 102.668 172.527 102.668C171.812 102.668 171.249 102.826 170.837 103.143C170.43 103.456 170.148 103.804 169.992 104.188L167.996 103.733C168.233 103.07 168.578 102.535 169.033 102.128C169.492 101.716 170.02 101.418 170.617 101.233C171.213 101.044 171.841 100.949 172.499 100.949C172.935 100.949 173.396 101.001 173.884 101.105C174.376 101.205 174.836 101.389 175.262 101.659C175.693 101.929 176.045 102.315 176.32 102.817C176.595 103.314 176.732 103.96 176.732 104.756V112H174.658V110.509H174.573C174.435 110.783 174.23 111.053 173.955 111.318C173.68 111.583 173.328 111.804 172.897 111.979C172.466 112.154 171.95 112.241 171.348 112.241ZM171.81 110.537C172.397 110.537 172.899 110.421 173.316 110.189C173.737 109.957 174.057 109.654 174.275 109.28C174.497 108.901 174.608 108.496 174.608 108.065V106.659C174.533 106.735 174.386 106.806 174.168 106.872C173.955 106.934 173.711 106.988 173.436 107.036C173.162 107.078 172.894 107.118 172.634 107.156C172.373 107.189 172.156 107.218 171.98 107.241C171.569 107.294 171.192 107.381 170.851 107.504C170.515 107.627 170.245 107.805 170.042 108.037C169.843 108.264 169.743 108.567 169.743 108.946C169.743 109.472 169.937 109.869 170.326 110.139C170.714 110.404 171.209 110.537 171.81 110.537ZM184.653 101.091V102.795H178.694V101.091H184.653ZM180.292 98.4773H182.415V108.797C182.415 109.209 182.477 109.519 182.6 109.727C182.723 109.931 182.882 110.071 183.076 110.146C183.275 110.217 183.49 110.253 183.722 110.253C183.893 110.253 184.042 110.241 184.17 110.217C184.298 110.194 184.397 110.175 184.468 110.161L184.852 111.915C184.728 111.962 184.553 112.009 184.326 112.057C184.099 112.109 183.815 112.137 183.474 112.142C182.915 112.152 182.394 112.052 181.911 111.844C181.428 111.635 181.038 111.313 180.739 110.878C180.441 110.442 180.292 109.895 180.292 109.237V98.4773ZM191.586 112.22C190.511 112.22 189.586 111.991 188.809 111.531C188.038 111.067 187.441 110.416 187.02 109.578C186.603 108.735 186.395 107.748 186.395 106.616C186.395 105.499 186.603 104.514 187.02 103.662C187.441 102.81 188.028 102.144 188.781 101.666C189.538 101.188 190.424 100.949 191.437 100.949C192.053 100.949 192.649 101.051 193.227 101.254C193.805 101.458 194.323 101.777 194.782 102.213C195.242 102.649 195.604 103.214 195.869 103.911C196.134 104.602 196.267 105.442 196.267 106.432V107.185H187.595V105.594H194.186C194.186 105.035 194.072 104.54 193.845 104.109C193.618 103.674 193.298 103.33 192.886 103.08C192.479 102.829 192.001 102.703 191.451 102.703C190.855 102.703 190.334 102.85 189.889 103.143C189.449 103.432 189.108 103.811 188.866 104.28C188.629 104.744 188.511 105.248 188.511 105.793V107.036C188.511 107.765 188.639 108.385 188.895 108.896C189.155 109.408 189.517 109.798 189.981 110.068C190.445 110.333 190.987 110.466 191.608 110.466C192.01 110.466 192.377 110.409 192.708 110.295C193.04 110.177 193.326 110.002 193.568 109.77C193.809 109.538 193.994 109.251 194.122 108.911L196.132 109.273C195.971 109.865 195.682 110.383 195.265 110.828C194.853 111.268 194.335 111.612 193.71 111.858C193.09 112.099 192.382 112.22 191.586 112.22ZM200.746 97.4545V112H198.623V97.4545H200.746Z", fill: "black" }), (0, K.jsx)("path", { d: "M92.4418 135.05C92.3045 134.619 92.1198 134.233 91.8878 133.892C91.6605 133.546 91.3883 133.253 91.071 133.011C90.7538 132.765 90.3916 132.578 89.9844 132.45C89.5819 132.322 89.1392 132.259 88.6562 132.259C87.8371 132.259 87.0985 132.469 86.4403 132.891C85.7822 133.312 85.2614 133.93 84.8778 134.744C84.4991 135.554 84.3097 136.546 84.3097 137.72C84.3097 138.899 84.5014 139.896 84.8849 140.71C85.2685 141.525 85.794 142.143 86.4616 142.564C87.1293 142.985 87.8892 143.196 88.7415 143.196C89.5322 143.196 90.2211 143.035 90.8082 142.713C91.4001 142.391 91.857 141.937 92.179 141.349C92.5057 140.758 92.669 140.062 92.669 139.261L93.2372 139.368H89.0753V137.557H94.7926V139.212C94.7926 140.433 94.5322 141.494 94.0114 142.393C93.4953 143.288 92.7803 143.98 91.8665 144.467C90.9574 144.955 89.9157 145.199 88.7415 145.199C87.4252 145.199 86.2699 144.896 85.2756 144.29C84.286 143.684 83.5142 142.824 82.9602 141.712C82.4063 140.594 82.1293 139.268 82.1293 137.734C82.1293 136.574 82.2902 135.533 82.6122 134.609C82.9342 133.686 83.3864 132.902 83.9688 132.259C84.5559 131.61 85.2448 131.115 86.0355 130.774C86.831 130.429 87.6998 130.256 88.642 130.256C89.428 130.256 90.1596 130.372 90.8366 130.604C91.5185 130.836 92.1245 131.165 92.6548 131.591C93.1899 132.017 93.6326 132.524 93.983 133.111C94.3333 133.693 94.5701 134.339 94.6932 135.05H92.4418ZM102.11 145.22C101.035 145.22 100.109 144.991 99.3327 144.531C98.561 144.067 97.9644 143.416 97.543 142.578C97.1263 141.735 96.918 140.748 96.918 139.616C96.918 138.499 97.1263 137.514 97.543 136.662C97.9644 135.81 98.5515 135.144 99.3043 134.666C100.062 134.188 100.947 133.949 101.961 133.949C102.576 133.949 103.173 134.051 103.75 134.254C104.328 134.458 104.846 134.777 105.306 135.213C105.765 135.649 106.127 136.214 106.392 136.911C106.658 137.602 106.79 138.442 106.79 139.432V140.185H98.1183V138.594H104.709C104.709 138.035 104.596 137.54 104.368 137.109C104.141 136.674 103.821 136.33 103.409 136.08C103.002 135.829 102.524 135.703 101.975 135.703C101.378 135.703 100.857 135.85 100.412 136.143C99.9719 136.432 99.631 136.811 99.3896 137.28C99.1528 137.744 99.0344 138.248 99.0344 138.793V140.036C99.0344 140.765 99.1623 141.385 99.418 141.896C99.6784 142.408 100.041 142.798 100.505 143.068C100.969 143.333 101.511 143.466 102.131 143.466C102.533 143.466 102.9 143.409 103.232 143.295C103.563 143.177 103.85 143.002 104.091 142.77C104.333 142.538 104.517 142.251 104.645 141.911L106.655 142.273C106.494 142.865 106.205 143.383 105.789 143.828C105.377 144.268 104.858 144.612 104.233 144.858C103.613 145.099 102.905 145.22 102.11 145.22ZM113.848 145.22C112.773 145.22 111.848 144.991 111.071 144.531C110.299 144.067 109.703 143.416 109.281 142.578C108.865 141.735 108.656 140.748 108.656 139.616C108.656 138.499 108.865 137.514 109.281 136.662C109.703 135.81 110.29 135.144 111.043 134.666C111.8 134.188 112.686 133.949 113.699 133.949C114.314 133.949 114.911 134.051 115.489 134.254C116.066 134.458 116.585 134.777 117.044 135.213C117.503 135.649 117.866 136.214 118.131 136.911C118.396 137.602 118.528 138.442 118.528 139.432V140.185H109.857V138.594H116.447C116.447 138.035 116.334 137.54 116.107 137.109C115.879 136.674 115.56 136.33 115.148 136.08C114.741 135.829 114.262 135.703 113.713 135.703C113.116 135.703 112.596 135.85 112.151 136.143C111.71 136.432 111.369 136.811 111.128 137.28C110.891 137.744 110.773 138.248 110.773 138.793V140.036C110.773 140.765 110.901 141.385 111.156 141.896C111.417 142.408 111.779 142.798 112.243 143.068C112.707 143.333 113.249 143.466 113.869 143.466C114.272 143.466 114.639 143.409 114.97 143.295C115.302 143.177 115.588 143.002 115.83 142.77C116.071 142.538 116.256 142.251 116.384 141.911L118.393 142.273C118.232 142.865 117.944 143.383 117.527 143.828C117.115 144.268 116.597 144.612 115.972 144.858C115.351 145.099 114.643 145.22 113.848 145.22ZM125.977 134.091V135.795H120.018V134.091H125.977ZM121.616 131.477H123.74V141.797C123.74 142.209 123.801 142.519 123.924 142.727C124.047 142.931 124.206 143.071 124.4 143.146C124.599 143.217 124.815 143.253 125.047 143.253C125.217 143.253 125.366 143.241 125.494 143.217C125.622 143.194 125.721 143.175 125.792 143.161L126.176 144.915C126.053 144.962 125.877 145.009 125.65 145.057C125.423 145.109 125.139 145.137 124.798 145.142C124.239 145.152 123.718 145.052 123.235 144.844C122.752 144.635 122.362 144.313 122.064 143.878C121.765 143.442 121.616 142.895 121.616 142.237V131.477ZM130.684 138.523V145H128.56V130.455H130.656V135.866H130.79C131.046 135.279 131.437 134.813 131.962 134.467C132.488 134.122 133.174 133.949 134.022 133.949C134.77 133.949 135.424 134.103 135.982 134.411C136.546 134.718 136.981 135.178 137.289 135.788C137.602 136.394 137.758 137.152 137.758 138.061V145H135.634V138.317C135.634 137.517 135.428 136.896 135.016 136.456C134.604 136.011 134.031 135.788 133.298 135.788C132.796 135.788 132.346 135.895 131.948 136.108C131.555 136.321 131.245 136.634 131.018 137.045C130.795 137.453 130.684 137.945 130.684 138.523ZM143.766 145.241C143.075 145.241 142.45 145.114 141.891 144.858C141.333 144.598 140.89 144.221 140.563 143.729C140.241 143.236 140.08 142.633 140.08 141.918C140.08 141.302 140.199 140.795 140.435 140.398C140.672 140 140.992 139.685 141.394 139.453C141.797 139.221 142.246 139.046 142.744 138.928C143.241 138.809 143.747 138.719 144.263 138.658C144.917 138.582 145.447 138.52 145.854 138.473C146.262 138.421 146.558 138.338 146.742 138.224C146.927 138.111 147.019 137.926 147.019 137.67V137.621C147.019 137 146.844 136.52 146.494 136.179C146.148 135.838 145.632 135.668 144.945 135.668C144.23 135.668 143.667 135.826 143.255 136.143C142.848 136.456 142.566 136.804 142.41 137.188L140.414 136.733C140.651 136.07 140.996 135.535 141.451 135.128C141.91 134.716 142.438 134.418 143.035 134.233C143.631 134.044 144.259 133.949 144.917 133.949C145.353 133.949 145.814 134.001 146.302 134.105C146.794 134.205 147.254 134.389 147.68 134.659C148.111 134.929 148.463 135.315 148.738 135.817C149.013 136.314 149.15 136.96 149.15 137.756V145H147.076V143.509H146.991C146.853 143.783 146.647 144.053 146.373 144.318C146.098 144.583 145.746 144.804 145.315 144.979C144.884 145.154 144.368 145.241 143.766 145.241ZM144.228 143.537C144.815 143.537 145.317 143.421 145.734 143.189C146.155 142.957 146.475 142.654 146.692 142.28C146.915 141.901 147.026 141.496 147.026 141.065V139.659C146.951 139.735 146.804 139.806 146.586 139.872C146.373 139.934 146.129 139.988 145.854 140.036C145.58 140.078 145.312 140.118 145.052 140.156C144.791 140.189 144.574 140.218 144.398 140.241C143.987 140.294 143.61 140.381 143.269 140.504C142.933 140.627 142.663 140.805 142.46 141.037C142.261 141.264 142.161 141.567 142.161 141.946C142.161 142.472 142.355 142.869 142.744 143.139C143.132 143.404 143.627 143.537 144.228 143.537ZM157.271 134.091H159.395V145.71C159.395 146.439 159.262 147.055 158.997 147.557C158.737 148.059 158.348 148.44 157.832 148.7C157.321 148.961 156.689 149.091 155.936 149.091C155.86 149.091 155.789 149.091 155.723 149.091C155.652 149.091 155.579 149.089 155.503 149.084V147.259C155.569 147.259 155.628 147.259 155.68 147.259C155.728 147.259 155.782 147.259 155.844 147.259C156.346 147.259 156.708 147.124 156.93 146.854C157.158 146.589 157.271 146.203 157.271 145.696V134.091ZM158.322 132.408C157.953 132.408 157.636 132.285 157.371 132.038C157.11 131.787 156.98 131.489 156.98 131.143C156.98 130.793 157.11 130.495 157.371 130.249C157.636 129.998 157.953 129.872 158.322 129.872C158.692 129.872 159.007 129.998 159.267 130.249C159.532 130.495 159.665 130.793 159.665 131.143C159.665 131.489 159.532 131.787 159.267 132.038C159.007 132.285 158.692 132.408 158.322 132.408ZM166.953 145.22C165.879 145.22 164.953 144.991 164.176 144.531C163.405 144.067 162.808 143.416 162.387 142.578C161.97 141.735 161.762 140.748 161.762 139.616C161.762 138.499 161.97 137.514 162.387 136.662C162.808 135.81 163.395 135.144 164.148 134.666C164.906 134.188 165.791 133.949 166.804 133.949C167.42 133.949 168.016 134.051 168.594 134.254C169.172 134.458 169.69 134.777 170.15 135.213C170.609 135.649 170.971 136.214 171.236 136.911C171.501 137.602 171.634 138.442 171.634 139.432V140.185H162.962V138.594H169.553C169.553 138.035 169.439 137.54 169.212 137.109C168.985 136.674 168.665 136.33 168.253 136.08C167.846 135.829 167.368 135.703 166.819 135.703C166.222 135.703 165.701 135.85 165.256 136.143C164.816 136.432 164.475 136.811 164.233 137.28C163.997 137.744 163.878 138.248 163.878 138.793V140.036C163.878 140.765 164.006 141.385 164.262 141.896C164.522 142.408 164.884 142.798 165.348 143.068C165.812 143.333 166.355 143.466 166.975 143.466C167.377 143.466 167.744 143.409 168.076 143.295C168.407 143.177 168.694 143.002 168.935 142.77C169.176 142.538 169.361 142.251 169.489 141.911L171.499 142.273C171.338 142.865 171.049 143.383 170.632 143.828C170.221 144.268 169.702 144.612 169.077 144.858C168.457 145.099 167.749 145.22 166.953 145.22ZM178.692 145.22C177.617 145.22 176.691 144.991 175.915 144.531C175.143 144.067 174.546 143.416 174.125 142.578C173.708 141.735 173.5 140.748 173.5 139.616C173.5 138.499 173.708 137.514 174.125 136.662C174.546 135.81 175.134 135.144 175.886 134.666C176.644 134.188 177.529 133.949 178.543 133.949C179.158 133.949 179.755 134.051 180.332 134.254C180.91 134.458 181.429 134.777 181.888 135.213C182.347 135.649 182.709 136.214 182.974 136.911C183.24 137.602 183.372 138.442 183.372 139.432V140.185H174.7V138.594H181.291C181.291 138.035 181.178 137.54 180.95 137.109C180.723 136.674 180.403 136.33 179.991 136.08C179.584 135.829 179.106 135.703 178.557 135.703C177.96 135.703 177.439 135.85 176.994 136.143C176.554 136.432 176.213 136.811 175.972 137.28C175.735 137.744 175.616 138.248 175.616 138.793V140.036C175.616 140.765 175.744 141.385 176 141.896C176.26 142.408 176.623 142.798 177.087 143.068C177.551 143.333 178.093 143.466 178.713 143.466C179.116 143.466 179.482 143.409 179.814 143.295C180.145 143.177 180.432 143.002 180.673 142.77C180.915 142.538 181.099 142.251 181.227 141.911L183.237 142.273C183.076 142.865 182.787 143.383 182.371 143.828C181.959 144.268 181.44 144.612 180.815 144.858C180.195 145.099 179.487 145.22 178.692 145.22ZM194.748 134.091L190.792 145H188.52L184.556 134.091H186.836L189.599 142.486H189.713L192.468 134.091H194.748ZM199.606 145.241C198.915 145.241 198.29 145.114 197.731 144.858C197.172 144.598 196.73 144.221 196.403 143.729C196.081 143.236 195.92 142.633 195.92 141.918C195.92 141.302 196.038 140.795 196.275 140.398C196.512 140 196.832 139.685 197.234 139.453C197.636 139.221 198.086 139.046 198.583 138.928C199.081 138.809 199.587 138.719 200.103 138.658C200.757 138.582 201.287 138.52 201.694 138.473C202.101 138.421 202.397 138.338 202.582 138.224C202.767 138.111 202.859 137.926 202.859 137.67V137.621C202.859 137 202.684 136.52 202.333 136.179C201.988 135.838 201.472 135.668 200.785 135.668C200.07 135.668 199.507 135.826 199.095 136.143C198.688 136.456 198.406 136.804 198.25 137.188L196.254 136.733C196.491 136.07 196.836 135.535 197.291 135.128C197.75 134.716 198.278 134.418 198.875 134.233C199.471 134.044 200.099 133.949 200.757 133.949C201.192 133.949 201.654 134.001 202.142 134.105C202.634 134.205 203.093 134.389 203.52 134.659C203.95 134.929 204.303 135.315 204.578 135.817C204.852 136.314 204.99 136.96 204.99 137.756V145H202.916V143.509H202.831C202.693 143.783 202.487 144.053 202.213 144.318C201.938 144.583 201.585 144.804 201.154 144.979C200.724 145.154 200.208 145.241 199.606 145.241ZM200.068 143.537C200.655 143.537 201.157 143.421 201.574 143.189C201.995 142.957 202.315 142.654 202.532 142.28C202.755 141.901 202.866 141.496 202.866 141.065V139.659C202.79 139.735 202.644 139.806 202.426 139.872C202.213 139.934 201.969 139.988 201.694 140.036C201.42 140.078 201.152 140.118 200.892 140.156C200.631 140.189 200.413 140.218 200.238 140.241C199.826 140.294 199.45 140.381 199.109 140.504C198.773 140.627 198.503 140.805 198.299 141.037C198.1 141.264 198.001 141.567 198.001 141.946C198.001 142.472 198.195 142.869 198.583 143.139C198.972 143.404 199.467 143.537 200.068 143.537Z", fill: "black" }), (0, K.jsx)("path", { d: "M46.3991 111V109.409L51.321 104.31C51.8466 103.756 52.2798 103.27 52.6207 102.854C52.9664 102.432 53.2244 102.032 53.3949 101.653C53.5653 101.275 53.6506 100.872 53.6506 100.446C53.6506 99.9631 53.5369 99.5464 53.3097 99.196C53.0824 98.8409 52.7723 98.5687 52.3793 98.3793C51.9863 98.1851 51.5436 98.0881 51.0511 98.0881C50.5303 98.0881 50.0758 98.1946 49.6875 98.4077C49.2992 98.6207 49.0009 98.9214 48.7926 99.3097C48.5843 99.6979 48.4801 100.152 48.4801 100.673H46.3849C46.3849 99.7879 46.5885 99.0137 46.9957 98.3509C47.4029 97.688 47.9616 97.1742 48.6719 96.8097C49.3821 96.4403 50.1894 96.2557 51.0938 96.2557C52.0076 96.2557 52.8125 96.438 53.5085 96.8026C54.2093 97.1624 54.7562 97.6548 55.1491 98.2798C55.5421 98.9001 55.7386 99.6009 55.7386 100.382C55.7386 100.922 55.6368 101.45 55.4332 101.966C55.2344 102.482 54.8864 103.057 54.3892 103.692C53.892 104.321 53.2008 105.086 52.3153 105.986L49.4247 109.011V109.118H55.973V111H46.3991ZM60.0923 111.135C59.7041 111.135 59.3703 110.998 59.0909 110.723C58.8116 110.444 58.6719 110.107 58.6719 109.714C58.6719 109.326 58.8116 108.995 59.0909 108.72C59.3703 108.441 59.7041 108.301 60.0923 108.301C60.4806 108.301 60.8144 108.441 61.0938 108.72C61.3731 108.995 61.5128 109.326 61.5128 109.714C61.5128 109.975 61.4465 110.214 61.3139 110.432C61.1861 110.645 61.0156 110.815 60.8026 110.943C60.5895 111.071 60.3527 111.135 60.0923 111.135Z", fill: "black" }), (0, K.jsx)("path", { d: "M52.4631 148.199C51.4877 148.199 50.6165 148.031 49.8494 147.695C49.0871 147.358 48.4834 146.892 48.0384 146.295C47.598 145.694 47.3613 144.998 47.3281 144.207H49.5582C49.5866 144.638 49.7311 145.012 49.9915 145.33C50.2566 145.642 50.6023 145.884 51.0284 146.054C51.4545 146.224 51.928 146.31 52.4489 146.31C53.0218 146.31 53.5284 146.21 53.9688 146.011C54.4138 145.812 54.7618 145.536 55.0128 145.18C55.2637 144.821 55.3892 144.406 55.3892 143.938C55.3892 143.45 55.2637 143.021 55.0128 142.652C54.7666 142.278 54.4044 141.984 53.9261 141.771C53.4527 141.558 52.8797 141.452 52.2074 141.452H50.9787V139.662H52.2074C52.7472 139.662 53.2206 139.565 53.6278 139.371C54.0398 139.177 54.3617 138.907 54.5938 138.561C54.8258 138.211 54.9418 137.801 54.9418 137.332C54.9418 136.883 54.84 136.492 54.6364 136.161C54.4375 135.824 54.1534 135.562 53.7841 135.372C53.4195 135.183 52.9886 135.088 52.4915 135.088C52.018 135.088 51.5753 135.176 51.1634 135.351C50.7562 135.521 50.4247 135.768 50.169 136.089C49.9134 136.407 49.776 136.788 49.7571 137.233H47.6335C47.6572 136.447 47.8892 135.756 48.3295 135.159C48.7746 134.562 49.3617 134.096 50.0909 133.76C50.8201 133.424 51.6297 133.256 52.5199 133.256C53.4527 133.256 54.2576 133.438 54.9347 133.803C55.6165 134.162 56.142 134.643 56.5114 135.244C56.8854 135.846 57.0701 136.504 57.0653 137.219C57.0701 138.033 56.8428 138.724 56.3835 139.293C55.929 139.861 55.3229 140.242 54.5653 140.436V140.55C55.5313 140.696 56.2794 141.08 56.8097 141.7C57.3447 142.321 57.6098 143.09 57.6051 144.009C57.6098 144.809 57.3873 145.526 56.9375 146.161C56.4924 146.795 55.884 147.295 55.1122 147.659C54.3404 148.019 53.4574 148.199 52.4631 148.199ZM61.2876 148.135C60.8994 148.135 60.5656 147.998 60.2862 147.723C60.0069 147.444 59.8672 147.107 59.8672 146.714C59.8672 146.326 60.0069 145.995 60.2862 145.72C60.5656 145.441 60.8994 145.301 61.2876 145.301C61.6759 145.301 62.0097 145.441 62.2891 145.72C62.5684 145.995 62.7081 146.326 62.7081 146.714C62.7081 146.975 62.6418 147.214 62.5092 147.432C62.3814 147.645 62.2109 147.815 61.9979 147.943C61.7848 148.071 61.5481 148.135 61.2876 148.135Z", fill: "black" }), (0, K.jsx)("path", { d: "M247.021 137.845C247.021 137.063 246.071 136.43 244.894 136.43C243.717 136.43 242.766 137.063 242.766 137.845V139.26V152.702V157.655C242.766 158.437 243.717 159.07 244.894 159.07C246.071 159.07 247.021 158.437 247.021 157.655V151.995L251.297 151.283C254.029 150.827 256.922 151.04 259.442 151.875C262.38 152.853 265.791 152.972 268.863 152.203L271.17 151.628C272.001 151.42 272.553 150.894 272.553 150.301V139.353C272.553 138.336 270.944 137.673 269.575 138.128L268.936 138.341C265.858 139.366 262.234 139.366 259.156 138.341C256.822 137.562 254.142 137.368 251.609 137.788L247.021 138.553V137.845Z", fill: "#59478C" }), (0, K.jsx)("path", { d: "M255.053 95.9185C256.021 95.9185 256.803 96.5674 256.803 97.3706V100.275H263.366C265.542 100.275 267.303 101.736 267.303 103.542V115.886C267.303 117.692 265.542 119.153 263.366 119.153H246.741C244.564 119.153 242.803 117.692 242.803 115.886V103.542C242.803 101.736 244.564 100.275 246.741 100.275H253.303V97.3706C253.303 96.5674 254.085 95.9185 255.053 95.9185ZM248.928 113.345C248.447 113.345 248.053 113.671 248.053 114.071C248.053 114.47 248.447 114.797 248.928 114.797H250.678C251.159 114.797 251.553 114.47 251.553 114.071C251.553 113.671 251.159 113.345 250.678 113.345H248.928ZM254.178 113.345C253.697 113.345 253.303 113.671 253.303 114.071C253.303 114.47 253.697 114.797 254.178 114.797H255.928C256.409 114.797 256.803 114.47 256.803 114.071C256.803 113.671 256.409 113.345 255.928 113.345H254.178ZM259.428 113.345C258.947 113.345 258.553 113.671 258.553 114.071C258.553 114.47 258.947 114.797 259.428 114.797H261.178C261.659 114.797 262.053 114.47 262.053 114.071C262.053 113.671 261.659 113.345 261.178 113.345H259.428ZM251.991 107.536C251.991 107.054 251.76 106.593 251.35 106.252C250.94 105.912 250.383 105.721 249.803 105.721C249.223 105.721 248.667 105.912 248.256 106.252C247.846 106.593 247.616 107.054 247.616 107.536C247.616 108.017 247.846 108.479 248.256 108.819C248.667 109.16 249.223 109.351 249.803 109.351C250.383 109.351 250.94 109.16 251.35 108.819C251.76 108.479 251.991 108.017 251.991 107.536ZM260.303 109.351C260.883 109.351 261.44 109.16 261.85 108.819C262.26 108.479 262.491 108.017 262.491 107.536C262.491 107.054 262.26 106.593 261.85 106.252C261.44 105.912 260.883 105.721 260.303 105.721C259.723 105.721 259.167 105.912 258.756 106.252C258.346 106.593 258.116 107.054 258.116 107.536C258.116 108.017 258.346 108.479 258.756 108.819C259.167 109.16 259.723 109.351 260.303 109.351ZM240.178 106.084H241.053V114.797H240.178C238.729 114.797 237.553 113.821 237.553 112.619V108.262C237.553 107.059 238.729 106.084 240.178 106.084ZM269.928 106.084C271.377 106.084 272.553 107.059 272.553 108.262V112.619C272.553 113.821 271.377 114.797 269.928 114.797H269.053V106.084H269.928Z", fill: "#B53333" }), (0, K.jsx)("path", { d: "M258.241 63.8351C253.554 63.8351 249.589 66.3002 248.241 69.6987C250.245 68.885 252.505 68.4302 254.902 68.4302H260.15C260.674 68.4302 261.104 68.7749 261.104 69.1961C261.104 69.6173 260.674 69.9619 260.15 69.9619H259.195H254.902C253.912 69.9619 252.952 70.0529 252.028 70.2204C250.483 70.5028 249.046 71.0054 247.77 71.6899C244.305 73.5423 242.021 76.7063 242.021 80.301V81.0669C242.021 81.7035 242.659 82.2156 243.452 82.2156C244.246 82.2156 244.884 81.7035 244.884 81.0669V80.301C244.884 77.9699 246.118 75.8734 248.092 74.4039C249.273 78.0178 253.369 80.6839 258.241 80.6839H258.301C266.178 80.6504 272.553 74.4183 272.553 66.7358C272.553 64.6967 272.106 62.7581 271.295 61.011C271.14 60.6807 270.538 60.6951 270.329 61.0062C269.208 62.6911 266.989 63.8351 264.443 63.8351H258.241Z", fill: "#49923D" }), (0, K.jsx)("path", { d: "M351.009 3.81818L353.842 12.1108H353.957L356.79 3.81818H358.451L354.787 14H353.012L349.348 3.81818H351.009ZM359.921 3.81818H361.786L365.027 11.733H365.146L368.388 3.81818H370.252V14H368.791V6.6321H368.696L365.693 13.9851H364.48L361.477 6.62713H361.383V14H359.921V3.81818ZM378.039 6.4929C377.986 6.02225 377.767 5.65767 377.383 5.39915C376.998 5.13731 376.514 5.00639 375.931 5.00639C375.513 5.00639 375.152 5.07268 374.847 5.20526C374.542 5.33452 374.305 5.51349 374.136 5.74219C373.971 5.96757 373.888 6.22443 373.888 6.51278C373.888 6.75473 373.944 6.96354 374.057 7.1392C374.173 7.31487 374.324 7.46236 374.509 7.58168C374.698 7.69768 374.9 7.79545 375.116 7.875C375.331 7.95123 375.538 8.0142 375.737 8.06392L376.732 8.32244C377.056 8.40199 377.389 8.50971 377.731 8.6456C378.072 8.78149 378.389 8.96046 378.68 9.18253C378.972 9.40459 379.207 9.67969 379.386 10.0078C379.569 10.3359 379.66 10.7287 379.66 11.1861C379.66 11.7628 379.511 12.2749 379.212 12.7223C378.917 13.1697 378.488 13.5227 377.925 13.7812C377.365 14.0398 376.687 14.169 375.891 14.169C375.129 14.169 374.469 14.0481 373.913 13.8061C373.356 13.5642 372.92 13.2211 372.605 12.777C372.29 12.3295 372.116 11.7992 372.083 11.1861H373.624C373.654 11.554 373.773 11.8606 373.982 12.1058C374.194 12.3478 374.464 12.5284 374.793 12.6477C375.124 12.7637 375.487 12.8217 375.881 12.8217C376.316 12.8217 376.702 12.7538 377.04 12.6179C377.381 12.4787 377.65 12.2865 377.845 12.0412C378.041 11.7926 378.138 11.5026 378.138 11.1712C378.138 10.8696 378.052 10.6226 377.88 10.4304C377.711 10.2382 377.481 10.0791 377.189 9.95312C376.901 9.82718 376.574 9.71615 376.21 9.62003L375.006 9.2919C374.191 9.06984 373.545 8.74337 373.067 8.3125C372.594 7.88163 372.357 7.31155 372.357 6.60227C372.357 6.01562 372.516 5.50355 372.834 5.06605C373.152 4.62855 373.583 4.28883 374.126 4.04688C374.67 3.80161 375.283 3.67898 375.966 3.67898C376.655 3.67898 377.263 3.79995 377.79 4.0419C378.321 4.28385 378.738 4.61695 379.043 5.04119C379.348 5.46212 379.507 5.94602 379.521 6.4929H378.039ZM389.714 3.81818V14H388.302L383.126 6.53267H383.032V14H381.496V3.81818H382.917L388.098 11.2955H388.192V3.81818H389.714ZM391.602 12.0114V10.7685L396.001 3.81818H396.981V5.64773H396.359L393.212 10.6293V10.7088H399.243V12.0114H391.602ZM396.429 14V11.6335L396.439 11.0668V3.81818H397.896V14H396.429ZM404.52 14.1392C403.837 14.1392 403.228 14.0215 402.691 13.7862C402.157 13.5509 401.734 13.2244 401.423 12.8068C401.115 12.3859 400.949 11.8987 400.926 11.3452H402.487C402.507 11.6468 402.608 11.9086 402.79 12.1307C402.976 12.3494 403.218 12.5185 403.516 12.6378C403.814 12.7571 404.146 12.8168 404.51 12.8168C404.911 12.8168 405.266 12.7472 405.574 12.608C405.886 12.4687 406.129 12.2749 406.305 12.0263C406.481 11.7744 406.569 11.4844 406.569 11.1562C406.569 10.8149 406.481 10.5149 406.305 10.2564C406.133 9.99455 405.879 9.78906 405.544 9.63991C405.213 9.49077 404.812 9.41619 404.341 9.41619H403.481V8.16335H404.341C404.719 8.16335 405.051 8.09541 405.336 7.95952C405.624 7.82363 405.849 7.63471 406.012 7.39276C406.174 7.14749 406.255 6.8608 406.255 6.53267C406.255 6.2178 406.184 5.94437 406.042 5.71236C405.902 5.47704 405.703 5.29309 405.445 5.16051C405.19 5.02794 404.888 4.96165 404.54 4.96165C404.209 4.96165 403.899 5.02296 403.61 5.1456C403.325 5.26491 403.093 5.43726 402.914 5.66264C402.735 5.88471 402.639 6.15151 402.626 6.46307H401.14C401.156 5.91288 401.319 5.42898 401.627 5.01136C401.938 4.59375 402.349 4.26728 402.86 4.03196C403.37 3.79664 403.937 3.67898 404.56 3.67898C405.213 3.67898 405.776 3.80658 406.25 4.06179C406.728 4.31368 407.096 4.65009 407.354 5.07102C407.616 5.49195 407.745 5.95265 407.742 6.45312C407.745 7.0232 407.586 7.5071 407.265 7.90483C406.946 8.30256 406.522 8.56937 405.992 8.70526V8.7848C406.668 8.88755 407.192 9.15601 407.563 9.5902C407.937 10.0244 408.123 10.563 408.12 11.206C408.123 11.7661 407.967 12.2682 407.652 12.7124C407.341 13.1565 406.915 13.5062 406.375 13.7614C405.834 14.0133 405.216 14.1392 404.52 14.1392ZM409.999 14V12.8864L413.444 9.31676C413.812 8.92898 414.115 8.58925 414.354 8.29759C414.596 8.0026 414.777 7.72254 414.896 7.45739C415.015 7.19223 415.075 6.91051 415.075 6.61222C415.075 6.27415 414.995 5.98248 414.836 5.73722C414.677 5.48864 414.46 5.29806 414.185 5.16548C413.91 5.02959 413.6 4.96165 413.255 4.96165C412.891 4.96165 412.573 5.03622 412.301 5.18537C412.029 5.33452 411.82 5.54498 411.674 5.81676C411.529 6.08854 411.456 6.40672 411.456 6.77131H409.989C409.989 6.15151 410.132 5.60961 410.417 5.1456C410.702 4.68158 411.093 4.32197 411.59 4.06676C412.087 3.80824 412.652 3.67898 413.285 3.67898C413.925 3.67898 414.488 3.80658 414.975 4.06179C415.466 4.31368 415.849 4.65838 416.124 5.09588C416.399 5.53007 416.537 6.0206 416.537 6.56747C416.537 6.94531 416.465 7.31487 416.323 7.67614C416.184 8.0374 415.94 8.4401 415.592 8.88423C415.244 9.32505 414.76 9.86032 414.14 10.4901L412.117 12.608V12.6825H416.701V14H409.999ZM422.448 3.81818V14H420.907V5.35938H420.847L418.411 6.95028V5.47869L420.951 3.81818H422.448Z", fill: "white" }), (0, K.jsx)("path", { d: "M50.9176 64.4545V79H48.7159V66.6562H48.6307L45.1506 68.929V66.8267L48.7798 64.4545H50.9176ZM55.44 79.1349C55.0517 79.1349 54.7179 78.9976 54.4386 78.723C54.1592 78.4437 54.0195 78.1075 54.0195 77.7145C54.0195 77.3262 54.1592 76.9948 54.4386 76.7202C54.7179 76.4408 55.0517 76.3011 55.44 76.3011C55.8282 76.3011 56.1621 76.4408 56.4414 76.7202C56.7208 76.9948 56.8604 77.3262 56.8604 77.7145C56.8604 77.9749 56.7942 78.214 56.6616 78.4318C56.5337 78.6449 56.3633 78.8153 56.1502 78.9432C55.9371 79.071 55.7004 79.1349 55.44 79.1349Z", fill: "black" })] }), (0, K.jsxs)("defs", { children: [(0, K.jsxs)("filter", { id: "filter0_d_40_7", x: "-4.11267", y: "-0.708252", width: "463.324", height: "600.59", filterUnits: "userSpaceOnUse", "color-interpolation-filters": "sRGB", children: [(0, K.jsx)("feFlood", { "flood-opacity": "0", result: "BackgroundImageFix" }), (0, K.jsx)("feColorMatrix", { in: "SourceAlpha", type: "matrix", values: "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0", result: "hardAlpha" }), (0, K.jsx)("feOffset", { dy: "4" }), (0, K.jsx)("feGaussianBlur", { stdDeviation: "2" }), (0, K.jsx)("feComposite", { in2: "hardAlpha", operator: "out" }), (0, K.jsx)("feColorMatrix", { type: "matrix", values: "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" }), (0, K.jsx)("feBlend", { mode: "normal", in2: "BackgroundImageFix", result: "effect1_dropShadow_40_7" }), (0, K.jsx)("feBlend", { mode: "normal", in: "SourceGraphic", in2: "effect1_dropShadow_40_7", result: "shape" })] }), (0, K.jsx)("clipPath", { id: "clip0_40_7", children: (0, K.jsx)("rect", { width: "455", height: "591", fill: "white" }) })] })] }), h && (0, K.jsx)(nH, { userName: s, time: a, status: o, onChange: i }), "red" === g && !h && (0, K.jsx)("button", { onClick: n, className: "report-button", children: "Report" }), w && (0, K.jsx)(kF, { show: w, onClose: function () { return S(!1) }, message: "Machine Tampering Detected, please report." }), G && (0, K.jsx)(VF, {})] })] }) }; function MF() { var e = Je((function (e) { return e.BlockChainReducer })), n = e.userIntract, i = e.task, a = e.selectedCardIndex; console.log("Task value:", i); var o = rt(), s = (0, t.useState)("login"), l = (0, r.Z)(s, 2), g = l[0], c = l[1], u = (0, t.useState)(""), C = (0, r.Z)(u, 2), d = (C[0], C[1], (0, t.useState)(!1)), I = (0, r.Z)(d, 2), h = (I[0], I[1]), A = (0, t.useState)(null), p = (0, r.Z)(A, 2), f = p[0], m = p[1], b = (0, t.useState)(""), y = (0, r.Z)(b, 2), G = y[0], B = y[1], Z = (0, t.useState)(Math.random() < .5 ? "green" : "red"), w = (0, r.Z)(Z, 2), S = w[0], R = w[1], x = a.length > 0 ? (a[a.length - 1] + 1) % 4 : 0; var W = ["#FFFFFF", "#FFFFFF", "yellow", "yellow"], V = function () { c("tables") }, k = function (e) { m(e), c("tables"), console.log(e) }, H = ["The public display of election results on a table fosters transparency and trustworthiness, ensuring that the electoral process is open and accountable.", (0, K.jsx)("span", { style: { color: "yellow" }, children: "The decentralized and transparent nature of PoW blockchains makes it computationally infeasible to alter or reverse transactions once they are recorded on the blockchain" })]; return (0, K.jsx)(K.Fragment, { children: (0, K.jsx)("div", { className: "App", children: (0, K.jsx)("div", { className: "container-fluid container-full-height", children: (0, K.jsxs)("div", { className: "row", children: [(0, K.jsx)("div", { className: "col-md-8 left-column", children: 5 === i ? (0, K.jsx)(tH, {}) : (0, K.jsx)(PS, {}) }), (0, K.jsxs)("div", { className: "col-md-4 right-column", children: [i > 2 && i < 5 && (0, K.jsx)(kR, { initialTime: 600 }), "login" === g && n && 1 === i ? (0, K.jsx)(VR, { onButtonClick: function (e) { !function (e) { o($n([].concat((0, v.Z)(a), [x]))), o(ei(!1)), o(ti(2)), B(e.name), console.log(e) }(e), c("token"), h(!0) } }) : null, "token" === g && n && 2 === i ? (0, K.jsx)(K.Fragment, { children: (0, K.jsx)(HR, { onClose: function () { o($n([].concat((0, v.Z)(a), [x]))), o(ei(!1)), o(ti(3)), c("votingComponent") } }) }) : null, "votingComponent" === g && n && 3 === i ? (0, K.jsx)(K.Fragment, { children: (0, K.jsx)(HF, { onClick: function () { c("report") }, onChange: V, showTables: k, userName: G, currentColor: S }) }) : null, "tables" === g && n && 4 === i ? (0, K.jsx)(K.Fragment, { children: (0, K.jsx)(nH, { userName: f.userName, time: f.time, status: f.status }) }) : null, "report" === g ? (0, K.jsx)(VF, { onClick: function () { c("notification") } }) : null, "notification" === g ? (0, K.jsx)(WF, { onClick: function () { c("loginAuth") } }) : null, "loginAuth" === g ? (0, K.jsx)(xF, { onClick: function () { c("checkbox") } }) : null, "checkbox" === g ? (0, K.jsx)(RF, { onClick: function () { c("alert") } }) : null, "alert" === g ? (0, K.jsx)(SF, { onClick: function () { c("vote"), R("green") } }) : null, "vote" === g ? (0, K.jsx)(HF, { onChange: V, showTables: k, userName: G, currentColor: S }) : null, !n && 1 === i && (0, K.jsx)(oi, { instructions: ["Election process based on the concept of Proof of Work.", "Imagine the election as a blockchain, where voters are similar to nodes in the blockchain network.", " PoW ensures the legitimacy of transactions in a blockchain, voters need to provide proof of their eligibility to cast a valid vote.", "Lets start .."], heading: "1. Verification ", colors: W }), !n && 2 === i && (0, K.jsx)(oi, { instructions: [" In election, each voter is given a unique token, which can be thought of as a cryptographic key.", "Timer is set inorder to prevent the double voting and each voter need to  complete the election process in the given time .", " Proof of Work (PoW) is a method used to prevent double-spending in cryptocurrencies and double voting in elections.,The time it takes for the PoW process to complete acts as a timer that prevents individuals from casting multiple votes."], heading: "2. Prevent Double Voting", colors: W }), !n && 3 === i && (0, K.jsx)(oi, { instructions: ["Each voting machine has an indicator light that shows whether it is tamper-free or not.", "A 'green light' indicates that the machine is safe to use, while a 'red light' suggests that it might have been tampered with.", "PoW  Prevents malicious actors from manipulating the blockchain's transaction", "Miners have to solve complex mathematical problems to validate transactions and add new blocks to the blockchain."], heading: "3. Securing Electoral Process", colors: W }), !n && 4 === i && (0, K.jsx)(oi, { instructions: H, heading: "4. Public Verification", colors: W })] })] }) }) }) }) } var FF = function (e) { var t = e.title; return (0, K.jsx)("div", { style: { height: "6rem", display: "flex", justifyContent: "flex-start", paddingInline: 10 }, children: (0, K.jsxs)("svg", { style: { width: "100%" }, children: [(0, K.jsx)("line", { x1: 0, x2: 150, y1: "50%", y2: "50%", fill: "none", style: { stroke: "#22eff1", strokeWidth: 2, strokeLinecap: "round" } }), (0, K.jsx)("line", { x1: 120, x2: 150, y1: 90, y2: 50, fill: "none", style: { stroke: "#22eff1", strokeWidth: 2, strokeLinecap: "round" } }), (0, K.jsx)("line", { x1: 120, x2: 290, y1: 90, y2: 90, fill: "none", style: { stroke: "#22eff1", strokeWidth: 2, strokeLinecap: "round" } }), (0, K.jsx)("line", { x1: 290, x2: 330, y1: 90, y2: 50, fill: "none", style: { stroke: "#22eff1", strokeWidth: 2, strokeLinecap: "round" } }), (0, K.jsx)("line", { x1: 330, x2: "150%", y1: 50, y2: 50, fill: "none", style: { stroke: "#33c8cc", strokeWidth: 2, strokeLinecap: "round" } }), (0, K.jsx)("line", { x1: 330, x2: "150%", y1: 55, y2: 55, fill: "none", style: { stroke: "#1bfaff", strokeWidth: 2, strokeLinecap: "round" } }), (0, K.jsx)("text", { style: { fontSize: 20, fontStyle: "normal", fill: "white" }, transform: "translate(160,70)", children: t })] }) }) }, NF = { "aria-busy": !0, role: "status" }, XF = n(9613), YF = n.n(XF); var KF = function (e) { function t(e, i, l, g, C) { for (var d, I, h, A, v, y = 0, G = 0, B = 0, Z = 0, w = 0, k = 0, M = h = d = 0, N = 0, X = 0, Y = 0, K = 0, L = l.length, z = L - 1, E = "", T = "", _ = "", U = ""; N < L;) { if (I = l.charCodeAt(N), N === z && 0 !== G + Z + B + y && (0 !== G && (I = 47 === G ? 10 : 47), Z = B = y = 0, L++, z++), 0 === G + Z + B + y) { if (N === z && (0 < X && (E = E.replace(u, "")), 0 < E.trim().length)) { switch (I) { case 32: case 9: case 59: case 13: case 10: break; default: E += l.charAt(N) }I = 59 } switch (I) { case 123: for (d = (E = E.trim()).charCodeAt(0), h = 1, K = ++N; N < L;) { switch (I = l.charCodeAt(N)) { case 123: h++; break; case 125: h--; break; case 47: switch (I = l.charCodeAt(N + 1)) { case 42: case 47: e: { for (M = N + 1; M < z; ++M)switch (l.charCodeAt(M)) { case 47: if (42 === I && 42 === l.charCodeAt(M - 1) && N + 2 !== M) { N = M + 1; break e } break; case 10: if (47 === I) { N = M + 1; break e } }N = M } }break; case 91: I++; case 40: I++; case 34: case 39: for (; N++ < z && l.charCodeAt(N) !== I;); }if (0 === h) break; N++ } if (h = l.substring(K, N), 0 === d && (d = (E = E.replace(c, "").trim()).charCodeAt(0)), 64 === d) { switch (0 < X && (E = E.replace(u, "")), I = E.charCodeAt(1)) { case 100: case 109: case 115: case 45: X = i; break; default: X = V }if (K = (h = t(i, X, h, I, C + 1)).length, 0 < H && (v = s(3, h, X = n(V, E, Y), i, R, S, K, I, C, g), E = X.join(""), void 0 !== v && 0 === (K = (h = v.trim()).length) && (I = 0, h = "")), 0 < K) switch (I) { case 115: E = E.replace(b, o); case 100: case 109: case 45: h = E + "{" + h + "}"; break; case 107: h = (E = E.replace(p, "$1 $2")) + "{" + h + "}", h = 1 === W || 2 === W && a("@" + h, 3) ? "@-webkit-" + h + "@" + h : "@" + h; break; default: h = E + h, 112 === g && (T += h, h = "") } else h = "" } else h = t(i, n(i, E, Y), h, g, C + 1); _ += h, h = Y = X = M = d = 0, E = "", I = l.charCodeAt(++N); break; case 125: case 59: if (1 < (K = (E = (0 < X ? E.replace(u, "") : E).trim()).length)) switch (0 === M && (d = E.charCodeAt(0), 45 === d || 96 < d && 123 > d) && (K = (E = E.replace(" ", ":")).length), 0 < H && void 0 !== (v = s(1, E, i, e, R, S, T.length, g, C, g)) && 0 === (K = (E = v.trim()).length) && (E = "\0\0"), d = E.charCodeAt(0), I = E.charCodeAt(1), d) { case 0: break; case 64: if (105 === I || 99 === I) { U += E + l.charAt(N); break } default: 58 !== E.charCodeAt(K - 1) && (T += r(E, d, I, E.charCodeAt(2))) }Y = X = M = d = 0, E = "", I = l.charCodeAt(++N) } } switch (I) { case 13: case 10: 47 === G ? G = 0 : 0 === 1 + d && 107 !== g && 0 < E.length && (X = 1, E += "\0"), 0 < H * F && s(0, E, i, e, R, S, T.length, g, C, g), S = 1, R++; break; case 59: case 125: if (0 === G + Z + B + y) { S++; break } default: switch (S++, A = l.charAt(N), I) { case 9: case 32: if (0 === Z + y + G) switch (w) { case 44: case 58: case 9: case 32: A = ""; break; default: 32 !== I && (A = " ") }break; case 0: A = "\\0"; break; case 12: A = "\\f"; break; case 11: A = "\\v"; break; case 38: 0 === Z + G + y && (X = Y = 1, A = "\f" + A); break; case 108: if (0 === Z + G + y + x && 0 < M) switch (N - M) { case 2: 112 === w && 58 === l.charCodeAt(N - 3) && (x = w); case 8: 111 === k && (x = k) }break; case 58: 0 === Z + G + y && (M = N); break; case 44: 0 === G + B + Z + y && (X = 1, A += "\r"); break; case 34: case 39: 0 === G && (Z = Z === I ? 0 : 0 === Z ? I : Z); break; case 91: 0 === Z + G + B && y++; break; case 93: 0 === Z + G + B && y--; break; case 41: 0 === Z + G + y && B--; break; case 40: if (0 === Z + G + y) { if (0 === d) if (2 * w + 3 * k === 533); else d = 1; B++ } break; case 64: 0 === G + B + Z + y + M + h && (h = 1); break; case 42: case 47: if (!(0 < Z + y + B)) switch (G) { case 0: switch (2 * I + 3 * l.charCodeAt(N + 1)) { case 235: G = 47; break; case 220: K = N, G = 42 }break; case 42: 47 === I && 42 === w && K + 2 !== N && (33 === l.charCodeAt(K + 2) && (T += l.substring(K, N + 1)), A = "", G = 0) } }0 === G && (E += A) }k = w, w = I, N++ } if (0 < (K = T.length)) { if (X = i, 0 < H && (void 0 !== (v = s(2, T, X, e, R, S, K, g, C, g)) && 0 === (T = v).length)) return U + T + _; if (T = X.join(",") + "{" + T + "}", 0 !== W * x) { switch (2 !== W || a(T, 2) || (x = 0), x) { case 111: T = T.replace(m, ":-moz-$1") + T; break; case 112: T = T.replace(f, "::-webkit-input-$1") + T.replace(f, "::-moz-$1") + T.replace(f, ":-ms-input-$1") + T }x = 0 } } return U + T + _ } function n(e, t, n) { var r = t.trim().split(h); t = r; var a = r.length, o = e.length; switch (o) { case 0: case 1: var s = 0; for (e = 0 === o ? "" : e[0] + " "; s < a; ++s)t[s] = i(e, t[s], n).trim(); break; default: var l = s = 0; for (t = []; s < a; ++s)for (var g = 0; g < o; ++g)t[l++] = i(e[g] + " ", r[s], n).trim() }return t } function i(e, t, n) { var i = t.charCodeAt(0); switch (33 > i && (i = (t = t.trim()).charCodeAt(0)), i) { case 38: return t.replace(A, "$1" + e.trim()); case 58: return e.trim() + t.replace(A, "$1" + e.trim()); default: if (0 < 1 * n && 0 < t.indexOf("\f")) return t.replace(A, (58 === e.charCodeAt(0) ? "" : "$1") + e.trim()) }return e + t } function r(e, t, n, i) { var o = e + ";", s = 2 * t + 3 * n + 4 * i; if (944 === s) { e = o.indexOf(":", 9) + 1; var l = o.substring(e, o.length - 1).trim(); return l = o.substring(0, e).trim() + l + ";", 1 === W || 2 === W && a(l, 1) ? "-webkit-" + l + l : l } if (0 === W || 2 === W && !a(o, 1)) return o; switch (s) { case 1015: return 97 === o.charCodeAt(10) ? "-webkit-" + o + o : o; case 951: return 116 === o.charCodeAt(3) ? "-webkit-" + o + o : o; case 963: return 110 === o.charCodeAt(5) ? "-webkit-" + o + o : o; case 1009: if (100 !== o.charCodeAt(4)) break; case 969: case 942: return "-webkit-" + o + o; case 978: return "-webkit-" + o + "-moz-" + o + o; case 1019: case 983: return "-webkit-" + o + "-moz-" + o + "-ms-" + o + o; case 883: if (45 === o.charCodeAt(8)) return "-webkit-" + o + o; if (0 < o.indexOf("image-set(", 11)) return o.replace(w, "$1-webkit-$2") + o; break; case 932: if (45 === o.charCodeAt(4)) switch (o.charCodeAt(5)) { case 103: return "-webkit-box-" + o.replace("-grow", "") + "-webkit-" + o + "-ms-" + o.replace("grow", "positive") + o; case 115: return "-webkit-" + o + "-ms-" + o.replace("shrink", "negative") + o; case 98: return "-webkit-" + o + "-ms-" + o.replace("basis", "preferred-size") + o }return "-webkit-" + o + "-ms-" + o + o; case 964: return "-webkit-" + o + "-ms-flex-" + o + o; case 1023: if (99 !== o.charCodeAt(8)) break; return "-webkit-box-pack" + (l = o.substring(o.indexOf(":", 15)).replace("flex-", "").replace("space-between", "justify")) + "-webkit-" + o + "-ms-flex-pack" + l + o; case 1005: return d.test(o) ? o.replace(C, ":-webkit-") + o.replace(C, ":-moz-") + o : o; case 1e3: switch (t = (l = o.substring(13).trim()).indexOf("-") + 1, l.charCodeAt(0) + l.charCodeAt(t)) { case 226: l = o.replace(v, "tb"); break; case 232: l = o.replace(v, "tb-rl"); break; case 220: l = o.replace(v, "lr"); break; default: return o }return "-webkit-" + o + "-ms-" + l + o; case 1017: if (-1 === o.indexOf("sticky", 9)) break; case 975: switch (t = (o = e).length - 10, s = (l = (33 === o.charCodeAt(t) ? o.substring(0, t) : o).substring(e.indexOf(":", 7) + 1).trim()).charCodeAt(0) + (0 | l.charCodeAt(7))) { case 203: if (111 > l.charCodeAt(8)) break; case 115: o = o.replace(l, "-webkit-" + l) + ";" + o; break; case 207: case 102: o = o.replace(l, "-webkit-" + (102 < s ? "inline-" : "") + "box") + ";" + o.replace(l, "-webkit-" + l) + ";" + o.replace(l, "-ms-" + l + "box") + ";" + o }return o + ";"; case 938: if (45 === o.charCodeAt(5)) switch (o.charCodeAt(6)) { case 105: return l = o.replace("-items", ""), "-webkit-" + o + "-webkit-box-" + l + "-ms-flex-" + l + o; case 115: return "-webkit-" + o + "-ms-flex-item-" + o.replace(G, "") + o; default: return "-webkit-" + o + "-ms-flex-line-pack" + o.replace("align-content", "").replace(G, "") + o }break; case 973: case 989: if (45 !== o.charCodeAt(3) || 122 === o.charCodeAt(4)) break; case 931: case 953: if (!0 === Z.test(e)) return 115 === (l = e.substring(e.indexOf(":") + 1)).charCodeAt(0) ? r(e.replace("stretch", "fill-available"), t, n, i).replace(":fill-available", ":stretch") : o.replace(l, "-webkit-" + l) + o.replace(l, "-moz-" + l.replace("fill-", "")) + o; break; case 962: if (o = "-webkit-" + o + (102 === o.charCodeAt(5) ? "-ms-" + o : "") + o, 211 === n + i && 105 === o.charCodeAt(13) && 0 < o.indexOf("transform", 10)) return o.substring(0, o.indexOf(";", 27) + 1).replace(I, "$1-webkit-$2") + o }return o } function a(e, t) { var n = e.indexOf(1 === t ? ":" : "{"), i = e.substring(0, 3 !== t ? n : 10); return n = e.substring(n + 1, e.length - 1), M(2 !== t ? i : i.replace(B, "$1"), n, t) } function o(e, t) { var n = r(t, t.charCodeAt(0), t.charCodeAt(1), t.charCodeAt(2)); return n !== t + ";" ? n.replace(y, " or ($1)").substring(4) : "(" + t + ")" } function s(e, t, n, i, r, a, o, s, l, c) { for (var u, C = 0, d = t; C < H; ++C)switch (u = k[C].call(g, e, d, n, i, r, a, o, s, l, c)) { case void 0: case !1: case !0: case null: break; default: d = u }if (d !== t) return d } function l(e) { return void 0 !== (e = e.prefix) && (M = null, e ? "function" !== typeof e ? W = 1 : (W = 2, M = e) : W = 0), l } function g(e, n) { var i = e; if (33 > i.charCodeAt(0) && (i = i.trim()), i = [i], 0 < H) { var r = s(-1, n, i, i, R, S, 0, 0, 0, 0); void 0 !== r && "string" === typeof r && (n = r) } var a = t(V, i, n, 0, 0); return 0 < H && (void 0 !== (r = s(-2, a, i, i, R, S, a.length, 0, 0, 0)) && (a = r)), "", x = 0, S = R = 1, a } var c = /^\0+/g, u = /[\0\r\f]/g, C = /: */g, d = /zoo|gra/, I = /([,: ])(transform)/g, h = /,\r+?/g, A = /([\t\r\n ])*\f?&/g, p = /@(k\w+)\s*(\S*)\s*/, f = /::(place)/g, m = /:(read-only)/g, v = /[svh]\w+-[tblr]{2}/, b = /\(\s*(.*)\s*\)/g, y = /([\s\S]*?);/g, G = /-self|flex-/g, B = /[^]*?(:[rp][el]a[\w-]+)[^]*/, Z = /stretch|:\s*\w+\-(?:conte|avail)/, w = /([^-])(image-set\()/, S = 1, R = 1, x = 0, W = 1, V = [], k = [], H = 0, M = null, F = 0; return g.use = function e(t) { switch (t) { case void 0: case null: H = k.length = 0; break; default: if ("function" === typeof t) k[H++] = t; else if ("object" === typeof t) for (var n = 0, i = t.length; n < i; ++n)e(t[n]); else F = 0 | !!t }return e }, g.set = l, void 0 !== e && l(e), g }, LF = { animationIterationCount: 1, borderImageOutset: 1, borderImageSlice: 1, borderImageWidth: 1, boxFlex: 1, boxFlexGroup: 1, boxOrdinalGroup: 1, columnCount: 1, columns: 1, flex: 1, flexGrow: 1, flexPositive: 1, flexShrink: 1, flexNegative: 1, flexOrder: 1, gridRow: 1, gridRowEnd: 1, gridRowSpan: 1, gridRowStart: 1, gridColumn: 1, gridColumnEnd: 1, gridColumnSpan: 1, gridColumnStart: 1, msGridRow: 1, msGridRowSpan: 1, msGridColumn: 1, msGridColumnSpan: 1, fontWeight: 1, lineHeight: 1, opacity: 1, order: 1, orphans: 1, tabSize: 1, widows: 1, zIndex: 1, zoom: 1, WebkitLineClamp: 1, fillOpacity: 1, floodOpacity: 1, stopOpacity: 1, strokeDasharray: 1, strokeDashoffset: 1, strokeMiterlimit: 1, strokeOpacity: 1, strokeWidth: 1 }, zF = n(9791); function EF() { return (EF = Object.assign || function (e) { for (var t = 1; t < arguments.length; t++) { var n = arguments[t]; for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i]) } return e }).apply(this, arguments) } var TF = function (e, t) { for (var n = [e[0]], i = 0, r = t.length; i < r; i += 1)n.push(t[i], e[i + 1]); return n }, _F = function (e) { return null !== e && "object" == typeof e && "[object Object]" === (e.toString ? e.toString() : Object.prototype.toString.call(e)) && !(0, Oe.typeOf)(e) }, UF = Object.freeze([]), DF = Object.freeze({}); function PF(e) { return "function" == typeof e } function JF(e) { return e.displayName || e.name || "Component" } function OF(e) { return e && "string" == typeof e.styledComponentId } var jF = "undefined" != typeof process && void 0 !== { NODE_ENV: "production", PUBLIC_URL: ".", WDS_SOCKET_HOST: void 0, WDS_SOCKET_PATH: void 0, WDS_SOCKET_PORT: void 0, FAST_REFRESH: !0 } && ({ NODE_ENV: "production", PUBLIC_URL: ".", WDS_SOCKET_HOST: void 0, WDS_SOCKET_PATH: void 0, WDS_SOCKET_PORT: void 0, FAST_REFRESH: !0 }.REACT_APP_SC_ATTR || { NODE_ENV: "production", PUBLIC_URL: ".", WDS_SOCKET_HOST: void 0, WDS_SOCKET_PATH: void 0, WDS_SOCKET_PORT: void 0, FAST_REFRESH: !0 }.SC_ATTR) || "data-styled", QF = "undefined" != typeof window && "HTMLElement" in window, qF = Boolean("boolean" == typeof SC_DISABLE_SPEEDY ? SC_DISABLE_SPEEDY : "undefined" != typeof process && void 0 !== { NODE_ENV: "production", PUBLIC_URL: ".", WDS_SOCKET_HOST: void 0, WDS_SOCKET_PATH: void 0, WDS_SOCKET_PORT: void 0, FAST_REFRESH: !0 } && (void 0 !== { NODE_ENV: "production", PUBLIC_URL: ".", WDS_SOCKET_HOST: void 0, WDS_SOCKET_PATH: void 0, WDS_SOCKET_PORT: void 0, FAST_REFRESH: !0 }.REACT_APP_SC_DISABLE_SPEEDY && "" !== { NODE_ENV: "production", PUBLIC_URL: ".", WDS_SOCKET_HOST: void 0, WDS_SOCKET_PATH: void 0, WDS_SOCKET_PORT: void 0, FAST_REFRESH: !0 }.REACT_APP_SC_DISABLE_SPEEDY ? "false" !== { NODE_ENV: "production", PUBLIC_URL: ".", WDS_SOCKET_HOST: void 0, WDS_SOCKET_PATH: void 0, WDS_SOCKET_PORT: void 0, FAST_REFRESH: !0 }.REACT_APP_SC_DISABLE_SPEEDY && { NODE_ENV: "production", PUBLIC_URL: ".", WDS_SOCKET_HOST: void 0, WDS_SOCKET_PATH: void 0, WDS_SOCKET_PORT: void 0, FAST_REFRESH: !0 }.REACT_APP_SC_DISABLE_SPEEDY : void 0 !== { NODE_ENV: "production", PUBLIC_URL: ".", WDS_SOCKET_HOST: void 0, WDS_SOCKET_PATH: void 0, WDS_SOCKET_PORT: void 0, FAST_REFRESH: !0 }.SC_DISABLE_SPEEDY && "" !== { NODE_ENV: "production", PUBLIC_URL: ".", WDS_SOCKET_HOST: void 0, WDS_SOCKET_PATH: void 0, WDS_SOCKET_PORT: void 0, FAST_REFRESH: !0 }.SC_DISABLE_SPEEDY && ("false" !== { NODE_ENV: "production", PUBLIC_URL: ".", WDS_SOCKET_HOST: void 0, WDS_SOCKET_PATH: void 0, WDS_SOCKET_PORT: void 0, FAST_REFRESH: !0 }.SC_DISABLE_SPEEDY && { NODE_ENV: "production", PUBLIC_URL: ".", WDS_SOCKET_HOST: void 0, WDS_SOCKET_PATH: void 0, WDS_SOCKET_PORT: void 0, FAST_REFRESH: !0 }.SC_DISABLE_SPEEDY))); function $F(e) { for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++)n[i - 1] = arguments[i]; throw new Error("An error occurred. See https://git.io/JUIaE#" + e + " for more information." + (n.length > 0 ? " Args: " + n.join(", ") : "")) } var eN = function () { function e(e) { this.groupSizes = new Uint32Array(512), this.length = 512, this.tag = e } var t = e.prototype; return t.indexOfGroup = function (e) { for (var t = 0, n = 0; n < e; n++)t += this.groupSizes[n]; return t }, t.insertRules = function (e, t) { if (e >= this.groupSizes.length) { for (var n = this.groupSizes, i = n.length, r = i; e >= r;)(r <<= 1) < 0 && $F(16, "" + e); this.groupSizes = new Uint32Array(r), this.groupSizes.set(n), this.length = r; for (var a = i; a < r; a++)this.groupSizes[a] = 0 } for (var o = this.indexOfGroup(e + 1), s = 0, l = t.length; s < l; s++)this.tag.insertRule(o, t[s]) && (this.groupSizes[e]++, o++) }, t.clearGroup = function (e) { if (e < this.length) { var t = this.groupSizes[e], n = this.indexOfGroup(e), i = n + t; this.groupSizes[e] = 0; for (var r = n; r < i; r++)this.tag.deleteRule(n) } }, t.getGroup = function (e) { var t = ""; if (e >= this.length || 0 === this.groupSizes[e]) return t; for (var n = this.groupSizes[e], i = this.indexOfGroup(e), r = i + n, a = i; a < r; a++)t += this.tag.getRule(a) + "/*!sc*/\n"; return t }, e }(), tN = new Map, nN = new Map, iN = 1, rN = function (e) { if (tN.has(e)) return tN.get(e); for (; nN.has(iN);)iN++; var t = iN++; return tN.set(e, t), nN.set(t, e), t }, aN = function (e) { return nN.get(e) }, oN = function (e, t) { t >= iN && (iN = t + 1), tN.set(e, t), nN.set(t, e) }, sN = "style[" + jF + '][data-styled-version="5.3.11"]', lN = new RegExp("^" + jF + '\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'), gN = function (e, t, n) { for (var i, r = n.split(","), a = 0, o = r.length; a < o; a++)(i = r[a]) && e.registerName(t, i) }, cN = function (e, t) { for (var n = (t.textContent || "").split("/*!sc*/\n"), i = [], r = 0, a = n.length; r < a; r++) { var o = n[r].trim(); if (o) { var s = o.match(lN); if (s) { var l = 0 | parseInt(s[1], 10), g = s[2]; 0 !== l && (oN(g, l), gN(e, g, s[3]), e.getTag().insertRules(l, i)), i.length = 0 } else i.push(o) } } }, uN = function () { return n.nc }, CN = function (e) { var t = document.head, n = e || t, i = document.createElement("style"), r = function (e) { for (var t = e.childNodes, n = t.length; n >= 0; n--) { var i = t[n]; if (i && 1 === i.nodeType && i.hasAttribute(jF)) return i } }(n), a = void 0 !== r ? r.nextSibling : null; i.setAttribute(jF, "active"), i.setAttribute("data-styled-version", "5.3.11"); var o = uN(); return o && i.setAttribute("nonce", o), n.insertBefore(i, a), i }, dN = function () { function e(e) { var t = this.element = CN(e); t.appendChild(document.createTextNode("")), this.sheet = function (e) { if (e.sheet) return e.sheet; for (var t = document.styleSheets, n = 0, i = t.length; n < i; n++) { var r = t[n]; if (r.ownerNode === e) return r } $F(17) }(t), this.length = 0 } var t = e.prototype; return t.insertRule = function (e, t) { try { return this.sheet.insertRule(t, e), this.length++, !0 } catch (e) { return !1 } }, t.deleteRule = function (e) { this.sheet.deleteRule(e), this.length-- }, t.getRule = function (e) { var t = this.sheet.cssRules[e]; return void 0 !== t && "string" == typeof t.cssText ? t.cssText : "" }, e }(), IN = function () { function e(e) { var t = this.element = CN(e); this.nodes = t.childNodes, this.length = 0 } var t = e.prototype; return t.insertRule = function (e, t) { if (e <= this.length && e >= 0) { var n = document.createTextNode(t), i = this.nodes[e]; return this.element.insertBefore(n, i || null), this.length++, !0 } return !1 }, t.deleteRule = function (e) { this.element.removeChild(this.nodes[e]), this.length-- }, t.getRule = function (e) { return e < this.length ? this.nodes[e].textContent : "" }, e }(), hN = function () { function e(e) { this.rules = [], this.length = 0 } var t = e.prototype; return t.insertRule = function (e, t) { return e <= this.length && (this.rules.splice(e, 0, t), this.length++, !0) }, t.deleteRule = function (e) { this.rules.splice(e, 1), this.length-- }, t.getRule = function (e) { return e < this.length ? this.rules[e] : "" }, e }(), AN = QF, pN = { isServer: !QF, useCSSOMInjection: !qF }, fN = function () { function e(e, t, n) { void 0 === e && (e = DF), void 0 === t && (t = {}), this.options = EF({}, pN, {}, e), this.gs = t, this.names = new Map(n), this.server = !!e.isServer, !this.server && QF && AN && (AN = !1, function (e) { for (var t = document.querySelectorAll(sN), n = 0, i = t.length; n < i; n++) { var r = t[n]; r && "active" !== r.getAttribute(jF) && (cN(e, r), r.parentNode && r.parentNode.removeChild(r)) } }(this)) } e.registerId = function (e) { return rN(e) }; var t = e.prototype; return t.reconstructWithOptions = function (t, n) { return void 0 === n && (n = !0), new e(EF({}, this.options, {}, t), this.gs, n && this.names || void 0) }, t.allocateGSInstance = function (e) { return this.gs[e] = (this.gs[e] || 0) + 1 }, t.getTag = function () { return this.tag || (this.tag = (n = (t = this.options).isServer, i = t.useCSSOMInjection, r = t.target, e = n ? new hN(r) : i ? new dN(r) : new IN(r), new eN(e))); var e, t, n, i, r }, t.hasNameForId = function (e, t) { return this.names.has(e) && this.names.get(e).has(t) }, t.registerName = function (e, t) { if (rN(e), this.names.has(e)) this.names.get(e).add(t); else { var n = new Set; n.add(t), this.names.set(e, n) } }, t.insertRules = function (e, t, n) { this.registerName(e, t), this.getTag().insertRules(rN(e), n) }, t.clearNames = function (e) { this.names.has(e) && this.names.get(e).clear() }, t.clearRules = function (e) { this.getTag().clearGroup(rN(e)), this.clearNames(e) }, t.clearTag = function () { this.tag = void 0 }, t.toString = function () { return function (e) { for (var t = e.getTag(), n = t.length, i = "", r = 0; r < n; r++) { var a = aN(r); if (void 0 !== a) { var o = e.names.get(a), s = t.getGroup(r); if (o && s && o.size) { var l = jF + ".g" + r + '[id="' + a + '"]', g = ""; void 0 !== o && o.forEach((function (e) { e.length > 0 && (g += e + ",") })), i += "" + s + l + '{content:"' + g + '"}/*!sc*/\n' } } } return i }(this) }, e }(), mN = /(a)(d)/gi, vN = function (e) { return String.fromCharCode(e + (e > 25 ? 39 : 97)) }; function bN(e) { var t, n = ""; for (t = Math.abs(e); t > 52; t = t / 52 | 0)n = vN(t % 52) + n; return (vN(t % 52) + n).replace(mN, "$1-$2") } var yN = function (e, t) { for (var n = t.length; n;)e = 33 * e ^ t.charCodeAt(--n); return e }, GN = function (e) { return yN(5381, e) }; function BN(e) { for (var t = 0; t < e.length; t += 1) { var n = e[t]; if (PF(n) && !OF(n)) return !1 } return !0 } var ZN = GN("5.3.11"), wN = function () { function e(e, t, n) { this.rules = e, this.staticRulesId = "", this.isStatic = (void 0 === n || n.isStatic) && BN(e), this.componentId = t, this.baseHash = yN(ZN, t), this.baseStyle = n, fN.registerId(t) } return e.prototype.generateAndInjectStyles = function (e, t, n) { var i = this.componentId, r = []; if (this.baseStyle && r.push(this.baseStyle.generateAndInjectStyles(e, t, n)), this.isStatic && !n.hash) if (this.staticRulesId && t.hasNameForId(i, this.staticRulesId)) r.push(this.staticRulesId); else { var a = _N(this.rules, e, t, n).join(""), o = bN(yN(this.baseHash, a) >>> 0); if (!t.hasNameForId(i, o)) { var s = n(a, "." + o, void 0, i); t.insertRules(i, o, s) } r.push(o), this.staticRulesId = o } else { for (var l = this.rules.length, g = yN(this.baseHash, n.hash), c = "", u = 0; u < l; u++) { var C = this.rules[u]; if ("string" == typeof C) c += C; else if (C) { var d = _N(C, e, t, n), I = Array.isArray(d) ? d.join("") : d; g = yN(g, I + u), c += I } } if (c) { var h = bN(g >>> 0); if (!t.hasNameForId(i, h)) { var A = n(c, "." + h, void 0, i); t.insertRules(i, h, A) } r.push(h) } } return r.join(" ") }, e }(), SN = /^\s*\/\/.*$/gm, RN = [":", "[", ".", "#"]; function xN(e) { var t, n, i, r, a = void 0 === e ? DF : e, o = a.options, s = void 0 === o ? DF : o, l = a.plugins, g = void 0 === l ? UF : l, c = new KF(s), u = [], C = function (e) { function t(t) { if (t) try { e(t + "}") } catch (e) { } } return function (n, i, r, a, o, s, l, g, c, u) { switch (n) { case 1: if (0 === c && 64 === i.charCodeAt(0)) return e(i + ";"), ""; break; case 2: if (0 === g) return i + "/*|*/"; break; case 3: switch (g) { case 102: case 112: return e(r[0] + i), ""; default: return i + (0 === u ? "/*|*/" : "") }case -2: i.split("/*|*/}").forEach(t) } } }((function (e) { u.push(e) })), d = function (e, i, a) { return 0 === i && -1 !== RN.indexOf(a[n.length]) || a.match(r) ? e : "." + t }; function I(e, a, o, s) { void 0 === s && (s = "&"); var l = e.replace(SN, ""), g = a && o ? o + " " + a + " { " + l + " }" : l; return t = s, n = a, i = new RegExp("\\" + n + "\\b", "g"), r = new RegExp("(\\" + n + "\\b){2,}"), c(o || !a ? "" : a, g) } return c.use([].concat(g, [function (e, t, r) { 2 === e && r.length && r[0].lastIndexOf(n) > 0 && (r[0] = r[0].replace(i, d)) }, C, function (e) { if (-2 === e) { var t = u; return u = [], t } }])), I.hash = g.length ? g.reduce((function (e, t) { return t.name || $F(15), yN(e, t.name) }), 5381).toString() : "", I } var WN = t.createContext(), VN = (WN.Consumer, t.createContext()), kN = (VN.Consumer, new fN), HN = xN(); function MN() { return (0, t.useContext)(WN) || kN } function FN() { return (0, t.useContext)(VN) || HN } function NN(e) { var n = (0, t.useState)(e.stylisPlugins), i = n[0], r = n[1], a = MN(), o = (0, t.useMemo)((function () { var t = a; return e.sheet ? t = e.sheet : e.target && (t = t.reconstructWithOptions({ target: e.target }, !1)), e.disableCSSOMInjection && (t = t.reconstructWithOptions({ useCSSOMInjection: !1 })), t }), [e.disableCSSOMInjection, e.sheet, e.target]), s = (0, t.useMemo)((function () { return xN({ options: { prefix: !e.disableVendorPrefixes }, plugins: i }) }), [e.disableVendorPrefixes, i]); return (0, t.useEffect)((function () { YF()(i, e.stylisPlugins) || r(e.stylisPlugins) }), [e.stylisPlugins]), t.createElement(WN.Provider, { value: o }, t.createElement(VN.Provider, { value: s }, e.children)) } var XN = function () { function e(e, t) { var n = this; this.inject = function (e, t) { void 0 === t && (t = HN); var i = n.name + t.hash; e.hasNameForId(n.id, i) || e.insertRules(n.id, i, t(n.rules, i, "@keyframes")) }, this.toString = function () { return $F(12, String(n.name)) }, this.name = e, this.id = "sc-keyframes-" + e, this.rules = t } return e.prototype.getName = function (e) { return void 0 === e && (e = HN), this.name + e.hash }, e }(), YN = /([A-Z])/, KN = /([A-Z])/g, LN = /^ms-/, zN = function (e) { return "-" + e.toLowerCase() }; function EN(e) { return YN.test(e) ? e.replace(KN, zN).replace(LN, "-ms-") : e } var TN = function (e) { return null == e || !1 === e || "" === e }; function _N(e, t, n, i) { if (Array.isArray(e)) { for (var r, a = [], o = 0, s = e.length; o < s; o += 1)"" !== (r = _N(e[o], t, n, i)) && (Array.isArray(r) ? a.push.apply(a, r) : a.push(r)); return a } return TN(e) ? "" : OF(e) ? "." + e.styledComponentId : PF(e) ? "function" != typeof (l = e) || l.prototype && l.prototype.isReactComponent || !t ? e : _N(e(t), t, n, i) : e instanceof XN ? n ? (e.inject(n, i), e.getName(i)) : e : _F(e) ? function e(t, n) { var i, r, a = []; for (var o in t) t.hasOwnProperty(o) && !TN(t[o]) && (Array.isArray(t[o]) && t[o].isCss || PF(t[o]) ? a.push(EN(o) + ":", t[o], ";") : _F(t[o]) ? a.push.apply(a, e(t[o], o)) : a.push(EN(o) + ": " + (i = o, (null == (r = t[o]) || "boolean" == typeof r || "" === r ? "" : "number" != typeof r || 0 === r || i in LF || i.startsWith("--") ? String(r).trim() : r + "px") + ";"))); return n ? [n + " {"].concat(a, ["}"]) : a }(e) : e.toString(); var l } var UN = function (e) { return Array.isArray(e) && (e.isCss = !0), e }; function DN(e) { for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++)n[i - 1] = arguments[i]; return PF(e) || _F(e) ? UN(_N(TF(UF, [e].concat(n)))) : 0 === n.length && 1 === e.length && "string" == typeof e[0] ? e : UN(_N(TF(e, n))) } new Set; var PN = function (e, t, n) { return void 0 === n && (n = DF), e.theme !== n.theme && e.theme || t || n.theme }, JN = /[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g, ON = /(^-|-$)/g; function jN(e) { return e.replace(JN, "-").replace(ON, "") } var QN = function (e) { return bN(GN(e) >>> 0) }; function qN(e) { return "string" == typeof e && !0 } var $N = function (e) { return "function" == typeof e || "object" == typeof e && null !== e && !Array.isArray(e) }, eX = function (e) { return "__proto__" !== e && "constructor" !== e && "prototype" !== e }; function tX(e, t, n) { var i = e[n]; $N(t) && $N(i) ? nX(i, t) : e[n] = t } function nX(e) { for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++)n[i - 1] = arguments[i]; for (var r = 0, a = n; r < a.length; r++) { var o = a[r]; if ($N(o)) for (var s in o) eX(s) && tX(e, o[s], s) } return e } var iX = t.createContext(); iX.Consumer; var rX = {}; function aX(e, n, i) { var r = OF(e), a = !qN(e), o = n.attrs, s = void 0 === o ? UF : o, l = n.componentId, g = void 0 === l ? function (e, t) { var n = "string" != typeof e ? "sc" : jN(e); rX[n] = (rX[n] || 0) + 1; var i = n + "-" + QN("5.3.11" + n + rX[n]); return t ? t + "-" + i : i }(n.displayName, n.parentComponentId) : l, c = n.displayName, u = void 0 === c ? function (e) { return qN(e) ? "styled." + e : "Styled(" + JF(e) + ")" }(e) : c, C = n.displayName && n.componentId ? jN(n.displayName) + "-" + n.componentId : n.componentId || g, d = r && e.attrs ? Array.prototype.concat(e.attrs, s).filter(Boolean) : s, I = n.shouldForwardProp; r && e.shouldForwardProp && (I = n.shouldForwardProp ? function (t, i, r) { return e.shouldForwardProp(t, i, r) && n.shouldForwardProp(t, i, r) } : e.shouldForwardProp); var h, A = new wN(i, C, r ? e.componentStyle : void 0), p = A.isStatic && 0 === s.length, f = function (e, n) { return function (e, n, i, r) { var a = e.attrs, o = e.componentStyle, s = e.defaultProps, l = e.foldedComponentIds, g = e.shouldForwardProp, c = e.styledComponentId, u = e.target, C = function (e, t, n) { void 0 === e && (e = DF); var i = EF({}, t, { theme: e }), r = {}; return n.forEach((function (e) { var t, n, a, o = e; for (t in PF(o) && (o = o(i)), o) i[t] = r[t] = "className" === t ? (n = r[t], a = o[t], n && a ? n + " " + a : n || a) : o[t] })), [i, r] }(PN(n, (0, t.useContext)(iX), s) || DF, n, a), d = C[0], I = C[1], h = function (e, t, n, i) { var r = MN(), a = FN(); return t ? e.generateAndInjectStyles(DF, r, a) : e.generateAndInjectStyles(n, r, a) }(o, r, d), A = i, p = I.$as || n.$as || I.as || n.as || u, f = qN(p), m = I !== n ? EF({}, n, {}, I) : n, v = {}; for (var b in m) "$" !== b[0] && "as" !== b && ("forwardedAs" === b ? v.as = m[b] : (g ? g(b, zF.Z, p) : !f || (0, zF.Z)(b)) && (v[b] = m[b])); return n.style && I.style !== n.style && (v.style = EF({}, n.style, {}, I.style)), v.className = Array.prototype.concat(l, c, h !== c ? h : null, n.className, I.className).filter(Boolean).join(" "), v.ref = A, (0, t.createElement)(p, v) }(h, e, n, p) }; return f.displayName = u, (h = t.forwardRef(f)).attrs = d, h.componentStyle = A, h.displayName = u, h.shouldForwardProp = I, h.foldedComponentIds = r ? Array.prototype.concat(e.foldedComponentIds, e.styledComponentId) : UF, h.styledComponentId = C, h.target = r ? e.target : e, h.withComponent = function (e) { var t = n.componentId, r = function (e, t) { if (null == e) return {}; var n, i, r = {}, a = Object.keys(e); for (i = 0; i < a.length; i++)n = a[i], t.indexOf(n) >= 0 || (r[n] = e[n]); return r }(n, ["componentId"]), a = t && t + "-" + (qN(e) ? e : jN(JF(e))); return aX(e, EF({}, r, { attrs: d, componentId: a }), i) }, Object.defineProperty(h, "defaultProps", { get: function () { return this._foldedDefaultProps }, set: function (t) { this._foldedDefaultProps = r ? nX({}, e.defaultProps, t) : t } }), Object.defineProperty(h, "toString", { value: function () { return "." + h.styledComponentId } }), a && F()(h, e, { attrs: !0, componentStyle: !0, displayName: !0, foldedComponentIds: !0, shouldForwardProp: !0, styledComponentId: !0, target: !0, withComponent: !0 }), h } var oX = function (e) { return function e(t, n, i) { if (void 0 === i && (i = DF), !(0, Oe.isValidElementType)(n)) return $F(1, String(n)); var r = function () { return t(n, i, DN.apply(void 0, arguments)) }; return r.withConfig = function (r) { return e(t, n, EF({}, i, {}, r)) }, r.attrs = function (r) { return e(t, n, EF({}, i, { attrs: Array.prototype.concat(i.attrs, r).filter(Boolean) })) }, r }(aX, e) };["a", "abbr", "address", "area", "article", "aside", "audio", "b", "base", "bdi", "bdo", "big", "blockquote", "body", "br", "button", "canvas", "caption", "cite", "code", "col", "colgroup", "data", "datalist", "dd", "del", "details", "dfn", "dialog", "div", "dl", "dt", "em", "embed", "fieldset", "figcaption", "figure", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "head", "header", "hgroup", "hr", "html", "i", "iframe", "img", "input", "ins", "kbd", "keygen", "label", "legend", "li", "link", "main", "map", "mark", "marquee", "menu", "menuitem", "meta", "meter", "nav", "noscript", "object", "ol", "optgroup", "option", "output", "p", "param", "picture", "pre", "progress", "q", "rp", "rt", "ruby", "s", "samp", "script", "section", "select", "small", "source", "span", "strong", "style", "sub", "summary", "sup", "table", "tbody", "td", "textarea", "tfoot", "th", "thead", "time", "title", "tr", "track", "u", "ul", "var", "video", "wbr", "circle", "clipPath", "defs", "ellipse", "foreignObject", "g", "image", "line", "linearGradient", "marker", "mask", "path", "pattern", "polygon", "polyline", "radialGradient", "rect", "stop", "svg", "text", "textPath", "tspan"].forEach((function (e) { oX[e] = oX(e) })); !function () { function e(e, t) { this.rules = e, this.componentId = t, this.isStatic = BN(e), fN.registerId(this.componentId + 1) } var t = e.prototype; t.createStyles = function (e, t, n, i) { var r = i(_N(this.rules, t, n, i).join(""), ""), a = this.componentId + e; n.insertRules(a, a, r) }, t.removeStyles = function (e, t) { t.clearRules(this.componentId + e) }, t.renderStyles = function (e, t, n, i) { e > 2 && fN.registerId(this.componentId + e), this.removeStyles(e, n), this.createStyles(e, t, n, i) } }(); function sX(e) { for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++)n[i - 1] = arguments[i]; var r = DN.apply(void 0, [e].concat(n)).join(""), a = QN(r); return new XN(a, r) } !function () { function e() { var e = this; this._emitSheetCSS = function () { var t = e.instance.toString(); if (!t) return ""; var n = uN(); return "<style " + [n && 'nonce="' + n + '"', jF + '="true"', 'data-styled-version="5.3.11"'].filter(Boolean).join(" ") + ">" + t + "</style>" }, this.getStyleTags = function () { return e.sealed ? $F(2) : e._emitSheetCSS() }, this.getStyleElement = function () { var n; if (e.sealed) return $F(2); var i = ((n = {})[jF] = "", n["data-styled-version"] = "5.3.11", n.dangerouslySetInnerHTML = { __html: e.instance.toString() }, n), r = uN(); return r && (i.nonce = r), [t.createElement("style", EF({}, i, { key: "sc-0-0" }))] }, this.seal = function () { e.sealed = !0 }, this.instance = new fN({ isServer: !0 }), this.sealed = !1 } var n = e.prototype; n.collectStyles = function (e) { return this.sealed ? $F(2) : t.createElement(NN, { sheet: this.instance }, e) }, n.interleaveWithNodeStream = function (e) { return $F(3) } }(); var lX, gX, cX = oX, uX = function (e, t) { return Object.defineProperty ? Object.defineProperty(e, "raw", { value: t }) : e.raw = t, e }, CX = 242.776657104492, dX = sX(lX || (lX = uX(["\n  12.5% {\n    stroke-dasharray: ", "px, ", "px;\n    stroke-dashoffset: -", "px;\n  }\n  43.75% {\n    stroke-dasharray: ", "px, ", "px;\n    stroke-dashoffset: -", "px;\n  }\n  100% {\n    stroke-dasharray: ", "px, ", "px;\n    stroke-dashoffset: -", "px;\n  }\n"], ["\n  12.5% {\n    stroke-dasharray: ", "px, ", "px;\n    stroke-dashoffset: -", "px;\n  }\n  43.75% {\n    stroke-dasharray: ", "px, ", "px;\n    stroke-dashoffset: -", "px;\n  }\n  100% {\n    stroke-dasharray: ", "px, ", "px;\n    stroke-dashoffset: -", "px;\n  }\n"])), .14 * CX, CX, .11 * CX, .35 * CX, CX, .35 * CX, .01 * CX, CX, .99 * CX), IX = (cX.path(gX || (gX = uX(["\n  stroke-dasharray: ", "px, ", ";\n  stroke-dashoffset: 0;\n  animation: ", " ", "s linear infinite;\n"], ["\n  stroke-dasharray: ", "px, ", ";\n  stroke-dashoffset: 0;\n  animation: ", " ", "s linear infinite;\n"])), .01 * CX, CX, dX, 1.6), function (e) { return { display: e ? "flex" : "none" } }), hX = function () { return hX = Object.assign || function (e) { for (var t, n = 1, i = arguments.length; n < i; n++)for (var r in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]); return e }, hX.apply(this, arguments) }, AX = function (e) { var n = e.radius, i = void 0 === n ? 45 : n, r = e.strokeWidth, a = void 0 === r ? 5 : r, o = e.color, s = void 0 === o ? "#4fa94d" : o, l = e.secondaryColor, g = e.ariaLabel, c = void 0 === g ? "revolving-dot-loading" : g, u = e.wrapperStyle, C = e.wrapperClass, d = e.visible, I = void 0 === d || d; return t.createElement("div", hX({ style: hX(hX({}, IX(I)), u), className: C, "aria-label": c, "data-testid": "revolving-dot-loading" }, NF), t.createElement("svg", { version: "1.1", width: "calc(".concat(i, " * 2.5)"), height: "calc(".concat(i, " * 2.5)"), xmlns: "http://www.w3.org/2000/svg", x: "0px", y: "0px", "data-testid": "revolving-dot-svg" }, t.createElement("circle", { fill: "none", stroke: l || s, strokeWidth: a, cx: "calc(".concat(i, " * 1.28)"), cy: "calc(".concat(i, " * 1.28)"), r: i, style: { opacity: .5 } }), t.createElement("circle", { fill: s, stroke: s, strokeWidth: "3", cx: "calc(".concat(i, " * 1.28)"), cy: "calc(".concat(i, " / 3.5)"), r: "calc(".concat(i, " / 5)"), style: { transformOrigin: "50% 50%" } }, t.createElement("animateTransform", { attributeName: "transform", dur: "2s", type: "rotate", from: "0", to: "360", repeatCount: "indefinite" })))) }, pX = function (e, t) { return function () { var n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; if ("undefined" !== typeof n[e]) return n[e]; if (e && e.indexOf(".") > 0) { for (var i = e.split("."), r = i.length, a = n[i[0]], o = 1; null != a && o < r;)a = a[i[o]], o += 1; if ("undefined" !== typeof a) return a } return t } }; var fX, mX, vX, bX = function (e, t) { return Object.defineProperty ? Object.defineProperty(e, "raw", { value: t }) : e.raw = t, e }, yX = sX(fX || (fX = bX(["\n to {\n    transform: rotate(360deg);\n  }\n"], ["\n to {\n    transform: rotate(360deg);\n  }\n"]))); cX.svg(mX || (mX = bX(["\n  animation: ", " 0.75s steps(12, end) infinite;\n  animation-duration: ", "s;\n"], ["\n  animation: ", " 0.75s steps(12, end) infinite;\n  animation-duration: ", "s;\n"])), yX, pX("speed", "0.75")), cX.polyline(vX || (vX = bX(["\n  stroke-width: ", "px;\n  stroke-linecap: round;\n\n  &:nth-child(12n + 0) {\n    stroke-opacity: 0.08;\n  }\n\n  &:nth-child(12n + 1) {\n    stroke-opacity: 0.17;\n  }\n\n  &:nth-child(12n + 2) {\n    stroke-opacity: 0.25;\n  }\n\n  &:nth-child(12n + 3) {\n    stroke-opacity: 0.33;\n  }\n\n  &:nth-child(12n + 4) {\n    stroke-opacity: 0.42;\n  }\n\n  &:nth-child(12n + 5) {\n    stroke-opacity: 0.5;\n  }\n\n  &:nth-child(12n + 6) {\n    stroke-opacity: 0.58;\n  }\n\n  &:nth-child(12n + 7) {\n    stroke-opacity: 0.66;\n  }\n\n  &:nth-child(12n + 8) {\n    stroke-opacity: 0.75;\n  }\n\n  &:nth-child(12n + 9) {\n    stroke-opacity: 0.83;\n  }\n\n  &:nth-child(12n + 11) {\n    stroke-opacity: 0.92;\n  }\n"], ["\n  stroke-width: ", "px;\n  stroke-linecap: round;\n\n  &:nth-child(12n + 0) {\n    stroke-opacity: 0.08;\n  }\n\n  &:nth-child(12n + 1) {\n    stroke-opacity: 0.17;\n  }\n\n  &:nth-child(12n + 2) {\n    stroke-opacity: 0.25;\n  }\n\n  &:nth-child(12n + 3) {\n    stroke-opacity: 0.33;\n  }\n\n  &:nth-child(12n + 4) {\n    stroke-opacity: 0.42;\n  }\n\n  &:nth-child(12n + 5) {\n    stroke-opacity: 0.5;\n  }\n\n  &:nth-child(12n + 6) {\n    stroke-opacity: 0.58;\n  }\n\n  &:nth-child(12n + 7) {\n    stroke-opacity: 0.66;\n  }\n\n  &:nth-child(12n + 8) {\n    stroke-opacity: 0.75;\n  }\n\n  &:nth-child(12n + 9) {\n    stroke-opacity: 0.83;\n  }\n\n  &:nth-child(12n + 11) {\n    stroke-opacity: 0.92;\n  }\n"])), (function (e) { return e.width })); var GX, BX, ZX, wX = function (e, t) { return Object.defineProperty ? Object.defineProperty(e, "raw", { value: t }) : e.raw = t, e }, SX = sX(GX || (GX = wX(["\n to {\n    stroke-dashoffset: 136;\n  }\n"], ["\n to {\n    stroke-dashoffset: 136;\n  }\n"]))); cX.polygon(BX || (BX = wX(["\n  stroke-dasharray: 17;\n  animation: ", " 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;\n"], ["\n  stroke-dasharray: 17;\n  animation: ", " 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;\n"])), SX), cX.svg(ZX || (ZX = wX(["\n  transform-origin: 50% 65%;\n"], ["\n  transform-origin: 50% 65%;\n"]))); var RX = function () { return (0, K.jsx)("div", { style: { display: "flex", alignItems: "center", justifyContent: "center", height: "100vh" }, children: (0, K.jsx)(AX, { radius: "25", strokeWidth: "3", color: "white", secondaryColor: "#1bfaff", ariaLabel: "revolving-dot-loading", wrapperStyle: { width: 150, height: "150px", background: "#022027" }, wrapperClass: "", visible: !0 }) }) }, xX = function () { var e = (0, t.useState)(!0), n = (0, r.Z)(e, 2), i = n[0], a = n[1], o = rt(), s = i ? "Proof of Work" : "Proof of Stake", l = { background: i ? "url('/path-to-your-background-image.jpg')" : "none", backgroundSize: "cover", backgroundPosition: "center" }; return (0, K.jsxs)("div", { style: l, children: [(0, K.jsxs)("div", { className: "switches", children: [(0, K.jsx)("button", { className: "powbtn ".concat(i ? "active" : ""), onClick: function () { a(!0), o(ii()) }, children: "POS" }), (0, K.jsx)("button", { className: "posbtn ".concat(i ? "" : "active"), onClick: function () { a(!1), o(ii()) }, children: "POW" })] }), (0, K.jsx)(FF, { title: s }), (0, K.jsx)(t.Suspense, { fallback: (0, K.jsx)(RX, {}), children: i ? (0, K.jsx)(WR, {}) : (0, K.jsx)(MF, {}) })] }) }, WX = function (e) { var t, n = Ln(), i = e || {}, r = i.reducer, a = void 0 === r ? void 0 : r, o = i.middleware, s = void 0 === o ? n() : o, l = i.devTools, g = void 0 === l || l, c = i.preloadedState, u = void 0 === c ? void 0 : c, C = i.enhancers, d = void 0 === C ? void 0 : C; if ("function" === typeof a) t = a; else { if (!Fn(a)) throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers'); t = hn(a) } var I = s; "function" === typeof I && (I = I(n)); var h = pn.apply(void 0, I), A = An; g && (A = Mn(Vn({ trace: !1 }, "object" === typeof g && g))); var p = new Yn(h), f = p; return Array.isArray(d) ? f = Gn([h], d) : "function" === typeof d && (f = d(p)), In(t, u, A.apply(void 0, f)) }({ reducer: { BlockChainReducer: ai } }); var VX = function () { return (0, K.jsx)(K.Fragment, { children: (0, K.jsx)("div", { className: "App", children: (0, K.jsx)("div", { className: "container-fluid container-full-height", children: (0, K.jsx)($e, { store: WX, children: (0, K.jsx)(xX, {}) }) }) }) }) }, kX = function (e) { e && e instanceof Function && n.e(787).then(n.bind(n, 787)).then((function (t) { var n = t.getCLS, i = t.getFID, r = t.getFCP, a = t.getLCP, o = t.getTTFB; n(e), i(e), r(e), a(e), o(e) })) }; i.render((0, K.jsx)(VX, {}), document.getElementById("root")), kX() }() }();
//# sourceMappingURL=main.c9947a9c.js.map